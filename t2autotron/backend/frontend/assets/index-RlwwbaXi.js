function db(a,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Ah(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var lf={exports:{}},Co={};var Yy;function sk(){if(Yy)return Co;Yy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Co.Fragment=t,Co.jsx=r,Co.jsxs=r,Co}var Py;function ok(){return Py||(Py=1,lf.exports=sk()),lf.exports}var h=ok(),cf={exports:{}},We={};var Fy;function lk(){if(Fy)return We;Fy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),k=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=k&&v[k]||v["@@iterator"],typeof v=="function"?v:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,H={};function ne(v,T,A){this.props=v,this.context=T,this.refs=H,this.updater=A||D}ne.prototype.isReactComponent={},ne.prototype.setState=function(v,T){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,T,"setState")},ne.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function J(){}J.prototype=ne.prototype;function B(v,T,A){this.props=v,this.context=T,this.refs=H,this.updater=A||D}var q=B.prototype=new J;q.constructor=B,X(q,ne.prototype),q.isPureReactComponent=!0;var ye=Array.isArray;function ke(){}var I={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function le(v,T,A){var R=A.ref;return{$$typeof:a,type:v,key:T,ref:R!==void 0?R:null,props:A}}function me(v,T){return le(v.type,T,v.props)}function ze(v){return typeof v=="object"&&v!==null&&v.$$typeof===a}function De(v){var T={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(A){return T[A]})}var Je=/\/+/g;function nt(v,T){return typeof v=="object"&&v!==null&&v.key!=null?De(""+v.key):T.toString(36)}function Qe(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(ke,ke):(v.status="pending",v.then(function(T){v.status==="pending"&&(v.status="fulfilled",v.value=T)},function(T){v.status==="pending"&&(v.status="rejected",v.reason=T)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function Y(v,T,A,R,ae){var de=typeof v;(de==="undefined"||de==="boolean")&&(v=null);var Se=!1;if(v===null)Se=!0;else switch(de){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(v.$$typeof){case a:case t:Se=!0;break;case w:return Se=v._init,Y(Se(v._payload),T,A,R,ae)}}if(Se)return ae=ae(v),Se=R===""?"."+nt(v,0):R,ye(ae)?(A="",Se!=null&&(A=Se.replace(Je,"$&/")+"/"),Y(ae,T,A,"",function(vt){return vt})):ae!=null&&(ze(ae)&&(ae=me(ae,A+(ae.key==null||v&&v.key===ae.key?"":(""+ae.key).replace(Je,"$&/")+"/")+Se)),T.push(ae)),1;Se=0;var $e=R===""?".":R+":";if(ye(v))for(var Pe=0;Pe<v.length;Pe++)R=v[Pe],de=$e+nt(R,Pe),Se+=Y(R,T,A,de,ae);else if(Pe=E(v),typeof Pe=="function")for(v=Pe.call(v),Pe=0;!(R=v.next()).done;)R=R.value,de=$e+nt(R,Pe++),Se+=Y(R,T,A,de,ae);else if(de==="object"){if(typeof v.then=="function")return Y(Qe(v),T,A,R,ae);throw T=String(v),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return Se}function he(v,T,A){if(v==null)return v;var R=[],ae=0;return Y(v,R,"","",function(de){return T.call(A,de,ae++)}),R}function ge(v){if(v._status===-1){var T=v._result;T=T(),T.then(function(A){(v._status===0||v._status===-1)&&(v._status=1,v._result=A)},function(A){(v._status===0||v._status===-1)&&(v._status=2,v._result=A)}),v._status===-1&&(v._status=0,v._result=T)}if(v._status===1)return v._result.default;throw v._result}var Le=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},ee={map:he,forEach:function(v,T,A){he(v,function(){T.apply(this,arguments)},A)},count:function(v){var T=0;return he(v,function(){T++}),T},toArray:function(v){return he(v,function(T){return T})||[]},only:function(v){if(!ze(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return We.Activity=b,We.Children=ee,We.Component=ne,We.Fragment=r,We.Profiler=l,We.PureComponent=B,We.StrictMode=s,We.Suspense=m,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,We.__COMPILER_RUNTIME={__proto__:null,c:function(v){return I.H.useMemoCache(v)}},We.cache=function(v){return function(){return v.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(v,T,A){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var R=X({},v.props),ae=v.key;if(T!=null)for(de in T.key!==void 0&&(ae=""+T.key),T)!pe.call(T,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&T.ref===void 0||(R[de]=T[de]);var de=arguments.length-2;if(de===1)R.children=A;else if(1<de){for(var Se=Array(de),$e=0;$e<de;$e++)Se[$e]=arguments[$e+2];R.children=Se}return le(v.type,ae,R)},We.createContext=function(v){return v={$$typeof:d,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:c,_context:v},v},We.createElement=function(v,T,A){var R,ae={},de=null;if(T!=null)for(R in T.key!==void 0&&(de=""+T.key),T)pe.call(T,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(ae[R]=T[R]);var Se=arguments.length-2;if(Se===1)ae.children=A;else if(1<Se){for(var $e=Array(Se),Pe=0;Pe<Se;Pe++)$e[Pe]=arguments[Pe+2];ae.children=$e}if(v&&v.defaultProps)for(R in Se=v.defaultProps,Se)ae[R]===void 0&&(ae[R]=Se[R]);return le(v,de,ae)},We.createRef=function(){return{current:null}},We.forwardRef=function(v){return{$$typeof:p,render:v}},We.isValidElement=ze,We.lazy=function(v){return{$$typeof:w,_payload:{_status:-1,_result:v},_init:ge}},We.memo=function(v,T){return{$$typeof:g,type:v,compare:T===void 0?null:T}},We.startTransition=function(v){var T=I.T,A={};I.T=A;try{var R=v(),ae=I.S;ae!==null&&ae(A,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(ke,Le)}catch(de){Le(de)}finally{T!==null&&A.types!==null&&(T.types=A.types),I.T=T}},We.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},We.use=function(v){return I.H.use(v)},We.useActionState=function(v,T,A){return I.H.useActionState(v,T,A)},We.useCallback=function(v,T){return I.H.useCallback(v,T)},We.useContext=function(v){return I.H.useContext(v)},We.useDebugValue=function(){},We.useDeferredValue=function(v,T){return I.H.useDeferredValue(v,T)},We.useEffect=function(v,T){return I.H.useEffect(v,T)},We.useEffectEvent=function(v){return I.H.useEffectEvent(v)},We.useId=function(){return I.H.useId()},We.useImperativeHandle=function(v,T,A){return I.H.useImperativeHandle(v,T,A)},We.useInsertionEffect=function(v,T){return I.H.useInsertionEffect(v,T)},We.useLayoutEffect=function(v,T){return I.H.useLayoutEffect(v,T)},We.useMemo=function(v,T){return I.H.useMemo(v,T)},We.useOptimistic=function(v,T){return I.H.useOptimistic(v,T)},We.useReducer=function(v,T,A){return I.H.useReducer(v,T,A)},We.useRef=function(v){return I.H.useRef(v)},We.useState=function(v){return I.H.useState(v)},We.useSyncExternalStore=function(v,T,A){return I.H.useSyncExternalStore(v,T,A)},We.useTransition=function(){return I.H.useTransition()},We.version="19.2.0",We}var Zy;function _h(){return Zy||(Zy=1,cf.exports=lk()),cf.exports}var x=_h();const Ea=Ah(x),ck=db({__proto__:null,default:Ea},[x]);var uf={exports:{}},To={},df={exports:{}},ff={};var Xy;function uk(){return Xy||(Xy=1,(function(a){function t(Y,he){var ge=Y.length;Y.push(he);e:for(;0<ge;){var Le=ge-1>>>1,ee=Y[Le];if(0<l(ee,he))Y[Le]=he,Y[ge]=ee,ge=Le;else break e}}function r(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var he=Y[0],ge=Y.pop();if(ge!==he){Y[0]=ge;e:for(var Le=0,ee=Y.length,v=ee>>>1;Le<v;){var T=2*(Le+1)-1,A=Y[T],R=T+1,ae=Y[R];if(0>l(A,ge))R<ee&&0>l(ae,A)?(Y[Le]=ae,Y[R]=ge,Le=R):(Y[Le]=A,Y[T]=ge,Le=T);else if(R<ee&&0>l(ae,ge))Y[Le]=ae,Y[R]=ge,Le=R;else break e}}return he}function l(Y,he){var ge=Y.sortIndex-he.sortIndex;return ge!==0?ge:Y.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();a.unstable_now=function(){return d.now()-p}}var m=[],g=[],w=1,b=null,k=3,E=!1,D=!1,X=!1,H=!1,ne=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var he=r(g);he!==null;){if(he.callback===null)s(g);else if(he.startTime<=Y)s(g),he.sortIndex=he.expirationTime,t(m,he);else break;he=r(g)}}function ye(Y){if(X=!1,q(Y),!D)if(r(m)!==null)D=!0,ke||(ke=!0,De());else{var he=r(g);he!==null&&Qe(ye,he.startTime-Y)}}var ke=!1,I=-1,pe=5,le=-1;function me(){return H?!0:!(a.unstable_now()-le<pe)}function ze(){if(H=!1,ke){var Y=a.unstable_now();le=Y;var he=!0;try{e:{D=!1,X&&(X=!1,J(I),I=-1),E=!0;var ge=k;try{t:{for(q(Y),b=r(m);b!==null&&!(b.expirationTime>Y&&me());){var Le=b.callback;if(typeof Le=="function"){b.callback=null,k=b.priorityLevel;var ee=Le(b.expirationTime<=Y);if(Y=a.unstable_now(),typeof ee=="function"){b.callback=ee,q(Y),he=!0;break t}b===r(m)&&s(m),q(Y)}else s(m);b=r(m)}if(b!==null)he=!0;else{var v=r(g);v!==null&&Qe(ye,v.startTime-Y),he=!1}}break e}finally{b=null,k=ge,E=!1}he=void 0}}finally{he?De():ke=!1}}}var De;if(typeof B=="function")De=function(){B(ze)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,nt=Je.port2;Je.port1.onmessage=ze,De=function(){nt.postMessage(null)}}else De=function(){ne(ze,0)};function Qe(Y,he){I=ne(function(){Y(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return k},a.unstable_next=function(Y){switch(k){case 1:case 2:case 3:var he=3;break;default:he=k}var ge=k;k=he;try{return Y()}finally{k=ge}},a.unstable_requestPaint=function(){H=!0},a.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=k;k=Y;try{return he()}finally{k=ge}},a.unstable_scheduleCallback=function(Y,he,ge){var Le=a.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Le+ge:Le):ge=Le,Y){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ge+ee,Y={id:w++,callback:he,priorityLevel:Y,startTime:ge,expirationTime:ee,sortIndex:-1},ge>Le?(Y.sortIndex=ge,t(g,Y),r(m)===null&&Y===r(g)&&(X?(J(I),I=-1):X=!0,Qe(ye,ge-Le))):(Y.sortIndex=ee,t(m,Y),D||E||(D=!0,ke||(ke=!0,De()))),Y},a.unstable_shouldYield=me,a.unstable_wrapCallback=function(Y){var he=k;return function(){var ge=k;k=he;try{return Y.apply(this,arguments)}finally{k=ge}}}})(ff)),ff}var Ky;function dk(){return Ky||(Ky=1,df.exports=uk()),df.exports}var hf={exports:{}},Hn={};var Qy;function fk(){if(Qy)return Hn;Qy=1;var a=_h();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,w){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:b==null?null:""+b,children:m,containerInfo:g,implementation:w}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Hn.createPortal=function(m,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(m,g,null,w)},Hn.flushSync=function(m){var g=d.T,w=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=w,s.d.f()}},Hn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Hn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Hn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var w=g.as,b=p(w,g.crossOrigin),k=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;w==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:k,fetchPriority:E}):w==="script"&&s.d.X(m,{crossOrigin:b,integrity:k,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var w=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Hn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var w=g.as,b=p(w,g.crossOrigin);s.d.L(m,w,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(m,g){if(typeof m=="string")if(g){var w=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Hn.requestFormReset=function(m){s.d.r(m)},Hn.unstable_batchedUpdates=function(m,g){return m(g)},Hn.useFormState=function(m,g,w){return d.H.useFormState(m,g,w)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.0",Hn}var Wy;function fb(){if(Wy)return hf.exports;Wy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),hf.exports=fk(),hf.exports}var Jy;function hk(){if(Jy)return To;Jy=1;var a=dk(),t=_h(),r=fb();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),n;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var y=!1,S=u.child;S;){if(S===i){y=!0,i=u,o=f;break}if(S===o){y=!0,o=u,i=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===i){y=!0,i=f,o=u;break}if(S===o){y=!0,o=f,i=u;break}S=S.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function w(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=w(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,k=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),J=Symbol.for("react.consumer"),B=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),ke=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),le=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),ze=Symbol.iterator;function De(e){return e===null||typeof e!="object"?null:(e=ze&&e[ze]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Symbol.for("react.client.reference");function nt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case ne:return"Profiler";case H:return"StrictMode";case ye:return"Suspense";case ke:return"SuspenseList";case le:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case B:return e.displayName||"Context";case J:return(e._context.displayName||"Context")+".Consumer";case q:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case I:return n=e.displayName||null,n!==null?n:nt(e.type)||"Memo";case pe:n=e._payload,e=e._init;try{return nt(e(n))}catch{}}return null}var Qe=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Le=[],ee=-1;function v(e){return{current:e}}function T(e){0>ee||(e.current=Le[ee],Le[ee]=null,ee--)}function A(e,n){ee++,Le[ee]=e.current,e.current=n}var R=v(null),ae=v(null),de=v(null),Se=v(null);function $e(e,n){switch(A(de,n),A(ae,e),A(R,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?py(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=py(n),e=my(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}T(R),A(R,e)}function Pe(){T(R),T(ae),T(de)}function vt(e){e.memoizedState!==null&&A(Se,e);var n=R.current,i=my(n,e.type);n!==i&&(A(ae,e),A(R,i))}function $t(e){ae.current===e&&(T(R),T(ae)),Se.current===e&&(T(Se),So._currentValue=ge)}var Rt,ln;function st(e){if(Rt===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Rt=n&&n[1]||"",ln=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Rt+e+ln}var zt=!1;function Mn(e,n){if(!e||zt)return"";zt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(W){var V=W}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(W){V=W}e.call(ce.prototype)}}else{try{throw Error()}catch(W){V=W}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(W){if(W&&V&&typeof W.stack=="string")return[W.stack,V.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var j=y.split(`
`),U=S.split(`
`);for(u=o=0;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;for(;u<U.length&&!U[u].includes("DetermineComponentFrameRoot");)u++;if(o===j.length||u===U.length)for(o=j.length-1,u=U.length-1;1<=o&&0<=u&&j[o]!==U[u];)u--;for(;1<=o&&0<=u;o--,u--)if(j[o]!==U[u]){if(o!==1||u!==1)do if(o--,u--,0>u||j[o]!==U[u]){var re=`
`+j[o].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=o&&0<=u);break}}}finally{zt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?st(i):""}function Fe(e,n){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return e.child!==n&&n!==null?st("Suspense Fallback"):st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return Mn(e.type,!1);case 11:return Mn(e.type.render,!1);case 1:return Mn(e.type,!0);case 31:return st("Activity");default:return""}}function bt(e){try{var n="",i=null;do n+=Fe(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var nn=Object.prototype.hasOwnProperty,Nn=a.unstable_scheduleCallback,Zn=a.unstable_cancelCallback,Ta=a.unstable_shouldYield,Na=a.unstable_requestPaint,L=a.unstable_now,te=a.unstable_getCurrentPriorityLevel,_=a.unstable_ImmediatePriority,P=a.unstable_UserBlockingPriority,Q=a.unstable_NormalPriority,K=a.unstable_LowPriority,C=a.unstable_IdlePriority,G=a.log,ue=a.unstable_setDisableYieldValue,se=null,xe=null;function ve(e){if(typeof G=="function"&&ue(e),xe&&typeof xe.setStrictMode=="function")try{xe.setStrictMode(se,e)}catch{}}var Oe=Math.clz32?Math.clz32:Ge,_e=Math.log,et=Math.LN2;function Ge(e){return e>>>=0,e===0?32:31-(_e(e)/et|0)|0}var Xe=256,Ee=262144,St=4194304;function Ve(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function xt(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?u=Ve(o):(y&=S,y!==0?u=Ve(y):i||(i=S&~e,i!==0&&(u=Ve(i))))):(S=o&~f,S!==0?u=Ve(S):y!==0?u=Ve(y):i||(i=o&~e,i!==0&&(u=Ve(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function Gt(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function ct(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ut(){var e=St;return St<<=1,(St&62914560)===0&&(St=4194304),e}function hn(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function kn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cn(e,n,i,o,u,f){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,j=e.expirationTimes,U=e.hiddenUpdates;for(i=y&~i;0<i;){var re=31-Oe(i),ce=1<<re;S[re]=0,j[re]=-1;var V=U[re];if(V!==null)for(U[re]=null,re=0;re<V.length;re++){var W=V[re];W!==null&&(W.lane&=-536870913)}i&=~ce}o!==0&&pn(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function pn(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Oe(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function $a(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Oe(i),u=1<<o;u&n|e[o]&n&&(e[o]|=n),i&=~u}}function er(e,n){var i=n&-n;return i=(i&42)!==0?1:On(i),(i&(e.suspendedLanes|n))!==0?0:i}function On(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ii(){var e=he.p;return e!==0?e:(e=window.event,e===void 0?32:Iy(e.type))}function si(e,n){var i=he.p;try{return he.p=e,n()}finally{he.p=i}}var At=Math.random().toString(36).slice(2),N="__reactFiber$"+At,O="__reactProps$"+At,F="__reactContainer$"+At,oe="__reactEvents$"+At,Me="__reactListeners$"+At,Pt="__reactHandles$"+At,Rn="__reactResources$"+At,qe="__reactMarker$"+At;function Qt(e){delete e[N],delete e[O],delete e[oe],delete e[Me],delete e[Pt]}function _t(e){var n=e[N];if(n)return n;for(var i=e.parentNode;i;){if(n=i[F]||i[N]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=xy(e);e!==null;){if(i=e[N])return i;e=xy(e)}return n}e=i,i=e.parentNode}return null}function pt(e){if(e=e[N]||e[F]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ua(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Wt(e){var n=e[Rn];return n||(n=e[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function qt(e){e[qe]=!0}var Ha=new Set,Er={};function tr(e,n){Va(e,n),Va(e+"Capture",n)}function Va(e,n){for(Er[e]=n,e=0;e<n.length;e++)Ha.add(n[e])}var Z=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fe={},we={};function Te(e){return nn.call(we,e)?!0:nn.call(fe,e)?!1:Z.test(e)?we[e]=!0:(fe[e]=!0,!1)}function je(e,n,i){if(Te(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Ue(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function mt(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function Ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function an(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rn(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function jn(e){if(!e._valueTracker){var n=an(e)?"checked":"value";e._valueTracker=rn(e,n,""+e[n])}}function Yt(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=an(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function En(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oi=/[\n"\\]/g;function mn(e){return e.replace(oi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Oa(e,n,i,o,u,f,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Ct(n)):e.value!==""+Ct(n)&&(e.value=""+Ct(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?nu(e,y,Ct(n)):i!=null?nu(e,y,Ct(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Ct(S):e.removeAttribute("name")}function tu(e,n,i,o,u,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){jn(e);return}i=i!=null?""+Ct(i):"",n=n!=null?""+Ct(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),jn(e)}function nu(e,n,i){n==="number"&&En(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Mi(e,n,i,o){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Ct(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function cp(e,n,i){if(n!=null&&(n=""+Ct(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Ct(i):""}function up(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(Qe(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=Ct(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),jn(e)}function Ri(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var tS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function dp(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||tS.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function fp(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&i[u]!==o&&dp(e,u,o)}else for(var f in n)n.hasOwnProperty(f)&&dp(e,f,n[f])}function au(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var nS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qo(e){return aS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function nr(){}var ru=null;function iu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zi=null,Li=null;function hp(e){var n=pt(e);if(n&&(e=n.stateNode)){var i=e[O]||null;e:switch(e=n.stateNode,n.type){case"input":if(Oa(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var u=o[O]||null;if(!u)throw Error(s(90));Oa(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&Yt(o)}break e;case"textarea":cp(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Mi(e,!!i.multiple,n,!1)}}}var su=!1;function pp(e,n,i){if(su)return e(n,i);su=!0;try{var o=e(n);return o}finally{if(su=!1,(zi!==null||Li!==null)&&(Il(),zi&&(n=zi,e=Li,Li=zi=null,hp(n),e)))for(n=0;n<e.length;n++)hp(e[n])}}function Bs(e,n){var i=e.stateNode;if(i===null)return null;var o=i[O]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(ar)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{ou=!1}var Cr=null,lu=null,Wo=null;function mp(){if(Wo)return Wo;var e,n=lu,i=n.length,o,u="value"in Cr?Cr.value:Cr.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&n[i-o]===u[f-o];o++);return Wo=u.slice(e,1<o?1-o:void 0)}function Jo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function el(){return!0}function gp(){return!1}function Xn(e){function n(i,o,u,f,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?el:gp,this.isPropagationStopped=gp,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),n}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Xn(li),$s=b({},li,{view:0,detail:0}),rS=Xn($s),cu,uu,Us,nl=b({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Us&&(Us&&e.type==="mousemove"?(cu=e.screenX-Us.screenX,uu=e.screenY-Us.screenY):uu=cu=0,Us=e),cu)},movementY:function(e){return"movementY"in e?e.movementY:uu}}),yp=Xn(nl),iS=b({},nl,{dataTransfer:0}),sS=Xn(iS),oS=b({},$s,{relatedTarget:0}),du=Xn(oS),lS=b({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),cS=Xn(lS),uS=b({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dS=Xn(uS),fS=b({},li,{data:0}),vp=Xn(fS),hS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=mS[e])?!!n[e]:!1}function fu(){return gS}var yS=b({},$s,{key:function(e){if(e.key){var n=hS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?pS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(e){return e.type==="keypress"?Jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),vS=Xn(yS),bS=b({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bp=Xn(bS),wS=b({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),SS=Xn(wS),xS=b({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),kS=Xn(xS),ES=b({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),CS=Xn(ES),TS=b({},li,{newState:0,oldState:0}),NS=Xn(TS),OS=[9,13,27,32],hu=ar&&"CompositionEvent"in window,Hs=null;ar&&"documentMode"in document&&(Hs=document.documentMode);var jS=ar&&"TextEvent"in window&&!Hs,wp=ar&&(!hu||Hs&&8<Hs&&11>=Hs),Sp=" ",xp=!1;function kp(e,n){switch(e){case"keyup":return OS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bi=!1;function AS(e,n){switch(e){case"compositionend":return Ep(n);case"keypress":return n.which!==32?null:(xp=!0,Sp);case"textInput":return e=n.data,e===Sp&&xp?null:e;default:return null}}function _S(e,n){if(Bi)return e==="compositionend"||!hu&&kp(e,n)?(e=mp(),Wo=lu=Cr=null,Bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return wp&&n.locale!=="ko"?null:n.data;default:return null}}var DS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!DS[e.type]:n==="textarea"}function Tp(e,n,i,o){zi?Li?Li.push(o):Li=[o]:zi=o,n=Yl(n,"onChange"),0<n.length&&(i=new tl("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var Vs=null,Gs=null;function MS(e){ly(e,0)}function al(e){var n=Ua(e);if(Yt(n))return e}function Np(e,n){if(e==="change")return n}var Op=!1;if(ar){var pu;if(ar){var mu="oninput"in document;if(!mu){var jp=document.createElement("div");jp.setAttribute("oninput","return;"),mu=typeof jp.oninput=="function"}pu=mu}else pu=!1;Op=pu&&(!document.documentMode||9<document.documentMode)}function Ap(){Vs&&(Vs.detachEvent("onpropertychange",_p),Gs=Vs=null)}function _p(e){if(e.propertyName==="value"&&al(Gs)){var n=[];Tp(n,Gs,e,iu(e)),pp(MS,n)}}function RS(e,n,i){e==="focusin"?(Ap(),Vs=n,Gs=i,Vs.attachEvent("onpropertychange",_p)):e==="focusout"&&Ap()}function zS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return al(Gs)}function LS(e,n){if(e==="click")return al(n)}function BS(e,n){if(e==="input"||e==="change")return al(n)}function IS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var aa=typeof Object.is=="function"?Object.is:IS;function qs(e,n){if(aa(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!nn.call(n,u)||!aa(e[u],n[u]))return!1}return!0}function Dp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Mp(e,n){var i=Dp(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Dp(i)}}function Rp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Rp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function zp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=En(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=En(e.document)}return n}function gu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var $S=ar&&"documentMode"in document&&11>=document.documentMode,Ii=null,yu=null,Ys=null,vu=!1;function Lp(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;vu||Ii==null||Ii!==En(o)||(o=Ii,"selectionStart"in o&&gu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ys&&qs(Ys,o)||(Ys=o,o=Yl(yu,"onSelect"),0<o.length&&(n=new tl("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=Ii)))}function ci(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var $i={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionrun:ci("Transition","TransitionRun"),transitionstart:ci("Transition","TransitionStart"),transitioncancel:ci("Transition","TransitionCancel"),transitionend:ci("Transition","TransitionEnd")},bu={},Bp={};ar&&(Bp=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function ui(e){if(bu[e])return bu[e];if(!$i[e])return e;var n=$i[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Bp)return bu[e]=n[i];return e}var Ip=ui("animationend"),$p=ui("animationiteration"),Up=ui("animationstart"),US=ui("transitionrun"),HS=ui("transitionstart"),VS=ui("transitioncancel"),Hp=ui("transitionend"),Vp=new Map,wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wu.push("scrollEnd");function ja(e,n){Vp.set(e,n),tr(n,[e])}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fa=[],Ui=0,Su=0;function il(){for(var e=Ui,n=Su=Ui=0;n<e;){var i=fa[n];fa[n++]=null;var o=fa[n];fa[n++]=null;var u=fa[n];fa[n++]=null;var f=fa[n];if(fa[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}f!==0&&Gp(i,u,f)}}function sl(e,n,i,o){fa[Ui++]=e,fa[Ui++]=n,fa[Ui++]=i,fa[Ui++]=o,Su|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function xu(e,n,i,o){return sl(e,n,i,o),ol(e)}function di(e,n){return sl(e,null,null,n),ol(e)}function Gp(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&n!==null&&(u=31-Oe(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[n]:o.push(n),n.lane=i|536870912),f):null}function ol(e){if(50<po)throw po=0,_d=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Hi={};function GS(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,n,i,o){return new GS(e,n,i,o)}function ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rr(e,n){var i=e.alternate;return i===null?(i=ra(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function qp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ll(e,n,i,o,u,f){var y=0;if(o=e,typeof e=="function")ku(e)&&(y=1);else if(typeof e=="string")y=Zx(e,i,R.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case le:return e=ra(31,i,n,u),e.elementType=le,e.lanes=f,e;case X:return fi(i.children,u,f,n);case H:y=8,u|=24;break;case ne:return e=ra(12,i,n,u|2),e.elementType=ne,e.lanes=f,e;case ye:return e=ra(13,i,n,u),e.elementType=ye,e.lanes=f,e;case ke:return e=ra(19,i,n,u),e.elementType=ke,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case B:y=10;break e;case J:y=9;break e;case q:y=11;break e;case I:y=14;break e;case pe:y=16,o=null;break e}y=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=ra(y,i,n,u),n.elementType=e,n.type=o,n.lanes=f,n}function fi(e,n,i,o){return e=ra(7,e,o,n),e.lanes=i,e}function Eu(e,n,i){return e=ra(6,e,null,n),e.lanes=i,e}function Yp(e){var n=ra(18,null,null,0);return n.stateNode=e,n}function Cu(e,n,i){return n=ra(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Pp=new WeakMap;function ha(e,n){if(typeof e=="object"&&e!==null){var i=Pp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:bt(n)},Pp.set(e,n),n)}return{value:e,source:n,stack:bt(n)}}var Vi=[],Gi=0,cl=null,Ps=0,pa=[],ma=0,Tr=null,Ga=1,qa="";function ir(e,n){Vi[Gi++]=Ps,Vi[Gi++]=cl,cl=e,Ps=n}function Fp(e,n,i){pa[ma++]=Ga,pa[ma++]=qa,pa[ma++]=Tr,Tr=e;var o=Ga;e=qa;var u=32-Oe(o)-1;o&=~(1<<u),i+=1;var f=32-Oe(n)+u;if(30<f){var y=u-u%5;f=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Ga=1<<32-Oe(n)+u|i<<u|o,qa=f+e}else Ga=1<<f|i<<u|o,qa=e}function Tu(e){e.return!==null&&(ir(e,1),Fp(e,1,0))}function Nu(e){for(;e===cl;)cl=Vi[--Gi],Vi[Gi]=null,Ps=Vi[--Gi],Vi[Gi]=null;for(;e===Tr;)Tr=pa[--ma],pa[ma]=null,qa=pa[--ma],pa[ma]=null,Ga=pa[--ma],pa[ma]=null}function Zp(e,n){pa[ma++]=Ga,pa[ma++]=qa,pa[ma++]=Tr,Ga=n.id,qa=n.overflow,Tr=e}var zn=null,Ft=null,gt=!1,Nr=null,ga=!1,Ou=Error(s(519));function Or(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fs(ha(n,e)),Ou}function Xp(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[N]=e,n[O]=o,i){case"dialog":lt("cancel",n),lt("close",n);break;case"iframe":case"object":case"embed":lt("load",n);break;case"video":case"audio":for(i=0;i<go.length;i++)lt(go[i],n);break;case"source":lt("error",n);break;case"img":case"image":case"link":lt("error",n),lt("load",n);break;case"details":lt("toggle",n);break;case"input":lt("invalid",n),tu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":lt("invalid",n);break;case"textarea":lt("invalid",n),up(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||fy(n.textContent,i)?(o.popover!=null&&(lt("beforetoggle",n),lt("toggle",n)),o.onScroll!=null&&lt("scroll",n),o.onScrollEnd!=null&&lt("scrollend",n),o.onClick!=null&&(n.onclick=nr),n=!0):n=!1,n||Or(e,!0)}function Kp(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:zn=zn.return}}function qi(e){if(e!==zn)return!1;if(!gt)return Kp(e),gt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Pd(e.type,e.memoizedProps)),i=!i),i&&Ft&&Or(e),Kp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=Sy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=Sy(e)}else n===27?(n=Ft,Vr(e.type)?(e=Qd,Qd=null,Ft=e):Ft=n):Ft=zn?va(e.stateNode.nextSibling):null;return!0}function hi(){Ft=zn=null,gt=!1}function ju(){var e=Nr;return e!==null&&(Jn===null?Jn=e:Jn.push.apply(Jn,e),Nr=null),e}function Fs(e){Nr===null?Nr=[e]:Nr.push(e)}var Au=v(null),pi=null,sr=null;function jr(e,n,i){A(Au,n._currentValue),n._currentValue=i}function or(e){e._currentValue=Au.current,T(Au)}function _u(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function Du(e,n,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var y=u.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=u;for(var j=0;j<n.length;j++)if(S.context===n[j]){f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),_u(f.return,i,e),o||(y=null);break e}f=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(s(341));y.lanes|=i,f=y.alternate,f!==null&&(f.lanes|=i),_u(y,i,e),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===e){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function Yi(e,n,i,o){e=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var S=u.type;aa(u.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(u===Se.current){if(y=u.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(So):e=[So])}u=u.return}e!==null&&Du(n,e,i,o),n.flags|=262144}function ul(e){for(e=e.firstContext;e!==null;){if(!aa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mi(e){pi=e,sr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Qp(pi,e)}function dl(e,n){return pi===null&&mi(e),Qp(e,n)}function Qp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},sr===null){if(e===null)throw Error(s(308));sr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else sr=sr.next=n;return i}var qS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},YS=a.unstable_scheduleCallback,PS=a.unstable_NormalPriority,gn={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new qS,data:new Map,refCount:0}}function Zs(e){e.refCount--,e.refCount===0&&YS(PS,function(){e.controller.abort()})}var Xs=null,Ru=0,Pi=0,Fi=null;function FS(e,n){if(Xs===null){var i=Xs=[];Ru=0,Pi=Bd(),Fi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Ru++,n.then(Wp,Wp),n}function Wp(){if(--Ru===0&&Xs!==null){Fi!==null&&(Fi.status="fulfilled");var e=Xs;Xs=null,Pi=0,Fi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function ZS(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Jp=Y.S;Y.S=function(e,n){Lg=L(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&FS(e,n),Jp!==null&&Jp(e,n)};var gi=v(null);function zu(){var e=gi.current;return e!==null?e:Ht.pooledCache}function fl(e,n){n===null?A(gi,gi.current):A(gi,n.pool)}function em(){var e=zu();return e===null?null:{parent:gn._currentValue,pool:e}}var Zi=Error(s(460)),Lu=Error(s(474)),hl=Error(s(542)),pl={then:function(){}};function tm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function nm(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(nr,nr),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,rm(e),e;default:if(typeof n.status=="string")n.then(nr,nr);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,rm(e),e}throw vi=n,Zi}}function yi(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(vi=i,Zi):i}}var vi=null;function am(){if(vi===null)throw Error(s(459));var e=vi;return vi=null,e}function rm(e){if(e===Zi||e===hl)throw Error(s(483))}var Xi=null,Ks=0;function ml(e){var n=Ks;return Ks+=1,Xi===null&&(Xi=[]),nm(Xi,e,n)}function Qs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function gl(e,n){throw n.$$typeof===k?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function im(e){function n(z,M){if(e){var $=z.deletions;$===null?(z.deletions=[M],z.flags|=16):$.push(M)}}function i(z,M){if(!e)return null;for(;M!==null;)n(z,M),M=M.sibling;return null}function o(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function u(z,M){return z=rr(z,M),z.index=0,z.sibling=null,z}function f(z,M,$){return z.index=$,e?($=z.alternate,$!==null?($=$.index,$<M?(z.flags|=67108866,M):$):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function S(z,M,$,ie){return M===null||M.tag!==6?(M=Eu($,z.mode,ie),M.return=z,M):(M=u(M,$),M.return=z,M)}function j(z,M,$,ie){var He=$.type;return He===X?re(z,M,$.props.children,ie,$.key):M!==null&&(M.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&yi(He)===M.type)?(M=u(M,$.props),Qs(M,$),M.return=z,M):(M=ll($.type,$.key,$.props,null,z.mode,ie),Qs(M,$),M.return=z,M)}function U(z,M,$,ie){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=Cu($,z.mode,ie),M.return=z,M):(M=u(M,$.children||[]),M.return=z,M)}function re(z,M,$,ie,He){return M===null||M.tag!==7?(M=fi($,z.mode,ie,He),M.return=z,M):(M=u(M,$),M.return=z,M)}function ce(z,M,$){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Eu(""+M,z.mode,$),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case E:return $=ll(M.type,M.key,M.props,null,z.mode,$),Qs($,M),$.return=z,$;case D:return M=Cu(M,z.mode,$),M.return=z,M;case pe:return M=yi(M),ce(z,M,$)}if(Qe(M)||De(M))return M=fi(M,z.mode,$,null),M.return=z,M;if(typeof M.then=="function")return ce(z,ml(M),$);if(M.$$typeof===B)return ce(z,dl(z,M),$);gl(z,M)}return null}function V(z,M,$,ie){var He=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return He!==null?null:S(z,M,""+$,ie);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return $.key===He?j(z,M,$,ie):null;case D:return $.key===He?U(z,M,$,ie):null;case pe:return $=yi($),V(z,M,$,ie)}if(Qe($)||De($))return He!==null?null:re(z,M,$,ie,null);if(typeof $.then=="function")return V(z,M,ml($),ie);if($.$$typeof===B)return V(z,M,dl(z,$),ie);gl(z,$)}return null}function W(z,M,$,ie,He){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return z=z.get($)||null,S(M,z,""+ie,He);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case E:return z=z.get(ie.key===null?$:ie.key)||null,j(M,z,ie,He);case D:return z=z.get(ie.key===null?$:ie.key)||null,U(M,z,ie,He);case pe:return ie=yi(ie),W(z,M,$,ie,He)}if(Qe(ie)||De(ie))return z=z.get($)||null,re(M,z,ie,He,null);if(typeof ie.then=="function")return W(z,M,$,ml(ie),He);if(ie.$$typeof===B)return W(z,M,$,dl(M,ie),He);gl(M,ie)}return null}function Re(z,M,$,ie){for(var He=null,kt=null,Be=M,at=M=0,dt=null;Be!==null&&at<$.length;at++){Be.index>at?(dt=Be,Be=null):dt=Be.sibling;var Et=V(z,Be,$[at],ie);if(Et===null){Be===null&&(Be=dt);break}e&&Be&&Et.alternate===null&&n(z,Be),M=f(Et,M,at),kt===null?He=Et:kt.sibling=Et,kt=Et,Be=dt}if(at===$.length)return i(z,Be),gt&&ir(z,at),He;if(Be===null){for(;at<$.length;at++)Be=ce(z,$[at],ie),Be!==null&&(M=f(Be,M,at),kt===null?He=Be:kt.sibling=Be,kt=Be);return gt&&ir(z,at),He}for(Be=o(Be);at<$.length;at++)dt=W(Be,z,at,$[at],ie),dt!==null&&(e&&dt.alternate!==null&&Be.delete(dt.key===null?at:dt.key),M=f(dt,M,at),kt===null?He=dt:kt.sibling=dt,kt=dt);return e&&Be.forEach(function(Fr){return n(z,Fr)}),gt&&ir(z,at),He}function Ye(z,M,$,ie){if($==null)throw Error(s(151));for(var He=null,kt=null,Be=M,at=M=0,dt=null,Et=$.next();Be!==null&&!Et.done;at++,Et=$.next()){Be.index>at?(dt=Be,Be=null):dt=Be.sibling;var Fr=V(z,Be,Et.value,ie);if(Fr===null){Be===null&&(Be=dt);break}e&&Be&&Fr.alternate===null&&n(z,Be),M=f(Fr,M,at),kt===null?He=Fr:kt.sibling=Fr,kt=Fr,Be=dt}if(Et.done)return i(z,Be),gt&&ir(z,at),He;if(Be===null){for(;!Et.done;at++,Et=$.next())Et=ce(z,Et.value,ie),Et!==null&&(M=f(Et,M,at),kt===null?He=Et:kt.sibling=Et,kt=Et);return gt&&ir(z,at),He}for(Be=o(Be);!Et.done;at++,Et=$.next())Et=W(Be,z,at,Et.value,ie),Et!==null&&(e&&Et.alternate!==null&&Be.delete(Et.key===null?at:Et.key),M=f(Et,M,at),kt===null?He=Et:kt.sibling=Et,kt=Et);return e&&Be.forEach(function(ik){return n(z,ik)}),gt&&ir(z,at),He}function It(z,M,$,ie){if(typeof $=="object"&&$!==null&&$.type===X&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E:e:{for(var He=$.key;M!==null;){if(M.key===He){if(He=$.type,He===X){if(M.tag===7){i(z,M.sibling),ie=u(M,$.props.children),ie.return=z,z=ie;break e}}else if(M.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&yi(He)===M.type){i(z,M.sibling),ie=u(M,$.props),Qs(ie,$),ie.return=z,z=ie;break e}i(z,M);break}else n(z,M);M=M.sibling}$.type===X?(ie=fi($.props.children,z.mode,ie,$.key),ie.return=z,z=ie):(ie=ll($.type,$.key,$.props,null,z.mode,ie),Qs(ie,$),ie.return=z,z=ie)}return y(z);case D:e:{for(He=$.key;M!==null;){if(M.key===He)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){i(z,M.sibling),ie=u(M,$.children||[]),ie.return=z,z=ie;break e}else{i(z,M);break}else n(z,M);M=M.sibling}ie=Cu($,z.mode,ie),ie.return=z,z=ie}return y(z);case pe:return $=yi($),It(z,M,$,ie)}if(Qe($))return Re(z,M,$,ie);if(De($)){if(He=De($),typeof He!="function")throw Error(s(150));return $=He.call($),Ye(z,M,$,ie)}if(typeof $.then=="function")return It(z,M,ml($),ie);if($.$$typeof===B)return It(z,M,dl(z,$),ie);gl(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,M!==null&&M.tag===6?(i(z,M.sibling),ie=u(M,$),ie.return=z,z=ie):(i(z,M),ie=Eu($,z.mode,ie),ie.return=z,z=ie),y(z)):i(z,M)}return function(z,M,$,ie){try{Ks=0;var He=It(z,M,$,ie);return Xi=null,He}catch(Be){if(Be===Zi||Be===hl)throw Be;var kt=ra(29,Be,null,z.mode);return kt.lanes=ie,kt.return=z,kt}finally{}}}var bi=im(!0),sm=im(!1),Ar=!1;function Bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Tt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=ol(e),Gp(e,null,i),n}return sl(e,o,n,i),ol(e)}function Ws(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,$a(e,i)}}function $u(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Uu=!1;function Js(){if(Uu){var e=Fi;if(e!==null)throw e}}function eo(e,n,i,o){Uu=!1;var u=e.updateQueue;Ar=!1;var f=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var j=S,U=j.next;j.next=null,y===null?f=U:y.next=U,y=j;var re=e.alternate;re!==null&&(re=re.updateQueue,S=re.lastBaseUpdate,S!==y&&(S===null?re.firstBaseUpdate=U:S.next=U,re.lastBaseUpdate=j))}if(f!==null){var ce=u.baseState;y=0,re=U=j=null,S=f;do{var V=S.lane&-536870913,W=V!==S.lane;if(W?(ut&V)===V:(o&V)===V){V!==0&&V===Pi&&(Uu=!0),re!==null&&(re=re.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Re=e,Ye=S;V=n;var It=i;switch(Ye.tag){case 1:if(Re=Ye.payload,typeof Re=="function"){ce=Re.call(It,ce,V);break e}ce=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ye.payload,V=typeof Re=="function"?Re.call(It,ce,V):Re,V==null)break e;ce=b({},ce,V);break e;case 2:Ar=!0}}V=S.callback,V!==null&&(e.flags|=64,W&&(e.flags|=8192),W=u.callbacks,W===null?u.callbacks=[V]:W.push(V))}else W={lane:V,tag:S.tag,payload:S.payload,callback:S.callback,next:null},re===null?(U=re=W,j=ce):re=re.next=W,y|=V;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;W=S,S=W.next,W.next=null,u.lastBaseUpdate=W,u.shared.pending=null}}while(!0);re===null&&(j=ce),u.baseState=j,u.firstBaseUpdate=U,u.lastBaseUpdate=re,f===null&&(u.shared.lanes=0),Br|=y,e.lanes=y,e.memoizedState=ce}}function om(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function lm(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)om(i[e],n)}var Ki=v(null),yl=v(0);function cm(e,n){e=gr,A(yl,e),A(Ki,n),gr=e|n.baseLanes}function Hu(){A(yl,gr),A(Ki,Ki.current)}function Vu(){gr=yl.current,T(Ki),T(yl)}var ia=v(null),ya=null;function Mr(e){var n=e.alternate;A(un,un.current&1),A(ia,e),ya===null&&(n===null||Ki.current!==null||n.memoizedState!==null)&&(ya=e)}function Gu(e){A(un,un.current),A(ia,e),ya===null&&(ya=e)}function um(e){e.tag===22?(A(un,un.current),A(ia,e),ya===null&&(ya=e)):Rr()}function Rr(){A(un,un.current),A(ia,ia.current)}function sa(e){T(ia),ya===e&&(ya=null),T(un)}var un=v(0);function vl(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Xd(i)||Kd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var lr=0,tt=null,Lt=null,yn=null,bl=!1,Qi=!1,wi=!1,wl=0,to=0,Wi=null,XS=0;function sn(){throw Error(s(321))}function qu(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!aa(e[i],n[i]))return!1;return!0}function Yu(e,n,i,o,u,f){return lr=f,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=e===null||e.memoizedState===null?Fm:sd,wi=!1,f=i(o,u),wi=!1,Qi&&(f=fm(n,i,o,u)),dm(e),f}function dm(e){Y.H=ro;var n=Lt!==null&&Lt.next!==null;if(lr=0,yn=Lt=tt=null,bl=!1,to=0,Wi=null,n)throw Error(s(300));e===null||vn||(e=e.dependencies,e!==null&&ul(e)&&(vn=!0))}function fm(e,n,i,o){tt=e;var u=0;do{if(Qi&&(Wi=null),to=0,Qi=!1,25<=u)throw Error(s(301));if(u+=1,yn=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Zm,f=n(i,o)}while(Qi);return f}function KS(){var e=Y.H,n=e.useState()[0];return n=typeof n.then=="function"?no(n):n,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(tt.flags|=1024),n}function Pu(){var e=wl!==0;return wl=0,e}function Fu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Zu(e){if(bl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}bl=!1}lr=0,yn=Lt=tt=null,Qi=!1,to=wl=0,Wi=null}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?tt.memoizedState=yn=e:yn=yn.next=e,yn}function dn(){if(Lt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var n=yn===null?tt.memoizedState:yn.next;if(n!==null)yn=n,Lt=e;else{if(e===null)throw tt.alternate===null?Error(s(467)):Error(s(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},yn===null?tt.memoizedState=yn=e:yn=yn.next=e}return yn}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(e){var n=to;return to+=1,Wi===null&&(Wi=[]),e=nm(Wi,e,n),n=tt,(yn===null?n.memoizedState:yn.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?Fm:sd),e}function xl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return no(e);if(e.$$typeof===B)return Ln(e)}throw Error(s(438,String(e)))}function Xu(e){var n=null,i=tt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=tt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Sl(),tt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=me;return n.index++,i}function cr(e,n){return typeof n=="function"?n(e):n}function kl(e){var n=dn();return Ku(n,Lt,e)}function Ku(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var y=u.next;u.next=f.next,f.next=y}n.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{n=u.next;var S=y=null,j=null,U=n,re=!1;do{var ce=U.lane&-536870913;if(ce!==U.lane?(ut&ce)===ce:(lr&ce)===ce){var V=U.revertLane;if(V===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),ce===Pi&&(re=!0);else if((lr&V)===V){U=U.next,V===Pi&&(re=!0);continue}else ce={lane:0,revertLane:U.revertLane,gesture:null,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(S=j=ce,y=f):j=j.next=ce,tt.lanes|=V,Br|=V;ce=U.action,wi&&i(f,ce),f=U.hasEagerState?U.eagerState:i(f,ce)}else V={lane:ce,revertLane:U.revertLane,gesture:U.gesture,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null},j===null?(S=j=V,y=f):j=j.next=V,tt.lanes|=ce,Br|=ce;U=U.next}while(U!==null&&U!==n);if(j===null?y=f:j.next=S,!aa(f,e.memoizedState)&&(vn=!0,re&&(i=Fi,i!==null)))throw i;e.memoizedState=f,e.baseState=y,e.baseQueue=j,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Qu(e){var n=dn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do f=e(f,y.action),y=y.next;while(y!==u);aa(f,n.memoizedState)||(vn=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,o]}function hm(e,n,i){var o=tt,u=dn(),f=gt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=n();var y=!aa((Lt||u).memoizedState,i);if(y&&(u.memoizedState=i,vn=!0),u=u.queue,ed(gm.bind(null,o,u,e),[e]),u.getSnapshot!==n||y||yn!==null&&yn.memoizedState.tag&1){if(o.flags|=2048,Ji(9,{destroy:void 0},mm.bind(null,o,u,i,n),null),Ht===null)throw Error(s(349));f||(lr&127)!==0||pm(o,n,i)}return i}function pm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=tt.updateQueue,n===null?(n=Sl(),tt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function mm(e,n,i,o){n.value=i,n.getSnapshot=o,ym(n)&&vm(e)}function gm(e,n,i){return i(function(){ym(n)&&vm(e)})}function ym(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!aa(e,i)}catch{return!0}}function vm(e){var n=di(e,2);n!==null&&ea(n,e,2)}function Wu(e){var n=Pn();if(typeof e=="function"){var i=e;if(e=i(),wi){ve(!0);try{i()}finally{ve(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:e},n}function bm(e,n,i,o){return e.baseState=i,Ku(e,Lt,typeof o=="function"?o:cr)}function QS(e,n,i,o,u){if(Tl(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};Y.T!==null?i(!0):f.isTransition=!1,o(f),i=n.pending,i===null?(f.next=n.pending=f,wm(n,f)):(f.next=i.next,n.pending=i.next=f)}}function wm(e,n){var i=n.action,o=n.payload,u=e.state;if(n.isTransition){var f=Y.T,y={};Y.T=y;try{var S=i(u,o),j=Y.S;j!==null&&j(y,S),Sm(e,n,S)}catch(U){Ju(e,n,U)}finally{f!==null&&y.types!==null&&(f.types=y.types),Y.T=f}}else try{f=i(u,o),Sm(e,n,f)}catch(U){Ju(e,n,U)}}function Sm(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){xm(e,n,o)},function(o){return Ju(e,n,o)}):xm(e,n,i)}function xm(e,n,i){n.status="fulfilled",n.value=i,km(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,wm(e,i)))}function Ju(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,km(n),n=n.next;while(n!==o)}e.action=null}function km(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Em(e,n){return n}function Cm(e,n){if(gt){var i=Ht.formState;if(i!==null){e:{var o=tt;if(gt){if(Ft){t:{for(var u=Ft,f=ga;u.nodeType!==8;){if(!f){u=null;break t}if(u=va(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Ft=va(u.nextSibling),o=u.data==="F!";break e}}Or(o)}o=!1}o&&(n=i[0])}}return i=Pn(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Em,lastRenderedState:n},i.queue=o,i=qm.bind(null,tt,o),o.dispatch=i,o=Wu(!1),f=id.bind(null,tt,!1,o.queue),o=Pn(),u={state:n,dispatch:null,action:e,pending:null},o.queue=u,i=QS.bind(null,tt,u,f,i),u.dispatch=i,o.memoizedState=e,[n,i,!1]}function Tm(e){var n=dn();return Nm(n,Lt,e)}function Nm(e,n,i){if(n=Ku(e,n,Em)[0],e=kl(cr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=no(n)}catch(y){throw y===Zi?hl:y}else o=n;n=dn();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(tt.flags|=2048,Ji(9,{destroy:void 0},WS.bind(null,u,i),null)),[o,f,e]}function WS(e,n){e.action=n}function Om(e){var n=dn(),i=Lt;if(i!==null)return Nm(n,i,e);dn(),n=n.memoizedState,i=dn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function Ji(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=tt.updateQueue,n===null&&(n=Sl(),tt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function jm(){return dn().memoizedState}function El(e,n,i,o){var u=Pn();tt.flags|=e,u.memoizedState=Ji(1|n,{destroy:void 0},i,o===void 0?null:o)}function Cl(e,n,i,o){var u=dn();o=o===void 0?null:o;var f=u.memoizedState.inst;Lt!==null&&o!==null&&qu(o,Lt.memoizedState.deps)?u.memoizedState=Ji(n,f,i,o):(tt.flags|=e,u.memoizedState=Ji(1|n,f,i,o))}function Am(e,n){El(8390656,8,e,n)}function ed(e,n){Cl(2048,8,e,n)}function JS(e){tt.flags|=4;var n=tt.updateQueue;if(n===null)n=Sl(),tt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function _m(e){var n=dn().memoizedState;return JS({ref:n,nextImpl:e}),function(){if((Tt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Dm(e,n){return Cl(4,2,e,n)}function Mm(e,n){return Cl(4,4,e,n)}function Rm(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function zm(e,n,i){i=i!=null?i.concat([e]):null,Cl(4,4,Rm.bind(null,n,e),i)}function td(){}function Lm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&qu(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function Bm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&qu(n,o[1]))return o[0];if(o=e(),wi){ve(!0);try{e()}finally{ve(!1)}}return i.memoizedState=[o,n],o}function nd(e,n,i){return i===void 0||(lr&1073741824)!==0&&(ut&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Ig(),tt.lanes|=e,Br|=e,i)}function Im(e,n,i,o){return aa(i,n)?i:Ki.current!==null?(e=nd(e,i,o),aa(e,n)||(vn=!0),e):(lr&42)===0||(lr&1073741824)!==0&&(ut&261930)===0?(vn=!0,e.memoizedState=i):(e=Ig(),tt.lanes|=e,Br|=e,n)}function $m(e,n,i,o,u){var f=he.p;he.p=f!==0&&8>f?f:8;var y=Y.T,S={};Y.T=S,id(e,!1,n,i);try{var j=u(),U=Y.S;if(U!==null&&U(S,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var re=ZS(j,o);ao(e,n,re,ca(e))}else ao(e,n,o,ca(e))}catch(ce){ao(e,n,{then:function(){},status:"rejected",reason:ce},ca())}finally{he.p=f,y!==null&&S.types!==null&&(y.types=S.types),Y.T=y}}function ex(){}function ad(e,n,i,o){if(e.tag!==5)throw Error(s(476));var u=Um(e).queue;$m(e,u,n,ge,i===null?ex:function(){return Hm(e),i(o)})}function Um(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ge},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Hm(e){var n=Um(e);n.next===null&&(n=e.alternate.memoizedState),ao(e,n.next.queue,{},ca())}function rd(){return Ln(So)}function Vm(){return dn().memoizedState}function Gm(){return dn().memoizedState}function tx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=ca();e=_r(i);var o=Dr(n,e,i);o!==null&&(ea(o,n,i),Ws(o,n,i)),n={cache:Mu()},e.payload=n;return}n=n.return}}function nx(e,n,i){var o=ca();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Tl(e)?Ym(n,i):(i=xu(e,n,i,o),i!==null&&(ea(i,e,o),Pm(i,n,o)))}function qm(e,n,i){var o=ca();ao(e,n,i,o)}function ao(e,n,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Tl(e))Ym(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,S=f(y,i);if(u.hasEagerState=!0,u.eagerState=S,aa(S,y))return sl(e,n,u,0),Ht===null&&il(),!1}catch{}finally{}if(i=xu(e,n,u,o),i!==null)return ea(i,e,o),Pm(i,n,o),!0}return!1}function id(e,n,i,o){if(o={lane:2,revertLane:Bd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Tl(e)){if(n)throw Error(s(479))}else n=xu(e,i,o,2),n!==null&&ea(n,e,2)}function Tl(e){var n=e.alternate;return e===tt||n!==null&&n===tt}function Ym(e,n){Qi=bl=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Pm(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,$a(e,i)}}var ro={readContext:Ln,use:xl,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};ro.useEffectEvent=sn;var Fm={readContext:Ln,use:xl,useCallback:function(e,n){return Pn().memoizedState=[e,n===void 0?null:n],e},useContext:Ln,useEffect:Am,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,El(4194308,4,Rm.bind(null,n,e),i)},useLayoutEffect:function(e,n){return El(4194308,4,e,n)},useInsertionEffect:function(e,n){El(4,2,e,n)},useMemo:function(e,n){var i=Pn();n=n===void 0?null:n;var o=e();if(wi){ve(!0);try{e()}finally{ve(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Pn();if(i!==void 0){var u=i(n);if(wi){ve(!0);try{i(n)}finally{ve(!1)}}}else u=n;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=nx.bind(null,tt,e),[o.memoizedState,e]},useRef:function(e){var n=Pn();return e={current:e},n.memoizedState=e},useState:function(e){e=Wu(e);var n=e.queue,i=qm.bind(null,tt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:td,useDeferredValue:function(e,n){var i=Pn();return nd(i,e,n)},useTransition:function(){var e=Wu(!1);return e=$m.bind(null,tt,e.queue,!0,!1),Pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=tt,u=Pn();if(gt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Ht===null)throw Error(s(349));(ut&127)!==0||pm(o,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,Am(gm.bind(null,o,f,e),[e]),o.flags|=2048,Ji(9,{destroy:void 0},mm.bind(null,o,f,i,n),null),i},useId:function(){var e=Pn(),n=Ht.identifierPrefix;if(gt){var i=qa,o=Ga;i=(o&~(1<<32-Oe(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=wl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=XS++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:rd,useFormState:Cm,useActionState:Cm,useOptimistic:function(e){var n=Pn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=id.bind(null,tt,!0,i),i.dispatch=n,[e,n]},useMemoCache:Xu,useCacheRefresh:function(){return Pn().memoizedState=tx.bind(null,tt)},useEffectEvent:function(e){var n=Pn(),i={impl:e};return n.memoizedState=i,function(){if((Tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},sd={readContext:Ln,use:xl,useCallback:Lm,useContext:Ln,useEffect:ed,useImperativeHandle:zm,useInsertionEffect:Dm,useLayoutEffect:Mm,useMemo:Bm,useReducer:kl,useRef:jm,useState:function(){return kl(cr)},useDebugValue:td,useDeferredValue:function(e,n){var i=dn();return Im(i,Lt.memoizedState,e,n)},useTransition:function(){var e=kl(cr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:no(e),n]},useSyncExternalStore:hm,useId:Vm,useHostTransitionStatus:rd,useFormState:Tm,useActionState:Tm,useOptimistic:function(e,n){var i=dn();return bm(i,Lt,e,n)},useMemoCache:Xu,useCacheRefresh:Gm};sd.useEffectEvent=_m;var Zm={readContext:Ln,use:xl,useCallback:Lm,useContext:Ln,useEffect:ed,useImperativeHandle:zm,useInsertionEffect:Dm,useLayoutEffect:Mm,useMemo:Bm,useReducer:Qu,useRef:jm,useState:function(){return Qu(cr)},useDebugValue:td,useDeferredValue:function(e,n){var i=dn();return Lt===null?nd(i,e,n):Im(i,Lt.memoizedState,e,n)},useTransition:function(){var e=Qu(cr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:no(e),n]},useSyncExternalStore:hm,useId:Vm,useHostTransitionStatus:rd,useFormState:Om,useActionState:Om,useOptimistic:function(e,n){var i=dn();return Lt!==null?bm(i,Lt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:Gm};Zm.useEffectEvent=_m;function od(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:b({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ld={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=ca(),u=_r(o);u.payload=n,i!=null&&(u.callback=i),n=Dr(e,u,o),n!==null&&(ea(n,e,o),Ws(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=ca(),u=_r(o);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Dr(e,u,o),n!==null&&(ea(n,e,o),Ws(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=ca(),o=_r(i);o.tag=2,n!=null&&(o.callback=n),n=Dr(e,o,i),n!==null&&(ea(n,e,i),Ws(n,e,i))}};function Xm(e,n,i,o,u,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!qs(i,o)||!qs(u,f):!0}function Km(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&ld.enqueueReplaceState(n,n.state,null)}function Si(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=b({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Qm(e){rl(e)}function Wm(e){console.error(e)}function Jm(e){rl(e)}function Nl(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function eg(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function cd(e,n,i){return i=_r(i),i.tag=3,i.payload={element:null},i.callback=function(){Nl(e,n)},i}function tg(e){return e=_r(e),e.tag=3,e}function ng(e,n,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){eg(n,i,o)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){eg(n,i,o),typeof u!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function ax(e,n,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Yi(n,i,u,!0),i=ia.current,i!==null){switch(i.tag){case 31:case 13:return ya===null?$l():i.alternate===null&&on===0&&(on=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===pl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),Rd(e,o,u)),!1;case 22:return i.flags|=65536,o===pl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),Rd(e,o,u)),!1}throw Error(s(435,i.tag))}return Rd(e,o,u),$l(),!1}if(gt)return n=ia.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Ou&&(e=Error(s(422),{cause:o}),Fs(ha(e,i)))):(o!==Ou&&(n=Error(s(423),{cause:o}),Fs(ha(n,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ha(o,i),u=cd(e.stateNode,o,u),$u(e,u),on!==4&&(on=2)),!1;var f=Error(s(520),{cause:o});if(f=ha(f,i),ho===null?ho=[f]:ho.push(f),on!==4&&(on=2),n===null)return!0;o=ha(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=cd(i.stateNode,o,e),$u(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ir===null||!Ir.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=tg(u),ng(u,e,i,o),$u(i,u),!1}i=i.return}while(i!==null);return!1}var ud=Error(s(461)),vn=!1;function Bn(e,n,i,o){n.child=e===null?sm(n,null,i,o):bi(n,e.child,i,o)}function ag(e,n,i,o,u){i=i.render;var f=n.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return mi(n),o=Yu(e,n,i,y,f,u),S=Pu(),e!==null&&!vn?(Fu(e,n,u),ur(e,n,u)):(gt&&S&&Tu(n),n.flags|=1,Bn(e,n,o,u),n.child)}function rg(e,n,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!ku(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,ig(e,n,f,o,u)):(e=ll(i.type,null,o,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!vd(e,u)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:qs,i(y,o)&&e.ref===n.ref)return ur(e,n,u)}return n.flags|=1,e=rr(f,o),e.ref=n.ref,e.return=n,n.child=e}function ig(e,n,i,o,u){if(e!==null){var f=e.memoizedProps;if(qs(f,o)&&e.ref===n.ref)if(vn=!1,n.pendingProps=o=f,vd(e,u))(e.flags&131072)!==0&&(vn=!0);else return n.lanes=e.lanes,ur(e,n,u)}return dd(e,n,i,o,u)}function sg(e,n,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=n.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,n.child=null;return og(e,n,f,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&fl(n,f!==null?f.cachePool:null),f!==null?cm(n,f):Hu(),um(n);else return o=n.lanes=536870912,og(e,n,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(fl(n,f.cachePool),cm(n,f),Rr(),n.memoizedState=null):(e!==null&&fl(n,null),Hu(),Rr());return Bn(e,n,u,i),n.child}function io(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function og(e,n,i,o,u){var f=zu();return f=f===null?null:{parent:gn._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&fl(n,null),Hu(),um(n),e!==null&&Yi(e,n,o,!0),n.childLanes=u,null}function Ol(e,n){return n=Al({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function lg(e,n,i){return bi(n,e.child,null,i),e=Ol(n,n.pendingProps),e.flags|=2,sa(n),n.memoizedState=null,e}function rx(e,n,i){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(gt){if(o.mode==="hidden")return e=Ol(n,o),n.lanes=536870912,io(null,e);if(Gu(n),(e=Ft)?(e=wy(e,ga),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Ga,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},i=Yp(e),i.return=n,n.child=i,zn=n,Ft=null)):e=null,e===null)throw Or(n);return n.lanes=536870912,null}return Ol(n,o)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Gu(n),u)if(n.flags&256)n.flags&=-257,n=lg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(vn||Yi(e,n,i,!1),u=(i&e.childLanes)!==0,vn||u){if(o=Ht,o!==null&&(y=er(o,i),y!==0&&y!==f.retryLane))throw f.retryLane=y,di(e,y),ea(o,e,y),ud;$l(),n=lg(e,n,i)}else e=f.treeContext,Ft=va(y.nextSibling),zn=n,gt=!0,Nr=null,ga=!1,e!==null&&Zp(n,e),n=Ol(n,o),n.flags|=4096;return n}return e=rr(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function jl(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function dd(e,n,i,o,u){return mi(n),i=Yu(e,n,i,o,void 0,u),o=Pu(),e!==null&&!vn?(Fu(e,n,u),ur(e,n,u)):(gt&&o&&Tu(n),n.flags|=1,Bn(e,n,i,u),n.child)}function cg(e,n,i,o,u,f){return mi(n),n.updateQueue=null,i=fm(n,o,i,u),dm(e),o=Pu(),e!==null&&!vn?(Fu(e,n,f),ur(e,n,f)):(gt&&o&&Tu(n),n.flags|=1,Bn(e,n,i,f),n.child)}function ug(e,n,i,o,u){if(mi(n),n.stateNode===null){var f=Hi,y=i.contextType;typeof y=="object"&&y!==null&&(f=Ln(y)),f=new i(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ld,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Bu(n),y=i.contextType,f.context=typeof y=="object"&&y!==null?Ln(y):Hi,f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(od(n,i,y,o),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&ld.enqueueReplaceState(f,f.state,null),eo(n,o,f,u),Js(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var S=n.memoizedProps,j=Si(i,S);f.props=j;var U=f.context,re=i.contextType;y=Hi,typeof re=="object"&&re!==null&&(y=Ln(re));var ce=i.getDerivedStateFromProps;re=typeof ce=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,re||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||U!==y)&&Km(n,f,o,y),Ar=!1;var V=n.memoizedState;f.state=V,eo(n,o,f,u),Js(),U=n.memoizedState,S||V!==U||Ar?(typeof ce=="function"&&(od(n,i,ce,o),U=n.memoizedState),(j=Ar||Xm(n,i,j,o,V,U,y))?(re||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=U),f.props=o,f.state=U,f.context=y,o=j):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Iu(e,n),y=n.memoizedProps,re=Si(i,y),f.props=re,ce=n.pendingProps,V=f.context,U=i.contextType,j=Hi,typeof U=="object"&&U!==null&&(j=Ln(U)),S=i.getDerivedStateFromProps,(U=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==ce||V!==j)&&Km(n,f,o,j),Ar=!1,V=n.memoizedState,f.state=V,eo(n,o,f,u),Js();var W=n.memoizedState;y!==ce||V!==W||Ar||e!==null&&e.dependencies!==null&&ul(e.dependencies)?(typeof S=="function"&&(od(n,i,S,o),W=n.memoizedState),(re=Ar||Xm(n,i,re,o,V,W,j)||e!==null&&e.dependencies!==null&&ul(e.dependencies))?(U||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,W,j),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,W,j)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=W),f.props=o,f.state=W,f.context=j,o=re):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,jl(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=bi(n,e.child,null,u),n.child=bi(n,null,i,u)):Bn(e,n,i,u),n.memoizedState=f.state,e=n.child):e=ur(e,n,u),e}function dg(e,n,i,o){return hi(),n.flags|=256,Bn(e,n,i,o),n.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(e){return{baseLanes:e,cachePool:em()}}function pd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=la),e}function fg(e,n,i){var o=n.pendingProps,u=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(un.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(gt){if(u?Mr(n):Rr(),(e=Ft)?(e=wy(e,ga),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Ga,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},i=Yp(e),i.return=n,n.child=i,zn=n,Ft=null)):e=null,e===null)throw Or(n);return Kd(e)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(Rr(),u=n.mode,S=Al({mode:"hidden",children:S},u),o=fi(o,u,i,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=hd(i),o.childLanes=pd(e,y,i),n.memoizedState=fd,io(null,o)):(Mr(n),md(n,S))}var j=e.memoizedState;if(j!==null&&(S=j.dehydrated,S!==null)){if(f)n.flags&256?(Mr(n),n.flags&=-257,n=gd(e,n,i)):n.memoizedState!==null?(Rr(),n.child=e.child,n.flags|=128,n=null):(Rr(),S=o.fallback,u=n.mode,o=Al({mode:"visible",children:o.children},u),S=fi(S,u,i,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,bi(n,e.child,null,i),o=n.child,o.memoizedState=hd(i),o.childLanes=pd(e,y,i),n.memoizedState=fd,n=io(null,o));else if(Mr(n),Kd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var U=y.dgst;y=U,o=Error(s(419)),o.stack="",o.digest=y,Fs({value:o,source:null,stack:null}),n=gd(e,n,i)}else if(vn||Yi(e,n,i,!1),y=(i&e.childLanes)!==0,vn||y){if(y=Ht,y!==null&&(o=er(y,i),o!==0&&o!==j.retryLane))throw j.retryLane=o,di(e,o),ea(y,e,o),ud;Xd(S)||$l(),n=gd(e,n,i)}else Xd(S)?(n.flags|=192,n.child=e.child,n=null):(e=j.treeContext,Ft=va(S.nextSibling),zn=n,gt=!0,Nr=null,ga=!1,e!==null&&Zp(n,e),n=md(n,o.children),n.flags|=4096);return n}return u?(Rr(),S=o.fallback,u=n.mode,j=e.child,U=j.sibling,o=rr(j,{mode:"hidden",children:o.children}),o.subtreeFlags=j.subtreeFlags&65011712,U!==null?S=rr(U,S):(S=fi(S,u,i,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,io(null,o),o=n.child,S=e.child.memoizedState,S===null?S=hd(i):(u=S.cachePool,u!==null?(j=gn._currentValue,u=u.parent!==j?{parent:j,pool:j}:u):u=em(),S={baseLanes:S.baseLanes|i,cachePool:u}),o.memoizedState=S,o.childLanes=pd(e,y,i),n.memoizedState=fd,io(e.child,o)):(Mr(n),i=e.child,e=i.sibling,i=rr(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function md(e,n){return n=Al({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Al(e,n){return e=ra(22,e,null,n),e.lanes=0,e}function gd(e,n,i){return bi(n,e.child,null,i),e=md(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function hg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),_u(e.return,n,i)}function yd(e,n,i,o,u,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=i,y.tailMode=u,y.treeForkCount=f)}function pg(e,n,i){var o=n.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var y=un.current,S=(y&2)!==0;if(S?(y=y&1|2,n.flags|=128):y&=1,A(un,y),Bn(e,n,o,i),o=gt?Ps:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hg(e,i,n);else if(e.tag===19)hg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&vl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),yd(n,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&vl(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}yd(n,!0,i,null,f,o);break;case"together":yd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function ur(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Br|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=rr(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=rr(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function vd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ul(e)))}function ix(e,n,i){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),jr(n,gn,e.memoizedState.cache),hi();break;case 27:case 5:vt(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:jr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Gu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Mr(n),n.flags|=128,null):(i&n.child.childLanes)!==0?fg(e,n,i):(Mr(n),e=ur(e,n,i),e!==null?e.sibling:null);Mr(n);break;case 19:var u=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Yi(e,n,i,!1),o=(i&n.childLanes)!==0),u){if(o)return pg(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),A(un,un.current),o)break;return null;case 22:return n.lanes=0,sg(e,n,i,n.pendingProps);case 24:jr(n,gn,e.memoizedState.cache)}return ur(e,n,i)}function mg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)vn=!0;else{if(!vd(e,i)&&(n.flags&128)===0)return vn=!1,ix(e,n,i);vn=(e.flags&131072)!==0}else vn=!1,gt&&(n.flags&1048576)!==0&&Fp(n,Ps,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=yi(n.elementType),n.type=e,typeof e=="function")ku(e)?(o=Si(e,o),n.tag=1,n=ug(null,n,e,o,i)):(n.tag=0,n=dd(null,n,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===q){n.tag=11,n=ag(null,n,e,o,i);break e}else if(u===I){n.tag=14,n=rg(null,n,e,o,i);break e}}throw n=nt(e)||e,Error(s(306,n,""))}}return n;case 0:return dd(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,u=Si(o,n.pendingProps),ug(e,n,o,u,i);case 3:e:{if($e(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;u=f.element,Iu(e,n),eo(n,o,null,i);var y=n.memoizedState;if(o=y.cache,jr(n,gn,o),o!==f.cache&&Du(n,[gn],i,!0),Js(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=dg(e,n,o,i);break e}else if(o!==u){u=ha(Error(s(424)),n),Fs(u),n=dg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ft=va(e.firstChild),zn=n,gt=!0,Nr=null,ga=!0,i=sm(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(hi(),o===u){n=ur(e,n,i);break e}Bn(e,n,o,i)}n=n.child}return n;case 26:return jl(e,n),e===null?(i=Ty(n.type,null,n.pendingProps,null))?n.memoizedState=i:gt||(i=n.type,e=n.pendingProps,o=Pl(de.current).createElement(i),o[N]=n,o[O]=e,In(o,i,e),qt(o),n.stateNode=o):n.memoizedState=Ty(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return vt(n),e===null&&gt&&(o=n.stateNode=ky(n.type,n.pendingProps,de.current),zn=n,ga=!0,u=Ft,Vr(n.type)?(Qd=u,Ft=va(o.firstChild)):Ft=u),Bn(e,n,n.pendingProps.children,i),jl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&gt&&((u=o=Ft)&&(o=zx(o,n.type,n.pendingProps,ga),o!==null?(n.stateNode=o,zn=n,Ft=va(o.firstChild),ga=!1,u=!0):u=!1),u||Or(n)),vt(n),u=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,Pd(u,f)?o=null:y!==null&&Pd(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=Yu(e,n,KS,null,null,i),So._currentValue=u),jl(e,n),Bn(e,n,o,i),n.child;case 6:return e===null&&gt&&((e=i=Ft)&&(i=Lx(i,n.pendingProps,ga),i!==null?(n.stateNode=i,zn=n,Ft=null,e=!0):e=!1),e||Or(n)),null;case 13:return fg(e,n,i);case 4:return $e(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=bi(n,null,o,i):Bn(e,n,o,i),n.child;case 11:return ag(e,n,n.type,n.pendingProps,i);case 7:return Bn(e,n,n.pendingProps,i),n.child;case 8:return Bn(e,n,n.pendingProps.children,i),n.child;case 12:return Bn(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,jr(n,n.type,o.value),Bn(e,n,o.children,i),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,mi(n),u=Ln(u),o=o(u),n.flags|=1,Bn(e,n,o,i),n.child;case 14:return rg(e,n,n.type,n.pendingProps,i);case 15:return ig(e,n,n.type,n.pendingProps,i);case 19:return pg(e,n,i);case 31:return rx(e,n,i);case 22:return sg(e,n,i,n.pendingProps);case 24:return mi(n),o=Ln(gn),e===null?(u=zu(),u===null&&(u=Ht,f=Mu(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:o,cache:u},Bu(n),jr(n,gn,u)):((e.lanes&i)!==0&&(Iu(e,n),eo(n,null,null,i),Js()),u=e.memoizedState,f=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),jr(n,gn,o)):(o=f.cache,jr(n,gn,o),o!==u.cache&&Du(n,[gn],i,!0))),Bn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function dr(e){e.flags|=4}function bd(e,n,i,o,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Vg())e.flags|=8192;else throw vi=pl,Lu}else e.flags&=-16777217}function gg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!_y(n))if(Vg())e.flags|=8192;else throw vi=pl,Lu}function _l(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Ut():536870912,e.lanes|=n,as|=n)}function so(e,n){if(!gt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Zt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function sx(e,n,i){var o=n.pendingProps;switch(Nu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(n),null;case 1:return Zt(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),or(gn),Pe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(qi(n)?dr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ju())),Zt(n),null;case 26:var u=n.type,f=n.memoizedState;return e===null?(dr(n),f!==null?(Zt(n),gg(n,f)):(Zt(n),bd(n,u,null,o,i))):f?f!==e.memoizedState?(dr(n),Zt(n),gg(n,f)):(Zt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&dr(n),Zt(n),bd(n,u,e,o,i)),null;case 27:if($t(n),i=de.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}e=R.current,qi(n)?Xp(n):(e=ky(u,o,i),n.stateNode=e,dr(n))}return Zt(n),null;case 5:if($t(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}if(f=R.current,qi(n))Xp(n);else{var y=Pl(de.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}f[N]=n,f[O]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=f;e:switch(In(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&dr(n)}}return Zt(n),bd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=de.current,qi(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,u=zn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[N]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||fy(e.nodeValue,i)),e||Or(n,!0)}else e=Pl(e).createTextNode(o),e[N]=n,n.stateNode=e}return Zt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=qi(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[N]=n}else hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),e=!1}else i=ju(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(sa(n),n):(sa(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Zt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=qi(n),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[N]=n}else hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),u=!1}else u=ju(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(sa(n),n):(sa(n),null)}return sa(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),_l(n,n.updateQueue),Zt(n),null);case 4:return Pe(),e===null&&Hd(n.stateNode.containerInfo),Zt(n),null;case 10:return or(n.type),Zt(n),null;case 19:if(T(un),o=n.memoizedState,o===null)return Zt(n),null;if(u=(n.flags&128)!==0,f=o.rendering,f===null)if(u)so(o,!1);else{if(on!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=vl(e),f!==null){for(n.flags|=128,so(o,!1),e=f.updateQueue,n.updateQueue=e,_l(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)qp(i,e),i=i.sibling;return A(un,un.current&1|2),gt&&ir(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&L()>Ll&&(n.flags|=128,u=!0,so(o,!1),n.lanes=4194304)}else{if(!u)if(e=vl(f),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,_l(n,e),so(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!gt)return Zt(n),null}else 2*L()-o.renderingStartTime>Ll&&i!==536870912&&(n.flags|=128,u=!0,so(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=L(),e.sibling=null,i=un.current,A(un,u?i&1|2:i&1),gt&&ir(n,o.treeForkCount),e):(Zt(n),null);case 22:case 23:return sa(n),Vu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(Zt(n),n.subtreeFlags&6&&(n.flags|=8192)):Zt(n),i=n.updateQueue,i!==null&&_l(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&T(gi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),or(gn),Zt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function ox(e,n){switch(Nu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return or(gn),Pe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return $t(n),null;case 31:if(n.memoizedState!==null){if(sa(n),n.alternate===null)throw Error(s(340));hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(sa(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return T(un),null;case 4:return Pe(),null;case 10:return or(n.type),null;case 22:case 23:return sa(n),Vu(),e!==null&&T(gi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return or(gn),null;case 25:return null;default:return null}}function yg(e,n){switch(Nu(n),n.tag){case 3:or(gn),Pe();break;case 26:case 27:case 5:$t(n);break;case 4:Pe();break;case 31:n.memoizedState!==null&&sa(n);break;case 13:sa(n);break;case 19:T(un);break;case 10:or(n.type);break;case 22:case 23:sa(n),Vu(),e!==null&&T(gi);break;case 24:or(gn)}}function oo(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,y=i.inst;o=f(),y.destroy=o}i=i.next}while(i!==u)}}catch(S){Mt(n,n.return,S)}}function zr(e,n,i){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=n;var j=i,U=S;try{U()}catch(re){Mt(u,j,re)}}}o=o.next}while(o!==f)}}catch(re){Mt(n,n.return,re)}}function vg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{lm(n,i)}catch(o){Mt(e,e.return,o)}}}function bg(e,n,i){i.props=Si(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Mt(e,n,o)}}function lo(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Mt(e,n,u)}}function Ya(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Mt(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Mt(e,n,u)}else i.current=null}function wg(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Mt(e,e.return,u)}}function wd(e,n,i){try{var o=e.stateNode;jx(o,e.type,i,n),o[O]=n}catch(u){Mt(e,e.return,u)}}function Sg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vr(e.type)||e.tag===4}function Sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Sg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xd(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=nr));else if(o!==4&&(o===27&&Vr(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(xd(e,n,i),e=e.sibling;e!==null;)xd(e,n,i),e=e.sibling}function Dl(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&Vr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Dl(e,n,i),e=e.sibling;e!==null;)Dl(e,n,i),e=e.sibling}function xg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);In(n,o,i),n[N]=e,n[O]=i}catch(f){Mt(e,e.return,f)}}var fr=!1,bn=!1,kd=!1,kg=typeof WeakSet=="function"?WeakSet:Set,An=null;function lx(e,n){if(e=e.containerInfo,qd=Jl,e=zp(e),gu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,S=-1,j=-1,U=0,re=0,ce=e,V=null;t:for(;;){for(var W;ce!==i||u!==0&&ce.nodeType!==3||(S=y+u),ce!==f||o!==0&&ce.nodeType!==3||(j=y+o),ce.nodeType===3&&(y+=ce.nodeValue.length),(W=ce.firstChild)!==null;)V=ce,ce=W;for(;;){if(ce===e)break t;if(V===i&&++U===u&&(S=y),V===f&&++re===o&&(j=y),(W=ce.nextSibling)!==null)break;ce=V,V=ce.parentNode}ce=W}i=S===-1||j===-1?null:{start:S,end:j}}else i=null}i=i||{start:0,end:0}}else i=null;for(Yd={focusedElem:e,selectionRange:i},Jl=!1,An=n;An!==null;)if(n=An,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,An=e;else for(;An!==null;){switch(n=An,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var Re=Si(i.type,u);e=o.getSnapshotBeforeUpdate(Re,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ye){Mt(i,i.return,Ye)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Zd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,An=e;break}An=n.return}}function Eg(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:pr(e,i),o&4&&oo(5,i);break;case 1:if(pr(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){Mt(i,i.return,y)}else{var u=Si(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Mt(i,i.return,y)}}o&64&&vg(i),o&512&&lo(i,i.return);break;case 3:if(pr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{lm(e,n)}catch(y){Mt(i,i.return,y)}}break;case 27:n===null&&o&4&&xg(i);case 26:case 5:pr(e,i),n===null&&o&4&&wg(i),o&512&&lo(i,i.return);break;case 12:pr(e,i);break;case 31:pr(e,i),o&4&&Ng(e,i);break;case 13:pr(e,i),o&4&&Og(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=yx.bind(null,i),Bx(e,i))));break;case 22:if(o=i.memoizedState!==null||fr,!o){n=n!==null&&n.memoizedState!==null||bn,u=fr;var f=bn;fr=o,(bn=n)&&!f?mr(e,i,(i.subtreeFlags&8772)!==0):pr(e,i),fr=u,bn=f}break;case 30:break;default:pr(e,i)}}function Cg(e){var n=e.alternate;n!==null&&(e.alternate=null,Cg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Qt(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Jt=null,Kn=!1;function hr(e,n,i){for(i=i.child;i!==null;)Tg(e,n,i),i=i.sibling}function Tg(e,n,i){if(xe&&typeof xe.onCommitFiberUnmount=="function")try{xe.onCommitFiberUnmount(se,i)}catch{}switch(i.tag){case 26:bn||Ya(i,n),hr(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bn||Ya(i,n);var o=Jt,u=Kn;Vr(i.type)&&(Jt=i.stateNode,Kn=!1),hr(e,n,i),vo(i.stateNode),Jt=o,Kn=u;break;case 5:bn||Ya(i,n);case 6:if(o=Jt,u=Kn,Jt=null,hr(e,n,i),Jt=o,Kn=u,Jt!==null)if(Kn)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(i.stateNode)}catch(f){Mt(i,n,f)}else try{Jt.removeChild(i.stateNode)}catch(f){Mt(i,n,f)}break;case 18:Jt!==null&&(Kn?(e=Jt,vy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ds(e)):vy(Jt,i.stateNode));break;case 4:o=Jt,u=Kn,Jt=i.stateNode.containerInfo,Kn=!0,hr(e,n,i),Jt=o,Kn=u;break;case 0:case 11:case 14:case 15:zr(2,i,n),bn||zr(4,i,n),hr(e,n,i);break;case 1:bn||(Ya(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&bg(i,n,o)),hr(e,n,i);break;case 21:hr(e,n,i);break;case 22:bn=(o=bn)||i.memoizedState!==null,hr(e,n,i),bn=o;break;default:hr(e,n,i)}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ds(e)}catch(i){Mt(n,n.return,i)}}}function Og(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(i){Mt(n,n.return,i)}}function cx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new kg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new kg),n;default:throw Error(s(435,e.tag))}}function Ml(e,n){var i=cx(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var u=vx.bind(null,e,o);o.then(u,u)}})}function Qn(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Vr(S.type)){Jt=S.stateNode,Kn=!1;break e}break;case 5:Jt=S.stateNode,Kn=!1;break e;case 3:case 4:Jt=S.stateNode.containerInfo,Kn=!0;break e}S=S.return}if(Jt===null)throw Error(s(160));Tg(f,y,u),Jt=null,Kn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)jg(n,e),n=n.sibling}var Aa=null;function jg(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qn(n,e),Wn(e),o&4&&(zr(3,e,e.return),oo(3,e),zr(5,e,e.return));break;case 1:Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),o&64&&fr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Aa;if(Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[qe]||f[N]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),In(f,o,i),f[N]=e,qt(f),o=f;break e;case"link":var y=jy("link","href",u).get(o+(i.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(S,1);break t}}f=u.createElement(o),In(f,o,i),u.head.appendChild(f);break;case"meta":if(y=jy("meta","content",u).get(o+(i.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(S,1);break t}}f=u.createElement(o),In(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[N]=e,qt(f),o=f}e.stateNode=o}else Ay(u,e.type,e.stateNode);else e.stateNode=Oy(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Ay(u,e.type,e.stateNode):Oy(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&wd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),i!==null&&o&4&&wd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),e.flags&32){u=e.stateNode;try{Ri(u,"")}catch(Re){Mt(e,e.return,Re)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,wd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(kd=!0);break;case 6:if(Qn(n,e),Wn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Re){Mt(e,e.return,Re)}}break;case 3:if(Xl=null,u=Aa,Aa=Fl(n.containerInfo),Qn(n,e),Aa=u,Wn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ds(n.containerInfo)}catch(Re){Mt(e,e.return,Re)}kd&&(kd=!1,Ag(e));break;case 4:o=Aa,Aa=Fl(e.stateNode.containerInfo),Qn(n,e),Wn(e),Aa=o;break;case 12:Qn(n,e),Wn(e);break;case 31:Qn(n,e),Wn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 13:Qn(n,e),Wn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(zl=L()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 22:u=e.memoizedState!==null;var j=i!==null&&i.memoizedState!==null,U=fr,re=bn;if(fr=U||u,bn=re||j,Qn(n,e),bn=re,fr=U,Wn(e),o&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||j||fr||bn||xi(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){j=i=n;try{if(f=j.stateNode,u)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=j.stateNode;var ce=j.memoizedProps.style,V=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;S.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(Re){Mt(j,j.return,Re)}}}else if(n.tag===6){if(i===null){j=n;try{j.stateNode.nodeValue=u?"":j.memoizedProps}catch(Re){Mt(j,j.return,Re)}}}else if(n.tag===18){if(i===null){j=n;try{var W=j.stateNode;u?by(W,!0):by(j.stateNode,!1)}catch(Re){Mt(j,j.return,Re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Ml(e,i))));break;case 19:Qn(n,e),Wn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 30:break;case 21:break;default:Qn(n,e),Wn(e)}}function Wn(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(Sg(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=Sd(e);Dl(e,f,u);break;case 5:var y=i.stateNode;i.flags&32&&(Ri(y,""),i.flags&=-33);var S=Sd(e);Dl(e,S,y);break;case 3:case 4:var j=i.stateNode.containerInfo,U=Sd(e);xd(e,U,j);break;default:throw Error(s(161))}}catch(re){Mt(e,e.return,re)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ag(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ag(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function pr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Eg(e,n.alternate,n),n=n.sibling}function xi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:zr(4,n,n.return),xi(n);break;case 1:Ya(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&bg(n,n.return,i),xi(n);break;case 27:vo(n.stateNode);case 26:case 5:Ya(n,n.return),xi(n);break;case 22:n.memoizedState===null&&xi(n);break;case 30:xi(n);break;default:xi(n)}e=e.sibling}}function mr(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:mr(u,f,i),oo(4,f);break;case 1:if(mr(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(U){Mt(o,o.return,U)}if(o=f,u=o.updateQueue,u!==null){var S=o.stateNode;try{var j=u.shared.hiddenCallbacks;if(j!==null)for(u.shared.hiddenCallbacks=null,u=0;u<j.length;u++)om(j[u],S)}catch(U){Mt(o,o.return,U)}}i&&y&64&&vg(f),lo(f,f.return);break;case 27:xg(f);case 26:case 5:mr(u,f,i),i&&o===null&&y&4&&wg(f),lo(f,f.return);break;case 12:mr(u,f,i);break;case 31:mr(u,f,i),i&&y&4&&Ng(u,f);break;case 13:mr(u,f,i),i&&y&4&&Og(u,f);break;case 22:f.memoizedState===null&&mr(u,f,i),lo(f,f.return);break;case 30:break;default:mr(u,f,i)}n=n.sibling}}function Ed(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Zs(i))}function Cd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zs(e))}function _a(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)_g(e,n,i,o),n=n.sibling}function _g(e,n,i,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:_a(e,n,i,o),u&2048&&oo(9,n);break;case 1:_a(e,n,i,o);break;case 3:_a(e,n,i,o),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zs(e)));break;case 12:if(u&2048){_a(e,n,i,o),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(j){Mt(n,n.return,j)}}else _a(e,n,i,o);break;case 31:_a(e,n,i,o);break;case 13:_a(e,n,i,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?_a(e,n,i,o):co(e,n):f._visibility&2?_a(e,n,i,o):(f._visibility|=2,es(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Ed(y,n);break;case 24:_a(e,n,i,o),u&2048&&Cd(n.alternate,n);break;default:_a(e,n,i,o)}}function es(e,n,i,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,y=n,S=i,j=o,U=y.flags;switch(y.tag){case 0:case 11:case 15:es(f,y,S,j,u),oo(8,y);break;case 23:break;case 22:var re=y.stateNode;y.memoizedState!==null?re._visibility&2?es(f,y,S,j,u):co(f,y):(re._visibility|=2,es(f,y,S,j,u)),u&&U&2048&&Ed(y.alternate,y);break;case 24:es(f,y,S,j,u),u&&U&2048&&Cd(y.alternate,y);break;default:es(f,y,S,j,u)}n=n.sibling}}function co(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,u=o.flags;switch(o.tag){case 22:co(i,o),u&2048&&Ed(o.alternate,o);break;case 24:co(i,o),u&2048&&Cd(o.alternate,o);break;default:co(i,o)}n=n.sibling}}var uo=8192;function ts(e,n,i){if(e.subtreeFlags&uo)for(e=e.child;e!==null;)Dg(e,n,i),e=e.sibling}function Dg(e,n,i){switch(e.tag){case 26:ts(e,n,i),e.flags&uo&&e.memoizedState!==null&&Xx(i,Aa,e.memoizedState,e.memoizedProps);break;case 5:ts(e,n,i);break;case 3:case 4:var o=Aa;Aa=Fl(e.stateNode.containerInfo),ts(e,n,i),Aa=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=uo,uo=16777216,ts(e,n,i),uo=o):ts(e,n,i));break;default:ts(e,n,i)}}function Mg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];An=o,zg(o,e)}Mg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rg(e),e=e.sibling}function Rg(e){switch(e.tag){case 0:case 11:case 15:fo(e),e.flags&2048&&zr(9,e,e.return);break;case 3:fo(e);break;case 12:fo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Rl(e)):fo(e);break;default:fo(e)}}function Rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];An=o,zg(o,e)}Mg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:zr(8,n,n.return),Rl(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Rl(n));break;default:Rl(n)}e=e.sibling}}function zg(e,n){for(;An!==null;){var i=An;switch(i.tag){case 0:case 11:case 15:zr(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Zs(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,An=o;else e:for(i=e;An!==null;){o=An;var u=o.sibling,f=o.return;if(Cg(o),o===i){An=null;break e}if(u!==null){u.return=f,An=u;break e}An=f}}}var ux={getCacheForType:function(e){var n=Ln(gn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Ln(gn).controller.signal}},dx=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ht=null,ot=null,ut=0,Dt=0,oa=null,Lr=!1,ns=!1,Td=!1,gr=0,on=0,Br=0,ki=0,Nd=0,la=0,as=0,ho=null,Jn=null,Od=!1,zl=0,Lg=0,Ll=1/0,Bl=null,Ir=null,Cn=0,$r=null,rs=null,yr=0,jd=0,Ad=null,Bg=null,po=0,_d=null;function ca(){return(Tt&2)!==0&&ut!==0?ut&-ut:Y.T!==null?Bd():ii()}function Ig(){if(la===0)if((ut&536870912)===0||gt){var e=Ee;Ee<<=1,(Ee&3932160)===0&&(Ee=262144),la=e}else la=536870912;return e=ia.current,e!==null&&(e.flags|=32),la}function ea(e,n,i){(e===Ht&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)&&(is(e,0),Ur(e,ut,la,!1)),kn(e,i),((Tt&2)===0||e!==Ht)&&(e===Ht&&((Tt&2)===0&&(ki|=i),on===4&&Ur(e,ut,la,!1)),Pa(e))}function $g(e,n,i){if((Tt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Gt(e,n),u=o?px(e,n):Md(e,n,!0),f=o;do{if(u===0){ns&&!o&&Ur(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!fx(i)){u=Md(e,n,!1),f=!1;continue}if(u===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=e;u=ho;var j=S.current.memoizedState.isDehydrated;if(j&&(is(S,y).flags|=256),y=Md(S,y,!1),y!==2){if(Td&&!j){S.errorRecoveryDisabledLanes|=f,ki|=f,u=4;break e}f=Jn,Jn=u,f!==null&&(Jn===null?Jn=f:Jn.push.apply(Jn,f))}u=y}if(f=!1,u!==2)continue}}if(u===1){is(e,0),Ur(e,n,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ur(o,n,la,!Lr);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(u=zl+300-L(),10<u)){if(Ur(o,n,la,!Lr),xt(o,0,!0)!==0)break e;yr=n,o.timeoutHandle=gy(Ug.bind(null,o,i,Jn,Bl,Od,n,la,ki,as,Lr,f,"Throttled",-0,0),u);break e}Ug(o,i,Jn,Bl,Od,n,la,ki,as,Lr,f,null,-0,0)}}break}while(!0);Pa(e)}function Ug(e,n,i,o,u,f,y,S,j,U,re,ce,V,W){if(e.timeoutHandle=-1,ce=n.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},Dg(n,f,ce);var Re=(f&62914560)===f?zl-L():(f&4194048)===f?Lg-L():0;if(Re=Kx(ce,Re),Re!==null){yr=f,e.cancelPendingCommit=Re(Zg.bind(null,e,n,f,i,o,u,y,S,j,re,ce,null,V,W)),Ur(e,f,y,!U);return}}Zg(e,n,f,i,o,u,y,S,j)}function fx(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!aa(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ur(e,n,i,o){n&=~Nd,n&=~ki,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var u=n;0<u;){var f=31-Oe(u),y=1<<f;o[f]=-1,u&=~y}i!==0&&pn(e,i,n)}function Il(){return(Tt&6)===0?(mo(0),!1):!0}function Dd(){if(ot!==null){if(Dt===0)var e=ot.return;else e=ot,sr=pi=null,Zu(e),Xi=null,Ks=0,e=ot;for(;e!==null;)yg(e.alternate,e),e=e.return;ot=null}}function is(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Dx(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),yr=0,Dd(),Ht=e,ot=i=rr(e.current,null),ut=n,Dt=0,oa=null,Lr=!1,ns=Gt(e,n),Td=!1,as=la=Nd=ki=Br=on=0,Jn=ho=null,Od=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var u=31-Oe(o),f=1<<u;n|=e[u],o&=~f}return gr=n,il(),i}function Hg(e,n){tt=null,Y.H=ro,n===Zi||n===hl?(n=am(),Dt=3):n===Lu?(n=am(),Dt=4):Dt=n===ud?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,oa=n,ot===null&&(on=1,Nl(e,ha(n,e.current)))}function Vg(){var e=ia.current;return e===null?!0:(ut&4194048)===ut?ya===null:(ut&62914560)===ut||(ut&536870912)!==0?e===ya:!1}function Gg(){var e=Y.H;return Y.H=ro,e===null?ro:e}function qg(){var e=Y.A;return Y.A=ux,e}function $l(){on=4,Lr||(ut&4194048)!==ut&&ia.current!==null||(ns=!0),(Br&134217727)===0&&(ki&134217727)===0||Ht===null||Ur(Ht,ut,la,!1)}function Md(e,n,i){var o=Tt;Tt|=2;var u=Gg(),f=qg();(Ht!==e||ut!==n)&&(Bl=null,is(e,n)),n=!1;var y=on;e:do try{if(Dt!==0&&ot!==null){var S=ot,j=oa;switch(Dt){case 8:Dd(),y=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(n=!0);var U=Dt;if(Dt=0,oa=null,ss(e,S,j,U),i&&ns){y=0;break e}break;default:U=Dt,Dt=0,oa=null,ss(e,S,j,U)}}hx(),y=on;break}catch(re){Hg(e,re)}while(!0);return n&&e.shellSuspendCounter++,sr=pi=null,Tt=o,Y.H=u,Y.A=f,ot===null&&(Ht=null,ut=0,il()),y}function hx(){for(;ot!==null;)Yg(ot)}function px(e,n){var i=Tt;Tt|=2;var o=Gg(),u=qg();Ht!==e||ut!==n?(Bl=null,Ll=L()+500,is(e,n)):ns=Gt(e,n);e:do try{if(Dt!==0&&ot!==null){n=ot;var f=oa;t:switch(Dt){case 1:Dt=0,oa=null,ss(e,n,f,1);break;case 2:case 9:if(tm(f)){Dt=0,oa=null,Pg(n);break}n=function(){Dt!==2&&Dt!==9||Ht!==e||(Dt=7),Pa(e)},f.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:tm(f)?(Dt=0,oa=null,Pg(n)):(Dt=0,oa=null,ss(e,n,f,7));break;case 5:var y=null;switch(ot.tag){case 26:y=ot.memoizedState;case 5:case 27:var S=ot;if(y?_y(y):S.stateNode.complete){Dt=0,oa=null;var j=S.sibling;if(j!==null)ot=j;else{var U=S.return;U!==null?(ot=U,Ul(U)):ot=null}break t}}Dt=0,oa=null,ss(e,n,f,5);break;case 6:Dt=0,oa=null,ss(e,n,f,6);break;case 8:Dd(),on=6;break e;default:throw Error(s(462))}}mx();break}catch(re){Hg(e,re)}while(!0);return sr=pi=null,Y.H=o,Y.A=u,Tt=i,ot!==null?0:(Ht=null,ut=0,il(),on)}function mx(){for(;ot!==null&&!Ta();)Yg(ot)}function Yg(e){var n=mg(e.alternate,e,gr);e.memoizedProps=e.pendingProps,n===null?Ul(e):ot=n}function Pg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=cg(i,n,n.pendingProps,n.type,void 0,ut);break;case 11:n=cg(i,n,n.pendingProps,n.type.render,n.ref,ut);break;case 5:Zu(n);default:yg(i,n),n=ot=qp(n,gr),n=mg(i,n,gr)}e.memoizedProps=e.pendingProps,n===null?Ul(e):ot=n}function ss(e,n,i,o){sr=pi=null,Zu(n),Xi=null,Ks=0;var u=n.return;try{if(ax(e,u,n,i,ut)){on=1,Nl(e,ha(i,e.current)),ot=null;return}}catch(f){if(u!==null)throw ot=u,f;on=1,Nl(e,ha(i,e.current)),ot=null;return}n.flags&32768?(gt||o===1?e=!0:ns||(ut&536870912)!==0?e=!1:(Lr=e=!0,(o===2||o===9||o===3||o===6)&&(o=ia.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fg(n,e)):Ul(n)}function Ul(e){var n=e;do{if((n.flags&32768)!==0){Fg(n,Lr);return}e=n.return;var i=sx(n.alternate,n,gr);if(i!==null){ot=i;return}if(n=n.sibling,n!==null){ot=n;return}ot=n=e}while(n!==null);on===0&&(on=5)}function Fg(e,n){do{var i=ox(e.alternate,e);if(i!==null){i.flags&=32767,ot=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ot=e;return}ot=e=i}while(e!==null);on=6,ot=null}function Zg(e,n,i,o,u,f,y,S,j){e.cancelPendingCommit=null;do Hl();while(Cn!==0);if((Tt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=Su,cn(e,i,f,y,S,j),e===Ht&&(ot=Ht=null,ut=0),rs=n,$r=e,yr=i,jd=f,Ad=u,Bg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,bx(Q,function(){return Jg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,u=he.p,he.p=2,y=Tt,Tt|=4;try{lx(e,n,i)}finally{Tt=y,he.p=u,Y.T=o}}Cn=1,Xg(),Kg(),Qg()}}function Xg(){if(Cn===1){Cn=0;var e=$r,n=rs,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=Y.T,Y.T=null;var o=he.p;he.p=2;var u=Tt;Tt|=4;try{jg(n,e);var f=Yd,y=zp(e.containerInfo),S=f.focusedElem,j=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&Rp(S.ownerDocument.documentElement,S)){if(j!==null&&gu(S)){var U=j.start,re=j.end;if(re===void 0&&(re=U),"selectionStart"in S)S.selectionStart=U,S.selectionEnd=Math.min(re,S.value.length);else{var ce=S.ownerDocument||document,V=ce&&ce.defaultView||window;if(V.getSelection){var W=V.getSelection(),Re=S.textContent.length,Ye=Math.min(j.start,Re),It=j.end===void 0?Ye:Math.min(j.end,Re);!W.extend&&Ye>It&&(y=It,It=Ye,Ye=y);var z=Mp(S,Ye),M=Mp(S,It);if(z&&M&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==M.node||W.focusOffset!==M.offset)){var $=ce.createRange();$.setStart(z.node,z.offset),W.removeAllRanges(),Ye>It?(W.addRange($),W.extend(M.node,M.offset)):($.setEnd(M.node,M.offset),W.addRange($))}}}}for(ce=[],W=S;W=W.parentNode;)W.nodeType===1&&ce.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ce.length;S++){var ie=ce[S];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Jl=!!qd,Yd=qd=null}finally{Tt=u,he.p=o,Y.T=i}}e.current=n,Cn=2}}function Kg(){if(Cn===2){Cn=0;var e=$r,n=rs,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=Y.T,Y.T=null;var o=he.p;he.p=2;var u=Tt;Tt|=4;try{Eg(e,n.alternate,n)}finally{Tt=u,he.p=o,Y.T=i}}Cn=3}}function Qg(){if(Cn===4||Cn===3){Cn=0,Na();var e=$r,n=rs,i=yr,o=Bg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Cn=5:(Cn=0,rs=$r=null,Wg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ir=null),kr(i),n=n.stateNode,xe&&typeof xe.onCommitFiberRoot=="function")try{xe.onCommitFiberRoot(se,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Y.T,u=he.p,he.p=2,Y.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];f(S.value,{componentStack:S.stack})}}finally{Y.T=n,he.p=u}}(yr&3)!==0&&Hl(),Pa(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===_d?po++:(po=0,_d=e):po=0,mo(0)}}function Wg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Zs(n)))}function Hl(){return Xg(),Kg(),Qg(),Jg()}function Jg(){if(Cn!==5)return!1;var e=$r,n=jd;jd=0;var i=kr(yr),o=Y.T,u=he.p;try{he.p=32>i?32:i,Y.T=null,i=Ad,Ad=null;var f=$r,y=yr;if(Cn=0,rs=$r=null,yr=0,(Tt&6)!==0)throw Error(s(331));var S=Tt;if(Tt|=4,Rg(f.current),_g(f,f.current,y,i),Tt=S,mo(0,!1),xe&&typeof xe.onPostCommitFiberRoot=="function")try{xe.onPostCommitFiberRoot(se,f)}catch{}return!0}finally{he.p=u,Y.T=o,Wg(e,n)}}function ey(e,n,i){n=ha(i,n),n=cd(e.stateNode,n,2),e=Dr(e,n,2),e!==null&&(kn(e,2),Pa(e))}function Mt(e,n,i){if(e.tag===3)ey(e,e,i);else for(;n!==null;){if(n.tag===3){ey(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ir===null||!Ir.has(o))){e=ha(i,e),i=tg(2),o=Dr(n,i,2),o!==null&&(ng(i,o,n,e),kn(o,2),Pa(o));break}}n=n.return}}function Rd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new dx;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(i)||(Td=!0,u.add(i),e=gx.bind(null,e,n,i),n.then(e,e))}function gx(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ht===e&&(ut&i)===i&&(on===4||on===3&&(ut&62914560)===ut&&300>L()-zl?(Tt&2)===0&&is(e,0):Nd|=i,as===ut&&(as=0)),Pa(e)}function ty(e,n){n===0&&(n=Ut()),e=di(e,n),e!==null&&(kn(e,n),Pa(e))}function yx(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),ty(e,i)}function vx(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),ty(e,i)}function bx(e,n){return Nn(e,n)}var Vl=null,os=null,zd=!1,Gl=!1,Ld=!1,Hr=0;function Pa(e){e!==os&&e.next===null&&(os===null?Vl=os=e:os=os.next=e),Gl=!0,zd||(zd=!0,Sx())}function mo(e,n){if(!Ld&&Gl){Ld=!0;do for(var i=!1,o=Vl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var y=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Oe(42|e)+1)-1,f&=u&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,iy(o,f))}else f=ut,f=xt(o,o===Ht?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Gt(o,f)||(i=!0,iy(o,f));o=o.next}while(i);Ld=!1}}function wx(){ny()}function ny(){Gl=zd=!1;var e=0;Hr!==0&&_x()&&(e=Hr);for(var n=L(),i=null,o=Vl;o!==null;){var u=o.next,f=ay(o,n);f===0?(o.next=null,i===null?Vl=u:i.next=u,u===null&&(os=i)):(i=o,(e!==0||(f&3)!==0)&&(Gl=!0)),o=u}Cn!==0&&Cn!==5||mo(e),Hr!==0&&(Hr=0)}function ay(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Oe(f),S=1<<y,j=u[y];j===-1?((S&i)===0||(S&o)!==0)&&(u[y]=ct(S,n)):j<=n&&(e.expiredLanes|=S),f&=~S}if(n=Ht,i=ut,i=xt(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zn(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Gt(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&Zn(o),kr(i)){case 2:case 8:i=P;break;case 32:i=Q;break;case 268435456:i=C;break;default:i=Q}return o=ry.bind(null,e),i=Nn(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&Zn(o),e.callbackPriority=2,e.callbackNode=null,2}function ry(e,n){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Hl()&&e.callbackNode!==i)return null;var o=ut;return o=xt(e,e===Ht?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:($g(e,o,n),ay(e,L()),e.callbackNode!=null&&e.callbackNode===i?ry.bind(null,e):null)}function iy(e,n){if(Hl())return null;$g(e,n,!0)}function Sx(){Mx(function(){(Tt&6)!==0?Nn(_,wx):ny()})}function Bd(){if(Hr===0){var e=Pi;e===0&&(e=Xe,Xe<<=1,(Xe&261888)===0&&(Xe=256)),Hr=e}return Hr}function sy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qo(""+e)}function oy(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function xx(e,n,i,o,u){if(n==="submit"&&i&&i.stateNode===u){var f=sy((u[O]||null).action),y=o.submitter;y&&(n=(n=y[O]||null)?sy(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var S=new tl("action","action",null,o,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var j=y?oy(u,y):new FormData(u);ad(i,{pending:!0,data:j,method:u.method,action:f},null,j)}}else typeof f=="function"&&(S.preventDefault(),j=y?oy(u,y):new FormData(u),ad(i,{pending:!0,data:j,method:u.method,action:f},f,j))},currentTarget:u}]})}}for(var Id=0;Id<wu.length;Id++){var $d=wu[Id],kx=$d.toLowerCase(),Ex=$d[0].toUpperCase()+$d.slice(1);ja(kx,"on"+Ex)}ja(Ip,"onAnimationEnd"),ja($p,"onAnimationIteration"),ja(Up,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja(US,"onTransitionRun"),ja(HS,"onTransitionStart"),ja(VS,"onTransitionCancel"),ja(Hp,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function ly(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var S=o[y],j=S.instance,U=S.currentTarget;if(S=S.listener,j!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=U;try{f(u)}catch(re){rl(re)}u.currentTarget=null,f=j}else for(y=0;y<o.length;y++){if(S=o[y],j=S.instance,U=S.currentTarget,S=S.listener,j!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=U;try{f(u)}catch(re){rl(re)}u.currentTarget=null,f=j}}}}function lt(e,n){var i=n[oe];i===void 0&&(i=n[oe]=new Set);var o=e+"__bubble";i.has(o)||(cy(n,e,2,!1),i.add(o))}function Ud(e,n,i){var o=0;n&&(o|=4),cy(i,e,o,n)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[ql]){e[ql]=!0,Ha.forEach(function(i){i!=="selectionchange"&&(Cx.has(i)||Ud(i,!1,e),Ud(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ql]||(n[ql]=!0,Ud("selectionchange",!1,n))}}function cy(e,n,i,o){switch(Iy(n)){case 2:var u=Jx;break;case 8:u=ek;break;default:u=nf}i=u.bind(null,n,i,e),u=void 0,!ou||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Vd(e,n,i,o,u){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var j=y.tag;if((j===3||j===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=_t(S),y===null)return;if(j=y.tag,j===5||j===6||j===26||j===27){o=f=y;continue e}S=S.parentNode}}o=o.return}pp(function(){var U=f,re=iu(i),ce=[];e:{var V=Vp.get(e);if(V!==void 0){var W=tl,Re=e;switch(e){case"keypress":if(Jo(i)===0)break e;case"keydown":case"keyup":W=vS;break;case"focusin":Re="focus",W=du;break;case"focusout":Re="blur",W=du;break;case"beforeblur":case"afterblur":W=du;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=sS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=SS;break;case Ip:case $p:case Up:W=cS;break;case Hp:W=kS;break;case"scroll":case"scrollend":W=rS;break;case"wheel":W=CS;break;case"copy":case"cut":case"paste":W=dS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=bp;break;case"toggle":case"beforetoggle":W=NS}var Ye=(n&4)!==0,It=!Ye&&(e==="scroll"||e==="scrollend"),z=Ye?V!==null?V+"Capture":null:V;Ye=[];for(var M=U,$;M!==null;){var ie=M;if($=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||$===null||z===null||(ie=Bs(M,z),ie!=null&&Ye.push(yo(M,ie,$))),It)break;M=M.return}0<Ye.length&&(V=new W(V,Re,null,i,re),ce.push({event:V,listeners:Ye}))}}if((n&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",V&&i!==ru&&(Re=i.relatedTarget||i.fromElement)&&(_t(Re)||Re[F]))break e;if((W||V)&&(V=re.window===re?re:(V=re.ownerDocument)?V.defaultView||V.parentWindow:window,W?(Re=i.relatedTarget||i.toElement,W=U,Re=Re?_t(Re):null,Re!==null&&(It=c(Re),Ye=Re.tag,Re!==It||Ye!==5&&Ye!==27&&Ye!==6)&&(Re=null)):(W=null,Re=U),W!==Re)){if(Ye=yp,ie="onMouseLeave",z="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ye=bp,ie="onPointerLeave",z="onPointerEnter",M="pointer"),It=W==null?V:Ua(W),$=Re==null?V:Ua(Re),V=new Ye(ie,M+"leave",W,i,re),V.target=It,V.relatedTarget=$,ie=null,_t(re)===U&&(Ye=new Ye(z,M+"enter",Re,i,re),Ye.target=$,Ye.relatedTarget=It,ie=Ye),It=ie,W&&Re)t:{for(Ye=Tx,z=W,M=Re,$=0,ie=z;ie;ie=Ye(ie))$++;ie=0;for(var He=M;He;He=Ye(He))ie++;for(;0<$-ie;)z=Ye(z),$--;for(;0<ie-$;)M=Ye(M),ie--;for(;$--;){if(z===M||M!==null&&z===M.alternate){Ye=z;break t}z=Ye(z),M=Ye(M)}Ye=null}else Ye=null;W!==null&&uy(ce,V,W,Ye,!1),Re!==null&&It!==null&&uy(ce,It,Re,Ye,!0)}}e:{if(V=U?Ua(U):window,W=V.nodeName&&V.nodeName.toLowerCase(),W==="select"||W==="input"&&V.type==="file")var kt=Np;else if(Cp(V))if(Op)kt=BS;else{kt=zS;var Be=RS}else W=V.nodeName,!W||W.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?U&&au(U.elementType)&&(kt=Np):kt=LS;if(kt&&(kt=kt(e,U))){Tp(ce,kt,i,re);break e}Be&&Be(e,V,U),e==="focusout"&&U&&V.type==="number"&&U.memoizedProps.value!=null&&nu(V,"number",V.value)}switch(Be=U?Ua(U):window,e){case"focusin":(Cp(Be)||Be.contentEditable==="true")&&(Ii=Be,yu=U,Ys=null);break;case"focusout":Ys=yu=Ii=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Lp(ce,i,re);break;case"selectionchange":if($S)break;case"keydown":case"keyup":Lp(ce,i,re)}var at;if(hu)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Bi?kp(e,i)&&(dt="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(dt="onCompositionStart");dt&&(wp&&i.locale!=="ko"&&(Bi||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Bi&&(at=mp()):(Cr=re,lu="value"in Cr?Cr.value:Cr.textContent,Bi=!0)),Be=Yl(U,dt),0<Be.length&&(dt=new vp(dt,e,null,i,re),ce.push({event:dt,listeners:Be}),at?dt.data=at:(at=Ep(i),at!==null&&(dt.data=at)))),(at=jS?AS(e,i):_S(e,i))&&(dt=Yl(U,"onBeforeInput"),0<dt.length&&(Be=new vp("onBeforeInput","beforeinput",null,i,re),ce.push({event:Be,listeners:dt}),Be.data=at)),xx(ce,e,U,i,re)}ly(ce,n)})}function yo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Yl(e,n){for(var i=n+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Bs(e,i),u!=null&&o.unshift(yo(e,u,f)),u=Bs(e,n),u!=null&&o.push(yo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Tx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function uy(e,n,i,o,u){for(var f=n._reactName,y=[];i!==null&&i!==o;){var S=i,j=S.alternate,U=S.stateNode;if(S=S.tag,j!==null&&j===o)break;S!==5&&S!==26&&S!==27||U===null||(j=U,u?(U=Bs(i,f),U!=null&&y.unshift(yo(i,U,j))):u||(U=Bs(i,f),U!=null&&y.push(yo(i,U,j)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var Nx=/\r\n?/g,Ox=/\u0000|\uFFFD/g;function dy(e){return(typeof e=="string"?e:""+e).replace(Nx,`
`).replace(Ox,"")}function fy(e,n){return n=dy(n),dy(e)===n}function Bt(e,n,i,o,u,f){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ri(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ri(e,""+o);break;case"className":Ue(e,"class",o);break;case"tabIndex":Ue(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ue(e,i,o);break;case"style":fp(e,o,f);break;case"data":if(n!=="object"){Ue(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Qo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Bt(e,n,"name",u.name,u,null),Bt(e,n,"formEncType",u.formEncType,u,null),Bt(e,n,"formMethod",u.formMethod,u,null),Bt(e,n,"formTarget",u.formTarget,u,null)):(Bt(e,n,"encType",u.encType,u,null),Bt(e,n,"method",u.method,u,null),Bt(e,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Qo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=nr);break;case"onScroll":o!=null&&lt("scroll",e);break;case"onScrollEnd":o!=null&&lt("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Qo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":lt("beforetoggle",e),lt("toggle",e),je(e,"popover",o);break;case"xlinkActuate":mt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":mt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":mt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":mt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":mt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":mt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":mt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":mt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":mt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":je(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=nS.get(i)||i,je(e,i,o))}}function Gd(e,n,i,o,u,f){switch(i){case"style":fp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Ri(e,o):(typeof o=="number"||typeof o=="bigint")&&Ri(e,""+o);break;case"onScroll":o!=null&&lt("scroll",e);break;case"onScrollEnd":o!=null&&lt("scrollend",e);break;case"onClick":o!=null&&(e.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Er.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=e[O]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):je(e,i,o)}}}function In(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":lt("error",e),lt("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var y=i[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Bt(e,n,f,y,i,null)}}u&&Bt(e,n,"srcSet",i.srcSet,i,null),o&&Bt(e,n,"src",i.src,i,null);return;case"input":lt("invalid",e);var S=f=y=u=null,j=null,U=null;for(o in i)if(i.hasOwnProperty(o)){var re=i[o];if(re!=null)switch(o){case"name":u=re;break;case"type":y=re;break;case"checked":j=re;break;case"defaultChecked":U=re;break;case"value":f=re;break;case"defaultValue":S=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,n));break;default:Bt(e,n,o,re,i,null)}}tu(e,f,S,j,U,y,u,!1);return;case"select":lt("invalid",e),o=y=f=null;for(u in i)if(i.hasOwnProperty(u)&&(S=i[u],S!=null))switch(u){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:Bt(e,n,u,S,i,null)}n=f,i=y,e.multiple=!!o,n!=null?Mi(e,!!o,n,!1):i!=null&&Mi(e,!!o,i,!0);return;case"textarea":lt("invalid",e),f=u=o=null;for(y in i)if(i.hasOwnProperty(y)&&(S=i[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Bt(e,n,y,S,i,null)}up(e,o,u,f);return;case"option":for(j in i)if(i.hasOwnProperty(j)&&(o=i[j],o!=null))switch(j){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Bt(e,n,j,o,i,null)}return;case"dialog":lt("beforetoggle",e),lt("toggle",e),lt("cancel",e),lt("close",e);break;case"iframe":case"object":lt("load",e);break;case"video":case"audio":for(o=0;o<go.length;o++)lt(go[o],e);break;case"image":lt("error",e),lt("load",e);break;case"details":lt("toggle",e);break;case"embed":case"source":case"link":lt("error",e),lt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(U in i)if(i.hasOwnProperty(U)&&(o=i[U],o!=null))switch(U){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Bt(e,n,U,o,i,null)}return;default:if(au(n)){for(re in i)i.hasOwnProperty(re)&&(o=i[re],o!==void 0&&Gd(e,n,re,o,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(o=i[S],o!=null&&Bt(e,n,S,o,i,null))}function jx(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,y=null,S=null,j=null,U=null,re=null;for(W in i){var ce=i[W];if(i.hasOwnProperty(W)&&ce!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":j=ce;default:o.hasOwnProperty(W)||Bt(e,n,W,null,o,ce)}}for(var V in o){var W=o[V];if(ce=i[V],o.hasOwnProperty(V)&&(W!=null||ce!=null))switch(V){case"type":f=W;break;case"name":u=W;break;case"checked":U=W;break;case"defaultChecked":re=W;break;case"value":y=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,n));break;default:W!==ce&&Bt(e,n,V,W,o,ce)}}Oa(e,y,S,j,U,re,f,u);return;case"select":W=y=S=V=null;for(f in i)if(j=i[f],i.hasOwnProperty(f)&&j!=null)switch(f){case"value":break;case"multiple":W=j;default:o.hasOwnProperty(f)||Bt(e,n,f,null,o,j)}for(u in o)if(f=o[u],j=i[u],o.hasOwnProperty(u)&&(f!=null||j!=null))switch(u){case"value":V=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==j&&Bt(e,n,u,f,o,j)}n=S,i=y,o=W,V!=null?Mi(e,!!i,V,!1):!!o!=!!i&&(n!=null?Mi(e,!!i,n,!0):Mi(e,!!i,i?[]:"",!1));return;case"textarea":W=V=null;for(S in i)if(u=i[S],i.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Bt(e,n,S,null,o,u)}for(y in o)if(u=o[y],f=i[y],o.hasOwnProperty(y)&&(u!=null||f!=null))switch(y){case"value":V=u;break;case"defaultValue":W=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Bt(e,n,y,u,o,f)}cp(e,V,W);return;case"option":for(var Re in i)if(V=i[Re],i.hasOwnProperty(Re)&&V!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:Bt(e,n,Re,null,o,V)}for(j in o)if(V=o[j],W=i[j],o.hasOwnProperty(j)&&V!==W&&(V!=null||W!=null))switch(j){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Bt(e,n,j,V,o,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ye in i)V=i[Ye],i.hasOwnProperty(Ye)&&V!=null&&!o.hasOwnProperty(Ye)&&Bt(e,n,Ye,null,o,V);for(U in o)if(V=o[U],W=i[U],o.hasOwnProperty(U)&&V!==W&&(V!=null||W!=null))switch(U){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:Bt(e,n,U,V,o,W)}return;default:if(au(n)){for(var It in i)V=i[It],i.hasOwnProperty(It)&&V!==void 0&&!o.hasOwnProperty(It)&&Gd(e,n,It,void 0,o,V);for(re in o)V=o[re],W=i[re],!o.hasOwnProperty(re)||V===W||V===void 0&&W===void 0||Gd(e,n,re,V,o,W);return}}for(var z in i)V=i[z],i.hasOwnProperty(z)&&V!=null&&!o.hasOwnProperty(z)&&Bt(e,n,z,null,o,V);for(ce in o)V=o[ce],W=i[ce],!o.hasOwnProperty(ce)||V===W||V==null&&W==null||Bt(e,n,ce,V,o,W)}function hy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ax(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,y=u.initiatorType,S=u.duration;if(f&&S&&hy(y)){for(y=0,S=u.responseEnd,o+=1;o<i.length;o++){var j=i[o],U=j.startTime;if(U>S)break;var re=j.transferSize,ce=j.initiatorType;re&&hy(ce)&&(j=j.responseEnd,y+=re*(j<S?1:(S-U)/(j-U)))}if(--o,n+=8*(f+y)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qd=null,Yd=null;function Pl(e){return e.nodeType===9?e:e.ownerDocument}function py(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function my(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Pd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Fd=null;function _x(){var e=window.event;return e&&e.type==="popstate"?e===Fd?!1:(Fd=e,!0):(Fd=null,!1)}var gy=typeof setTimeout=="function"?setTimeout:void 0,Dx=typeof clearTimeout=="function"?clearTimeout:void 0,yy=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof yy<"u"?function(e){return yy.resolve(null).then(e).catch(Rx)}:gy;function Rx(e){setTimeout(function(){throw e})}function Vr(e){return e==="head"}function vy(e,n){var i=n,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),ds(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")vo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,vo(i);for(var f=i.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[qe]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=y}}else i==="body"&&vo(e.ownerDocument.body);i=u}while(i);ds(n)}function by(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Zd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Zd(i),Qt(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function zx(e,n,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[qe])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=va(e.nextSibling),e===null)break}return null}function Lx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=va(e.nextSibling),e===null))return null;return e}function wy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=va(e.nextSibling),e===null))return null;return e}function Xd(e){return e.data==="$?"||e.data==="$~"}function Kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Bx(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function va(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Qd=null;function Sy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return va(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function xy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function ky(e,n,i){switch(n=Pl(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function vo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Qt(e)}var ba=new Map,Ey=new Set;function Fl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vr=he.d;he.d={f:Ix,r:$x,D:Ux,C:Hx,L:Vx,m:Gx,X:Yx,S:qx,M:Px};function Ix(){var e=vr.f(),n=Il();return e||n}function $x(e){var n=pt(e);n!==null&&n.tag===5&&n.type==="form"?Hm(n):vr.r(e)}var ls=typeof document>"u"?null:document;function Cy(e,n,i){var o=ls;if(o&&typeof n=="string"&&n){var u=mn(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),Ey.has(u)||(Ey.add(u),e={rel:e,crossOrigin:i,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),In(n,"link",e),qt(n),o.head.appendChild(n)))}}function Ux(e){vr.D(e),Cy("dns-prefetch",e,null)}function Hx(e,n){vr.C(e,n),Cy("preconnect",e,n)}function Vx(e,n,i){vr.L(e,n,i);var o=ls;if(o&&e&&n){var u='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+mn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+mn(i.imageSizes)+'"]')):u+='[href="'+mn(e)+'"]';var f=u;switch(n){case"style":f=cs(e);break;case"script":f=us(e)}ba.has(f)||(e=b({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ba.set(f,e),o.querySelector(u)!==null||n==="style"&&o.querySelector(bo(f))||n==="script"&&o.querySelector(wo(f))||(n=o.createElement("link"),In(n,"link",e),qt(n),o.head.appendChild(n)))}}function Gx(e,n){vr.m(e,n);var i=ls;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+mn(o)+'"][href="'+mn(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=us(e)}if(!ba.has(f)&&(e=b({rel:"modulepreload",href:e},n),ba.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(wo(f)))return}o=i.createElement("link"),In(o,"link",e),qt(o),i.head.appendChild(o)}}}function qx(e,n,i){vr.S(e,n,i);var o=ls;if(o&&e){var u=Wt(o).hoistableStyles,f=cs(e);n=n||"default";var y=u.get(f);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(bo(f)))S.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ba.get(f))&&Wd(e,i);var j=y=o.createElement("link");qt(j),In(j,"link",e),j._p=new Promise(function(U,re){j.onload=U,j.onerror=re}),j.addEventListener("load",function(){S.loading|=1}),j.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zl(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(f,y)}}}function Yx(e,n){vr.X(e,n);var i=ls;if(i&&e){var o=Wt(i).hoistableScripts,u=us(e),f=o.get(u);f||(f=i.querySelector(wo(u)),f||(e=b({src:e,async:!0},n),(n=ba.get(u))&&Jd(e,n),f=i.createElement("script"),qt(f),In(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Px(e,n){vr.M(e,n);var i=ls;if(i&&e){var o=Wt(i).hoistableScripts,u=us(e),f=o.get(u);f||(f=i.querySelector(wo(u)),f||(e=b({src:e,async:!0,type:"module"},n),(n=ba.get(u))&&Jd(e,n),f=i.createElement("script"),qt(f),In(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Ty(e,n,i,o){var u=(u=de.current)?Fl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=cs(i.href),i=Wt(u).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=cs(i.href);var f=Wt(u).hoistableStyles,y=f.get(e);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=u.querySelector(bo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),ba.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ba.set(e,i),f||Fx(u,e,i,y.state))),n&&o===null)throw Error(s(528,""));return y}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=us(i),i=Wt(u).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function cs(e){return'href="'+mn(e)+'"'}function bo(e){return'link[rel="stylesheet"]['+e+"]"}function Ny(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Fx(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),In(n,"link",i),qt(n),e.head.appendChild(n))}function us(e){return'[src="'+mn(e)+'"]'}function wo(e){return"script[async]"+e}function Oy(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+mn(i.href)+'"]');if(o)return n.instance=o,qt(o),o;var u=b({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),qt(o),In(o,"style",u),Zl(o,i.precedence,e),n.instance=o;case"stylesheet":u=cs(i.href);var f=e.querySelector(bo(u));if(f)return n.state.loading|=4,n.instance=f,qt(f),f;o=Ny(i),(u=ba.get(u))&&Wd(o,u),f=(e.ownerDocument||e).createElement("link"),qt(f);var y=f;return y._p=new Promise(function(S,j){y.onload=S,y.onerror=j}),In(f,"link",o),n.state.loading|=4,Zl(f,i.precedence,e),n.instance=f;case"script":return f=us(i.src),(u=e.querySelector(wo(f)))?(n.instance=u,qt(u),u):(o=i,(u=ba.get(f))&&(o=b({},i),Jd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),qt(u),In(u,"link",o),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Zl(o,i.precedence,e));return n.instance}function Zl(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===n)f=S;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Wd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Jd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xl=null;function jy(e,n,i){if(Xl===null){var o=new Map,u=Xl=new Map;u.set(i,o)}else u=Xl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[qe]||f[N]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var S=o.get(y);S?S.push(f):o.set(y,[f])}}return o}function Ay(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Zx(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function _y(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Xx(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=cs(o.href),f=n.querySelector(bo(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Kl.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,qt(f);return}f=n.ownerDocument||n,o=Ny(o),(u=ba.get(u))&&Wd(o,u),f=f.createElement("link"),qt(f);var y=f;y._p=new Promise(function(S,j){y.onload=S,y.onerror=j}),In(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Kl.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var ef=0;function Kx(e,n){return e.stylesheets&&e.count===0&&Wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&ef===0&&(ef=62500*Ax());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>ef?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ql=null;function Wl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ql=new Map,n.forEach(Qx,e),Ql=null,Kl.call(e))}function Qx(e,n){if(!(n.state.loading&4)){var i=Ql.get(e);if(i)var o=i.get(null);else{i=new Map,Ql.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var y=u[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),o=y)}o&&i.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),f=i.get(y)||o,f===o&&i.set(null,u),i.set(y,u),this.count++,o=Kl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var So={$$typeof:B,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function Wx(e,n,i,o,u,f,y,S,j){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.hiddenUpdates=hn(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Dy(e,n,i,o,u,f,y,S,j,U,re,ce){return e=new Wx(e,n,i,y,j,U,re,ce,S),n=1,f===!0&&(n|=24),f=ra(3,null,null,n),e.current=f,f.stateNode=e,n=Mu(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:n},Bu(f),e}function My(e){return e?(e=Hi,e):Hi}function Ry(e,n,i,o,u,f){u=My(u),o.context===null?o.context=u:o.pendingContext=u,o=_r(n),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Dr(e,o,n),i!==null&&(ea(i,e,n),Ws(i,e,n))}function zy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function tf(e,n){zy(e,n),(e=e.alternate)&&zy(e,n)}function Ly(e){if(e.tag===13||e.tag===31){var n=di(e,67108864);n!==null&&ea(n,e,67108864),tf(e,67108864)}}function By(e){if(e.tag===13||e.tag===31){var n=ca();n=On(n);var i=di(e,n);i!==null&&ea(i,e,n),tf(e,n)}}var Jl=!0;function Jx(e,n,i,o){var u=Y.T;Y.T=null;var f=he.p;try{he.p=2,nf(e,n,i,o)}finally{he.p=f,Y.T=u}}function ek(e,n,i,o){var u=Y.T;Y.T=null;var f=he.p;try{he.p=8,nf(e,n,i,o)}finally{he.p=f,Y.T=u}}function nf(e,n,i,o){if(Jl){var u=af(o);if(u===null)Vd(e,n,o,ec,i),$y(e,o);else if(nk(u,e,n,i,o))o.stopPropagation();else if($y(e,o),n&4&&-1<tk.indexOf(e)){for(;u!==null;){var f=pt(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=Ve(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var j=1<<31-Oe(y);S.entanglements[1]|=j,y&=~j}Pa(f),(Tt&6)===0&&(Ll=L()+500,mo(0))}}break;case 31:case 13:S=di(f,2),S!==null&&ea(S,f,2),Il(),tf(f,2)}if(f=af(o),f===null&&Vd(e,n,o,ec,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Vd(e,n,o,null,i)}}function af(e){return e=iu(e),rf(e)}var ec=null;function rf(e){if(ec=null,e=_t(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ec=e,null}function Iy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case _:return 2;case P:return 8;case Q:case K:return 32;case C:return 268435456;default:return 32}default:return 32}}var sf=!1,Gr=null,qr=null,Yr=null,xo=new Map,ko=new Map,Pr=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $y(e,n){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":xo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(n.pointerId)}}function Eo(e,n,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},n!==null&&(n=pt(n),n!==null&&Ly(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function nk(e,n,i,o,u){switch(n){case"focusin":return Gr=Eo(Gr,e,n,i,o,u),!0;case"dragenter":return qr=Eo(qr,e,n,i,o,u),!0;case"mouseover":return Yr=Eo(Yr,e,n,i,o,u),!0;case"pointerover":var f=u.pointerId;return xo.set(f,Eo(xo.get(f)||null,e,n,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,ko.set(f,Eo(ko.get(f)||null,e,n,i,o,u)),!0}return!1}function Uy(e){var n=_t(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,si(e.priority,function(){By(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,si(e.priority,function(){By(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=af(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);ru=o,i.target.dispatchEvent(o),ru=null}else return n=pt(i),n!==null&&Ly(n),e.blockedOn=i,!1;n.shift()}return!0}function Hy(e,n,i){tc(e)&&i.delete(n)}function ak(){sf=!1,Gr!==null&&tc(Gr)&&(Gr=null),qr!==null&&tc(qr)&&(qr=null),Yr!==null&&tc(Yr)&&(Yr=null),xo.forEach(Hy),ko.forEach(Hy)}function nc(e,n){e.blockedOn===n&&(e.blockedOn=null,sf||(sf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,ak)))}var ac=null;function Vy(e){ac!==e&&(ac=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ac===e&&(ac=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],u=e[n+2];if(typeof o!="function"){if(rf(o||i)===null)continue;break}var f=pt(i);f!==null&&(e.splice(n,3),n-=3,ad(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function ds(e){function n(j){return nc(j,e)}Gr!==null&&nc(Gr,e),qr!==null&&nc(qr,e),Yr!==null&&nc(Yr,e),xo.forEach(n),ko.forEach(n);for(var i=0;i<Pr.length;i++){var o=Pr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Pr.length&&(i=Pr[0],i.blockedOn===null);)Uy(i),i.blockedOn===null&&Pr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],y=u[O]||null;if(typeof f=="function")y||Vy(i);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(u=f,y=f[O]||null)S=y.formAction;else if(rf(u)!==null)continue}else S=y.action;typeof S=="function"?i[o+1]=S:(i.splice(o,3),o-=3),Vy(i)}}}function Gy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function of(e){this._internalRoot=e}rc.prototype.render=of.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=ca();Ry(i,o,e,n,null,null)},rc.prototype.unmount=of.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Ry(e.current,2,null,e,null,null),Il(),n[F]=null}};function rc(e){this._internalRoot=e}rc.prototype.unstable_scheduleHydration=function(e){if(e){var n=ii();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Pr.length&&n!==0&&n<Pr[i].priority;i++);Pr.splice(i,0,e),i===0&&Uy(e)}};var qy=t.version;if(qy!=="19.2.0")throw Error(s(527,qy,"19.2.0"));he.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?w(e):null,e=e===null?null:e.stateNode,e};var rk={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{se=ic.inject(rk),xe=ic}catch{}}return To.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",u=Qm,f=Wm,y=Jm;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=Dy(e,1,!1,null,null,i,o,null,u,f,y,Gy),e[F]=n.current,Hd(e),new of(n)},To.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Qm,y=Wm,S=Jm,j=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(j=i.formState)),n=Dy(e,1,!0,n,i??null,o,u,j,f,y,S,Gy),n.context=My(null),i=n.current,o=ca(),o=On(o),u=_r(o),u.callback=null,Dr(i,u,o),i=o,n.current.lanes=i,kn(n,i),Pa(n),e[F]=n.current,Hd(e),new rc(n)},To.version="19.2.0",To}var ev;function pk(){if(ev)return uf.exports;ev=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),uf.exports=hk(),uf.exports}var hb=pk();const mk="modulepreload",gk=function(a,t){return new URL(a,t).href},tv={},nv=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let g=function(w){return Promise.all(w.map(b=>Promise.resolve(b).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");l=g(r.map(w=>{if(w=gk(w,s),w in tv)return;tv[w]=!0;const b=w.endsWith(".css"),k=b?'[rel="stylesheet"]':"";if(s)for(let D=d.length-1;D>=0;D--){const X=d[D];if(X.href===w&&(!b||X.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${w}"]${k}`))return;const E=document.createElement("link");if(E.rel=b?"stylesheet":mk,b||(E.as="script"),E.crossOrigin="",E.href=w,m&&E.setAttribute("nonce",m),document.head.appendChild(E),b)return new Promise((D,X)=>{E.addEventListener("load",D),E.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${w}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})};var Jr=fb();const Dh=Ah(Jr),av=db({__proto__:null,default:Dh},[Jr]);function rv(a,t,r,s,l,c,d){try{var p=a[c](d),m=p.value}catch(g){return void r(g)}p.done?t(m):Promise.resolve(m).then(s,l)}function it(a){return function(){var t=this,r=arguments;return new Promise(function(s,l){var c=a.apply(t,r);function d(m){rv(c,s,l,d,p,"next",m)}function p(m){rv(c,s,l,d,p,"throw",m)}d(void 0)})}}function ft(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(a){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(a)}function yk(a,t){if($n(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if($n(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function pb(a){var t=yk(a,"string");return $n(t)=="symbol"?t:t+""}function vk(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,pb(s.key),s)}}function ht(a,t,r){return t&&vk(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function bk(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ja(a,t){if(t&&($n(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bk(a)}function Vt(a){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(a)}function Ho(a,t){return Ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ho(a,t)}function na(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ho(a,t)}function Ie(a,t,r){return(t=pb(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var pf={exports:{}},mf={exports:{}},iv;function mb(){return iv||(iv=1,(function(a){function t(r,s){this.v=r,this.k=s}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var gf={exports:{}},yf={exports:{}},sv;function gb(){return sv||(sv=1,(function(a){function t(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=t=function(m,g,w,b){function k(E,D){t(m,E,function(X){return this._invoke(E,D,X)})}g?d?d(m,g,{value:w,enumerable:!b,configurable:!b,writable:!b}):m[g]=w:(k("next",0),k("throw",1),k("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,t(r,s,l,c)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var ov;function yb(){return ov||(ov=1,(function(a){var t=gb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",p=c.toStringTag||"@@toStringTag";function m(H,ne,J,B){var q=ne&&ne.prototype instanceof w?ne:w,ye=Object.create(q.prototype);return t(ye,"_invoke",(function(ke,I,pe){var le,me,ze,De=0,Je=pe||[],nt=!1,Qe={p:0,n:0,v:s,a:Y,f:Y.bind(s,4),d:function(ge,Le){return le=ge,me=0,ze=s,Qe.n=Le,g}};function Y(he,ge){for(me=he,ze=ge,l=0;!nt&&De&&!Le&&l<Je.length;l++){var Le,ee=Je[l],v=Qe.p,T=ee[2];he>3?(Le=T===ge)&&(ze=ee[(me=ee[4])?5:(me=3,3)],ee[4]=ee[5]=s):ee[0]<=v&&((Le=he<2&&v<ee[1])?(me=0,Qe.v=ge,Qe.n=ee[1]):v<T&&(Le=he<3||ee[0]>ge||ge>T)&&(ee[4]=he,ee[5]=ge,Qe.n=T,me=0))}if(Le||he>1)return g;throw nt=!0,ge}return function(he,ge,Le){if(De>1)throw TypeError("Generator is already running");for(nt&&ge===1&&Y(ge,Le),me=ge,ze=Le;(l=me<2?s:ze)||!nt;){le||(me?me<3?(me>1&&(Qe.n=-1),Y(me,ze)):Qe.n=ze:Qe.v=ze);try{if(De=2,le){if(me||(he="next"),l=le[he]){if(!(l=l.call(le,ze)))throw TypeError("iterator result is not an object");if(!l.done)return l;ze=l.value,me<2&&(me=0)}else me===1&&(l=le.return)&&l.call(le),me<2&&(ze=TypeError("The iterator does not provide a '"+he+"' method"),me=1);le=s}else if((l=(nt=Qe.n<0)?ze:ke.call(I,Qe))!==g)break}catch(ee){le=s,me=1,ze=ee}finally{De=1}}return{value:l,done:nt}}})(H,J,B),!0),ye}var g={};function w(){}function b(){}function k(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(t(l={},d,function(){return this}),l),D=k.prototype=w.prototype=Object.create(E);function X(H){return Object.setPrototypeOf?Object.setPrototypeOf(H,k):(H.__proto__=k,t(H,p,"GeneratorFunction")),H.prototype=Object.create(D),H}return b.prototype=k,t(D,"constructor",k),t(k,"constructor",b),b.displayName="GeneratorFunction",t(k,p,"GeneratorFunction"),t(D),t(D,p,"Generator"),t(D,d,function(){return this}),t(D,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:X}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var vf={exports:{}},bf={exports:{}},wf={exports:{}},lv;function vb(){return lv||(lv=1,(function(a){var t=mb(),r=gb();function s(l,c){function d(m,g,w,b){try{var k=l[m](g),E=k.value;return E instanceof t?c.resolve(E.v).then(function(D){d("next",D,w,b)},function(D){d("throw",D,w,b)}):c.resolve(E).then(function(D){k.value=D,w(k)},function(D){return d("throw",D,w,b)})}catch(D){b(D)}}var p;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,g,w){function b(){return new c(function(k,E){d(m,w,k,E)})}return p=p?p.then(b,b):b()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(wf)),wf.exports}var cv;function bb(){return cv||(cv=1,(function(a){var t=yb(),r=vb();function s(l,c,d,p,m){return new r(t().w(l,c,d,p),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var uv;function wk(){return uv||(uv=1,(function(a){var t=bb();function r(s,l,c,d,p){var m=t(s,l,c,d,p);return m.next().then(function(g){return g.done?g.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var Sf={exports:{}},dv;function Sk(){return dv||(dv=1,(function(a){function t(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(Sf)),Sf.exports}var xf={exports:{}},kf={exports:{}},fv;function xk(){return fv||(fv=1,(function(a){function t(r){"@babel/helpers - typeof";return a.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,t(r)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(kf)),kf.exports}var hv;function kk(){return hv||(hv=1,(function(a){var t=xk().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(t(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(xf)),xf.exports}var pv;function Ek(){return pv||(pv=1,(function(a){var t=mb(),r=yb(),s=wk(),l=bb(),c=vb(),d=Sk(),p=kk();function m(){var g=r(),w=g.m(m),b=(Object.getPrototypeOf?Object.getPrototypeOf(w):w.__proto__).constructor;function k(X){var H=typeof X=="function"&&X.constructor;return!!H&&(H===b||(H.displayName||H.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function D(X){var H,ne;return function(J){H||(H={stop:function(){return ne(J.a,2)},catch:function(){return J.v},abrupt:function(q,ye){return ne(J.a,E[q],ye)},delegateYield:function(q,ye,ke){return H.resultName=ye,ne(J.d,p(q),ke)},finish:function(q){return ne(J.f,q)}},ne=function(q,ye,ke){J.p=H.prev,J.n=H.next;try{return q(ye,ke)}finally{H.next=J.n}}),H.resultName&&(H[H.resultName]=J.v,H.resultName=void 0),H.sent=J.v,H.next=J.n;try{return X.call(this,H)}finally{J.p=H.prev,J.n=H.next}}}return(a.exports=m=function(){return{wrap:function(ne,J,B,q){return g.w(D(ne),J,B,q&&q.reverse())},isGeneratorFunction:k,mark:g.m,awrap:function(ne,J){return new t(ne,J)},AsyncIterator:c,async:function(ne,J,B,q,ye){return(k(J)?l:s)(D(ne),J,B,q,ye)},keys:d,values:p}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var Ef,mv;function Ck(){if(mv)return Ef;mv=1;var a=Ek()();Ef=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return Ef}var Tk=Ck();const Ce=Ah(Tk);function Nk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Ok(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function Ok(a,t){if(a){if(typeof a=="string")return gv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gv(a,t):void 0}}function gv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function jk(){return{debug:function(t){}}}var wb=(function(){function a(){ft(this,a),Ie(this,"pipes",[])}return ht(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var t=it(Ce.mark(function s(l){var c,d,p,m;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:c=l,d=Nk(this.pipes),w.prev=2,d.s();case 4:if((p=d.n()).done){w.next=13;break}return m=p.value,w.next=8,m(c);case 8:if(c=w.sent,!(typeof c>"u")){w.next=11;break}return w.abrupt("return");case 11:w.next=4;break;case 13:w.next=18;break;case 15:w.prev=15,w.t0=w.catch(2),d.e(w.t0);case 18:return w.prev=18,d.f(),w.finish(18);case 21:return w.abrupt("return",c);case 22:case"end":return w.stop()}},s,this,[[2,15,18,21]])}));function r(s){return t.apply(this,arguments)}return r})()}])})(),Os=(function(){function a(t){ft(this,a),Ie(this,"signal",new wb),this.name=t}return ht(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),jk()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function yv(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Ak(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function Ak(a,t){if(a){if(typeof a=="string")return vv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vv(a,t):void 0}}function vv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function _k(a,t,r){return t=Vt(t),Ja(a,Sb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Sb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sb=function(){return!!a})()}var ai=(function(a){function t(){var r;return ft(this,t),r=_k(this,t,["NodeEditor"]),Ie(r,"nodes",[]),Ie(r,"connections",[]),r}return na(t,a),ht(t,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=it(Ce.mark(function l(c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getNode(c.id)){p.next=2;break}throw new Error("node has already been added");case 2:return p.next=4,this.emit({type:"nodecreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.nodes.push(c),p.next=9,this.emit({type:"nodecreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=it(Ce.mark(function l(c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getConnection(c.id)){p.next=2;break}throw new Error("connection has already been added");case 2:return p.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.connections.push(c),p.next=9,this.emit({type:"connectioncreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=it(Ce.mark(function l(c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.nodes.find(function(w){return w.id===c}),d){g.next=3;break}throw new Error("cannot find node");case 3:return g.next=5,this.emit({type:"noderemove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.nodes.indexOf(d),this.nodes.splice(p,1),g.next=11,this.emit({type:"noderemoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=it(Ce.mark(function l(c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.connections.find(function(w){return w.id===c}),d){g.next=3;break}throw new Error("cannot find connection");case 3:return g.next=5,this.emit({type:"connectionremove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.connections.indexOf(d),this.connections.splice(p,1),g.next=11,this.emit({type:"connectionremoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=it(Ce.mark(function l(){var c,d,p,m,g,w;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.emit({type:"clear"});case 2:if(k.sent){k.next=6;break}return k.next=5,this.emit({type:"clearcancelled"});case 5:return k.abrupt("return",!1);case 6:c=yv(this.connections.slice()),k.prev=7,c.s();case 9:if((d=c.n()).done){k.next=15;break}return p=d.value,k.next=13,this.removeConnection(p.id);case 13:k.next=9;break;case 15:k.next=20;break;case 17:k.prev=17,k.t0=k.catch(7),c.e(k.t0);case 20:return k.prev=20,c.f(),k.finish(20);case 23:m=yv(this.nodes.slice()),k.prev=24,m.s();case 26:if((g=m.n()).done){k.next=32;break}return w=g.value,k.next=30,this.removeNode(w.id);case 30:k.next=26;break;case 32:k.next=37;break;case 34:k.prev=34,k.t1=k.catch(24),m.e(k.t1);case 37:return k.prev=37,m.f(),k.finish(37);case 40:return k.next=42,this.emit({type:"cleared"});case 42:return k.abrupt("return",!0);case 43:case"end":return k.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(Os),Cf=globalThis.crypto;function ri(){if("randomBytes"in Cf)return Cf.randomBytes(8).toString("hex");var a=Cf.getRandomValues(new Uint8Array(8)),t=Array.from(a),r=t.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Mh(a,t,r){return t=Vt(t),Ja(a,xb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function xb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xb=function(){return!!a})()}var Dk=ht(function a(t){ft(this,a),this.name=t}),Rh=ht(function a(t,r,s){ft(this,a),this.socket=t,this.label=r,this.multipleConnections=s,this.id=ri()}),Mk=(function(a){function t(r,s,l){var c;return ft(this,t),c=Mh(this,t,[r,s,l]),Ie(c,"control",null),Ie(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return na(t,a),ht(t,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Rh),Rk=(function(a){function t(r,s,l){return ft(this,t),Mh(this,t,[r,s,l!==!1])}return na(t,a),ht(t)})(Rh),kb=ht(function a(){ft(this,a),this.id=ri()}),zk=(function(a){function t(r,s){var l,c;return ft(this,t),c=Mh(this,t),c.type=r,c.options=s,c.id=ri(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return na(t,a),ht(t,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(kb),Lk=(function(){function a(t){ft(this,a),Ie(this,"inputs",{}),Ie(this,"outputs",{}),Ie(this,"controls",{}),this.label=t,this.id=ri()}return ht(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),Bk=ht(function a(t,r,s,l){if(ft(this,a),this.sourceOutput=r,this.targetInput=l,!t.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=ri(),this.source=t.id,this.target=s.id}),Kt=Object.freeze({__proto__:null,Socket:Dk,Port:Rh,Input:Mk,Output:Rk,Control:kb,InputControl:zk,Node:Lk,Connection:Bk});const Ik=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Kt,NodeEditor:ai,Scope:Os,Signal:wb,getUID:ri},Symbol.toStringTag,{value:"Module"}));function Xf(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function $k(a){if(Array.isArray(a))return Xf(a)}function Uk(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Eb(a,t){if(a){if(typeof a=="string")return Xf(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xf(a,t):void 0}}function Hk(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function js(a){return $k(a)||Uk(a)||Eb(a)||Hk()}var Vk=(function(){function a(t){ft(this,a),this.reordered=t,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ht(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,p=r.clientY-c;return{x:d,y:p}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var t=it(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.holder.contains(l)){p.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){p.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),p.next=7,this.reordered(l);case 7:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Cb(a,t){var r=function(d){t.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),t.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),t.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var bv=function(t){return t.length===0?0:Math.min.apply(Math,js(t))},wv=function(t){return t.length===0?0:Math.max.apply(Math,js(t))};function Tb(a){var t=bv(a.map(function(c){return c.position.x})),r=bv(a.map(function(c){return c.position.y})),s=wv(a.map(function(c){return c.position.x+c.width})),l=wv(a.map(function(c){return c.position.y+c.height}));return{left:t,right:s,top:r,bottom:l,width:Math.abs(t-s),height:Math.abs(r-l),center:{x:(t+s)/2,y:(r+l)/2}}}function Sv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Gk(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var zh=(function(){function a(t){var r=this;ft(this,a),Ie(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=Gk({},r.config.getCurrentPosition()),r.events.start(s))}),Ie(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,p=r.startPosition.y+l.y/c;r.events.translate(d,p,s)}}),Ie(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=t||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ht(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Cb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Nb=(function(){function a(t){var r=this;ft(this,a),Ie(this,"previous",null),Ie(this,"pointers",[]),Ie(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=s.deltaY<0,m=p?r.intensity:-r.intensity,g=(c-s.clientX)*m,w=(d-s.clientY)*m;r.onzoom(m,g,w,"wheel")}),Ie(this,"down",function(s){r.pointers.push(s)}),Ie(this,"move",function(s){if(r.pointers=r.pointers.map(function(D){return D.pointerId===s.pointerId?s:D}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=r.getTouches(),m=p.cx,g=p.cy,w=p.distance;if(r.previous!==null&&r.previous.distance>0){var b=w/r.previous.distance-1,k=(c-m)*b,E=(d-g)*b;r.onzoom(b,k-(r.previous.cx-m),E-(r.previous.cy-g),"touch")}r.previous={cx:m,cy:g,distance:w}}}),Ie(this,"contextmenu",function(){r.pointers=[]}),Ie(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Ie(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=4*r.intensity,m=(c-s.clientX)*p,g=(d-s.clientY)*p;r.onzoom(p,m,g,"dblclick")}),this.intensity=t}return ht(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],p=d[0],m=d[1],g=Math.sqrt(Math.pow(l-p,2)+Math.pow(c-m,2));return{cx:(l+p)/2,cy:(c+m)/2,distance:g}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Ob=(function(){function a(t,r,s){var l=this;ft(this,a),Ie(this,"transform",{k:1,x:0,y:0}),Ie(this,"pointer",{x:0,y:0}),Ie(this,"zoomHandler",null),Ie(this,"dragHandler",null),Ie(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Ie(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Ie(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Ie(this,"resize",function(c){l.events.resize(c)}),Ie(this,"onTranslate",function(c,d){var p;(p=l.zoomHandler)!==null&&p!==void 0&&p.isTranslating()||l.translate(c,d)}),Ie(this,"onZoom",function(c,d,p,m){l.zoom(l.transform.k*(1+c),d,p,m),l.update()}),this.container=t,this.events=r,this.guards=s,this.content=new Vk(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Nb(.1)),this.setDragHandler(new zh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),t.appendChild(this.content.holder),this.update()}return ht(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var t=it(Ce.mark(function s(l,c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d={x:l,y:c},g.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(p=g.sent,p){g.next=6;break}return g.abrupt("return",!1);case 6:return this.transform.x=p.data.position.x,this.transform.y=p.data.position.y,this.update(),g.next=11,this.events.translated(p.data);case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var t=it(Ce.mark(function s(l){var c,d,p,m,g,w,b=arguments;return Ce.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=b.length>1&&b[1]!==void 0?b[1]:0,d=b.length>2&&b[2]!==void 0?b[2]:0,p=b.length>3?b[3]:void 0,m=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:p});case 6:if(g=E.sent,g){E.next=9;break}return E.abrupt("return",!0);case 9:return w=(m-g.data.zoom)/(m-l||1),this.transform.k=g.data.zoom||1,this.transform.x+=c*w,this.transform.y+=d*w,this.update(),E.next=16,this.events.zoomed(g.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function qk(a,t,r){return t=Vt(t),Ja(a,jb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function jb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jb=function(){return!!a})()}var Yo=(function(a){function t(){return ft(this,t),qk(this,t,arguments)}return na(t,a),ht(t)})(Os),Yk=ht(function a(t){ft(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return t.contextmenu(r)})}),Pk=(function(){function a(){ft(this,a),Ie(this,"views",new WeakMap),Ie(this,"viewsElements",new Map)}return ht(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function xv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function kv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Ab=(function(){function a(t,r,s){var l=this;ft(this,a),Ie(this,"translate",(function(){var c=it(Ce.mark(function d(p,m){var g,w;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g=kv({},l.position),k.next=3,l.guards.translate({previous:g,position:{x:p,y:m}});case 3:if(w=k.sent,w){k.next=6;break}return k.abrupt("return",!1);case 6:return l.position=kv({},w.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),k.next=10,l.events.translated({position:l.position,previous:g});case 10:return k.abrupt("return",!0);case 11:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),Ie(this,"resize",(function(){var c=it(Ce.mark(function d(p,m){var g,w;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g={width:p,height:m},k.next=3,l.guards.resize({size:g});case 3:if(k.sent){k.next=5;break}return k.abrupt("return",!1);case 5:if(w=l.element.querySelector("*:not(span):not([fragment])"),!(!w||!(w instanceof HTMLElement))){k.next=8;break}return k.abrupt("return",!1);case 8:return w.style.width="".concat(p,"px"),w.style.height="".concat(m,"px"),k.next=12,l.events.resized({size:g});case 12:return k.abrupt("return",!0);case 13:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),this.getZoom=t,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new zh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ht(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function _b(a,t){return a.map(function(r){return{view:t.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function Fk(a,t){var r=a.parentScope(ai),s=t.map(function(c){return $n(c)==="object"?c:r.getNode(c)}),l=_b(s,a.nodeViews);return Tb(l)}function Zk(a){var t=a;t.addPipe(function(r){if(!r||$n(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=t.nodeViews.get(r.data.id),l=t.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=t.connectionViews.get(r.data.id),d=t.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function Ev(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function br(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ev(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ev(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Xk(a,t){var r=t!=null&&t.scaling?t.scaling===!0?{min:.1,max:1}:t.scaling:!1,s=t!=null&&t.translation?t.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:t.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var p=typeof r=="function"?r():r,m=p.min,g=p.max;return d<m?m:d>g?g:d}function c(d){if(!s)throw new Error("translation param isnt defined");var p=br({},d),m=typeof s=="function"?s():s,g=m.left,w=m.top,b=m.right,k=m.bottom;return p.x<g&&(p.x=g),p.x>b&&(p.x=b),p.y<w&&(p.y=w),p.y>k&&(p.y=k),p}a.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return br(br({},d),{},{data:br(br({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var p=c(a.area.transform);a.area.translate(p.x,p.y)}return s&&d.type==="translate"?br(br({},d),{},{data:br(br({},d.data),{},{position:c(d.data.position)})}):d})}function Kk(){var a=!1;function t(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",t),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)}}}var Db=(function(){function a(){ft(this,a),Ie(this,"entities",new Map),Ie(this,"pickId",null)}return ht(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var t=it(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c){p.next=3;break}return p.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var t=it(Ce.mark(function s(l){var c,d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var t=it(Ce.mark(function s(){var l=this;return Ce.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(js(Array.from(this.entities.values())).map(function(p){return l.remove(p)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var t=it(Ce.mark(function s(l,c){var d=this;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(g){return!d.isPicked(g)&&g.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function Qk(){return new Db}function Wk(a,t,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(ai))},d=0;function p(E){E.selected||(E.selected=!0,l.update("node",E.id))}function m(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function g(E,D){return w.apply(this,arguments)}function w(){return w=it(Ce.mark(function E(D,X){var H;return Ce.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(H=c().getNode(D),H){J.next=3;break}return J.abrupt("return");case 3:return J.next=5,t.add({label:"node",id:H.id,translate:function(q,ye){return it(Ce.mark(function ke(){var I,pe;return Ce.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(I=l.nodeViews.get(H.id),pe=I?.position,!pe){me.next=5;break}return me.next=5,I.translate(pe.x+q,pe.y+ye);case 5:case"end":return me.stop()}},ke)}))()},unselect:function(){m(H)}},X);case 5:p(H);case 6:case"end":return J.stop()}},E)})),w.apply(this,arguments)}function b(E){return k.apply(this,arguments)}function k(){return k=it(Ce.mark(function E(D){return Ce.wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,t.remove({id:D,label:"node"});case 2:case"end":return H.stop()}},E)})),k.apply(this,arguments)}return l.addPipe((function(){var E=it(Ce.mark(function D(X){var H,ne,J,B,q,ye,ke,I;return Ce.wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!(!X||$n(X)!=="object"||!("type"in X))){le.next=2;break}return le.abrupt("return",X);case 2:if(X.type!=="nodepicked"){le.next=11;break}return H=X.data.id,ne=r.accumulating.active(),t.pick({id:H,label:"node"}),d=null,le.next=9,g(H,ne);case 9:le.next=33;break;case 11:if(X.type!=="nodetranslated"){le.next=20;break}if(J=X.data,B=J.id,q=J.position,ye=J.previous,ke=q.x-ye.x,I=q.y-ye.y,!t.isPicked({id:B,label:"node"})){le.next=18;break}return le.next=18,t.translate(ke,I);case 18:le.next=33;break;case 20:if(X.type!=="pointerdown"){le.next=24;break}d=0,le.next=33;break;case 24:if(X.type!=="pointermove"){le.next=28;break}d!==null&&d++,le.next=33;break;case 28:if(X.type!=="pointerup"){le.next=33;break}if(!(d!==null&&d<4)){le.next=32;break}return le.next=32,t.unselectAll();case 32:d=null;case 33:return le.abrupt("return",X);case 34:case"end":return le.stop()}},D)}));return function(D){return E.apply(this,arguments)}})()),{select:g,unselect:b}}function Jk(a,t){var r=null,s=function(){return r||(r=a.parentScope(ai))};function l(c,d){var p=s().getNode(c);if(p){var m=p.inputs[d];if(!m)throw new Error("cannot find input");var g=m.showControl,w=s().getConnections(),b=!!w.find(function(k){return k.target===c&&k.targetInput===d});m.showControl=t?t({hasAnyConnection:b,input:m}):!b,m.showControl!==g&&a.update("node",p.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Cv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function e2(a,t){var r=a,s=typeof t?.size>"u"?16:t.size,l=typeof t?.dynamic>"u"?!0:t.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var p=d.data.position,m=c(p.x),g=c(p.y);return sc(sc({},d),{},{data:sc(sc({},d.data),{},{position:{x:m,y:g}})})}if(!l&&d.type==="nodedragged"){var w=r.nodeViews.get(d.data.id);if(w){var b=w.position,k=b.x,E=b.y;w.translate(c(k),c(E))}}return d})}function t2(a,t,r){return Kf.apply(this,arguments)}function Kf(){return Kf=it(Ce.mark(function a(t,r,s){var l,c,d,p,m,g,w,b,k,E,D,X,H;return Ce.wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,p=t.parentScope(ai),m=r.map(function(B){return $n(B)==="object"?B:p.getNode(B)}),g=_b(m,t.nodeViews),w=Tb(g),b=[t.container.clientWidth,t.container.clientHeight],k=b[0],E=b[1],D=k/w.width,X=E/w.height,H=Math.min(X*d,D*d,1),t.area.transform.x=k/2-w.center.x*H,t.area.transform.y=E/2-w.center.y*H,J.next=12,t.area.zoom(H,0,0);case 12:case"end":return J.stop()}},a)})),Kf.apply(this,arguments)}var Ra=Object.freeze({__proto__:null,getBoundingBox:Fk,simpleNodesOrder:Zk,restrictor:Xk,accumulateOnCtrl:Kk,selectableNodes:Wk,Selector:Db,selector:Qk,showInputControl:Jk,snapGrid:e2,zoomAt:t2});function Tv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Nv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Tv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function n2(a,t,r){return t=Vt(t),Ja(a,Mb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Mb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Mb=function(){return!!a})()}var Rb=(function(a){function t(r){var s;return ft(this,t),s=n2(this,t,["area"]),Ie(s,"nodeViews",new Map),Ie(s,"connectionViews",new Map),Ie(s,"elements",new Pk),Ie(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!($n(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Ob(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return na(t,a),ht(t,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Ab(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Nv({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var g=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:g}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Nv({id:c},m)})},resize:function(m){var g=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:g}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new Yk({contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=it(Ce.mark(function l(c,d){var p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=this.elements.get(c,d),!p){g.next=4;break}return g.next=4,this.emit({type:"render",data:p});case 4:case"end":return g.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=it(Ce.mark(function l(c,d,p){var m;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(m=this.nodeViews.get(c),!m){w.next=5;break}return w.next=4,m.resize(d,p);case 4:return w.abrupt("return",w.sent);case 5:case"end":return w.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=it(Ce.mark(function l(c,d){var p,m,g;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(p=d.x,m=d.y,g=this.nodeViews.get(c),!g){b.next=6;break}return b.next=5,g.translate(p,m);case 5:return b.abrupt("return",b.sent);case 6:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Yo);const Ov=Object.freeze(Object.defineProperty({__proto__:null,Area:Ob,AreaExtensions:Ra,AreaPlugin:Rb,BaseAreaPlugin:Yo,Drag:zh,NodeView:Ab,Zoom:Nb,usePointerListener:Cb},Symbol.toStringTag,{value:"Module"}));function a2(a,t){for(;!{}.hasOwnProperty.call(a,t)&&(a=Vt(a))!==null;);return a}function Vo(){return Vo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,t,r){var s=a2(a,t);if(s){var l=Object.getOwnPropertyDescriptor(s,t);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Vo.apply(null,arguments)}function r2(a){if(Array.isArray(a))return a}function i2(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,p=[],m=!0,g=!1;try{if(c=(r=r.call(a)).next,t!==0)for(;!(m=(s=c.call(r)).done)&&(p.push(s.value),p.length!==t);m=!0);}catch(w){g=!0,l=w}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(g)throw l}}return p}}function s2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fn(a,t){return r2(a)||i2(a,t)||Eb(a,t)||s2()}function jv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Tf(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):jv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function o2(a){var t=null,r=null;function s(c){r&&c.removeConnectionView(r),t=null,r=null}function l(c){s(c),r="pseudo_".concat(ri())}return{isMounted:function(){return!!r},mount:l,render:function(d,p,m){var g=p.x,w=p.y,b=m.side==="output",k={x:g+(b?-3:3),y:w};if(!r)throw new Error("pseudo connection id wasn't generated");var E=b?Tf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):Tf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!t){var D=d.addConnectionView(E);t=D.element}t&&d.emit({type:"render",data:Tf({element:t,type:"connection",payload:E},b?{end:k}:{start:k})})},unmount:s}}function l2(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=c2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function c2(a,t){if(a){if(typeof a=="string")return Av(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Av(a,t):void 0}}function Av(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function u2(a,t){var r=l2(t),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function zb(a,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,t),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,js(zb(a,t,c))),l}var Lh=(function(){function a(){ft(this,a)}return ht(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Lb(a,t){var r=a.side==="output"&&t.side==="input",s=a.side==="input"&&t.side==="output",l=r?[a,t]:s?[t,a]:[],c=Fn(l,2),d=c[0],p=c[1];if(d&&p)return[d,p]}function d2(a,t){return!!Lb(a,t)}function f2(a,t,r){var s=Lb(a,t)||[null,null],l=Fn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:ri(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function h2(a,t){var r=t.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function p2(a,t){var r=a.nodeId,s=a.side,l=a.key;return t.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Qf(a,t){var r=a.map(function(s){var l=h2(s,t),c=l?.multipleConnections;return c?[]:p2(s,t)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void t.removeConnection(c)})}}}function Bh(a,t,r){return t=Vt(t),Ja(a,Bb()?Reflect.construct(t,[],Vt(a).constructor):t.apply(a,r))}function Bb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bb=function(){return!!a})()}var m2=(function(a){function t(r,s){var l;return ft(this,t),l=Bh(this,t),l.initial=r,l.params=s,l}return na(t,a),ht(t,[{key:"pick",value:(function(){var r=it(Ce.mark(function l(c,d){var p,m;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:p=c.socket,this.params.canMakeConnection(this.initial,p)&&(Qf([this.initial,p],d.editor).commit(),m=this.params.makeConnection(this.initial,p,d),this.drop(d,m?p:null,m));case 2:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Ih(this.params))}}])})(Lh),g2=(function(a){function t(r,s,l){var c;ft(this,t),c=Bh(this,t),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(p){return p.nodeId===c.connection.source&&p.side==="output"&&p.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return na(t,a),ht(t,[{key:"init",value:(function(){var r=it(Ce.mark(function l(c){var d=this;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(g){g?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=it(Ce.mark(function l(c,d){var p,m,g,w,b,k;return Ce.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:p=c.socket,m=c.event,this.initial&&!(p.side==="input"&&this.connection.target===p.nodeId&&this.connection.targetInput===p.key)?this.params.canMakeConnection(this.initial,p)&&(Qf([this.initial,p],d.editor).commit(),g=this.params.makeConnection(this.initial,p,d),w=g?p:null,this.drop(d,w,g)):m==="down"&&this.initial&&(Qf([this.initial,p],d.editor).commit(),b=this.params.makeConnection(this.initial,p,d),k=b?null:p,this.drop(d,k,b));case 2:case"end":return D.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Ih(this.params))}}])})(Lh),Ih=(function(a){function t(r){var s;return ft(this,t),s=Bh(this,t),s.params=r,s}return na(t,a),ht(t,[{key:"pick",value:(function(){var r=it(Ce.mark(function l(c,d){var p,m,g,w;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=c.socket,m=c.event,m==="down"){k.next=3;break}return k.abrupt("return");case 3:if(p.side!=="input"){k.next=11;break}if(g=d.editor.getConnections().find(function(E){return E.target===p.nodeId&&E.targetInput===p.key}),!g){k.next=11;break}return w=new g2(g,this.params,d),k.next=9,w.init(d);case 9:return this.context.switchTo(w),k.abrupt("return");case 11:return k.next=13,d.scope.emit({type:"connectionpick",data:{socket:p}});case 13:if(!k.sent){k.next=17;break}this.context.switchTo(new m2(p,this.params)),k.next=18;break;case 17:this.drop(d);case 18:case"end":return k.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(Lh),y2=(function(){function a(t){ft(this,a);var r=t?.canMakeConnection||d2,s=t?.makeConnection||f2;this.switchTo(new Ih({canMakeConnection:r,makeConnection:s}))}return ht(a,[{key:"pick",value:(function(){var t=it(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.currentState.pick(l,c);case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function v2(){return function(){return new y2}}var b2=Object.freeze({__proto__:null,setup:v2}),w2=Object.freeze({__proto__:null,classic:b2});function S2(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=x2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function x2(a,t){if(a){if(typeof a=="string")return _v(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_v(a,t):void 0}}function _v(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function k2(a,t,r){return t=Vt(t),Ja(a,Ib()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Ib(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ib=function(){return!!a})()}function E2(a,t,r,s){var l=Vo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var C2=(function(a){function t(){var r;return ft(this,t),r=k2(this,t,["connection"]),Ie(r,"presets",[]),Ie(r,"currentFlow",null),Ie(r,"preudoconnection",o2({isPseudo:!0})),Ie(r,"socketsCache",new Map),r}return na(t,a),ht(t,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=S2(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=d(s);if(p)return p}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=it(Ce.mark(function l(c,d){var p,m,g;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(p={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=zb(c.clientX,c.clientY),g=u2(this.socketsCache,m),!g){b.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(g),!this.currentFlow){b.next=11;break}return b.next=10,this.currentFlow.pick({socket:g,event:d},p);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:b.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(p);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;E2(t,"setParent",this)([s]),this.areaPlugin=this.parentScope(Yo),this.editor=this.areaPlugin.parentScope(ai);var c=function(p){l.pick(p,"down")};this.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var p=d.data.element;p.addEventListener("pointerdown",c),l.socketsCache.set(p,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(Os);function T2(a,t){var r=Fn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],p=d.x,m=d.y,g=Math.abs(c-m),w=l+Math.max(g/2,Math.abs(p-l))*t,b=p-Math.max(g/2,Math.abs(p-l))*t;return"M ".concat(l," ").concat(c," C ").concat(w," ").concat(c," ").concat(b," ").concat(m," ").concat(p," ").concat(m)}function N2(a,t,r){var s=Fn(a,2),l=s[0],c=l.x,d=l.y,p=s[1],m=p.x,g=p.y,w=g>d?1:-1,b=r+Math.abs(c-m)/(r/2),k=(c+m)/2,E=d-w*b,D=(g-d)*t;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+b," ").concat(d,`
        `).concat(c+b," ").concat(E-D,`
        `).concat(k," ").concat(E,`
        C `).concat(m-b," ").concat(E+D,`
        `).concat(m-b," ").concat(g,`
        `).concat(m," ").concat(g,`
    `)}function O2(a,t){return Wf.apply(this,arguments)}function Wf(){return Wf=it(Ce.mark(function a(t,r){var s,l,c,d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.offsetParent){g.next=5;break}return g.next=3,new Promise(function(w){return setTimeout(w,0)});case 3:g.next=0;break;case 5:if(s=t.offsetLeft,l=t.offsetTop,c=t.offsetParent,c){g.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=t.offsetWidth,p=t.offsetHeight,g.abrupt("return",{x:s+d/2,y:l+p/2});case 14:case"end":return g.stop()}},a)})),Wf.apply(this,arguments)}var j2=(function(){function a(){ft(this,a),Ie(this,"listeners",new Set)}return ht(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),A2=(function(){function a(){ft(this,a),Ie(this,"elements",new Map)}return ht(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(p){return p.side===r.side&&p.nodeId===r.nodeId&&p.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(js(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),_2=(function(){function a(){ft(this,a),Ie(this,"sockets",new A2),Ie(this,"emitter",new j2),Ie(this,"area",null)}return ht(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Yo),this.area.addPipe((function(){var l=it(Ce.mark(function c(d){var p,m,g,w,b,k,E,D,X,H,ne;return Ce.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){B.next=8;break}return p=d.data,m=p.nodeId,g=p.key,w=p.side,b=p.element,B.next=4,s.calculatePosition(m,w,g,b);case 4:k=B.sent,k&&(s.sockets.add({nodeId:m,key:g,side:w,element:b,position:k}),s.emitter.emit({nodeId:m,key:g,side:w})),B.next=24;break;case 8:if(d.type!=="unmount"){B.next=12;break}s.sockets.remove(d.data.element),B.next=24;break;case 12:if(d.type!=="nodetranslated"){B.next=16;break}s.emitter.emit({nodeId:d.data.id}),B.next=24;break;case 16:if(d.type!=="noderesized"){B.next=23;break}return E=d.data.id,B.next=20,Promise.all(s.sockets.snapshot().filter(function(q){return q.nodeId===d.data.id&&q.side==="output"}).map((function(){var q=it(Ce.mark(function ye(ke){var I,pe,le,me;return Ce.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return I=ke.side,pe=ke.key,le=ke.element,De.next=3,s.calculatePosition(E,I,pe,le);case 3:me=De.sent,me&&(ke.position=me);case 5:case"end":return De.stop()}},ye)}));return function(ye){return q.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),B.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(D=d.data.payload,X=D.source,H=D.target,ne=X||H,s.emitter.emit({nodeId:ne}));case 24:return B.abrupt("return",d);case 25:case"end":return B.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,p=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var g,w=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!w)return;var b=w.x,k=w.y,E=(g=d.area)===null||g===void 0?void 0:g.nodeViews.get(r);E&&c({x:b+E.position.x,y:k+E.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),p}}])})();function D2(a,t,r){return t=Vt(t),Ja(a,$b()?Reflect.construct(t,[],Vt(a).constructor):t.apply(a,r))}function $b(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($b=function(){return!!a})()}var M2=(function(a){function t(r){var s;return ft(this,t),s=D2(this,t),s.props=r,s}return na(t,a),ht(t,[{key:"calculatePosition",value:(function(){var r=it(Ce.mark(function l(c,d,p,m){var g,w,b,k;return Ce.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(b=(g=this.area)===null||g===void 0?void 0:g.nodeViews.get(c),b!=null&&b.element){D.next=3;break}return D.abrupt("return",null);case 3:return D.next=5,O2(m,b.element);case 5:if(k=D.sent,!((w=this.props)!==null&&w!==void 0&&w.offset)){D.next=8;break}return D.abrupt("return",this.props.offset(k,c,d,p));case 8:return D.abrupt("return",{x:k.x+12*(d==="input"?-1:1),y:k.y});case 9:case"end":return D.stop()}},l,this)}));function s(l,c,d,p){return r.apply(this,arguments)}return s})()}])})(_2);function R2(a){return new M2(a)}function Un(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}var ta=function(){return ta=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},ta.apply(this,arguments)};function _c(a,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,c;s<l;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return a.concat(c||Array.prototype.slice.call(t))}var Xt="-ms-",Bo="-moz-",Ot="-webkit-",Ub="comm",Hc="rule",$h="decl",z2="@import",Hb="@keyframes",L2="@layer",Vb=Math.abs,Uh=String.fromCharCode,Jf=Object.assign;function B2(a,t){return Dn(a,0)^45?(((t<<2^Dn(a,0))<<2^Dn(a,1))<<2^Dn(a,2))<<2^Dn(a,3):0}function Gb(a){return a.trim()}function Sr(a,t){return(a=t.exec(a))?a[0]:a}function rt(a,t,r){return a.replace(t,r)}function bc(a,t,r){return a.indexOf(t,r)}function Dn(a,t){return a.charCodeAt(t)|0}function xs(a,t,r){return a.slice(t,r)}function Fa(a){return a.length}function qb(a){return a.length}function _o(a,t){return t.push(a),a}function I2(a,t){return a.map(t).join("")}function Dv(a,t){return a.filter(function(r){return!Sr(r,t)})}var Vc=1,ks=1,Yb=0,Ca=0,Sn=0,As="";function Gc(a,t,r,s,l,c,d,p){return{value:a,root:t,parent:r,type:s,props:l,children:c,line:Vc,column:ks,length:d,return:"",siblings:p}}function Kr(a,t){return Jf(Gc("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},t)}function fs(a){for(;a.root;)a=Kr(a.root,{children:[a]});_o(a,a.siblings)}function $2(){return Sn}function U2(){return Sn=Ca>0?Dn(As,--Ca):0,ks--,Sn===10&&(ks=1,Vc--),Sn}function Ba(){return Sn=Ca<Yb?Dn(As,Ca++):0,ks++,Sn===10&&(ks=1,Vc++),Sn}function ji(){return Dn(As,Ca)}function wc(){return Ca}function qc(a,t){return xs(As,a,t)}function eh(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H2(a){return Vc=ks=1,Yb=Fa(As=a),Ca=0,[]}function V2(a){return As="",a}function Nf(a){return Gb(qc(Ca-1,th(a===91?a+2:a===40?a+1:a)))}function G2(a){for(;(Sn=ji())&&Sn<33;)Ba();return eh(a)>2||eh(Sn)>3?"":" "}function q2(a,t){for(;--t&&Ba()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return qc(a,wc()+(t<6&&ji()==32&&Ba()==32))}function th(a){for(;Ba();)switch(Sn){case a:return Ca;case 34:case 39:a!==34&&a!==39&&th(Sn);break;case 40:a===41&&th(a);break;case 92:Ba();break}return Ca}function Y2(a,t){for(;Ba()&&a+Sn!==57;)if(a+Sn===84&&ji()===47)break;return"/*"+qc(t,Ca-1)+"*"+Uh(a===47?a:Ba())}function P2(a){for(;!eh(ji());)Ba();return qc(a,Ca)}function F2(a){return V2(Sc("",null,null,null,[""],a=H2(a),0,[0],a))}function Sc(a,t,r,s,l,c,d,p,m){for(var g=0,w=0,b=d,k=0,E=0,D=0,X=1,H=1,ne=1,J=0,B="",q=l,ye=c,ke=s,I=B;H;)switch(D=J,J=Ba()){case 40:if(D!=108&&Dn(I,b-1)==58){bc(I+=rt(Nf(J),"&","&\f"),"&\f",Vb(g?p[g-1]:0))!=-1&&(ne=-1);break}case 34:case 39:case 91:I+=Nf(J);break;case 9:case 10:case 13:case 32:I+=G2(D);break;case 92:I+=q2(wc()-1,7);continue;case 47:switch(ji()){case 42:case 47:_o(Z2(Y2(Ba(),wc()),t,r,m),m);break;default:I+="/"}break;case 123*X:p[g++]=Fa(I)*ne;case 125*X:case 59:case 0:switch(J){case 0:case 125:H=0;case 59+w:ne==-1&&(I=rt(I,/\f/g,"")),E>0&&Fa(I)-b&&_o(E>32?Rv(I+";",s,r,b-1,m):Rv(rt(I," ","")+";",s,r,b-2,m),m);break;case 59:I+=";";default:if(_o(ke=Mv(I,t,r,g,w,l,p,B,q=[],ye=[],b,c),c),J===123)if(w===0)Sc(I,t,ke,ke,q,c,b,p,ye);else switch(k===99&&Dn(I,3)===110?100:k){case 100:case 108:case 109:case 115:Sc(a,ke,ke,s&&_o(Mv(a,ke,ke,0,0,l,p,B,l,q=[],b,ye),ye),l,ye,b,p,s?q:ye);break;default:Sc(I,ke,ke,ke,[""],ye,0,p,ye)}}g=w=E=0,X=ne=1,B=I="",b=d;break;case 58:b=1+Fa(I),E=D;default:if(X<1){if(J==123)--X;else if(J==125&&X++==0&&U2()==125)continue}switch(I+=Uh(J),J*X){case 38:ne=w>0?1:(I+="\f",-1);break;case 44:p[g++]=(Fa(I)-1)*ne,ne=1;break;case 64:ji()===45&&(I+=Nf(Ba())),k=ji(),w=b=Fa(B=I+=P2(wc())),J++;break;case 45:D===45&&Fa(I)==2&&(X=0)}}return c}function Mv(a,t,r,s,l,c,d,p,m,g,w,b){for(var k=l-1,E=l===0?c:[""],D=qb(E),X=0,H=0,ne=0;X<s;++X)for(var J=0,B=xs(a,k+1,k=Vb(H=d[X])),q=a;J<D;++J)(q=Gb(H>0?E[J]+" "+B:rt(B,/&\f/g,E[J])))&&(m[ne++]=q);return Gc(a,t,r,l===0?Hc:p,m,g,w,b)}function Z2(a,t,r,s){return Gc(a,t,r,Ub,Uh($2()),xs(a,2,-2),0,s)}function Rv(a,t,r,s,l){return Gc(a,t,r,$h,xs(a,0,s),xs(a,s+1,-1),s,l)}function Pb(a,t,r){switch(B2(a,t)){case 5103:return Ot+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ot+a+a;case 4789:return Bo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ot+a+Bo+a+Xt+a+a;case 5936:switch(Dn(a,t+11)){case 114:return Ot+a+Xt+rt(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ot+a+Xt+rt(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ot+a+Xt+rt(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ot+a+Xt+a+a;case 6165:return Ot+a+Xt+"flex-"+a+a;case 5187:return Ot+a+rt(a,/(\w+).+(:[^]+)/,Ot+"box-$1$2"+Xt+"flex-$1$2")+a;case 5443:return Ot+a+Xt+"flex-item-"+rt(a,/flex-|-self/g,"")+(Sr(a,/flex-|baseline/)?"":Xt+"grid-row-"+rt(a,/flex-|-self/g,""))+a;case 4675:return Ot+a+Xt+"flex-line-pack"+rt(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ot+a+Xt+rt(a,"shrink","negative")+a;case 5292:return Ot+a+Xt+rt(a,"basis","preferred-size")+a;case 6060:return Ot+"box-"+rt(a,"-grow","")+Ot+a+Xt+rt(a,"grow","positive")+a;case 4554:return Ot+rt(a,/([^-])(transform)/g,"$1"+Ot+"$2")+a;case 6187:return rt(rt(rt(a,/(zoom-|grab)/,Ot+"$1"),/(image-set)/,Ot+"$1"),a,"")+a;case 5495:case 3959:return rt(a,/(image-set\([^]*)/,Ot+"$1$`$1");case 4968:return rt(rt(a,/(.+:)(flex-)?(.*)/,Ot+"box-pack:$3"+Xt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ot+a+a;case 4200:if(!Sr(a,/flex-|baseline/))return Xt+"grid-column-align"+xs(a,t)+a;break;case 2592:case 3360:return Xt+rt(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return t=l,Sr(s.props,/grid-\w+-end/)})?~bc(a+(r=r[t].value),"span",0)?a:Xt+rt(a,"-start","")+a+Xt+"grid-row-span:"+(~bc(r,"span",0)?Sr(r,/\d+/):+Sr(r,/\d+/)-+Sr(a,/\d+/))+";":Xt+rt(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return Sr(s.props,/grid-\w+-start/)})?a:Xt+rt(rt(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return rt(a,/(.+)-inline(.+)/,Ot+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fa(a)-1-t>6)switch(Dn(a,t+1)){case 109:if(Dn(a,t+4)!==45)break;case 102:return rt(a,/(.+:)(.+)-([^]+)/,"$1"+Ot+"$2-$3$1"+Bo+(Dn(a,t+3)==108?"$3":"$2-$3"))+a;case 115:return~bc(a,"stretch",0)?Pb(rt(a,"stretch","fill-available"),t,r)+a:a}break;case 5152:case 5920:return rt(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,p,m,g){return Xt+l+":"+c+g+(d?Xt+l+"-span:"+(p?m:+m-+c)+g:"")+a});case 4949:if(Dn(a,t+6)===121)return rt(a,":",":"+Ot)+a;break;case 6444:switch(Dn(a,Dn(a,14)===45?18:11)){case 120:return rt(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ot+(Dn(a,14)===45?"inline-":"")+"box$3$1"+Ot+"$2$3$1"+Xt+"$2box$3")+a;case 100:return rt(a,":",":"+Xt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return rt(a,"scroll-","scroll-snap-")+a}return a}function Dc(a,t){for(var r="",s=0;s<a.length;s++)r+=t(a[s],s,a,t)||"";return r}function X2(a,t,r,s){switch(a.type){case L2:if(a.children.length)break;case z2:case $h:return a.return=a.return||a.value;case Ub:return"";case Hb:return a.return=a.value+"{"+Dc(a.children,s)+"}";case Hc:if(!Fa(a.value=a.props.join(",")))return""}return Fa(r=Dc(a.children,s))?a.return=a.value+"{"+r+"}":""}function K2(a){var t=qb(a);return function(r,s,l,c){for(var d="",p=0;p<t;p++)d+=a[p](r,s,l,c)||"";return d}}function Q2(a){return function(t){t.root||(t=t.return)&&a(t)}}function W2(a,t,r,s){if(a.length>-1&&!a.return)switch(a.type){case $h:a.return=Pb(a.value,a.length,r);return;case Hb:return Dc([Kr(a,{value:rt(a.value,"@","@"+Ot)})],s);case Hc:if(a.length)return I2(r=a.props,function(l){switch(Sr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":fs(Kr(a,{props:[rt(l,/:(read-\w+)/,":"+Bo+"$1")]})),fs(Kr(a,{props:[l]})),Jf(a,{props:Dv(r,s)});break;case"::placeholder":fs(Kr(a,{props:[rt(l,/:(plac\w+)/,":"+Ot+"input-$1")]})),fs(Kr(a,{props:[rt(l,/:(plac\w+)/,":"+Bo+"$1")]})),fs(Kr(a,{props:[rt(l,/:(plac\w+)/,Xt+"input-$1")]})),fs(Kr(a,{props:[l]})),Jf(a,{props:Dv(r,s)});break}return""})}}var J2={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ua={},Es=typeof process<"u"&&ua!==void 0&&(ua.REACT_APP_SC_ATTR||ua.SC_ATTR)||"data-styled",Fb="active",Zb="data-styled-version",Yc="6.1.19",Hh=`/*!sc*/
`,Mc=typeof window<"u"&&typeof document<"u",eE=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ua!==void 0&&ua.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ua.REACT_APP_SC_DISABLE_SPEEDY!==""?ua.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ua.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ua!==void 0&&ua.SC_DISABLE_SPEEDY!==void 0&&ua.SC_DISABLE_SPEEDY!==""&&ua.SC_DISABLE_SPEEDY!=="false"&&ua.SC_DISABLE_SPEEDY),Pc=Object.freeze([]),Cs=Object.freeze({});function tE(a,t,r){return r===void 0&&(r=Cs),a.theme!==r.theme&&a.theme||t||r.theme}var Xb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),nE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,aE=/(^-|-$)/g;function zv(a){return a.replace(nE,"-").replace(aE,"")}var rE=/(a)(d)/gi,oc=52,Lv=function(a){return String.fromCharCode(a+(a>25?39:97))};function nh(a){var t,r="";for(t=Math.abs(a);t>oc;t=t/oc|0)r=Lv(t%oc)+r;return(Lv(t%oc)+r).replace(rE,"$1-$2")}var Of,Kb=5381,ys=function(a,t){for(var r=t.length;r;)a=33*a^t.charCodeAt(--r);return a},Qb=function(a){return ys(Kb,a)};function iE(a){return nh(Qb(a)>>>0)}function sE(a){return a.displayName||a.name||"Component"}function jf(a){return typeof a=="string"&&!0}var Wb=typeof Symbol=="function"&&Symbol.for,Jb=Wb?Symbol.for("react.memo"):60115,oE=Wb?Symbol.for("react.forward_ref"):60112,lE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ew={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uE=((Of={})[oE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Of[Jb]=ew,Of);function Bv(a){return("type"in(t=a)&&t.type.$$typeof)===Jb?ew:"$$typeof"in a?uE[a.$$typeof]:lE;var t}var dE=Object.defineProperty,fE=Object.getOwnPropertyNames,Iv=Object.getOwnPropertySymbols,hE=Object.getOwnPropertyDescriptor,pE=Object.getPrototypeOf,$v=Object.prototype;function tw(a,t,r){if(typeof t!="string"){if($v){var s=pE(t);s&&s!==$v&&tw(a,s,r)}var l=fE(t);Iv&&(l=l.concat(Iv(t)));for(var c=Bv(a),d=Bv(t),p=0;p<l.length;++p){var m=l[p];if(!(m in cE||r&&r[m]||d&&m in d||c&&m in c)){var g=hE(t,m);try{dE(a,m,g)}catch{}}}}return a}function Ts(a){return typeof a=="function"}function Vh(a){return typeof a=="object"&&"styledComponentId"in a}function Ti(a,t){return a&&t?"".concat(a," ").concat(t):a||t||""}function Uv(a,t){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Go(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function ah(a,t,r){if(r===void 0&&(r=!1),!r&&!Go(a)&&!Array.isArray(a))return t;if(Array.isArray(t))for(var s=0;s<t.length;s++)a[s]=ah(a[s],t[s]);else if(Go(t))for(var s in t)a[s]=ah(a[s],t[s]);return a}function Gh(a,t){Object.defineProperty(a,"toString",{value:t})}function Po(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var mE=(function(){function a(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return a.prototype.indexOfGroup=function(t){for(var r=0,s=0;s<t;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;t>=c;)if((c<<=1)<0)throw Po(16,"".concat(t));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var p=this.indexOfGroup(t+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(p,r[d])&&(this.groupSizes[t]++,p++)},a.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],s=this.indexOfGroup(t),l=s+r;this.groupSizes[t]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var s=this.groupSizes[t],l=this.indexOfGroup(t),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Hh);return r},a})(),xc=new Map,Rc=new Map,kc=1,lc=function(a){if(xc.has(a))return xc.get(a);for(;Rc.has(kc);)kc++;var t=kc++;return xc.set(a,t),Rc.set(t,a),t},gE=function(a,t){kc=t+1,xc.set(a,t),Rc.set(t,a)},yE="style[".concat(Es,"][").concat(Zb,'="').concat(Yc,'"]'),vE=new RegExp("^".concat(Es,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),bE=function(a,t,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(t,s)},wE=function(a,t){for(var r,s=((r=t.textContent)!==null&&r!==void 0?r:"").split(Hh),l=[],c=0,d=s.length;c<d;c++){var p=s[c].trim();if(p){var m=p.match(vE);if(m){var g=0|parseInt(m[1],10),w=m[2];g!==0&&(gE(w,g),bE(a,w,m[3]),a.getTag().insertRules(g,l)),l.length=0}else l.push(p)}}},Hv=function(a){for(var t=document.querySelectorAll(yE),r=0,s=t.length;r<s;r++){var l=t[r];l&&l.getAttribute(Es)!==Fb&&(wE(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function SE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var nw=function(a){var t=document.head,r=a||t,s=document.createElement("style"),l=(function(p){var m=Array.from(p.querySelectorAll("style[".concat(Es,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(Es,Fb),s.setAttribute(Zb,Yc);var d=SE();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},xE=(function(){function a(t){this.element=nw(t),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Po(17)})(this.element),this.length=0}return a.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},a.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},a})(),kE=(function(){function a(t){this.element=nw(t),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[t]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},a.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},a})(),EE=(function(){function a(t){this.rules=[],this.length=0}return a.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},a.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},a.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},a})(),Vv=Mc,CE={isServer:!Mc,useCSSOMInjection:!eE},aw=(function(){function a(t,r,s){t===void 0&&(t=Cs),r===void 0&&(r={});var l=this;this.options=ta(ta({},CE),t),this.gs=r,this.names=new Map(s),this.server=!!t.isServer,!this.server&&Mc&&Vv&&(Vv=!1,Hv(this)),Gh(this,function(){return(function(c){for(var d=c.getTag(),p=d.length,m="",g=function(b){var k=(function(ne){return Rc.get(ne)})(b);if(k===void 0)return"continue";var E=c.names.get(k),D=d.getGroup(b);if(E===void 0||!E.size||D.length===0)return"continue";var X="".concat(Es,".g").concat(b,'[id="').concat(k,'"]'),H="";E!==void 0&&E.forEach(function(ne){ne.length>0&&(H+="".concat(ne,","))}),m+="".concat(D).concat(X,'{content:"').concat(H,'"}').concat(Hh)},w=0;w<p;w++)g(w);return m})(l)})}return a.registerId=function(t){return lc(t)},a.prototype.rehydrate=function(){!this.server&&Mc&&Hv(this)},a.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new a(ta(ta({},this.options),t),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(t=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new EE(l):s?new xE(l):new kE(l)})(this.options),new mE(t)));var t},a.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},a.prototype.registerName=function(t,r){if(lc(t),this.names.has(t))this.names.get(t).add(r);else{var s=new Set;s.add(r),this.names.set(t,s)}},a.prototype.insertRules=function(t,r,s){this.registerName(t,r),this.getTag().insertRules(lc(t),s)},a.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},a.prototype.clearRules=function(t){this.getTag().clearGroup(lc(t)),this.clearNames(t)},a.prototype.clearTag=function(){this.tag=void 0},a})(),TE=/&/g,NE=/^\s*\/\/.*$/gm;function rw(a,t){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(s){return"".concat(t," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=rw(r.children,t)),r})}function OE(a){var t,r,s,l=Cs,c=l.options,d=c===void 0?Cs:c,p=l.plugins,m=p===void 0?Pc:p,g=function(k,E,D){return D.startsWith(r)&&D.endsWith(r)&&D.replaceAll(r,"").length>0?".".concat(t):k},w=m.slice();w.push(function(k){k.type===Hc&&k.value.includes("&")&&(k.props[0]=k.props[0].replace(TE,r).replace(s,g))}),d.prefix&&w.push(W2),w.push(X2);var b=function(k,E,D,X){E===void 0&&(E=""),D===void 0&&(D=""),X===void 0&&(X="&"),t=X,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var H=k.replace(NE,""),ne=F2(D||E?"".concat(D," ").concat(E," { ").concat(H," }"):H);d.namespace&&(ne=rw(ne,d.namespace));var J=[];return Dc(ne,K2(w.concat(Q2(function(B){return J.push(B)})))),J};return b.hash=m.length?m.reduce(function(k,E){return E.name||Po(15),ys(k,E.name)},Kb).toString():"",b}var jE=new aw,rh=OE(),iw=Ea.createContext({shouldForwardProp:void 0,styleSheet:jE,stylis:rh});iw.Consumer;Ea.createContext(void 0);function Gv(){return x.useContext(iw)}var AE=(function(){function a(t,r){var s=this;this.inject=function(l,c){c===void 0&&(c=rh);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,Gh(this,function(){throw Po(12,String(s.name))})}return a.prototype.getName=function(t){return t===void 0&&(t=rh),this.name+t.hash},a})(),_E=function(a){return a>="A"&&a<="Z"};function qv(a){for(var t="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;_E(s)?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var sw=function(a){return a==null||a===!1||a===""},ow=function(a){var t,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!sw(c)&&(Array.isArray(c)&&c.isCss||Ts(c)?s.push("".concat(qv(l),":"),c,";"):Go(c)?s.push.apply(s,_c(_c(["".concat(l," {")],ow(c),!1),["}"],!1)):s.push("".concat(qv(l),": ").concat((t=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in J2||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function Ai(a,t,r,s){if(sw(a))return[];if(Vh(a))return[".".concat(a.styledComponentId)];if(Ts(a)){if(!Ts(c=a)||c.prototype&&c.prototype.isReactComponent||!t)return[a];var l=a(t);return Ai(l,t,r,s)}var c;return a instanceof AE?r?(a.inject(r,s),[a.getName(s)]):[a]:Go(a)?ow(a):Array.isArray(a)?Array.prototype.concat.apply(Pc,a.map(function(d){return Ai(d,t,r,s)})):[a.toString()]}function DE(a){for(var t=0;t<a.length;t+=1){var r=a[t];if(Ts(r)&&!Vh(r))return!1}return!0}var ME=Qb(Yc),RE=(function(){function a(t,r,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&DE(t),this.componentId=r,this.baseHash=ys(ME,r),this.baseStyle=s,aw.registerId(r)}return a.prototype.generateAndInjectStyles=function(t,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Ti(l,this.staticRulesId);else{var c=Uv(Ai(this.rules,t,r,s)),d=nh(ys(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var p=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,p)}l=Ti(l,d),this.staticRulesId=d}else{for(var m=ys(this.baseHash,s.hash),g="",w=0;w<this.rules.length;w++){var b=this.rules[w];if(typeof b=="string")g+=b;else if(b){var k=Uv(Ai(b,t,r,s));m=ys(m,k+w),g+=k}}if(g){var E=nh(m>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(g,".".concat(E),void 0,this.componentId)),l=Ti(l,E)}}return l},a})(),lw=Ea.createContext(void 0);lw.Consumer;var Af={};function zE(a,t,r){var s=Vh(a),l=a,c=!jf(a),d=t.attrs,p=d===void 0?Pc:d,m=t.componentId,g=m===void 0?(function(q,ye){var ke=typeof q!="string"?"sc":zv(q);Af[ke]=(Af[ke]||0)+1;var I="".concat(ke,"-").concat(iE(Yc+ke+Af[ke]));return ye?"".concat(ye,"-").concat(I):I})(t.displayName,t.parentComponentId):m,w=t.displayName,b=w===void 0?(function(q){return jf(q)?"styled.".concat(q):"Styled(".concat(sE(q),")")})(a):w,k=t.displayName&&t.componentId?"".concat(zv(t.displayName),"-").concat(t.componentId):t.componentId||g,E=s&&l.attrs?l.attrs.concat(p).filter(Boolean):p,D=t.shouldForwardProp;if(s&&l.shouldForwardProp){var X=l.shouldForwardProp;if(t.shouldForwardProp){var H=t.shouldForwardProp;D=function(q,ye){return X(q,ye)&&H(q,ye)}}else D=X}var ne=new RE(r,k,s?l.componentStyle:void 0);function J(q,ye){return(function(ke,I,pe){var le=ke.attrs,me=ke.componentStyle,ze=ke.defaultProps,De=ke.foldedComponentIds,Je=ke.styledComponentId,nt=ke.target,Qe=Ea.useContext(lw),Y=Gv(),he=ke.shouldForwardProp||Y.shouldForwardProp,ge=tE(I,Qe,ze)||Cs,Le=(function(ae,de,Se){for(var $e,Pe=ta(ta({},de),{className:void 0,theme:Se}),vt=0;vt<ae.length;vt+=1){var $t=Ts($e=ae[vt])?$e(Pe):$e;for(var Rt in $t)Pe[Rt]=Rt==="className"?Ti(Pe[Rt],$t[Rt]):Rt==="style"?ta(ta({},Pe[Rt]),$t[Rt]):$t[Rt]}return de.className&&(Pe.className=Ti(Pe.className,de.className)),Pe})(le,I,ge),ee=Le.as||nt,v={};for(var T in Le)Le[T]===void 0||T[0]==="$"||T==="as"||T==="theme"&&Le.theme===ge||(T==="forwardedAs"?v.as=Le.forwardedAs:he&&!he(T,ee)||(v[T]=Le[T]));var A=(function(ae,de){var Se=Gv(),$e=ae.generateAndInjectStyles(de,Se.styleSheet,Se.stylis);return $e})(me,Le),R=Ti(De,Je);return A&&(R+=" "+A),Le.className&&(R+=" "+Le.className),v[jf(ee)&&!Xb.has(ee)?"class":"className"]=R,pe&&(v.ref=pe),x.createElement(ee,v)})(B,q,ye)}J.displayName=b;var B=Ea.forwardRef(J);return B.attrs=E,B.componentStyle=ne,B.displayName=b,B.shouldForwardProp=D,B.foldedComponentIds=s?Ti(l.foldedComponentIds,l.styledComponentId):"",B.styledComponentId=k,B.target=s?l.target:a,Object.defineProperty(B,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(q){this._foldedDefaultProps=s?(function(ye){for(var ke=[],I=1;I<arguments.length;I++)ke[I-1]=arguments[I];for(var pe=0,le=ke;pe<le.length;pe++)ah(ye,le[pe],!0);return ye})({},l.defaultProps,q):q}}),Gh(B,function(){return".".concat(B.styledComponentId)}),c&&tw(B,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),B}function Yv(a,t){for(var r=[a[0]],s=0,l=t.length;s<l;s+=1)r.push(t[s],a[s+1]);return r}var Pv=function(a){return Object.assign(a,{isCss:!0})};function qh(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ts(a)||Go(a))return Pv(Ai(Yv(Pc,_c([a],t,!0))));var s=a;return t.length===0&&s.length===1&&typeof s[0]=="string"?Ai(s):Pv(Ai(Yv(s,t)))}function ih(a,t,r){if(r===void 0&&(r=Cs),!t)throw Po(1,t);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(t,r,qh.apply(void 0,_c([l],c,!1)))};return s.attrs=function(l){return ih(a,t,ta(ta({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return ih(a,t,ta(ta({},r),l))},s}var cw=function(a){return ih(zE,a)},Yn=cw;Xb.forEach(function(a){Yn[a]=cw(a)});function _i(){return _i=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},_i.apply(null,arguments)}function LE(a,t){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(t.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Yh(a,t){if(a==null)return{};var r,s,l=LE(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function BE(a){var t=a?.createRoot,r=new WeakMap;function s(d){var p=r.get(d);if(p)return p;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var p=r.get(d);p&&(p.remove(),r.delete(d))}if(t){var c=new WeakMap;return{mount:function(p,m){var g,w=s(m),b=c.get(w);return b||(b=t(w),c.set(w,b)),b.render(p),(g=w.firstElementChild)!==null&&g!==void 0?g:w},unmount:function(p){var m=s(p),g=c.get(m);g&&(g.unmount(),c.delete(m)),l(p)}}}return{mount:function(p,m){var g=s(m);if("render"in av&&typeof Jr.render=="function"){var w=Jr.render(p,g);return w||g}throw new Error("ReactDOM.render is not available")},unmount:function(p){var m=s(p);if("unmountComponentAtNode"in av&&typeof Jr.unmountComponentAtNode=="function")Jr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(p)}}}function IE(a){var t=a.children,r=a.rendered;return x.useEffect(function(){r()}),t}function $E(){var a=x.useRef(!1);return x.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Jr.flushSync(r)}):r()}}}var uw=x.createContext({start:null,end:null,path:null});function UE(a){var t=a.children,r=x.useState(null),s=Fn(r,2),l=s[0],c=s[1],d=x.useState(null),p=Fn(d,2),m=p[0],g=p[1],w=x.useState(null),b=Fn(w,2),k=b[0],E=b[1],D="x"in a.start?a.start:l,X="x"in a.end?a.end:m,H=$E();return x.useEffect(function(){var ne=typeof a.start=="function"&&a.start(function(B){H.apply(function(){c(B)})}),J=typeof a.end=="function"&&a.end(function(B){H.apply(function(){g(B)})});return function(){ne&&ne(),J&&J()}},[]),x.useEffect(function(){D&&X&&a.path(D,X).then(function(ne){H.apply(function(){E(ne)})})},[D,X]),x.createElement(uw.Provider,{value:{start:D,end:X,path:k}},t)}function dw(){return x.useContext(uw)}var Fv,Zv,HE=Yn.svg(Fv||(Fv=Un([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),VE=Yn.path(Zv||(Zv=Un([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function fw(a){var t=dw(),r=t.path;return r?x.createElement(HE,{"data-testid":"connection"},x.createElement(VE,{styles:a.styles,d:r})):null}function GE(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=qE(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function qE(a,t){if(a){if(typeof a=="string")return Xv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xv(a,t):void 0}}function Xv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function YE(a){for(var t=new a.constructor(a.type),r=t;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=GE(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=t[d];typeof p!="function"&&Object.defineProperty(t,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return t}var PE="__reactContainer$";function FE(a){for(var t=a;t;){if(t._reactRootContainer||Object.keys(t).some(function(r){return r.startsWith(PE)}))return t;t=t.parentElement}}function Kv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Qv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Kv(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Kv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function hw(a,t){return{start:function(s){var l=Qv({},t(s));function c(p){var m=Qv({},t(p)),g=m.x-l.x,w=m.y-l.y;l=m,a(g,w)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function ZE(a,t){x.useEffect(function(){var r=function(c){if(!t){var d=FE(c.target),p=x.version.startsWith("16")?document:d;p&&(c.stopPropagation(),p.dispatchEvent(YE(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,t])}var Wv,XE=Yn.input(Wv||(Wv=Un([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function sh(a){var t=x.useState(a.data.value),r=Fn(t,2),s=r[0],l=r[1],c=x.useRef(null);return ZE(c),x.useEffect(function(){l(a.data.value)},[a.data.value]),x.createElement(XE,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(p){var m=a.data.type==="number"?+p.target.value:p.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var oh="rgba(110,136,255,0.8)",pw="#ffd92c",Za=24,xr=6,mw="#96b38a",gw=180,KE=Object.freeze({__proto__:null,$nodecolor:oh,$nodecolorselected:pw,$socketsize:Za,$socketmargin:xr,$socketcolor:mw,$nodewidth:gw}),QE=["init","unmount"];function Ph(a){var t=a.init,r=a.unmount,s=Yh(a,QE),l=x.useRef(null);return x.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),x.useEffect(function(){l.current&&t(l.current)}),x.createElement("span",_i({},s,{ref:l}))}var WE=["name","emit","payload"];function lh(a){var t=a.name,r=a.emit,s=a.payload,l=Yh(a,WE);return x.createElement(Ph,_i({},l,{className:t,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var JE=["name","emit","nodeId","side","socketKey","payload"];function ch(a){var t=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,p=Yh(a,JE);return x.createElement(Ph,_i({},p,{className:t,init:function(g){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:g,payload:d}})},unmount:function(g){r({type:"unmount",data:{element:g}})}}))}var Jv,e0,yw=Yn.div(Jv||(Jv=Un([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),oh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(gw,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},oh,function(a){return a.selected&&qh(e0||(e0=Un([`
        background: `,`;
        border-color: #e3c000;
    `])),pw)},Za/2+xr,Za/2+xr,xr,Za,Za+2*xr,xr,Za/2+xr,function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function _f(a){a.sort(function(t,r){var s,l,c=((s=t[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function vw(a){var t=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,p=c.label,m=c.width,g=c.height;return _f(t),_f(r),_f(s),x.createElement(yw,{selected:l,width:m,height:g,styles:a.styles,"data-testid":"node"},x.createElement("div",{className:"title","data-testid":"title"},p),r.map(function(w){var b=Fn(w,2),k=b[0],E=b[1];return E&&x.createElement("div",{className:"output",key:k,"data-testid":"output-".concat(k)},x.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),x.createElement(ch,{name:"output-socket",side:"output",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(w){var b=Fn(w,2),k=b[0],E=b[1];return E?x.createElement(lh,{key:k,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(k)}):null}),t.map(function(w){var b=Fn(w,2),k=b[0],E=b[1];return E&&x.createElement("div",{className:"input",key:k,"data-testid":"input-".concat(k)},x.createElement(ch,{name:"input-socket",side:"input",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&x.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&x.createElement(lh,{key:k,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var t0,n0,bw=Yn.div(t0||(t0=Un([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Za/2,Za,Za,mw),eC=Yn.div(n0||(n0=Un([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Za+xr*2)/2,xr,bw);function ww(a){return x.createElement(eC,null,x.createElement(bw,{title:a.data.name}))}function tC(a){var t=typeof a?.socketPositionWatcher>"u"?R2():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){t.attach(m)},render:function(m,g){if(m.data.type==="node"){var w=g.parentScope(),b=s?s(m.data):vw;return b&&x.createElement(b,{data:m.data.payload,emit:function(ye){return void w.emit(ye)}})}else if(m.data.type==="connection"){var k=l?l(m.data):fw,E=m.data.payload,D=E.sourceOutput,X=E.targetInput,H=E.source,ne=E.target;return k&&x.createElement(UE,{start:m.data.start||function(q){return t.listen(H,"output",D,q)},end:m.data.end||function(q){return t.listen(ne,"input",X,q)},path:(function(){var q=it(Ce.mark(function ye(ke,I){var pe,le,me,ze,De;return Ce.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=1,g.emit({type:"connectionpath",data:{payload:E,points:[ke,I]}});case 1:if(pe=Je.sent,pe){Je.next=2;break}return Je.abrupt("return","");case 2:if(le=pe.data,me=le.path,ze=le.points,De=.3,!(!me&&ze.length!==2)){Je.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(me){Je.next=4;break}return Je.abrupt("return",E.isLoop?N2(ze,De,120):T2(ze,De));case 4:return Je.abrupt("return",me);case 5:case"end":return Je.stop()}},ye)}));return function(ye,ke){return q.apply(this,arguments)}})()},x.createElement(k,{data:m.data.payload}))}else if(m.data.type==="socket"){var J=c?c(m.data):ww;return J&&m.data.payload&&x.createElement(J,{data:m.data.payload})}else if(m.data.type==="control"){var B=d&&m.data.payload?d(m.data):m.data.payload instanceof Kt.InputControl?sh:null;return B&&x.createElement(B,{data:m.data.payload})}}}}var nC=Object.freeze({__proto__:null,vars:KE,setup:tC,Connection:fw,useConnection:dw,Control:sh,InputControl:sh,Node:vw,NodeStyles:yw,RefControl:lh,RefSocket:ch,Socket:ww});function Sw(a,t){var r=x.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},t)};return x.useEffect(function(){return s},[]),[l,s]}var aC="rgba(110,136,255,0.8)",rC="rgba(130, 153, 255, 0.8)",iC="rgba(69, 103, 255, 0.8)",cc="5px",uh=120,a0,Fh=Yn.div(a0||(a0=Un([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),iC,aC,cc,cc,cc,cc,rC),r0,i0,s0,xw=Yn(Fh)(r0||(r0=Un([`
    `,`
`])),function(a){return a.hasSubitems&&qh(i0||(i0=Un([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),kw=Yn.div(s0||(s0=Un([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),uh);function Ew(a){var t,r,s,l,c=x.useState(!1),d=Fn(c,2),p=d[0],m=d[1],g=x.useCallback(function(){m(!1)},[m]),w=Sw(g,a.delay),b=Fn(w,2),k=b[0],E=b[1],D=((t=a.components)===null||t===void 0||(r=t.item)===null||r===void 0?void 0:r.call(t,a.data))||xw,X=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||kw;return x.createElement(D,{onClick:function(ne){ne.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(ne){ne.stopPropagation()},onPointerOver:function(){E(),m(!0)},onPointerLeave:function(){k&&k()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&p&&x.createElement(X,null,a.data.subitems.map(function(H){return x.createElement(Ew,{key:H.key,data:H,delay:a.delay,hide:a.hide,components:a.components},H.label)})))}var o0,Cw=Yn.input(o0||(o0=Un([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function sC(a){var t=a.component||Cw;return x.createElement(t,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var l0,Tw=Yn.div(l0||(l0=Un([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),uh,uh/2);function oC(a){var t,r,s,l,c,d,p=Sw(a.onHide,a.delay),m=Fn(p,2),g=m[0],w=m[1],b=x.useState(""),k=Fn(b,2),E=k[0],D=k[1],X=new RegExp(E,"i"),H=a.items.filter(function(B){return B.label.match(X)}),ne=((t=a.components)===null||t===void 0||(r=t.main)===null||r===void 0?void 0:r.call(t))||Tw,J=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Fh;return x.createElement(ne,{onMouseOver:function(){w()},onMouseLeave:function(){g?.()},onWheel:function(q){q.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&x.createElement(J,null,x.createElement(sC,{value:E,onChange:D,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),H.map(function(B){return x.createElement(Ew,{key:B.key,data:B,delay:a.delay,hide:a.onHide,components:a.components},B.label)}))}function lC(a){var t=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return x.createElement(oC,{items:s.data.items,delay:t,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var cC=Object.freeze({__proto__:null,setup:lC,Item:xw,Subitems:kw,Menu:Tw,Search:Cw,Common:Fh}),uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uC=typeof uc=="object"&&uc&&uc.Object===Object&&uc,dC=typeof self=="object"&&self&&self.Object===Object&&self;uC||dC||Function("return this")();function fC(){const a=x.useRef(!1);return x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useCallback(()=>a.current,[])}var c0={width:void 0,height:void 0};function hC(a){const{ref:t,box:r="content-box"}=a,[{width:s,height:l},c]=x.useState(c0),d=fC(),p=x.useRef({...c0}),m=x.useRef(void 0);return m.current=a.onResize,x.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([w])=>{const b=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",k=u0(w,b,"inlineSize"),E=u0(w,b,"blockSize");if(p.current.width!==k||p.current.height!==E){const X={width:k,height:E};p.current.width=k,p.current.height=E,m.current?m.current(X):d()&&c(X)}});return g.observe(t.current,{box:r}),()=>{g.disconnect()}},[r,t,d]),{width:s,height:l}}function u0(a,t,r){return a[t]?Array.isArray(a[t])?a[t][0][r]:a[t][r]:t==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Xa(a){return"".concat(a,"px")}var d0,pC=Yn.div(d0||(d0=Un([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function mC(a){return x.createElement(pC,{style:{left:Xa(a.left),top:Xa(a.top),width:Xa(a.width),height:Xa(a.height)},"data-testid":"minimap-node"})}var f0,gC=Yn.div(f0||(f0=Un([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function yC(a){var t=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=hw(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return x.createElement(gC,{onPointerDown:s.start,style:{left:Xa(t(a.left)),top:Xa(t(a.top)),width:Xa(t(a.width)),height:Xa(t(a.height))},"data-testid":"minimap-viewport"})}var h0,vC=Yn.div(h0||(h0=Un([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function bC(a){var t,r=x.useRef(null),s=hC({ref:r}),l=s.width,c=l===void 0?0:l,d=((t=r.current)===null||t===void 0?void 0:t.clientWidth)||c,p=x.useCallback(function(m){return m*d},[d]);return x.createElement(vC,{size:a.size,style:{width:Xa(a.size*a.ratio),height:Xa(a.size)},onPointerDown:function(g){g.stopPropagation(),g.preventDefault()},onDoubleClick:function(g){if(g.stopPropagation(),g.preventDefault(),!!r.current){var w=r.current.getBoundingClientRect(),b=(g.clientX-w.left)/(a.size*a.ratio),k=(g.clientY-w.top)/(a.size*a.ratio);a.point(b,k)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,g){return x.createElement(mC,{key:g,left:p(m.left),top:p(m.top),width:p(m.width),height:p(m.height)})}):null,x.createElement(yC,_i({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function wC(a){return{render:function(r){if(r.data.type==="minimap")return x.createElement(bC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var SC=Object.freeze({__proto__:null,setup:wC}),p0,Io=20,xC=Yn.div(p0||(p0=Un([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),Io,Io,function(a){return a.selected?"#ffd92c":"steelblue"},Io);function kC(a){var t=hw(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return x.createElement(xC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),t.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-Io/2,"px"),left:"".concat(s-Io/2,"px")},"data-testid":"pin"})}function EC(a){function t(r,s){return x.createElement(x.Fragment,null,r.pins.map(function(l){return x.createElement(kC,_i({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,p){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,p)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Yo);if(c.type==="reroute-pins")return t(c.data,function(){return d.area.pointer})}}}var CC=Object.freeze({__proto__:null,setup:EC}),Df=Object.freeze({__proto__:null,classic:nC,contextMenu:cC,minimap:SC,reroute:CC});function TC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=NC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function NC(a,t){if(a){if(typeof a=="string")return m0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m0(a,t):void 0}}function m0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function g0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function dc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?g0(Object(r),!0).forEach(function(s){Ie(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):g0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function OC(a,t,r){return t=Vt(t),Ja(a,Nw()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Nw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nw=function(){return!!a})()}function jC(a,t,r,s){var l=Vo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var AC=(function(a){function t(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ft(this,t),r=OC(this,t,["react-render"]),Ie(r,"presets",[]),r.renderer=BE({createRoot:d?.createRoot}),r.addPipe(function(p){if(!p||$n(p)!=="object"||!("type"in p))return p;if(p.type==="unmount")r.unmount(p.data.element);else if(p.type==="render"){if("filled"in p.data&&p.data.filled)return p;if(r.mount(p.data.element,p))return dc(dc({},p),{},{data:dc(dc({},p.data),{},{filled:!0})})}return p}),r}return na(t,a),ht(t,[{key:"setParent",value:function(s){var l=this;jC(t,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=TC(this.presets),p;try{for(d.s();!(p=d.n()).done;){var m=p.value,g=m.render(l,this);if(g){var w=x.createElement(IE,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},g);return this.renderer.mount(w,s),!0}}}catch(b){d.e(b)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(Os);function _C(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function Ow(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ow=function(){return!!a})()}function DC(a,t,r){if(Ow())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var l=new(a.bind.apply(a,s));return r&&Ho(l,r.prototype),l}function dh(a){var t=typeof Map=="function"?new Map:void 0;return dh=function(s){if(s===null||!_C(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,l)}function l(){return DC(s,arguments,Vt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ho(l,s)},dh(a)}function MC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=RC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function RC(a,t){if(a){if(typeof a=="string")return y0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y0(a,t):void 0}}function y0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}var zC=(function(){function a(t){ft(this,a),Ie(this,"setups",new Map),this.editor=t}return ht(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var t=it(Ce.mark(function s(l){var c=this,d,p,m,g,w,b,k,E,D,X,H,ne;return Ce.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(d=this.setups.get(l),d){B.next=3;break}throw new Error("node is not initialized");case 3:return p=d.inputs(),m=this.editor.getConnections().filter(function(q){return q.target===l&&p.includes(q.targetInput)}),g={},B.next=8,Promise.all(m.map((function(){var q=it(Ce.mark(function ye(ke){return Ce.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.t0=ke,pe.next=3,c.fetch(ke.source);case 3:return pe.t1=pe.sent,pe.abrupt("return",{c:pe.t0,sourceData:pe.t1});case 5:case"end":return pe.stop()}},ye)}));return function(ye){return q.apply(this,arguments)}})()));case 8:w=B.sent,b=MC(w);try{for(b.s();!(k=b.n()).done;)E=k.value,D=E.c,X=E.sourceData,H=g[D.targetInput]?g[D.targetInput]:[],ne=g,ne[D.targetInput]=[].concat(js(H),[X[D.sourceOutput]])}catch(q){b.e(q)}finally{b.f()}return B.abrupt("return",g);case 12:case"end":return B.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var t=it(Ce.mark(function s(l){var c=this,d,p,m,g;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(d=this.setups.get(l),d){b.next=3;break}throw new Error("node is not initialized");case 3:return p=d.outputs(),b.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=b.sent,g=Object.keys(m),p.every(function(k){return g.includes(k)})){b.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(p.join('", "'),'". Got "').concat(g.join('", "'),'"'));case 10:return b.abrupt("return",m);case 11:case"end":return b.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()}])})(),LC=(function(){function a(t){ft(this,a),Ie(this,"cache",new Map),this.onDelete=t}return ht(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function BC(a,t,r){return t=Vt(t),Ja(a,jw()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function jw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jw=function(){return!!a})()}var v0=(function(a){function t(){return ft(this,t),BC(this,t,["cancelled"])}return na(t,a),ht(t)})(dh(Error));function IC(){var a=!1;function t(m){if(a)throw new v0;return m}for(var r,s=new Promise(function(m,g){r=g,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var p=c.reduce(function(m,g){var w=m.then(g).then(t);return w},s);return p.cancel=function(){a||r(new v0),a=!0},p}function $C(a,t,r){return t=Vt(t),Ja(a,Aw()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Aw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Aw=function(){return!!a})()}function UC(a,t,r,s){var l=Vo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var HC=(function(a){function t(r){var s;return ft(this,t),s=$C(this,t,["dataflow-engine"]),Ie(s,"cache",new LC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return na(t,a),ht(t,[{key:"setParent",value:function(s){UC(t,"setParent",this)([s]),this.editor=this.parentScope(ai),this.dataflow=new zC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=it(Ce.mark(function m(g){var w,b;return Ce.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(w=l.cache.get(s.id),!w){E.next=3;break}return E.abrupt("return",w);case 3:return b=IC(function(){return g()},function(D){return s.data(D)}),l.cache.add(s.id,b),E.abrupt("return",b);case 6:case"end":return E.stop()}},m)}));function p(m){return d.apply(this,arguments)}return p})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(p){return p.source===s&&d.includes(p.sourceOutput)}).forEach(function(p){l.reset(p.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=it(Ce.mark(function l(c){var d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=$n(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=it(Ce.mark(function l(c){var d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=$n(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(Os);const VC=!1,Zh=(...a)=>VC,b0=Kt.Socket.canConnect;Kt.Socket.canConnect=function(a,t){return Zh(`[Socket Check] ${a.name} <-> ${t.name}`),b0&&b0(a,t)||a.name==="any"||t.name==="any"?!0:a.name===t.name};Kt.Socket.prototype.canConnectTo=function(a){return Zh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Kt.Socket.canConnect(this,a)};const _w={boolean:new Kt.Socket("boolean"),number:new Kt.Socket("number"),object:new Kt.Socket("object"),lightInfo:new Kt.Socket("light_info"),any:new Kt.Socket("any")};Object.values(_w).forEach(a=>{a.canConnectTo=function(t){return Zh(`[Socket Instance Direct] ${this.name} -> ${t.name}`),this.name===t.name||this.name==="any"||t.name==="any"}});let No=null;function Fc(){if(No!==null)return No;const t=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return t?No=t[1]:No="",No}function Tn(a){const t=Fc(),r=a.startsWith("/")?a:"/"+a;return t+r}Fc();const Ni="t2app-pin",zc="t2app-pin-remember",Dw=(a,t)=>{try{return a.getItem(t)}catch{return null}},fc=(a,t,r)=>{try{return a.setItem(t,r),!0}catch{return!1}},$o=(a,t)=>{try{return a.removeItem(t),!0}catch{return!1}},Lc=()=>Dw(localStorage,zc)==="true",bs=()=>{const t=Lc()?localStorage:sessionStorage;return(Dw(t,Ni)||"").trim()||null},Mw=()=>{$o(sessionStorage,Ni),$o(localStorage,Ni),$o(localStorage,zc),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},w0=(a,{remember:t}={})=>{const r=(a||"").toString().trim(),s=typeof t=="boolean"?t:Lc();if(!r){Mw(),typeof t=="boolean"&&fc(localStorage,zc,t?"true":"false");return}fc(localStorage,zc,s?"true":"false"),s?(fc(localStorage,Ni,r),$o(sessionStorage,Ni)):(fc(sessionStorage,Ni,r),$o(localStorage,Ni)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},gs=async(a,t={})=>{const r=typeof a=="string"?Tn(a):a;return fetch(r,t)},fn=async(a,t={})=>{const r=bs(),s=typeof a=="string"?Tn(a):a;if(!r)return fetch(s,t);const l=new Headers(t.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...t,headers:l})},S0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function GC(){const[a,t]=x.useState([]),[r,s]=x.useState(!1),[l,c]=x.useState(null),[d,p]=x.useState(null),[m,g]=x.useState(5e3),[w,b]=x.useState(null),k=x.useCallback(async()=>{s(!0),c(null);try{const ne=await gs("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!ne.ok){const B=await ne.json();throw new Error(B.error||`Scan failed (${ne.status})`)}const J=await ne.json();t(J.devices||[]),p(new Date)}catch(ne){console.error("[Discovery] Scan error:",ne),c(ne.message)}finally{s(!1)}},[m]),E=ne=>S0[ne]||S0.generic,D=ne=>ne?new Date(ne).toLocaleTimeString():"",H=(ne=>{const J={};for(const B of ne){const q=B.type||"generic";J[q]||(J[q]=[]),J[q].push(B)}return J})(a);return h.jsxs("div",{className:"discovery-panel",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),h.jsxs("select",{value:m,onChange:ne=>g(Number(ne.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[h.jsx("option",{value:3e3,children:"3 seconds"}),h.jsx("option",{value:5e3,children:"5 seconds"}),h.jsx("option",{value:1e4,children:"10 seconds"}),h.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),h.jsx("button",{onClick:k,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):h.jsx(h.Fragment,{children:" Scan Network"})})]}),l&&h.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&h.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&h.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[h.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),h.jsx("div",{children:"No devices found on your network."}),h.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(H).map(([ne,J])=>{const B=E(ne);return h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[h.jsx("span",{style:{fontSize:"16px"},children:B.icon}),h.jsx("span",{style:{color:B.color,fontSize:"13px",fontWeight:500},children:B.label}),h.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:J.length})]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:J.map(q=>h.jsxs("div",{style:{background:w===q.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>b(w===q.id?null:q.id),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:q.name}),h.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[q.ip,":",q.port]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[q.configured?h.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):h.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),h.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:w===q.id?"":""})]})]}),w===q.id&&h.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[h.jsx("span",{children:"Host:"}),h.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:q.host||"N/A"}),h.jsx("span",{children:"Source:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:q.source==="mdns"?"mDNS/Bonjour":q.source==="udp"?"UDP Broadcast":q.source}),h.jsx("span",{children:"Discovered:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:D(q.discoveredAt)}),q.capabilities&&q.capabilities.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Capabilities:"}),h.jsx("span",{style:{color:"#5fb3b3"},children:q.capabilities.join(", ")})]}),q.model&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Model:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:q.model})]})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:ye=>{ye.stopPropagation(),window.open(`http://${q.ip}:${q.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),h.jsx("button",{onClick:ye=>{ye.stopPropagation(),navigator.clipboard.writeText(q.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},q.id))})]},ne)}),h.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const Oo={tron:{name:"Tron (Default)",description:"Cyan neon on dark - the classic T2 look",colors:{primary:"#5fb3b3",background:"#1e2428",surface:"#2a3238",surfaceLight:"#343d44",text:"#c5cdd3",textMuted:"#8a959e",success:"#5faa7d",warning:"#d4a054",error:"#c75f5f",borderOpacity:25}},midnight:{name:"Midnight Purple",description:"Deep purple with pink accents",colors:{primary:"#b388ff",background:"#1a1a2e",surface:"#25253a",surfaceLight:"#32324a",text:"#e0d6ff",textMuted:"#9990b8",success:"#69f0ae",warning:"#ffab40",error:"#ff5252",borderOpacity:30}},forest:{name:"Forest",description:"Natural greens with earth tones",colors:{primary:"#81c784",background:"#1b2420",surface:"#263530",surfaceLight:"#324540",text:"#d5e8d4",textMuted:"#8aa888",success:"#4caf50",warning:"#ffb74d",error:"#e57373",borderOpacity:25}},ember:{name:"Ember",description:"Warm orange and red firelight",colors:{primary:"#ff7043",background:"#1f1510",surface:"#2d2018",surfaceLight:"#3d2d22",text:"#ffe0cc",textMuted:"#b08060",success:"#aed581",warning:"#ffc107",error:"#ff5722",borderOpacity:30}},arctic:{name:"Arctic",description:"Cool blues with icy highlights",colors:{primary:"#4fc3f7",background:"#0d1b2a",surface:"#1b2838",surfaceLight:"#283848",text:"#e3f2fd",textMuted:"#78a5c8",success:"#26a69a",warning:"#ffca28",error:"#ef5350",borderOpacity:25}},monochrome:{name:"Monochrome",description:"Clean grayscale - easy on the eyes",colors:{primary:"#90a4ae",background:"#1a1a1a",surface:"#252525",surfaceLight:"#333333",text:"#e0e0e0",textMuted:"#888888",success:"#a5d6a7",warning:"#ffe082",error:"#ef9a9a",borderOpacity:20}}},Rw={"Core Colors":{icon:"",settings:[{key:"primary",label:"Primary Accent",type:"color",default:"#5fb3b3"},{key:"background",label:"Background",type:"color",default:"#1e2428"},{key:"surface",label:"Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"}]},"Status Colors":{icon:"",settings:[{key:"success",label:"Success",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning",type:"color",default:"#d4a054"},{key:"error",label:"Error",type:"color",default:"#c75f5f"}]},"Socket Colors":{icon:"",settings:[{key:"socketBoolean",label:"Boolean",type:"color",default:"#10b981",cssVar:"socket-boolean-color"},{key:"socketNumber",label:"Number",type:"color",default:"#3b82f6",cssVar:"socket-number-color"},{key:"socketString",label:"String",type:"color",default:"#f59e0b",cssVar:"socket-string-color"},{key:"socketHsv",label:"HSV/Color",type:"color",default:"#8b5cf6",cssVar:"socket-hsv-color"},{key:"socketObject",label:"Object",type:"color",default:"#6366f1",cssVar:"socket-object-color"},{key:"socketLight",label:"Light/Device",type:"color",default:"#eab308",cssVar:"socket-light-color"}]},"Node Glow Colors":{icon:"",settings:[{key:"nodeHa",label:"Home Assistant",type:"color",default:"#00d4ff",cssVar:"node-ha-glow"},{key:"nodeLogic",label:"Logic",type:"color",default:"#8b5cf6",cssVar:"node-logic-glow"},{key:"nodeTimer",label:"Timer/Event",type:"color",default:"#f59e0b",cssVar:"node-timer-glow"},{key:"nodeColor",label:"Color",type:"color",default:"#ec4899",cssVar:"node-color-glow"},{key:"nodeUtility",label:"Utility",type:"color",default:"#14b8a6",cssVar:"node-utility-glow"},{key:"nodeDevice",label:"Direct Device",type:"color",default:"#22c55e",cssVar:"node-device-glow"}]},Editor:{icon:"",settings:[{key:"borderOpacity",label:"Border Opacity",type:"range",min:0,max:100,default:25},{key:"glowIntensity",label:"Glow Intensity",type:"range",min:0,max:100,default:50},{key:"gridOpacity",label:"Grid Opacity",type:"range",min:0,max:100,default:30}]}},Mf=Object.values(Rw).flatMap(a=>a.settings),qC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"ElevenLabs TTS",icon:"",description:"AI voice generation for TTS Announcement node",settings:[{key:"ELEVENLABS_API_KEY",label:"API Key",placeholder:"Your ElevenLabs API key",type:"password",isSecret:!0,hint:"Get one at elevenlabs.io"},{key:"PUBLIC_URL",label:"Public URL",placeholder:"http://192.168.1.x:3000",type:"text",hint:"URL reachable by your speakers (for audio playback)"}]},{category:"Chatterbox TTS",icon:"",description:"Local AI voice generation (requires GPU server)",settings:[{key:"CHATTERBOX_URL",label:"Server URL",placeholder:"http://localhost:8100",type:"text",hint:"URL of Chatterbox server (local or remote GPU machine)"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],x0=a=>{try{const t=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},k0=a=>{try{const t=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function YC({isOpen:a,onClose:t}){const[r,s]=x.useState({}),[l,c]=x.useState(!0),[d,p]=x.useState(!1),[m,g]=x.useState(null),[w,b]=x.useState(null),[k,E]=x.useState({}),[D,X]=x.useState({}),[H,ne]=x.useState({}),[J,B]=x.useState({}),[q,ye]=x.useState([]),[ke,I]=x.useState(!1),pe=x.useRef(!1),le=x.useRef(null),[me,ze]=x.useState(""),[De,Je]=x.useState(()=>Lc()),[nt,Qe]=x.useState(()=>!!bs()),[Y,he]=x.useState(!1),[ge,Le]=x.useState(()=>{try{const N=localStorage.getItem("t2theme-overrides"),O=N?JSON.parse(N):{},F={};return Mf.forEach(oe=>{F[oe.key]=oe.default}),{...F,...O}}catch{const N={};return Mf.forEach(O=>{N[O.key]=O.default}),N}}),[ee,v]=x.useState(!1),[T,A]=x.useState(()=>{try{return localStorage.getItem("t2theme-preset")||"tron"}catch{return"tron"}}),[R,ae]=x.useState(()=>{try{const N=localStorage.getItem("t2-custom-themes");return N?JSON.parse(N):{}}catch{return{}}}),[de,Se]=x.useState(!1),[$e,Pe]=x.useState(""),vt={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[$t,Rt]=x.useState(()=>{try{const N=localStorage.getItem("t2category-overrides"),O=N?JSON.parse(N):{},F={};for(const[oe,Me]of Object.entries(vt))F[oe]={...Me,...O[oe]||{}};return F}catch{return{...vt}}}),[ln,st]=x.useState(!1),zt={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},Mn={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[Fe,bt]=x.useState(()=>{try{const N=localStorage.getItem("t2socket-colors"),O=N?JSON.parse(N):{},F={};for(const[oe,Me]of Object.entries(zt))F[oe]={...Me,...O[oe]||{}};return F}catch{return{...zt}}}),[nn,Nn]=x.useState(!1),[Zn,Ta]=x.useState(!1),[Na,L]=x.useState(null),[te,_]=x.useState(!1),[P,Q]=x.useState(!1);x.useEffect(()=>{a?(C(),X({Security:!0,"Home Assistant":!0}),ne({}),Je(Lc()),Qe(!!bs()),ze(""),pe.current||(pe.current=!0,(async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),I(!0);try{const N=await fn("/api/lights/ha/");if(console.log("[SettingsModal] Response status:",N.status),!N.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",N.status),I(!1);return}const O=await N.json();if(console.log("[SettingsModal] HA devices received:",O?.length),!O||!Array.isArray(O)){console.warn("[SettingsModal] No devices array received"),I(!1);return}const F=O.filter(oe=>(oe.id||oe.entity_id||"").includes("sensor.")).map(oe=>({id:(oe.id||oe.entity_id||"").replace("ha_",""),name:oe.name||oe.friendly_name||oe.id||oe.entity_id})).sort((oe,Me)=>oe.name.localeCompare(Me.name));console.log("[SettingsModal] Filtered sensors:",F.length),ye(F),I(!1)}catch(N){console.warn("[SettingsModal] Error fetching HA sensors:",N),I(!1)}})())):pe.current=!1},[a]);const K=async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),I(!0);try{const N=await fn("/api/lights/ha/");if(!N.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",N.status),I(!1);return}const O=await N.json();if(console.log("[SettingsModal] HA devices received:",O?.length),!O||!Array.isArray(O)){console.warn("[SettingsModal] No devices array received"),I(!1);return}const F=O.filter(oe=>(oe.id||oe.entity_id||"").includes("sensor.")).map(oe=>({id:(oe.id||oe.entity_id||"").replace("ha_",""),name:oe.name||oe.friendly_name||oe.id||oe.entity_id})).sort((oe,Me)=>oe.name.localeCompare(Me.name));console.log("[SettingsModal] Filtered sensors:",F.length),ye(F),I(!1)}catch(N){console.warn("[SettingsModal] Error fetching HA sensors:",N),I(!1)}},C=async()=>{c(!0),g(null);try{const N=await fn("/api/settings");if(!N.ok)throw new Error("Failed to fetch settings");const F=(await N.json()).settings||{};s(F);try{const oe=await fn("/api/config");if(oe.ok){const Me=await oe.json();if(Me.success){_(Me.isAddon||!1),Q(!0);const Pt=!F.LOCATION_CITY,Rn=!F.LOCATION_LATITUDE,qe=!F.LOCATION_LONGITUDE,Qt=!F.LOCATION_TIMEZONE;(Pt||Rn||qe||Qt)&&(s(_t=>({..._t,...Pt&&Me.locationName?{LOCATION_CITY:Me.locationName}:{},...Rn&&Me.latitude?{LOCATION_LATITUDE:String(Me.latitude)}:{},...qe&&Me.longitude?{LOCATION_LONGITUDE:String(Me.longitude)}:{},...Qt&&Me.timezone?{LOCATION_TIMEZONE:Me.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(oe){console.log("[Settings] Could not fetch HA config for location auto-fill:",oe.message)}}catch(N){g("Failed to load settings: "+N.message)}finally{c(!1)}},G=async()=>{p(!0),g(null),b(null);try{const N=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!N.ok){const O=await N.json();throw new Error(O.error||"Failed to save settings")}b("Settings saved! Some changes may require a server restart."),setTimeout(()=>b(null),5e3)}catch(N){g("Failed to save: "+N.message)}finally{p(!1)}},ue=(N,O)=>{s(F=>({...F,[N]:O}))},se=async()=>{const N=r.LOCATION_CITY;if(!N||N.trim().length<2){L("Please enter a city name first");return}Ta(!0),L(null);try{const O=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(N)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!O.ok)throw new Error("Geocoding service unavailable");const F=await O.json();if(F.length===0){L(`Could not find "${N}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const oe=F[0],Me=parseFloat(oe.lat).toFixed(4),Pt=parseFloat(oe.lon).toFixed(4),Rn=oe.address?[oe.address.city||oe.address.town||oe.address.village||oe.name,oe.address.state,oe.address.country].filter(Boolean).join(", "):oe.display_name.split(",").slice(0,3).join(",");let qe="UTC";const Qt=oe.address?.state?.toLowerCase()||"",_t=oe.address?.country?.toLowerCase()||"";if(_t.includes("portugal"))qe="Europe/Lisbon";else if(_t.includes("spain"))qe="Europe/Madrid";else if(_t.includes("france"))qe="Europe/Paris";else if(_t.includes("germany"))qe="Europe/Berlin";else if(_t.includes("italy"))qe="Europe/Rome";else if(_t.includes("united kingdom")||_t.includes("ireland"))qe="Europe/London";else if(_t.includes("netherlands"))qe="Europe/Amsterdam";else if(_t.includes("belgium"))qe="Europe/Brussels";else if(_t.includes("australia"))qe="Australia/Sydney";else if(_t.includes("japan"))qe="Asia/Tokyo";else if(_t.includes("china"))qe="Asia/Shanghai";else if(_t.includes("india"))qe="Asia/Kolkata";else if(_t.includes("brazil"))qe="America/Sao_Paulo";else if(_t.includes("canada"))Qt.includes("british columbia")?qe="America/Vancouver":Qt.includes("alberta")?qe="America/Edmonton":Qt.includes("saskatchewan")?qe="America/Regina":Qt.includes("manitoba")?qe="America/Winnipeg":Qt.includes("ontario")?qe="America/Toronto":Qt.includes("quebec")?qe="America/Montreal":qe="America/Toronto";else if(_t.includes("united states")||_t.includes("usa"))Qt.includes("hawaii")?qe="Pacific/Honolulu":Qt.includes("alaska")?qe="America/Anchorage":["california","nevada","oregon","washington"].some(pt=>Qt.includes(pt))?qe="America/Los_Angeles":["arizona"].some(pt=>Qt.includes(pt))?qe="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(pt=>Qt.includes(pt))?qe="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(pt=>Qt.includes(pt))?qe="America/Chicago":qe="America/New_York";else{const pt=parseFloat(Pt);pt>=-125&&pt<-115?qe="America/Los_Angeles":pt>=-115&&pt<-102?qe="America/Denver":pt>=-102&&pt<-87?qe="America/Chicago":pt>=-87&&pt<-67?qe="America/New_York":pt>=-10&&pt<3?qe="Europe/London":pt>=3&&pt<15?qe="Europe/Paris":pt>=15&&pt<30&&(qe="Europe/Berlin")}s(pt=>({...pt,LOCATION_CITY:Rn,LOCATION_LATITUDE:Me,LOCATION_LONGITUDE:Pt,LOCATION_TIMEZONE:qe})),b(`Found: ${Rn} (${Me}, ${Pt})`),setTimeout(()=>b(null),5e3)}catch(O){L("Search failed: "+O.message)}finally{Ta(!1)}},xe=(N,O)=>{const F=Mf.find(Me=>Me.key===N),oe=document.documentElement;if(N==="borderOpacity")oe.style.setProperty("--node-border-opacity",O/100);else if(N==="glowIntensity")oe.style.setProperty("--node-glow-intensity",O/100);else if(N==="gridOpacity")oe.style.setProperty("--editor-grid-opacity",O/100);else if(F?.cssVar){const Me=F.cssVar;if(oe.style.setProperty(`--${Me}`,O),typeof O=="string"&&O.startsWith("#")){const Pt=parseInt(O.slice(1,3),16),Rn=parseInt(O.slice(3,5),16),qe=parseInt(O.slice(5,7),16);oe.style.setProperty(`--${Me.replace("-color","-rgb").replace("-glow","-rgb")}`,`${Pt}, ${Rn}, ${qe}`);const Qt=Math.max(0,Pt-40),_t=Math.max(0,Rn-40),pt=Math.max(0,qe-40);oe.style.setProperty(`--${Me.replace("-color","-dark").replace("-glow","-dark")}`,`rgb(${Qt}, ${_t}, ${pt})`);const Ua=Math.min(255,Pt+40),Wt=Math.min(255,Rn+40),qt=Math.min(255,qe+40);oe.style.setProperty(`--${Me.replace("-color","-border").replace("-glow","-border")}`,`rgb(${Ua}, ${Wt}, ${qt})`)}}else if(oe.style.setProperty(`--theme-${N}`,O),typeof O=="string"&&O.startsWith("#")){const Me=parseInt(O.slice(1,3),16),Pt=parseInt(O.slice(3,5),16),Rn=parseInt(O.slice(5,7),16);oe.style.setProperty(`--theme-${N}-rgb`,`${Me}, ${Pt}, ${Rn}`)}},ve=(N,O)=>{Le(oe=>({...oe,[N]:O})),v(!0),A("custom"),xe(N,O);const F={...ge,[N]:O};localStorage.setItem("t2theme-overrides",JSON.stringify(F)),localStorage.setItem("t2theme-preset","custom")},Oe=N=>{const O=Oo[N];O&&(Object.entries(O.colors).forEach(([F,oe])=>{xe(F,oe)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,O.colors),localStorage.setItem("t2theme-preset",N),localStorage.setItem("t2theme-overrides",JSON.stringify(O.colors)),Le(O.colors),A(N),v(!1),b(`Theme "${O.name}" applied!`),setTimeout(()=>b(null),3e3))},_e=N=>{const O=R[N];O&&(Object.entries(O.colors).forEach(([F,oe])=>{xe(F,oe)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,O.colors),localStorage.setItem("t2theme-preset",`custom:${N}`),localStorage.setItem("t2theme-overrides",JSON.stringify(O.colors)),Le(O.colors),A(`custom:${N}`),v(!1),b(`Theme "${O.name}" applied!`),setTimeout(()=>b(null),3e3))},et=()=>{if(!$e.trim()){g("Please enter a theme name");return}const N=$e.trim().toLowerCase().replace(/\s+/g,"-");if(Oo[N]){g("Cannot use a built-in theme name");return}const O={name:$e.trim(),colors:{...ge}},F={...R,[N]:O};ae(F);try{localStorage.setItem("t2-custom-themes",JSON.stringify(F)),localStorage.setItem("t2theme-preset",`custom:${N}`),A(`custom:${N}`),Se(!1),Pe(""),v(!1),b(`Custom theme "${$e.trim()}" saved!`),setTimeout(()=>b(null),3e3)}catch(oe){g("Failed to save custom theme: "+oe.message)}},Ge=(N,O)=>{O.stopPropagation();const F=R[N]?.name||N;if(!window.confirm(`Delete custom theme "${F}"?`))return;const{[N]:oe,...Me}=R;ae(Me);try{localStorage.setItem("t2-custom-themes",JSON.stringify(Me)),T===`custom:${N}`&&Oe("tron"),b(`Theme "${F}" deleted`),setTimeout(()=>b(null),3e3)}catch(Pt){g("Failed to delete theme: "+Pt.message)}},Xe=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(ge)),localStorage.setItem("t2theme-preset","custom"),A("custom"),b("Theme saved! Refresh the page to apply changes."),v(!1),setTimeout(()=>b(null),5e3)}catch(N){g("Failed to save theme: "+N.message)}},Ee=()=>{Oe("tron"),localStorage.removeItem("t2theme-overrides"),localStorage.removeItem("t2theme-preset"),v(!1),setTimeout(()=>b(null),5e3)},St=(N,O,F)=>{Rt(oe=>({...oe,[N]:{...oe[N],[O]:F}})),st(!0)},Ve=N=>{const O=parseInt(N.slice(1,3),16),F=parseInt(N.slice(3,5),16),oe=parseInt(N.slice(5,7),16);return`${O}, ${F}, ${oe}`},xt={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},Gt=N=>{const O=document.documentElement;for(const[F,oe]of Object.entries(N)){const Me=xt[F];Me&&(O.style.setProperty(`--node-${Me}-color`,oe.accent),O.style.setProperty(`--node-${Me}-color-rgb`,Ve(oe.accent)),oe.background&&O.style.setProperty(`--node-${Me}-bg`,oe.background))}},ct=()=>{try{const N={};for(const[O,F]of Object.entries($t)){const oe=vt[O],Me={};F.accent!==oe.accent&&(Me.accent=F.accent),F.background!==oe.background&&(Me.background=F.background),Object.keys(Me).length>0&&(N[O]=Me)}Object.keys(N).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(N)):localStorage.removeItem("t2category-overrides"),Gt($t),b("Category colors applied!"),st(!1),setTimeout(()=>b(null),3e3)}catch(N){g("Failed to save category colors: "+N.message)}},Ut=()=>{Rt({...vt}),localStorage.removeItem("t2category-overrides"),Gt(vt),b("Category colors reset to defaults!"),st(!1),setTimeout(()=>b(null),3e3)},hn=(N,O)=>{bt(F=>({...F,[N]:{...F[N],color:O}})),Nn(!0)},kn=(N,O=20)=>{const F=parseInt(N.slice(1),16),oe=Math.max(0,(F>>16)-Math.round(255*O/100)),Me=Math.max(0,(F>>8&255)-Math.round(255*O/100)),Pt=Math.max(0,(F&255)-Math.round(255*O/100));return`#${(1<<24|oe<<16|Me<<8|Pt).toString(16).slice(1)}`},cn=(N,O=20)=>{const F=parseInt(N.slice(1),16),oe=Math.min(255,(F>>16)+Math.round(255*O/100)),Me=Math.min(255,(F>>8&255)+Math.round(255*O/100)),Pt=Math.min(255,(F&255)+Math.round(255*O/100));return`#${(1<<24|oe<<16|Me<<8|Pt).toString(16).slice(1)}`},pn=N=>{const O=document.documentElement;for(const[F,oe]of Object.entries(N)){const Me=Mn[F];Me&&(O.style.setProperty(`--socket-${Me}-color`,oe.color),O.style.setProperty(`--socket-${Me}-dark`,kn(oe.color,15)),O.style.setProperty(`--socket-${Me}-border`,cn(oe.color,20)),O.style.setProperty(`--socket-${Me}-rgb`,Ve(oe.color)))}},$a=()=>{try{const N={};for(const[O,F]of Object.entries(Fe)){const oe=zt[O];F.color!==oe.color&&(N[O]={color:F.color})}Object.keys(N).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(N)):localStorage.removeItem("t2socket-colors"),pn(Fe),b("Socket colors applied!"),Nn(!1),setTimeout(()=>b(null),3e3)}catch(N){g("Failed to save socket colors: "+N.message)}},er=()=>{bt({...zt}),localStorage.removeItem("t2socket-colors"),pn(zt),b("Socket colors reset to defaults!"),Nn(!1),setTimeout(()=>b(null),3e3)},On=N=>{X(O=>({...O,[N]:!O[N]})),N==="Forecast Panel"&&!D[N]&&q.length===0&&K()},kr=N=>{E(O=>({...O,[N]:!O[N]}))},ii=async N=>{B(O=>({...O,[N]:!0})),ne(O=>({...O,[N]:null}));try{const F=await(await fn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:N,settings:r})})).json();ne(oe=>({...oe,[N]:{success:F.success,message:F.message||(F.success?"Connection successful!":"Connection failed"),details:F.details}}))}catch(O){ne(F=>({...F,[N]:{success:!1,message:"Test failed: "+O.message}}))}finally{B(O=>({...O,[N]:!1}))}},si=()=>{const N={version:"1.0",timestamp:new Date().toISOString(),settings:r},O=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),F=URL.createObjectURL(O),oe=document.createElement("a");oe.href=F,oe.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(oe),oe.click(),document.body.removeChild(oe),URL.revokeObjectURL(F),b("Settings exported successfully!"),setTimeout(()=>b(null),3e3)},At=N=>{const O=N.target.files?.[0];if(!O)return;const F=new FileReader;F.onload=oe=>{try{const Me=JSON.parse(oe.target.result);if(!Me.settings||typeof Me.settings!="object")throw new Error("Invalid backup file format");s(Pt=>({...Pt,...Me.settings})),b(`Imported ${Object.keys(Me.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>b(null),5e3)}catch(Me){g("Failed to import backup: "+Me.message)}},F.readAsText(O),N.target.value=""};return a?Dh.createPortal(h.jsx("div",{className:"settings-modal-overlay",onClick:t,children:h.jsxs("div",{className:"settings-modal",onClick:N=>N.stopPropagation(),children:[h.jsxs("div",{className:"settings-header",children:[h.jsx("h2",{children:" Settings & API Keys"}),h.jsx("button",{className:"settings-close-btn",onClick:t,children:""})]}),h.jsx("div",{className:"settings-content",children:l?h.jsx("div",{className:"settings-loading",children:"Loading settings..."}):h.jsxs(h.Fragment,{children:[m&&h.jsx("div",{className:"settings-error",children:m}),w&&h.jsx("div",{className:"settings-success",children:w}),h.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[h.jsxs("span",{children:[D.Security?"":""," Security (This Device)"]}),nt&&h.jsxs("span",{style:{fontSize:"10px",color:De?"#00c896":"#ffaa00"},children:[" ",De?"REMEMBERED":"SESSION"]})]}),D.Security&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:["App PIN",h.jsx("button",{className:"settings-show-btn",onClick:()=>he(N=>!N),type:"button",children:Y?" Hide":" Show"})]}),h.jsx("input",{type:Y?"text":"password",className:"settings-input",value:me,onChange:N=>ze(N.target.value),placeholder:nt?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[h.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[h.jsx("input",{type:"checkbox",checked:De,onChange:N=>{const O=N.target.checked;Je(O);const F=bs();F&&w0(F,{remember:O})}}),"Remember PIN on this device"]}),h.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const N=me.trim();N&&(w0(N,{remember:De}),Qe(!0),ze(""),(async()=>{try{const O=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:N}})});if(!O.ok){const F=await O.text();throw new Error(F||`HTTP ${O.status}`)}b("PIN saved (server + this device)."),setTimeout(()=>b(null),3e3)}catch{b("PIN saved on this device. Server PIN update failed."),setTimeout(()=>b(null),4e3)}finally{C()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!me.trim(),children:" Save PIN"}),h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{Mw(),Qe(!1),ze(""),Je(!1),b("PIN cleared."),setTimeout(()=>b(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!nt,children:"Clear"})]})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:nt?`PIN is saved (${De?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),h.jsxs("div",{className:"settings-backup-section",children:[h.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),h.jsxs("div",{className:"settings-backup-buttons",children:[h.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:si,children:" Export Backup"}),h.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>le.current?.click(),children:" Import Backup"}),h.jsx("input",{ref:le,type:"file",accept:".json",style:{display:"none"},onChange:At})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[h.jsxs("span",{children:[D.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&h.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),D.Performance&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",h.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),h.jsx("br",{}),h.jsx("br",{}),"Performance Mode disables:",h.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),h.jsx("li",{children:"Complex glow shadows"}),h.jsx("li",{children:"Infinite pulse/glow animations"}),h.jsx("li",{children:"Transition effects on nodes"})]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),h.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),h.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[h.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:N=>{window.setPerformanceMode?.(N.target.checked),X(O=>({...O}))},style:{opacity:0,width:0,height:0}}),h.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:h.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),h.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsx("div",{className:"settings-category-header",onClick:()=>On("Discovery"),children:h.jsxs("span",{children:[D.Discovery?"":""," Network Device Discovery"]})}),D.Discovery&&h.jsx("div",{className:"settings-category-content",children:h.jsx(GC,{})})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On("Theme"),children:[h.jsxs("span",{children:[D.Theme?"":""," Node Theme Settings"]}),ee&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.Theme&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(95, 179, 179, 0.08)",borderRadius:"8px",border:"1px solid rgba(95, 179, 179, 0.2)"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginBottom:"8px",display:"block"},children:" Built-in Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(Oo).map(([N,O])=>h.jsxs("button",{onClick:()=>Oe(N),style:{padding:"8px 14px",borderRadius:"6px",border:T===N?`2px solid ${O.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:T===N?`linear-gradient(135deg, ${O.colors.surface}, ${O.colors.background})`:O.colors.surface,color:O.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:T===N?"600":"400",boxShadow:T===N?`0 0 12px ${O.colors.primary}40`:"none"},title:O.description,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:O.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${O.colors.primary}`}}),O.name]},N))}),Object.keys(R).length>0&&h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginTop:"16px",marginBottom:"8px",display:"block"},children:" Your Saved Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(R).map(([N,O])=>h.jsxs("button",{onClick:()=>_e(N),style:{padding:"8px 14px",borderRadius:"6px",border:T===`custom:${N}`?`2px solid ${O.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:T===`custom:${N}`?`linear-gradient(135deg, ${O.colors.surface}, ${O.colors.background})`:O.colors.surface,color:O.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:T===`custom:${N}`?"600":"400",boxShadow:T===`custom:${N}`?`0 0 12px ${O.colors.primary}40`:"none",position:"relative",paddingRight:"28px"},title:`Custom theme: ${O.name}`,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:O.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${O.colors.primary}`}}),O.name,h.jsx("span",{onClick:F=>Ge(N,F),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",opacity:.6,cursor:"pointer"},title:"Delete this theme",children:""})]},N))})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"10px",color:"#8a959e",fontStyle:"italic"},children:T.startsWith("custom:")&&R[T.replace("custom:","")]?`Custom theme: ${R[T.replace("custom:","")].name}`:T!=="custom"&&Oo[T]?Oo[T].description:"Custom theme - you've modified individual colors"})]}),h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Click a preset to apply instantly, or customize individual colors below."}),Object.entries(Rw).map(([N,O])=>h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:ge.primary||"#5fb3b3",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:O.icon}),h.jsx("span",{children:N})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"},children:O.settings.map(F=>h.jsxs("div",{className:"settings-field",style:{marginBottom:"4px"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"9px",marginBottom:"4px"},children:F.label}),F.type==="color"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"color",value:ge[F.key]||F.default,onChange:oe=>ve(F.key,oe.target.value),style:{width:"32px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("input",{type:"text",value:ge[F.key]||F.default,onChange:oe=>ve(F.key,oe.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"9px",padding:"4px"}})]}):F.type==="range"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"range",min:F.min,max:F.max,value:ge[F.key]??F.default,onChange:oe=>ve(F.key,parseInt(oe.target.value)),style:{flex:1}}),h.jsxs("span",{style:{minWidth:"28px",textAlign:"right",color:"#c5cdd3",fontSize:"10px"},children:[ge[F.key]??F.default,"%"]})]}):null]},F.key))})]},N)),h.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:ge.background||"#1e2428",borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(ge.borderOpacity||25)/100})`},children:[h.jsx("div",{style:{fontSize:"10px",color:ge.textMuted||"#8a959e",marginBottom:"8px"},children:"PREVIEW"}),h.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[h.jsx("div",{style:{padding:"8px 12px",background:ge.surface,color:ge.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),h.jsx("div",{style:{padding:"8px 12px",background:ge.surfaceLight,color:ge.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),h.jsx("span",{style:{color:ge.primary},children:"Primary"}),h.jsx("span",{style:{color:ge.success},children:"Success"}),h.jsx("span",{style:{color:ge.warning},children:"Warning"}),h.jsx("span",{style:{color:ge.error},children:"Error"})]})]}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:Ee,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:()=>Se(!0),style:{background:"rgba(95, 140, 220, 0.15)",borderColor:"rgba(95, 140, 220, 0.5)",color:"#5f8adc"},title:"Save current colors as a named custom theme",children:" Save as Custom Theme"}),h.jsx("button",{className:"settings-btn-small",onClick:Xe,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Apply Changes"})]}),de&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:h.jsxs("div",{style:{background:"var(--theme-surface, #2a3238)",padding:"24px",borderRadius:"12px",border:"1px solid rgba(95, 179, 179, 0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",minWidth:"300px"},children:[h.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--theme-text, #c5cdd3)",fontSize:"16px"},children:" Save Custom Theme"}),h.jsx("p",{style:{margin:"0 0 16px 0",color:"var(--theme-textMuted, #8a959e)",fontSize:"12px"},children:"Give your theme a name to save it for later use."}),h.jsx("input",{type:"text",value:$e,onChange:N=>Pe(N.target.value),placeholder:"My Awesome Theme",style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.3)",background:"var(--theme-background, #1e2428)",color:"var(--theme-text, #c5cdd3)",fontSize:"14px",marginBottom:"16px",boxSizing:"border-box"},autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&et(),N.key==="Escape"&&(Se(!1),Pe(""))}}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[h.jsx("button",{onClick:()=>{Se(!1),Pe("")},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"var(--theme-text, #c5cdd3)",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),h.jsx("button",{onClick:et,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.5)",background:"rgba(95, 179, 179, 0.2)",color:"#5fb3b3",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:" Save Theme"})]})]})})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On("CategoryColors"),children:[h.jsxs("span",{children:[D.CategoryColors?"":""," Category Accent Colors"]}),ln&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.CategoryColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries($t).map(([N,O])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:O.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${O.accent}55`},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:O.accent,onChange:F=>St(N,"accent",F.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:O.background||"#0a0f14",onChange:F=>St(N,"background",F.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),h.jsx("div",{style:{flex:1,minWidth:0},children:h.jsxs("div",{style:{fontSize:"11px",color:O.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[O.icon," ",N]})})]},N))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:Ut,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:ct,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On("SocketColors"),children:[h.jsxs("span",{children:[D.SocketColors?"":""," Socket Colors"]}),nn&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.SocketColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),h.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[h.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:""})," Preview Node"]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(Fe).slice(0,3).map(([N,O])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${O.color}, ${x0(O.color)})`,border:`2px solid ${k0(O.color)}`,boxShadow:`0 0 8px ${O.color}80`}}),h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:N})]},N))}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(Fe).slice(3).map(([N,O])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:N}),h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${O.color}, ${x0(O.color)})`,border:`2px solid ${k0(O.color)}`,boxShadow:`0 0 8px ${O.color}80`}})]},N))})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Fe).map(([N,O])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${O.color}55`},children:[h.jsx("input",{type:"color",value:O.color,onChange:F=>hn(N,F.target.value),title:`${N} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsxs("div",{style:{fontSize:"12px",color:O.color,fontWeight:"600"},children:[O.icon," ",N]}),h.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:O.description})]})]},N))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:er,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:$a,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),qC.map(N=>h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>On(N.category),children:[h.jsxs("span",{children:[D[N.category]?"":"",N.icon," ",N.category]}),N.testable&&D[N.category]&&h.jsx("button",{className:`settings-test-btn ${H[N.testable]?.success?"success":H[N.testable]?.success===!1?"error":""}`,onClick:O=>{O.stopPropagation(),ii(N.testable)},disabled:J[N.testable],children:J[N.testable]?" Testing...":" Test Connection"})]}),D[N.category]&&h.jsxs("div",{className:"settings-category-content",children:[H[N.testable]&&h.jsxs("div",{className:`settings-test-result ${H[N.testable].success?"success":"error"}`,children:[H[N.testable].success?"":""," ",H[N.testable].message,H[N.testable].details&&h.jsx("div",{className:"settings-test-details",children:H[N.testable].details})]}),N.category==="Location"&&h.jsxs("div",{className:"settings-location-search",children:[P&&te&&h.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),h.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:O=>ue("LOCATION_CITY",O.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:O=>{O.key==="Enter"&&se()}}),h.jsx("button",{className:"settings-test-btn",onClick:se,disabled:Zn,style:{whiteSpace:"nowrap"},children:Zn?" Searching...":" Search City"})]}),Na&&h.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",Na]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Latitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:O=>ue("LOCATION_LATITUDE",O.target.value),placeholder:"32.7767"})]}),h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Longitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:O=>ue("LOCATION_LONGITUDE",O.target.value),placeholder:"-96.7970"})]})]}),h.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[h.jsx("label",{className:"settings-label",children:"Timezone"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:O=>ue("LOCATION_TIMEZONE",O.target.value),placeholder:"America/Chicago"}),h.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),N.category!=="Location"&&N.settings.map(O=>h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:[O.label,O.isSecret&&h.jsx("button",{className:"settings-show-btn",onClick:()=>kr(O.key),type:"button",children:k[O.key]?" Hide":" Show"})]}),O.type==="select"?h.jsxs("select",{className:"settings-input",value:r[O.key]||"",onChange:F=>ue(O.key,F.target.value),children:[h.jsx("option",{value:"",children:"Select..."}),O.options.map(F=>h.jsx("option",{value:F,children:F},F))]}):O.type==="sensor-select"?h.jsxs("select",{className:"settings-input",value:r[O.key]||"",onChange:F=>ue(O.key,F.target.value),disabled:ke,children:[h.jsx("option",{value:"",children:ke?"Loading sensors...":"None (disabled)"}),q.map(F=>h.jsx("option",{value:F.id,children:F.name},F.id))]}):h.jsx("input",{type:O.isSecret&&!k[O.key]?"password":"text",className:"settings-input",value:r[O.key]||"",onChange:F=>ue(O.key,F.target.value),placeholder:O.placeholder}),h.jsx("span",{className:"settings-key-hint",children:O.key})]},O.key))]})]},N.category))]})}),h.jsxs("div",{className:"settings-footer",children:[h.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:t,children:"Cancel"}),h.jsx("button",{className:"settings-btn settings-btn-primary",onClick:G,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const PC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function FC({isOpen:a,onClose:t}){if(x.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,t]),!a)return null;const r=s=>{s.target===s.currentTarget&&t()};return Dh.createPortal(h.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:h.jsxs("div",{className:"shortcuts-modal",children:[h.jsxs("div",{className:"shortcuts-modal-header",children:[h.jsx("h2",{children:" Keyboard Shortcuts"}),h.jsx("button",{className:"shortcuts-close-btn",onClick:t,children:" Close"})]}),h.jsx("div",{className:"shortcuts-modal-body",children:PC.map((s,l)=>h.jsxs("div",{className:"shortcuts-section",children:[h.jsx("h3",{children:s.category}),h.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>h.jsxs("div",{className:"shortcut-row",children:[h.jsx("div",{className:"shortcut-keys",children:c.keys.map((p,m)=>h.jsxs(Ea.Fragment,{children:[h.jsx("kbd",{children:p}),m<c.keys.length-1&&h.jsx("span",{className:"key-separator",children:"+"})]},m))}),h.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),h.jsx("div",{className:"shortcuts-modal-footer",children:h.jsxs("p",{children:["Press ",h.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function ZC({isExpanded:a,onToggle:t}){const[r,s]=x.useState([]),[l,c]=x.useState([]),[d,p]=x.useState(!0),[m,g]=x.useState(!1),[w,b]=x.useState(null),[k,E]=x.useState(!1),[D,X]=x.useState(null),[H,ne]=x.useState(null),[J,B]=x.useState({username:"",password:"",name:""}),[q,ye]=x.useState({username:"",password:""}),[ke,I]=x.useState(""),[pe,le]=x.useState(5e3),[me,ze]=x.useState(null),De=x.useRef(null),[Je,nt]=x.useState({});x.useEffect(()=>(Qe(),()=>{De.current&&clearInterval(De.current)}),[]),x.useEffect(()=>(De.current&&clearInterval(De.current),a&&r.length>0&&pe>0&&(De.current=setInterval(()=>{nt(A=>{const R={...A};return r.forEach(ae=>{R[ae.ip]=Date.now()}),R})},pe)),()=>{De.current&&clearInterval(De.current)}),[a,r,pe]);const Qe=async()=>{try{p(!0);const A=await gs("/api/cameras");if(A.ok){const R=await A.json();s(R.cameras||[]),R.defaultCredentials&&ye(ae=>({...ae,username:R.defaultCredentials.username||""}))}}catch{b("Failed to load cameras")}finally{p(!1)}},Y=async()=>{g(!0),b(null);try{const A=await gs("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(A.ok){const R=await A.json();if(R.found&&R.found.length>0){const ae=r.map(Se=>Se.ip),de=R.found.filter(Se=>!ae.includes(Se.ip));c(de),window.T2Toast&&(de.length>0?window.T2Toast.success(`Found ${de.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${R.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{b("Discovery failed")}finally{g(!1)}},he=async()=>{try{await gs("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{b("Failed to save credentials")}},ge=async(A,R,ae)=>{try{await gs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:A,name:R||`Camera ${A.split(".").pop()}`,username:ae?.username||q.username,password:ae?.password||q.password})}),c(de=>de.filter(Se=>Se.ip!==A)),X(null),I(""),await Qe(),window.T2Toast&&window.T2Toast.success(`Camera ${A} added!`)}catch{b("Failed to add camera")}},Le=async A=>{try{await fetch(`/api/cameras/${A}`,{method:"DELETE"}),await Qe(),me===A&&ze(null)}catch{b("Failed to remove camera")}},ee=async()=>{if(H)try{await gs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:H,name:J.name,username:J.username,password:J.password})}),ne(null),nt(A=>({...A,[H]:Date.now()})),await Qe(),window.T2Toast&&window.T2Toast.success(`Camera ${H} updated!`)}catch{b("Failed to update camera")}},v={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},T=A=>{const R=Je[A]||Date.now();return`/api/cameras/snapshot/${A}?t=${R}`};return h.jsxs("div",{style:v.container,children:[h.jsxs("div",{style:v.header,onClick:t,children:[h.jsxs("div",{style:v.title,children:[h.jsx("span",{style:v.icon,children:""}),h.jsx("span",{children:"Cameras"}),r.length>0&&h.jsx("span",{style:v.badge,children:r.length})]}),h.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&h.jsxs("div",{style:v.content,children:[h.jsxs("div",{style:v.toolbar,children:[h.jsx("button",{style:{...v.btn,...m?v.btnActive:{}},onClick:Y,disabled:m,children:m?" Scanning...":" Discover"}),h.jsx("button",{style:{...v.btn,...k?v.btnActive:{}},onClick:()=>E(!k),children:" Settings"}),h.jsxs("select",{style:v.refreshSelect,value:pe,onChange:A=>le(Number(A.target.value)),title:"Refresh interval",children:[h.jsx("option",{value:0,children:"Manual"}),h.jsx("option",{value:2e3,children:"2s"}),h.jsx("option",{value:5e3,children:"5s"}),h.jsx("option",{value:1e4,children:"10s"}),h.jsx("option",{value:3e4,children:"30s"})]})]}),k&&h.jsxs("div",{style:v.settings,children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Select Camera to Configure"}),h.jsxs("select",{style:{...v.input,cursor:"pointer"},value:H||"",onChange:A=>{const R=A.target.value;if(!R){ne(null),B({username:"",password:"",name:""});return}const ae=r.find(de=>de.ip===R);ae?(ne(R),B({name:ae.name||"",username:ae.username||"",password:""})):(ne(R),B({name:`Camera ${R.split(".").pop()}`,username:q.username||"",password:q.password||""}))},children:[h.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&h.jsx("optgroup",{label:" Configured Cameras",children:r.map(A=>h.jsxs("option",{value:A.ip,children:[A.name," (",A.ip,")"]},A.ip))}),l.length>0&&h.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(A=>h.jsxs("option",{value:A.ip,children:[A.ip," (Ports: ",A.ports.join(", "),")"]},A.ip))})]})]}),H&&h.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Camera Name"}),h.jsx("input",{type:"text",style:v.input,value:J.name,onChange:A=>B(R=>({...R,name:A.target.value})),placeholder:"Front Door"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Username"}),h.jsx("input",{type:"text",style:v.input,value:J.username,onChange:A=>B(R=>({...R,username:A.target.value})),placeholder:"admin"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsxs("label",{style:v.label,children:["Password ",r.find(A=>A.ip===H)?"(leave blank to keep current)":""]}),h.jsx("input",{type:"password",style:v.input,value:J.password,onChange:A=>B(R=>({...R,password:A.target.value})),placeholder:""})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:h.jsx("button",{style:{...v.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(R=>R.ip===H)?ge(H,J.name,J):ee()},children:r.find(A=>A.ip===H)?" Save Changes":" Add Camera"})})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",style:{...v.input,flex:1},value:q.username,onChange:A=>ye(R=>({...R,username:A.target.value})),placeholder:"Username"}),h.jsx("input",{type:"password",style:{...v.input,flex:1},value:q.password,onChange:A=>ye(R=>({...R,password:A.target.value})),placeholder:"Password"}),h.jsx("button",{style:v.btn,onClick:he,title:"Save as default",children:""})]})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",id:"addCameraIp",style:{...v.input,flex:1},placeholder:"192.168.1.100",onKeyDown:A=>{if(A.key==="Enter"&&A.target.value){const R=A.target.value;!l.find(ae=>ae.ip===R)&&!r.find(ae=>ae.ip===R)&&c(ae=>[...ae,{ip:R,ports:["manual"]}]),ne(R),B({name:`Camera ${R.split(".").pop()}`,username:q.username||"",password:q.password||""}),A.target.value=""}}}),h.jsx("button",{style:v.btn,onClick:()=>{const A=document.getElementById("addCameraIp"),R=A?.value;R&&(!l.find(ae=>ae.ip===R)&&!r.find(ae=>ae.ip===R)&&c(ae=>[...ae,{ip:R,ports:["manual"]}]),ne(R),B({name:`Camera ${R.split(".").pop()}`,username:q.username||"",password:q.password||""}),A.value="")},children:"Configure"})]})]})]}),w&&h.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",w]}),d?h.jsx("div",{style:v.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?h.jsxs("div",{style:v.emptyState,children:[h.jsx("p",{children:"No cameras configured"}),h.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):h.jsx("div",{style:v.grid,children:r.map(A=>h.jsxs("div",{style:{...v.cameraCard,...me===A.ip?v.cameraCardSelected:{}},onClick:()=>ze(A.ip),children:[h.jsx("img",{src:T(A.ip),alt:A.name,style:v.cameraImage,onError:R=>{R.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),h.jsxs("div",{style:v.cameraInfo,children:[h.jsx("span",{style:v.cameraName,title:A.ip,children:A.name}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{style:{...v.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:R=>{R.stopPropagation(),E(!0),ne(A.ip),B({name:A.name||"",username:A.username||"",password:""})},title:"Edit credentials",children:""}),h.jsx("button",{style:v.deleteBtn,onClick:R=>{R.stopPropagation(),Le(A.ip)},title:"Remove camera",children:""})]})]})]},A.ip))})]}),me&&h.jsxs("div",{style:v.fullView,onClick:()=>ze(null),children:[h.jsx("img",{src:T(me),alt:"Camera feed",style:v.fullImage}),h.jsx("button",{style:v.closeBtn,onClick:()=>ze(null),children:" Close"}),h.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(A=>A.ip===me)?.name||me})]})]})}const Rf="http://localhost:5050";function XC({isExpanded:a,onToggle:t}){const[r,s]=x.useState({running:!1,checking:!0}),[l,c]=x.useState(!1),[d,p]=x.useState(null),m=x.useCallback(async()=>{try{const b=await fetch(`${Rf}/chatterbox/status`,{method:"GET",signal:AbortSignal.timeout(3e3)});if(b.ok){const k=await b.json();p(!0),s({running:k.running,checking:!1,managed:k.processManaged})}else p(!1),s({running:!1,checking:!1})}catch{p(!1),s({running:!1,checking:!1})}},[]);x.useEffect(()=>{m();const b=setInterval(m,1e4);return()=>clearInterval(b)},[m]);const g=async()=>{c(!0);try{(await fetch(`${Rf}/chatterbox/start`,{method:"POST",signal:AbortSignal.timeout(5e3)})).ok&&setTimeout(m,5e3)}catch(b){console.error("Failed to start Chatterbox:",b)}finally{c(!1)}},w=async()=>{c(!0);try{(await fetch(`${Rf}/chatterbox/stop`,{method:"POST",signal:AbortSignal.timeout(3e3)})).ok&&setTimeout(m,1e3)}catch(b){console.error("Failed to stop Chatterbox:",b)}finally{c(!1)}};return d===!1?h.jsxs("div",{className:"dock-section chatterbox-panel",children:[h.jsxs("div",{className:"dock-section-header dock-section-header-collapsible",onClick:t,title:"Click to expand/collapse",children:[h.jsx("span",{children:" Chatterbox TTS"}),h.jsx("span",{className:"dock-section-toggle",children:a?"":""})]}),a&&h.jsxs("div",{className:"dock-section-content chatterbox-content",children:[h.jsxs("div",{className:"chatterbox-status stopped",children:[h.jsx("span",{className:"status-dot stopped"}),"Agent not running"]}),h.jsx("div",{className:"chatterbox-hint",children:"To control Chatterbox from T2, download and run the Local Agent on your desktop:"}),h.jsxs("div",{className:"chatterbox-actions",children:[h.jsx("a",{href:"/api/agent/download/t2_agent.py",className:"dock-btn",download:!0,children:" t2_agent.py"}),h.jsx("a",{href:"/api/agent/download/start_agent.bat",className:"dock-btn",download:!0,children:" .bat"})]})]})]}):h.jsxs("div",{className:"dock-section chatterbox-panel",children:[h.jsxs("div",{className:"dock-section-header dock-section-header-collapsible",onClick:t,title:"Click to expand/collapse",children:[h.jsx("span",{children:" Chatterbox TTS"}),h.jsx("span",{className:"dock-section-toggle",children:a?"":""})]}),a&&h.jsx("div",{className:"dock-section-content chatterbox-content",children:r.checking?h.jsxs("div",{className:"chatterbox-status checking",children:[h.jsx("span",{className:"status-dot checking"}),"Checking..."]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:`chatterbox-status ${r.running?"running":"stopped"}`,children:[h.jsx("span",{className:`status-dot ${r.running?"running":"stopped"}`}),r.running?"Running on :8100":"Stopped"]}),h.jsx("div",{className:"chatterbox-actions",children:r.running?h.jsxs("button",{className:"dock-btn dock-btn-stop",onClick:w,disabled:l,children:[l?"":""," Stop"]}):h.jsxs("button",{className:"dock-btn dock-btn-start",onClick:g,disabled:l,children:[l?"":""," Start"]})}),r.managed&&h.jsx("div",{className:"chatterbox-note",children:"Started by agent"})]})})]})}const Qa=Object.create(null);Qa.open="0";Qa.close="1";Qa.ping="2";Qa.pong="3";Qa.message="4";Qa.upgrade="5";Qa.noop="6";const Ec=Object.create(null);Object.keys(Qa).forEach(a=>{Ec[Qa[a]]=a});const fh={type:"error",data:"parser error"},zw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Lw=typeof ArrayBuffer=="function",Bw=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Xh=({type:a,data:t},r,s)=>zw&&t instanceof Blob?r?s(t):E0(t,s):Lw&&(t instanceof ArrayBuffer||Bw(t))?r?s(t):E0(new Blob([t]),s):s(Qa[a]+(t||"")),E0=(a,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(a)};function C0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let zf;function KC(a,t){if(zw&&a.data instanceof Blob)return a.data.arrayBuffer().then(C0).then(t);if(Lw&&(a.data instanceof ArrayBuffer||Bw(a.data)))return t(C0(a.data));Xh(a,!1,r=>{zf||(zf=new TextEncoder),t(zf.encode(r))})}const T0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Do=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<T0.length;a++)Do[T0.charCodeAt(a)]=a;const QC=a=>{let t=a.length*.75,r=a.length,s,l=0,c,d,p,m;a[a.length-1]==="="&&(t--,a[a.length-2]==="="&&t--);const g=new ArrayBuffer(t),w=new Uint8Array(g);for(s=0;s<r;s+=4)c=Do[a.charCodeAt(s)],d=Do[a.charCodeAt(s+1)],p=Do[a.charCodeAt(s+2)],m=Do[a.charCodeAt(s+3)],w[l++]=c<<2|d>>4,w[l++]=(d&15)<<4|p>>2,w[l++]=(p&3)<<6|m&63;return g},WC=typeof ArrayBuffer=="function",Kh=(a,t)=>{if(typeof a!="string")return{type:"message",data:Iw(a,t)};const r=a.charAt(0);return r==="b"?{type:"message",data:JC(a.substring(1),t)}:Ec[r]?a.length>1?{type:Ec[r],data:a.substring(1)}:{type:Ec[r]}:fh},JC=(a,t)=>{if(WC){const r=QC(a);return Iw(r,t)}else return{base64:!0,data:a}},Iw=(a,t)=>{switch(t){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},$w="",eT=(a,t)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Xh(c,!1,p=>{s[d]=p,++l===r&&t(s.join($w))})})},tT=(a,t)=>{const r=a.split($w),s=[];for(let l=0;l<r.length;l++){const c=Kh(r[l],t);if(s.push(c),c.type==="error")break}return s};function nT(){return new TransformStream({transform(a,t){KC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(r)})}})}let Lf;function hc(a){return a.reduce((t,r)=>t+r.length,0)}function pc(a,t){if(a[0].length===t)return a.shift();const r=new Uint8Array(t);let s=0;for(let l=0;l<t;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function aT(a,t){Lf||(Lf=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,p){for(r.push(d);;){if(s===0){if(hc(r)<1)break;const m=pc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(hc(r)<2)break;const m=pc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(hc(r)<8)break;const m=pc(r,8),g=new DataView(m.buffer,m.byteOffset,m.length),w=g.getUint32(0);if(w>Math.pow(2,21)-1){p.enqueue(fh);break}l=w*Math.pow(2,32)+g.getUint32(4),s=3}else{if(hc(r)<l)break;const m=pc(r,l);p.enqueue(Kh(c?m:Lf.decode(m),t)),s=0}if(l===0||l>a){p.enqueue(fh);break}}}})}const Uw=4;function xn(a){if(a)return rT(a)}function rT(a){for(var t in xn.prototype)a[t]=xn.prototype[t];return a}xn.prototype.on=xn.prototype.addEventListener=function(a,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(t),this};xn.prototype.once=function(a,t){function r(){this.off(a,r),t.apply(this,arguments)}return r.fn=t,this.on(a,r),this};xn.prototype.off=xn.prototype.removeListener=xn.prototype.removeAllListeners=xn.prototype.removeEventListener=function(a,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===t||s.fn===t){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};xn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,t)}return this};xn.prototype.emitReserved=xn.prototype.emit;xn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};xn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Zc=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Sa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),iT="arraybuffer";function Hw(a,...t){return t.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const sT=Sa.setTimeout,oT=Sa.clearTimeout;function Xc(a,t){t.useNativeTimers?(a.setTimeoutFn=sT.bind(Sa),a.clearTimeoutFn=oT.bind(Sa)):(a.setTimeoutFn=Sa.setTimeout.bind(Sa),a.clearTimeoutFn=Sa.clearTimeout.bind(Sa))}const lT=1.33;function cT(a){return typeof a=="string"?uT(a):Math.ceil((a.byteLength||a.size)*lT)}function uT(a){let t=0,r=0;for(let s=0,l=a.length;s<l;s++)t=a.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Vw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function dT(a){let t="";for(let r in a)a.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return t}function fT(a){let t={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}class hT extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class Qh extends xn{constructor(t){super(),this.writable=!1,Xc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new hT(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Kh(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=dT(t);return r.length?"?"+r:""}}class pT extends Qh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};tT(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,eT(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Vw()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Gw=!1;try{Gw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const mT=Gw;function gT(){}class yT extends pT{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class Ka extends xn{constructor(t,r,s){super(),this.createRequest=t,Xc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=Hw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Ka.requestsCount++,Ka.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=gT,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ka.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ka.requestsCount=0;Ka.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",N0);else if(typeof addEventListener=="function"){const a="onpagehide"in Sa?"pagehide":"unload";addEventListener(a,N0,!1)}}function N0(){for(let a in Ka.requests)Ka.requests.hasOwnProperty(a)&&Ka.requests[a].abort()}const vT=(function(){const a=qw({xdomain:!1});return a&&a.responseType!==null})();class bT extends yT{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=vT&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ka(qw,this.uri(),t)}}function qw(a){const t=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||mT))return new XMLHttpRequest}catch{}if(!t)try{return new Sa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Yw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class wT extends Qh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=Yw?{}:Hw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;Xh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Zc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Vw()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Bf=Sa.WebSocket||Sa.MozWebSocket;class ST extends wT{createSocket(t,r,s){return Yw?new Bf(t,r,s):r?new Bf(t,r):new Bf(t)}doWrite(t,r){this.ws.send(r)}}class xT extends Qh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=aT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),l=nT();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:p,value:m})=>{p||(this.onPacket(m),c())}).catch(p=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;this._writer.write(s).then(()=>{l&&Zc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const kT={websocket:ST,webtransport:xT,polling:bT},ET=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,CT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function hh(a){if(a.length>8e3)throw"URI too long";const t=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=ET.exec(a||""),c={},d=14;for(;d--;)c[CT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=TT(c,c.path),c.queryKey=NT(c,c.query),c}function TT(a,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function NT(a,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const ph=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cc=[];ph&&addEventListener("offline",()=>{Cc.forEach(a=>a())},!1);class ei extends xn{constructor(t,r){if(super(),this.binaryType=iT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=hh(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=hh(r.host).host);Xc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=fT(this.opts.query)),ph&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Uw,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ei.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ei.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=cT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Zc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:t,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(ei.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ph&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Cc.indexOf(this._offlineEventListener);s!==-1&&Cc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}ei.protocol=Uw;class OT extends ei{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;ei.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",b=>{if(!s)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ei.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(w(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=r.name,this.emitReserved("upgradeError",k)}}))};function c(){s||(s=!0,w(),r.close(),r=null)}const d=b=>{const k=new Error("probe error: "+b);k.transport=r.name,c(),this.emitReserved("upgradeError",k)};function p(){d("transport closed")}function m(){d("socket closed")}function g(b){r&&b.name!==r.name&&c()}const w=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",p),this.off("close",m),this.off("upgrading",g)};r.once("open",l),r.once("error",d),r.once("close",p),this.once("close",m),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let jT=class extends OT{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>kT[l]).filter(l=>!!l)),super(t,s)}};function AT(a,t="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=hh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const _T=typeof ArrayBuffer=="function",DT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,Pw=Object.prototype.toString,MT=typeof Blob=="function"||typeof Blob<"u"&&Pw.call(Blob)==="[object BlobConstructor]",RT=typeof File=="function"||typeof File<"u"&&Pw.call(File)==="[object FileConstructor]";function Wh(a){return _T&&(a instanceof ArrayBuffer||DT(a))||MT&&a instanceof Blob||RT&&a instanceof File}function Tc(a,t){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(Tc(a[r]))return!0;return!1}if(Wh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return Tc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&Tc(a[r]))return!0;return!1}function zT(a){const t=[],r=a.data,s=a;return s.data=mh(r,t),s.attachments=t.length,{packet:s,buffers:t}}function mh(a,t){if(!a)return a;if(Wh(a)){const r={_placeholder:!0,num:t.length};return t.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=mh(a[s],t);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=mh(a[s],t));return r}return a}function LT(a,t){return a.data=gh(a.data,t),delete a.attachments,a}function gh(a,t){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<t.length)return t[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=gh(a[r],t);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=gh(a[r],t));return a}const BT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],IT=5;var yt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(yt||(yt={}));class $T{constructor(t){this.replacer=t}encode(t){return(t.type===yt.EVENT||t.type===yt.ACK)&&Tc(t)?this.encodeAsBinary({type:t.type===yt.EVENT?yt.BINARY_EVENT:yt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===yt.BINARY_EVENT||t.type===yt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=zT(t),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function O0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Jh extends xn{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===yt.BINARY_EVENT;s||r.type===yt.BINARY_ACK?(r.type=s?yt.EVENT:yt.ACK,this.reconstructor=new UT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Wh(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(yt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===yt.BINARY_EVENT||s.type===yt.BINARY_ACK){const c=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(c,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(t.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(c,r)}else s.nsp="/";const l=t.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}s.id=Number(t.substring(c,r+1))}if(t.charAt(++r)){const c=this.tryParse(t.substr(r));if(Jh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case yt.CONNECT:return O0(r);case yt.DISCONNECT:return r===void 0;case yt.CONNECT_ERROR:return typeof r=="string"||O0(r);case yt.EVENT:case yt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&BT.indexOf(r[0])===-1);case yt.ACK:case yt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class UT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=LT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const HT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Jh,Encoder:$T,get PacketType(){return yt},protocol:IT},Symbol.toStringTag,{value:"Module"}));function za(a,t,r){return a.on(t,r),function(){a.off(t,r)}}const VT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Fw extends xn{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[za(t,"open",this.onopen.bind(this)),za(t,"packet",this.onpacket.bind(this)),za(t,"error",this.onerror.bind(this)),za(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,l,c;if(VT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:yt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const w=this.ids++,b=r.pop();this._registerAckCallback(w,b),d.id=w}const p=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[t]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},l),d=(...p)=>{this.io.clearTimeoutFn(c),r.apply(this,p)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((s,l)=>{const c=(d,p)=>d?l(d):s(p);c.withError=!0,r.push(c),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:yt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case yt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case yt.EVENT:case yt.BINARY_EVENT:this.onevent(t);break;case yt.ACK:case yt.BINARY_ACK:this.onack(t);break;case yt.DISCONNECT:this.ondisconnect();break;case yt.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:yt.ACK,id:t,data:l}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:yt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function _s(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}_s.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*a);a=(Math.floor(t*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};_s.prototype.reset=function(){this.attempts=0};_s.prototype.setMin=function(a){this.ms=a};_s.prototype.setMax=function(a){this.max=a};_s.prototype.setJitter=function(a){this.jitter=a};class yh extends xn{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Xc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new _s({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const l=r.parser||HT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new jT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=za(r,"open",function(){s.onopen(),t&&t()}),c=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},d=za(r,"error",c);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(za(t,"ping",this.onping.bind(this)),za(t,"data",this.ondata.bind(this)),za(t,"error",this.onerror.bind(this)),za(t,"close",this.onclose.bind(this)),za(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Zc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Fw(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const jo={};function Nc(a,t){typeof a=="object"&&(t=a,a=void 0),t=t||{};const r=AT(a,t.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=jo[l]&&c in jo[l].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let m;return p?m=new yh(s,t):(jo[l]||(jo[l]=new yh(s,t)),m=jo[l]),r.query&&!t.query&&(t.query=r.queryKey),m.socket(r.path,t)}Object.assign(Nc,{Manager:yh,Socket:Fw,io:Nc,connect:Nc});const GT=typeof window<"u"?window.location.origin:"http://localhost:3000",j0=Fc(),qT=j0?`${j0}/socket.io`:"/socket.io",be=Nc(GT,{path:qT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]});be.on("connect",()=>{console.log("[Socket] Connected - sending editor-active"),be.emit("editor-active")});const YT=()=>{be.connected||be.connect()},PT=()=>{be.connected&&be.disconnect()};class FT{constructor(){this.nodes=new Map}register(t,r){typeof t=="object"&&r===void 0&&(r=t,t=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(t,r)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values()).filter(t=>t)}getByLabel(t){for(const r of this.nodes.values())if(r.label===t)return r;return null}getByInstance(t){for(const r of this.nodes.values())if(r.nodeClass&&t instanceof r.nodeClass)return r;return null}}const _n=new FT;class Di extends Error{}class ZT extends Di{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class XT extends Di{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class KT extends Di{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class vs extends Di{}class Zw extends Di{constructor(t){super(`Invalid unit ${t}`)}}class Vn extends Di{}class Zr extends Di{constructor(){super("Zone is an abstract class")}}const Ae="numeric",Ia="short",da="long",Bc={year:Ae,month:Ae,day:Ae},Xw={year:Ae,month:Ia,day:Ae},QT={year:Ae,month:Ia,day:Ae,weekday:Ia},Kw={year:Ae,month:da,day:Ae},Qw={year:Ae,month:da,day:Ae,weekday:da},Ww={hour:Ae,minute:Ae},Jw={hour:Ae,minute:Ae,second:Ae},e1={hour:Ae,minute:Ae,second:Ae,timeZoneName:Ia},t1={hour:Ae,minute:Ae,second:Ae,timeZoneName:da},n1={hour:Ae,minute:Ae,hourCycle:"h23"},a1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23"},r1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:Ia},i1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:da},s1={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae},o1={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae,second:Ae},l1={year:Ae,month:Ia,day:Ae,hour:Ae,minute:Ae},c1={year:Ae,month:Ia,day:Ae,hour:Ae,minute:Ae,second:Ae},WT={year:Ae,month:Ia,day:Ae,weekday:Ia,hour:Ae,minute:Ae},u1={year:Ae,month:da,day:Ae,hour:Ae,minute:Ae,timeZoneName:Ia},d1={year:Ae,month:da,day:Ae,hour:Ae,minute:Ae,second:Ae,timeZoneName:Ia},f1={year:Ae,month:da,day:Ae,weekday:da,hour:Ae,minute:Ae,timeZoneName:da},h1={year:Ae,month:da,day:Ae,weekday:da,hour:Ae,minute:Ae,second:Ae,timeZoneName:da};class Ds{get type(){throw new Zr}get name(){throw new Zr}get ianaName(){return this.name}get isUniversal(){throw new Zr}offsetName(t,r){throw new Zr}formatOffset(t,r){throw new Zr}offset(t){throw new Zr}equals(t){throw new Zr}get isValid(){throw new Zr}}let If=null;class Fo extends Ds{static get instance(){return If===null&&(If=new Fo),If}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return C1(t,r,s)}formatOffset(t,r){return Uo(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const vh=new Map;function JT(a){let t=vh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),vh.set(a,t)),t}const eN={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tN(a,t){const r=a.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,p,m,g,w]=s;return[d,l,c,p,m,g,w]}function nN(a,t){const r=a.formatToParts(t),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],p=eN[c];c==="era"?s[p]=d:Ze(p)||(s[p]=parseInt(d,10))}return s}const $f=new Map;class Wa extends Ds{static create(t){let r=$f.get(t);return r===void 0&&$f.set(t,r=new Wa(t)),r}static resetCache(){$f.clear(),vh.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Wa.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return C1(t,r,s,this.name)}formatOffset(t,r){return Uo(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const s=JT(this.name);let[l,c,d,p,m,g,w]=s.formatToParts?nN(s,r):tN(s,r);p==="BC"&&(l=-Math.abs(l)+1);const k=Qc({year:l,month:c,day:d,hour:m===24?0:m,minute:g,second:w,millisecond:0});let E=+r;const D=E%1e3;return E-=D>=0?D:1e3+D,(k-E)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let A0={};function aN(a,t={}){const r=JSON.stringify([a,t]);let s=A0[r];return s||(s=new Intl.ListFormat(a,t),A0[r]=s),s}const bh=new Map;function wh(a,t={}){const r=JSON.stringify([a,t]);let s=bh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,t),bh.set(r,s)),s}const Sh=new Map;function rN(a,t={}){const r=JSON.stringify([a,t]);let s=Sh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,t),Sh.set(r,s)),s}const xh=new Map;function iN(a,t={}){const{base:r,...s}=t,l=JSON.stringify([a,s]);let c=xh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,t),xh.set(l,c)),c}let Mo=null;function sN(){return Mo||(Mo=new Intl.DateTimeFormat().resolvedOptions().locale,Mo)}const kh=new Map;function p1(a){let t=kh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat(a).resolvedOptions(),kh.set(a,t)),t}const Eh=new Map;function oN(a){let t=Eh.get(a);if(!t){const r=new Intl.Locale(a);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...m1,...t}),Eh.set(a,t)}return t}function lN(a){const t=a.indexOf("-x-");t!==-1&&(a=a.substring(0,t));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=wh(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=wh(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function cN(a,t,r){return(r||t)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),t&&(a+=`-nu-${t}`)),a}function uN(a){const t=[];for(let r=1;r<=12;r++){const s=Ke.utc(2009,r,1);t.push(a(s))}return t}function dN(a){const t=[];for(let r=1;r<=7;r++){const s=Ke.utc(2016,11,13+r);t.push(a(s))}return t}function mc(a,t,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(t):s(t)}function fN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||p1(a.locale).numberingSystem==="latn"}class hN{constructor(t,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const p={useGrouping:!1,...s};s.padTo>0&&(p.minimumIntegerDigits=s.padTo),this.inf=rN(t,p)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):rp(t,3);return wn(r,this.padTo)}}}class pN{constructor(t,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const d=-1*(t.offset/60),p=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;t.offset!==0&&Wa.create(p).valid?(l=p,this.dt=t):(l="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,l=t.zone.name):(l="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=wh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class mN{constructor(t,r,s){this.opts={style:"long",...s},!r&&k1()&&(this.rtf=iN(t,s))}format(t,r){return this.rtf?this.rtf.format(t,r):LN(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const m1={firstDay:1,minimalDays:4,weekend:[6,7]};class jt{static fromOpts(t){return jt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,s,l,c=!1){const d=t||tn.defaultLocale,p=d||(c?"en-US":sN()),m=r||tn.defaultNumberingSystem,g=s||tn.defaultOutputCalendar,w=Th(l)||tn.defaultWeekSettings;return new jt(p,m,g,w,d)}static resetCache(){Mo=null,bh.clear(),Sh.clear(),xh.clear(),kh.clear(),Eh.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return jt.create(t,r,s,l)}constructor(t,r,s,l,c){const[d,p,m]=lN(t);this.locale=d,this.numberingSystem=r||p||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=cN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=fN(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:jt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Th(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return mc(this,t,O1,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:t,day:"numeric"}:{month:t},c=r?"format":"standalone";if(!this.monthsCache[c][t]){const d=s?p=>this.dtFormatter(p,l).format():p=>this.extract(p,l,"month");this.monthsCache[c][t]=uN(d)}return this.monthsCache[c][t]})}weekdays(t,r=!1){return mc(this,t,_1,()=>{const s=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},l=r?"format":"standalone";return this.weekdaysCache[l][t]||(this.weekdaysCache[l][t]=dN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][t]})}meridiems(){return mc(this,void 0,()=>D1,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ke.utc(2016,11,13,9),Ke.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return mc(this,t,M1,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ke.utc(-40,1,1),Ke.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,r,s){const l=this.dtFormatter(t,r),c=l.formatToParts(),d=c.find(p=>p.type.toLowerCase()===s);return d?d.value:null}numberFormatter(t={}){return new hN(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new pN(t,this.intl,r)}relFormatter(t={}){return new mN(this.intl,this.isEnglish(),t)}listFormatter(t={}){return aN(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||p1(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:E1()?oN(this.locale):m1}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Uf=null;class qn extends Ds{static get utcInstance(){return Uf===null&&(Uf=new qn(0)),Uf}static instance(t){return t===0?qn.utcInstance:new qn(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new qn(Wc(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Uo(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Uo(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Uo(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class g1 extends Ds{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wr(a,t){if(Ze(a)||a===null)return t;if(a instanceof Ds)return a;if(SN(a)){const r=a.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Fo.instance:r==="utc"||r==="gmt"?qn.utcInstance:qn.parseSpecifier(r)||Wa.create(a)}else return ti(a)?qn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new g1(a)}const ep={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},_0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},gN=ep.hanidec.replace(/[\[|\]]/g,"").split("");function yN(a){let t=parseInt(a,10);if(isNaN(t)){t="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(ep.hanidec)!==-1)t+=gN.indexOf(a[r]);else for(const l in _0){const[c,d]=_0[l];s>=c&&s<=d&&(t+=s-c)}}return parseInt(t,10)}else return t}const Ch=new Map;function vN(){Ch.clear()}function Da({numberingSystem:a},t=""){const r=a||"latn";let s=Ch.get(r);s===void 0&&(s=new Map,Ch.set(r,s));let l=s.get(t);return l===void 0&&(l=new RegExp(`${ep[r]}${t}`),s.set(t,l)),l}let D0=()=>Date.now(),M0="system",R0=null,z0=null,L0=null,B0=60,I0,$0=null;class tn{static get now(){return D0}static set now(t){D0=t}static set defaultZone(t){M0=t}static get defaultZone(){return Wr(M0,Fo.instance)}static get defaultLocale(){return R0}static set defaultLocale(t){R0=t}static get defaultNumberingSystem(){return z0}static set defaultNumberingSystem(t){z0=t}static get defaultOutputCalendar(){return L0}static set defaultOutputCalendar(t){L0=t}static get defaultWeekSettings(){return $0}static set defaultWeekSettings(t){$0=Th(t)}static get twoDigitCutoffYear(){return B0}static set twoDigitCutoffYear(t){B0=t%100}static get throwOnInvalid(){return I0}static set throwOnInvalid(t){I0=t}static resetCaches(){jt.resetCache(),Wa.resetCache(),Ke.resetCache(),vN()}}class La{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const y1=[0,31,59,90,120,151,181,212,243,273,304,334],v1=[0,31,60,91,121,152,182,213,244,274,305,335];function xa(a,t){return new La("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function tp(a,t,r){const s=new Date(Date.UTC(a,t-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function b1(a,t,r){return r+(Zo(a)?v1:y1)[t-1]}function w1(a,t){const r=Zo(a)?v1:y1,s=r.findIndex(c=>c<t),l=t-r[s];return{month:s+1,day:l}}function np(a,t){return(a-t+7)%7+1}function Ic(a,t=4,r=1){const{year:s,month:l,day:c}=a,d=b1(s,l,c),p=np(tp(s,l,c),r);let m=Math.floor((d-p+14-t)/7),g;return m<1?(g=s-1,m=qo(g,t,r)):m>qo(s,t,r)?(g=s+1,m=1):g=s,{weekYear:g,weekNumber:m,weekday:p,...Jc(a)}}function U0(a,t=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=np(tp(s,1,t),r),p=ws(s);let m=l*7+c-d-7+t,g;m<1?(g=s-1,m+=ws(g)):m>p?(g=s+1,m-=ws(s)):g=s;const{month:w,day:b}=w1(g,m);return{year:g,month:w,day:b,...Jc(a)}}function Hf(a){const{year:t,month:r,day:s}=a,l=b1(t,r,s);return{year:t,ordinal:l,...Jc(a)}}function H0(a){const{year:t,ordinal:r}=a,{month:s,day:l}=w1(t,r);return{year:t,month:s,day:l,...Jc(a)}}function V0(a,t){if(!Ze(a.localWeekday)||!Ze(a.localWeekNumber)||!Ze(a.localWeekYear)){if(!Ze(a.weekday)||!Ze(a.weekNumber)||!Ze(a.weekYear))throw new vs("Cannot mix locale-based week fields with ISO-based week fields");return Ze(a.localWeekday)||(a.weekday=a.localWeekday),Ze(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ze(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function bN(a,t=4,r=1){const s=Kc(a.weekYear),l=ka(a.weekNumber,1,qo(a.weekYear,t,r)),c=ka(a.weekday,1,7);return s?l?c?!1:xa("weekday",a.weekday):xa("week",a.weekNumber):xa("weekYear",a.weekYear)}function wN(a){const t=Kc(a.year),r=ka(a.ordinal,1,ws(a.year));return t?r?!1:xa("ordinal",a.ordinal):xa("year",a.year)}function S1(a){const t=Kc(a.year),r=ka(a.month,1,12),s=ka(a.day,1,$c(a.year,a.month));return t?r?s?!1:xa("day",a.day):xa("month",a.month):xa("year",a.year)}function x1(a){const{hour:t,minute:r,second:s,millisecond:l}=a,c=ka(t,0,23)||t===24&&r===0&&s===0&&l===0,d=ka(r,0,59),p=ka(s,0,59),m=ka(l,0,999);return c?d?p?m?!1:xa("millisecond",l):xa("second",s):xa("minute",r):xa("hour",t)}function Ze(a){return typeof a>"u"}function ti(a){return typeof a=="number"}function Kc(a){return typeof a=="number"&&a%1===0}function SN(a){return typeof a=="string"}function xN(a){return Object.prototype.toString.call(a)==="[object Date]"}function k1(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function E1(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function kN(a){return Array.isArray(a)?a:[a]}function G0(a,t,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[t(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function EN(a,t){return t.reduce((r,s)=>(r[s]=a[s],r),{})}function Ns(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function Th(a){if(a==null)return null;if(typeof a!="object")throw new Vn("Week settings must be an object");if(!ka(a.firstDay,1,7)||!ka(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(t=>!ka(t,1,7)))throw new Vn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ka(a,t,r){return Kc(a)&&a>=t&&a<=r}function CN(a,t){return a-t*Math.floor(a/t)}function wn(a,t=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(t,"0"):s=(""+a).padStart(t,"0"),s}function Qr(a){if(!(Ze(a)||a===null||a===""))return parseInt(a,10)}function Ei(a){if(!(Ze(a)||a===null||a===""))return parseFloat(a)}function ap(a){if(!(Ze(a)||a===null||a==="")){const t=parseFloat("0."+a)*1e3;return Math.floor(t)}}function rp(a,t,r="round"){const s=10**t;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Zo(a){return a%4===0&&(a%100!==0||a%400===0)}function ws(a){return Zo(a)?366:365}function $c(a,t){const r=CN(t-1,12)+1,s=a+(t-r)/12;return r===2?Zo(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Qc(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(t=new Date(t),t.setUTCFullYear(a.year,a.month-1,a.day)),+t}function q0(a,t,r){return-np(tp(a,1,t),r)+t-1}function qo(a,t=4,r=1){const s=q0(a,t,r),l=q0(a+1,t,r);return(ws(a)-s+l)/7}function Nh(a){return a>99?a:a>tn.twoDigitCutoffYear?1900+a:2e3+a}function C1(a,t,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:t,...c},p=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return p?p.value:null}function Wc(a,t){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(t,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function T1(a){const t=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(t))throw new Vn(`Invalid unit value ${a}`);return t}function Uc(a,t){const r={};for(const s in a)if(Ns(a,s)){const l=a[s];if(l==null)continue;r[t(s)]=T1(l)}return r}function Uo(a,t){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(t){case"short":return`${l}${wn(r,2)}:${wn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${wn(r,2)}${wn(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Jc(a){return EN(a,["hour","minute","second","millisecond"])}const TN=["January","February","March","April","May","June","July","August","September","October","November","December"],N1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],NN=["J","F","M","A","M","J","J","A","S","O","N","D"];function O1(a){switch(a){case"narrow":return[...NN];case"short":return[...N1];case"long":return[...TN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const j1=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],A1=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ON=["M","T","W","T","F","S","S"];function _1(a){switch(a){case"narrow":return[...ON];case"short":return[...A1];case"long":return[...j1];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const D1=["AM","PM"],jN=["Before Christ","Anno Domini"],AN=["BC","AD"],_N=["B","A"];function M1(a){switch(a){case"narrow":return[..._N];case"short":return[...AN];case"long":return[...jN];default:return null}}function DN(a){return D1[a.hour<12?0:1]}function MN(a,t){return _1(t)[a.weekday-1]}function RN(a,t){return O1(t)[a.month-1]}function zN(a,t){return M1(t)[a.year<0?0:1]}function LN(a,t,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const b=a==="days";switch(t){case 1:return b?"tomorrow":`next ${l[a][0]}`;case-1:return b?"yesterday":`last ${l[a][0]}`;case 0:return b?"today":`this ${l[a][0]}`}}const d=Object.is(t,-0)||t<0,p=Math.abs(t),m=p===1,g=l[a],w=s?m?g[1]:g[2]||g[1]:m?l[a][0]:a;return d?`${p} ${w} ago`:`in ${p} ${w}`}function Y0(a,t){let r="";for(const s of a)s.literal?r+=s.val:r+=t(s.val);return r}const BN={D:Bc,DD:Xw,DDD:Kw,DDDD:Qw,t:Ww,tt:Jw,ttt:e1,tttt:t1,T:n1,TT:a1,TTT:r1,TTTT:i1,f:s1,ff:l1,fff:u1,ffff:f1,F:o1,FF:c1,FFF:d1,FFFF:h1};class Gn{static create(t,r={}){return new Gn(t,r)}static parseFormat(t){let r=null,s="",l=!1;const c=[];for(let d=0;d<t.length;d++){const p=t.charAt(d);p==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||p===r?s+=p:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=p,r=p)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(t){return BN[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0,s=void 0){if(this.opts.forceSimple)return wn(t,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(t)}formatDateTimeFromString(t,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,D)=>this.loc.extract(t,E,D),d=E=>t.isOffsetFixed&&t.offset===0&&E.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,E.format):"",p=()=>s?DN(t):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(E,D)=>s?RN(t,E):c(D?{month:E}:{month:E,day:"numeric"},"month"),g=(E,D)=>s?MN(t,E):c(D?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),w=E=>{const D=Gn.macroTokenToFormatOpts(E);return D?this.formatWithSystemDefault(t,D):E},b=E=>s?zN(t,E):c({era:E},"era"),k=E=>{switch(E){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return p();case"d":return l?c({day:"numeric"},"day"):this.num(t.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return g("short",!0);case"cccc":return g("long",!0);case"ccccc":return g("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return g("short",!1);case"EEEE":return g("long",!1);case"EEEEE":return g("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(t.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(t.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(t.year,6);case"G":return b("short");case"GG":return b("long");case"GGGGG":return b("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return w(E)}};return Y0(Gn.parseFormat(r),k)}formatDurationFromString(t,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=w=>{switch(w[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(w,b)=>k=>{const E=l(k);if(E){const D=b.isNegativeDuration&&E!==b.largestUnit?s:1;let X;return this.opts.signMode==="negativeLargestOnly"&&E!==b.largestUnit?X="never":this.opts.signMode==="all"?X="always":X="auto",this.num(w.get(E)*D,k.length,X)}else return k},d=Gn.parseFormat(r),p=d.reduce((w,{literal:b,val:k})=>b?w:w.concat(k),[]),m=t.shiftTo(...p.map(l).filter(w=>w)),g={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return Y0(d,c(m,g))}}const R1=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ms(...a){const t=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${t}$`)}function Rs(...a){return t=>a.reduce(([r,s,l],c)=>{const[d,p,m]=c(t,l);return[{...r,...d},p||s,m]},[{},null,1]).slice(0,2)}function zs(a,...t){if(a==null)return[null,null];for(const[r,s]of t){const l=r.exec(a);if(l)return s(l)}return[null,null]}function z1(...a){return(t,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Qr(t[r+l]);return[s,null,r+l]}}const L1=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,IN=`(?:${L1.source}?(?:\\[(${R1.source})\\])?)?`,ip=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,B1=RegExp(`${ip.source}${IN}`),sp=RegExp(`(?:[Tt]${B1.source})?`),$N=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,UN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,HN=/(\d{4})-?(\d{3})/,VN=z1("weekYear","weekNumber","weekDay"),GN=z1("year","ordinal"),qN=/(\d{4})-(\d\d)-(\d\d)/,I1=RegExp(`${ip.source} ?(?:${L1.source}|(${R1.source}))?`),YN=RegExp(`(?: ${I1.source})?`);function Ss(a,t,r){const s=a[t];return Ze(s)?r:Qr(s)}function PN(a,t){return[{year:Ss(a,t),month:Ss(a,t+1,1),day:Ss(a,t+2,1)},null,t+3]}function Ls(a,t){return[{hours:Ss(a,t,0),minutes:Ss(a,t+1,0),seconds:Ss(a,t+2,0),milliseconds:ap(a[t+3])},null,t+4]}function Xo(a,t){const r=!a[t]&&!a[t+1],s=Wc(a[t+1],a[t+2]),l=r?null:qn.instance(s);return[{},l,t+3]}function Ko(a,t){const r=a[t]?Wa.create(a[t]):null;return[{},r,t+1]}const FN=RegExp(`^T?${ip.source}$`),ZN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function XN(a){const[t,r,s,l,c,d,p,m,g]=a,w=t[0]==="-",b=m&&m[0]==="-",k=(E,D=!1)=>E!==void 0&&(D||E&&w)?-E:E;return[{years:k(Ei(r)),months:k(Ei(s)),weeks:k(Ei(l)),days:k(Ei(c)),hours:k(Ei(d)),minutes:k(Ei(p)),seconds:k(Ei(m),m==="-0"),milliseconds:k(ap(g),b)}]}const KN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function op(a,t,r,s,l,c,d){const p={year:t.length===2?Nh(Qr(t)):Qr(t),month:N1.indexOf(r)+1,day:Qr(s),hour:Qr(l),minute:Qr(c)};return d&&(p.second=Qr(d)),a&&(p.weekday=a.length>3?j1.indexOf(a)+1:A1.indexOf(a)+1),p}const QN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function WN(a){const[,t,r,s,l,c,d,p,m,g,w,b]=a,k=op(t,l,s,r,c,d,p);let E;return m?E=KN[m]:g?E=0:E=Wc(w,b),[k,new qn(E)]}function JN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const eO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,tO=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,nO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function P0(a){const[,t,r,s,l,c,d,p]=a;return[op(t,l,s,r,c,d,p),qn.utcInstance]}function aO(a){const[,t,r,s,l,c,d,p]=a;return[op(t,p,r,s,l,c,d),qn.utcInstance]}const rO=Ms($N,sp),iO=Ms(UN,sp),sO=Ms(HN,sp),oO=Ms(B1),$1=Rs(PN,Ls,Xo,Ko),lO=Rs(VN,Ls,Xo,Ko),cO=Rs(GN,Ls,Xo,Ko),uO=Rs(Ls,Xo,Ko);function dO(a){return zs(a,[rO,$1],[iO,lO],[sO,cO],[oO,uO])}function fO(a){return zs(JN(a),[QN,WN])}function hO(a){return zs(a,[eO,P0],[tO,P0],[nO,aO])}function pO(a){return zs(a,[ZN,XN])}const mO=Rs(Ls);function gO(a){return zs(a,[FN,mO])}const yO=Ms(qN,YN),vO=Ms(I1),bO=Rs(Ls,Xo,Ko);function wO(a){return zs(a,[yO,$1],[vO,bO])}const F0="Invalid Duration",U1={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},SO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...U1},wa=146097/400,hs=146097/4800,xO={years:{quarters:4,months:12,weeks:wa/7,days:wa,hours:wa*24,minutes:wa*24*60,seconds:wa*24*60*60,milliseconds:wa*24*60*60*1e3},quarters:{months:3,weeks:wa/28,days:wa/4,hours:wa*24/4,minutes:wa*24*60/4,seconds:wa*24*60*60/4,milliseconds:wa*24*60*60*1e3/4},months:{weeks:hs/7,days:hs,hours:hs*24,minutes:hs*24*60,seconds:hs*24*60*60,milliseconds:hs*24*60*60*1e3},...U1},Oi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],kO=Oi.slice(0).reverse();function wr(a,t,r=!1){const s={values:r?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new wt(s)}function H1(a,t){let r=t.milliseconds??0;for(const s of kO.slice(1))t[s]&&(r+=t[s]*a[s].milliseconds);return r}function Z0(a,t){const r=H1(a,t)<0?-1:1;Oi.reduceRight((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]*r,d=a[l][s],p=Math.floor(c/d);t[l]+=p*r,t[s]-=p*d*r}return l},null),Oi.reduce((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]%1;t[s]-=c,t[l]+=c*a[s][l]}return l},null)}function X0(a){const t={};for(const[r,s]of Object.entries(a))s!==0&&(t[r]=s);return t}class wt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let s=r?xO:SO;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||jt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,r){return wt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Vn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new wt({values:Uc(t,wt.normalizeUnit),loc:jt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(ti(t))return wt.fromMillis(t);if(wt.isDuration(t))return t;if(typeof t=="object")return wt.fromObject(t);throw new Vn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[s]=pO(t);return s?wt.fromObject(s,r):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[s]=gO(t);return s?wt.fromObject(s,r):wt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Duration is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new KT(s);return new wt({invalid:s})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new Zw(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Gn.create(this.loc,s).formatDurationFromString(this,t):F0}toHuman(t={}){if(!this.isValid)return F0;const r=t.showZeros!==!1,s=Oi.map(l=>{const c=this.values[l];return Ze(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=rp(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ke.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?H1(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t),s={};for(const l of Oi)(Ns(r.values,l)||Ns(this.values,l))&&(s[l]=r.get(l)+this.get(l));return wr(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=T1(t(this.values[s],s));return wr(this,{values:r},!0)}get(t){return this[wt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Uc(t,wt.normalizeUnit)};return wr(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:l,conversionAccuracy:s};return wr(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Z0(this.matrix,t),wr(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=X0(this.normalize().shiftToAll().toObject());return wr(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(d=>wt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of Oi)if(t.indexOf(d)>=0){c=d;let p=0;for(const g in s)p+=this.matrix[g][d]*s[g],s[g]=0;ti(l[d])&&(p+=l[d]);const m=Math.trunc(p);r[d]=m,s[d]=(p*1e3-m*1e3)/1e3}else ti(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return Z0(this.matrix,r),wr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return wr(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=X0(this.values);return wr(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of Oi)if(!r(this.values[s],t.values[s]))return!1;return!0}}const ps="Invalid Interval";function EO(a,t){return!a||!a.isValid?en.invalid("missing or invalid start"):!t||!t.isValid?en.invalid("missing or invalid end"):t<a?en.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null}class en{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Interval is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new XT(s);return new en({invalid:s})}static fromDateTimes(t,r){const s=Ao(t),l=Ao(r),c=EO(s,l);return c??new en({start:s,end:l})}static after(t,r){const s=wt.fromDurationLike(r),l=Ao(t);return en.fromDateTimes(l,l.plus(s))}static before(t,r){const s=wt.fromDurationLike(r),l=Ao(t);return en.fromDateTimes(l.minus(s),l)}static fromISO(t,r){const[s,l]=(t||"").split("/",2);if(s&&l){let c,d;try{c=Ke.fromISO(s,r),d=c.isValid}catch{d=!1}let p,m;try{p=Ke.fromISO(l,r),m=p.isValid}catch{m=!1}if(d&&m)return en.fromDateTimes(c,p);if(d){const g=wt.fromISO(l,r);if(g.isValid)return en.after(c,g)}else if(m){const g=wt.fromISO(s,r);if(g.isValid)return en.before(p,g)}}return en.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(t,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(t,r),Math.floor(l.diff(s,t).get(t))+(l.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?en.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Ao).filter(d=>this.contains(d)).sort((d,p)=>d.toMillis()-p.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,p=+d>+this.e?this.e:d;s.push(en.fromDateTimes(l,p)),l=p,c+=1}return s}splitBy(t){const r=wt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const p=this.start.plus(r.mapUnits(m=>m*l));c=+p>+this.e?this.e:p,d.push(en.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return r>=s?null:en.fromDateTimes(r,s)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return en.fromDateTimes(r,s)}static merge(t){const[r,s]=t.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(t){let r=null,s=0;const l=[],c=t.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),p=d.sort((m,g)=>m.time-g.time);for(const m of p)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(en.fromDateTimes(r,m.time)),r=null);return en.merge(l)}difference(...t){return en.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ps}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Bc,r={}){return this.isValid?Gn.create(this.s.loc.clone(r),t).formatInterval(this):ps}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:ps}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ps}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:ps}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:ps}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):wt.invalid(this.invalidReason)}mapEndpoints(t){return en.fromDateTimes(t(this.s),t(this.e))}}class Ro{static hasDST(t=tn.defaultZone){const r=Ke.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Wa.isValidZone(t)}static normalizeZone(t){return Wr(t,tn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||jt.create(r,s,c)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||jt.create(r,s,c)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||jt.create(r,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||jt.create(r,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return jt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return jt.create(r,null,"gregory").eras(t)}static features(){return{relative:k1(),localeWeek:E1()}}}function K0(a,t){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(t)-r(a);return Math.floor(wt.fromMillis(s).as("days"))}function CO(a,t,r){const s=[["years",(m,g)=>g.year-m.year],["quarters",(m,g)=>g.quarter-m.quarter+(g.year-m.year)*4],["months",(m,g)=>g.month-m.month+(g.year-m.year)*12],["weeks",(m,g)=>{const w=K0(m,g);return(w-w%7)/7}],["days",K0]],l={},c=a;let d,p;for(const[m,g]of s)r.indexOf(m)>=0&&(d=m,l[m]=g(a,t),p=c.plus(l),p>t?(l[m]--,a=c.plus(l),a>t&&(p=a,l[m]--,a=c.plus(l))):a=p);return[a,l,p,d]}function TO(a,t,r,s){let[l,c,d,p]=CO(a,t,r);const m=t-l,g=r.filter(b=>["hours","minutes","seconds","milliseconds"].indexOf(b)>=0);g.length===0&&(d<t&&(d=l.plus({[p]:1})),d!==l&&(c[p]=(c[p]||0)+m/(d-l)));const w=wt.fromObject(c,s);return g.length>0?wt.fromMillis(m,s).shiftTo(...g).plus(w):w}const NO="missing Intl.DateTimeFormat.formatToParts support";function Nt(a,t=r=>r){return{regex:a,deser:([r])=>t(yN(r))}}const OO="",V1=`[ ${OO}]`,G1=new RegExp(V1,"g");function jO(a){return a.replace(/\./g,"\\.?").replace(G1,V1)}function Q0(a){return a.replace(/\./g,"").replace(G1," ").toLowerCase()}function Ma(a,t){return a===null?null:{regex:RegExp(a.map(jO).join("|")),deser:([r])=>a.findIndex(s=>Q0(r)===Q0(s))+t}}function W0(a,t){return{regex:a,deser:([,r,s])=>Wc(r,s),groups:t}}function gc(a){return{regex:a,deser:([t])=>t}}function AO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function _O(a,t){const r=Da(t),s=Da(t,"{2}"),l=Da(t,"{3}"),c=Da(t,"{4}"),d=Da(t,"{6}"),p=Da(t,"{1,2}"),m=Da(t,"{1,3}"),g=Da(t,"{1,6}"),w=Da(t,"{1,9}"),b=Da(t,"{2,4}"),k=Da(t,"{4,6}"),E=H=>({regex:RegExp(AO(H.val)),deser:([ne])=>ne,literal:!0}),X=(H=>{if(a.literal)return E(H);switch(H.val){case"G":return Ma(t.eras("short"),0);case"GG":return Ma(t.eras("long"),0);case"y":return Nt(g);case"yy":return Nt(b,Nh);case"yyyy":return Nt(c);case"yyyyy":return Nt(k);case"yyyyyy":return Nt(d);case"M":return Nt(p);case"MM":return Nt(s);case"MMM":return Ma(t.months("short",!0),1);case"MMMM":return Ma(t.months("long",!0),1);case"L":return Nt(p);case"LL":return Nt(s);case"LLL":return Ma(t.months("short",!1),1);case"LLLL":return Ma(t.months("long",!1),1);case"d":return Nt(p);case"dd":return Nt(s);case"o":return Nt(m);case"ooo":return Nt(l);case"HH":return Nt(s);case"H":return Nt(p);case"hh":return Nt(s);case"h":return Nt(p);case"mm":return Nt(s);case"m":return Nt(p);case"q":return Nt(p);case"qq":return Nt(s);case"s":return Nt(p);case"ss":return Nt(s);case"S":return Nt(m);case"SSS":return Nt(l);case"u":return gc(w);case"uu":return gc(p);case"uuu":return Nt(r);case"a":return Ma(t.meridiems(),0);case"kkkk":return Nt(c);case"kk":return Nt(b,Nh);case"W":return Nt(p);case"WW":return Nt(s);case"E":case"c":return Nt(r);case"EEE":return Ma(t.weekdays("short",!1),1);case"EEEE":return Ma(t.weekdays("long",!1),1);case"ccc":return Ma(t.weekdays("short",!0),1);case"cccc":return Ma(t.weekdays("long",!0),1);case"Z":case"ZZ":return W0(new RegExp(`([+-]${p.source})(?::(${s.source}))?`),2);case"ZZZ":return W0(new RegExp(`([+-]${p.source})(${s.source})?`),2);case"z":return gc(/[a-z_+-/]{1,256}?/i);case" ":return gc(/[^\S\n\r]/);default:return E(H)}})(a)||{invalidReason:NO};return X.token=a,X}const DO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function MO(a,t,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=t[s];let d=s;s==="hour"&&(t.hour12!=null?d=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let p=DO[d];if(typeof p=="object"&&(p=p[c]),p)return{literal:!1,val:p}}function RO(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function zO(a,t,r){const s=a.match(t);if(s){const l={};let c=1;for(const d in r)if(Ns(r,d)){const p=r[d],m=p.groups?p.groups+1:1;!p.literal&&p.token&&(l[p.token.val[0]]=p.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function LO(a){const t=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ze(a.z)||(r=Wa.create(a.z)),Ze(a.Z)||(r||(r=new qn(a.Z)),s=a.Z),Ze(a.q)||(a.M=(a.q-1)*3+1),Ze(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ze(a.u)||(a.S=ap(a.u)),[Object.keys(a).reduce((c,d)=>{const p=t(d);return p&&(c[p]=a[d]),c},{}),r,s]}let Vf=null;function BO(){return Vf||(Vf=Ke.fromMillis(1555555555555)),Vf}function IO(a,t){if(a.literal)return a;const r=Gn.macroTokenToFormatOpts(a.val),s=F1(r,t);return s==null||s.includes(void 0)?a:s}function q1(a,t){return Array.prototype.concat(...a.map(r=>IO(r,t)))}class Y1{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=q1(Gn.parseFormat(r),t),this.units=this.tokens.map(s=>_O(s,t)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=RO(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(t){if(this.isValid){const[r,s]=zO(t,this.regex,this.handlers),[l,c,d]=s?LO(s):[null,null,void 0];if(Ns(s,"a")&&Ns(s,"H"))throw new vs("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function P1(a,t,r){return new Y1(a,r).explainFromTokens(t)}function $O(a,t,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=P1(a,t,r);return[s,l,c,d]}function F1(a,t){if(!a)return null;const s=Gn.create(t,a).dtFormatter(BO()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>MO(d,a,c))}const Gf="Invalid DateTime",J0=864e13;function zo(a){return new La("unsupported zone",`the zone "${a.name}" is not supported`)}function qf(a){return a.weekData===null&&(a.weekData=Ic(a.c)),a.weekData}function Yf(a){return a.localWeekData===null&&(a.localWeekData=Ic(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ci(a,t){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ke({...r,...t,old:r})}function Z1(a,t,r){let s=a-t*60*1e3;const l=r.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function yc(a,t){a+=t*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Oc(a,t,r){return Z1(Qc(a),t,r)}function eb(a,t){const r=a.o,s=a.c.year+Math.trunc(t.years),l=a.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,$c(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},d=wt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),p=Qc(c);let[m,g]=Z1(p,r,a.zone);return d!==0&&(m+=d,g=a.zone.offset(m)),{ts:m,o:g}}function ms(a,t,r,s,l,c){const{setZone:d,zone:p}=r;if(a&&Object.keys(a).length!==0||t){const m=t||p,g=Ke.fromObject(a,{...r,zone:m,specificOffset:c});return d?g:g.setZone(p)}else return Ke.invalid(new La("unparsable",`the input "${l}" can't be parsed as ${s}`))}function vc(a,t,r=!0){return a.isValid?Gn.create(jt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Pf(a,t,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=wn(a.c.year,s?6:4),r==="year")return l;if(t){if(l+="-",l+=wn(a.c.month),r==="month")return l;l+="-"}else if(l+=wn(a.c.month),r==="month")return l;return l+=wn(a.c.day),l}function tb(a,t,r,s,l,c,d){let p=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=wn(a.c.hour),d==="hour")break;if(t){if(m+=":",m+=wn(a.c.minute),d==="minute")break;p&&(m+=":",m+=wn(a.c.second))}else{if(m+=wn(a.c.minute),d==="minute")break;p&&(m+=wn(a.c.second))}if(d==="second")break;p&&(!s||a.c.millisecond!==0)&&(m+=".",m+=wn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=wn(Math.trunc(-a.o/60)),m+=":",m+=wn(Math.trunc(-a.o%60))):(m+="+",m+=wn(Math.trunc(a.o/60)),m+=":",m+=wn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const X1={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},UO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},HO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},jc=["year","month","day","hour","minute","second","millisecond"],VO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],GO=["year","ordinal","hour","minute","second","millisecond"];function Ac(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new Zw(a);return t}function nb(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ac(a)}}function qO(a){if(Lo===void 0&&(Lo=tn.now()),a.type!=="iana")return a.offset(Lo);const t=a.name;let r=Oh.get(t);return r===void 0&&(r=a.offset(Lo),Oh.set(t,r)),r}function ab(a,t){const r=Wr(t.zone,tn.defaultZone);if(!r.isValid)return Ke.invalid(zo(r));const s=jt.fromObject(t);let l,c;if(Ze(a.year))l=tn.now();else{for(const m of jc)Ze(a[m])&&(a[m]=X1[m]);const d=S1(a)||x1(a);if(d)return Ke.invalid(d);const p=qO(r);[l,c]=Oc(a,p,r)}return new Ke({ts:l,zone:r,loc:s,o:c})}function rb(a,t,r){const s=Ze(r.round)?!0:r.round,l=Ze(r.rounding)?"trunc":r.rounding,c=(p,m)=>(p=rp(p,s||r.calendary?0:2,r.calendary?"round":l),t.loc.clone(r).relFormatter(r).format(p,m)),d=p=>r.calendary?t.hasSame(a,p)?0:t.startOf(p).diff(a.startOf(p),p).get(p):t.diff(a,p).get(p);if(r.unit)return c(d(r.unit),r.unit);for(const p of r.units){const m=d(p);if(Math.abs(m)>=1)return c(m,p)}return c(a>t?-0:0,r.units[r.units.length-1])}function ib(a){let t={},r;return a.length>0&&typeof a[a.length-1]=="object"?(t=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[t,r]}let Lo;const Oh=new Map;class Ke{constructor(t){const r=t.zone||tn.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new La("invalid input"):null)||(r.isValid?null:zo(r));this.ts=Ze(t.ts)?tn.now():t.ts;let l=null,c=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[l,c]=[t.old.c,t.old.o];else{const p=ti(t.o)&&!t.old?t.o:r.offset(this.ts);l=yc(this.ts,p),s=Number.isNaN(l.year)?new La("invalid input"):null,l=s?null:l,c=s?null:p}this._zone=r,this.loc=t.loc||jt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Ke({})}static local(){const[t,r]=ib(arguments),[s,l,c,d,p,m,g]=r;return ab({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static utc(){const[t,r]=ib(arguments),[s,l,c,d,p,m,g]=r;return t.zone=qn.utcInstance,ab({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static fromJSDate(t,r={}){const s=xN(t)?t.valueOf():NaN;if(Number.isNaN(s))return Ke.invalid("invalid input");const l=Wr(r.zone,tn.defaultZone);return l.isValid?new Ke({ts:s,zone:l,loc:jt.fromObject(r)}):Ke.invalid(zo(l))}static fromMillis(t,r={}){if(ti(t))return t<-J0||t>J0?Ke.invalid("Timestamp out of range"):new Ke({ts:t,zone:Wr(r.zone,tn.defaultZone),loc:jt.fromObject(r)});throw new Vn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(ti(t))return new Ke({ts:t*1e3,zone:Wr(r.zone,tn.defaultZone),loc:jt.fromObject(r)});throw new Vn("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const s=Wr(r.zone,tn.defaultZone);if(!s.isValid)return Ke.invalid(zo(s));const l=jt.fromObject(r),c=Uc(t,nb),{minDaysInFirstWeek:d,startOfWeek:p}=V0(c,l),m=tn.now(),g=Ze(r.specificOffset)?s.offset(m):r.specificOffset,w=!Ze(c.ordinal),b=!Ze(c.year),k=!Ze(c.month)||!Ze(c.day),E=b||k,D=c.weekYear||c.weekNumber;if((E||w)&&D)throw new vs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(k&&w)throw new vs("Can't mix ordinal dates with month/day");const X=D||c.weekday&&!E;let H,ne,J=yc(m,g);X?(H=VO,ne=UO,J=Ic(J,d,p)):w?(H=GO,ne=HO,J=Hf(J)):(H=jc,ne=X1);let B=!1;for(const me of H){const ze=c[me];Ze(ze)?B?c[me]=ne[me]:c[me]=J[me]:B=!0}const q=X?bN(c,d,p):w?wN(c):S1(c),ye=q||x1(c);if(ye)return Ke.invalid(ye);const ke=X?U0(c,d,p):w?H0(c):c,[I,pe]=Oc(ke,g,s),le=new Ke({ts:I,zone:s,o:pe,loc:l});return c.weekday&&E&&t.weekday!==le.weekday?Ke.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${le.toISO()}`):le.isValid?le:Ke.invalid(le.invalid)}static fromISO(t,r={}){const[s,l]=dO(t);return ms(s,l,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[s,l]=fO(t);return ms(s,l,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[s,l]=hO(t);return ms(s,l,r,"HTTP",r)}static fromFormat(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[p,m,g,w]=$O(d,t,r);return w?Ke.invalid(w):ms(p,m,s,`format ${r}`,t,g)}static fromString(t,r,s={}){return Ke.fromFormat(t,r,s)}static fromSQL(t,r={}){const[s,l]=wO(t);return ms(s,l,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the DateTime is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new ZT(s);return new Ke({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const s=F1(t,jt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(t,r={}){return q1(Gn.parseFormat(t),jt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){Lo=void 0,Oh.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?qf(this).weekYear:NaN}get weekNumber(){return this.isValid?qf(this).weekNumber:NaN}get weekday(){return this.isValid?qf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Yf(this).weekday:NaN}get localWeekNumber(){return this.isValid?Yf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Yf(this).weekYear:NaN}get ordinal(){return this.isValid?Hf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ro.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ro.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ro.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ro.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,s=Qc(this.c),l=this.zone.offset(s-t),c=this.zone.offset(s+t),d=this.zone.offset(s-l*r),p=this.zone.offset(s-c*r);if(d===p)return[this];const m=s-d*r,g=s-p*r,w=yc(m,d),b=yc(g,p);return w.hour===b.hour&&w.minute===b.minute&&w.second===b.second&&w.millisecond===b.millisecond?[Ci(this,{ts:m}),Ci(this,{ts:g})]:[this]}get isInLeapYear(){return Zo(this.year)}get daysInMonth(){return $c(this.year,this.month)}get daysInYear(){return this.isValid?ws(this.year):NaN}get weeksInWeekYear(){return this.isValid?qo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?qo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:s,calendar:l}=Gn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(t=0,r={}){return this.setZone(qn.instance(t),r)}toLocal(){return this.setZone(tn.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(t=Wr(t,tn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(r||s){const c=t.offset(this.ts),d=this.toObject();[l]=Oc(d,c,t)}return Ci(this,{ts:l,zone:t})}else return Ke.invalid(zo(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:s});return Ci(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Uc(t,nb),{minDaysInFirstWeek:s,startOfWeek:l}=V0(r,this.loc),c=!Ze(r.weekYear)||!Ze(r.weekNumber)||!Ze(r.weekday),d=!Ze(r.ordinal),p=!Ze(r.year),m=!Ze(r.month)||!Ze(r.day),g=p||m,w=r.weekYear||r.weekNumber;if((g||d)&&w)throw new vs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new vs("Can't mix ordinal dates with month/day");let b;c?b=U0({...Ic(this.c,s,l),...r},s,l):Ze(r.ordinal)?(b={...this.toObject(),...r},Ze(r.day)&&(b.day=Math.min($c(b.year,b.month),b.day))):b=H0({...Hf(this.c),...r});const[k,E]=Oc(b,this.o,this.zone);return Ci(this,{ts:k,o:E})}plus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t);return Ci(this,eb(this,r))}minus(t){if(!this.isValid)return this;const r=wt.fromDurationLike(t).negate();return Ci(this,eb(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=wt.normalizeUnit(t);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Gn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Gf}toLocaleString(t=Bc,r={}){return this.isValid?Gn.create(this.loc.clone(r),t).formatDateTime(this):Gf}toLocaleParts(t={}){return this.isValid?Gn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Ac(d);const p=t==="extended";let m=Pf(this,p,d);return jc.indexOf(d)>=3&&(m+="T"),m+=tb(this,p,r,s,l,c,d),m}toISODate({format:t="extended",precision:r="day"}={}){return this.isValid?Pf(this,t==="extended",Ac(r)):null}toISOWeekDate(){return vc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:p="milliseconds"}={}){return this.isValid?(p=Ac(p),(l&&jc.indexOf(p)>=3?"T":"")+tb(this,d==="extended",r,t,s,c,p)):null}toRFC2822(){return vc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return vc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Pf(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||t)&&(s&&(l+=" "),r?l+="z":t&&(l+="ZZ")),vc(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Gf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",s={}){if(!this.isValid||!t.isValid)return wt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=kN(r).map(wt.normalizeUnit),d=t.valueOf()>this.valueOf(),p=d?this:t,m=d?t:this,g=TO(p,m,c,l);return d?g.negate():g}diffNow(t="milliseconds",r={}){return this.diff(Ke.now(),t,r)}until(t){return this.isValid?en.fromDateTimes(this,t):this}hasSame(t,r,s){if(!this.isValid)return!1;const l=t.valueOf(),c=this.setZone(t.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Ke.fromObject({},{zone:this.zone}),s=t.padding?this<r?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=t.unit;return Array.isArray(t.unit)&&(l=t.unit,c=void 0),rb(r,this.plus(s),{...t,numeric:"always",units:l,unit:c})}toRelativeCalendar(t={}){return this.isValid?rb(t.base||Ke.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ke.isDateTime))throw new Vn("min requires all arguments be DateTimes");return G0(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Ke.isDateTime))throw new Vn("max requires all arguments be DateTimes");return G0(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return P1(d,t,r)}static fromStringExplain(t,r,s={}){return Ke.fromFormatExplain(t,r,s)}static buildFormatParser(t,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=jt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new Y1(c,t)}static fromFormatParser(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new Vn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:p,zone:m,specificOffset:g,invalidReason:w}=r.explainFromTokens(t);return w?Ke.invalid(w):ms(p,m,s,`format ${r.format}`,t,g)}static get DATE_SHORT(){return Bc}static get DATE_MED(){return Xw}static get DATE_MED_WITH_WEEKDAY(){return QT}static get DATE_FULL(){return Kw}static get DATE_HUGE(){return Qw}static get TIME_SIMPLE(){return Ww}static get TIME_WITH_SECONDS(){return Jw}static get TIME_WITH_SHORT_OFFSET(){return e1}static get TIME_WITH_LONG_OFFSET(){return t1}static get TIME_24_SIMPLE(){return n1}static get TIME_24_WITH_SECONDS(){return a1}static get TIME_24_WITH_SHORT_OFFSET(){return r1}static get TIME_24_WITH_LONG_OFFSET(){return i1}static get DATETIME_SHORT(){return s1}static get DATETIME_SHORT_WITH_SECONDS(){return o1}static get DATETIME_MED(){return l1}static get DATETIME_MED_WITH_SECONDS(){return c1}static get DATETIME_MED_WITH_WEEKDAY(){return WT}static get DATETIME_FULL(){return u1}static get DATETIME_FULL_WITH_SECONDS(){return d1}static get DATETIME_HUGE(){return f1}static get DATETIME_HUGE_WITH_SECONDS(){return h1}}function Ao(a){if(Ke.isDateTime(a))return a;if(a&&a.valueOf&&ti(a.valueOf()))return Ke.fromJSDate(a);if(a&&typeof a=="object")return Ke.fromObject(a);throw new Vn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const YO="3.7.2",PO=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Ke,Duration:wt,FixedOffsetZone:qn,IANAZone:Wa,Info:Ro,Interval:en,InvalidZone:g1,Settings:tn,SystemZone:Fo,VERSION:YO,Zone:Ds},Symbol.toStringTag,{value:"Module"}));window.Rete=Ik;window.React=ck;window.RefComponent=Ph;window.luxon=PO;window.nodeRegistry=_n;window.sockets=_w;window.socket=be;window.apiUrl=Tn;window.getApiBase=Fc;window.apiFetch=async function(a,t={}){const r=Tn(a);return fetch(r,t)};let ni={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const jh=new Set;function K1(a){return jh.add(a),a({...ni}),()=>jh.delete(a)}function Xr(a){ni={...ni,...a},jh.forEach(t=>t({...ni}))}function FO(){return{...ni}}async function ZO(){Xr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(Tn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const t=await a.json(),r=t.length,s=t.filter(m=>m.includes("/00_")),l=t.filter(m=>!m.includes("/00_"));Xr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const g=m.split("/").pop().replace(".js","");Xr({status:`Loading ${g}...`});try{await sb(Tn(m)),c++,Xr({loadedCount:c,progress:Math.round(c/r*100)})}catch(w){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,w),ni.failedPlugins.push({name:g,error:w.message})}}Xr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const g=m.split("/").pop().replace(".js","");try{return await sb(Tn(m)),c++,Xr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:g}}catch(w){return console.error(`[PluginLoader] Failed to load ${m}`,w),ni.failedPlugins.push({name:g,error:w.message}),{success:!1,name:g,error:w.message}}})),p=ni.failedPlugins.length;Xr({isLoading:!1,progress:100,status:p>0?`Loaded ${c} plugins (${p} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Xr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function sb(a){return new Promise((t,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=t,s.onerror=r,document.body.appendChild(s)})}const Q1=x.createContext(null),ob={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function XO({id:a,type:t,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[p,m]=x.useState(!1),g=ob[t]||ob.info;x.useEffect(()=>{if(s>0){const k=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(k)}},[a,s,l]);const w=()=>{m(!0),setTimeout(()=>l(a),300)},b=()=>{c&&c(),w()};return h.jsxs("div",{className:`toast ${g.className} ${p?"toast-exit":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.icon}),h.jsx("span",{className:"toast-message",children:r}),c&&d&&h.jsx("button",{className:"toast-action",onClick:b,children:d}),h.jsx("button",{className:"toast-close",onClick:w,children:""})]})}function KO({children:a}){const[t,r]=x.useState([]);let s=0;const l=x.useCallback((p,m,g={})=>{const w=++s,b=typeof g=="number"?g:g.duration??4e3,k=typeof g=="object"?g.action:null,E=typeof g=="object"?g.actionLabel:null;return r(D=>[...D,{id:w,type:p,message:m,duration:b,action:k,actionLabel:E}]),w},[]),c=x.useCallback(p=>{r(m=>m.filter(g=>g.id!==p))},[]),d={success:(p,m)=>l("success",p,m),error:(p,m)=>l("error",p,typeof m=="number"?m:{duration:6e3,...m}),warning:(p,m)=>l("warning",p,m),info:(p,m)=>l("info",p,m),dismiss:c,dismissAll:()=>r([])};return h.jsxs(Q1.Provider,{value:d,children:[a,h.jsx("div",{className:"toast-container",children:t.map(p=>h.jsx(XO,{id:p.id,type:p.type,message:p.message,duration:p.duration,onRemove:c,action:p.action,actionLabel:p.actionLabel},p.id))})]})}function lp(){const a=x.useContext(Q1);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function QO(){const a=lp();return x.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const lb=window.location.pathname.includes("/api/hassio/ingress/");function WO({onSave:a,onLoad:t,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:p=!1,onToggleMerged:m}){const[g,w]=x.useState(!1),[b,k]=x.useState(!1),[E,D]=x.useState(!1),[X,H]=x.useState([]),[ne,J]=x.useState(!1),[B,q]=x.useState(!1),[ye,ke]=x.useState(!1),[I,pe]=x.useState(null),le=lp(),[me,ze]=x.useState(()=>{const _=localStorage.getItem("dock-position");return _?JSON.parse(_):{x:20,y:20}}),[De,Je]=x.useState(!1),[nt,Qe]=x.useState({x:0,y:0}),[Y,he]=x.useState(!0),[ge,Le]=x.useState(!0),[ee,v]=x.useState(!1),[T,A]=x.useState(!1),[R,ae]=x.useState(new Date),[de,Se]=x.useState({backend:be.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[$e,Pe]=x.useState({loaded:0,failed:0,total:0}),[vt,$t]=x.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Rt;const ln=x.useRef(null),st=x.useRef(null);x.useEffect(()=>{(async()=>{try{const P=await fetch("/api/version");if(P.ok){const Q=await P.json();pe(Q.version)}}catch{}})()},[]),x.useEffect(()=>{Rt=K1(P=>{let Q=0,K=P.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(Q=window.nodeRegistry.getAll().length,(!K||Q>K)&&(K=Q)):Q=P.loadedCount,Pe({loaded:Q,failed:P.failedPlugins?.length||0,total:K})});const _=P=>{P.target.tagName==="INPUT"||P.target.tagName==="TEXTAREA"||P.target.isContentEditable||(P.key==="?"||P.shiftKey&&P.code==="Slash")&&(P.preventDefault(),k(!0))};return window.addEventListener("keydown",_),()=>window.removeEventListener("keydown",_)},[]),x.useEffect(()=>{const _=()=>{Se(_e=>({..._e,backend:!0})),be.emit("request-hue-status")},P=()=>Se(_e=>({..._e,backend:!1})),Q=_e=>Se(et=>({...et,ha:{connected:_e.connected,wsConnected:_e.wsConnected,deviceCount:_e.deviceCount||0}})),K=_e=>{_e.hue&&Se(et=>({...et,hue:_e.hue})),_e.kasa&&Se(et=>({...et,kasa:_e.kasa}))},C=_e=>{Se(et=>({...et,hue:{connected:_e.connected,deviceCount:_e.deviceCount||0,bridgeIp:_e.bridgeIp||null}}))};be.on("connect",_),be.on("disconnect",P),be.on("ha-connection-status",Q),be.on("device-counts",K),be.on("hue-connection-status",C);const G=_e=>$t(_e),ue=_e=>$t(et=>({...et,..._e,running:!0})),se=_e=>$t(et=>({...et,..._e,running:!1}));be.on("engine-status",G),be.on("engine-started",ue),be.on("engine-stopped",se),Se(_e=>({..._e,backend:be.connected})),be.connected&&(be.emit("request-hue-status"),be.emit("request-engine-status"));const xe=FO();let ve=0,Oe=xe.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(ve=window.nodeRegistry.getAll().length,(!Oe||ve>Oe)&&(Oe=ve)):ve=xe.loadedCount,Pe({loaded:ve,failed:xe.failedPlugins?.length||0,total:Oe}),()=>{be.off("connect",_),be.off("disconnect",P),be.off("ha-connection-status",Q),be.off("device-counts",K),be.off("hue-connection-status",C),be.off("engine-status",G),be.off("engine-started",ue),be.off("engine-stopped",se),Rt&&Rt()}},[]),x.useEffect(()=>{const _=setInterval(()=>{ae(new Date)},1e3);return()=>clearInterval(_)},[]);const zt=()=>{const _={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return R.toLocaleDateString("en-US",_)};x.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(me))},[me]);const Mn=_=>{p||_.target.closest(".dock-header")&&(Je(!0),Qe({x:_.clientX-me.x,y:_.clientY-me.y}))},Fe=_=>{De&&ze({x:_.clientX-nt.x,y:_.clientY-nt.y})},bt=()=>{Je(!1)};x.useEffect(()=>{if(De)return window.addEventListener("mousemove",Fe),window.addEventListener("mouseup",bt),()=>{window.removeEventListener("mousemove",Fe),window.removeEventListener("mouseup",bt)}},[De,nt]);const nn=()=>{st.current?.click()},Nn=_=>{const P=_.target.files?.[0];if(P){const Q=new FileReader;Q.onload=K=>{try{const C=JSON.parse(K.target.result);c(C)}catch(C){console.error("Failed to parse JSON:",C),alert("Invalid JSON file")}},Q.readAsText(P)}_.target.value=""},Zn=async()=>{D(!0),J(!0);try{const _=await fn("/api/engine/graphs");if(_.ok){const P=await _.json();H(P.graphs||[])}else le.error("Failed to load graphs list"),H([])}catch(_){console.error("Failed to fetch server graphs:",_),le.error("Failed to connect to server"),H([])}finally{J(!1)}},Ta=async _=>{try{const P=await fn(`/api/engine/graphs/${encodeURIComponent(_)}`);if(P.ok){const Q=await P.json();Q.graph&&(c(Q.graph),D(!1),le.success(`Loaded: ${_.replace(".json","")}`))}else le.error("Failed to load graph")}catch(P){console.error("Failed to load graph:",P),le.error("Failed to load graph")}},Na=async(_,P)=>{P.stopPropagation();try{const Q=await fn(`/api/engine/graphs/${encodeURIComponent(_)}`);if(Q.ok){const K=await Q.json();if(K.graph){const C=new Blob([JSON.stringify(K.graph,null,2)],{type:"application/json"}),G=URL.createObjectURL(C),ue=document.createElement("a");ue.href=G,ue.download=_.endsWith(".json")?_:`${_}.json`,ue.click(),URL.revokeObjectURL(G),le.success(`Downloaded: ${_.replace(".json","")}`)}}else le.error("Failed to download graph")}catch(Q){console.error("Failed to download graph:",Q),le.error("Failed to download graph")}},L=async()=>{if(!B){q(!0);try{const _=await fn("/api/update/check?force=true");if(!_.ok){const Q=await _.text();throw new Error(Q||`HTTP ${_.status}`)}const P=await _.json();if(P.isAddon){P.hasUpdate?le.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):le.success(` You're up to date! (v${P.currentVersion})`,4e3);return}P.hasUpdate?le.info(` Update available: ${P.currentVersion}  ${P.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{be.emit("request-show-update-modal",P),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:P}))}}):le.success(` You're up to date! (v${P.currentVersion})`,4e3)}catch(_){console.error("Failed to check for updates:",_),le.error("Failed to check for updates: "+_.message,5e3)}finally{q(!1)}}},te=async()=>{if(!ye){ke(!0);try{const _=await fn("/api/update/plugins/check");if(!_.ok)throw new Error(`HTTP ${_.status}`);const P=await _.json();if(!P.hasUpdates){le.success(" Plugins are up to date!",3e3);return}const Q=(P.newPlugins?.length||0)+(P.modifiedPlugins?.length||0);le.info(` ${Q} plugin update(s) available. Downloading...`,3e3);const K=await fn("/api/update/plugins",{method:"POST"});if(!K.ok)throw new Error(`HTTP ${K.status}`);const C=await K.json();C.success&&C.updated?.length>0?le.success(` Updated ${C.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):C.updated?.length===0?le.info("No plugins needed updating",3e3):le.error("Plugin update failed: "+(C.error||"Unknown error"),5e3)}catch(_){console.error("Failed to update plugins:",_),le.error("Failed to update plugins: "+_.message,5e3)}finally{ke(!1)}}};return h.jsxs("div",{ref:ln,className:`dock-container ${p?"dock-merged":""}`,style:{...p?{cursor:"default"}:{left:`${me.x}px`,top:`${me.y}px`,cursor:De?"grabbing":"default"}},onMouseDown:Mn,children:[h.jsxs("div",{className:"dock-header",style:{cursor:p?"default":"grab"},children:[h.jsxs("div",{className:"dock-header-row",children:[h.jsx("span",{className:"dock-title",children:" Control Panel"}),h.jsx("button",{type:"button",className:"dock-btn-small",onClick:_=>{_.stopPropagation(),m?.()},onMouseDown:_=>_.stopPropagation(),title:p?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:p?"Pop out":"Merge"})]}),h.jsx("span",{className:"dock-datetime",children:zt()})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>he(!Y),children:h.jsxs("span",{children:[Y?"":""," Graph Tools ",d&&h.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),Y&&h.jsxs("div",{className:"dock-section-content",children:[h.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),h.jsx("button",{onClick:t,className:"dock-btn",children:" Load Last"}),h.jsx("button",{onClick:Zn,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),h.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),h.jsx("button",{onClick:nn,className:"dock-btn",children:" Import File"}),h.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),h.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),h.jsx("button",{onClick:()=>be.emit(vt.running?"stop-engine":"start-engine"),className:`dock-btn ${vt.running?"dock-btn-active":""}`,title:vt.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:vt.running?" Stop Engine":" Start Engine"}),h.jsx("input",{ref:st,type:"file",accept:".json",style:{display:"none"},onChange:Nn})]})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>Le(!ge),children:h.jsxs("span",{children:[ge?"":""," Connection Status"]})}),ge&&h.jsxs("div",{className:"dock-section-content dock-status-grid",children:[h.jsxs("div",{className:`dock-status-item ${de.backend?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Backend"}),h.jsx("span",{className:"dock-status-value",children:de.backend?"Connected":"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${de.ha.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),h.jsx("span",{className:"dock-status-value",children:de.ha.connected?`${de.ha.deviceCount} devices`:"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${de.hue.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),h.jsx("span",{className:"dock-status-value",children:de.hue.connected?`${de.hue.deviceCount||0} lights${de.hue.bridgeIp?` (${de.hue.bridgeIp})`:""}`:"Offline"})]}),de.kasa.deviceCount>0&&h.jsxs("div",{className:`dock-status-item ${de.kasa.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Kasa"}),h.jsxs("span",{className:"dock-status-value",children:[de.kasa.deviceCount," devices"]})]}),h.jsxs("div",{className:"dock-status-item plugins",children:[h.jsx("span",{className:"dock-status-dot",style:{background:$e.failed>0?"#f59e0b":"#10b981"}}),h.jsx("span",{className:"dock-status-label",children:"Plugins"}),h.jsx("span",{className:"dock-status-value",children:$e.total>0?`${$e.loaded} / ${$e.total} loaded${$e.failed>0?` (${$e.failed} failed)`:""}`:`${$e.loaded} loaded`})]}),h.jsxs("div",{className:`dock-status-item ${vt.running?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot",style:{background:vt.running?"#10b981":"#6b7280"}}),h.jsx("span",{className:"dock-status-label",children:"Engine"}),h.jsx("span",{className:"dock-status-value",children:vt.running?`Running (${vt.nodeCount} nodes)`:"Stopped"})]})]})]}),h.jsx(ZC,{isExpanded:ee,onToggle:()=>v(!ee)}),h.jsx(XC,{isExpanded:T,onToggle:()=>A(!T)}),h.jsxs("div",{className:"dock-section",children:[h.jsxs("div",{className:"dock-section-content",children:[h.jsx("button",{onClick:()=>w(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),h.jsx("button",{onClick:()=>k(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),h.jsx("button",{onClick:async()=>{let _=I||"unknown";try{const C=await fetch("/api/version");C.ok&&(_=(await C.json()).version||_)}catch{}const P={version:_,userAgent:navigator.userAgent,isAddon:lb,backend:de.backend,ha:de.ha.connected,engine:vt.running,plugins:$e.loaded},Q=Object.entries(P).map(([C,G])=>`- **${C}**: ${G}`).join(`
`),K=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");K.searchParams.set("template","bug_report.md"),K.searchParams.set("title","[Bug]: "),K.searchParams.set("body",`##  Environment (auto-filled)
${Q}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(K.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),h.jsx("button",{onClick:()=>{const _=`${window.location.origin}/tools/debug_dashboard.html`;window.open(_,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),lb?h.jsx("button",{onClick:()=>le.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):h.jsx("button",{onClick:L,disabled:B,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:B?" Checking...":" Check for Updates"}),h.jsx("button",{onClick:te,disabled:ye,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:ye?" Updating...":" Update Plugins"})]}),I&&h.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",I]})]}),h.jsx(YC,{isOpen:g,onClose:()=>w(!1)}),h.jsx(FC,{isOpen:b,onClose:()=>k(!1)}),E&&h.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:h.jsxs("div",{className:"modal server-graphs-modal",onClick:_=>_.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{children:" Saved Graphs"}),h.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:""})]}),h.jsx("div",{className:"modal-body",children:ne?h.jsx("div",{className:"loading-message",children:"Loading graphs..."}):X.length===0?h.jsxs("div",{className:"empty-message",children:[h.jsx("p",{children:"No saved graphs found."}),h.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):h.jsx("div",{className:"graphs-list",children:X.map((_,P)=>h.jsxs("div",{className:"graph-item",children:[h.jsxs("div",{className:"graph-info",onClick:()=>Ta(_.name),title:"Click to load this graph",children:[h.jsx("span",{className:"graph-name",children:_.displayName}),h.jsx("span",{className:"graph-date",children:new Date(_.modified).toLocaleDateString()})]}),h.jsx("button",{className:"graph-download-btn",onClick:Q=>Na(_.name,Q),title:"Download this graph to your computer",children:""})]},P))})})]})})]})}function JO({dockSlotRef:a}){const[t,r]=x.useState(!0),[s,l]=x.useState(!0),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,w]=x.useState(be?.connected??!1),[b,k]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,D]=x.useState(new Map),[X,H]=x.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[ne,J]=x.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[B,q]=x.useState(null),[ye,ke]=x.useState(null),[I,pe]=x.useState(null),[le,me]=x.useState(!1),ze=x.useRef(null);x.useEffect(()=>{(async()=>{try{const v=await fn(Tn("/api/settings"));if(v.ok){const T=await v.json(),A={tempSensor:T.FORECAST_TEMP_SENSOR||null,windSensor:T.FORECAST_WIND_SENSOR||null,windDirSensor:T.FORECAST_WIND_DIR_SENSOR||null,rainSensor:T.FORECAST_RAIN_SENSOR||null};(A.tempSensor||A.windSensor||A.windDirSensor||A.rainSensor)&&(ke(A),De(A))}}catch(v){console.warn("Could not fetch forecast sensor config:",v)}})()},[]);const De=async ee=>{if(!ee)return;const v={source:"ha-sensors"};try{if(ee.tempSensor){const T=await fn(Tn(`/api/lights/ha/${ee.tempSensor}/state`));if(T.ok){const A=await T.json();v.temp=parseFloat(A.state)}}if(ee.windSensor){const T=await fn(Tn(`/api/lights/ha/${ee.windSensor}/state`));if(T.ok){const A=await T.json();v.windSpeed=parseFloat(A.state)}}if(ee.windDirSensor){const T=await fn(Tn(`/api/lights/ha/${ee.windDirSensor}/state`));if(T.ok){const A=await T.json();v.windDir=parseFloat(A.state)}}if(ee.rainSensor){const T=await fn(Tn(`/api/lights/ha/${ee.rainSensor}/state`));if(T.ok){const A=await T.json();v.rainRate=parseFloat(A.state)}}v.temp!==void 0&&q(T=>({...T,...v}))}catch(T){console.warn("Error fetching sensor values:",T)}};x.useEffect(()=>{if(!be)return;const ee=()=>{w(!0),be.emit("request-ha-status")},v=()=>{w(!1),k({connected:!1,wsConnected:!1,deviceCount:0})},T=ae=>{k(ae)};be.on("connect",ee),be.on("disconnect",v),be.on("ha-connection-status",T),be.on("forecast-update",ae=>{d(ae)});const A=ae=>{q(de=>de?.source==="ha-sensors"||ye?.tempSensor?de:{temp:ae.tempf,humidity:ae.humidity,windSpeed:ae.windspeedmph,windDir:ae.winddir,rainRate:ae.hourlyrainin,dailyRain:ae.dailyrainin,source:ae._source||"ambient"})};be.on("weather-update",A),ye?.tempSensor||be.emit("request-weather-update");const R=ae=>{const{id:de,state:Se,on:$e,name:Pe}=ae;if(!de)return;if(ye){const ln=de.replace("ha_","");if(ln===ye.tempSensor){const st=parseFloat(Se);isNaN(st)||q(zt=>({...zt,temp:st,source:"ha-sensors"}))}else if(ln===ye.windSensor){const st=parseFloat(Se);isNaN(st)||q(zt=>({...zt,windSpeed:st}))}else if(ln===ye.windDirSensor){const st=parseFloat(Se);isNaN(st)||q(zt=>({...zt,windDir:st}))}else if(ln===ye.rainSensor){const st=parseFloat(Se);isNaN(st)||q(zt=>({...zt,rainRate:st}))}}const vt=$e!==void 0?$e:Se==="on"||Se==="playing"||Se==="open",$t=Pe||ae.friendly_name||ae.attributes?.friendly_name||de.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(de.includes("light.")||de.includes("switch.")||de.startsWith("kasa_"))&&D(ln=>{const st=new Map(ln);return vt?st.set(de,{name:$t,on:!0}):st.delete(de),st})};return be.on("device-state-update",R),be.emit("request-forecast"),be.connected&&(w(!0),be.emit("request-ha-status")),()=>{be.off("connect",ee),be.off("disconnect",v),be.off("ha-connection-status",T),be.off("forecast-update"),be.off("weather-update",A),be.off("device-state-update",R)}},[ye]),x.useEffect(()=>{if(!be||p===null){pe(null);return}me(!0);const ee=v=>{me(!1),v.error?(console.warn("Hourly rain fetch error:",v.error),pe(null)):pe(v)};return be.on("hourly-rain-update",ee),be.emit("request-hourly-rain",{dayOffset:p}),()=>{be.off("hourly-rain-update",ee)}},[p]);const Je=()=>{be?.emit("request-forecast"),ye?.tempSensor?De(ye):be?.emit("request-weather-update")},nt=ee=>{if(ee==null)return"";const v=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],T=Math.round(ee/22.5)%16;return v[T]},Qe=ee=>{const v=(ee||"").toLowerCase();return v.includes("clear")||v.includes("sun")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"5"}),h.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),h.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),h.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),h.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),h.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),h.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):v.includes("rain")||v.includes("drizzle")||v.includes("shower")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),h.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),h.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),h.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):v.includes("partly")||v.includes("partial")||v.includes("few")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),h.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),h.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),h.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),h.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):v.includes("snow")||v.includes("flurr")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),h.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),h.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),h.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),h.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),h.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):v.includes("thunder")||v.includes("storm")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),h.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):v.includes("fog")||v.includes("mist")||v.includes("haze")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),h.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):h.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},Y=ee=>{if(!ee)return{day:"",date:""};let v;if(typeof ee=="string"&&ee.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const R=ee.match(/(\w+),\s*(\w+)\s*(\d+)/);return R?{day:`${R[1]}, ${R[2]}`,date:R[3]}:{day:ee,date:""}}if(v=new Date(parseInt(ee)||ee),isNaN(v.getTime()))return{day:ee,date:""};const T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${T[v.getDay()]}, ${A[v.getMonth()]}`,date:`${v.getDate()}`}},he=()=>{if(!c||!c.length)return h.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(p!==null){const ee=c[p],v=Y(ee.date||ee.day);return h.jsxs("div",{className:"forecast-detail",children:[h.jsxs("div",{className:"forecast-detail-header",children:[h.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),h.jsxs("span",{className:"detail-date",children:[v.day," ",v.date]})]}),h.jsxs("div",{className:"detail-main",children:[h.jsx("div",{className:"detail-icon",children:Qe(ee.conditions||ee.condition)}),h.jsxs("div",{className:"detail-temps",children:[h.jsxs("div",{className:"detail-high",children:[ee.high,""]}),h.jsxs("div",{className:"detail-low",children:[ee.low,""]})]}),h.jsx("div",{className:"detail-condition",children:ee.conditions||ee.condition||"N/A"})]}),ee.description&&h.jsx("div",{className:"detail-description",children:ee.description}),h.jsxs("div",{className:"detail-stats",children:[h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Precipitation"}),h.jsx("span",{className:"stat-value",children:ee.precipitation||ee.precip||"0%"})]}),ee.humidity&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Humidity"}),h.jsxs("span",{className:"stat-value",children:[ee.humidity,"%"]})]}),ee.wind&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Wind"}),h.jsx("span",{className:"stat-value",children:ee.wind})]}),(ee.sunrise||ee.sunset)&&h.jsxs("div",{className:"detail-sun-times",children:[ee.sunrise&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunrise"}),h.jsx("span",{className:"stat-value",children:ee.sunrise})]}),ee.sunset&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunset"}),h.jsx("span",{className:"stat-value",children:ee.sunset})]})]})]}),h.jsxs("div",{className:"rain-timeline-section",children:[h.jsx("div",{className:"rain-timeline-header",children:h.jsx("span",{className:"rain-timeline-title",children:" Hourly Rain Forecast"})}),le?h.jsx("div",{className:"rain-timeline-loading",children:"Loading..."}):I&&I.hours?h.jsxs(h.Fragment,{children:[I.summary&&h.jsx("div",{className:"rain-summary",children:I.summary}),h.jsx("div",{className:"rain-timeline",children:I.hours.map((T,A)=>{const R=Math.max(4,T.probability),ae=T.intensity||"none",de=T.displayTime||`${T.hour||0}:00`;return h.jsxs("div",{className:`rain-bar-wrapper ${ae!=="none"?"has-rain":""}`,title:`${de}: ${T.probability}% chance${T.amountIn>0?`, ${T.amountIn}"`:""}`,children:[A%4===0&&T.probability>0&&h.jsxs("span",{className:"rain-prob-label",children:[T.probability,"%"]}),h.jsx("div",{className:`rain-bar rain-${ae}`,style:{height:`${R}%`}}),A%4===0&&h.jsx("span",{className:"rain-hour-label",children:de})]},A)})}),h.jsxs("div",{className:"rain-legend",children:[h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-none"}),"Dry"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-light"}),"Light"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-moderate"}),"Moderate"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-heavy"}),"Heavy"]})]})]}):h.jsx("div",{className:"rain-timeline-empty",children:"No rain expected"})]})]})}return c.slice(0,5).map((ee,v)=>{const T=Y(ee.date||ee.day),A=v===0;return h.jsxs("div",{className:`forecast-card ${A&&B?"forecast-card-today":""}`,onClick:()=>m(v),children:[h.jsxs("div",{className:"forecast-row-top",children:[h.jsxs("div",{className:"forecast-date",children:[h.jsx("span",{className:"date-day",children:T.day}),h.jsx("span",{className:"date-num",children:T.date})]}),h.jsx("div",{className:"forecast-icon",children:Qe(ee.conditions||ee.condition)})]}),A&&B&&h.jsxs("div",{className:"station-data",children:[h.jsxs("div",{className:"station-current-temp",children:[Math.round(B.temp),"",h.jsx("span",{className:"station-label",children:"now"})]}),h.jsxs("div",{className:"station-details",children:[h.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(B.windSpeed||0)," mph ",nt(B.windDir)]}),B.rainRate>0&&h.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",B.rainRate.toFixed(2),'"/hr']})]})]}),h.jsxs("div",{className:"forecast-row-bottom",children:[h.jsxs("span",{className:"temp-low",children:[ee.low,""]}),h.jsxs("span",{className:"temp-high",children:[ee.high,""]}),h.jsxs("span",{className:"precip-group",children:[h.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("path",{d:"M16 14v4"}),h.jsx("path",{d:"M8 14v4"}),h.jsx("path",{d:"M12 16v4"})]}),h.jsx("span",{className:"precip-value",children:ee.precipitation||ee.precip||"0%"})]})]})]},v)})},ge=ee=>{ee.preventDefault();const v=ee.clientX,T=X,A=ae=>{const de=v-ae.clientX,Se=Math.max(250,Math.min(500,T+de));H(Se),localStorage.setItem("forecastPanelWidth",Se)},R=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",R)},Le=ee=>{ee.preventDefault(),ee.stopPropagation();const v=ee.clientY,T=ne,A=ae=>{const de=v-ae.clientY,Se=Math.max(100,Math.min(500,T+de));J(Se),localStorage.setItem("devicesOnHeight",Se)},R=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",R)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",R)};return h.jsxs("div",{className:"forecast-panel",style:{width:X},children:[h.jsx("div",{className:"forecast-resize-handle",ref:ze,onMouseDown:ge,children:h.jsx("div",{className:"forecast-resize-grip"})}),h.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!t),children:[h.jsx("span",{children:"5-Day Forecast"}),h.jsx("button",{onClick:ee=>{ee.stopPropagation(),Je()},className:"forecast-refresh-btn",children:"Refresh"})]}),t&&h.jsx("div",{className:"forecast-panel-content",children:he()}),h.jsx("div",{className:"forecast-dock-slot",ref:a}),h.jsxs("div",{className:"devices-on-section",style:{height:s?ne:"auto"},children:[h.jsx("div",{className:"devices-resize-handle",onMouseDown:Le,children:h.jsx("div",{className:"devices-resize-grip"})}),h.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[h.jsxs("span",{children:["Devices ON (",E.size,")"]}),h.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&h.jsx("div",{className:"devices-on-list",children:E.size===0?h.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((ee,v)=>ee.name.localeCompare(v.name)).map((ee,v)=>h.jsxs("div",{className:"device-on-item",children:[h.jsx("span",{className:"device-on-indicator"}),h.jsx("span",{className:"device-on-name",children:ee.name})]},v))})]}),h.jsxs("div",{className:"status-indicators",children:[h.jsx("div",{className:`connection-status ${g?"connected":"disconnected"}`,children:g?"Backend":"Backend X"}),h.jsx("div",{className:`connection-status ${b.connected?"connected":"disconnected"}`,children:b.connected?`HA (${b.deviceCount})`:"HA X"})]})]})}function ej({width:a=180,panelRef:t,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const p=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,g=(s||[]).reduce((b,k)=>b+(k?.labels||[]).length,0),w=b=>{const k=(b||"").toString().trim();k&&c?.(k)};return h.jsxs("div",{ref:t,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:b=>b.stopPropagation(),children:[h.jsx("div",{className:"favorites-header",children:h.jsxs("div",{className:"favorites-header-row",children:[h.jsx("span",{className:"favorites-title",children:" Favorites"}),p?h.jsx(p,{text:m,position:"bottom",children:h.jsx("span",{className:"favorites-help-fallback",children:"?"})}):h.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),h.jsx("div",{className:"favorites-list",children:g===0?h.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(b=>{const k=(b?.category||"Other").toString(),E=Array.isArray(b?.labels)?b.labels:[];return E.length===0?null:h.jsxs("div",{className:"favorites-group",children:[h.jsx("div",{className:"favorites-divider",children:h.jsx("span",{className:"favorites-divider-text",children:k})}),E.map(D=>h.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(D),onContextMenu:X=>{X.preventDefault(),X.stopPropagation(),w(D)},title:"Click: add to canvas  Right-click: remove",children:D},`${k}:${D}`))]},k)})})]})}function tj({isOpen:a,onClose:t,onSave:r,currentGraphData:s}){const[l,c]=x.useState(""),[d,p]=x.useState([]),[m,g]=x.useState(!1),[w,b]=x.useState(!1),[k,E]=x.useState(null),D=x.useRef(null);x.useEffect(()=>{a&&(X(),setTimeout(()=>D.current?.focus(),100))},[a]);const X=async()=>{g(!0),E(null);try{const q=await(await fetch(Tn("/api/engine/graphs"))).json();q.success?p(q.graphs||[]):E("Failed to load existing graphs")}catch(B){console.error("[SaveModal] Error fetching graphs:",B),E("Failed to connect to server")}finally{g(!1)}},H=async()=>{if(!l.trim()){E("Please enter a filename");return}b(!0),E(null);try{const q=await(await fetch(Tn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();q.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${q.filename}"`,3e3),r?.(q.filename),t()):E(q.error||"Failed to save graph")}catch(B){console.error("[SaveModal] Error saving:",B),E("Failed to save graph")}finally{b(!1)}},ne=B=>{B.key==="Enter"&&!w?H():B.key==="Escape"&&t()},J=B=>{const q=B.replace(".json","");c(q),D.current?.focus()};return a?h.jsx("div",{className:"save-modal-overlay",onClick:t,children:h.jsxs("div",{className:"save-modal",onClick:B=>B.stopPropagation(),children:[h.jsxs("div",{className:"save-modal-header",children:[h.jsx("h2",{children:" Save Graph"}),h.jsx("button",{className:"save-modal-close",onClick:t,children:""})]}),h.jsxs("div",{className:"save-modal-content",children:[h.jsxs("div",{className:"save-modal-input-section",children:[h.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),h.jsxs("div",{className:"save-modal-input-row",children:[h.jsx("input",{ref:D,id:"graph-filename",type:"text",value:l,onChange:B=>c(B.target.value),onKeyDown:ne,placeholder:"my_automation_graph",disabled:w}),h.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),k&&h.jsxs("div",{className:"save-modal-error",children:[" ",k]}),h.jsxs("div",{className:"save-modal-existing",children:[h.jsxs("h3",{children:["Existing Graphs ",m&&h.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?h.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):h.jsx("ul",{className:"save-modal-list",children:d.map(B=>h.jsxs("li",{onClick:()=>J(B.name),className:l===B.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(B.modified).toLocaleString()}`,children:[h.jsx("span",{className:"graph-name",children:B.displayName}),h.jsx("span",{className:"graph-date",children:new Date(B.modified).toLocaleDateString()})]},B.name))})]})]}),h.jsxs("div",{className:"save-modal-footer",children:[h.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:t,disabled:w,children:"Cancel"}),h.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:H,disabled:w||!l.trim(),children:w?"Saving...":" Save"})]})]})}):null}function nj({visible:a,position:t,items:r,onClose:s,onSelect:l}){const c=x.useRef(null),d=x.useRef(null),[p,m]=x.useState(null),[g,w]=x.useState({x:0,y:0}),[b,k]=x.useState(""),E=x.useRef(null),D=x.useRef(null);x.useEffect(()=>{a&&(k(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const X=x.useMemo(()=>{if(!b.trim())return r;const I=b.toLowerCase(),pe=[];for(const le of r)if(le.subitems)for(const me of le.subitems)me.label&&me.label.toLowerCase().includes(I)&&pe.push({...me,categoryHint:le.label});else le.label&&le.label.toLowerCase().includes(I)&&pe.push(le);return pe},[r,b]),H=b.trim().length>0;x.useEffect(()=>{if(!a)return;const I=le=>{c.current&&!c.current.contains(le.target)&&s()},pe=le=>{le.key==="Escape"&&s()};return document.addEventListener("mousedown",I),document.addEventListener("keydown",pe),()=>{document.removeEventListener("mousedown",I),document.removeEventListener("keydown",pe)}},[a,s]),x.useEffect(()=>()=>{E.current&&clearTimeout(E.current),D.current&&clearTimeout(D.current)},[]);const ne=x.useCallback((I,pe,le)=>{D.current&&(clearTimeout(D.current),D.current=null),pe.subitems&&pe.subitems.length>0?m(le):m(null)},[]),J=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},150)},[]),B=x.useCallback(()=>{D.current&&(clearTimeout(D.current),D.current=null)},[]),q=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},100)},[]),ye=x.useCallback(I=>{I.subitems&&I.subitems.length>0||(l(I),s())},[l,s]);if(!a)return null;const ke={...t};if(typeof window<"u"){const pe=Math.min(X.length*36+50,400);t.x+220>window.innerWidth&&(ke.x=window.innerWidth-220-10),t.y+pe>window.innerHeight&&(ke.y=Math.max(10,window.innerHeight-pe-10))}return h.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:ke.x,top:ke.y},children:[h.jsxs("div",{className:"fast-menu-search",children:[h.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:b,onChange:I=>k(I.target.value),onClick:I=>I.stopPropagation(),onKeyDown:I=>{if(I.key==="Enter"&&X.length===1){const pe=X[0];pe.subitems||ye(pe)}I.stopPropagation()}}),b&&h.jsx("span",{className:"search-clear",onClick:I=>{I.stopPropagation(),k(""),d.current?.focus()},children:""})]}),h.jsx("div",{className:"fast-menu-results",children:X.length===0?h.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):H?X.map((I,pe)=>h.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>ye(I),children:[h.jsx("span",{className:"menu-label",children:I.label}),I.categoryHint&&h.jsx("span",{className:"category-hint",children:I.categoryHint})]},I.label||pe)):X.map((I,pe)=>h.jsxs("div",{className:`fast-menu-item ${I.subitems?"has-submenu":""} ${p===pe?"active":""}`,onMouseEnter:le=>ne(le,I,pe),onMouseLeave:J,onClick:()=>ye(I),children:[I.icon&&h.jsx("span",{className:"menu-icon",children:I.icon}),h.jsx("span",{className:"menu-label",children:I.label}),I.subitems&&h.jsx("span",{className:"submenu-arrow",children:""}),p===pe&&I.subitems&&h.jsx("div",{className:"fast-submenu",onMouseEnter:B,onMouseLeave:q,children:I.subitems.map((le,me)=>h.jsx("div",{className:"fast-menu-item",title:le.description||"",onClick:ze=>{ze.stopPropagation(),ye(le)},children:h.jsx("span",{className:"menu-label",children:le.label})},le.label||me))})]},I.label||pe))})]})}function cb(a){const t=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))t.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&t.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):t.push(`Node at index ${c} is missing "id"`),l.label||t.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&t.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))t.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||t.push(`Connection ${d} references non-existent source node: ${c.source}`):t.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||t.push(`Connection ${d} references non-existent target node: ${c.target}`):t.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const p=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(p)&&r.push(`Duplicate connection: ${p}`),l.add(p),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:t.length===0,errors:t,warnings:r}}function ub(a){const t=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],t.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],t.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,p)=>{if(!d.id)return t.push(`Removed node at index ${p} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${p}`;t.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",t.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},t.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,t.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,t.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,p)=>l.has(d.source)?l.has(d.target)?!0:(t.push(`Removed connection ${p} (invalid target: ${d.target})`),r=!0,!1):(t.push(`Removed connection ${p} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,t.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,t.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,t.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:t}}class Ej extends Kt.Control{constructor(t,r){super(),this.label=t,this.onClick=r}}function aj({data:a}){return h.jsx("button",{onPointerDown:t=>t.stopPropagation(),onDoubleClick:t=>t.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.25)",t.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.1)",t.currentTarget.style.boxShadow="none"},children:a.label})}class Cj extends Kt.Control{constructor(t,r,s,l){super(),this.label=t,this.values=r,this.value=s,this.onChange=l}setValue(t){this.value=t}}function rj({data:a}){const[,t]=x.useReducer(d=>d+1,0),[r,s]=x.useState(a.value);x.useEffect(()=>{s(a.value)},[a.value]),x.useEffect(()=>{t()},[a]);const l=d=>{const p=d.target.value;s(p),typeof a.setValue=="function"?a.setValue(p):a.value=p,a.onChange&&a.onChange(p)},c=a.values||[];return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,p)=>h.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${p}-${d}`))})]})}class Tj extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function ij({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Nj extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function sj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[h.jsx("input",{type:"checkbox",checked:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),h.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Oj extends Kt.Control{constructor(t,r,s,l={}){super(),this.label=t,this.value=r,this.onChange=s,this.options=l}}function oj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"number",value:t,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class jj extends Kt.Control{constructor(t,r,s,l="text"){super(),this.label=t,this.value=r,this.onChange=s,this.type=l}}function lj({data:a}){const[t,r]=x.useState(a.value);x.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:a.type||"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Aj extends Kt.Control{constructor(t,r){super(),this.deviceId=t,this.getState=r}}function cj({data:a}){const t=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!t)return h.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:h.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=t.on||t.state==="on",l=t.attributes&&typeof t.attributes.brightness=="number"?Number(t.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof t.brightness=="number"&&Number.isFinite(t.brightness)?c=t.brightness>100?Math.round(t.brightness/255*100):Math.round(t.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=t.hs_color||[0,0],[p,m]=d;let g="#e74c3c";s&&(m===0?g="#f1c40f":g=`hsl(${p}, ${m}%, 50%)`);const w={width:"14px",height:"14px",borderRadius:"50%",background:g,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:g,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${g}`:"none"};return h.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[h.jsx("div",{style:w}),h.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:t.name||a.deviceId})]}),h.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&h.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${g})`,transition:"width 0.3s ease-out"}})})]})}function uj(a){const{state:t,color:r}=a.data.data||{},s=t==="on"||t==="open"||t==="playing",l=r||(s?"#00f3ff":"#333");return h.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[h.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),h.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function dj(a){const[,t]=x.useState(0);x.useEffect(()=>{let b=JSON.stringify(a.data.data||{});const k=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==b&&(b=E,t(D=>D+1))},100);return()=>clearInterval(k)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let p="#444";s&&s.length===2?p=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(p="#ffaa00");const m=c==="on"||d===!0;let g=typeof r=="number"&&Number.isFinite(r)?r:0;g>100&&(g=g/255*100),g=Math.max(0,Math.min(100,g));const w=m?g:0;return h.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:b=>b.stopPropagation(),children:h.jsx("div",{style:{width:`${w}%`,height:"100%",backgroundColor:p,transition:"all 0.3s ease",boxShadow:w>0?`0 0 10px ${p}`:"none"}})})}function fj(a){const{power:t,energy:r}=a.data.data||{};return t===null&&r===null?h.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):h.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"PWR:"}),h.jsx("span",{style:{color:"#00f3ff"},children:t!==null?`${t} W`:"--"})]}),r!==null&&h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"NRG:"}),h.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const hj=window.EDITOR_DEBUG,Ne=(...a)=>hj&&console.debug("[Editor]",...a),pj=Ea.memo(({data:a,socketKey:t,side:r})=>{let l=a?.name||"any";if(t&&typeof t=="string"){const d=t.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${t||"socket"} (${l})`;return Ea.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function mj(){const a=x.useRef(null),[t,r]=x.useState(null),[s,l]=x.useState(null),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,w]=x.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),b=x.useRef(null),k=x.useRef(null);x.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(g))}catch{}},[g]);const E=x.useRef(!1),D=x.useRef(new Set),X=x.useRef(null),H=x.useRef(!1),ne=x.useRef(null),J=x.useRef(null),B=x.useRef(null),q=x.useRef({x:0,y:0}),ye=x.useRef(!1),ke=x.useRef([]),[I,pe]=x.useState([]),le=x.useRef(null),[me,ze]=x.useState({visible:!1,query:"",results:[],selectedIndex:0}),[De,Je]=x.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),nt=180,Qe="favoriteNodes",[Y,he]=x.useState(()=>{try{const L=localStorage.getItem(Qe),te=L?JSON.parse(L):null,_=K=>{const C=[];for(const G of Array.isArray(K)?K:[]){if(typeof G!="string")continue;const ue=G.trim();ue&&(C.includes(ue)||C.push(ue))}return C};if(Array.isArray(te)){const K=_(te);return K.length?[{category:"Other",labels:K}]:[]}const P=Array.isArray(te?.groups)?te.groups:Array.isArray(te?.favoriteGroups)?te.favoriteGroups:Array.isArray(te)?te:null;if(!P)return[];const Q=[];for(const K of P){const C=(K?.category||"Other").toString().trim()||"Other",G=_(K?.labels);G.length!==0&&Q.push({category:C,labels:G})}return Q}catch{return[]}}),ge=x.useRef(null),[Le,ee]=x.useState(!1),v=x.useRef(null),[T,A]=x.useState(!1),[R,ae]=x.useState(null);x.useEffect(()=>{try{localStorage.setItem(Qe,JSON.stringify({version:2,groups:Y}))}catch{}},[Y]);const de=x.useCallback(L=>{const te=(L||"").toString().trim();if(!te)return;const P=(_n.getByLabel(te)?.category||"Other").toString().trim()||"Other";he(Q=>{for(const G of Q)if(Array.isArray(G?.labels)&&G.labels.includes(te))return Q;const K=Q.map(G=>({category:G.category,labels:[...G.labels]})),C=K.findIndex(G=>G.category===P);return C===-1?K.push({category:P,labels:[te]}):K[C].labels.push(te),K})},[]),Se=x.useCallback(L=>{const te=(L||"").toString().trim();te&&he(_=>{const P=[];for(const Q of _){const K=(Q?.labels||[]).filter(C=>C!==te);K.length!==0&&P.push({category:Q.category,labels:K})}return P})},[]),$e=x.useCallback(async L=>{const te=a.current,_=ne.current,P=J.current;if(!te||!_||!P)return;const Q=te.getBoundingClientRect(),K={x:Q.left+Q.width/2,y:Q.top+Q.height/2};try{const ue=window._t2GetMenuItems;if(typeof ue=="function"){const se=ue();for(const xe of se||[])for(const ve of xe.subitems||[])if(ve.label===L&&typeof ve.handler=="function"){await ve.handler(K);return}}}catch(ue){console.warn("[Favorites] Failed to create via context handlers:",ue)}const C=_n.getByLabel(L);if(!C)return;const G=()=>{try{X.current?.()}catch{}};try{const ue=C.factory(G);await _.addNode(ue);const se=P.area.transform,xe=(K.x-se.x)/se.k,ve=(K.y-se.y)/se.k;await P.translate(ue.id,{x:xe,y:ve}),L==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(ue){console.warn("[Favorites] Fallback create failed:",ue)}},[]);x.useEffect(()=>{try{const L=_n.getAll();if(L.length===0)return;const te=new Map;for(const _ of L)_?.label&&te.set(_.label,(_.category||"Other").toString().trim()||"Other");he(_=>{const P=[],Q=new Map,K=(C,G)=>{Q.has(C)||(Q.set(C,[]),P.push(C));const ue=Q.get(C);ue.includes(G)||ue.push(G)};for(const C of _)for(const G of C?.labels||[]){const ue=te.get(G);ue&&K(ue,G)}return P.map(C=>({category:C,labels:Q.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[t]);const Pe=x.useCallback(async L=>{await new Promise(Z=>{const fe=()=>{const we=L.getBoundingClientRect();we.width>0&&we.height>0?Z():requestAnimationFrame(fe)};requestAnimationFrame(fe)});const te=new ai,_=new Rb(L),P=new C2,Q=new AC({createRoot:hb.createRoot}),K=new HC;te.use(K);let C=0,G=0,ue=Date.now();window._t2PerfStats=()=>{const Z=(Date.now()-ue)/1e3;return console.log(`[Perf] In ${Z.toFixed(1)}s: ${C} process calls, ${G} skipped (${(C/Z).toFixed(1)}/sec)`),{calls:C,skipped:G,perSecond:C/Z}},window._t2PerfReset=()=>{C=0,G=0,ue=Date.now(),console.log("[Perf] Stats reset")};let se=null;const xe=()=>{const Z=te?.getNodes?.()?.length||0;return Z<50?16:Z<100?32:Z<150?50:100};let ve=!1;const Oe=async()=>{if(ve){G++;return}if(se)return;C++;const Z=xe();se=setTimeout(async()=>{se=null,ve=!0;try{const fe=te.getNodes(),we=te.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",fe.map(je=>`${je.id}:${je.label}`)),console.log("[Editor] process() - connections:",we.map(je=>`${je.source}:${je.sourceOutput} -> ${je.target}:${je.targetInput}`)),window._debugProcess=!1),K.reset();for(const je of fe)try{await K.fetch(je.id)}catch{}}finally{ve=!1}},Z)},_e=async()=>{if(!ve){se&&(clearTimeout(se),se=null),ve=!0;try{K.reset();for(const Z of te.getNodes())try{await K.fetch(Z.id)}catch{}}finally{ve=!1}}},et=new Set;let Ge=null;const Xe=Z=>{et.add(Z),Ge||(Ge=setTimeout(()=>{Ge=null,et.forEach(fe=>{_.update("node",fe)}),et.clear(),Oe()},16))},Ee=()=>{Oe()},St=()=>{const Z=_n.getAll(),fe={};Z.forEach(je=>{const Ue=je.category||"Other";fe[Ue]||(fe[Ue]=[]),fe[Ue].push({label:je.label,order:je.order,description:je.description,handler:async mt=>{let Ct;const an=()=>{je.updateStrategy==="dataflow"?Ee():Xe(Ct.id)};Ct=je.factory(an),await te.addNode(Ct);const rn=_.area.transform,jn=(mt.x-rn.x)/rn.k,Yt=(mt.y-rn.y)/rn.k;await _.translate(Ct.id,{x:jn,y:Yt}),je.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const we=window.T2Controls?.THEME?.categories||{};return Object.entries(fe).map(([je,Ue])=>({label:je,icon:we[je]?.icon||"",subitems:Ue.sort((mt,Ct)=>{const an=mt.order??999,rn=Ct.order??999;return an!==rn?an-rn:mt.label.localeCompare(Ct.label)})})).sort((je,Ue)=>je.label.localeCompare(Ue.label))};window._t2GetMenuItems=St,window._t2Editor=te,window._t2Area=_,window._t2Process=Oe,window._t2ProcessImmediate=_e,window._t2Engine=K,window._t2GetGraphData=()=>{try{const Z=window._t2Editor,fe=window._t2Area;if(!Z||!fe)return console.warn("[_t2GetGraphData] Editor or area not available"),null;if(window.graphLoading)return null;const we=Z.getNodes().map(Ue=>{const mt=typeof Ue.toJSON=="function"?Ue.toJSON():{...Ue};return Ue.properties&&(mt.properties=Ue.properties),{id:Ue.id,label:Ue.label,position:fe.nodeViews.get(Ue.id)?.position||{x:0,y:0},data:mt}}),Te=Z.getConnections().map(Ue=>({id:Ue.id,source:Ue.source,target:Ue.target,sourceOutput:Ue.sourceOutput,targetInput:Ue.targetInput})),je=fe.area?.transform?{x:fe.area.transform.x,y:fe.area.transform.y,k:fe.area.transform.k}:{x:0,y:0,k:1};return{nodes:we,connections:Te,viewport:je,syncedOnClose:!0,timestamp:Date.now()}}catch(Z){return console.warn("[_t2GetGraphData] Failed to serialize graph:",Z),null}};const Ve=Ra.selector();Q.addPreset(Df.classic.setup({customize:{node(Z){const fe=_n.getByInstance(Z.payload);return fe?fe.component:Df.classic.Node},socket(Z){const fe=Z.key,we=Z.side;return function({data:je}){return Ea.createElement(pj,{data:je,socketKey:fe,side:we})}},control(Z){if(Z.payload instanceof Kt.Control){const we=Z.payload.constructor.name;if(we==="ButtonControl")return aj;if(we==="DropdownControl")return rj;if(we==="TextControl")return ij;if(we==="SwitchControl")return sj;if(we==="NumberControl")return oj;if(we==="InputControl")return lj;if(we==="DeviceStateControl")return cj;if(we==="StatusIndicatorControl")return uj;if(we==="ColorBarControl")return dj;if(we==="PowerStatsControl")return fj}return Df.classic.Control}}})),P.addPreset(w2.classic.setup()),te.use(_),_.use(P),_.use(Q),Ra.selectableNodes(_,Ve,{accumulating:Ra.accumulateOnCtrl()}),Ra.simpleNodesOrder(_),te.addPipe(Z=>{if(Z.type==="nodecreated"){const fe=Z.data,we=_n.getByInstance(fe);we&&we.isBackdrop&&setTimeout(()=>{const Te=_.nodeViews.get(fe.id);Te&&Te.element&&(Te.element.style.zIndex="-10",Ne("[Backdrop] Set z-index on creation for:",fe.id))},50)}return Z});let xt=!1,Gt=!1,ct={x:0,y:0};P.addPipe(Z=>(Z.type==="connectionpick"?(xt=!0,Ne(" Connection pick - wire dragging started")):Z.type==="connectiondrop"&&(xt=!1,Gt=!1,Ne(" Connection drop - wire dragging ended")),Z));const Ut=Z=>{if(xt)if(Z.ctrlKey||Z.metaKey)if(!Gt)Gt=!0,ct={x:Z.clientX,y:Z.clientY},L.style.cursor="grab";else{const fe=Z.clientX-ct.x,we=Z.clientY-ct.y;if(fe!==0||we!==0){const Te=_.area.transform;_.area.translate(Te.x+fe,Te.y+we),ct={x:Z.clientX,y:Z.clientY}}}else Gt&&(Gt=!1,L.style.cursor="")},hn=Z=>{(Z.key==="Control"||Z.key==="Meta")&&Gt&&(Gt=!1,L.style.cursor="")};window.addEventListener("pointermove",Ut),window.addEventListener("keyup",hn);let kn=!1,cn=!1,pn=null,$a=!1,er={x:0,y:0},On={x:0,y:0};const kr=Z=>{Z.code==="Space"&&kn&&pn&&($a=!0,On={x:0,y:0},Z.preventDefault())},ii=Z=>{if(Z.code==="Space"&&($a=!1,cn&&pn)){const fe=_.nodeViews.get(pn);if(fe){const we=_.area.transform,Te=On.x/we.k,je=On.y/we.k,Ue={x:fe.position.x-Te,y:fe.position.y-je};E.current=!0,_.translate(pn,Ue).finally(()=>{E.current=!1})}cn=!1,L.style.cursor=""}},si=Z=>{if(!(!kn||!pn))if($a)if(!cn)cn=!0,er={x:Z.clientX,y:Z.clientY},On={x:0,y:0},L.style.cursor="grab";else{const fe=Z.clientX-er.x,we=Z.clientY-er.y;if(fe!==0||we!==0){const Te=_.area.transform;_.area.translate(Te.x+fe,Te.y+we),On.x+=fe,On.y+=we,er={x:Z.clientX,y:Z.clientY}}}else cn&&(cn=!1,L.style.cursor="")};window.addEventListener("keydown",kr,!0),window.addEventListener("keyup",ii,!0),L.addEventListener("pointermove",si,!0);const At=document.createElement("div");At.classList.add("selection-box"),L.appendChild(At);let N=!1,O={x:0,y:0};const F=D.current,oe=()=>{N&&(Ne(" Safety reset: clearing stuck lasso selection"),N=!1,At.style.display="none")},Me=()=>{oe(),window.resetEditorDragState&&window.resetEditorDragState()},Pt=()=>{document.hidden&&(oe(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",Me),document.addEventListener("visibilitychange",Pt);const Rn=Z=>{try{const fe=Z.target;fe&&(fe.tagName==="INPUT"||fe.tagName==="TEXTAREA"||fe.isContentEditable)||(L.tabIndex=-1,L.focus())}catch{}if((Z.ctrlKey||Z.metaKey)&&Z.button===0){Z.stopPropagation(),Z.preventDefault(),N=!0;const fe=L.getBoundingClientRect();O={x:Z.clientX-fe.left,y:Z.clientY-fe.top},At.style.display="block",At.style.left=`${O.x}px`,At.style.top=`${O.y}px`,At.style.width="0px",At.style.height="0px",Z.shiftKey||(F.forEach(we=>{const Te=_.nodeViews.get(we);Te&&Te.element&&(Te.element.classList.remove("selected"),Te.element.style.outline="")}),F.clear(),Ve&&Ve.entities&&Array.from(Ve.entities).forEach(we=>Ve.remove(we)))}},qe=Z=>{if(!N)return;const fe=L.getBoundingClientRect(),we=Z.clientX-fe.left,Te=Z.clientY-fe.top,je=Math.min(O.x,we),Ue=Math.min(O.y,Te),mt=Math.abs(we-O.x),Ct=Math.abs(Te-O.y);At.style.left=`${je}px`,At.style.top=`${Ue}px`,At.style.width=`${mt}px`,At.style.height=`${Ct}px`},Qt=Z=>{if(!N)return;const fe=At.getBoundingClientRect();if(N=!1,At.style.display="none",fe.width<5&&fe.height<5)return;const we=[];te.getNodes().forEach(Te=>{const je=_.nodeViews.get(Te.id);if(je&&je.element){const Ue=je.element.getBoundingClientRect();fe.left<=Ue.left&&fe.right>=Ue.right&&fe.top<=Ue.top&&fe.bottom>=Ue.bottom&&we.push({node:Te,view:je})}}),we.forEach(({node:Te,view:je})=>{F.add(Te.id),Ve.add({id:Te.id,label:"node",translate(Ue,mt){},unselect(){je.element.classList.remove("selected"),je.element.style.outline=""}},!1),je.element.classList.add("selected"),je.element.style.outline="3px solid #00f3ff"})},pt=()=>{F.size>0&&(F.forEach(Z=>{const fe=_.nodeViews.get(Z);fe&&fe.element&&(fe.element.classList.remove("selected"),fe.element.style.outline="")}),F.clear()),Ve&&Ve.entities&&(Ve.entities instanceof Map?Array.from(Ve.entities.values()):Array.from(Ve.entities)).forEach(fe=>{fe.unselect&&fe.unselect(),Ve.remove(fe)}),te.getNodes().forEach(Z=>{const fe=_.nodeViews.get(Z.id);fe&&fe.element&&fe.element.classList.remove("selected")})},Ua=Z=>{if(!Z.ctrlKey&&!Z.metaKey&&!N){let fe=!1;for(const[we,Te]of _.nodeViews)if(Te.element.contains(Z.target)){fe=!0;break}if(!fe){const we=Z.target;(we===L||we.classList.contains("rete-area")||we.closest('[data-testid="area"]'))&&pt()}}};L.addEventListener("pointerdown",Rn,{capture:!0}),L.addEventListener("click",Ua),window.addEventListener("pointermove",qe),window.addEventListener("pointerup",Qt),te.addPipe(Z=>((Z.type==="connectioncreated"||Z.type==="connectionremoved")&&Oe(),Z));let Wt={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},qt=!1,Ha=null;const Er=Z=>{qt=Z,Ha&&(clearTimeout(Ha),Ha=null),Z&&(Ha=setTimeout(()=>{qt&&(Ne(" Safety reset: clearing stuck isGroupMoving"),qt=!1),Ha=null},500))},tr=()=>{N&&(Ne(" Resetting stuck lasso selection"),N=!1,At.style.display="none"),qt&&(Ne(" Resetting stuck group moving"),Er(!1)),Wt.isDragging&&(Ne(" Resetting stuck backdrop drag"),Wt.isDragging=!1,Wt.activeBackdropId=null,Wt.nodesBeingMoved.clear())};window.resetEditorDragState=tr;function Va(){const Z=te.getNodes(),fe=Z.filter(Te=>{const je=_n.getByInstance(Te);return je&&je.isBackdrop}),we=Z.filter(Te=>{const je=_n.getByInstance(Te);return!je||!je.isBackdrop});fe.forEach(Te=>{const je=_.nodeViews.get(Te.id);if(!je)return;je.element&&(je.element.style.zIndex="-10");const Ue=je.position,mt=[],Ct=Te.properties.width||400,an=Te.properties.height||300,rn=(Yt,En,oi)=>{const mn=Yt.x+En/2,Oa=Yt.y+oi/2;return mn>=Ue.x&&mn<=Ue.x+Ct&&Oa>=Ue.y&&Oa<=Ue.y+an};we.forEach(Yt=>{const En=_.nodeViews.get(Yt.id);if(!En)return;En.element&&parseInt(En.element.style.zIndex||"0",10)<0&&(En.element.style.zIndex="1");const oi=En.position,mn=Yt.width||180,Oa=Yt.height||100;rn(oi,mn,Oa)&&mt.push(Yt.id)}),fe.forEach(Yt=>{if(Yt.id===Te.id)return;const En=_.nodeViews.get(Yt.id);if(!En)return;const oi=En.position,mn=Yt.properties.width||400,Oa=Yt.properties.height||300;mn>=Ct||Oa>=an||rn(oi,mn,Oa)&&mt.push(Yt.id)});const jn=Te.properties.capturedNodes.length;Te.properties.capturedNodes=mt,jn!==mt.length&&Te.changeCallback&&Te.changeCallback()})}return _.updateBackdropCaptures=Va,_.addPipe(Z=>{if(Z.type==="nodepicked"){const fe=Z.data.id,we=te.getNode(fe);kn=!0,pn=fe,cn=!1;try{if(we&&v?.current!==void 0){const je=_.nodeViews.get(fe)?.position||{x:0,y:0};v.current={nodeId:fe,label:we.label,startPos:je,active:!1,over:!1}}}catch{}if(we){const je=_n.getByInstance(we);if(je&&je.isBackdrop&&we.properties.locked)return}!ye.current&&!F.has(fe)&&(F.forEach(je=>{const Ue=_.nodeViews.get(je);Ue&&Ue.element&&(Ue.element.classList.remove("selected"),Ue.element.style.outline="")}),F.clear()),F.add(fe);const Te=_.nodeViews.get(fe);Te&&Te.element&&(Te.element.classList.add("selected"),Te.element.style.outline="3px solid #00f3ff")}return Z}),_.addPipe(Z=>{try{if(E.current)return Z;const fe=we=>{const Te=ge.current?.getBoundingClientRect();if(!Te)return!1;const Ue=_.nodeViews.get(we)?.element;if(!Ue)return!1;const mt=Ue.getBoundingClientRect(),Ct=mt.left+mt.width/2,an=mt.top+mt.height/2;return Ct>=Te.left&&Ct<=Te.right&&an>=Te.top&&an<=Te.bottom};if(Z.type==="nodetranslate"){const we=v.current;if(!we)return Z;const Te=Z.data?.id;if(!Te||we.nodeId!==Te)return Z;we.active||(we.active=!0,!we.startPos&&Z.data?.previous&&(we.startPos=Z.data.previous));const je=fe(Te);return je!==we.over&&(we.over=je,ee(je)),Z}if(Z.type==="nodedragged"){const we=v.current;if(!we)return Z;const Te=Z.data?.id;if(!Te||we.nodeId!==Te)return Z;if(we.active&&fe(Te)){de(we.label);const Ue=we.startPos;Ue&&setTimeout(()=>{try{_.translate(Te,Ue)}catch{}},0)}return v.current=null,ee(!1),Z}}catch{}return Z}),_.addPipe(Z=>{if(Z.type==="render"&&Z.data?.payload){const fe=Z.data.payload,we=_n.getByInstance(fe);we&&we.isBackdrop&&setTimeout(()=>{const Te=_.nodeViews.get(fe.id);if(Te&&Te.element){Te.element.style.zIndex!=="-10"&&(Te.element.style.zIndex="-10");const je=fe.properties.locked?"none":"auto";Te.element.style.pointerEvents!==je&&(Te.element.style.pointerEvents=je)}},0)}if(Z.type==="nodetranslate"){if(E.current||qt)return Z;const fe=Z.data.id,we=te.getNode(fe);if(!we)return Z;const Te=Z.data.position,je=Z.data.previous,Ue=Te.x-je.x,mt=Te.y-je.y;if(Ue===0&&mt===0)return Z;if(cn&&pn===fe)return{...Z,data:{...Z.data,position:Z.data.previous}};if(F.size>1&&F.has(fe)){Er(!0);const an=[];return F.forEach(rn=>{if(rn!==fe){const jn=_.nodeViews.get(rn);if(jn){const Yt=jn.position.x+Ue,En=jn.position.y+mt;an.push(_.translate(rn,{x:Yt,y:En}))}}}),Promise.all(an).then(()=>{Er(!1)}),Z}const Ct=_n.getByInstance(we);if(Ct&&Ct.isBackdrop){if(we.properties.locked)return{...Z,data:{...Z.data,position:Z.data.previous}};if(Wt.isDragging&&Wt.nodesBeingMoved.has(fe)&&Wt.activeBackdropId!==fe)return Z;if(Wt.activeBackdropId!==fe){Wt.activeBackdropId=fe,Wt.isDragging=!0,Wt.nodesBeingMoved.clear(),Va();const an=rn=>{rn.forEach(jn=>{Wt.nodesBeingMoved.add(jn);const Yt=te.getNode(jn);Yt&&Yt.properties.capturedNodes&&an(Yt.properties.capturedNodes)})};an(we.properties.capturedNodes)}if(we.properties.capturedNodes.length>0){Er(!0);const an=[];return we.properties.capturedNodes.forEach(rn=>{if(!F.has(rn)){const jn=_.nodeViews.get(rn);if(jn){const Yt=jn.position.x+Ue,En=jn.position.y+mt;an.push(_.translate(rn,{x:Yt,y:En}))}}}),Promise.all(an).then(()=>{Er(!1)}),Z}}}if(Z.type==="nodedragged"){if(E.current)return Z;Wt.isDragging=!1,Wt.activeBackdropId=null,Wt.nodesBeingMoved.clear(),kn=!1,pn=null,cn&&(cn=!1,L.style.cursor=""),Va()}return Z}),ne.current=te,J.current=_,B.current=Ve,window.updateBackdropLockState=(Z,fe)=>{const we=_.nodeViews.get(Z);we&&we.element&&(we.element.style.pointerEvents=fe?"none":"auto",Ne(" Updated backdrop lock state:",Z,"locked:",fe))},r(te),l(_),d(K),{destroy:()=>{L.removeEventListener("pointerdown",Rn,{capture:!0}),L.removeEventListener("click",Ua),L.removeEventListener("pointermove",si,!0),window.removeEventListener("pointermove",qe),window.removeEventListener("pointerup",Qt),window.removeEventListener("pointermove",Ut),window.removeEventListener("keyup",hn),window.removeEventListener("keydown",kr,!0),window.removeEventListener("keyup",ii,!0),window.removeEventListener("blur",Me),document.removeEventListener("visibilitychange",Pt),Ha&&clearTimeout(Ha),At.parentNode&&At.parentNode.removeChild(At),_.destroy()},selector:Ve,editor:te,area:_,engine:K,process:Oe,processImmediate:_e}},[]);x.useEffect(()=>{const L=a.current;if(!L)return;let te=null,_=null,P=null;const Q=new Map,K=se=>{try{typeof se.pointerId=="number"&&Q.set(se.pointerId,{el:se.target,pointerType:se.pointerType||"mouse"})}catch{}},C=se=>{try{typeof se.pointerId=="number"&&Q.delete(se.pointerId)}catch{}},G=se=>{try{typeof se.pointerId=="number"&&Q.delete(se.pointerId)}catch{}};L.addEventListener("gotpointercapture",K,!0),L.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",G,!0),window.addEventListener("pointercancel",G,!0),_=ZO().then(()=>(Ne(" External plugins loaded, now creating editor..."),Pe(L))).then(se=>{se.editor,te=se.area,se.engine,se.selector,r(se.editor),l(se.area),d(se.engine),m(se.selector),X.current=se.processImmediate,setTimeout(()=>{if(L){L.tabIndex=-1,L.focus();const ve=L.getBoundingClientRect(),Oe=ve.left+ve.width/2,_e=ve.top+ve.height/2,et=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Oe,clientY:_e,deltaY:0});L.dispatchEvent(et),Ne(" Container initialized and focused"),window.resetEditorView=()=>{Ne(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ge=L.getBoundingClientRect(),Xe=Ge.left+Ge.width/2,Ee=Ge.top+Ge.height/2;L.tabIndex=-1,L.focus();try{const Ve=Array.from(Q.entries());Q.clear(),Ve.forEach(([xt,Gt])=>{const ct=Gt?.el,Ut=Gt?.pointerType||"mouse";try{const hn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:xt,pointerType:Ut});L.dispatchEvent(hn)}catch{}try{L.releasePointerCapture(xt)}catch{}try{ct&&typeof ct.releasePointerCapture=="function"&&ct.releasePointerCapture(xt)}catch{}})}catch{}try{for(let xt=0;xt<5;xt++)try{L.releasePointerCapture(xt)}catch{}L.querySelectorAll(".node, .connection, [data-drag]").forEach(xt=>{try{xt.releasePointerCapture(1)}catch{}})}catch{}if(te){const Ve=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});L.dispatchEvent(Ve);const xt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});L.dispatchEvent(xt)}setTimeout(()=>{const Ve=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:Ee,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),xt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:Ee,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});L.dispatchEvent(Ve),setTimeout(()=>{L.dispatchEvent(xt);const Gt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:Ee,deltaY:0});L.dispatchEvent(Gt),Ne(" Reset complete")},50)},50)})}}},100);let xe=!1;return P=new ResizeObserver(ve=>{for(const Oe of ve){const{width:_e,height:et}=Oe.contentRect;!xe&&_e>0&&et>0&&(xe=!0,Ne(" ResizeObserver: Container now has size",_e,et),setTimeout(()=>{L.focus();const Ge=L.getBoundingClientRect(),Xe=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ge.left+Ge.width/2,clientY:Ge.top+Ge.height/2,deltaY:0});L.dispatchEvent(Xe)},50))}}),P.observe(L),se});const ue=()=>{Ne(" graphLoadComplete event received - triggering view reset");const se=()=>{window.resetEditorView&&window.resetEditorView()};se(),setTimeout(se,100),setTimeout(se,500),setTimeout(se,1e3)};return window.addEventListener("graphLoadComplete",ue),()=>{P&&P.disconnect(),window.removeEventListener("graphLoadComplete",ue),L.removeEventListener("gotpointercapture",K,!0),L.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",G,!0),window.removeEventListener("pointercancel",G,!0),_.then(se=>se.destroy())}},[Pe]),x.useEffect(()=>{if(!t||!s||!p)return;const L=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Ne(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Ne(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const ve=J.current,Oe=ne.current;if(ve&&Oe){const _e=Oe.getNodes();_e.length>0&&(Ne(" Zoom extents triggered (F key)"),Ra.zoomAt(ve,_e,{scale:.9}).catch(et=>{console.warn("[F key] zoomAt failed:",et)}))}return}if((C.ctrlKey||C.metaKey)&&C.code==="KeyF"){C.preventDefault(),ze(ve=>({visible:!ve.visible,query:"",results:[],selectedIndex:0}));return}const G=ne.current,ue=J.current,se=B.current;if(!G||!ue){Ne(" No editor/area ref available");return}const xe=()=>{const ve=new Set;if(se&&se.entities&&se.entities instanceof Map)for(const[Oe,_e]of se.entities)G.getNode(Oe)&&ve.add(Oe);for(const Oe of D.current){const _e=G.getNode(Oe);Ne(` Checking node ${Oe}: exists=${!!_e}`),_e&&ve.add(Oe)}return Ne(` Found ${ve.size} selected nodes:`,Array.from(ve)),Array.from(ve)};if(C.code==="Delete"||C.code==="Backspace"){Ne(" Delete key pressed. lassoSelectedNodesRef.current size:",D.current.size),Ne(" lassoSelectedNodesRef.current contents:",Array.from(D.current));const ve=xe();if(Ne(` Deleting ${ve.length} nodes:`,ve),ve.length>0){const Oe=[],_e=[],et=new Set(ve);for(const Ge of G.getConnections())(et.has(Ge.source)||et.has(Ge.target))&&_e.push({source:Ge.source,target:Ge.target,sourceOutput:Ge.sourceOutput,targetInput:Ge.targetInput});for(const Ge of ve){const Xe=G.getNode(Ge);Xe&&Oe.push({id:Ge,label:Xe.label,position:ue.nodeViews.get(Ge)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(Xe.properties||{}))})}ke.current.push({type:"delete",nodes:Oe,connections:_e}),Ne(" Saved undo state:",ke.current.length,"items in stack");for(const Ge of ve){const Xe=G.getConnections().filter(Ee=>Ee.source===Ge||Ee.target===Ge);for(const Ee of Xe)await G.removeConnection(Ee.id);await G.removeNode(Ge),D.current.delete(Ge)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),ke.current.length===0){Ne(" Nothing to undo");return}const ve=ke.current.pop();if(Ne(" Undoing:",ve.type,ve.nodes.length,"nodes"),ve.type==="delete"){const Oe={};E.current=!0;try{for(const _e of ve.nodes){const et=_n.getByLabel(_e.label);if(et){let Ge;const Xe=()=>{ue&&ue.update("node",Ge.id),c&&G&&(c.reset(),setTimeout(()=>{G.getNodes().forEach(async St=>{try{await c.fetch(St.id)}catch{}})},0))},Ee=()=>{et.updateStrategy==="dataflow"?(c&&c.reset(),c&&G&&setTimeout(()=>{G.getNodes().forEach(async St=>{try{await c.fetch(St.id)}catch{}})},0)):Xe()};Ge=et.factory(Ee),_e.properties&&Object.assign(Ge.properties,_e.properties),await G.addNode(Ge),await ue.translate(Ge.id,_e.position),Oe[_e.id]=Ge.id}}for(const _e of ve.connections){const et=Oe[_e.source]||_e.source,Ge=Oe[_e.target]||_e.target,Xe=G.getNode(et),Ee=G.getNode(Ge);if(Xe&&Ee)try{await G.addConnection(new Kt.Connection(Xe,_e.sourceOutput,Ee,_e.targetInput))}catch(St){console.warn("[Editor] Could not restore connection:",St)}}Ne(" Undo complete - restored",ve.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,ue?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const ve=xe();if(ve.length===0){Ne(" Nothing selected to copy");return}Ne(` Copying ${ve.length} nodes`);const Oe=[],_e=new Set(ve);for(const Xe of ve){const Ee=G.getNode(Xe);Ee&&Oe.push({label:Ee.label,position:ue.nodeViews.get(Ee.id)?.position||{x:0,y:0},data:{id:Ee.id,properties:JSON.parse(JSON.stringify(Ee.properties||{}))}})}if(Oe.length===0){Ne(" Nothing selected to copy (no nodes in selection)");return}const et=[];for(const Xe of G.getConnections())_e.has(Xe.source)&&_e.has(Xe.target)&&et.push({source:Xe.source,target:Xe.target,sourceOutput:Xe.sourceOutput,targetInput:Xe.targetInput});const Ge={nodes:Oe,connections:et};localStorage.setItem("rete-clipboard",JSON.stringify(Ge)),Ne("Copied to clipboard:",Ge)}catch(ve){console.error("[Editor] Copy failed:",ve)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const ve=localStorage.getItem("rete-clipboard");if(!ve){Ne(" Clipboard empty");return}try{const Oe=JSON.parse(ve),_e={},Ge=(J.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},Xe=ue.area.transform,Ee=(q.current.x-Ge.left-Xe.x)/Xe.k,St=(q.current.y-Ge.top-Xe.y)/Xe.k;let Ve=1/0,xt=1/0;for(const ct of Oe.nodes)Ve=Math.min(Ve,ct.position.x),xt=Math.min(xt,ct.position.y);se&&se.entities&&Array.from(se.entities).forEach(ct=>se.remove(ct)),E.current=!0;try{for(const ct of Oe.nodes){let Ut;const hn=_n.getByLabel(ct.label);if(hn){const kn=()=>{ue&&ue.update("node",Ut.id),c&&G&&(c.reset(),setTimeout(()=>{G.getNodes().forEach(async pn=>{try{await c.fetch(pn.id)}catch{}})},0))},cn=()=>{hn.updateStrategy==="dataflow"?(c&&c.reset(),c&&G&&setTimeout(()=>{G.getNodes().forEach(async pn=>{try{await c.fetch(pn.id)}catch{}})},0)):kn()};Ut=hn.factory(cn)}if(Ut){typeof Ut.restore=="function"&&ct.data?Ut.restore(ct.data):ct.data&&ct.data.properties&&Ut.properties&&Object.assign(Ut.properties,ct.data.properties),await G.addNode(Ut);const kn=ct.position.x-Ve,cn=ct.position.y-xt,pn={x:Ee+kn,y:St+cn};await ue.translate(Ut.id,pn),_e[ct.data.id]=Ut.id,se&&se.add({id:Ut.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,ue?.updateBackdropCaptures?.()}const Gt=[];for(const ct of Oe.connections){const Ut=_e[ct.source],hn=_e[ct.target];if(Ut&&hn){const kn=G.getNode(Ut),cn=G.getNode(hn);kn&&cn&&Gt.push(G.addConnection(new Kt.Connection(kn,ct.sourceOutput,cn,ct.targetInput)))}}if(await Promise.all(Gt),c&&G){c.reset();for(const ct of G.getNodes())try{await c.fetch(ct.id)}catch{}}setTimeout(()=>{for(const ct of Object.keys(_e)){const Ut=_e[ct];ue&&ue.update("node",Ut)}},100),Ne("Pasted from clipboard")}catch(Oe){console.error("[Editor] Paste failed:",Oe)}}C.code==="Home"&&(C.preventDefault(),ue.area&&(ue.area.zoom(1,0,0),ue.area.translate(0,0),Ne(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Ne(" Drag state reset via Escape key"))},te=C=>{q.current={x:C.clientX,y:C.clientY}},_=C=>{C.key==="Shift"&&(ye.current=!0)},P=C=>{C.key==="Shift"&&(ye.current=!1)},Q=()=>{Ne(" Received delete from Electron IPC"),L({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let K=null;return window.api&&window.api.onDeleteKey&&(K=window.api.onDeleteKey(Q)),window.addEventListener("keydown",L),window.addEventListener("keydown",_),window.addEventListener("keyup",P),window.addEventListener("mousemove",te),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keydown",_),window.removeEventListener("keyup",P),window.removeEventListener("mousemove",te),K&&K()}},[t,s,c,p]),x.useEffect(()=>{const L=a.current;if(!L||!t||!s)return;const te=_=>{let P=null;const Q=_.target.closest('[data-testid="node"]');if(Q&&(P=Q.dataset.nodeId),!P&&s?.nodeViews){for(const[K,C]of s.nodeViews.entries())if(C.element&&C.element.contains(_.target)){P=K,C.element;break}}if(console.log("[ContextMenu] clickedNodeId:",P),console.log("[ContextMenu] lassoSelectedNodesRef:",D.current.size,Array.from(D.current)),P){_.preventDefault();const K=t.getNode(P),C=D.current,G=C.size>1&&C.has(P),ue=[];G&&(ue.push({label:" Convert to Sub-Graph",handler:async()=>{const se=Array.from(C);await vt(se)}}),ue.push({separator:!0})),ue.push({label:"Delete",handler:async()=>{const se=G?Array.from(C):[P];for(const xe of se){const ve=t.getConnections().filter(Oe=>Oe.source===xe||Oe.target===xe);for(const Oe of ve)await t.removeConnection(Oe.id);await t.removeNode(xe)}C.clear()}}),Je({visible:!0,position:{x:_.clientX,y:_.clientY},items:ue,nodeContext:K})}else{_.preventDefault();const K=window._t2GetMenuItems?window._t2GetMenuItems():[];Je({visible:!0,position:{x:_.clientX,y:_.clientY},items:K,nodeContext:null})}};return L.addEventListener("contextmenu",te),()=>{L.removeEventListener("contextmenu",te)}},[t,s]),x.useEffect(()=>{if(!t||!s)return;const L=()=>{const _=t.getNodes().map(Q=>{const K=s.nodeViews.get(Q.id);return{id:Q.id,name:Q.constructor.name,label:Q.label,properties:Q.properties?{...Q.properties}:{},position:K?[K.position.x,K.position.y]:[0,0]}}),P=t.getConnections().map(Q=>({id:Q.id,source:Q.source,sourceOutput:Q.sourceOutput,target:Q.target,targetInput:Q.targetInput}));return{nodes:_,connections:P}},te=async(_,P=!0)=>{const Q=t.getConnections(),K=t.getNodes();for(const C of Q)await t.removeConnection(C.id);for(const C of K)await t.removeNode(C.id);for(const C of _.nodes){const G=_n.getByLabel(C.label);if(!G){console.warn("[SubGraph] Unknown node type:",C.label);continue}const ue=G.factory(()=>{s&&s.update("node",C.id),window._t2Process&&window._t2Process()});ue.id=C.id,C.properties&&typeof ue.restore=="function"?ue.restore({properties:C.properties}):C.properties&&Object.assign(ue.properties||{},C.properties),await t.addNode(ue);const se=C.position,xe=Array.isArray(se)?se[0]:se?.x||0,ve=Array.isArray(se)?se[1]:se?.y||0;await s.translate(ue.id,{x:xe,y:ve})}for(const C of _.connections){const G=t.getNode(C.source),ue=t.getNode(C.target);if(!G||!ue)continue;const se=G.outputs?.[C.sourceOutput],xe=ue.inputs?.[C.targetInput];if(!se||!xe)continue;const ve=new window.Rete.ClassicPreset.Connection(G,C.sourceOutput,ue,C.targetInput);ve.id=C.id,await t.addConnection(ve)}P&&s?.area&&setTimeout(()=>{try{Ra.zoomAt(s,t.getNodes())}catch(C){console.warn("[SubGraph] zoomAt failed:",C)}},100)};return window.enterSubGraph=async(_,P)=>{if(console.log("[SubGraph] Entering sub-graph:",_,P?.name),!P?.internalNodes||P.internalNodes.length===0){window.T2Toast&&window.T2Toast.info("This sub-graph is empty");return}const Q=L();I.length===0&&(le.current=Q),pe(C=>[...C,{nodeId:_,name:P.name||"Sub-Graph",graphData:Q}]);const K={nodes:P.internalNodes||[],connections:P.internalConnections||[]};await te(K),window.T2Toast&&window.T2Toast.success(`Entered: ${P.name||"Sub-Graph"}`)},window.exitSubGraph=async()=>{if(I.length===0){console.warn("[SubGraph] Already at top level");return}const _=L(),P=[],Q=[];_.nodes.forEach((se,xe)=>{se.label==="SubGraph Input"?P.push({key:`in_${xe}`,label:se.properties?.portName||"input",type:se.properties?.portType||"any",internalNodeId:se.id,internalPort:"value"}):se.label==="SubGraph Output"&&Q.push({key:`out_${xe}`,label:se.properties?.portName||"output",type:se.properties?.portType||"any",internalNodeId:se.id,internalPort:"value"})}),console.log("[SubGraph] Detected exposed ports:",{inputs:P.length,outputs:Q.length});const K=[...I],C=K.pop();pe(K);const G=C.graphData,ue=G.nodes.find(se=>se.id===C.nodeId);ue&&ue.properties&&(ue.properties.internalNodes=_.nodes,ue.properties.internalConnections=_.connections,ue.properties.exposedInputs=P,ue.properties.exposedOutputs=Q),await te(G),setTimeout(()=>{const se=t?.getNode(C.nodeId);se&&typeof se.rebuildSockets=="function"&&(se.rebuildSockets(),s&&s.update("node",C.nodeId),console.log("[SubGraph] Rebuilt sockets on parent node"))},200),window.T2Toast&&window.T2Toast.info("Returned to parent graph")},window.exitToMainGraph=async()=>{I.length!==0&&(le.current&&await te(le.current),pe([]),le.current=null,window.T2Toast&&window.T2Toast.info("Returned to main graph"))},()=>{delete window.enterSubGraph,delete window.exitSubGraph,delete window.exitToMainGraph}},[t,s,I]);const vt=x.useCallback(async L=>{if(!t||!s||L.length<2){window.T2Toast&&window.T2Toast.warn("Select at least 2 nodes to create a sub-graph");return}try{const te=L.map(Ee=>t.getNode(Ee)).filter(Boolean),_=L.map(Ee=>s.nodeViews.get(Ee)).filter(Boolean);let P=0,Q=0;_.forEach(Ee=>{P+=Ee.position.x,Q+=Ee.position.y});const K=P/_.length,C=Q/_.length,G=te.map((Ee,St)=>{const Ve=_[St];return{id:Ee.id,name:Ee.constructor.name,label:Ee.label,properties:Ee.properties?{...Ee.properties}:{},position:[Ve.position.x-K,Ve.position.y-C]}}),ue=t.getConnections(),se=new Set(L),xe=ue.filter(Ee=>se.has(Ee.source)&&se.has(Ee.target)).map(Ee=>({id:Ee.id,source:Ee.source,sourceOutput:Ee.sourceOutput,target:Ee.target,targetInput:Ee.targetInput})),ve=[],Oe=[];ue.forEach(Ee=>{se.has(Ee.target)&&!se.has(Ee.source)&&ve.push({originalConnection:Ee,internalNodeId:Ee.target,internalPort:Ee.targetInput}),se.has(Ee.source)&&!se.has(Ee.target)&&Oe.push({originalConnection:Ee,internalNodeId:Ee.source,internalPort:Ee.sourceOutput})});const _e=ve.map((Ee,St)=>({key:`in_${St}`,label:Ee.internalPort,type:"any",internalNodeId:Ee.internalNodeId,internalPort:Ee.internalPort})),et=Oe.map((Ee,St)=>({key:`out_${St}`,label:Ee.internalPort,type:"any",internalNodeId:Ee.internalNodeId,internalPort:Ee.internalPort})),Ge=_n.get("SubGraphNode");if(!Ge)throw new Error("SubGraphNode not registered");const Xe=Ge.factory(()=>{X.current&&X.current()});Xe.properties={name:`Sub-Graph (${te.length} nodes)`,description:"",icon:"",internalNodes:G,internalConnections:xe,exposedInputs:_e,exposedOutputs:et},Xe.rebuildSockets(),await t.addNode(Xe),await s.translate(Xe.id,{x:K,y:C});for(const Ee of[...ve,...Oe])await t.removeConnection(Ee.originalConnection.id);for(let Ee=0;Ee<ve.length;Ee++){const St=ve[Ee],Ve=t.getNode(St.originalConnection.source);if(Ve){const xt=new Kt.Connection(Ve,St.originalConnection.sourceOutput,Xe,`exp_in_${Ee}`);await t.addConnection(xt)}}for(let Ee=0;Ee<Oe.length;Ee++){const St=Oe[Ee],Ve=t.getNode(St.originalConnection.target);if(Ve){const xt=new Kt.Connection(Xe,`exp_out_${Ee}`,Ve,St.originalConnection.targetInput);await t.addConnection(xt)}}for(const Ee of L){const St=t.getConnections().filter(Ve=>Ve.source===Ee||Ve.target===Ee);for(const Ve of St)await t.removeConnection(Ve.id);await t.removeNode(Ee)}D.current.clear(),window.T2Toast&&window.T2Toast.success(`Created sub-graph with ${te.length} nodes`),Ne(`[SubGraph] Created sub-graph with ${G.length} nodes, ${xe.length} internal connections, ${_e.length} inputs, ${et.length} outputs`)}catch(te){console.error("[SubGraph] Conversion failed:",te),window.T2Toast&&window.T2Toast.error(`Sub-graph creation failed: ${te.message}`)}},[t,s]),$t=x.useCallback(()=>{Je(L=>({...L,visible:!1}))},[]),Rt=x.useCallback(async L=>{L.handler&&await L.handler(De.position)},[De.position]),ln=async()=>{if(!(!t||!s))try{const L=t.getNodes().map(xe=>{const ve=typeof xe.toJSON=="function"?xe.toJSON():{...xe};return xe.properties&&(ve.properties=xe.properties),{id:xe.id,label:xe.label,position:s.nodeViews.get(xe.id)?.position||{x:0,y:0},data:ve}}),te=t.getConnections().map(xe=>({id:xe.id,source:xe.source,target:xe.target,sourceOutput:xe.sourceOutput,targetInput:xe.targetInput})),_=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},P={nodes:L,connections:te,viewport:_},Q=JSON.stringify(P,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ne("Running in HA ingress - showing save dialog"),ae(P),A(!0);return}try{Q.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",Q))}catch{console.warn("localStorage skipped")}Ne("Graph saved to localStorage");try{const xe=await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:Q});xe.ok?Ne("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",xe.status)}catch(xe){console.warn("[handleSave] Failed to save to server:",xe)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",Q),Ne("[handleSave] Saved temp file for Electron reload")}catch(xe){console.warn("[handleSave] Failed to save temp file via Electron API",xe)}if(window.showSaveFilePicker)try{const ve=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await ve.write(Q),await ve.close(),Ne("Graph saved to file");return}catch(xe){if(xe.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",xe)}const G=new Blob([Q],{type:"application/json"}),ue=URL.createObjectURL(G),se=document.createElement("a");se.href=ue,se.download=`autotron_graph_${Date.now()}.json`,se.click(),URL.revokeObjectURL(ue),Ne("Graph saved via download")}catch(L){console.error("Failed to save graph:",L)}};x.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!t||!s))try{const L=t.getNodes().map(K=>{const C=typeof K.toJSON=="function"?K.toJSON():{...K};return K.properties&&(C.properties=K.properties),{id:K.id,label:K.label,position:s.nodeViews.get(K.id)?.position||{x:0,y:0},data:C}}),te=t.getConnections().map(K=>({id:K.id,source:K.source,target:K.target,sourceOutput:K.sourceOutput,targetInput:K.targetInput})),_=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},P={nodes:L,connections:te,viewport:_,preUpdateSave:!0,timestamp:Date.now()},Q=JSON.stringify(P);Q.length<2e6&&(localStorage.setItem("saved-graph",Q),Ne("[triggerGraphSave] Graph saved before update"))}catch(L){console.warn("[triggerGraphSave] Failed:",L)}},()=>{delete window.triggerGraphSave}),[t,s]);const[st,zt]=x.useState(!1),Mn=x.useRef(null),Fe=x.useRef(Date.now());x.useEffect(()=>{if(!t)return;const L=()=>{zt(!0)};t.addPipe(te=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(te.type)&&L(),te))},[t]),x.useEffect(()=>{if(!t||!s)return;const L=async()=>{if(!(window.graphLoading||H.current)&&st)try{const te=t.getNodes().map(C=>{const G=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(G.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:G}}),_=t.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),P=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Q={nodes:te,connections:_,viewport:P,autoSaved:!0,timestamp:Date.now()},K=JSON.stringify(Q);if(K.length<2e6){localStorage.setItem("saved-graph",K),Fe.current=Date.now(),zt(!1);try{await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:K})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(te){console.warn("[Auto-save] Failed:",te)}};return Mn.current=setInterval(L,12e4),()=>{Mn.current&&clearInterval(Mn.current)}},[t,s,st]),x.useEffect(()=>{if(!t||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Ne("[AutoLoad] Detected post-update reload, attempting to restore graph...");const te=setTimeout(async()=>{try{const _=localStorage.getItem("saved-graph");if(_){Ne("[AutoLoad] Found saved graph, loading...");const P=JSON.parse(_);P.nodes&&P.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(_){console.warn("[AutoLoad] Failed to auto-load graph:",_)}},1e3);return()=>clearTimeout(te)}},[t,s,c]);const bt=x.useRef(!1);x.useEffect(()=>{if(!t||!s||!c||bt.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Ne("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),bt.current=!0;return}const _=localStorage.getItem("saved-graph"),P=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(_||P){Ne("[ServerAutoLoad] Skipping - desktop mode with local graph");return}bt.current=!0;const K=setTimeout(async()=>{try{Ne("[ServerAutoLoad] Fetching last active graph from server...");const G=await(await fetch(Tn("/api/engine/last-active"))).json();G.success&&G.graph?(Ne("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(G.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Ne("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(K)},[t,s,c]);const nn=async()=>{if(!t||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!t,area:!!s,engine:!!c});return}try{let L=localStorage.getItem("saved-graph");if(!L&&window.api?.readTempFile)try{const K=await window.api.readTempFile("autotron_graph.json");K?.success&&K.content&&(L=K.content,Ne("[handleLoad] Loaded graph from Electron temp file"))}catch(K){console.warn("[handleLoad] Failed to read Electron temp file",K)}if(!L){alert("No saved graph found");return}const te=JSON.parse(L);Ne(`[handleLoad] Loading graph with ${te.nodes?.length} nodes`);const _=cb(te);if(!_.valid){console.warn("[handleLoad] Graph validation failed:",_.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${_.errors.length} errors`,4e3);const K=ub(te);K.repaired&&(Ne("[handleLoad] Graph repaired:",K.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${K.fixes.length} fixes applied`,3e3),Object.assign(te,K.graphData))}_.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",_.warnings),await Zn();const P=t.getNodes();if(P.length>0){console.error("[handleLoad] Clear did not work! Still have",P.length,"nodes");for(const K of P)try{await t.removeNode(K.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(E.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of te.nodes){let G;const ue=_n.getByLabel(C.label);if(ue){const se=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};G=ue.factory(se)}G&&(G.id=C.id,typeof G.restore=="function"&&C.data?G.restore(C.data):C.data&&C.data.properties&&G.properties&&Object.assign(G.properties,C.data.properties),await t.addNode(G),await s.translate(G.id,C.position))}const K=[];for(const C of te.connections){const G=t.getNode(C.source),ue=t.getNode(C.target);G&&ue&&K.push(t.addConnection(new Kt.Connection(G,C.sourceOutput,ue,C.targetInput)))}await Promise.all(K)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const Q=t.getNodes();if(Q.length>0&&s){Ne("[handleLoad] Zooming to fit",Q.length,"nodes...");try{await Ra.zoomAt(s,Q,{scale:.9})}catch(K){console.warn("[handleLoad] zoomAt failed:",K)}}X.current&&(Ne("[handleLoad] Processing graph immediately..."),await X.current(),Ne("[handleLoad] Graph processing complete")),H.current=!1,Ne("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Ne("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const K=te.viewport||{x:0,y:0,k:1},C=K.k||1,G=K.x||0,ue=K.y||0;Ne("[handleLoad] Restoring viewport:",{savedX:G,savedY:ue,savedK:C}),Ne("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(G,ue)}catch(xe){console.warn("[handleLoad] Viewport restore failed:",xe)}Ne("[handleLoad] Transform after restore:",{...s.area.transform});const se=s.container;if(se){se.tabIndex=-1,se.focus(),document.activeElement&&document.activeElement!==se&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const xe=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(xe,100),setTimeout(xe,500),setTimeout(xe,1e3)}t.getNodes().forEach(xe=>{const ve=s.nodeViews.get(xe.id);if(ve?.element)try{for(let Oe=0;Oe<10;Oe++)try{ve.element.releasePointerCapture(Oe)}catch{}}catch{}})}},300),Ne("Graph loaded")}catch(L){console.error("Failed to load graph:",L),H.current=!1,alert("Failed to load graph")}},Nn=async()=>{if(!t||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(t.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const te=await fetch(Tn("/api/examples/starter"));if(!te.ok)throw new Error(`Failed to fetch example: ${te.status}`);const _=await te.json();if(!_.success||!_.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(_.graph)),Ne("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await nn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(te){console.error("[handleLoadExample] Failed:",te),alert("Failed to load example graph: "+te.message)}};x.useEffect(()=>{const L=()=>{Ne("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),nn()};return document.addEventListener("autoLoadGraph",L),()=>document.removeEventListener("autoLoadGraph",L)},[t,s,c]);const Zn=async()=>{if(!t){console.warn("[handleClear] No editor instance!");return}try{const L=t.getConnections(),te=t.getNodes();Ne(`[handleClear] Removing ${L.length} connections and ${te.length} nodes`);for(const P of L)await t.removeConnection(P.id);for(const P of te)await t.removeNode(P.id);const _=t.getNodes();Ne(`[handleClear] Complete. Remaining nodes: ${_.length}`),_.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",_.map(P=>P.id))}catch(L){console.error("Failed to clear graph:",L)}},Ta=()=>{if(!(!t||!s))try{const L=t.getNodes().map(G=>{const ue=typeof G.toJSON=="function"?G.toJSON():{...G};return G.properties&&(ue.properties=G.properties),{id:G.id,label:G.label,position:s.nodeViews.get(G.id)?.position||{x:0,y:0},data:ue}}),te=t.getConnections().map(G=>({id:G.id,source:G.source,target:G.target,sourceOutput:G.sourceOutput,targetInput:G.targetInput})),_=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},P={nodes:L,connections:te,viewport:_},Q=new Blob([JSON.stringify(P,null,2)],{type:"application/json"}),K=URL.createObjectURL(Q),C=document.createElement("a");C.href=K,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(K),Ne("Graph exported")}catch(L){console.error("Failed to export graph:",L)}},Na=async L=>{const te=cb(L);if(!te.valid){console.warn("[handleImport] Graph validation failed:",te.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${te.errors.length} errors`,4e3);const Q=ub(L);if(Q.repaired)Ne("[handleImport] Graph repaired:",Q.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${Q.fixes.length} fixes applied`,3e3),L=Q.graphData;else if(!confirm(`Graph has ${te.errors.length} errors. Continue anyway?`))return}const _={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let P=0;if(console.error=(...Q)=>{P++<10&&_.error(...Q)},_.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!t||!s||!c){Object.assign(console,_);return}try{if(await Zn(),E.current=!0,H.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of L.nodes){let G;const ue=_n.getByLabel(C.label);if(!ue){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(ue){const se=()=>{if(H.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};G=ue.factory(se)}G&&(G.id=C.id,C.label==="Timeline Color"&&_.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof G.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof G.restore=="function"&&C.data?G.restore(C.data):C.data&&C.data.properties&&G.properties&&Object.assign(G.properties,C.data.properties),await t.addNode(G),await s.translate(G.id,C.position))}const K=[];for(const C of L.connections){const G=t.getNode(C.source),ue=t.getNode(C.target);if(G&&ue){const se=G.outputs?.[C.sourceOutput],xe=ue.inputs?.[C.targetInput];if(!se){console.warn(`[handleImport] Connection skipped - source output '${C.sourceOutput}' not found on node ${G.label}`);continue}if(!xe){console.warn(`[handleImport] Connection skipped - target input '${C.targetInput}' not found on node ${ue.label}`);continue}K.push(t.addConnection(new Kt.Connection(G,C.sourceOutput,ue,C.targetInput)))}else console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!G}), target=${C.target} (${!!ue})`)}await Promise.all(K)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const Q=t.getNodes();if(Q.length>0&&s)try{await Ra.zoomAt(s,Q,{scale:.9})}catch{}H.current=!1,setTimeout(async()=>{window.graphLoading=!1,Ne("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{if(X.current&&(Ne("[handleImport] Running processImmediate to sync node states"),X.current()),s&&t){const C=t.getNodes();Ne(`[handleImport] Updating ${C.length} nodes for connection visibility`),C.forEach(G=>{s.update("node",G.id)})}setTimeout(()=>{X.current&&(Ne("[handleImport] Running second processImmediate for late-loading data"),X.current())},1500)},500);try{const C=JSON.stringify(L,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Ne("[handleImport] Graph saved to localStorage")),(await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Ne("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const K=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(K,100),setTimeout(K,500)},2e3),Object.assign(console,_),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Ne("Graph imported successfully. Pan/zoom should work now.")}catch(Q){window.graphLoading=!1,typeof _<"u"&&Object.assign(console,_),console.error("Failed to import graph:",Q),H.current=!1,alert("Failed to import graph: "+Q.message)}};return h.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[h.jsx(ej,{width:nt,panelRef:ge,dropActive:Le,favoriteGroups:Y,onAddFavorite:de,onRemoveFavorite:Se,onCreateNode:$e}),I.length>0&&h.jsxs("div",{style:{position:"absolute",top:"10px",left:`${nt+20}px`,zIndex:1e3,display:"flex",alignItems:"center",gap:"8px",background:"rgba(30, 40, 50, 0.95)",padding:"8px 16px",borderRadius:"8px",border:"1px solid #3d6070",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[h.jsx("button",{onClick:()=>window.exitToMainGraph?.(),style:{background:"#2a4858",border:"1px solid #4a7080",borderRadius:"4px",color:"#8ab",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},title:"Return to main graph",children:" Main"}),I.map((L,te)=>h.jsxs(Ea.Fragment,{children:[h.jsx("span",{style:{color:"#556"},children:""}),h.jsxs("span",{style:{color:te===I.length-1?"#fff":"#8ab",fontWeight:te===I.length-1?"bold":"normal",fontSize:"13px"},children:[" ",L.name]})]},te)),h.jsx("button",{onClick:()=>window.exitSubGraph?.(),style:{background:"#4a5868",border:"1px solid #6a7888",borderRadius:"4px",color:"#cde",padding:"4px 12px",cursor:"pointer",fontSize:"12px",marginLeft:"12px"},title:"Go back to parent graph",children:" Back"})]}),h.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${nt}px`}}),h.jsx("div",{ref:b}),(()=>{const L=g?k.current:b.current;return L?Jr.createPortal(h.jsx(WO,{onSave:ln,onLoad:nn,onLoadExample:Nn,onClear:Zn,onExport:Ta,onImport:Na,hasUnsavedChanges:st,isMerged:g,onToggleMerged:()=>w(te=>!te)}),L):null})(),h.jsx(JO,{dockSlotRef:k}),h.jsx(nj,{visible:De.visible,position:De.position,items:De.items,onClose:$t,onSelect:Rt}),h.jsx(tj,{isOpen:T,onClose:()=>A(!1),onSave:()=>{zt(!1),A(!1)},currentGraphData:R}),me.visible&&h.jsxs("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,background:"rgba(30, 40, 50, 0.98)",borderRadius:"12px",border:"1px solid #4a6070",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",width:"500px",maxWidth:"90vw",overflow:"hidden"},children:[h.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #3a5060"},children:h.jsx("input",{type:"text",placeholder:"Search nodes by name, type, or property...",autoFocus:!0,value:me.query,onChange:L=>{const te=L.target.value,_=ne.current,P=J.current;if(!_||!P)return;const Q=[];if(te.trim()){const K=te.toLowerCase();for(const C of _.getNodes()){const G=(C.label||"").toLowerCase(),ue=(C.properties?.customTitle||C.properties?.customName||"").toLowerCase(),se=(C.constructor?.name||"").toLowerCase(),xe=(C.properties?.deviceName||"").toLowerCase(),ve=(C.properties?.symbol||"").toLowerCase();if(`${G} ${ue} ${se} ${xe} ${ve}`.includes(K)){const _e=P.nodeViews.get(C.id)?.position||{x:0,y:0};Q.push({id:C.id,label:C.label,customTitle:C.properties?.customTitle||C.properties?.customName,type:C.constructor?.name,position:_e})}}}ze({visible:!0,query:te,results:Q,selectedIndex:0})},onKeyDown:L=>{if(L.key==="Escape")ze({visible:!1,query:"",results:[],selectedIndex:0});else if(L.key==="ArrowDown")L.preventDefault(),ze(te=>({...te,selectedIndex:Math.min(te.selectedIndex+1,te.results.length-1)}));else if(L.key==="ArrowUp")L.preventDefault(),ze(te=>({...te,selectedIndex:Math.max(te.selectedIndex-1,0)}));else if(L.key==="Enter"&&me.results.length>0){L.preventDefault();const te=me.results[me.selectedIndex];if(te){const _=J.current,P=ne.current;if(_&&P){const Q=P.getNode(te.id);Q&&Ra.zoomAt(_,[Q],{scale:1.2})}ze({visible:!1,query:"",results:[],selectedIndex:0})}}},style:{width:"100%",padding:"12px 16px",fontSize:"16px",background:"#1a2a35",border:"1px solid #3a5060",borderRadius:"8px",color:"#fff",outline:"none"}})}),me.results.length>0&&h.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:me.results.map((L,te)=>h.jsxs("div",{onClick:()=>{const _=J.current,P=ne.current;if(_&&P){const Q=P.getNode(L.id);Q&&Ra.zoomAt(_,[Q],{scale:1.2})}ze({visible:!1,query:"",results:[],selectedIndex:0})},style:{padding:"10px 16px",cursor:"pointer",background:te===me.selectedIndex?"#2a4a5a":"transparent",borderBottom:"1px solid #2a3a45",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:()=>ze(_=>({..._,selectedIndex:te})),children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#fff",fontWeight:500},children:L.customTitle||L.label}),h.jsxs("div",{style:{color:"#8ab",fontSize:"12px"},children:[L.type,"  x:",Math.round(L.position.x),", y:",Math.round(L.position.y)]})]}),h.jsx("span",{style:{color:"#6a8090",fontSize:"12px"},children:" to zoom"})]},L.id))}),me.query&&me.results.length===0&&h.jsxs("div",{style:{padding:"20px",color:"#8ab",textAlign:"center"},children:['No nodes found matching "',me.query,'"']}),h.jsxs("div",{style:{padding:"8px 16px",background:"#1a2530",color:"#6a7a85",fontSize:"11px",display:"flex",gap:"16px"},children:[h.jsx("span",{children:" Navigate"}),h.jsx("span",{children:" Zoom to node"}),h.jsx("span",{children:"Esc Close"})]})]})]})}class gj extends Ea.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",r),this.setState({error:t,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?h.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:h.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),h.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),h.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&h.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[h.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),h.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[h.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#4a4a6c",onMouseOut:t=>t.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),h.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#339af0",onMouseOut:t=>t.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function yj({isLoading:a,progress:t=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,p]=x.useState(!1),[m,g]=x.useState(a);return x.useEffect(()=>{if(!a&&m){p(!0);const w=setTimeout(()=>{g(!1),p(!1)},500);return()=>clearTimeout(w)}else a&&!m&&g(!0)},[a,m]),m?h.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[h.jsx("div",{className:"loading-logo",children:""}),h.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),h.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),h.jsx("div",{className:"loading-progress-container",children:h.jsx("div",{className:"loading-progress-bar",children:h.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,t)}%`}})})}),h.jsx("div",{className:"loading-status",children:r}),l>0&&h.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&h.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function vj({updateInfo:a,onClose:t,onApplyUpdate:r}){const[s,l]=x.useState(!1),[c,d]=x.useState("");if(!a||!a.hasUpdate)return null;const p=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(g){console.warn("Pre-update graph save failed:",g)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const w=await(await fn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(w.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const b=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)},2e3)}catch(g){g.message.includes("fetch")||g.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const w=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(w,2e3))};w()},3e3)):(d(`Update failed: ${g.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),t()};return h.jsx("div",{className:"update-modal-overlay",children:h.jsxs("div",{className:"update-modal",children:[h.jsxs("div",{className:"update-modal-header",children:[h.jsx("span",{className:"update-icon",children:""}),h.jsx("h2",{children:"Update Available!"})]}),h.jsxs("div",{className:"update-modal-version",children:[h.jsx("span",{className:"version-current",children:a.currentVersion}),h.jsx("span",{className:"version-arrow",children:""}),h.jsx("span",{className:"version-new",children:a.newVersion})]}),h.jsxs("div",{className:"update-modal-content",children:[h.jsx("h3",{children:"What's New:"}),h.jsx("div",{className:"changelog-content",children:h.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&h.jsxs("div",{className:"update-status",children:[h.jsx("span",{className:"status-spinner",children:""}),c]}),h.jsx("div",{className:"update-modal-actions",children:s?h.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"update-btn update-btn-primary",onClick:p,children:"Update Now"}),h.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const eu=a=>{if(!(a?.type==="visibilitychange"&&document.visibilityState!=="hidden")&&!window._t2SyncDone){if(window._t2SyncDone=!0,console.log(`[App] Sync triggered by: ${a?.type||"unknown"}`),window._t2GetGraphData)try{const t=window._t2GetGraphData();if(t&&t.nodes&&t.nodes.length>0){const r=JSON.stringify(t),s=window.location.port==="5173"?"http://localhost:3000":window.location.origin,l=new XMLHttpRequest;l.open("POST",`${s}/api/engine/save-active`,!1),l.setRequestHeader("Content-Type","application/json"),l.send(r),console.log(`[App] Synced graph on close (${t.nodes.length} nodes, status=${l.status})`)}}catch(t){console.warn("[App] Failed to sync graph on close:",t)}window.socket?.connected&&window.socket.emit("editor-inactive"),setTimeout(()=>{window._t2SyncDone=!1},2e3)}},bj=()=>{document.visibilityState==="visible"&&(console.log("[App] Browser woke up - sending editor-active"),window.socket?.connected&&window.socket.emit("editor-active"))};document.addEventListener("visibilitychange",eu);document.addEventListener("visibilitychange",bj);window.addEventListener("beforeunload",eu);window.addEventListener("pagehide",eu);window.addEventListener("unload",eu);const wj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};wj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const W1=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},t={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const p=t[c];p&&(d.accent&&(l.style.setProperty(`--node-${p}-color`,d.accent),l.style.setProperty(`--node-${p}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${p}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},J1=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),p=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${p}, ${m}`},t=(c,d=15)=>{const p=parseInt(c.slice(1),16),m=Math.max(0,(p>>16)-Math.round(255*d/100)),g=Math.max(0,(p>>8&255)-Math.round(255*d/100)),w=Math.max(0,(p&255)-Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|w).toString(16).slice(1)}`},r=(c,d=20)=>{const p=parseInt(c.slice(1),16),m=Math.min(255,(p>>16)+Math.round(255*d/100)),g=Math.min(255,(p>>8&255)+Math.round(255*d/100)),w=Math.min(255,(p&255)+Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|w).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},p=document.documentElement;for(const[m,g]of Object.entries(s)){const w=d[m]?.color||l[m];w&&(p.style.setProperty(`--socket-${g}-color`,w),p.style.setProperty(`--socket-${g}-dark`,t(w)),p.style.setProperty(`--socket-${g}-border`,r(w)),p.style.setProperty(`--socket-${g}-rgb`,a(w)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};W1();J1();eS();function eS(){const a=t=>{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return`${r}, ${s}, ${l}`};try{const t=localStorage.getItem("t2theme-overrides");if(t){const r=JSON.parse(t),s=document.documentElement;Object.entries(r).forEach(([l,c])=>{l==="borderOpacity"?s.style.setProperty("--node-border-opacity",c/100):typeof c=="string"&&c.startsWith("#")&&(s.style.setProperty(`--theme-${l}`,c),s.style.setProperty(`--theme-${l}-rgb`,a(c)))})}}catch(t){console.warn("Failed to apply stored theme:",t)}}window.applyCategoryColors=W1;window.applySocketColors=J1;window.applyTheme=eS;const Ff=new Map,Zf=new Map;function Sj(){const[a,t]=x.useState(be.connected),[r,s]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=x.useState([]),[d,p]=x.useState([]),[m,g]=x.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[w,b]=x.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[k,E]=x.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[D,X]=x.useState(null),[H,ne]=x.useState(0),[J,B]=x.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[q,ye]=x.useState([]),ke=x.useRef(null),I=x.useRef(null),pe=x.useRef({authenticated:!1,invalidPinNotified:!1}),le=100,me=lp();x.useEffect(()=>{const v=setInterval(()=>{ne(T=>T+1)},3e4);return()=>clearInterval(v)},[]);const ze=x.useCallback(()=>{const v=window._t2Editor;if(!v)return;const A=v.getNodes().filter(R=>R.label==="Backdrop"||R.constructor?.name==="BackdropNode"||R.properties?.width!==void 0&&R.properties?.height!==void 0&&R.properties?.title!==void 0).map(R=>({id:R.id,title:R.properties?.title||"Group",color:R.properties?.customColor||window.BackdropColorPalette?.[R.properties?.colorIndex]?.border||"#888"})).sort((R,ae)=>R.title.localeCompare(ae.title));ye(A)},[]);x.useEffect(()=>{const v=()=>{setTimeout(ze,200)};window.addEventListener("graphLoadComplete",v),window.refreshBackdropGroups=ze;const T=setTimeout(ze,500);return()=>{window.removeEventListener("graphLoadComplete",v),delete window.refreshBackdropGroups,clearTimeout(T)}},[ze]),x.useEffect(()=>K1(T=>{E(T),!T.isLoading&&T.progress===100&&T.failedPlugins?.length>0&&me.warning(`Loaded ${T.loadedCount} plugins (${T.failedPlugins.length} failed)`),T.error&&me.error(`Plugin loading failed: ${T.error}`)}),[me]),x.useEffect(()=>{function v(){t(!0),me.success("Connected to server"),De("system","Socket connected to server"),Zf.clear();const Fe=bs();Fe&&be.emit("authenticate",Fe),be.emit("editor-active"),be.emit("request-ha-status")}function T(){t(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),pe.current.authenticated=!1,me.warning("Disconnected from server - reconnecting..."),De("system","Socket disconnected from server")}function A(Fe){De("system",`Socket reconnected after ${Fe} attempt(s)`)}function R(Fe){Fe%5===0&&De("system",`Reconnection attempt ${Fe}...`)}function ae(Fe){De("system","Reconnection failed, retrying...")}function de(Fe){s(Fe)}function Se(){pe.current.authenticated||(pe.current.authenticated=!0,pe.current.invalidPinNotified=!1,me.success("Authenticated"))}function $e(Fe){pe.current.authenticated=!1;const bt=(Fe?.error||"").toString();if(bt.toLowerCase().includes("invalid pin")){pe.current.invalidPinNotified||(pe.current.invalidPinNotified=!0,me.error("Stored PIN is invalid. Update it in Settings  Security."));return}const nn=bt?`Authentication failed: ${bt}`:"Authentication failed";me.error(nn)}function Pe(){if(!be.connected)return;pe.current.invalidPinNotified=!1;const Fe=bs();Fe&&be.emit("authenticate",Fe)}function vt(Fe){const{id:bt,state:nn,on:Nn,name:Zn,vendor:Ta}=Fe;if(!bt)return;const Na=Zf.get(bt),L=Nn!==void 0?Nn:nn==="on"||nn==="playing"||nn==="open",te=Zn||Fe.friendly_name||Fe.attributes?.friendly_name||bt.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(Na&&Na.on===L)return;Zf.set(bt,{on:L,state:nn});const _=Ff.get(bt),P=L?"ON":"OFF";let Q=Ta||"External";Ta||(bt.startsWith("ha_")?Q="HA":bt.startsWith("hue_")?Q="Hue":bt.startsWith("kasa_")&&(Q="Kasa")),_&&Date.now()-_.timestamp<5e3?(De("device",`${te}  ${P}`,{source:"app",triggeredBy:_.nodeTitle,nodeId:_.nodeId}),Ff.delete(bt)):De("trigger",`${te}  ${P}`,{source:Q})}function $t(Fe){}function Rt(Fe){const{nodeId:bt,nodeLabel:nn,result:Nn}=Fe;De("node",`${nn||bt} executed`,{...Nn,nodeId:bt})}function ln(Fe){Array.isArray(Fe)&&p(Fe.slice(0,20))}function st(Fe){const{type:bt,name:nn,value:Nn}=Fe;De("trigger",`${bt}: ${nn}`,Nn)}function zt(Fe){if(Fe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Fe.newVersion&&me.info(` Update available: ${Fe.currentVersion}  ${Fe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>X(Fe)})}be.on("connect",v),be.on("disconnect",T),be.on("reconnect",A),be.on("reconnect_attempt",R),be.on("reconnect_error",ae),be.on("auth-success",Se),be.on("auth-failed",$e),be.on("ha-connection-status",de),be.on("device-state-update",vt),be.on("device_state_change",$t),be.on("node_executed",Rt),be.on("scheduled_events",ln),be.on("trigger_event",st),be.on("update-available",zt),window.addEventListener("t2-pin-changed",Pe),YT(),be.connected&&(be.emit("editor-active"),t(!0));const Mn=setInterval(()=>{be.connected&&be.emit("editor-heartbeat")},3e4);return()=>{be.connected&&be.emit("editor-inactive"),clearInterval(Mn),be.off("connect",v),be.off("disconnect",T),be.off("reconnect",A),be.off("reconnect_attempt",R),be.off("reconnect_error",ae),be.off("auth-success",Se),be.off("auth-failed",$e),be.off("ha-connection-status",de),be.off("device-state-update",vt),be.off("device_state_change",$t),be.off("node_executed",Rt),be.off("scheduled_events",ln),be.off("trigger_event",st),be.off("update-available",zt),window.removeEventListener("t2-pin-changed",Pe),PT()}},[]);const De=(v,T,A=null)=>{const R=new Date().toLocaleTimeString();c(ae=>[{timestamp:R,type:v,message:T,details:A},...ae].slice(0,le))},Je=x.useRef({}),nt=x.useCallback((v,T)=>{const A=T.map(Se=>({...Se,nodeId:v}));Je.current[v]=A;const R=[];Object.values(Je.current).forEach(Se=>{Array.isArray(Se)&&R.push(...Se)});const ae=new Date,de=R.filter(Se=>Se.time&&new Date(Se.time)>ae).sort((Se,$e)=>new Date(Se.time)-new Date($e.time)).slice(0,20);p(de)},[]),Qe=x.useCallback(v=>{delete Je.current[v],nt(v,[])},[nt]),Y=x.useCallback(()=>d||[],[d]);x.useEffect(()=>(window.addEventLog=De,window.setUpcomingEvents=p,window.getUpcomingEvents=Y,window.registerScheduledEvents=nt,window.unregisterScheduledEvents=Qe,window.T2Toast=me,window.registerPendingCommand=(v,T,A,R)=>{Ff.set(v,{nodeTitle:T,action:A,nodeId:R,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.getUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[nt,Qe,Y,me]);const he=v=>{if(!v)return"";const T=new Date(v),R=T-new Date,ae=Math.floor(R/6e4),de=Math.floor(ae/60),Se=Math.floor(de/24);let $e="";return Se>0?$e=`${Se}d ${de%24}h`:de>0?$e=`${de}h ${ae%60}m`:ae>0?$e=`${ae}m`:$e="<1m",`${T.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${$e})`},ge=x.useCallback(async v=>{if(!v)return;const T=window._t2Area,A=window._t2Editor;if(!T||!A){console.warn("[focusNode] Editor not ready");return}const R=A.getNode(v);if(!R){console.warn("[focusNode] Node not found:",v);return}try{const{AreaExtensions:ae}=await nv(async()=>{const{AreaExtensions:de}=await Promise.resolve().then(()=>Ov);return{AreaExtensions:de}},void 0,import.meta.url);await ae.zoomAt(T,[R],{scale:1})}catch(ae){console.warn("[focusNode] Failed to zoom to node:",ae)}},[]),Le=x.useCallback(async v=>{if(!v)return;const T=window._t2Area,A=window._t2Editor;if(!T||!A){console.warn("[focusBackdrop] Editor not ready");return}const R=A.getNode(v);if(!R){console.warn("[focusBackdrop] Backdrop not found:",v);return}try{const ae=T.nodeViews.get(v);if(!ae){console.warn("[focusBackdrop] Node view not found");return}const de=ae.position,Se=R.properties?.width||R.width||400,$e=R.properties?.height||R.height||300,Pe=de.x+Se/2,vt=de.y+$e/2,$t=T.container,Rt=$t.clientWidth,ln=$t.clientHeight,st=Rt*.85/Se,zt=ln*.85/$e,Mn=Math.min(st,zt,1.5),Fe=Rt/2-Pe*Mn,bt=ln/2-vt*Mn;await T.area.zoom(Mn,0,0),await T.area.translate(Fe,bt)}catch(ae){console.warn("[focusBackdrop] Failed to zoom to backdrop:",ae)}},[]),ee=x.useCallback(async()=>{const v=window._t2Area,T=window._t2Editor;if(!v||!T){console.warn("[zoomExtents] Editor not ready");return}const A=T.getNodes();if(A.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:R}=await nv(async()=>{const{AreaExtensions:ae}=await Promise.resolve().then(()=>Ov);return{AreaExtensions:ae}},void 0,import.meta.url);await R.zoomAt(v,A,{scale:.7})}catch(R){console.warn("[zoomExtents] Failed to zoom:",R)}},[]);return h.jsxs("div",{className:"app-container",children:[D&&D.hasUpdate&&h.jsx(vj,{updateInfo:D,onClose:()=>X(null)}),h.jsx(yj,{isLoading:k.isLoading,progress:k.progress,status:k.status,loadedCount:k.loadedCount,totalCount:k.totalCount,error:k.error}),h.jsx("div",{className:"editor-wrapper",children:h.jsx(mj,{})}),h.jsx("div",{className:"resize-handle",ref:I,onMouseDown:v=>{v.preventDefault();const T=v.clientY,A=m,R=de=>{const Se=T-de.clientY,$e=Math.max(80,Math.min(400,A+Se));g($e),localStorage.setItem("panelHeight",$e)},ae=()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",ae)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",ae)},children:h.jsx("div",{className:"resize-handle-grip"})}),h.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:w},children:[h.jsxs("div",{className:"panel event-log-panel",children:[h.jsxs("div",{className:"panel-header",children:[h.jsx("span",{className:"panel-title",children:"Event Log"}),h.jsxs("div",{className:"group-nav-buttons",children:[h.jsx("button",{className:"group-nav-btn group-nav-all",onClick:ee,title:"Zoom to fit all nodes (F key)",children:" All"}),q.map(v=>h.jsx("button",{className:"group-nav-btn",style:{borderColor:v.color},onClick:()=>Le(v.id),title:`Zoom to "${v.title}" group`,children:v.title},v.id))]}),h.jsxs("div",{className:"panel-controls",children:[h.jsxs("div",{className:"filter-buttons",children:[h.jsx("button",{className:`filter-btn ${J==="all"?"active":""}`,onClick:()=>{B("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),h.jsx("button",{className:`filter-btn ${J==="app"?"active":""}`,onClick:()=>{B("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),h.jsx("button",{className:`filter-btn ${J==="ha"?"active":""}`,onClick:()=>{B("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.max(8,w-1);b(v),localStorage.setItem("panelFontSize",v)},children:"A-"}),h.jsxs("span",{className:"font-size-label",children:[w,"px"]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.min(16,w+1);b(v),localStorage.setItem("panelFontSize",v)},children:"A+"}),h.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),h.jsx("div",{className:"panel-content",ref:ke,children:l.length===0?h.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(v=>J==="all"?!0:J==="app"?v.details?.triggeredBy||v.details?.source==="app"||v.type==="node"||v.type==="device"||v.type==="system":J==="ha"?v.type==="trigger"||v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy:!0).map((v,T)=>h.jsxs("div",{className:`log-entry log-${v.type}${v.details?.nodeId?" clickable":""}`,title:v.details?.nodeId?"Click to jump to this node":v.details?.triggeredBy?`Triggered by: ${v.details.triggeredBy}`:v.details?.source&&v.details.source!=="app"?`Triggered externally via ${v.details.source}`:"",onClick:()=>v.details?.nodeId&&ge(v.details.nodeId),style:v.details?.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"log-time",children:v.timestamp}),h.jsx("span",{className:`log-type-badge ${v.type}`,children:v.type==="trigger"?"external":v.type}),h.jsx("span",{className:"log-message",children:v.message}),v.details?.triggeredBy&&h.jsxs("span",{className:"log-source app-source",children:["via ",v.details.triggeredBy]}),v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy&&h.jsxs("span",{className:"log-source external-source",children:["via ",v.details.source]})]},T))})]}),h.jsxs("div",{className:"panel upcoming-events-panel",children:[h.jsx("div",{className:"panel-header",children:h.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),h.jsx("div",{className:"panel-content",children:d.length===0?h.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((v,T)=>h.jsxs("div",{className:`event-entry event-${v.action||"unknown"}${v.nodeId?" clickable":""}`,onClick:()=>v.nodeId&&ge(v.nodeId),title:v.nodeId?"Click to jump to this node":"",style:v.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"event-time",children:he(v.time)}),h.jsx("span",{className:`event-action ${v.action}`,children:v.action||"event"}),h.jsx("span",{className:"event-device",children:v.deviceName||v.device||"Unknown"})]},T))})]})]})]})}function xj(){return h.jsx(gj,{children:h.jsxs(KO,{children:[h.jsx(QO,{}),h.jsx(Sj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");hb.createRoot(document.getElementById("root")).render(h.jsx(x.StrictMode,{children:h.jsx(xj,{})}));
