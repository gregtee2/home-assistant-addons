function lb(a,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Th(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var rf={exports:{}},So={};var Vy;function r2(){if(Vy)return So;Vy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return So.Fragment=t,So.jsx=r,So.jsxs=r,So}var qy;function i2(){return qy||(qy=1,rf.exports=r2()),rf.exports}var h=i2(),sf={exports:{}},Qe={};var Gy;function s2(){if(Gy)return Qe;Gy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),x=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=x&&v[x]||v["@@iterator"],typeof v=="function"?v:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,V={};function ee(v,C,A){this.props=v,this.context=C,this.refs=V,this.updater=A||_}ee.prototype.isReactComponent={},ee.prototype.setState=function(v,C){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,C,"setState")},ee.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function W(){}W.prototype=ee.prototype;function L(v,C,A){this.props=v,this.context=C,this.refs=V,this.updater=A||_}var Y=L.prototype=new W;Y.constructor=L,F(Y,ee.prototype),Y.isPureReactComponent=!0;var me=Array.isArray;function be(){}var B={H:null,A:null,T:null,S:null},he=Object.prototype.hasOwnProperty;function se(v,C,A){var D=A.ref;return{$$typeof:a,type:v,key:C,ref:D!==void 0?D:null,props:A}}function ye(v,C){return se(v.type,C,v.props)}function $e(v){return typeof v=="object"&&v!==null&&v.$$typeof===a}function De(v){var C={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(A){return C[A]})}var We=/\/+/g;function it(v,C){return typeof v=="object"&&v!==null&&v.key!=null?De(""+v.key):C.toString(36)}function Ke(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(be,be):(v.status="pending",v.then(function(C){v.status==="pending"&&(v.status="fulfilled",v.value=C)},function(C){v.status==="pending"&&(v.status="rejected",v.reason=C)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function P(v,C,A,D,X){var ue=typeof v;(ue==="undefined"||ue==="boolean")&&(v=null);var we=!1;if(v===null)we=!0;else switch(ue){case"bigint":case"string":case"number":we=!0;break;case"object":switch(v.$$typeof){case a:case t:we=!0;break;case b:return we=v._init,P(we(v._payload),C,A,D,X)}}if(we)return X=X(v),we=D===""?"."+it(v,0):D,me(X)?(A="",we!=null&&(A=we.replace(We,"$&/")+"/"),P(X,C,A,"",function(Et){return Et})):X!=null&&($e(X)&&(X=ye(X,A+(X.key==null||v&&v.key===X.key?"":(""+X.key).replace(We,"$&/")+"/")+we)),C.push(X)),1;we=0;var Ie=D===""?".":D+":";if(me(v))for(var Ye=0;Ye<v.length;Ye++)D=v[Ye],ue=Ie+it(D,Ye),we+=P(D,C,A,ue,X);else if(Ye=E(v),typeof Ye=="function")for(v=Ye.call(v),Ye=0;!(D=v.next()).done;)D=D.value,ue=Ie+it(D,Ye++),we+=P(D,C,A,ue,X);else if(ue==="object"){if(typeof v.then=="function")return P(Ke(v),C,A,D,X);throw C=String(v),Error("Objects are not valid as a React child (found: "+(C==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":C)+"). If you meant to render a collection of children, use an array instead.")}return we}function de(v,C,A){if(v==null)return v;var D=[],X=0;return P(v,D,"","",function(ue){return C.call(A,ue,X++)}),D}function pe(v){if(v._status===-1){var C=v._result;C=C(),C.then(function(A){(v._status===0||v._status===-1)&&(v._status=1,v._result=A)},function(A){(v._status===0||v._status===-1)&&(v._status=2,v._result=A)}),v._status===-1&&(v._status=0,v._result=C)}if(v._status===1)return v._result.default;throw v._result}var Le=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var C=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(C))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},Q={map:de,forEach:function(v,C,A){de(v,function(){C.apply(this,arguments)},A)},count:function(v){var C=0;return de(v,function(){C++}),C},toArray:function(v){return de(v,function(C){return C})||[]},only:function(v){if(!$e(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return Qe.Activity=w,Qe.Children=Q,Qe.Component=ee,Qe.Fragment=r,Qe.Profiler=l,Qe.PureComponent=L,Qe.StrictMode=s,Qe.Suspense=m,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(v){return B.H.useMemoCache(v)}},Qe.cache=function(v){return function(){return v.apply(null,arguments)}},Qe.cacheSignal=function(){return null},Qe.cloneElement=function(v,C,A){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var D=F({},v.props),X=v.key;if(C!=null)for(ue in C.key!==void 0&&(X=""+C.key),C)!he.call(C,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&C.ref===void 0||(D[ue]=C[ue]);var ue=arguments.length-2;if(ue===1)D.children=A;else if(1<ue){for(var we=Array(ue),Ie=0;Ie<ue;Ie++)we[Ie]=arguments[Ie+2];D.children=we}return se(v.type,X,D)},Qe.createContext=function(v){return v={$$typeof:d,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:c,_context:v},v},Qe.createElement=function(v,C,A){var D,X={},ue=null;if(C!=null)for(D in C.key!==void 0&&(ue=""+C.key),C)he.call(C,D)&&D!=="key"&&D!=="__self"&&D!=="__source"&&(X[D]=C[D]);var we=arguments.length-2;if(we===1)X.children=A;else if(1<we){for(var Ie=Array(we),Ye=0;Ye<we;Ye++)Ie[Ye]=arguments[Ye+2];X.children=Ie}if(v&&v.defaultProps)for(D in we=v.defaultProps,we)X[D]===void 0&&(X[D]=we[D]);return se(v,ue,X)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(v){return{$$typeof:p,render:v}},Qe.isValidElement=$e,Qe.lazy=function(v){return{$$typeof:b,_payload:{_status:-1,_result:v},_init:pe}},Qe.memo=function(v,C){return{$$typeof:g,type:v,compare:C===void 0?null:C}},Qe.startTransition=function(v){var C=B.T,A={};B.T=A;try{var D=v(),X=B.S;X!==null&&X(A,D),typeof D=="object"&&D!==null&&typeof D.then=="function"&&D.then(be,Le)}catch(ue){Le(ue)}finally{C!==null&&A.types!==null&&(C.types=A.types),B.T=C}},Qe.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Qe.use=function(v){return B.H.use(v)},Qe.useActionState=function(v,C,A){return B.H.useActionState(v,C,A)},Qe.useCallback=function(v,C){return B.H.useCallback(v,C)},Qe.useContext=function(v){return B.H.useContext(v)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(v,C){return B.H.useDeferredValue(v,C)},Qe.useEffect=function(v,C){return B.H.useEffect(v,C)},Qe.useEffectEvent=function(v){return B.H.useEffectEvent(v)},Qe.useId=function(){return B.H.useId()},Qe.useImperativeHandle=function(v,C,A){return B.H.useImperativeHandle(v,C,A)},Qe.useInsertionEffect=function(v,C){return B.H.useInsertionEffect(v,C)},Qe.useLayoutEffect=function(v,C){return B.H.useLayoutEffect(v,C)},Qe.useMemo=function(v,C){return B.H.useMemo(v,C)},Qe.useOptimistic=function(v,C){return B.H.useOptimistic(v,C)},Qe.useReducer=function(v,C,A){return B.H.useReducer(v,C,A)},Qe.useRef=function(v){return B.H.useRef(v)},Qe.useState=function(v){return B.H.useState(v)},Qe.useSyncExternalStore=function(v,C,A){return B.H.useSyncExternalStore(v,C,A)},Qe.useTransition=function(){return B.H.useTransition()},Qe.version="19.2.0",Qe}var Yy;function Nh(){return Yy||(Yy=1,sf.exports=s2()),sf.exports}var k=Nh();const Ra=Th(k),o2=lb({__proto__:null,default:Ra},[k]);var of={exports:{}},xo={},lf={exports:{}},cf={};var Py;function l2(){return Py||(Py=1,(function(a){function t(P,de){var pe=P.length;P.push(de);e:for(;0<pe;){var Le=pe-1>>>1,Q=P[Le];if(0<l(Q,de))P[Le]=de,P[pe]=Q,pe=Le;else break e}}function r(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var de=P[0],pe=P.pop();if(pe!==de){P[0]=pe;e:for(var Le=0,Q=P.length,v=Q>>>1;Le<v;){var C=2*(Le+1)-1,A=P[C],D=C+1,X=P[D];if(0>l(A,pe))D<Q&&0>l(X,A)?(P[Le]=X,P[D]=pe,Le=D):(P[Le]=A,P[C]=pe,Le=C);else if(D<Q&&0>l(X,pe))P[Le]=X,P[D]=pe,Le=D;else break e}}return de}function l(P,de){var pe=P.sortIndex-de.sortIndex;return pe!==0?pe:P.id-de.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();a.unstable_now=function(){return d.now()-p}}var m=[],g=[],b=1,w=null,x=3,E=!1,_=!1,F=!1,V=!1,ee=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function Y(P){for(var de=r(g);de!==null;){if(de.callback===null)s(g);else if(de.startTime<=P)s(g),de.sortIndex=de.expirationTime,t(m,de);else break;de=r(g)}}function me(P){if(F=!1,Y(P),!_)if(r(m)!==null)_=!0,be||(be=!0,De());else{var de=r(g);de!==null&&Ke(me,de.startTime-P)}}var be=!1,B=-1,he=5,se=-1;function ye(){return V?!0:!(a.unstable_now()-se<he)}function $e(){if(V=!1,be){var P=a.unstable_now();se=P;var de=!0;try{e:{_=!1,F&&(F=!1,W(B),B=-1),E=!0;var pe=x;try{t:{for(Y(P),w=r(m);w!==null&&!(w.expirationTime>P&&ye());){var Le=w.callback;if(typeof Le=="function"){w.callback=null,x=w.priorityLevel;var Q=Le(w.expirationTime<=P);if(P=a.unstable_now(),typeof Q=="function"){w.callback=Q,Y(P),de=!0;break t}w===r(m)&&s(m),Y(P)}else s(m);w=r(m)}if(w!==null)de=!0;else{var v=r(g);v!==null&&Ke(me,v.startTime-P),de=!1}}break e}finally{w=null,x=pe,E=!1}de=void 0}}finally{de?De():be=!1}}}var De;if(typeof L=="function")De=function(){L($e)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,it=We.port2;We.port1.onmessage=$e,De=function(){it.postMessage(null)}}else De=function(){ee($e,0)};function Ke(P,de){B=ee(function(){P(a.unstable_now())},de)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(P){P.callback=null},a.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<P?Math.floor(1e3/P):5},a.unstable_getCurrentPriorityLevel=function(){return x},a.unstable_next=function(P){switch(x){case 1:case 2:case 3:var de=3;break;default:de=x}var pe=x;x=de;try{return P()}finally{x=pe}},a.unstable_requestPaint=function(){V=!0},a.unstable_runWithPriority=function(P,de){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var pe=x;x=P;try{return de()}finally{x=pe}},a.unstable_scheduleCallback=function(P,de,pe){var Le=a.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Le+pe:Le):pe=Le,P){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=pe+Q,P={id:b++,callback:de,priorityLevel:P,startTime:pe,expirationTime:Q,sortIndex:-1},pe>Le?(P.sortIndex=pe,t(g,P),r(m)===null&&P===r(g)&&(F?(W(B),B=-1):F=!0,Ke(me,pe-Le))):(P.sortIndex=Q,t(m,P),_||E||(_=!0,be||(be=!0,De()))),P},a.unstable_shouldYield=ye,a.unstable_wrapCallback=function(P){var de=x;return function(){var pe=x;x=de;try{return P.apply(this,arguments)}finally{x=pe}}}})(cf)),cf}var Fy;function c2(){return Fy||(Fy=1,lf.exports=l2()),lf.exports}var uf={exports:{}},Ln={};var Zy;function u2(){if(Zy)return Ln;Zy=1;var a=Nh();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:m,containerInfo:g,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Ln.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(m,g,null,b)},Ln.flushSync=function(m){var g=d.T,b=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=b,s.d.f()}},Ln.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Ln.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Ln.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin),x=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:x,fetchPriority:E}):b==="script"&&s.d.X(m,{crossOrigin:w,integrity:x,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Ln.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Ln.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin);s.d.L(m,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Ln.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Ln.requestFormReset=function(m){s.d.r(m)},Ln.unstable_batchedUpdates=function(m,g){return m(g)},Ln.useFormState=function(m,g,b){return d.H.useFormState(m,g,b)},Ln.useFormStatus=function(){return d.H.useHostTransitionStatus()},Ln.version="19.2.0",Ln}var Xy;function cb(){if(Xy)return uf.exports;Xy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),uf.exports=u2(),uf.exports}var Ky;function d2(){if(Ky)return xo;Ky=1;var a=c2(),t=Nh(),r=cb();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),n;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var y=!1,S=u.child;S;){if(S===i){y=!0,i=u,o=f;break}if(S===o){y=!0,o=u,i=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===i){y=!0,i=f,o=u;break}if(S===o){y=!0,o=f,i=u;break}S=S.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,x=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),L=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),$e=Symbol.iterator;function De(e){return e===null||typeof e!="object"?null:(e=$e&&e[$e]||e["@@iterator"],typeof e=="function"?e:null)}var We=Symbol.for("react.client.reference");function it(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===We?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case ee:return"Profiler";case V:return"StrictMode";case me:return"Suspense";case be:return"SuspenseList";case se:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case _:return"Portal";case L:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case Y:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:it(e.type)||"Memo";case he:n=e._payload,e=e._init;try{return it(e(n))}catch{}}return null}var Ke=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Le=[],Q=-1;function v(e){return{current:e}}function C(e){0>Q||(e.current=Le[Q],Le[Q]=null,Q--)}function A(e,n){Q++,Le[Q]=e.current,e.current=n}var D=v(null),X=v(null),ue=v(null),we=v(null);function Ie(e,n){switch(A(ue,n),A(X,e),A(D,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?dy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=dy(n),e=fy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}C(D),A(D,e)}function Ye(){C(D),C(X),C(ue)}function Et(e){e.memoizedState!==null&&A(we,e);var n=D.current,i=fy(n,e.type);n!==i&&(A(X,e),A(D,i))}function zt(e){X.current===e&&(C(D),C(X)),we.current===e&&(C(we),yo._currentValue=pe)}var Lt,Jt;function ot(e){if(Lt===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);Lt=n&&n[1]||"",Jt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lt+e+Jt}var Bt=!1;function bn(e,n){if(!e||Bt)return"";Bt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(Z){var G=Z}Reflect.construct(e,[],ie)}else{try{ie.call()}catch(Z){G=Z}e.call(ie.prototype)}}else{try{throw Error()}catch(Z){G=Z}(ie=e())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(Z){if(Z&&G&&typeof Z.stack=="string")return[Z.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var N=y.split(`
`),H=S.split(`
`);for(u=o=0;o<N.length&&!N[o].includes("DetermineComponentFrameRoot");)o++;for(;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;if(o===N.length||u===H.length)for(o=N.length-1,u=H.length-1;1<=o&&0<=u&&N[o]!==H[u];)u--;for(;1<=o&&0<=u;o--,u--)if(N[o]!==H[u]){if(o!==1||u!==1)do if(o--,u--,0>u||N[o]!==H[u]){var te=`
`+N[o].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=o&&0<=u);break}}}finally{Bt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?ot(i):""}function Hn(e,n){switch(e.tag){case 26:case 27:case 5:return ot(e.type);case 16:return ot("Lazy");case 13:return e.child!==n&&n!==null?ot("Suspense Fallback"):ot("Suspense");case 19:return ot("SuspenseList");case 0:case 15:return bn(e.type,!1);case 11:return bn(e.type.render,!1);case 1:return bn(e.type,!0);case 31:return ot("Activity");default:return""}}function Xe(e){try{var n="",i=null;do n+=Hn(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var q=Object.prototype.hasOwnProperty,ne=a.unstable_scheduleCallback,J=a.unstable_cancelCallback,je=a.unstable_shouldYield,Ee=a.unstable_requestPaint,R=a.unstable_now,T=a.unstable_getCurrentPriorityLevel,U=a.unstable_ImmediatePriority,ce=a.unstable_UserBlockingPriority,le=a.unstable_NormalPriority,Ae=a.unstable_LowPriority,Se=a.unstable_IdlePriority,He=a.log,Ve=a.unstable_setDisableYieldValue,et=null,_e=null;function Ce(e){if(typeof He=="function"&&Ve(e),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(et,e)}catch{}}var oe=Math.clz32?Math.clz32:Nt,At=Math.log,Pe=Math.LN2;function Nt(e){return e>>>=0,e===0?32:31-(At(e)/Pe|0)|0}var Kt=256,lt=262144,_t=4194304;function qt(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function En(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?u=qt(o):(y&=S,y!==0?u=qt(y):i||(i=S&~e,i!==0&&(u=qt(i))))):(S=o&~f,S!==0?u=qt(S):y!==0?u=qt(y):i||(i=o&~e,i!==0&&(u=qt(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function Vt(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Cn(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function La(){var e=_t;return _t<<=1,(_t&62914560)===0&&(_t=4194304),e}function Ba(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function Gn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oi(e,n,i,o,u,f){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,N=e.expirationTimes,H=e.hiddenUpdates;for(i=y&~i;0<i;){var te=31-oe(i),ie=1<<te;S[te]=0,N[te]=-1;var G=H[te];if(G!==null)for(H[te]=null,te=0;te<G.length;te++){var Z=G[te];Z!==null&&(Z.lane&=-536870913)}i&=~ie}o!==0&&vr(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function vr(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-oe(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function ti(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-oe(i),u=1<<o;u&n|e[o]&n&&(e[o]|=n),i&=~u}}function en(e,n){var i=n&-n;return i=(i&42)!==0?1:sn(i),(i&(e.suspendedLanes|n))!==0?0:i}function sn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Jn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function wn(){var e=de.p;return e!==0?e:(e=window.event,e===void 0?32:zy(e.type))}function ni(e,n){var i=de.p;try{return de.p=e,n()}finally{de.p=i}}var ea=Math.random().toString(36).slice(2),O="__reactFiber$"+ea,j="__reactProps$"+ea,K="__reactContainer$"+ea,re="__reactEvents$"+ea,Me="__reactListeners$"+ea,Qt="__reactHandles$"+ea,On="__reactResources$"+ea,ze="__reactMarker$"+ea;function Ut(e){delete e[O],delete e[j],delete e[re],delete e[Me],delete e[Qt]}function dt(e){var n=e[O];if(n)return n;for(var i=e.parentNode;i;){if(n=i[K]||i[O]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=by(e);e!==null;){if(i=e[O])return i;e=by(e)}return n}e=i,i=e.parentNode}return null}function st(e){if(e=e[O]||e[K]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Xa(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function ua(e){var n=e[On];return n||(n=e[On]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function I(e){e[ze]=!0}var fe=new Set,ve={};function xe(e,n){Ne(e,n),Ne(e+"Capture",n)}function Ne(e,n){for(ve[e]=n,e=0;e<n.length;e++)fe.add(n[e])}var nt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Gt={},on={};function ln(e){return q.call(on,e)?!0:q.call(Gt,e)?!1:nt.test(e)?on[e]=!0:(Gt[e]=!0,!1)}function Yt(e,n,i){if(ln(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function Sn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function bt(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function $t(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function br(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ka(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ca(e){if(!e._valueTracker){var n=br(e)?"checked":"value";e._valueTracker=Ka(e,n,""+e[n])}}function Qc(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=br(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function Fo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ww=/[\n"\\]/g;function da(e){return e.replace(Ww,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Wc(e,n,i,o,u,f,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+$t(n)):e.value!==""+$t(n)&&(e.value=""+$t(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?Jc(e,y,$t(n)):i!=null?Jc(e,y,$t(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+$t(S):e.removeAttribute("name")}function ip(e,n,i,o,u,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Ca(e);return}i=i!=null?""+$t(i):"",n=n!=null?""+$t(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Ca(e)}function Jc(e,n,i){n==="number"&&Fo(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function ji(e,n,i,o){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+$t(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function sp(e,n,i){if(n!=null&&(n=""+$t(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+$t(i):""}function op(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(Ke(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=$t(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Ca(e)}function Ai(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Jw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lp(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Jw.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function cp(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&i[u]!==o&&lp(e,u,o)}else for(var f in n)n.hasOwnProperty(f)&&lp(e,f,n[f])}function eu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zo(e){return tS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Qa(){}var tu=null;function nu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _i=null,Di=null;function up(e){var n=st(e);if(n&&(e=n.stateNode)){var i=e[j]||null;e:switch(e=n.stateNode,n.type){case"input":if(Wc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+da(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var u=o[j]||null;if(!u)throw Error(s(90));Wc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&Qc(o)}break e;case"textarea":sp(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&ji(e,!!i.multiple,n,!1)}}}var au=!1;function dp(e,n,i){if(au)return e(n,i);au=!0;try{var o=e(n);return o}finally{if(au=!1,(_i!==null||Di!==null)&&(zl(),_i&&(n=_i,e=Di,Di=_i=null,up(n),e)))for(n=0;n<e.length;n++)up(e[n])}}function Ms(e,n){var i=e.stateNode;if(i===null)return null;var o=i[j]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ru=!1;if(Wa)try{var Rs={};Object.defineProperty(Rs,"passive",{get:function(){ru=!0}}),window.addEventListener("test",Rs,Rs),window.removeEventListener("test",Rs,Rs)}catch{ru=!1}var wr=null,iu=null,Xo=null;function fp(){if(Xo)return Xo;var e,n=iu,i=n.length,o,u="value"in wr?wr.value:wr.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&n[i-o]===u[f-o];o++);return Xo=u.slice(e,1<o?1-o:void 0)}function Ko(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Qo(){return!0}function hp(){return!1}function Yn(e){function n(i,o,u,f,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Qo:hp,this.isPropagationStopped=hp,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),n}var ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=Yn(ai),zs=w({},ai,{view:0,detail:0}),nS=Yn(zs),su,ou,Ls,Jo=w({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(su=e.screenX-Ls.screenX,ou=e.screenY-Ls.screenY):ou=su=0,Ls=e),su)},movementY:function(e){return"movementY"in e?e.movementY:ou}}),pp=Yn(Jo),aS=w({},Jo,{dataTransfer:0}),rS=Yn(aS),iS=w({},zs,{relatedTarget:0}),lu=Yn(iS),sS=w({},ai,{animationName:0,elapsedTime:0,pseudoElement:0}),oS=Yn(sS),lS=w({},ai,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cS=Yn(lS),uS=w({},ai,{data:0}),mp=Yn(uS),dS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hS[e])?!!n[e]:!1}function cu(){return pS}var mS=w({},zs,{key:function(e){if(e.key){var n=dS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ko(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cu,charCode:function(e){return e.type==="keypress"?Ko(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ko(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gS=Yn(mS),yS=w({},Jo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gp=Yn(yS),vS=w({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cu}),bS=Yn(vS),wS=w({},ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),SS=Yn(wS),xS=w({},Jo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kS=Yn(xS),ES=w({},ai,{newState:0,oldState:0}),CS=Yn(ES),TS=[9,13,27,32],uu=Wa&&"CompositionEvent"in window,Bs=null;Wa&&"documentMode"in document&&(Bs=document.documentMode);var NS=Wa&&"TextEvent"in window&&!Bs,yp=Wa&&(!uu||Bs&&8<Bs&&11>=Bs),vp=" ",bp=!1;function wp(e,n){switch(e){case"keyup":return TS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Mi=!1;function OS(e,n){switch(e){case"compositionend":return Sp(n);case"keypress":return n.which!==32?null:(bp=!0,vp);case"textInput":return e=n.data,e===vp&&bp?null:e;default:return null}}function jS(e,n){if(Mi)return e==="compositionend"||!uu&&wp(e,n)?(e=fp(),Xo=iu=wr=null,Mi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return yp&&n.locale!=="ko"?null:n.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!AS[e.type]:n==="textarea"}function kp(e,n,i,o){_i?Di?Di.push(o):Di=[o]:_i=o,n=Vl(n,"onChange"),0<n.length&&(i=new Wo("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var Us=null,$s=null;function _S(e){iy(e,0)}function el(e){var n=Xa(e);if(Qc(n))return e}function Ep(e,n){if(e==="change")return n}var Cp=!1;if(Wa){var du;if(Wa){var fu="oninput"in document;if(!fu){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),fu=typeof Tp.oninput=="function"}du=fu}else du=!1;Cp=du&&(!document.documentMode||9<document.documentMode)}function Np(){Us&&(Us.detachEvent("onpropertychange",Op),$s=Us=null)}function Op(e){if(e.propertyName==="value"&&el($s)){var n=[];kp(n,$s,e,nu(e)),dp(_S,n)}}function DS(e,n,i){e==="focusin"?(Np(),Us=n,$s=i,Us.attachEvent("onpropertychange",Op)):e==="focusout"&&Np()}function MS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return el($s)}function RS(e,n){if(e==="click")return el(n)}function zS(e,n){if(e==="input"||e==="change")return el(n)}function LS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ta=typeof Object.is=="function"?Object.is:LS;function Is(e,n){if(ta(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!q.call(n,u)||!ta(e[u],n[u]))return!1}return!0}function jp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ap(e,n){var i=jp(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=jp(i)}}function _p(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?_p(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Dp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=Fo(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=Fo(e.document)}return n}function hu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var BS=Wa&&"documentMode"in document&&11>=document.documentMode,Ri=null,pu=null,Hs=null,mu=!1;function Mp(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;mu||Ri==null||Ri!==Fo(o)||(o=Ri,"selectionStart"in o&&hu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Hs&&Is(Hs,o)||(Hs=o,o=Vl(pu,"onSelect"),0<o.length&&(n=new Wo("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=Ri)))}function ri(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var zi={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},gu={},Rp={};Wa&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function ii(e){if(gu[e])return gu[e];if(!zi[e])return e;var n=zi[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Rp)return gu[e]=n[i];return e}var zp=ii("animationend"),Lp=ii("animationiteration"),Bp=ii("animationstart"),US=ii("transitionrun"),$S=ii("transitionstart"),IS=ii("transitioncancel"),Up=ii("transitionend"),$p=new Map,yu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yu.push("scrollEnd");function Ta(e,n){$p.set(e,n),xe(n,[e])}var tl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fa=[],Li=0,vu=0;function nl(){for(var e=Li,n=vu=Li=0;n<e;){var i=fa[n];fa[n++]=null;var o=fa[n];fa[n++]=null;var u=fa[n];fa[n++]=null;var f=fa[n];if(fa[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}f!==0&&Ip(i,u,f)}}function al(e,n,i,o){fa[Li++]=e,fa[Li++]=n,fa[Li++]=i,fa[Li++]=o,vu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function bu(e,n,i,o){return al(e,n,i,o),rl(e)}function si(e,n){return al(e,null,null,n),rl(e)}function Ip(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&n!==null&&(u=31-oe(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[n]:o.push(n),n.lane=i|536870912),f):null}function rl(e){if(50<co)throw co=0,Od=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Bi={};function HS(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function na(e,n,i,o){return new HS(e,n,i,o)}function wu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ja(e,n){var i=e.alternate;return i===null?(i=na(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Hp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function il(e,n,i,o,u,f){var y=0;if(o=e,typeof e=="function")wu(e)&&(y=1);else if(typeof e=="string")y=Px(e,i,D.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case se:return e=na(31,i,n,u),e.elementType=se,e.lanes=f,e;case F:return oi(i.children,u,f,n);case V:y=8,u|=24;break;case ee:return e=na(12,i,n,u|2),e.elementType=ee,e.lanes=f,e;case me:return e=na(13,i,n,u),e.elementType=me,e.lanes=f,e;case be:return e=na(19,i,n,u),e.elementType=be,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:y=10;break e;case W:y=9;break e;case Y:y=11;break e;case B:y=14;break e;case he:y=16,o=null;break e}y=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=na(y,i,n,u),n.elementType=e,n.type=o,n.lanes=f,n}function oi(e,n,i,o){return e=na(7,e,o,n),e.lanes=i,e}function Su(e,n,i){return e=na(6,e,null,n),e.lanes=i,e}function Vp(e){var n=na(18,null,null,0);return n.stateNode=e,n}function xu(e,n,i){return n=na(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var qp=new WeakMap;function ha(e,n){if(typeof e=="object"&&e!==null){var i=qp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Xe(n)},qp.set(e,n),n)}return{value:e,source:n,stack:Xe(n)}}var Ui=[],$i=0,sl=null,Vs=0,pa=[],ma=0,Sr=null,Ua=1,$a="";function er(e,n){Ui[$i++]=Vs,Ui[$i++]=sl,sl=e,Vs=n}function Gp(e,n,i){pa[ma++]=Ua,pa[ma++]=$a,pa[ma++]=Sr,Sr=e;var o=Ua;e=$a;var u=32-oe(o)-1;o&=~(1<<u),i+=1;var f=32-oe(n)+u;if(30<f){var y=u-u%5;f=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Ua=1<<32-oe(n)+u|i<<u|o,$a=f+e}else Ua=1<<f|i<<u|o,$a=e}function ku(e){e.return!==null&&(er(e,1),Gp(e,1,0))}function Eu(e){for(;e===sl;)sl=Ui[--$i],Ui[$i]=null,Vs=Ui[--$i],Ui[$i]=null;for(;e===Sr;)Sr=pa[--ma],pa[ma]=null,$a=pa[--ma],pa[ma]=null,Ua=pa[--ma],pa[ma]=null}function Yp(e,n){pa[ma++]=Ua,pa[ma++]=$a,pa[ma++]=Sr,Ua=n.id,$a=n.overflow,Sr=e}var jn=null,Pt=null,gt=!1,xr=null,ga=!1,Cu=Error(s(519));function kr(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qs(ha(n,e)),Cu}function Pp(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[O]=e,n[j]=o,i){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(i=0;i<fo.length;i++)ut(fo[i],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":ut("invalid",n),ip(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ut("invalid",n);break;case"textarea":ut("invalid",n),op(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||cy(n.textContent,i)?(o.popover!=null&&(ut("beforetoggle",n),ut("toggle",n)),o.onScroll!=null&&ut("scroll",n),o.onScrollEnd!=null&&ut("scrollend",n),o.onClick!=null&&(n.onclick=Qa),n=!0):n=!1,n||kr(e,!0)}function Fp(e){for(jn=e.return;jn;)switch(jn.tag){case 5:case 31:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:jn=jn.return}}function Ii(e){if(e!==jn)return!1;if(!gt)return Fp(e),gt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||qd(e.type,e.memoizedProps)),i=!i),i&&Pt&&kr(e),Fp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Pt=vy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Pt=vy(e)}else n===27?(n=Pt,Br(e.type)?(e=Zd,Zd=null,Pt=e):Pt=n):Pt=jn?va(e.stateNode.nextSibling):null;return!0}function li(){Pt=jn=null,gt=!1}function Tu(){var e=xr;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),xr=null),e}function qs(e){xr===null?xr=[e]:xr.push(e)}var Nu=v(null),ci=null,tr=null;function Er(e,n,i){A(Nu,n._currentValue),n._currentValue=i}function nr(e){e._currentValue=Nu.current,C(Nu)}function Ou(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function ju(e,n,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var y=u.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=u;for(var N=0;N<n.length;N++)if(S.context===n[N]){f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),Ou(f.return,i,e),o||(y=null);break e}f=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(s(341));y.lanes|=i,f=y.alternate,f!==null&&(f.lanes|=i),Ou(y,i,e),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===e){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function Hi(e,n,i,o){e=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var S=u.type;ta(u.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(u===we.current){if(y=u.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(yo):e=[yo])}u=u.return}e!==null&&ju(n,e,i,o),n.flags|=262144}function ol(e){for(e=e.firstContext;e!==null;){if(!ta(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ui(e){ci=e,tr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function An(e){return Zp(ci,e)}function ll(e,n){return ci===null&&ui(e),Zp(e,n)}function Zp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},tr===null){if(e===null)throw Error(s(308));tr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else tr=tr.next=n;return i}var VS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},qS=a.unstable_scheduleCallback,GS=a.unstable_NormalPriority,fn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Au(){return{controller:new VS,data:new Map,refCount:0}}function Gs(e){e.refCount--,e.refCount===0&&qS(GS,function(){e.controller.abort()})}var Ys=null,_u=0,Vi=0,qi=null;function YS(e,n){if(Ys===null){var i=Ys=[];_u=0,Vi=Rd(),qi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return _u++,n.then(Xp,Xp),n}function Xp(){if(--_u===0&&Ys!==null){qi!==null&&(qi.status="fulfilled");var e=Ys;Ys=null,Vi=0,qi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function PS(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Kp=P.S;P.S=function(e,n){Mg=R(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&YS(e,n),Kp!==null&&Kp(e,n)};var di=v(null);function Du(){var e=di.current;return e!==null?e:It.pooledCache}function cl(e,n){n===null?A(di,di.current):A(di,n.pool)}function Qp(){var e=Du();return e===null?null:{parent:fn._currentValue,pool:e}}var Gi=Error(s(460)),Mu=Error(s(474)),ul=Error(s(542)),dl={then:function(){}};function Wp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(Qa,Qa),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tm(e),e;default:if(typeof n.status=="string")n.then(Qa,Qa);else{if(e=It,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,tm(e),e}throw hi=n,Gi}}function fi(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(hi=i,Gi):i}}var hi=null;function em(){if(hi===null)throw Error(s(459));var e=hi;return hi=null,e}function tm(e){if(e===Gi||e===ul)throw Error(s(483))}var Yi=null,Ps=0;function fl(e){var n=Ps;return Ps+=1,Yi===null&&(Yi=[]),Jp(Yi,e,n)}function Fs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function hl(e,n){throw n.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function nm(e){function n(z,M){if(e){var $=z.deletions;$===null?(z.deletions=[M],z.flags|=16):$.push(M)}}function i(z,M){if(!e)return null;for(;M!==null;)n(z,M),M=M.sibling;return null}function o(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function u(z,M){return z=Ja(z,M),z.index=0,z.sibling=null,z}function f(z,M,$){return z.index=$,e?($=z.alternate,$!==null?($=$.index,$<M?(z.flags|=67108866,M):$):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function S(z,M,$,ae){return M===null||M.tag!==6?(M=Su($,z.mode,ae),M.return=z,M):(M=u(M,$),M.return=z,M)}function N(z,M,$,ae){var qe=$.type;return qe===F?te(z,M,$.props.children,ae,$.key):M!==null&&(M.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===he&&fi(qe)===M.type)?(M=u(M,$.props),Fs(M,$),M.return=z,M):(M=il($.type,$.key,$.props,null,z.mode,ae),Fs(M,$),M.return=z,M)}function H(z,M,$,ae){return M===null||M.tag!==4||M.stateNode.containerInfo!==$.containerInfo||M.stateNode.implementation!==$.implementation?(M=xu($,z.mode,ae),M.return=z,M):(M=u(M,$.children||[]),M.return=z,M)}function te(z,M,$,ae,qe){return M===null||M.tag!==7?(M=oi($,z.mode,ae,qe),M.return=z,M):(M=u(M,$),M.return=z,M)}function ie(z,M,$){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=Su(""+M,z.mode,$),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case E:return $=il(M.type,M.key,M.props,null,z.mode,$),Fs($,M),$.return=z,$;case _:return M=xu(M,z.mode,$),M.return=z,M;case he:return M=fi(M),ie(z,M,$)}if(Ke(M)||De(M))return M=oi(M,z.mode,$,null),M.return=z,M;if(typeof M.then=="function")return ie(z,fl(M),$);if(M.$$typeof===L)return ie(z,ll(z,M),$);hl(z,M)}return null}function G(z,M,$,ae){var qe=M!==null?M.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return qe!==null?null:S(z,M,""+$,ae);if(typeof $=="object"&&$!==null){switch($.$$typeof){case E:return $.key===qe?N(z,M,$,ae):null;case _:return $.key===qe?H(z,M,$,ae):null;case he:return $=fi($),G(z,M,$,ae)}if(Ke($)||De($))return qe!==null?null:te(z,M,$,ae,null);if(typeof $.then=="function")return G(z,M,fl($),ae);if($.$$typeof===L)return G(z,M,ll(z,$),ae);hl(z,$)}return null}function Z(z,M,$,ae,qe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return z=z.get($)||null,S(M,z,""+ae,qe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case E:return z=z.get(ae.key===null?$:ae.key)||null,N(M,z,ae,qe);case _:return z=z.get(ae.key===null?$:ae.key)||null,H(M,z,ae,qe);case he:return ae=fi(ae),Z(z,M,$,ae,qe)}if(Ke(ae)||De(ae))return z=z.get($)||null,te(M,z,ae,qe,null);if(typeof ae.then=="function")return Z(z,M,$,fl(ae),qe);if(ae.$$typeof===L)return Z(z,M,$,ll(M,ae),qe);hl(M,ae)}return null}function Re(z,M,$,ae){for(var qe=null,wt=null,Be=M,tt=M=0,ht=null;Be!==null&&tt<$.length;tt++){Be.index>tt?(ht=Be,Be=null):ht=Be.sibling;var St=G(z,Be,$[tt],ae);if(St===null){Be===null&&(Be=ht);break}e&&Be&&St.alternate===null&&n(z,Be),M=f(St,M,tt),wt===null?qe=St:wt.sibling=St,wt=St,Be=ht}if(tt===$.length)return i(z,Be),gt&&er(z,tt),qe;if(Be===null){for(;tt<$.length;tt++)Be=ie(z,$[tt],ae),Be!==null&&(M=f(Be,M,tt),wt===null?qe=Be:wt.sibling=Be,wt=Be);return gt&&er(z,tt),qe}for(Be=o(Be);tt<$.length;tt++)ht=Z(Be,z,tt,$[tt],ae),ht!==null&&(e&&ht.alternate!==null&&Be.delete(ht.key===null?tt:ht.key),M=f(ht,M,tt),wt===null?qe=ht:wt.sibling=ht,wt=ht);return e&&Be.forEach(function(Vr){return n(z,Vr)}),gt&&er(z,tt),qe}function Ge(z,M,$,ae){if($==null)throw Error(s(151));for(var qe=null,wt=null,Be=M,tt=M=0,ht=null,St=$.next();Be!==null&&!St.done;tt++,St=$.next()){Be.index>tt?(ht=Be,Be=null):ht=Be.sibling;var Vr=G(z,Be,St.value,ae);if(Vr===null){Be===null&&(Be=ht);break}e&&Be&&Vr.alternate===null&&n(z,Be),M=f(Vr,M,tt),wt===null?qe=Vr:wt.sibling=Vr,wt=Vr,Be=ht}if(St.done)return i(z,Be),gt&&er(z,tt),qe;if(Be===null){for(;!St.done;tt++,St=$.next())St=ie(z,St.value,ae),St!==null&&(M=f(St,M,tt),wt===null?qe=St:wt.sibling=St,wt=St);return gt&&er(z,tt),qe}for(Be=o(Be);!St.done;tt++,St=$.next())St=Z(Be,z,tt,St.value,ae),St!==null&&(e&&St.alternate!==null&&Be.delete(St.key===null?tt:St.key),M=f(St,M,tt),wt===null?qe=St:wt.sibling=St,wt=St);return e&&Be.forEach(function(a2){return n(z,a2)}),gt&&er(z,tt),qe}function Rt(z,M,$,ae){if(typeof $=="object"&&$!==null&&$.type===F&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case E:e:{for(var qe=$.key;M!==null;){if(M.key===qe){if(qe=$.type,qe===F){if(M.tag===7){i(z,M.sibling),ae=u(M,$.props.children),ae.return=z,z=ae;break e}}else if(M.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===he&&fi(qe)===M.type){i(z,M.sibling),ae=u(M,$.props),Fs(ae,$),ae.return=z,z=ae;break e}i(z,M);break}else n(z,M);M=M.sibling}$.type===F?(ae=oi($.props.children,z.mode,ae,$.key),ae.return=z,z=ae):(ae=il($.type,$.key,$.props,null,z.mode,ae),Fs(ae,$),ae.return=z,z=ae)}return y(z);case _:e:{for(qe=$.key;M!==null;){if(M.key===qe)if(M.tag===4&&M.stateNode.containerInfo===$.containerInfo&&M.stateNode.implementation===$.implementation){i(z,M.sibling),ae=u(M,$.children||[]),ae.return=z,z=ae;break e}else{i(z,M);break}else n(z,M);M=M.sibling}ae=xu($,z.mode,ae),ae.return=z,z=ae}return y(z);case he:return $=fi($),Rt(z,M,$,ae)}if(Ke($))return Re(z,M,$,ae);if(De($)){if(qe=De($),typeof qe!="function")throw Error(s(150));return $=qe.call($),Ge(z,M,$,ae)}if(typeof $.then=="function")return Rt(z,M,fl($),ae);if($.$$typeof===L)return Rt(z,M,ll(z,$),ae);hl(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,M!==null&&M.tag===6?(i(z,M.sibling),ae=u(M,$),ae.return=z,z=ae):(i(z,M),ae=Su($,z.mode,ae),ae.return=z,z=ae),y(z)):i(z,M)}return function(z,M,$,ae){try{Ps=0;var qe=Rt(z,M,$,ae);return Yi=null,qe}catch(Be){if(Be===Gi||Be===ul)throw Be;var wt=na(29,Be,null,z.mode);return wt.lanes=ae,wt.return=z,wt}finally{}}}var pi=nm(!0),am=nm(!1),Cr=!1;function Ru(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function zu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Tr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(xt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=rl(e),Ip(e,null,i),n}return al(e,o,n,i),rl(e)}function Zs(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,ti(e,i)}}function Lu(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Bu=!1;function Xs(){if(Bu){var e=qi;if(e!==null)throw e}}function Ks(e,n,i,o){Bu=!1;var u=e.updateQueue;Cr=!1;var f=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var N=S,H=N.next;N.next=null,y===null?f=H:y.next=H,y=N;var te=e.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==y&&(S===null?te.firstBaseUpdate=H:S.next=H,te.lastBaseUpdate=N))}if(f!==null){var ie=u.baseState;y=0,te=H=N=null,S=f;do{var G=S.lane&-536870913,Z=G!==S.lane;if(Z?(ft&G)===G:(o&G)===G){G!==0&&G===Vi&&(Bu=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Re=e,Ge=S;G=n;var Rt=i;switch(Ge.tag){case 1:if(Re=Ge.payload,typeof Re=="function"){ie=Re.call(Rt,ie,G);break e}ie=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=Ge.payload,G=typeof Re=="function"?Re.call(Rt,ie,G):Re,G==null)break e;ie=w({},ie,G);break e;case 2:Cr=!0}}G=S.callback,G!==null&&(e.flags|=64,Z&&(e.flags|=8192),Z=u.callbacks,Z===null?u.callbacks=[G]:Z.push(G))}else Z={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(H=te=Z,N=ie):te=te.next=Z,y|=G;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;Z=S,S=Z.next,Z.next=null,u.lastBaseUpdate=Z,u.shared.pending=null}}while(!0);te===null&&(N=ie),u.baseState=N,u.firstBaseUpdate=H,u.lastBaseUpdate=te,f===null&&(u.shared.lanes=0),Dr|=y,e.lanes=y,e.memoizedState=ie}}function rm(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function im(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)rm(i[e],n)}var Pi=v(null),pl=v(0);function sm(e,n){e=dr,A(pl,e),A(Pi,n),dr=e|n.baseLanes}function Uu(){A(pl,dr),A(Pi,Pi.current)}function $u(){dr=pl.current,C(Pi),C(pl)}var aa=v(null),ya=null;function Or(e){var n=e.alternate;A(cn,cn.current&1),A(aa,e),ya===null&&(n===null||Pi.current!==null||n.memoizedState!==null)&&(ya=e)}function Iu(e){A(cn,cn.current),A(aa,e),ya===null&&(ya=e)}function om(e){e.tag===22?(A(cn,cn.current),A(aa,e),ya===null&&(ya=e)):jr()}function jr(){A(cn,cn.current),A(aa,aa.current)}function ra(e){C(aa),ya===e&&(ya=null),C(cn)}var cn=v(0);function ml(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Pd(i)||Fd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ar=0,Je=null,Dt=null,hn=null,gl=!1,Fi=!1,mi=!1,yl=0,Qs=0,Zi=null,FS=0;function an(){throw Error(s(321))}function Hu(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!ta(e[i],n[i]))return!1;return!0}function Vu(e,n,i,o,u,f){return ar=f,Je=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,P.H=e===null||e.memoizedState===null?Gm:ad,mi=!1,f=i(o,u),mi=!1,Fi&&(f=cm(n,i,o,u)),lm(e),f}function lm(e){P.H=eo;var n=Dt!==null&&Dt.next!==null;if(ar=0,hn=Dt=Je=null,gl=!1,Qs=0,Zi=null,n)throw Error(s(300));e===null||pn||(e=e.dependencies,e!==null&&ol(e)&&(pn=!0))}function cm(e,n,i,o){Je=e;var u=0;do{if(Fi&&(Zi=null),Qs=0,Fi=!1,25<=u)throw Error(s(301));if(u+=1,hn=Dt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}P.H=Ym,f=n(i,o)}while(Fi);return f}function ZS(){var e=P.H,n=e.useState()[0];return n=typeof n.then=="function"?Ws(n):n,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(Je.flags|=1024),n}function qu(){var e=yl!==0;return yl=0,e}function Gu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Yu(e){if(gl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}gl=!1}ar=0,hn=Dt=Je=null,Fi=!1,Qs=yl=0,Zi=null}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Je.memoizedState=hn=e:hn=hn.next=e,hn}function un(){if(Dt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var n=hn===null?Je.memoizedState:hn.next;if(n!==null)hn=n,Dt=e;else{if(e===null)throw Je.alternate===null?Error(s(467)):Error(s(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},hn===null?Je.memoizedState=hn=e:hn=hn.next=e}return hn}function vl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ws(e){var n=Qs;return Qs+=1,Zi===null&&(Zi=[]),e=Jp(Zi,e,n),n=Je,(hn===null?n.memoizedState:hn.next)===null&&(n=n.alternate,P.H=n===null||n.memoizedState===null?Gm:ad),e}function bl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ws(e);if(e.$$typeof===L)return An(e)}throw Error(s(438,String(e)))}function Pu(e){var n=null,i=Je.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=Je.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=vl(),Je.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=ye;return n.index++,i}function rr(e,n){return typeof n=="function"?n(e):n}function wl(e){var n=un();return Fu(n,Dt,e)}function Fu(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var y=u.next;u.next=f.next,f.next=y}n.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{n=u.next;var S=y=null,N=null,H=n,te=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?(ft&ie)===ie:(ar&ie)===ie){var G=H.revertLane;if(G===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===Vi&&(te=!0);else if((ar&G)===G){H=H.next,G===Vi&&(te=!0);continue}else ie={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(S=N=ie,y=f):N=N.next=ie,Je.lanes|=G,Dr|=G;ie=H.action,mi&&i(f,ie),f=H.hasEagerState?H.eagerState:i(f,ie)}else G={lane:ie,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},N===null?(S=N=G,y=f):N=N.next=G,Je.lanes|=ie,Dr|=ie;H=H.next}while(H!==null&&H!==n);if(N===null?y=f:N.next=S,!ta(f,e.memoizedState)&&(pn=!0,te&&(i=qi,i!==null)))throw i;e.memoizedState=f,e.baseState=y,e.baseQueue=N,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Zu(e){var n=un(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do f=e(f,y.action),y=y.next;while(y!==u);ta(f,n.memoizedState)||(pn=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,o]}function um(e,n,i){var o=Je,u=un(),f=gt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=n();var y=!ta((Dt||u).memoizedState,i);if(y&&(u.memoizedState=i,pn=!0),u=u.queue,Qu(hm.bind(null,o,u,e),[e]),u.getSnapshot!==n||y||hn!==null&&hn.memoizedState.tag&1){if(o.flags|=2048,Xi(9,{destroy:void 0},fm.bind(null,o,u,i,n),null),It===null)throw Error(s(349));f||(ar&127)!==0||dm(o,n,i)}return i}function dm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=Je.updateQueue,n===null?(n=vl(),Je.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function fm(e,n,i,o){n.value=i,n.getSnapshot=o,pm(n)&&mm(e)}function hm(e,n,i){return i(function(){pm(n)&&mm(e)})}function pm(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!ta(e,i)}catch{return!0}}function mm(e){var n=si(e,2);n!==null&&Kn(n,e,2)}function Xu(e){var n=Vn();if(typeof e=="function"){var i=e;if(e=i(),mi){Ce(!0);try{i()}finally{Ce(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:e},n}function gm(e,n,i,o){return e.baseState=i,Fu(e,Dt,typeof o=="function"?o:rr)}function XS(e,n,i,o,u){if(kl(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};P.T!==null?i(!0):f.isTransition=!1,o(f),i=n.pending,i===null?(f.next=n.pending=f,ym(n,f)):(f.next=i.next,n.pending=i.next=f)}}function ym(e,n){var i=n.action,o=n.payload,u=e.state;if(n.isTransition){var f=P.T,y={};P.T=y;try{var S=i(u,o),N=P.S;N!==null&&N(y,S),vm(e,n,S)}catch(H){Ku(e,n,H)}finally{f!==null&&y.types!==null&&(f.types=y.types),P.T=f}}else try{f=i(u,o),vm(e,n,f)}catch(H){Ku(e,n,H)}}function vm(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){bm(e,n,o)},function(o){return Ku(e,n,o)}):bm(e,n,i)}function bm(e,n,i){n.status="fulfilled",n.value=i,wm(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,ym(e,i)))}function Ku(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,wm(n),n=n.next;while(n!==o)}e.action=null}function wm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Sm(e,n){return n}function xm(e,n){if(gt){var i=It.formState;if(i!==null){e:{var o=Je;if(gt){if(Pt){t:{for(var u=Pt,f=ga;u.nodeType!==8;){if(!f){u=null;break t}if(u=va(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Pt=va(u.nextSibling),o=u.data==="F!";break e}}kr(o)}o=!1}o&&(n=i[0])}}return i=Vn(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sm,lastRenderedState:n},i.queue=o,i=Hm.bind(null,Je,o),o.dispatch=i,o=Xu(!1),f=nd.bind(null,Je,!1,o.queue),o=Vn(),u={state:n,dispatch:null,action:e,pending:null},o.queue=u,i=XS.bind(null,Je,u,f,i),u.dispatch=i,o.memoizedState=e,[n,i,!1]}function km(e){var n=un();return Em(n,Dt,e)}function Em(e,n,i){if(n=Fu(e,n,Sm)[0],e=wl(rr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Ws(n)}catch(y){throw y===Gi?ul:y}else o=n;n=un();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(Je.flags|=2048,Xi(9,{destroy:void 0},KS.bind(null,u,i),null)),[o,f,e]}function KS(e,n){e.action=n}function Cm(e){var n=un(),i=Dt;if(i!==null)return Em(n,i,e);un(),n=n.memoizedState,i=un();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function Xi(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=Je.updateQueue,n===null&&(n=vl(),Je.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function Tm(){return un().memoizedState}function Sl(e,n,i,o){var u=Vn();Je.flags|=e,u.memoizedState=Xi(1|n,{destroy:void 0},i,o===void 0?null:o)}function xl(e,n,i,o){var u=un();o=o===void 0?null:o;var f=u.memoizedState.inst;Dt!==null&&o!==null&&Hu(o,Dt.memoizedState.deps)?u.memoizedState=Xi(n,f,i,o):(Je.flags|=e,u.memoizedState=Xi(1|n,f,i,o))}function Nm(e,n){Sl(8390656,8,e,n)}function Qu(e,n){xl(2048,8,e,n)}function QS(e){Je.flags|=4;var n=Je.updateQueue;if(n===null)n=vl(),Je.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Om(e){var n=un().memoizedState;return QS({ref:n,nextImpl:e}),function(){if((xt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function jm(e,n){return xl(4,2,e,n)}function Am(e,n){return xl(4,4,e,n)}function _m(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Dm(e,n,i){i=i!=null?i.concat([e]):null,xl(4,4,_m.bind(null,n,e),i)}function Wu(){}function Mm(e,n){var i=un();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&Hu(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function Rm(e,n){var i=un();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&Hu(n,o[1]))return o[0];if(o=e(),mi){Ce(!0);try{e()}finally{Ce(!1)}}return i.memoizedState=[o,n],o}function Ju(e,n,i){return i===void 0||(ar&1073741824)!==0&&(ft&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=zg(),Je.lanes|=e,Dr|=e,i)}function zm(e,n,i,o){return ta(i,n)?i:Pi.current!==null?(e=Ju(e,i,o),ta(e,n)||(pn=!0),e):(ar&42)===0||(ar&1073741824)!==0&&(ft&261930)===0?(pn=!0,e.memoizedState=i):(e=zg(),Je.lanes|=e,Dr|=e,n)}function Lm(e,n,i,o,u){var f=de.p;de.p=f!==0&&8>f?f:8;var y=P.T,S={};P.T=S,nd(e,!1,n,i);try{var N=u(),H=P.S;if(H!==null&&H(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var te=PS(N,o);Js(e,n,te,oa(e))}else Js(e,n,o,oa(e))}catch(ie){Js(e,n,{then:function(){},status:"rejected",reason:ie},oa())}finally{de.p=f,y!==null&&S.types!==null&&(y.types=S.types),P.T=y}}function WS(){}function ed(e,n,i,o){if(e.tag!==5)throw Error(s(476));var u=Bm(e).queue;Lm(e,u,n,pe,i===null?WS:function(){return Um(e),i(o)})}function Bm(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:pe},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:rr,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Um(e){var n=Bm(e);n.next===null&&(n=e.alternate.memoizedState),Js(e,n.next.queue,{},oa())}function td(){return An(yo)}function $m(){return un().memoizedState}function Im(){return un().memoizedState}function JS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=oa();e=Tr(i);var o=Nr(n,e,i);o!==null&&(Kn(o,n,i),Zs(o,n,i)),n={cache:Au()},e.payload=n;return}n=n.return}}function ex(e,n,i){var o=oa();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},kl(e)?Vm(n,i):(i=bu(e,n,i,o),i!==null&&(Kn(i,e,o),qm(i,n,o)))}function Hm(e,n,i){var o=oa();Js(e,n,i,o)}function Js(e,n,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(kl(e))Vm(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,S=f(y,i);if(u.hasEagerState=!0,u.eagerState=S,ta(S,y))return al(e,n,u,0),It===null&&nl(),!1}catch{}finally{}if(i=bu(e,n,u,o),i!==null)return Kn(i,e,o),qm(i,n,o),!0}return!1}function nd(e,n,i,o){if(o={lane:2,revertLane:Rd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},kl(e)){if(n)throw Error(s(479))}else n=bu(e,i,o,2),n!==null&&Kn(n,e,2)}function kl(e){var n=e.alternate;return e===Je||n!==null&&n===Je}function Vm(e,n){Fi=gl=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function qm(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,ti(e,i)}}var eo={readContext:An,use:bl,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useLayoutEffect:an,useInsertionEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useSyncExternalStore:an,useId:an,useHostTransitionStatus:an,useFormState:an,useActionState:an,useOptimistic:an,useMemoCache:an,useCacheRefresh:an};eo.useEffectEvent=an;var Gm={readContext:An,use:bl,useCallback:function(e,n){return Vn().memoizedState=[e,n===void 0?null:n],e},useContext:An,useEffect:Nm,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,Sl(4194308,4,_m.bind(null,n,e),i)},useLayoutEffect:function(e,n){return Sl(4194308,4,e,n)},useInsertionEffect:function(e,n){Sl(4,2,e,n)},useMemo:function(e,n){var i=Vn();n=n===void 0?null:n;var o=e();if(mi){Ce(!0);try{e()}finally{Ce(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Vn();if(i!==void 0){var u=i(n);if(mi){Ce(!0);try{i(n)}finally{Ce(!1)}}}else u=n;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=ex.bind(null,Je,e),[o.memoizedState,e]},useRef:function(e){var n=Vn();return e={current:e},n.memoizedState=e},useState:function(e){e=Xu(e);var n=e.queue,i=Hm.bind(null,Je,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Wu,useDeferredValue:function(e,n){var i=Vn();return Ju(i,e,n)},useTransition:function(){var e=Xu(!1);return e=Lm.bind(null,Je,e.queue,!0,!1),Vn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=Je,u=Vn();if(gt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),It===null)throw Error(s(349));(ft&127)!==0||dm(o,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,Nm(hm.bind(null,o,f,e),[e]),o.flags|=2048,Xi(9,{destroy:void 0},fm.bind(null,o,f,i,n),null),i},useId:function(){var e=Vn(),n=It.identifierPrefix;if(gt){var i=$a,o=Ua;i=(o&~(1<<32-oe(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=yl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=FS++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:td,useFormState:xm,useActionState:xm,useOptimistic:function(e){var n=Vn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=nd.bind(null,Je,!0,i),i.dispatch=n,[e,n]},useMemoCache:Pu,useCacheRefresh:function(){return Vn().memoizedState=JS.bind(null,Je)},useEffectEvent:function(e){var n=Vn(),i={impl:e};return n.memoizedState=i,function(){if((xt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},ad={readContext:An,use:bl,useCallback:Mm,useContext:An,useEffect:Qu,useImperativeHandle:Dm,useInsertionEffect:jm,useLayoutEffect:Am,useMemo:Rm,useReducer:wl,useRef:Tm,useState:function(){return wl(rr)},useDebugValue:Wu,useDeferredValue:function(e,n){var i=un();return zm(i,Dt.memoizedState,e,n)},useTransition:function(){var e=wl(rr)[0],n=un().memoizedState;return[typeof e=="boolean"?e:Ws(e),n]},useSyncExternalStore:um,useId:$m,useHostTransitionStatus:td,useFormState:km,useActionState:km,useOptimistic:function(e,n){var i=un();return gm(i,Dt,e,n)},useMemoCache:Pu,useCacheRefresh:Im};ad.useEffectEvent=Om;var Ym={readContext:An,use:bl,useCallback:Mm,useContext:An,useEffect:Qu,useImperativeHandle:Dm,useInsertionEffect:jm,useLayoutEffect:Am,useMemo:Rm,useReducer:Zu,useRef:Tm,useState:function(){return Zu(rr)},useDebugValue:Wu,useDeferredValue:function(e,n){var i=un();return Dt===null?Ju(i,e,n):zm(i,Dt.memoizedState,e,n)},useTransition:function(){var e=Zu(rr)[0],n=un().memoizedState;return[typeof e=="boolean"?e:Ws(e),n]},useSyncExternalStore:um,useId:$m,useHostTransitionStatus:td,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,n){var i=un();return Dt!==null?gm(i,Dt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Pu,useCacheRefresh:Im};Ym.useEffectEvent=Om;function rd(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var id={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=oa(),u=Tr(o);u.payload=n,i!=null&&(u.callback=i),n=Nr(e,u,o),n!==null&&(Kn(n,e,o),Zs(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=oa(),u=Tr(o);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Nr(e,u,o),n!==null&&(Kn(n,e,o),Zs(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=oa(),o=Tr(i);o.tag=2,n!=null&&(o.callback=n),n=Nr(e,o,i),n!==null&&(Kn(n,e,i),Zs(n,e,i))}};function Pm(e,n,i,o,u,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!Is(i,o)||!Is(u,f):!0}function Fm(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&id.enqueueReplaceState(n,n.state,null)}function gi(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=w({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Zm(e){tl(e)}function Xm(e){console.error(e)}function Km(e){tl(e)}function El(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Qm(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function sd(e,n,i){return i=Tr(i),i.tag=3,i.payload={element:null},i.callback=function(){El(e,n)},i}function Wm(e){return e=Tr(e),e.tag=3,e}function Jm(e,n,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Qm(n,i,o)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Qm(n,i,o),typeof u!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function tx(e,n,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Hi(n,i,u,!0),i=aa.current,i!==null){switch(i.tag){case 31:case 13:return ya===null?Ll():i.alternate===null&&rn===0&&(rn=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===dl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),_d(e,o,u)),!1;case 22:return i.flags|=65536,o===dl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),_d(e,o,u)),!1}throw Error(s(435,i.tag))}return _d(e,o,u),Ll(),!1}if(gt)return n=aa.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Cu&&(e=Error(s(422),{cause:o}),qs(ha(e,i)))):(o!==Cu&&(n=Error(s(423),{cause:o}),qs(ha(n,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ha(o,i),u=sd(e.stateNode,o,u),Lu(e,u),rn!==4&&(rn=2)),!1;var f=Error(s(520),{cause:o});if(f=ha(f,i),lo===null?lo=[f]:lo.push(f),rn!==4&&(rn=2),n===null)return!0;o=ha(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=sd(i.stateNode,o,e),Lu(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Mr===null||!Mr.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Wm(u),Jm(u,e,i,o),Lu(i,u),!1}i=i.return}while(i!==null);return!1}var od=Error(s(461)),pn=!1;function _n(e,n,i,o){n.child=e===null?am(n,null,i,o):pi(n,e.child,i,o)}function eg(e,n,i,o,u){i=i.render;var f=n.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return ui(n),o=Vu(e,n,i,y,f,u),S=qu(),e!==null&&!pn?(Gu(e,n,u),ir(e,n,u)):(gt&&S&&ku(n),n.flags|=1,_n(e,n,o,u),n.child)}function tg(e,n,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!wu(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,ng(e,n,f,o,u)):(e=il(i.type,null,o,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!md(e,u)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:Is,i(y,o)&&e.ref===n.ref)return ir(e,n,u)}return n.flags|=1,e=Ja(f,o),e.ref=n.ref,e.return=n,n.child=e}function ng(e,n,i,o,u){if(e!==null){var f=e.memoizedProps;if(Is(f,o)&&e.ref===n.ref)if(pn=!1,n.pendingProps=o=f,md(e,u))(e.flags&131072)!==0&&(pn=!0);else return n.lanes=e.lanes,ir(e,n,u)}return ld(e,n,i,o,u)}function ag(e,n,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=n.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,n.child=null;return rg(e,n,f,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&cl(n,f!==null?f.cachePool:null),f!==null?sm(n,f):Uu(),om(n);else return o=n.lanes=536870912,rg(e,n,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(cl(n,f.cachePool),sm(n,f),jr(),n.memoizedState=null):(e!==null&&cl(n,null),Uu(),jr());return _n(e,n,u,i),n.child}function to(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function rg(e,n,i,o,u){var f=Du();return f=f===null?null:{parent:fn._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&cl(n,null),Uu(),om(n),e!==null&&Hi(e,n,o,!0),n.childLanes=u,null}function Cl(e,n){return n=Nl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function ig(e,n,i){return pi(n,e.child,null,i),e=Cl(n,n.pendingProps),e.flags|=2,ra(n),n.memoizedState=null,e}function nx(e,n,i){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(gt){if(o.mode==="hidden")return e=Cl(n,o),n.lanes=536870912,to(null,e);if(Iu(n),(e=Pt)?(e=yy(e,ga),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Sr!==null?{id:Ua,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},i=Vp(e),i.return=n,n.child=i,jn=n,Pt=null)):e=null,e===null)throw kr(n);return n.lanes=536870912,null}return Cl(n,o)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Iu(n),u)if(n.flags&256)n.flags&=-257,n=ig(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(pn||Hi(e,n,i,!1),u=(i&e.childLanes)!==0,pn||u){if(o=It,o!==null&&(y=en(o,i),y!==0&&y!==f.retryLane))throw f.retryLane=y,si(e,y),Kn(o,e,y),od;Ll(),n=ig(e,n,i)}else e=f.treeContext,Pt=va(y.nextSibling),jn=n,gt=!0,xr=null,ga=!1,e!==null&&Yp(n,e),n=Cl(n,o),n.flags|=4096;return n}return e=Ja(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Tl(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function ld(e,n,i,o,u){return ui(n),i=Vu(e,n,i,o,void 0,u),o=qu(),e!==null&&!pn?(Gu(e,n,u),ir(e,n,u)):(gt&&o&&ku(n),n.flags|=1,_n(e,n,i,u),n.child)}function sg(e,n,i,o,u,f){return ui(n),n.updateQueue=null,i=cm(n,o,i,u),lm(e),o=qu(),e!==null&&!pn?(Gu(e,n,f),ir(e,n,f)):(gt&&o&&ku(n),n.flags|=1,_n(e,n,i,f),n.child)}function og(e,n,i,o,u){if(ui(n),n.stateNode===null){var f=Bi,y=i.contextType;typeof y=="object"&&y!==null&&(f=An(y)),f=new i(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=id,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Ru(n),y=i.contextType,f.context=typeof y=="object"&&y!==null?An(y):Bi,f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(rd(n,i,y,o),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&id.enqueueReplaceState(f,f.state,null),Ks(n,o,f,u),Xs(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var S=n.memoizedProps,N=gi(i,S);f.props=N;var H=f.context,te=i.contextType;y=Bi,typeof te=="object"&&te!==null&&(y=An(te));var ie=i.getDerivedStateFromProps;te=typeof ie=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,te||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||H!==y)&&Fm(n,f,o,y),Cr=!1;var G=n.memoizedState;f.state=G,Ks(n,o,f,u),Xs(),H=n.memoizedState,S||G!==H||Cr?(typeof ie=="function"&&(rd(n,i,ie,o),H=n.memoizedState),(N=Cr||Pm(n,i,N,o,G,H,y))?(te||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),f.props=o,f.state=H,f.context=y,o=N):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,zu(e,n),y=n.memoizedProps,te=gi(i,y),f.props=te,ie=n.pendingProps,G=f.context,H=i.contextType,N=Bi,typeof H=="object"&&H!==null&&(N=An(H)),S=i.getDerivedStateFromProps,(H=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==ie||G!==N)&&Fm(n,f,o,N),Cr=!1,G=n.memoizedState,f.state=G,Ks(n,o,f,u),Xs();var Z=n.memoizedState;y!==ie||G!==Z||Cr||e!==null&&e.dependencies!==null&&ol(e.dependencies)?(typeof S=="function"&&(rd(n,i,S,o),Z=n.memoizedState),(te=Cr||Pm(n,i,te,o,G,Z,N)||e!==null&&e.dependencies!==null&&ol(e.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,Z,N),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,Z,N)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Z),f.props=o,f.state=Z,f.context=N,o=te):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Tl(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=pi(n,e.child,null,u),n.child=pi(n,null,i,u)):_n(e,n,i,u),n.memoizedState=f.state,e=n.child):e=ir(e,n,u),e}function lg(e,n,i,o){return li(),n.flags|=256,_n(e,n,i,o),n.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(e){return{baseLanes:e,cachePool:Qp()}}function dd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=sa),e}function cg(e,n,i){var o=n.pendingProps,u=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(cn.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(gt){if(u?Or(n):jr(),(e=Pt)?(e=yy(e,ga),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Sr!==null?{id:Ua,overflow:$a}:null,retryLane:536870912,hydrationErrors:null},i=Vp(e),i.return=n,n.child=i,jn=n,Pt=null)):e=null,e===null)throw kr(n);return Fd(e)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(jr(),u=n.mode,S=Nl({mode:"hidden",children:S},u),o=oi(o,u,i,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=ud(i),o.childLanes=dd(e,y,i),n.memoizedState=cd,to(null,o)):(Or(n),fd(n,S))}var N=e.memoizedState;if(N!==null&&(S=N.dehydrated,S!==null)){if(f)n.flags&256?(Or(n),n.flags&=-257,n=hd(e,n,i)):n.memoizedState!==null?(jr(),n.child=e.child,n.flags|=128,n=null):(jr(),S=o.fallback,u=n.mode,o=Nl({mode:"visible",children:o.children},u),S=oi(S,u,i,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,pi(n,e.child,null,i),o=n.child,o.memoizedState=ud(i),o.childLanes=dd(e,y,i),n.memoizedState=cd,n=to(null,o));else if(Or(n),Fd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var H=y.dgst;y=H,o=Error(s(419)),o.stack="",o.digest=y,qs({value:o,source:null,stack:null}),n=hd(e,n,i)}else if(pn||Hi(e,n,i,!1),y=(i&e.childLanes)!==0,pn||y){if(y=It,y!==null&&(o=en(y,i),o!==0&&o!==N.retryLane))throw N.retryLane=o,si(e,o),Kn(y,e,o),od;Pd(S)||Ll(),n=hd(e,n,i)}else Pd(S)?(n.flags|=192,n.child=e.child,n=null):(e=N.treeContext,Pt=va(S.nextSibling),jn=n,gt=!0,xr=null,ga=!1,e!==null&&Yp(n,e),n=fd(n,o.children),n.flags|=4096);return n}return u?(jr(),S=o.fallback,u=n.mode,N=e.child,H=N.sibling,o=Ja(N,{mode:"hidden",children:o.children}),o.subtreeFlags=N.subtreeFlags&65011712,H!==null?S=Ja(H,S):(S=oi(S,u,i,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,to(null,o),o=n.child,S=e.child.memoizedState,S===null?S=ud(i):(u=S.cachePool,u!==null?(N=fn._currentValue,u=u.parent!==N?{parent:N,pool:N}:u):u=Qp(),S={baseLanes:S.baseLanes|i,cachePool:u}),o.memoizedState=S,o.childLanes=dd(e,y,i),n.memoizedState=cd,to(e.child,o)):(Or(n),i=e.child,e=i.sibling,i=Ja(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function fd(e,n){return n=Nl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Nl(e,n){return e=na(22,e,null,n),e.lanes=0,e}function hd(e,n,i){return pi(n,e.child,null,i),e=fd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function ug(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Ou(e.return,n,i)}function pd(e,n,i,o,u,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=i,y.tailMode=u,y.treeForkCount=f)}function dg(e,n,i){var o=n.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var y=cn.current,S=(y&2)!==0;if(S?(y=y&1|2,n.flags|=128):y&=1,A(cn,y),_n(e,n,o,i),o=gt?Vs:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ug(e,i,n);else if(e.tag===19)ug(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&ml(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),pd(n,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&ml(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}pd(n,!0,i,null,f,o);break;case"together":pd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function ir(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Dr|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Hi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=Ja(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=Ja(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function md(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ol(e)))}function ax(e,n,i){switch(n.tag){case 3:Ie(n,n.stateNode.containerInfo),Er(n,fn,e.memoizedState.cache),li();break;case 27:case 5:Et(n);break;case 4:Ie(n,n.stateNode.containerInfo);break;case 10:Er(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Iu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Or(n),n.flags|=128,null):(i&n.child.childLanes)!==0?cg(e,n,i):(Or(n),e=ir(e,n,i),e!==null?e.sibling:null);Or(n);break;case 19:var u=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Hi(e,n,i,!1),o=(i&n.childLanes)!==0),u){if(o)return dg(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),A(cn,cn.current),o)break;return null;case 22:return n.lanes=0,ag(e,n,i,n.pendingProps);case 24:Er(n,fn,e.memoizedState.cache)}return ir(e,n,i)}function fg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)pn=!0;else{if(!md(e,i)&&(n.flags&128)===0)return pn=!1,ax(e,n,i);pn=(e.flags&131072)!==0}else pn=!1,gt&&(n.flags&1048576)!==0&&Gp(n,Vs,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=fi(n.elementType),n.type=e,typeof e=="function")wu(e)?(o=gi(e,o),n.tag=1,n=og(null,n,e,o,i)):(n.tag=0,n=ld(null,n,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===Y){n.tag=11,n=eg(null,n,e,o,i);break e}else if(u===B){n.tag=14,n=tg(null,n,e,o,i);break e}}throw n=it(e)||e,Error(s(306,n,""))}}return n;case 0:return ld(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,u=gi(o,n.pendingProps),og(e,n,o,u,i);case 3:e:{if(Ie(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;u=f.element,zu(e,n),Ks(n,o,null,i);var y=n.memoizedState;if(o=y.cache,Er(n,fn,o),o!==f.cache&&ju(n,[fn],i,!0),Xs(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=lg(e,n,o,i);break e}else if(o!==u){u=ha(Error(s(424)),n),qs(u),n=lg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Pt=va(e.firstChild),jn=n,gt=!0,xr=null,ga=!0,i=am(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(li(),o===u){n=ir(e,n,i);break e}_n(e,n,o,i)}n=n.child}return n;case 26:return Tl(e,n),e===null?(i=ky(n.type,null,n.pendingProps,null))?n.memoizedState=i:gt||(i=n.type,e=n.pendingProps,o=ql(ue.current).createElement(i),o[O]=n,o[j]=e,Dn(o,i,e),I(o),n.stateNode=o):n.memoizedState=ky(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Et(n),e===null&&gt&&(o=n.stateNode=wy(n.type,n.pendingProps,ue.current),jn=n,ga=!0,u=Pt,Br(n.type)?(Zd=u,Pt=va(o.firstChild)):Pt=u),_n(e,n,n.pendingProps.children,i),Tl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&gt&&((u=o=Pt)&&(o=Mx(o,n.type,n.pendingProps,ga),o!==null?(n.stateNode=o,jn=n,Pt=va(o.firstChild),ga=!1,u=!0):u=!1),u||kr(n)),Et(n),u=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,qd(u,f)?o=null:y!==null&&qd(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=Vu(e,n,ZS,null,null,i),yo._currentValue=u),Tl(e,n),_n(e,n,o,i),n.child;case 6:return e===null&&gt&&((e=i=Pt)&&(i=Rx(i,n.pendingProps,ga),i!==null?(n.stateNode=i,jn=n,Pt=null,e=!0):e=!1),e||kr(n)),null;case 13:return cg(e,n,i);case 4:return Ie(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=pi(n,null,o,i):_n(e,n,o,i),n.child;case 11:return eg(e,n,n.type,n.pendingProps,i);case 7:return _n(e,n,n.pendingProps,i),n.child;case 8:return _n(e,n,n.pendingProps.children,i),n.child;case 12:return _n(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,Er(n,n.type,o.value),_n(e,n,o.children,i),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,ui(n),u=An(u),o=o(u),n.flags|=1,_n(e,n,o,i),n.child;case 14:return tg(e,n,n.type,n.pendingProps,i);case 15:return ng(e,n,n.type,n.pendingProps,i);case 19:return dg(e,n,i);case 31:return nx(e,n,i);case 22:return ag(e,n,i,n.pendingProps);case 24:return ui(n),o=An(fn),e===null?(u=Du(),u===null&&(u=It,f=Au(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:o,cache:u},Ru(n),Er(n,fn,u)):((e.lanes&i)!==0&&(zu(e,n),Ks(n,null,null,i),Xs()),u=e.memoizedState,f=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Er(n,fn,o)):(o=f.cache,Er(n,fn,o),o!==u.cache&&ju(n,[fn],i,!0))),_n(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function sr(e){e.flags|=4}function gd(e,n,i,o,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if($g())e.flags|=8192;else throw hi=dl,Mu}else e.flags&=-16777217}function hg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Oy(n))if($g())e.flags|=8192;else throw hi=dl,Mu}function Ol(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?La():536870912,e.lanes|=n,Ji|=n)}function no(e,n){if(!gt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ft(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function rx(e,n,i){var o=n.pendingProps;switch(Eu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(n),null;case 1:return Ft(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),nr(fn),Ye(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ii(n)?sr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Tu())),Ft(n),null;case 26:var u=n.type,f=n.memoizedState;return e===null?(sr(n),f!==null?(Ft(n),hg(n,f)):(Ft(n),gd(n,u,null,o,i))):f?f!==e.memoizedState?(sr(n),Ft(n),hg(n,f)):(Ft(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&sr(n),Ft(n),gd(n,u,e,o,i)),null;case 27:if(zt(n),i=ue.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&sr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Ft(n),null}e=D.current,Ii(n)?Pp(n):(e=wy(u,o,i),n.stateNode=e,sr(n))}return Ft(n),null;case 5:if(zt(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&sr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Ft(n),null}if(f=D.current,Ii(n))Pp(n);else{var y=ql(ue.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}f[O]=n,f[j]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=f;e:switch(Dn(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&sr(n)}}return Ft(n),gd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&sr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=ue.current,Ii(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,u=jn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[O]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||cy(e.nodeValue,i)),e||kr(n,!0)}else e=ql(e).createTextNode(o),e[O]=n,n.stateNode=e}return Ft(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=Ii(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[O]=n}else li(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ft(n),e=!1}else i=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(ra(n),n):(ra(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Ft(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Ii(n),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[O]=n}else li(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ft(n),u=!1}else u=Tu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ra(n),n):(ra(n),null)}return ra(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Ol(n,n.updateQueue),Ft(n),null);case 4:return Ye(),e===null&&Ud(n.stateNode.containerInfo),Ft(n),null;case 10:return nr(n.type),Ft(n),null;case 19:if(C(cn),o=n.memoizedState,o===null)return Ft(n),null;if(u=(n.flags&128)!==0,f=o.rendering,f===null)if(u)no(o,!1);else{if(rn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=ml(e),f!==null){for(n.flags|=128,no(o,!1),e=f.updateQueue,n.updateQueue=e,Ol(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Hp(i,e),i=i.sibling;return A(cn,cn.current&1|2),gt&&er(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&R()>Ml&&(n.flags|=128,u=!0,no(o,!1),n.lanes=4194304)}else{if(!u)if(e=ml(f),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,Ol(n,e),no(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!gt)return Ft(n),null}else 2*R()-o.renderingStartTime>Ml&&i!==536870912&&(n.flags|=128,u=!0,no(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=R(),e.sibling=null,i=cn.current,A(cn,u?i&1|2:i&1),gt&&er(n,o.treeForkCount),e):(Ft(n),null);case 22:case 23:return ra(n),$u(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(Ft(n),n.subtreeFlags&6&&(n.flags|=8192)):Ft(n),i=n.updateQueue,i!==null&&Ol(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&C(di),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),nr(fn),Ft(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function ix(e,n){switch(Eu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return nr(fn),Ye(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return zt(n),null;case 31:if(n.memoizedState!==null){if(ra(n),n.alternate===null)throw Error(s(340));li()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ra(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));li()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return C(cn),null;case 4:return Ye(),null;case 10:return nr(n.type),null;case 22:case 23:return ra(n),$u(),e!==null&&C(di),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return nr(fn),null;case 25:return null;default:return null}}function pg(e,n){switch(Eu(n),n.tag){case 3:nr(fn),Ye();break;case 26:case 27:case 5:zt(n);break;case 4:Ye();break;case 31:n.memoizedState!==null&&ra(n);break;case 13:ra(n);break;case 19:C(cn);break;case 10:nr(n.type);break;case 22:case 23:ra(n),$u(),e!==null&&C(di);break;case 24:nr(fn)}}function ao(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,y=i.inst;o=f(),y.destroy=o}i=i.next}while(i!==u)}}catch(S){jt(n,n.return,S)}}function Ar(e,n,i){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=n;var N=i,H=S;try{H()}catch(te){jt(u,N,te)}}}o=o.next}while(o!==f)}}catch(te){jt(n,n.return,te)}}function mg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{im(n,i)}catch(o){jt(e,e.return,o)}}}function gg(e,n,i){i.props=gi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){jt(e,n,o)}}function ro(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){jt(e,n,u)}}function Ia(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){jt(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){jt(e,n,u)}else i.current=null}function yg(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){jt(e,e.return,u)}}function yd(e,n,i){try{var o=e.stateNode;Nx(o,e.type,i,n),o[j]=n}catch(u){jt(e,e.return,u)}}function vg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Br(e.type)||e.tag===4}function vd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||vg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Br(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bd(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=Qa));else if(o!==4&&(o===27&&Br(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(bd(e,n,i),e=e.sibling;e!==null;)bd(e,n,i),e=e.sibling}function jl(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&Br(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(jl(e,n,i),e=e.sibling;e!==null;)jl(e,n,i),e=e.sibling}function bg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Dn(n,o,i),n[O]=e,n[j]=i}catch(f){jt(e,e.return,f)}}var or=!1,mn=!1,wd=!1,wg=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function sx(e,n){if(e=e.containerInfo,Hd=Kl,e=Dp(e),hu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,S=-1,N=-1,H=0,te=0,ie=e,G=null;t:for(;;){for(var Z;ie!==i||u!==0&&ie.nodeType!==3||(S=y+u),ie!==f||o!==0&&ie.nodeType!==3||(N=y+o),ie.nodeType===3&&(y+=ie.nodeValue.length),(Z=ie.firstChild)!==null;)G=ie,ie=Z;for(;;){if(ie===e)break t;if(G===i&&++H===u&&(S=y),G===f&&++te===o&&(N=y),(Z=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=Z}i=S===-1||N===-1?null:{start:S,end:N}}else i=null}i=i||{start:0,end:0}}else i=null;for(Vd={focusedElem:e,selectionRange:i},Kl=!1,Tn=n;Tn!==null;)if(n=Tn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Tn=e;else for(;Tn!==null;){switch(n=Tn,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var Re=gi(i.type,u);e=o.getSnapshotBeforeUpdate(Re,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){jt(i,i.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Yd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Yd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Tn=e;break}Tn=n.return}}function Sg(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:cr(e,i),o&4&&ao(5,i);break;case 1:if(cr(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){jt(i,i.return,y)}else{var u=gi(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){jt(i,i.return,y)}}o&64&&mg(i),o&512&&ro(i,i.return);break;case 3:if(cr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{im(e,n)}catch(y){jt(i,i.return,y)}}break;case 27:n===null&&o&4&&bg(i);case 26:case 5:cr(e,i),n===null&&o&4&&yg(i),o&512&&ro(i,i.return);break;case 12:cr(e,i);break;case 31:cr(e,i),o&4&&Eg(e,i);break;case 13:cr(e,i),o&4&&Cg(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=mx.bind(null,i),zx(e,i))));break;case 22:if(o=i.memoizedState!==null||or,!o){n=n!==null&&n.memoizedState!==null||mn,u=or;var f=mn;or=o,(mn=n)&&!f?ur(e,i,(i.subtreeFlags&8772)!==0):cr(e,i),or=u,mn=f}break;case 30:break;default:cr(e,i)}}function xg(e){var n=e.alternate;n!==null&&(e.alternate=null,xg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Ut(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Wt=null,Pn=!1;function lr(e,n,i){for(i=i.child;i!==null;)kg(e,n,i),i=i.sibling}function kg(e,n,i){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(et,i)}catch{}switch(i.tag){case 26:mn||Ia(i,n),lr(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:mn||Ia(i,n);var o=Wt,u=Pn;Br(i.type)&&(Wt=i.stateNode,Pn=!1),lr(e,n,i),po(i.stateNode),Wt=o,Pn=u;break;case 5:mn||Ia(i,n);case 6:if(o=Wt,u=Pn,Wt=null,lr(e,n,i),Wt=o,Pn=u,Wt!==null)if(Pn)try{(Wt.nodeType===9?Wt.body:Wt.nodeName==="HTML"?Wt.ownerDocument.body:Wt).removeChild(i.stateNode)}catch(f){jt(i,n,f)}else try{Wt.removeChild(i.stateNode)}catch(f){jt(i,n,f)}break;case 18:Wt!==null&&(Pn?(e=Wt,my(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),os(e)):my(Wt,i.stateNode));break;case 4:o=Wt,u=Pn,Wt=i.stateNode.containerInfo,Pn=!0,lr(e,n,i),Wt=o,Pn=u;break;case 0:case 11:case 14:case 15:Ar(2,i,n),mn||Ar(4,i,n),lr(e,n,i);break;case 1:mn||(Ia(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&gg(i,n,o)),lr(e,n,i);break;case 21:lr(e,n,i);break;case 22:mn=(o=mn)||i.memoizedState!==null,lr(e,n,i),mn=o;break;default:lr(e,n,i)}}function Eg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{os(e)}catch(i){jt(n,n.return,i)}}}function Cg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{os(e)}catch(i){jt(n,n.return,i)}}function ox(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new wg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new wg),n;default:throw Error(s(435,e.tag))}}function Al(e,n){var i=ox(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var u=gx.bind(null,e,o);o.then(u,u)}})}function Fn(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Br(S.type)){Wt=S.stateNode,Pn=!1;break e}break;case 5:Wt=S.stateNode,Pn=!1;break e;case 3:case 4:Wt=S.stateNode.containerInfo,Pn=!0;break e}S=S.return}if(Wt===null)throw Error(s(160));kg(f,y,u),Wt=null,Pn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Tg(n,e),n=n.sibling}var Na=null;function Tg(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Fn(n,e),Zn(e),o&4&&(Ar(3,e,e.return),ao(3,e),Ar(5,e,e.return));break;case 1:Fn(n,e),Zn(e),o&512&&(mn||i===null||Ia(i,i.return)),o&64&&or&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Na;if(Fn(n,e),Zn(e),o&512&&(mn||i===null||Ia(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[ze]||f[O]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),Dn(f,o,i),f[O]=e,I(f),o=f;break e;case"link":var y=Ty("link","href",u).get(o+(i.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(S,1);break t}}f=u.createElement(o),Dn(f,o,i),u.head.appendChild(f);break;case"meta":if(y=Ty("meta","content",u).get(o+(i.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(S,1);break t}}f=u.createElement(o),Dn(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[O]=e,I(f),o=f}e.stateNode=o}else Ny(u,e.type,e.stateNode);else e.stateNode=Cy(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Ny(u,e.type,e.stateNode):Cy(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&yd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Fn(n,e),Zn(e),o&512&&(mn||i===null||Ia(i,i.return)),i!==null&&o&4&&yd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Fn(n,e),Zn(e),o&512&&(mn||i===null||Ia(i,i.return)),e.flags&32){u=e.stateNode;try{Ai(u,"")}catch(Re){jt(e,e.return,Re)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,yd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(wd=!0);break;case 6:if(Fn(n,e),Zn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Re){jt(e,e.return,Re)}}break;case 3:if(Pl=null,u=Na,Na=Gl(n.containerInfo),Fn(n,e),Na=u,Zn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{os(n.containerInfo)}catch(Re){jt(e,e.return,Re)}wd&&(wd=!1,Ng(e));break;case 4:o=Na,Na=Gl(e.stateNode.containerInfo),Fn(n,e),Zn(e),Na=o;break;case 12:Fn(n,e),Zn(e);break;case 31:Fn(n,e),Zn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Al(e,o)));break;case 13:Fn(n,e),Zn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Dl=R()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Al(e,o)));break;case 22:u=e.memoizedState!==null;var N=i!==null&&i.memoizedState!==null,H=or,te=mn;if(or=H||u,mn=te||N,Fn(n,e),mn=te,or=H,Zn(e),o&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||N||or||mn||yi(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){N=i=n;try{if(f=N.stateNode,u)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=N.stateNode;var ie=N.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Re){jt(N,N.return,Re)}}}else if(n.tag===6){if(i===null){N=n;try{N.stateNode.nodeValue=u?"":N.memoizedProps}catch(Re){jt(N,N.return,Re)}}}else if(n.tag===18){if(i===null){N=n;try{var Z=N.stateNode;u?gy(Z,!0):gy(N.stateNode,!1)}catch(Re){jt(N,N.return,Re)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Al(e,i))));break;case 19:Fn(n,e),Zn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Al(e,o)));break;case 30:break;case 21:break;default:Fn(n,e),Zn(e)}}function Zn(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(vg(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=vd(e);jl(e,f,u);break;case 5:var y=i.stateNode;i.flags&32&&(Ai(y,""),i.flags&=-33);var S=vd(e);jl(e,S,y);break;case 3:case 4:var N=i.stateNode.containerInfo,H=vd(e);bd(e,H,N);break;default:throw Error(s(161))}}catch(te){jt(e,e.return,te)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Ng(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Ng(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function cr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Sg(e,n.alternate,n),n=n.sibling}function yi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Ar(4,n,n.return),yi(n);break;case 1:Ia(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&gg(n,n.return,i),yi(n);break;case 27:po(n.stateNode);case 26:case 5:Ia(n,n.return),yi(n);break;case 22:n.memoizedState===null&&yi(n);break;case 30:yi(n);break;default:yi(n)}e=e.sibling}}function ur(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:ur(u,f,i),ao(4,f);break;case 1:if(ur(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(H){jt(o,o.return,H)}if(o=f,u=o.updateQueue,u!==null){var S=o.stateNode;try{var N=u.shared.hiddenCallbacks;if(N!==null)for(u.shared.hiddenCallbacks=null,u=0;u<N.length;u++)rm(N[u],S)}catch(H){jt(o,o.return,H)}}i&&y&64&&mg(f),ro(f,f.return);break;case 27:bg(f);case 26:case 5:ur(u,f,i),i&&o===null&&y&4&&yg(f),ro(f,f.return);break;case 12:ur(u,f,i);break;case 31:ur(u,f,i),i&&y&4&&Eg(u,f);break;case 13:ur(u,f,i),i&&y&4&&Cg(u,f);break;case 22:f.memoizedState===null&&ur(u,f,i),ro(f,f.return);break;case 30:break;default:ur(u,f,i)}n=n.sibling}}function Sd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Gs(i))}function xd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Gs(e))}function Oa(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Og(e,n,i,o),n=n.sibling}function Og(e,n,i,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Oa(e,n,i,o),u&2048&&ao(9,n);break;case 1:Oa(e,n,i,o);break;case 3:Oa(e,n,i,o),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Gs(e)));break;case 12:if(u&2048){Oa(e,n,i,o),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(N){jt(n,n.return,N)}}else Oa(e,n,i,o);break;case 31:Oa(e,n,i,o);break;case 13:Oa(e,n,i,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?Oa(e,n,i,o):io(e,n):f._visibility&2?Oa(e,n,i,o):(f._visibility|=2,Ki(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Sd(y,n);break;case 24:Oa(e,n,i,o),u&2048&&xd(n.alternate,n);break;default:Oa(e,n,i,o)}}function Ki(e,n,i,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,y=n,S=i,N=o,H=y.flags;switch(y.tag){case 0:case 11:case 15:Ki(f,y,S,N,u),ao(8,y);break;case 23:break;case 22:var te=y.stateNode;y.memoizedState!==null?te._visibility&2?Ki(f,y,S,N,u):io(f,y):(te._visibility|=2,Ki(f,y,S,N,u)),u&&H&2048&&Sd(y.alternate,y);break;case 24:Ki(f,y,S,N,u),u&&H&2048&&xd(y.alternate,y);break;default:Ki(f,y,S,N,u)}n=n.sibling}}function io(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,u=o.flags;switch(o.tag){case 22:io(i,o),u&2048&&Sd(o.alternate,o);break;case 24:io(i,o),u&2048&&xd(o.alternate,o);break;default:io(i,o)}n=n.sibling}}var so=8192;function Qi(e,n,i){if(e.subtreeFlags&so)for(e=e.child;e!==null;)jg(e,n,i),e=e.sibling}function jg(e,n,i){switch(e.tag){case 26:Qi(e,n,i),e.flags&so&&e.memoizedState!==null&&Fx(i,Na,e.memoizedState,e.memoizedProps);break;case 5:Qi(e,n,i);break;case 3:case 4:var o=Na;Na=Gl(e.stateNode.containerInfo),Qi(e,n,i),Na=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=so,so=16777216,Qi(e,n,i),so=o):Qi(e,n,i));break;default:Qi(e,n,i)}}function Ag(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function oo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Tn=o,Dg(o,e)}Ag(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_g(e),e=e.sibling}function _g(e){switch(e.tag){case 0:case 11:case 15:oo(e),e.flags&2048&&Ar(9,e,e.return);break;case 3:oo(e);break;case 12:oo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,_l(e)):oo(e);break;default:oo(e)}}function _l(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Tn=o,Dg(o,e)}Ag(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Ar(8,n,n.return),_l(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,_l(n));break;default:_l(n)}e=e.sibling}}function Dg(e,n){for(;Tn!==null;){var i=Tn;switch(i.tag){case 0:case 11:case 15:Ar(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Gs(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Tn=o;else e:for(i=e;Tn!==null;){o=Tn;var u=o.sibling,f=o.return;if(xg(o),o===i){Tn=null;break e}if(u!==null){u.return=f,Tn=u;break e}Tn=f}}}var lx={getCacheForType:function(e){var n=An(fn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return An(fn).controller.signal}},cx=typeof WeakMap=="function"?WeakMap:Map,xt=0,It=null,ct=null,ft=0,Ot=0,ia=null,_r=!1,Wi=!1,kd=!1,dr=0,rn=0,Dr=0,vi=0,Ed=0,sa=0,Ji=0,lo=null,Xn=null,Cd=!1,Dl=0,Mg=0,Ml=1/0,Rl=null,Mr=null,xn=0,Rr=null,es=null,fr=0,Td=0,Nd=null,Rg=null,co=0,Od=null;function oa(){return(xt&2)!==0&&ft!==0?ft&-ft:P.T!==null?Rd():wn()}function zg(){if(sa===0)if((ft&536870912)===0||gt){var e=lt;lt<<=1,(lt&3932160)===0&&(lt=262144),sa=e}else sa=536870912;return e=aa.current,e!==null&&(e.flags|=32),sa}function Kn(e,n,i){(e===It&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)&&(ts(e,0),zr(e,ft,sa,!1)),Gn(e,i),((xt&2)===0||e!==It)&&(e===It&&((xt&2)===0&&(vi|=i),rn===4&&zr(e,ft,sa,!1)),Ha(e))}function Lg(e,n,i){if((xt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Vt(e,n),u=o?fx(e,n):Ad(e,n,!0),f=o;do{if(u===0){Wi&&!o&&zr(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!ux(i)){u=Ad(e,n,!1),f=!1;continue}if(u===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=e;u=lo;var N=S.current.memoizedState.isDehydrated;if(N&&(ts(S,y).flags|=256),y=Ad(S,y,!1),y!==2){if(kd&&!N){S.errorRecoveryDisabledLanes|=f,vi|=f,u=4;break e}f=Xn,Xn=u,f!==null&&(Xn===null?Xn=f:Xn.push.apply(Xn,f))}u=y}if(f=!1,u!==2)continue}}if(u===1){ts(e,0),zr(e,n,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:zr(o,n,sa,!_r);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(u=Dl+300-R(),10<u)){if(zr(o,n,sa,!_r),En(o,0,!0)!==0)break e;fr=n,o.timeoutHandle=hy(Bg.bind(null,o,i,Xn,Rl,Cd,n,sa,vi,Ji,_r,f,"Throttled",-0,0),u);break e}Bg(o,i,Xn,Rl,Cd,n,sa,vi,Ji,_r,f,null,-0,0)}}break}while(!0);Ha(e)}function Bg(e,n,i,o,u,f,y,S,N,H,te,ie,G,Z){if(e.timeoutHandle=-1,ie=n.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qa},jg(n,f,ie);var Re=(f&62914560)===f?Dl-R():(f&4194048)===f?Mg-R():0;if(Re=Zx(ie,Re),Re!==null){fr=f,e.cancelPendingCommit=Re(Yg.bind(null,e,n,f,i,o,u,y,S,N,te,ie,null,G,Z)),zr(e,f,y,!H);return}}Yg(e,n,f,i,o,u,y,S,N)}function ux(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!ta(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function zr(e,n,i,o){n&=~Ed,n&=~vi,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var u=n;0<u;){var f=31-oe(u),y=1<<f;o[f]=-1,u&=~y}i!==0&&vr(e,i,n)}function zl(){return(xt&6)===0?(uo(0),!1):!0}function jd(){if(ct!==null){if(Ot===0)var e=ct.return;else e=ct,tr=ci=null,Yu(e),Yi=null,Ps=0,e=ct;for(;e!==null;)pg(e.alternate,e),e=e.return;ct=null}}function ts(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ax(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),fr=0,jd(),It=e,ct=i=Ja(e.current,null),ft=n,Ot=0,ia=null,_r=!1,Wi=Vt(e,n),kd=!1,Ji=sa=Ed=vi=Dr=rn=0,Xn=lo=null,Cd=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var u=31-oe(o),f=1<<u;n|=e[u],o&=~f}return dr=n,nl(),i}function Ug(e,n){Je=null,P.H=eo,n===Gi||n===ul?(n=em(),Ot=3):n===Mu?(n=em(),Ot=4):Ot=n===od?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ia=n,ct===null&&(rn=1,El(e,ha(n,e.current)))}function $g(){var e=aa.current;return e===null?!0:(ft&4194048)===ft?ya===null:(ft&62914560)===ft||(ft&536870912)!==0?e===ya:!1}function Ig(){var e=P.H;return P.H=eo,e===null?eo:e}function Hg(){var e=P.A;return P.A=lx,e}function Ll(){rn=4,_r||(ft&4194048)!==ft&&aa.current!==null||(Wi=!0),(Dr&134217727)===0&&(vi&134217727)===0||It===null||zr(It,ft,sa,!1)}function Ad(e,n,i){var o=xt;xt|=2;var u=Ig(),f=Hg();(It!==e||ft!==n)&&(Rl=null,ts(e,n)),n=!1;var y=rn;e:do try{if(Ot!==0&&ct!==null){var S=ct,N=ia;switch(Ot){case 8:jd(),y=6;break e;case 3:case 2:case 9:case 6:aa.current===null&&(n=!0);var H=Ot;if(Ot=0,ia=null,ns(e,S,N,H),i&&Wi){y=0;break e}break;default:H=Ot,Ot=0,ia=null,ns(e,S,N,H)}}dx(),y=rn;break}catch(te){Ug(e,te)}while(!0);return n&&e.shellSuspendCounter++,tr=ci=null,xt=o,P.H=u,P.A=f,ct===null&&(It=null,ft=0,nl()),y}function dx(){for(;ct!==null;)Vg(ct)}function fx(e,n){var i=xt;xt|=2;var o=Ig(),u=Hg();It!==e||ft!==n?(Rl=null,Ml=R()+500,ts(e,n)):Wi=Vt(e,n);e:do try{if(Ot!==0&&ct!==null){n=ct;var f=ia;t:switch(Ot){case 1:Ot=0,ia=null,ns(e,n,f,1);break;case 2:case 9:if(Wp(f)){Ot=0,ia=null,qg(n);break}n=function(){Ot!==2&&Ot!==9||It!==e||(Ot=7),Ha(e)},f.then(n,n);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:Wp(f)?(Ot=0,ia=null,qg(n)):(Ot=0,ia=null,ns(e,n,f,7));break;case 5:var y=null;switch(ct.tag){case 26:y=ct.memoizedState;case 5:case 27:var S=ct;if(y?Oy(y):S.stateNode.complete){Ot=0,ia=null;var N=S.sibling;if(N!==null)ct=N;else{var H=S.return;H!==null?(ct=H,Bl(H)):ct=null}break t}}Ot=0,ia=null,ns(e,n,f,5);break;case 6:Ot=0,ia=null,ns(e,n,f,6);break;case 8:jd(),rn=6;break e;default:throw Error(s(462))}}hx();break}catch(te){Ug(e,te)}while(!0);return tr=ci=null,P.H=o,P.A=u,xt=i,ct!==null?0:(It=null,ft=0,nl(),rn)}function hx(){for(;ct!==null&&!je();)Vg(ct)}function Vg(e){var n=fg(e.alternate,e,dr);e.memoizedProps=e.pendingProps,n===null?Bl(e):ct=n}function qg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=sg(i,n,n.pendingProps,n.type,void 0,ft);break;case 11:n=sg(i,n,n.pendingProps,n.type.render,n.ref,ft);break;case 5:Yu(n);default:pg(i,n),n=ct=Hp(n,dr),n=fg(i,n,dr)}e.memoizedProps=e.pendingProps,n===null?Bl(e):ct=n}function ns(e,n,i,o){tr=ci=null,Yu(n),Yi=null,Ps=0;var u=n.return;try{if(tx(e,u,n,i,ft)){rn=1,El(e,ha(i,e.current)),ct=null;return}}catch(f){if(u!==null)throw ct=u,f;rn=1,El(e,ha(i,e.current)),ct=null;return}n.flags&32768?(gt||o===1?e=!0:Wi||(ft&536870912)!==0?e=!1:(_r=e=!0,(o===2||o===9||o===3||o===6)&&(o=aa.current,o!==null&&o.tag===13&&(o.flags|=16384))),Gg(n,e)):Bl(n)}function Bl(e){var n=e;do{if((n.flags&32768)!==0){Gg(n,_r);return}e=n.return;var i=rx(n.alternate,n,dr);if(i!==null){ct=i;return}if(n=n.sibling,n!==null){ct=n;return}ct=n=e}while(n!==null);rn===0&&(rn=5)}function Gg(e,n){do{var i=ix(e.alternate,e);if(i!==null){i.flags&=32767,ct=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ct=e;return}ct=e=i}while(e!==null);rn=6,ct=null}function Yg(e,n,i,o,u,f,y,S,N){e.cancelPendingCommit=null;do Ul();while(xn!==0);if((xt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=vu,Oi(e,i,f,y,S,N),e===It&&(ct=It=null,ft=0),es=n,Rr=e,fr=i,Td=f,Nd=u,Rg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yx(le,function(){return Kg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=P.T,P.T=null,u=de.p,de.p=2,y=xt,xt|=4;try{sx(e,n,i)}finally{xt=y,de.p=u,P.T=o}}xn=1,Pg(),Fg(),Zg()}}function Pg(){if(xn===1){xn=0;var e=Rr,n=es,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=P.T,P.T=null;var o=de.p;de.p=2;var u=xt;xt|=4;try{Tg(n,e);var f=Vd,y=Dp(e.containerInfo),S=f.focusedElem,N=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&_p(S.ownerDocument.documentElement,S)){if(N!==null&&hu(S)){var H=N.start,te=N.end;if(te===void 0&&(te=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(te,S.value.length);else{var ie=S.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var Z=G.getSelection(),Re=S.textContent.length,Ge=Math.min(N.start,Re),Rt=N.end===void 0?Ge:Math.min(N.end,Re);!Z.extend&&Ge>Rt&&(y=Rt,Rt=Ge,Ge=y);var z=Ap(S,Ge),M=Ap(S,Rt);if(z&&M&&(Z.rangeCount!==1||Z.anchorNode!==z.node||Z.anchorOffset!==z.offset||Z.focusNode!==M.node||Z.focusOffset!==M.offset)){var $=ie.createRange();$.setStart(z.node,z.offset),Z.removeAllRanges(),Ge>Rt?(Z.addRange($),Z.extend(M.node,M.offset)):($.setEnd(M.node,M.offset),Z.addRange($))}}}}for(ie=[],Z=S;Z=Z.parentNode;)Z.nodeType===1&&ie.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ie.length;S++){var ae=ie[S];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Kl=!!Hd,Vd=Hd=null}finally{xt=u,de.p=o,P.T=i}}e.current=n,xn=2}}function Fg(){if(xn===2){xn=0;var e=Rr,n=es,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=P.T,P.T=null;var o=de.p;de.p=2;var u=xt;xt|=4;try{Sg(e,n.alternate,n)}finally{xt=u,de.p=o,P.T=i}}xn=3}}function Zg(){if(xn===4||xn===3){xn=0,Ee();var e=Rr,n=es,i=fr,o=Rg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?xn=5:(xn=0,es=Rr=null,Xg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Mr=null),Jn(i),n=n.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(et,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=P.T,u=de.p,de.p=2,P.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];f(S.value,{componentStack:S.stack})}}finally{P.T=n,de.p=u}}(fr&3)!==0&&Ul(),Ha(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===Od?co++:(co=0,Od=e):co=0,uo(0)}}function Xg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Gs(n)))}function Ul(){return Pg(),Fg(),Zg(),Kg()}function Kg(){if(xn!==5)return!1;var e=Rr,n=Td;Td=0;var i=Jn(fr),o=P.T,u=de.p;try{de.p=32>i?32:i,P.T=null,i=Nd,Nd=null;var f=Rr,y=fr;if(xn=0,es=Rr=null,fr=0,(xt&6)!==0)throw Error(s(331));var S=xt;if(xt|=4,_g(f.current),Og(f,f.current,y,i),xt=S,uo(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(et,f)}catch{}return!0}finally{de.p=u,P.T=o,Xg(e,n)}}function Qg(e,n,i){n=ha(i,n),n=sd(e.stateNode,n,2),e=Nr(e,n,2),e!==null&&(Gn(e,2),Ha(e))}function jt(e,n,i){if(e.tag===3)Qg(e,e,i);else for(;n!==null;){if(n.tag===3){Qg(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Mr===null||!Mr.has(o))){e=ha(i,e),i=Wm(2),o=Nr(n,i,2),o!==null&&(Jm(i,o,n,e),Gn(o,2),Ha(o));break}}n=n.return}}function _d(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new cx;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(i)||(kd=!0,u.add(i),e=px.bind(null,e,n,i),n.then(e,e))}function px(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,It===e&&(ft&i)===i&&(rn===4||rn===3&&(ft&62914560)===ft&&300>R()-Dl?(xt&2)===0&&ts(e,0):Ed|=i,Ji===ft&&(Ji=0)),Ha(e)}function Wg(e,n){n===0&&(n=La()),e=si(e,n),e!==null&&(Gn(e,n),Ha(e))}function mx(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Wg(e,i)}function gx(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Wg(e,i)}function yx(e,n){return ne(e,n)}var $l=null,as=null,Dd=!1,Il=!1,Md=!1,Lr=0;function Ha(e){e!==as&&e.next===null&&(as===null?$l=as=e:as=as.next=e),Il=!0,Dd||(Dd=!0,bx())}function uo(e,n){if(!Md&&Il){Md=!0;do for(var i=!1,o=$l;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var y=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-oe(42|e)+1)-1,f&=u&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,ny(o,f))}else f=ft,f=En(o,o===It?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Vt(o,f)||(i=!0,ny(o,f));o=o.next}while(i);Md=!1}}function vx(){Jg()}function Jg(){Il=Dd=!1;var e=0;Lr!==0&&jx()&&(e=Lr);for(var n=R(),i=null,o=$l;o!==null;){var u=o.next,f=ey(o,n);f===0?(o.next=null,i===null?$l=u:i.next=u,u===null&&(as=i)):(i=o,(e!==0||(f&3)!==0)&&(Il=!0)),o=u}xn!==0&&xn!==5||uo(e),Lr!==0&&(Lr=0)}function ey(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-oe(f),S=1<<y,N=u[y];N===-1?((S&i)===0||(S&o)!==0)&&(u[y]=Cn(S,n)):N<=n&&(e.expiredLanes|=S),f&=~S}if(n=It,i=ft,i=En(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Ot===2||Ot===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&J(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Vt(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&J(o),Jn(i)){case 2:case 8:i=ce;break;case 32:i=le;break;case 268435456:i=Se;break;default:i=le}return o=ty.bind(null,e),i=ne(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&J(o),e.callbackPriority=2,e.callbackNode=null,2}function ty(e,n){if(xn!==0&&xn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ul()&&e.callbackNode!==i)return null;var o=ft;return o=En(e,e===It?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Lg(e,o,n),ey(e,R()),e.callbackNode!=null&&e.callbackNode===i?ty.bind(null,e):null)}function ny(e,n){if(Ul())return null;Lg(e,n,!0)}function bx(){_x(function(){(xt&6)!==0?ne(U,vx):Jg()})}function Rd(){if(Lr===0){var e=Vi;e===0&&(e=Kt,Kt<<=1,(Kt&261888)===0&&(Kt=256)),Lr=e}return Lr}function ay(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zo(""+e)}function ry(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function wx(e,n,i,o,u){if(n==="submit"&&i&&i.stateNode===u){var f=ay((u[j]||null).action),y=o.submitter;y&&(n=(n=y[j]||null)?ay(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var S=new Wo("action","action",null,o,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Lr!==0){var N=y?ry(u,y):new FormData(u);ed(i,{pending:!0,data:N,method:u.method,action:f},null,N)}}else typeof f=="function"&&(S.preventDefault(),N=y?ry(u,y):new FormData(u),ed(i,{pending:!0,data:N,method:u.method,action:f},f,N))},currentTarget:u}]})}}for(var zd=0;zd<yu.length;zd++){var Ld=yu[zd],Sx=Ld.toLowerCase(),xx=Ld[0].toUpperCase()+Ld.slice(1);Ta(Sx,"on"+xx)}Ta(zp,"onAnimationEnd"),Ta(Lp,"onAnimationIteration"),Ta(Bp,"onAnimationStart"),Ta("dblclick","onDoubleClick"),Ta("focusin","onFocus"),Ta("focusout","onBlur"),Ta(US,"onTransitionRun"),Ta($S,"onTransitionStart"),Ta(IS,"onTransitionCancel"),Ta(Up,"onTransitionEnd"),Ne("onMouseEnter",["mouseout","mouseover"]),Ne("onMouseLeave",["mouseout","mouseover"]),Ne("onPointerEnter",["pointerout","pointerover"]),Ne("onPointerLeave",["pointerout","pointerover"]),xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fo));function iy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var S=o[y],N=S.instance,H=S.currentTarget;if(S=S.listener,N!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=H;try{f(u)}catch(te){tl(te)}u.currentTarget=null,f=N}else for(y=0;y<o.length;y++){if(S=o[y],N=S.instance,H=S.currentTarget,S=S.listener,N!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=H;try{f(u)}catch(te){tl(te)}u.currentTarget=null,f=N}}}}function ut(e,n){var i=n[re];i===void 0&&(i=n[re]=new Set);var o=e+"__bubble";i.has(o)||(sy(n,e,2,!1),i.add(o))}function Bd(e,n,i){var o=0;n&&(o|=4),sy(i,e,o,n)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Ud(e){if(!e[Hl]){e[Hl]=!0,fe.forEach(function(i){i!=="selectionchange"&&(kx.has(i)||Bd(i,!1,e),Bd(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Hl]||(n[Hl]=!0,Bd("selectionchange",!1,n))}}function sy(e,n,i,o){switch(zy(n)){case 2:var u=Qx;break;case 8:u=Wx;break;default:u=Jd}i=u.bind(null,n,i,e),u=void 0,!ru||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function $d(e,n,i,o,u){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var N=y.tag;if((N===3||N===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=dt(S),y===null)return;if(N=y.tag,N===5||N===6||N===26||N===27){o=f=y;continue e}S=S.parentNode}}o=o.return}dp(function(){var H=f,te=nu(i),ie=[];e:{var G=$p.get(e);if(G!==void 0){var Z=Wo,Re=e;switch(e){case"keypress":if(Ko(i)===0)break e;case"keydown":case"keyup":Z=gS;break;case"focusin":Re="focus",Z=lu;break;case"focusout":Re="blur",Z=lu;break;case"beforeblur":case"afterblur":Z=lu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=rS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=bS;break;case zp:case Lp:case Bp:Z=oS;break;case Up:Z=SS;break;case"scroll":case"scrollend":Z=nS;break;case"wheel":Z=kS;break;case"copy":case"cut":case"paste":Z=cS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=gp;break;case"toggle":case"beforetoggle":Z=CS}var Ge=(n&4)!==0,Rt=!Ge&&(e==="scroll"||e==="scrollend"),z=Ge?G!==null?G+"Capture":null:G;Ge=[];for(var M=H,$;M!==null;){var ae=M;if($=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||$===null||z===null||(ae=Ms(M,z),ae!=null&&Ge.push(ho(M,ae,$))),Rt)break;M=M.return}0<Ge.length&&(G=new Z(G,Re,null,i,te),ie.push({event:G,listeners:Ge}))}}if((n&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",Z=e==="mouseout"||e==="pointerout",G&&i!==tu&&(Re=i.relatedTarget||i.fromElement)&&(dt(Re)||Re[K]))break e;if((Z||G)&&(G=te.window===te?te:(G=te.ownerDocument)?G.defaultView||G.parentWindow:window,Z?(Re=i.relatedTarget||i.toElement,Z=H,Re=Re?dt(Re):null,Re!==null&&(Rt=c(Re),Ge=Re.tag,Re!==Rt||Ge!==5&&Ge!==27&&Ge!==6)&&(Re=null)):(Z=null,Re=H),Z!==Re)){if(Ge=pp,ae="onMouseLeave",z="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=gp,ae="onPointerLeave",z="onPointerEnter",M="pointer"),Rt=Z==null?G:Xa(Z),$=Re==null?G:Xa(Re),G=new Ge(ae,M+"leave",Z,i,te),G.target=Rt,G.relatedTarget=$,ae=null,dt(te)===H&&(Ge=new Ge(z,M+"enter",Re,i,te),Ge.target=$,Ge.relatedTarget=Rt,ae=Ge),Rt=ae,Z&&Re)t:{for(Ge=Ex,z=Z,M=Re,$=0,ae=z;ae;ae=Ge(ae))$++;ae=0;for(var qe=M;qe;qe=Ge(qe))ae++;for(;0<$-ae;)z=Ge(z),$--;for(;0<ae-$;)M=Ge(M),ae--;for(;$--;){if(z===M||M!==null&&z===M.alternate){Ge=z;break t}z=Ge(z),M=Ge(M)}Ge=null}else Ge=null;Z!==null&&oy(ie,G,Z,Ge,!1),Re!==null&&Rt!==null&&oy(ie,Rt,Re,Ge,!0)}}e:{if(G=H?Xa(H):window,Z=G.nodeName&&G.nodeName.toLowerCase(),Z==="select"||Z==="input"&&G.type==="file")var wt=Ep;else if(xp(G))if(Cp)wt=zS;else{wt=MS;var Be=DS}else Z=G.nodeName,!Z||Z.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&eu(H.elementType)&&(wt=Ep):wt=RS;if(wt&&(wt=wt(e,H))){kp(ie,wt,i,te);break e}Be&&Be(e,G,H),e==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&Jc(G,"number",G.value)}switch(Be=H?Xa(H):window,e){case"focusin":(xp(Be)||Be.contentEditable==="true")&&(Ri=Be,pu=H,Hs=null);break;case"focusout":Hs=pu=Ri=null;break;case"mousedown":mu=!0;break;case"contextmenu":case"mouseup":case"dragend":mu=!1,Mp(ie,i,te);break;case"selectionchange":if(BS)break;case"keydown":case"keyup":Mp(ie,i,te)}var tt;if(uu)e:{switch(e){case"compositionstart":var ht="onCompositionStart";break e;case"compositionend":ht="onCompositionEnd";break e;case"compositionupdate":ht="onCompositionUpdate";break e}ht=void 0}else Mi?wp(e,i)&&(ht="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ht="onCompositionStart");ht&&(yp&&i.locale!=="ko"&&(Mi||ht!=="onCompositionStart"?ht==="onCompositionEnd"&&Mi&&(tt=fp()):(wr=te,iu="value"in wr?wr.value:wr.textContent,Mi=!0)),Be=Vl(H,ht),0<Be.length&&(ht=new mp(ht,e,null,i,te),ie.push({event:ht,listeners:Be}),tt?ht.data=tt:(tt=Sp(i),tt!==null&&(ht.data=tt)))),(tt=NS?OS(e,i):jS(e,i))&&(ht=Vl(H,"onBeforeInput"),0<ht.length&&(Be=new mp("onBeforeInput","beforeinput",null,i,te),ie.push({event:Be,listeners:ht}),Be.data=tt)),wx(ie,e,H,i,te)}iy(ie,n)})}function ho(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Vl(e,n){for(var i=n+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Ms(e,i),u!=null&&o.unshift(ho(e,u,f)),u=Ms(e,n),u!=null&&o.push(ho(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Ex(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function oy(e,n,i,o,u){for(var f=n._reactName,y=[];i!==null&&i!==o;){var S=i,N=S.alternate,H=S.stateNode;if(S=S.tag,N!==null&&N===o)break;S!==5&&S!==26&&S!==27||H===null||(N=H,u?(H=Ms(i,f),H!=null&&y.unshift(ho(i,H,N))):u||(H=Ms(i,f),H!=null&&y.push(ho(i,H,N)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var Cx=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function ly(e){return(typeof e=="string"?e:""+e).replace(Cx,`
`).replace(Tx,"")}function cy(e,n){return n=ly(n),ly(e)===n}function Mt(e,n,i,o,u,f){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ai(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ai(e,""+o);break;case"className":Sn(e,"class",o);break;case"tabIndex":Sn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Sn(e,i,o);break;case"style":cp(e,o,f);break;case"data":if(n!=="object"){Sn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Zo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Mt(e,n,"name",u.name,u,null),Mt(e,n,"formEncType",u.formEncType,u,null),Mt(e,n,"formMethod",u.formMethod,u,null),Mt(e,n,"formTarget",u.formTarget,u,null)):(Mt(e,n,"encType",u.encType,u,null),Mt(e,n,"method",u.method,u,null),Mt(e,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Zo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=Qa);break;case"onScroll":o!=null&&ut("scroll",e);break;case"onScrollEnd":o!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Zo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Yt(e,"popover",o);break;case"xlinkActuate":bt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":bt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":bt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":bt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":bt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":bt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":bt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":bt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":bt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Yt(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=eS.get(i)||i,Yt(e,i,o))}}function Id(e,n,i,o,u,f){switch(i){case"style":cp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Ai(e,o):(typeof o=="number"||typeof o=="bigint")&&Ai(e,""+o);break;case"onScroll":o!=null&&ut("scroll",e);break;case"onScrollEnd":o!=null&&ut("scrollend",e);break;case"onClick":o!=null&&(e.onclick=Qa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ve.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=e[j]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Yt(e,i,o)}}}function Dn(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var y=i[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Mt(e,n,f,y,i,null)}}u&&Mt(e,n,"srcSet",i.srcSet,i,null),o&&Mt(e,n,"src",i.src,i,null);return;case"input":ut("invalid",e);var S=f=y=u=null,N=null,H=null;for(o in i)if(i.hasOwnProperty(o)){var te=i[o];if(te!=null)switch(o){case"name":u=te;break;case"type":y=te;break;case"checked":N=te;break;case"defaultChecked":H=te;break;case"value":f=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(s(137,n));break;default:Mt(e,n,o,te,i,null)}}ip(e,f,S,N,H,y,u,!1);return;case"select":ut("invalid",e),o=y=f=null;for(u in i)if(i.hasOwnProperty(u)&&(S=i[u],S!=null))switch(u){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:Mt(e,n,u,S,i,null)}n=f,i=y,e.multiple=!!o,n!=null?ji(e,!!o,n,!1):i!=null&&ji(e,!!o,i,!0);return;case"textarea":ut("invalid",e),f=u=o=null;for(y in i)if(i.hasOwnProperty(y)&&(S=i[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Mt(e,n,y,S,i,null)}op(e,o,u,f);return;case"option":for(N in i)if(i.hasOwnProperty(N)&&(o=i[N],o!=null))switch(N){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Mt(e,n,N,o,i,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(o=0;o<fo.length;o++)ut(fo[o],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(o=i[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Mt(e,n,H,o,i,null)}return;default:if(eu(n)){for(te in i)i.hasOwnProperty(te)&&(o=i[te],o!==void 0&&Id(e,n,te,o,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(o=i[S],o!=null&&Mt(e,n,S,o,i,null))}function Nx(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,y=null,S=null,N=null,H=null,te=null;for(Z in i){var ie=i[Z];if(i.hasOwnProperty(Z)&&ie!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":N=ie;default:o.hasOwnProperty(Z)||Mt(e,n,Z,null,o,ie)}}for(var G in o){var Z=o[G];if(ie=i[G],o.hasOwnProperty(G)&&(Z!=null||ie!=null))switch(G){case"type":f=Z;break;case"name":u=Z;break;case"checked":H=Z;break;case"defaultChecked":te=Z;break;case"value":y=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,n));break;default:Z!==ie&&Mt(e,n,G,Z,o,ie)}}Wc(e,y,S,N,H,te,f,u);return;case"select":Z=y=S=G=null;for(f in i)if(N=i[f],i.hasOwnProperty(f)&&N!=null)switch(f){case"value":break;case"multiple":Z=N;default:o.hasOwnProperty(f)||Mt(e,n,f,null,o,N)}for(u in o)if(f=o[u],N=i[u],o.hasOwnProperty(u)&&(f!=null||N!=null))switch(u){case"value":G=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==N&&Mt(e,n,u,f,o,N)}n=S,i=y,o=Z,G!=null?ji(e,!!i,G,!1):!!o!=!!i&&(n!=null?ji(e,!!i,n,!0):ji(e,!!i,i?[]:"",!1));return;case"textarea":Z=G=null;for(S in i)if(u=i[S],i.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Mt(e,n,S,null,o,u)}for(y in o)if(u=o[y],f=i[y],o.hasOwnProperty(y)&&(u!=null||f!=null))switch(y){case"value":G=u;break;case"defaultValue":Z=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Mt(e,n,y,u,o,f)}sp(e,G,Z);return;case"option":for(var Re in i)if(G=i[Re],i.hasOwnProperty(Re)&&G!=null&&!o.hasOwnProperty(Re))switch(Re){case"selected":e.selected=!1;break;default:Mt(e,n,Re,null,o,G)}for(N in o)if(G=o[N],Z=i[N],o.hasOwnProperty(N)&&G!==Z&&(G!=null||Z!=null))switch(N){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Mt(e,n,N,G,o,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in i)G=i[Ge],i.hasOwnProperty(Ge)&&G!=null&&!o.hasOwnProperty(Ge)&&Mt(e,n,Ge,null,o,G);for(H in o)if(G=o[H],Z=i[H],o.hasOwnProperty(H)&&G!==Z&&(G!=null||Z!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Mt(e,n,H,G,o,Z)}return;default:if(eu(n)){for(var Rt in i)G=i[Rt],i.hasOwnProperty(Rt)&&G!==void 0&&!o.hasOwnProperty(Rt)&&Id(e,n,Rt,void 0,o,G);for(te in o)G=o[te],Z=i[te],!o.hasOwnProperty(te)||G===Z||G===void 0&&Z===void 0||Id(e,n,te,G,o,Z);return}}for(var z in i)G=i[z],i.hasOwnProperty(z)&&G!=null&&!o.hasOwnProperty(z)&&Mt(e,n,z,null,o,G);for(ie in o)G=o[ie],Z=i[ie],!o.hasOwnProperty(ie)||G===Z||G==null&&Z==null||Mt(e,n,ie,G,o,Z)}function uy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ox(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,y=u.initiatorType,S=u.duration;if(f&&S&&uy(y)){for(y=0,S=u.responseEnd,o+=1;o<i.length;o++){var N=i[o],H=N.startTime;if(H>S)break;var te=N.transferSize,ie=N.initiatorType;te&&uy(ie)&&(N=N.responseEnd,y+=te*(N<S?1:(S-H)/(N-H)))}if(--o,n+=8*(f+y)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hd=null,Vd=null;function ql(e){return e.nodeType===9?e:e.ownerDocument}function dy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function qd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Gd=null;function jx(){var e=window.event;return e&&e.type==="popstate"?e===Gd?!1:(Gd=e,!0):(Gd=null,!1)}var hy=typeof setTimeout=="function"?setTimeout:void 0,Ax=typeof clearTimeout=="function"?clearTimeout:void 0,py=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof py<"u"?function(e){return py.resolve(null).then(e).catch(Dx)}:hy;function Dx(e){setTimeout(function(){throw e})}function Br(e){return e==="head"}function my(e,n){var i=n,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),os(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")po(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,po(i);for(var f=i.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[ze]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=y}}else i==="body"&&po(e.ownerDocument.body);i=u}while(i);os(n)}function gy(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Yd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Yd(i),Ut(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Mx(e,n,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ze])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=va(e.nextSibling),e===null)break}return null}function Rx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=va(e.nextSibling),e===null))return null;return e}function yy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=va(e.nextSibling),e===null))return null;return e}function Pd(e){return e.data==="$?"||e.data==="$~"}function Fd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function zx(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function va(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Zd=null;function vy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return va(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function by(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function wy(e,n,i){switch(n=ql(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function po(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Ut(e)}var ba=new Map,Sy=new Set;function Gl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hr=de.d;de.d={f:Lx,r:Bx,D:Ux,C:$x,L:Ix,m:Hx,X:qx,S:Vx,M:Gx};function Lx(){var e=hr.f(),n=zl();return e||n}function Bx(e){var n=st(e);n!==null&&n.tag===5&&n.type==="form"?Um(n):hr.r(e)}var rs=typeof document>"u"?null:document;function xy(e,n,i){var o=rs;if(o&&typeof n=="string"&&n){var u=da(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),Sy.has(u)||(Sy.add(u),e={rel:e,crossOrigin:i,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Dn(n,"link",e),I(n),o.head.appendChild(n)))}}function Ux(e){hr.D(e),xy("dns-prefetch",e,null)}function $x(e,n){hr.C(e,n),xy("preconnect",e,n)}function Ix(e,n,i){hr.L(e,n,i);var o=rs;if(o&&e&&n){var u='link[rel="preload"][as="'+da(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+da(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+da(i.imageSizes)+'"]')):u+='[href="'+da(e)+'"]';var f=u;switch(n){case"style":f=is(e);break;case"script":f=ss(e)}ba.has(f)||(e=w({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ba.set(f,e),o.querySelector(u)!==null||n==="style"&&o.querySelector(mo(f))||n==="script"&&o.querySelector(go(f))||(n=o.createElement("link"),Dn(n,"link",e),I(n),o.head.appendChild(n)))}}function Hx(e,n){hr.m(e,n);var i=rs;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+da(o)+'"][href="'+da(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ss(e)}if(!ba.has(f)&&(e=w({rel:"modulepreload",href:e},n),ba.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(go(f)))return}o=i.createElement("link"),Dn(o,"link",e),I(o),i.head.appendChild(o)}}}function Vx(e,n,i){hr.S(e,n,i);var o=rs;if(o&&e){var u=ua(o).hoistableStyles,f=is(e);n=n||"default";var y=u.get(f);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(mo(f)))S.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ba.get(f))&&Xd(e,i);var N=y=o.createElement("link");I(N),Dn(N,"link",e),N._p=new Promise(function(H,te){N.onload=H,N.onerror=te}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yl(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(f,y)}}}function qx(e,n){hr.X(e,n);var i=rs;if(i&&e){var o=ua(i).hoistableScripts,u=ss(e),f=o.get(u);f||(f=i.querySelector(go(u)),f||(e=w({src:e,async:!0},n),(n=ba.get(u))&&Kd(e,n),f=i.createElement("script"),I(f),Dn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Gx(e,n){hr.M(e,n);var i=rs;if(i&&e){var o=ua(i).hoistableScripts,u=ss(e),f=o.get(u);f||(f=i.querySelector(go(u)),f||(e=w({src:e,async:!0,type:"module"},n),(n=ba.get(u))&&Kd(e,n),f=i.createElement("script"),I(f),Dn(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function ky(e,n,i,o){var u=(u=ue.current)?Gl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=is(i.href),i=ua(u).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=is(i.href);var f=ua(u).hoistableStyles,y=f.get(e);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=u.querySelector(mo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),ba.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ba.set(e,i),f||Yx(u,e,i,y.state))),n&&o===null)throw Error(s(528,""));return y}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ss(i),i=ua(u).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function is(e){return'href="'+da(e)+'"'}function mo(e){return'link[rel="stylesheet"]['+e+"]"}function Ey(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Yx(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Dn(n,"link",i),I(n),e.head.appendChild(n))}function ss(e){return'[src="'+da(e)+'"]'}function go(e){return"script[async]"+e}function Cy(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+da(i.href)+'"]');if(o)return n.instance=o,I(o),o;var u=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),I(o),Dn(o,"style",u),Yl(o,i.precedence,e),n.instance=o;case"stylesheet":u=is(i.href);var f=e.querySelector(mo(u));if(f)return n.state.loading|=4,n.instance=f,I(f),f;o=Ey(i),(u=ba.get(u))&&Xd(o,u),f=(e.ownerDocument||e).createElement("link"),I(f);var y=f;return y._p=new Promise(function(S,N){y.onload=S,y.onerror=N}),Dn(f,"link",o),n.state.loading|=4,Yl(f,i.precedence,e),n.instance=f;case"script":return f=ss(i.src),(u=e.querySelector(go(f)))?(n.instance=u,I(u),u):(o=i,(u=ba.get(f))&&(o=w({},i),Kd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),I(u),Dn(u,"link",o),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Yl(o,i.precedence,e));return n.instance}function Yl(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===n)f=S;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Xd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Kd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Pl=null;function Ty(e,n,i){if(Pl===null){var o=new Map,u=Pl=new Map;u.set(i,o)}else u=Pl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[ze]||f[O]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var S=o.get(y);S?S.push(f):o.set(y,[f])}}return o}function Ny(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Px(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Oy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fx(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=is(o.href),f=n.querySelector(mo(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Fl.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,I(f);return}f=n.ownerDocument||n,o=Ey(o),(u=ba.get(u))&&Xd(o,u),f=f.createElement("link"),I(f);var y=f;y._p=new Promise(function(S,N){y.onload=S,y.onerror=N}),Dn(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Fl.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Qd=0;function Zx(e,n){return e.stylesheets&&e.count===0&&Xl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Xl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Qd===0&&(Qd=62500*Ox());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Fl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Zl=null;function Xl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Zl=new Map,n.forEach(Xx,e),Zl=null,Fl.call(e))}function Xx(e,n){if(!(n.state.loading&4)){var i=Zl.get(e);if(i)var o=i.get(null);else{i=new Map,Zl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var y=u[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),o=y)}o&&i.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),f=i.get(y)||o,f===o&&i.set(null,u),i.set(y,u),this.count++,o=Fl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var yo={$$typeof:L,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function Kx(e,n,i,o,u,f,y,S,N){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ba(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ba(0),this.hiddenUpdates=Ba(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function jy(e,n,i,o,u,f,y,S,N,H,te,ie){return e=new Kx(e,n,i,y,N,H,te,ie,S),n=1,f===!0&&(n|=24),f=na(3,null,null,n),e.current=f,f.stateNode=e,n=Au(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:n},Ru(f),e}function Ay(e){return e?(e=Bi,e):Bi}function _y(e,n,i,o,u,f){u=Ay(u),o.context===null?o.context=u:o.pendingContext=u,o=Tr(n),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Nr(e,o,n),i!==null&&(Kn(i,e,n),Zs(i,e,n))}function Dy(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Wd(e,n){Dy(e,n),(e=e.alternate)&&Dy(e,n)}function My(e){if(e.tag===13||e.tag===31){var n=si(e,67108864);n!==null&&Kn(n,e,67108864),Wd(e,67108864)}}function Ry(e){if(e.tag===13||e.tag===31){var n=oa();n=sn(n);var i=si(e,n);i!==null&&Kn(i,e,n),Wd(e,n)}}var Kl=!0;function Qx(e,n,i,o){var u=P.T;P.T=null;var f=de.p;try{de.p=2,Jd(e,n,i,o)}finally{de.p=f,P.T=u}}function Wx(e,n,i,o){var u=P.T;P.T=null;var f=de.p;try{de.p=8,Jd(e,n,i,o)}finally{de.p=f,P.T=u}}function Jd(e,n,i,o){if(Kl){var u=ef(o);if(u===null)$d(e,n,o,Ql,i),Ly(e,o);else if(e2(u,e,n,i,o))o.stopPropagation();else if(Ly(e,o),n&4&&-1<Jx.indexOf(e)){for(;u!==null;){var f=st(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=qt(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var N=1<<31-oe(y);S.entanglements[1]|=N,y&=~N}Ha(f),(xt&6)===0&&(Ml=R()+500,uo(0))}}break;case 31:case 13:S=si(f,2),S!==null&&Kn(S,f,2),zl(),Wd(f,2)}if(f=ef(o),f===null&&$d(e,n,o,Ql,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else $d(e,n,o,null,i)}}function ef(e){return e=nu(e),tf(e)}var Ql=null;function tf(e){if(Ql=null,e=dt(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Ql=e,null}function zy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(T()){case U:return 2;case ce:return 8;case le:case Ae:return 32;case Se:return 268435456;default:return 32}default:return 32}}var nf=!1,Ur=null,$r=null,Ir=null,vo=new Map,bo=new Map,Hr=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ly(e,n){switch(e){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":vo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(n.pointerId)}}function wo(e,n,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},n!==null&&(n=st(n),n!==null&&My(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function e2(e,n,i,o,u){switch(n){case"focusin":return Ur=wo(Ur,e,n,i,o,u),!0;case"dragenter":return $r=wo($r,e,n,i,o,u),!0;case"mouseover":return Ir=wo(Ir,e,n,i,o,u),!0;case"pointerover":var f=u.pointerId;return vo.set(f,wo(vo.get(f)||null,e,n,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,bo.set(f,wo(bo.get(f)||null,e,n,i,o,u)),!0}return!1}function By(e){var n=dt(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,ni(e.priority,function(){Ry(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,ni(e.priority,function(){Ry(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=ef(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);tu=o,i.target.dispatchEvent(o),tu=null}else return n=st(i),n!==null&&My(n),e.blockedOn=i,!1;n.shift()}return!0}function Uy(e,n,i){Wl(e)&&i.delete(n)}function t2(){nf=!1,Ur!==null&&Wl(Ur)&&(Ur=null),$r!==null&&Wl($r)&&($r=null),Ir!==null&&Wl(Ir)&&(Ir=null),vo.forEach(Uy),bo.forEach(Uy)}function Jl(e,n){e.blockedOn===n&&(e.blockedOn=null,nf||(nf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,t2)))}var ec=null;function $y(e){ec!==e&&(ec=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ec===e&&(ec=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],u=e[n+2];if(typeof o!="function"){if(tf(o||i)===null)continue;break}var f=st(i);f!==null&&(e.splice(n,3),n-=3,ed(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function os(e){function n(N){return Jl(N,e)}Ur!==null&&Jl(Ur,e),$r!==null&&Jl($r,e),Ir!==null&&Jl(Ir,e),vo.forEach(n),bo.forEach(n);for(var i=0;i<Hr.length;i++){var o=Hr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Hr.length&&(i=Hr[0],i.blockedOn===null);)By(i),i.blockedOn===null&&Hr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],y=u[j]||null;if(typeof f=="function")y||$y(i);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(u=f,y=f[j]||null)S=y.formAction;else if(tf(u)!==null)continue}else S=y.action;typeof S=="function"?i[o+1]=S:(i.splice(o,3),o-=3),$y(i)}}}function Iy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function af(e){this._internalRoot=e}tc.prototype.render=af.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=oa();_y(i,o,e,n,null,null)},tc.prototype.unmount=af.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;_y(e.current,2,null,e,null,null),zl(),n[K]=null}};function tc(e){this._internalRoot=e}tc.prototype.unstable_scheduleHydration=function(e){if(e){var n=wn();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Hr.length&&n!==0&&n<Hr[i].priority;i++);Hr.splice(i,0,e),i===0&&By(e)}};var Hy=t.version;if(Hy!=="19.2.0")throw Error(s(527,Hy,"19.2.0"));de.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var n2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{et=nc.inject(n2),_e=nc}catch{}}return xo.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",u=Zm,f=Xm,y=Km;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=jy(e,1,!1,null,null,i,o,null,u,f,y,Iy),e[K]=n.current,Ud(e),new af(n)},xo.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Zm,y=Xm,S=Km,N=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(N=i.formState)),n=jy(e,1,!0,n,i??null,o,u,N,f,y,S,Iy),n.context=Ay(null),i=n.current,o=oa(),o=sn(o),u=Tr(o),u.callback=null,Nr(i,u,o),i=o,n.current.lanes=i,Gn(n,i),Ha(n),e[K]=n.current,Ud(e),new tc(n)},xo.version="19.2.0",xo}var Qy;function f2(){if(Qy)return of.exports;Qy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),of.exports=d2(),of.exports}var ub=f2();const h2="modulepreload",p2=function(a,t){return new URL(a,t).href},Wy={},Jy=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let g=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");l=g(r.map(b=>{if(b=p2(b,s),b in Wy)return;Wy[b]=!0;const w=b.endsWith(".css"),x=w?'[rel="stylesheet"]':"";if(s)for(let _=d.length-1;_>=0;_--){const F=d[_];if(F.href===b&&(!w||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${x}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":h2,w||(E.as="script"),E.crossOrigin="",E.href=b,m&&E.setAttribute("nonce",m),document.head.appendChild(E),w)return new Promise((_,F)=>{E.addEventListener("load",_),E.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})};var Xr=cb();const Oh=Th(Xr),ev=lb({__proto__:null,default:Oh},[Xr]);function tv(a,t,r,s,l,c,d){try{var p=a[c](d),m=p.value}catch(g){return void r(g)}p.done?t(m):Promise.resolve(m).then(s,l)}function rt(a){return function(){var t=this,r=arguments;return new Promise(function(s,l){var c=a.apply(t,r);function d(m){tv(c,s,l,d,p,"next",m)}function p(m){tv(c,s,l,d,p,"throw",m)}d(void 0)})}}function pt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Rn(a){"@babel/helpers - typeof";return Rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(a)}function m2(a,t){if(Rn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Rn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function db(a){var t=m2(a,"string");return Rn(t)=="symbol"?t:t+""}function g2(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,db(s.key),s)}}function mt(a,t,r){return t&&g2(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function y2(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Za(a,t){if(t&&(Rn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y2(a)}function Ht(a){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ht(a)}function Bo(a,t){return Bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Bo(a,t)}function Wn(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Bo(a,t)}function Ue(a,t,r){return(t=db(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var df={exports:{}},ff={exports:{}},nv;function fb(){return nv||(nv=1,(function(a){function t(r,s){this.v=r,this.k=s}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var hf={exports:{}},pf={exports:{}},av;function hb(){return av||(av=1,(function(a){function t(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=t=function(m,g,b,w){function x(E,_){t(m,E,function(F){return this._invoke(E,_,F)})}g?d?d(m,g,{value:b,enumerable:!w,configurable:!w,writable:!w}):m[g]=b:(x("next",0),x("throw",1),x("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,t(r,s,l,c)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var rv;function pb(){return rv||(rv=1,(function(a){var t=hb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",p=c.toStringTag||"@@toStringTag";function m(V,ee,W,L){var Y=ee&&ee.prototype instanceof b?ee:b,me=Object.create(Y.prototype);return t(me,"_invoke",(function(be,B,he){var se,ye,$e,De=0,We=he||[],it=!1,Ke={p:0,n:0,v:s,a:P,f:P.bind(s,4),d:function(pe,Le){return se=pe,ye=0,$e=s,Ke.n=Le,g}};function P(de,pe){for(ye=de,$e=pe,l=0;!it&&De&&!Le&&l<We.length;l++){var Le,Q=We[l],v=Ke.p,C=Q[2];de>3?(Le=C===pe)&&($e=Q[(ye=Q[4])?5:(ye=3,3)],Q[4]=Q[5]=s):Q[0]<=v&&((Le=de<2&&v<Q[1])?(ye=0,Ke.v=pe,Ke.n=Q[1]):v<C&&(Le=de<3||Q[0]>pe||pe>C)&&(Q[4]=de,Q[5]=pe,Ke.n=C,ye=0))}if(Le||de>1)return g;throw it=!0,pe}return function(de,pe,Le){if(De>1)throw TypeError("Generator is already running");for(it&&pe===1&&P(pe,Le),ye=pe,$e=Le;(l=ye<2?s:$e)||!it;){se||(ye?ye<3?(ye>1&&(Ke.n=-1),P(ye,$e)):Ke.n=$e:Ke.v=$e);try{if(De=2,se){if(ye||(de="next"),l=se[de]){if(!(l=l.call(se,$e)))throw TypeError("iterator result is not an object");if(!l.done)return l;$e=l.value,ye<2&&(ye=0)}else ye===1&&(l=se.return)&&l.call(se),ye<2&&($e=TypeError("The iterator does not provide a '"+de+"' method"),ye=1);se=s}else if((l=(it=Ke.n<0)?$e:be.call(B,Ke))!==g)break}catch(Q){se=s,ye=1,$e=Q}finally{De=1}}return{value:l,done:it}}})(V,W,L),!0),me}var g={};function b(){}function w(){}function x(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(t(l={},d,function(){return this}),l),_=x.prototype=b.prototype=Object.create(E);function F(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,x):(V.__proto__=x,t(V,p,"GeneratorFunction")),V.prototype=Object.create(_),V}return w.prototype=x,t(_,"constructor",x),t(x,"constructor",w),w.displayName="GeneratorFunction",t(x,p,"GeneratorFunction"),t(_),t(_,p,"Generator"),t(_,d,function(){return this}),t(_,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:F}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var mf={exports:{}},gf={exports:{}},yf={exports:{}},iv;function mb(){return iv||(iv=1,(function(a){var t=fb(),r=hb();function s(l,c){function d(m,g,b,w){try{var x=l[m](g),E=x.value;return E instanceof t?c.resolve(E.v).then(function(_){d("next",_,b,w)},function(_){d("throw",_,b,w)}):c.resolve(E).then(function(_){x.value=_,b(x)},function(_){return d("throw",_,b,w)})}catch(_){w(_)}}var p;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,g,b){function w(){return new c(function(x,E){d(m,b,x,E)})}return p=p?p.then(w,w):w()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var sv;function gb(){return sv||(sv=1,(function(a){var t=pb(),r=mb();function s(l,c,d,p,m){return new r(t().w(l,c,d,p),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var ov;function v2(){return ov||(ov=1,(function(a){var t=gb();function r(s,l,c,d,p){var m=t(s,l,c,d,p);return m.next().then(function(g){return g.done?g.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var vf={exports:{}},lv;function b2(){return lv||(lv=1,(function(a){function t(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var bf={exports:{}},wf={exports:{}},cv;function w2(){return cv||(cv=1,(function(a){function t(r){"@babel/helpers - typeof";return a.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,t(r)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(wf)),wf.exports}var uv;function S2(){return uv||(uv=1,(function(a){var t=w2().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(t(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var dv;function x2(){return dv||(dv=1,(function(a){var t=fb(),r=pb(),s=v2(),l=gb(),c=mb(),d=b2(),p=S2();function m(){var g=r(),b=g.m(m),w=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function x(F){var V=typeof F=="function"&&F.constructor;return!!V&&(V===w||(V.displayName||V.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function _(F){var V,ee;return function(W){V||(V={stop:function(){return ee(W.a,2)},catch:function(){return W.v},abrupt:function(Y,me){return ee(W.a,E[Y],me)},delegateYield:function(Y,me,be){return V.resultName=me,ee(W.d,p(Y),be)},finish:function(Y){return ee(W.f,Y)}},ee=function(Y,me,be){W.p=V.prev,W.n=V.next;try{return Y(me,be)}finally{V.next=W.n}}),V.resultName&&(V[V.resultName]=W.v,V.resultName=void 0),V.sent=W.v,V.next=W.n;try{return F.call(this,V)}finally{W.p=V.prev,W.n=V.next}}}return(a.exports=m=function(){return{wrap:function(ee,W,L,Y){return g.w(_(ee),W,L,Y&&Y.reverse())},isGeneratorFunction:x,mark:g.m,awrap:function(ee,W){return new t(ee,W)},AsyncIterator:c,async:function(ee,W,L,Y,me){return(x(W)?l:s)(_(ee),W,L,Y,me)},keys:d,values:p}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(df)),df.exports}var Sf,fv;function k2(){if(fv)return Sf;fv=1;var a=x2()();Sf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return Sf}var E2=k2();const ke=Th(E2);function C2(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=T2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function T2(a,t){if(a){if(typeof a=="string")return hv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hv(a,t):void 0}}function hv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function N2(){return{debug:function(t){}}}var yb=(function(){function a(){pt(this,a),Ue(this,"pipes",[])}return mt(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var t=rt(ke.mark(function s(l){var c,d,p,m;return ke.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:c=l,d=C2(this.pipes),b.prev=2,d.s();case 4:if((p=d.n()).done){b.next=13;break}return m=p.value,b.next=8,m(c);case 8:if(c=b.sent,!(typeof c>"u")){b.next=11;break}return b.abrupt("return");case 11:b.next=4;break;case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(2),d.e(b.t0);case 18:return b.prev=18,d.f(),b.finish(18);case 21:return b.abrupt("return",c);case 22:case"end":return b.stop()}},s,this,[[2,15,18,21]])}));function r(s){return t.apply(this,arguments)}return r})()}])})(),Es=(function(){function a(t){pt(this,a),Ue(this,"signal",new yb),this.name=t}return mt(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),N2()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function pv(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=O2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function O2(a,t){if(a){if(typeof a=="string")return mv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mv(a,t):void 0}}function mv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function j2(a,t,r){return t=Ht(t),Za(a,vb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function vb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!a})()}var Jr=(function(a){function t(){var r;return pt(this,t),r=j2(this,t,["NodeEditor"]),Ue(r,"nodes",[]),Ue(r,"connections",[]),r}return Wn(t,a),mt(t,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=rt(ke.mark(function l(c){return ke.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getNode(c.id)){p.next=2;break}throw new Error("node has already been added");case 2:return p.next=4,this.emit({type:"nodecreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.nodes.push(c),p.next=9,this.emit({type:"nodecreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=rt(ke.mark(function l(c){return ke.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getConnection(c.id)){p.next=2;break}throw new Error("connection has already been added");case 2:return p.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.connections.push(c),p.next=9,this.emit({type:"connectioncreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=rt(ke.mark(function l(c){var d,p;return ke.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.nodes.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find node");case 3:return g.next=5,this.emit({type:"noderemove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.nodes.indexOf(d),this.nodes.splice(p,1),g.next=11,this.emit({type:"noderemoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=rt(ke.mark(function l(c){var d,p;return ke.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.connections.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find connection");case 3:return g.next=5,this.emit({type:"connectionremove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.connections.indexOf(d),this.connections.splice(p,1),g.next=11,this.emit({type:"connectionremoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=rt(ke.mark(function l(){var c,d,p,m,g,b;return ke.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,this.emit({type:"clear"});case 2:if(x.sent){x.next=6;break}return x.next=5,this.emit({type:"clearcancelled"});case 5:return x.abrupt("return",!1);case 6:c=pv(this.connections.slice()),x.prev=7,c.s();case 9:if((d=c.n()).done){x.next=15;break}return p=d.value,x.next=13,this.removeConnection(p.id);case 13:x.next=9;break;case 15:x.next=20;break;case 17:x.prev=17,x.t0=x.catch(7),c.e(x.t0);case 20:return x.prev=20,c.f(),x.finish(20);case 23:m=pv(this.nodes.slice()),x.prev=24,m.s();case 26:if((g=m.n()).done){x.next=32;break}return b=g.value,x.next=30,this.removeNode(b.id);case 30:x.next=26;break;case 32:x.next=37;break;case 34:x.prev=34,x.t1=x.catch(24),m.e(x.t1);case 37:return x.prev=37,m.f(),x.finish(37);case 40:return x.next=42,this.emit({type:"cleared"});case 42:return x.abrupt("return",!0);case 43:case"end":return x.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(Es),xf=globalThis.crypto;function ei(){if("randomBytes"in xf)return xf.randomBytes(8).toString("hex");var a=xf.getRandomValues(new Uint8Array(8)),t=Array.from(a),r=t.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function jh(a,t,r){return t=Ht(t),Za(a,bb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function bb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bb=function(){return!!a})()}var A2=mt(function a(t){pt(this,a),this.name=t}),Ah=mt(function a(t,r,s){pt(this,a),this.socket=t,this.label=r,this.multipleConnections=s,this.id=ei()}),_2=(function(a){function t(r,s,l){var c;return pt(this,t),c=jh(this,t,[r,s,l]),Ue(c,"control",null),Ue(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return Wn(t,a),mt(t,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Ah),D2=(function(a){function t(r,s,l){return pt(this,t),jh(this,t,[r,s,l!==!1])}return Wn(t,a),mt(t)})(Ah),wb=mt(function a(){pt(this,a),this.id=ei()}),M2=(function(a){function t(r,s){var l,c;return pt(this,t),c=jh(this,t),c.type=r,c.options=s,c.id=ei(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return Wn(t,a),mt(t,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(wb),R2=(function(){function a(t){pt(this,a),Ue(this,"inputs",{}),Ue(this,"outputs",{}),Ue(this,"controls",{}),this.label=t,this.id=ei()}return mt(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),z2=mt(function a(t,r,s,l){if(pt(this,a),this.sourceOutput=r,this.targetInput=l,!t.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=ei(),this.source=t.id,this.target=s.id}),Xt=Object.freeze({__proto__:null,Socket:A2,Port:Ah,Input:_2,Output:D2,Control:wb,InputControl:M2,Node:R2,Connection:z2});const L2=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Xt,NodeEditor:Jr,Scope:Es,Signal:yb,getUID:ei},Symbol.toStringTag,{value:"Module"}));function Yf(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function B2(a){if(Array.isArray(a))return Yf(a)}function U2(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function Sb(a,t){if(a){if(typeof a=="string")return Yf(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yf(a,t):void 0}}function $2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(a){return B2(a)||U2(a)||Sb(a)||$2()}var I2=(function(){function a(t){pt(this,a),this.reordered=t,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return mt(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,p=r.clientY-c;return{x:d,y:p}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var t=rt(ke.mark(function s(l,c){return ke.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.holder.contains(l)){p.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){p.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),p.next=7,this.reordered(l);case 7:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function xb(a,t){var r=function(d){t.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),t.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),t.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var gv=function(t){return t.length===0?0:Math.min.apply(Math,Cs(t))},yv=function(t){return t.length===0?0:Math.max.apply(Math,Cs(t))};function kb(a){var t=gv(a.map(function(c){return c.position.x})),r=gv(a.map(function(c){return c.position.y})),s=yv(a.map(function(c){return c.position.x+c.width})),l=yv(a.map(function(c){return c.position.y+c.height}));return{left:t,right:s,top:r,bottom:l,width:Math.abs(t-s),height:Math.abs(r-l),center:{x:(t+s)/2,y:(r+l)/2}}}function vv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function H2(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):vv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var _h=(function(){function a(t){var r=this;pt(this,a),Ue(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=H2({},r.config.getCurrentPosition()),r.events.start(s))}),Ue(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,p=r.startPosition.y+l.y/c;r.events.translate(d,p,s)}}),Ue(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=t||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return mt(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=xb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Eb=(function(){function a(t){var r=this;pt(this,a),Ue(this,"previous",null),Ue(this,"pointers",[]),Ue(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=s.deltaY<0,m=p?r.intensity:-r.intensity,g=(c-s.clientX)*m,b=(d-s.clientY)*m;r.onzoom(m,g,b,"wheel")}),Ue(this,"down",function(s){r.pointers.push(s)}),Ue(this,"move",function(s){if(r.pointers=r.pointers.map(function(_){return _.pointerId===s.pointerId?s:_}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=r.getTouches(),m=p.cx,g=p.cy,b=p.distance;if(r.previous!==null&&r.previous.distance>0){var w=b/r.previous.distance-1,x=(c-m)*w,E=(d-g)*w;r.onzoom(w,x-(r.previous.cx-m),E-(r.previous.cy-g),"touch")}r.previous={cx:m,cy:g,distance:b}}}),Ue(this,"contextmenu",function(){r.pointers=[]}),Ue(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Ue(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=4*r.intensity,m=(c-s.clientX)*p,g=(d-s.clientY)*p;r.onzoom(p,m,g,"dblclick")}),this.intensity=t}return mt(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],p=d[0],m=d[1],g=Math.sqrt(Math.pow(l-p,2)+Math.pow(c-m,2));return{cx:(l+p)/2,cy:(c+m)/2,distance:g}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Cb=(function(){function a(t,r,s){var l=this;pt(this,a),Ue(this,"transform",{k:1,x:0,y:0}),Ue(this,"pointer",{x:0,y:0}),Ue(this,"zoomHandler",null),Ue(this,"dragHandler",null),Ue(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Ue(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Ue(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Ue(this,"resize",function(c){l.events.resize(c)}),Ue(this,"onTranslate",function(c,d){var p;(p=l.zoomHandler)!==null&&p!==void 0&&p.isTranslating()||l.translate(c,d)}),Ue(this,"onZoom",function(c,d,p,m){l.zoom(l.transform.k*(1+c),d,p,m),l.update()}),this.container=t,this.events=r,this.guards=s,this.content=new I2(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Eb(.1)),this.setDragHandler(new _h),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),t.appendChild(this.content.holder),this.update()}return mt(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var t=rt(ke.mark(function s(l,c){var d,p;return ke.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d={x:l,y:c},g.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(p=g.sent,p){g.next=6;break}return g.abrupt("return",!1);case 6:return this.transform.x=p.data.position.x,this.transform.y=p.data.position.y,this.update(),g.next=11,this.events.translated(p.data);case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var t=rt(ke.mark(function s(l){var c,d,p,m,g,b,w=arguments;return ke.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=w.length>1&&w[1]!==void 0?w[1]:0,d=w.length>2&&w[2]!==void 0?w[2]:0,p=w.length>3?w[3]:void 0,m=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:p});case 6:if(g=E.sent,g){E.next=9;break}return E.abrupt("return",!0);case 9:return b=(m-g.data.zoom)/(m-l||1),this.transform.k=g.data.zoom||1,this.transform.x+=c*b,this.transform.y+=d*b,this.update(),E.next=16,this.events.zoomed(g.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function V2(a,t,r){return t=Ht(t),Za(a,Tb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Tb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tb=function(){return!!a})()}var Ho=(function(a){function t(){return pt(this,t),V2(this,t,arguments)}return Wn(t,a),mt(t)})(Es),q2=mt(function a(t){pt(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return t.contextmenu(r)})}),G2=(function(){function a(){pt(this,a),Ue(this,"views",new WeakMap),Ue(this,"viewsElements",new Map)}return mt(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function bv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function wv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):bv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Nb=(function(){function a(t,r,s){var l=this;pt(this,a),Ue(this,"translate",(function(){var c=rt(ke.mark(function d(p,m){var g,b;return ke.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return g=wv({},l.position),x.next=3,l.guards.translate({previous:g,position:{x:p,y:m}});case 3:if(b=x.sent,b){x.next=6;break}return x.abrupt("return",!1);case 6:return l.position=wv({},b.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),x.next=10,l.events.translated({position:l.position,previous:g});case 10:return x.abrupt("return",!0);case 11:case"end":return x.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),Ue(this,"resize",(function(){var c=rt(ke.mark(function d(p,m){var g,b;return ke.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return g={width:p,height:m},x.next=3,l.guards.resize({size:g});case 3:if(x.sent){x.next=5;break}return x.abrupt("return",!1);case 5:if(b=l.element.querySelector("*:not(span):not([fragment])"),!(!b||!(b instanceof HTMLElement))){x.next=8;break}return x.abrupt("return",!1);case 8:return b.style.width="".concat(p,"px"),b.style.height="".concat(m,"px"),x.next=12,l.events.resized({size:g});case 12:return x.abrupt("return",!0);case 13:case"end":return x.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),this.getZoom=t,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new _h,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return mt(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Ob(a,t){return a.map(function(r){return{view:t.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function Y2(a,t){var r=a.parentScope(Jr),s=t.map(function(c){return Rn(c)==="object"?c:r.getNode(c)}),l=Ob(s,a.nodeViews);return kb(l)}function P2(a){var t=a;t.addPipe(function(r){if(!r||Rn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=t.nodeViews.get(r.data.id),l=t.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=t.connectionViews.get(r.data.id),d=t.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function Sv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function pr(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function F2(a,t){var r=t!=null&&t.scaling?t.scaling===!0?{min:.1,max:1}:t.scaling:!1,s=t!=null&&t.translation?t.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:t.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var p=typeof r=="function"?r():r,m=p.min,g=p.max;return d<m?m:d>g?g:d}function c(d){if(!s)throw new Error("translation param isnt defined");var p=pr({},d),m=typeof s=="function"?s():s,g=m.left,b=m.top,w=m.right,x=m.bottom;return p.x<g&&(p.x=g),p.x>w&&(p.x=w),p.y<b&&(p.y=b),p.y>x&&(p.y=x),p}a.addPipe(function(d){if(!d||Rn(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return pr(pr({},d),{},{data:pr(pr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var p=c(a.area.transform);a.area.translate(p.x,p.y)}return s&&d.type==="translate"?pr(pr({},d),{},{data:pr(pr({},d.data),{},{position:c(d.data.position)})}):d})}function Z2(){var a=!1;function t(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",t),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)}}}var jb=(function(){function a(){pt(this,a),Ue(this,"entities",new Map),Ue(this,"pickId",null)}return mt(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var t=rt(ke.mark(function s(l,c){return ke.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c){p.next=3;break}return p.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var t=rt(ke.mark(function s(l){var c,d;return ke.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var t=rt(ke.mark(function s(){var l=this;return ke.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(Cs(Array.from(this.entities.values())).map(function(p){return l.remove(p)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var t=rt(ke.mark(function s(l,c){var d=this;return ke.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(g){return!d.isPicked(g)&&g.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function X2(){return new jb}function K2(a,t,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(Jr))},d=0;function p(E){E.selected||(E.selected=!0,l.update("node",E.id))}function m(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function g(E,_){return b.apply(this,arguments)}function b(){return b=rt(ke.mark(function E(_,F){var V;return ke.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(V=c().getNode(_),V){W.next=3;break}return W.abrupt("return");case 3:return W.next=5,t.add({label:"node",id:V.id,translate:function(Y,me){return rt(ke.mark(function be(){var B,he;return ke.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(B=l.nodeViews.get(V.id),he=B?.position,!he){ye.next=5;break}return ye.next=5,B.translate(he.x+Y,he.y+me);case 5:case"end":return ye.stop()}},be)}))()},unselect:function(){m(V)}},F);case 5:p(V);case 6:case"end":return W.stop()}},E)})),b.apply(this,arguments)}function w(E){return x.apply(this,arguments)}function x(){return x=rt(ke.mark(function E(_){return ke.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,t.remove({id:_,label:"node"});case 2:case"end":return V.stop()}},E)})),x.apply(this,arguments)}return l.addPipe((function(){var E=rt(ke.mark(function _(F){var V,ee,W,L,Y,me,be,B;return ke.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!(!F||Rn(F)!=="object"||!("type"in F))){se.next=2;break}return se.abrupt("return",F);case 2:if(F.type!=="nodepicked"){se.next=11;break}return V=F.data.id,ee=r.accumulating.active(),t.pick({id:V,label:"node"}),d=null,se.next=9,g(V,ee);case 9:se.next=33;break;case 11:if(F.type!=="nodetranslated"){se.next=20;break}if(W=F.data,L=W.id,Y=W.position,me=W.previous,be=Y.x-me.x,B=Y.y-me.y,!t.isPicked({id:L,label:"node"})){se.next=18;break}return se.next=18,t.translate(be,B);case 18:se.next=33;break;case 20:if(F.type!=="pointerdown"){se.next=24;break}d=0,se.next=33;break;case 24:if(F.type!=="pointermove"){se.next=28;break}d!==null&&d++,se.next=33;break;case 28:if(F.type!=="pointerup"){se.next=33;break}if(!(d!==null&&d<4)){se.next=32;break}return se.next=32,t.unselectAll();case 32:d=null;case 33:return se.abrupt("return",F);case 34:case"end":return se.stop()}},_)}));return function(_){return E.apply(this,arguments)}})()),{select:g,unselect:w}}function Q2(a,t){var r=null,s=function(){return r||(r=a.parentScope(Jr))};function l(c,d){var p=s().getNode(c);if(p){var m=p.inputs[d];if(!m)throw new Error("cannot find input");var g=m.showControl,b=s().getConnections(),w=!!b.find(function(x){return x.target===c&&x.targetInput===d});m.showControl=t?t({hasAnyConnection:w,input:m}):!w,m.showControl!==g&&a.update("node",p.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function xv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function ac(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function W2(a,t){var r=a,s=typeof t?.size>"u"?16:t.size,l=typeof t?.dynamic>"u"?!0:t.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||Rn(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var p=d.data.position,m=c(p.x),g=c(p.y);return ac(ac({},d),{},{data:ac(ac({},d.data),{},{position:{x:m,y:g}})})}if(!l&&d.type==="nodedragged"){var b=r.nodeViews.get(d.data.id);if(b){var w=b.position,x=w.x,E=w.y;b.translate(c(x),c(E))}}return d})}function J2(a,t,r){return Pf.apply(this,arguments)}function Pf(){return Pf=rt(ke.mark(function a(t,r,s){var l,c,d,p,m,g,b,w,x,E,_,F,V;return ke.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,p=t.parentScope(Jr),m=r.map(function(L){return Rn(L)==="object"?L:p.getNode(L)}),g=Ob(m,t.nodeViews),b=kb(g),w=[t.container.clientWidth,t.container.clientHeight],x=w[0],E=w[1],_=x/b.width,F=E/b.height,V=Math.min(F*d,_*d,1),t.area.transform.x=x/2-b.center.x*V,t.area.transform.y=E/2-b.center.y*V,W.next=12,t.area.zoom(V,0,0);case 12:case"end":return W.stop()}},a)})),Pf.apply(this,arguments)}var Yr=Object.freeze({__proto__:null,getBoundingBox:Y2,simpleNodesOrder:P2,restrictor:F2,accumulateOnCtrl:Z2,selectableNodes:K2,Selector:jb,selector:X2,showInputControl:Q2,snapGrid:W2,zoomAt:J2});function kv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ev(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function ek(a,t,r){return t=Ht(t),Za(a,Ab()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Ab(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ab=function(){return!!a})()}var _b=(function(a){function t(r){var s;return pt(this,t),s=ek(this,t,["area"]),Ue(s,"nodeViews",new Map),Ue(s,"connectionViews",new Map),Ue(s,"elements",new G2),Ue(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(Rn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Cb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return Wn(t,a),mt(t,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Nb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Ev({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var g=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:g}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Ev({id:c},m)})},resize:function(m){var g=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:g}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new q2({contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=rt(ke.mark(function l(c,d){var p;return ke.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=this.elements.get(c,d),!p){g.next=4;break}return g.next=4,this.emit({type:"render",data:p});case 4:case"end":return g.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=rt(ke.mark(function l(c,d,p){var m;return ke.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(m=this.nodeViews.get(c),!m){b.next=5;break}return b.next=4,m.resize(d,p);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=rt(ke.mark(function l(c,d){var p,m,g;return ke.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p=d.x,m=d.y,g=this.nodeViews.get(c),!g){w.next=6;break}return w.next=5,g.translate(p,m);case 5:return w.abrupt("return",w.sent);case 6:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Ho);const Cv=Object.freeze(Object.defineProperty({__proto__:null,Area:Cb,AreaExtensions:Yr,AreaPlugin:_b,BaseAreaPlugin:Ho,Drag:_h,NodeView:Nb,Zoom:Eb,usePointerListener:xb},Symbol.toStringTag,{value:"Module"}));function tk(a,t){for(;!{}.hasOwnProperty.call(a,t)&&(a=Ht(a))!==null;);return a}function Uo(){return Uo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,t,r){var s=tk(a,t);if(s){var l=Object.getOwnPropertyDescriptor(s,t);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Uo.apply(null,arguments)}function nk(a){if(Array.isArray(a))return a}function ak(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,p=[],m=!0,g=!1;try{if(c=(r=r.call(a)).next,t!==0)for(;!(m=(s=c.call(r)).done)&&(p.push(s.value),p.length!==t);m=!0);}catch(b){g=!0,l=b}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(g)throw l}}return p}}function rk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qn(a,t){return nk(a)||ak(a,t)||Sb(a,t)||rk()}function Tv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function kf(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Tv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function ik(a){var t=null,r=null;function s(c){r&&c.removeConnectionView(r),t=null,r=null}function l(c){s(c),r="pseudo_".concat(ei())}return{isMounted:function(){return!!r},mount:l,render:function(d,p,m){var g=p.x,b=p.y,w=m.side==="output",x={x:g+(w?-3:3),y:b};if(!r)throw new Error("pseudo connection id wasn't generated");var E=w?kf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):kf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!t){var _=d.addConnectionView(E);t=_.element}t&&d.emit({type:"render",data:kf({element:t,type:"connection",payload:E},w?{end:x}:{start:x})})},unmount:s}}function sk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=ok(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function ok(a,t){if(a){if(typeof a=="string")return Nv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nv(a,t):void 0}}function Nv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function lk(a,t){var r=sk(t),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function Db(a,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,t),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,Cs(Db(a,t,c))),l}var Dh=(function(){function a(){pt(this,a)}return mt(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Mb(a,t){var r=a.side==="output"&&t.side==="input",s=a.side==="input"&&t.side==="output",l=r?[a,t]:s?[t,a]:[],c=qn(l,2),d=c[0],p=c[1];if(d&&p)return[d,p]}function ck(a,t){return!!Mb(a,t)}function uk(a,t,r){var s=Mb(a,t)||[null,null],l=qn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:ei(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function dk(a,t){var r=t.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function fk(a,t){var r=a.nodeId,s=a.side,l=a.key;return t.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Ff(a,t){var r=a.map(function(s){var l=dk(s,t),c=l?.multipleConnections;return c?[]:fk(s,t)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void t.removeConnection(c)})}}}function Mh(a,t,r){return t=Ht(t),Za(a,Rb()?Reflect.construct(t,[],Ht(a).constructor):t.apply(a,r))}function Rb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Rb=function(){return!!a})()}var hk=(function(a){function t(r,s){var l;return pt(this,t),l=Mh(this,t),l.initial=r,l.params=s,l}return Wn(t,a),mt(t,[{key:"pick",value:(function(){var r=rt(ke.mark(function l(c,d){var p,m;return ke.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:p=c.socket,this.params.canMakeConnection(this.initial,p)&&(Ff([this.initial,p],d.editor).commit(),m=this.params.makeConnection(this.initial,p,d),this.drop(d,m?p:null,m));case 2:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Rh(this.params))}}])})(Dh),pk=(function(a){function t(r,s,l){var c;pt(this,t),c=Mh(this,t),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(p){return p.nodeId===c.connection.source&&p.side==="output"&&p.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return Wn(t,a),mt(t,[{key:"init",value:(function(){var r=rt(ke.mark(function l(c){var d=this;return ke.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(g){g?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=rt(ke.mark(function l(c,d){var p,m,g,b,w,x;return ke.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:p=c.socket,m=c.event,this.initial&&!(p.side==="input"&&this.connection.target===p.nodeId&&this.connection.targetInput===p.key)?this.params.canMakeConnection(this.initial,p)&&(Ff([this.initial,p],d.editor).commit(),g=this.params.makeConnection(this.initial,p,d),b=g?p:null,this.drop(d,b,g)):m==="down"&&this.initial&&(Ff([this.initial,p],d.editor).commit(),w=this.params.makeConnection(this.initial,p,d),x=w?null:p,this.drop(d,x,w));case 2:case"end":return _.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Rh(this.params))}}])})(Dh),Rh=(function(a){function t(r){var s;return pt(this,t),s=Mh(this,t),s.params=r,s}return Wn(t,a),mt(t,[{key:"pick",value:(function(){var r=rt(ke.mark(function l(c,d){var p,m,g,b;return ke.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(p=c.socket,m=c.event,m==="down"){x.next=3;break}return x.abrupt("return");case 3:if(p.side!=="input"){x.next=11;break}if(g=d.editor.getConnections().find(function(E){return E.target===p.nodeId&&E.targetInput===p.key}),!g){x.next=11;break}return b=new pk(g,this.params,d),x.next=9,b.init(d);case 9:return this.context.switchTo(b),x.abrupt("return");case 11:return x.next=13,d.scope.emit({type:"connectionpick",data:{socket:p}});case 13:if(!x.sent){x.next=17;break}this.context.switchTo(new hk(p,this.params)),x.next=18;break;case 17:this.drop(d);case 18:case"end":return x.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(Dh),mk=(function(){function a(t){pt(this,a);var r=t?.canMakeConnection||ck,s=t?.makeConnection||uk;this.switchTo(new Rh({canMakeConnection:r,makeConnection:s}))}return mt(a,[{key:"pick",value:(function(){var t=rt(ke.mark(function s(l,c){return ke.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.currentState.pick(l,c);case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function gk(){return function(){return new mk}}var yk=Object.freeze({__proto__:null,setup:gk}),vk=Object.freeze({__proto__:null,classic:yk});function bk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=wk(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function wk(a,t){if(a){if(typeof a=="string")return Ov(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ov(a,t):void 0}}function Ov(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function Sk(a,t,r){return t=Ht(t),Za(a,zb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}function xk(a,t,r,s){var l=Uo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var kk=(function(a){function t(){var r;return pt(this,t),r=Sk(this,t,["connection"]),Ue(r,"presets",[]),Ue(r,"currentFlow",null),Ue(r,"preudoconnection",ik({isPseudo:!0})),Ue(r,"socketsCache",new Map),r}return Wn(t,a),mt(t,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=bk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=d(s);if(p)return p}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=rt(ke.mark(function l(c,d){var p,m,g;return ke.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=Db(c.clientX,c.clientY),g=lk(this.socketsCache,m),!g){w.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(g),!this.currentFlow){w.next=11;break}return w.next=10,this.currentFlow.pick({socket:g,event:d},p);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:w.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(p);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;xk(t,"setParent",this)([s]),this.areaPlugin=this.parentScope(Ho),this.editor=this.areaPlugin.parentScope(Jr);var c=function(p){l.pick(p,"down")};this.addPipe(function(d){if(!d||Rn(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var p=d.data.element;p.addEventListener("pointerdown",c),l.socketsCache.set(p,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(Es);function Ek(a,t){var r=qn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],p=d.x,m=d.y,g=Math.abs(c-m),b=l+Math.max(g/2,Math.abs(p-l))*t,w=p-Math.max(g/2,Math.abs(p-l))*t;return"M ".concat(l," ").concat(c," C ").concat(b," ").concat(c," ").concat(w," ").concat(m," ").concat(p," ").concat(m)}function Ck(a,t,r){var s=qn(a,2),l=s[0],c=l.x,d=l.y,p=s[1],m=p.x,g=p.y,b=g>d?1:-1,w=r+Math.abs(c-m)/(r/2),x=(c+m)/2,E=d-b*w,_=(g-d)*t;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+w," ").concat(d,`
        `).concat(c+w," ").concat(E-_,`
        `).concat(x," ").concat(E,`
        C `).concat(m-w," ").concat(E+_,`
        `).concat(m-w," ").concat(g,`
        `).concat(m," ").concat(g,`
    `)}function Tk(a,t){return Zf.apply(this,arguments)}function Zf(){return Zf=rt(ke.mark(function a(t,r){var s,l,c,d,p;return ke.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.offsetParent){g.next=5;break}return g.next=3,new Promise(function(b){return setTimeout(b,0)});case 3:g.next=0;break;case 5:if(s=t.offsetLeft,l=t.offsetTop,c=t.offsetParent,c){g.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=t.offsetWidth,p=t.offsetHeight,g.abrupt("return",{x:s+d/2,y:l+p/2});case 14:case"end":return g.stop()}},a)})),Zf.apply(this,arguments)}var Nk=(function(){function a(){pt(this,a),Ue(this,"listeners",new Set)}return mt(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),Ok=(function(){function a(){pt(this,a),Ue(this,"elements",new Map)}return mt(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(p){return p.side===r.side&&p.nodeId===r.nodeId&&p.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(Cs(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),jk=(function(){function a(){pt(this,a),Ue(this,"sockets",new Ok),Ue(this,"emitter",new Nk),Ue(this,"area",null)}return mt(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Ho),this.area.addPipe((function(){var l=rt(ke.mark(function c(d){var p,m,g,b,w,x,E,_,F,V,ee;return ke.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){L.next=8;break}return p=d.data,m=p.nodeId,g=p.key,b=p.side,w=p.element,L.next=4,s.calculatePosition(m,b,g,w);case 4:x=L.sent,x&&(s.sockets.add({nodeId:m,key:g,side:b,element:w,position:x}),s.emitter.emit({nodeId:m,key:g,side:b})),L.next=24;break;case 8:if(d.type!=="unmount"){L.next=12;break}s.sockets.remove(d.data.element),L.next=24;break;case 12:if(d.type!=="nodetranslated"){L.next=16;break}s.emitter.emit({nodeId:d.data.id}),L.next=24;break;case 16:if(d.type!=="noderesized"){L.next=23;break}return E=d.data.id,L.next=20,Promise.all(s.sockets.snapshot().filter(function(Y){return Y.nodeId===d.data.id&&Y.side==="output"}).map((function(){var Y=rt(ke.mark(function me(be){var B,he,se,ye;return ke.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return B=be.side,he=be.key,se=be.element,De.next=3,s.calculatePosition(E,B,he,se);case 3:ye=De.sent,ye&&(be.position=ye);case 5:case"end":return De.stop()}},me)}));return function(me){return Y.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),L.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(_=d.data.payload,F=_.source,V=_.target,ee=F||V,s.emitter.emit({nodeId:ee}));case 24:return L.abrupt("return",d);case 25:case"end":return L.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,p=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var g,b=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!b)return;var w=b.x,x=b.y,E=(g=d.area)===null||g===void 0?void 0:g.nodeViews.get(r);E&&c({x:w+E.position.x,y:x+E.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),p}}])})();function Ak(a,t,r){return t=Ht(t),Za(a,Lb()?Reflect.construct(t,[],Ht(a).constructor):t.apply(a,r))}function Lb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lb=function(){return!!a})()}var _k=(function(a){function t(r){var s;return pt(this,t),s=Ak(this,t),s.props=r,s}return Wn(t,a),mt(t,[{key:"calculatePosition",value:(function(){var r=rt(ke.mark(function l(c,d,p,m){var g,b,w,x;return ke.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(w=(g=this.area)===null||g===void 0?void 0:g.nodeViews.get(c),w!=null&&w.element){_.next=3;break}return _.abrupt("return",null);case 3:return _.next=5,Tk(m,w.element);case 5:if(x=_.sent,!((b=this.props)!==null&&b!==void 0&&b.offset)){_.next=8;break}return _.abrupt("return",this.props.offset(x,c,d,p));case 8:return _.abrupt("return",{x:x.x+12*(d==="input"?-1:1),y:x.y});case 9:case"end":return _.stop()}},l,this)}));function s(l,c,d,p){return r.apply(this,arguments)}return s})()}])})(jk);function Dk(a){return new _k(a)}function zn(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}var Qn=function(){return Qn=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},Qn.apply(this,arguments)};function Oc(a,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,c;s<l;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return a.concat(c||Array.prototype.slice.call(t))}var Zt="-ms-",Mo="-moz-",Ct="-webkit-",Bb="comm",Uc="rule",zh="decl",Mk="@import",Ub="@keyframes",Rk="@layer",$b=Math.abs,Lh=String.fromCharCode,Xf=Object.assign;function zk(a,t){return Nn(a,0)^45?(((t<<2^Nn(a,0))<<2^Nn(a,1))<<2^Nn(a,2))<<2^Nn(a,3):0}function Ib(a){return a.trim()}function gr(a,t){return(a=t.exec(a))?a[0]:a}function at(a,t,r){return a.replace(t,r)}function gc(a,t,r){return a.indexOf(t,r)}function Nn(a,t){return a.charCodeAt(t)|0}function vs(a,t,r){return a.slice(t,r)}function Va(a){return a.length}function Hb(a){return a.length}function No(a,t){return t.push(a),a}function Lk(a,t){return a.map(t).join("")}function jv(a,t){return a.filter(function(r){return!gr(r,t)})}var $c=1,bs=1,Vb=0,Ea=0,yn=0,Ts="";function Ic(a,t,r,s,l,c,d,p){return{value:a,root:t,parent:r,type:s,props:l,children:c,line:$c,column:bs,length:d,return:"",siblings:p}}function Pr(a,t){return Xf(Ic("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},t)}function ls(a){for(;a.root;)a=Pr(a.root,{children:[a]});No(a,a.siblings)}function Bk(){return yn}function Uk(){return yn=Ea>0?Nn(Ts,--Ea):0,bs--,yn===10&&(bs=1,$c--),yn}function Ma(){return yn=Ea<Vb?Nn(Ts,Ea++):0,bs++,yn===10&&(bs=1,$c++),yn}function Ei(){return Nn(Ts,Ea)}function yc(){return Ea}function Hc(a,t){return vs(Ts,a,t)}function Kf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $k(a){return $c=bs=1,Vb=Va(Ts=a),Ea=0,[]}function Ik(a){return Ts="",a}function Ef(a){return Ib(Hc(Ea-1,Qf(a===91?a+2:a===40?a+1:a)))}function Hk(a){for(;(yn=Ei())&&yn<33;)Ma();return Kf(a)>2||Kf(yn)>3?"":" "}function Vk(a,t){for(;--t&&Ma()&&!(yn<48||yn>102||yn>57&&yn<65||yn>70&&yn<97););return Hc(a,yc()+(t<6&&Ei()==32&&Ma()==32))}function Qf(a){for(;Ma();)switch(yn){case a:return Ea;case 34:case 39:a!==34&&a!==39&&Qf(yn);break;case 40:a===41&&Qf(a);break;case 92:Ma();break}return Ea}function qk(a,t){for(;Ma()&&a+yn!==57;)if(a+yn===84&&Ei()===47)break;return"/*"+Hc(t,Ea-1)+"*"+Lh(a===47?a:Ma())}function Gk(a){for(;!Kf(Ei());)Ma();return Hc(a,Ea)}function Yk(a){return Ik(vc("",null,null,null,[""],a=$k(a),0,[0],a))}function vc(a,t,r,s,l,c,d,p,m){for(var g=0,b=0,w=d,x=0,E=0,_=0,F=1,V=1,ee=1,W=0,L="",Y=l,me=c,be=s,B=L;V;)switch(_=W,W=Ma()){case 40:if(_!=108&&Nn(B,w-1)==58){gc(B+=at(Ef(W),"&","&\f"),"&\f",$b(g?p[g-1]:0))!=-1&&(ee=-1);break}case 34:case 39:case 91:B+=Ef(W);break;case 9:case 10:case 13:case 32:B+=Hk(_);break;case 92:B+=Vk(yc()-1,7);continue;case 47:switch(Ei()){case 42:case 47:No(Pk(qk(Ma(),yc()),t,r,m),m);break;default:B+="/"}break;case 123*F:p[g++]=Va(B)*ee;case 125*F:case 59:case 0:switch(W){case 0:case 125:V=0;case 59+b:ee==-1&&(B=at(B,/\f/g,"")),E>0&&Va(B)-w&&No(E>32?_v(B+";",s,r,w-1,m):_v(at(B," ","")+";",s,r,w-2,m),m);break;case 59:B+=";";default:if(No(be=Av(B,t,r,g,b,l,p,L,Y=[],me=[],w,c),c),W===123)if(b===0)vc(B,t,be,be,Y,c,w,p,me);else switch(x===99&&Nn(B,3)===110?100:x){case 100:case 108:case 109:case 115:vc(a,be,be,s&&No(Av(a,be,be,0,0,l,p,L,l,Y=[],w,me),me),l,me,w,p,s?Y:me);break;default:vc(B,be,be,be,[""],me,0,p,me)}}g=b=E=0,F=ee=1,L=B="",w=d;break;case 58:w=1+Va(B),E=_;default:if(F<1){if(W==123)--F;else if(W==125&&F++==0&&Uk()==125)continue}switch(B+=Lh(W),W*F){case 38:ee=b>0?1:(B+="\f",-1);break;case 44:p[g++]=(Va(B)-1)*ee,ee=1;break;case 64:Ei()===45&&(B+=Ef(Ma())),x=Ei(),b=w=Va(L=B+=Gk(yc())),W++;break;case 45:_===45&&Va(B)==2&&(F=0)}}return c}function Av(a,t,r,s,l,c,d,p,m,g,b,w){for(var x=l-1,E=l===0?c:[""],_=Hb(E),F=0,V=0,ee=0;F<s;++F)for(var W=0,L=vs(a,x+1,x=$b(V=d[F])),Y=a;W<_;++W)(Y=Ib(V>0?E[W]+" "+L:at(L,/&\f/g,E[W])))&&(m[ee++]=Y);return Ic(a,t,r,l===0?Uc:p,m,g,b,w)}function Pk(a,t,r,s){return Ic(a,t,r,Bb,Lh(Bk()),vs(a,2,-2),0,s)}function _v(a,t,r,s,l){return Ic(a,t,r,zh,vs(a,0,s),vs(a,s+1,-1),s,l)}function qb(a,t,r){switch(zk(a,t)){case 5103:return Ct+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ct+a+a;case 4789:return Mo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ct+a+Mo+a+Zt+a+a;case 5936:switch(Nn(a,t+11)){case 114:return Ct+a+Zt+at(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ct+a+Zt+at(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ct+a+Zt+at(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ct+a+Zt+a+a;case 6165:return Ct+a+Zt+"flex-"+a+a;case 5187:return Ct+a+at(a,/(\w+).+(:[^]+)/,Ct+"box-$1$2"+Zt+"flex-$1$2")+a;case 5443:return Ct+a+Zt+"flex-item-"+at(a,/flex-|-self/g,"")+(gr(a,/flex-|baseline/)?"":Zt+"grid-row-"+at(a,/flex-|-self/g,""))+a;case 4675:return Ct+a+Zt+"flex-line-pack"+at(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ct+a+Zt+at(a,"shrink","negative")+a;case 5292:return Ct+a+Zt+at(a,"basis","preferred-size")+a;case 6060:return Ct+"box-"+at(a,"-grow","")+Ct+a+Zt+at(a,"grow","positive")+a;case 4554:return Ct+at(a,/([^-])(transform)/g,"$1"+Ct+"$2")+a;case 6187:return at(at(at(a,/(zoom-|grab)/,Ct+"$1"),/(image-set)/,Ct+"$1"),a,"")+a;case 5495:case 3959:return at(a,/(image-set\([^]*)/,Ct+"$1$`$1");case 4968:return at(at(a,/(.+:)(flex-)?(.*)/,Ct+"box-pack:$3"+Zt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ct+a+a;case 4200:if(!gr(a,/flex-|baseline/))return Zt+"grid-column-align"+vs(a,t)+a;break;case 2592:case 3360:return Zt+at(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return t=l,gr(s.props,/grid-\w+-end/)})?~gc(a+(r=r[t].value),"span",0)?a:Zt+at(a,"-start","")+a+Zt+"grid-row-span:"+(~gc(r,"span",0)?gr(r,/\d+/):+gr(r,/\d+/)-+gr(a,/\d+/))+";":Zt+at(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return gr(s.props,/grid-\w+-start/)})?a:Zt+at(at(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return at(a,/(.+)-inline(.+)/,Ct+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Va(a)-1-t>6)switch(Nn(a,t+1)){case 109:if(Nn(a,t+4)!==45)break;case 102:return at(a,/(.+:)(.+)-([^]+)/,"$1"+Ct+"$2-$3$1"+Mo+(Nn(a,t+3)==108?"$3":"$2-$3"))+a;case 115:return~gc(a,"stretch",0)?qb(at(a,"stretch","fill-available"),t,r)+a:a}break;case 5152:case 5920:return at(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,p,m,g){return Zt+l+":"+c+g+(d?Zt+l+"-span:"+(p?m:+m-+c)+g:"")+a});case 4949:if(Nn(a,t+6)===121)return at(a,":",":"+Ct)+a;break;case 6444:switch(Nn(a,Nn(a,14)===45?18:11)){case 120:return at(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ct+(Nn(a,14)===45?"inline-":"")+"box$3$1"+Ct+"$2$3$1"+Zt+"$2box$3")+a;case 100:return at(a,":",":"+Zt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(a,"scroll-","scroll-snap-")+a}return a}function jc(a,t){for(var r="",s=0;s<a.length;s++)r+=t(a[s],s,a,t)||"";return r}function Fk(a,t,r,s){switch(a.type){case Rk:if(a.children.length)break;case Mk:case zh:return a.return=a.return||a.value;case Bb:return"";case Ub:return a.return=a.value+"{"+jc(a.children,s)+"}";case Uc:if(!Va(a.value=a.props.join(",")))return""}return Va(r=jc(a.children,s))?a.return=a.value+"{"+r+"}":""}function Zk(a){var t=Hb(a);return function(r,s,l,c){for(var d="",p=0;p<t;p++)d+=a[p](r,s,l,c)||"";return d}}function Xk(a){return function(t){t.root||(t=t.return)&&a(t)}}function Kk(a,t,r,s){if(a.length>-1&&!a.return)switch(a.type){case zh:a.return=qb(a.value,a.length,r);return;case Ub:return jc([Pr(a,{value:at(a.value,"@","@"+Ct)})],s);case Uc:if(a.length)return Lk(r=a.props,function(l){switch(gr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ls(Pr(a,{props:[at(l,/:(read-\w+)/,":"+Mo+"$1")]})),ls(Pr(a,{props:[l]})),Xf(a,{props:jv(r,s)});break;case"::placeholder":ls(Pr(a,{props:[at(l,/:(plac\w+)/,":"+Ct+"input-$1")]})),ls(Pr(a,{props:[at(l,/:(plac\w+)/,":"+Mo+"$1")]})),ls(Pr(a,{props:[at(l,/:(plac\w+)/,Zt+"input-$1")]})),ls(Pr(a,{props:[l]})),Xf(a,{props:jv(r,s)});break}return""})}}var Qk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},la={},ws=typeof process<"u"&&la!==void 0&&(la.REACT_APP_SC_ATTR||la.SC_ATTR)||"data-styled",Gb="active",Yb="data-styled-version",Vc="6.1.19",Bh=`/*!sc*/
`,Ac=typeof window<"u"&&typeof document<"u",Wk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&la!==void 0&&la.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&la.REACT_APP_SC_DISABLE_SPEEDY!==""?la.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&la.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&la!==void 0&&la.SC_DISABLE_SPEEDY!==void 0&&la.SC_DISABLE_SPEEDY!==""&&la.SC_DISABLE_SPEEDY!=="false"&&la.SC_DISABLE_SPEEDY),qc=Object.freeze([]),Ss=Object.freeze({});function Jk(a,t,r){return r===void 0&&(r=Ss),a.theme!==r.theme&&a.theme||t||r.theme}var Pb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),eE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,tE=/(^-|-$)/g;function Dv(a){return a.replace(eE,"-").replace(tE,"")}var nE=/(a)(d)/gi,rc=52,Mv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Wf(a){var t,r="";for(t=Math.abs(a);t>rc;t=t/rc|0)r=Mv(t%rc)+r;return(Mv(t%rc)+r).replace(nE,"$1-$2")}var Cf,Fb=5381,hs=function(a,t){for(var r=t.length;r;)a=33*a^t.charCodeAt(--r);return a},Zb=function(a){return hs(Fb,a)};function aE(a){return Wf(Zb(a)>>>0)}function rE(a){return a.displayName||a.name||"Component"}function Tf(a){return typeof a=="string"&&!0}var Xb=typeof Symbol=="function"&&Symbol.for,Kb=Xb?Symbol.for("react.memo"):60115,iE=Xb?Symbol.for("react.forward_ref"):60112,sE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Qb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lE=((Cf={})[iE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Cf[Kb]=Qb,Cf);function Rv(a){return("type"in(t=a)&&t.type.$$typeof)===Kb?Qb:"$$typeof"in a?lE[a.$$typeof]:sE;var t}var cE=Object.defineProperty,uE=Object.getOwnPropertyNames,zv=Object.getOwnPropertySymbols,dE=Object.getOwnPropertyDescriptor,fE=Object.getPrototypeOf,Lv=Object.prototype;function Wb(a,t,r){if(typeof t!="string"){if(Lv){var s=fE(t);s&&s!==Lv&&Wb(a,s,r)}var l=uE(t);zv&&(l=l.concat(zv(t)));for(var c=Rv(a),d=Rv(t),p=0;p<l.length;++p){var m=l[p];if(!(m in oE||r&&r[m]||d&&m in d||c&&m in c)){var g=dE(t,m);try{cE(a,m,g)}catch{}}}}return a}function xs(a){return typeof a=="function"}function Uh(a){return typeof a=="object"&&"styledComponentId"in a}function Si(a,t){return a&&t?"".concat(a," ").concat(t):a||t||""}function Bv(a,t){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function $o(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function Jf(a,t,r){if(r===void 0&&(r=!1),!r&&!$o(a)&&!Array.isArray(a))return t;if(Array.isArray(t))for(var s=0;s<t.length;s++)a[s]=Jf(a[s],t[s]);else if($o(t))for(var s in t)a[s]=Jf(a[s],t[s]);return a}function $h(a,t){Object.defineProperty(a,"toString",{value:t})}function Vo(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var hE=(function(){function a(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return a.prototype.indexOfGroup=function(t){for(var r=0,s=0;s<t;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;t>=c;)if((c<<=1)<0)throw Vo(16,"".concat(t));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var p=this.indexOfGroup(t+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(p,r[d])&&(this.groupSizes[t]++,p++)},a.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],s=this.indexOfGroup(t),l=s+r;this.groupSizes[t]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var s=this.groupSizes[t],l=this.indexOfGroup(t),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Bh);return r},a})(),bc=new Map,_c=new Map,wc=1,ic=function(a){if(bc.has(a))return bc.get(a);for(;_c.has(wc);)wc++;var t=wc++;return bc.set(a,t),_c.set(t,a),t},pE=function(a,t){wc=t+1,bc.set(a,t),_c.set(t,a)},mE="style[".concat(ws,"][").concat(Yb,'="').concat(Vc,'"]'),gE=new RegExp("^".concat(ws,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),yE=function(a,t,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(t,s)},vE=function(a,t){for(var r,s=((r=t.textContent)!==null&&r!==void 0?r:"").split(Bh),l=[],c=0,d=s.length;c<d;c++){var p=s[c].trim();if(p){var m=p.match(gE);if(m){var g=0|parseInt(m[1],10),b=m[2];g!==0&&(pE(b,g),yE(a,b,m[3]),a.getTag().insertRules(g,l)),l.length=0}else l.push(p)}}},Uv=function(a){for(var t=document.querySelectorAll(mE),r=0,s=t.length;r<s;r++){var l=t[r];l&&l.getAttribute(ws)!==Gb&&(vE(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function bE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var Jb=function(a){var t=document.head,r=a||t,s=document.createElement("style"),l=(function(p){var m=Array.from(p.querySelectorAll("style[".concat(ws,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(ws,Gb),s.setAttribute(Yb,Vc);var d=bE();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},wE=(function(){function a(t){this.element=Jb(t),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Vo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},a.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},a})(),SE=(function(){function a(t){this.element=Jb(t),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[t]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},a.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},a})(),xE=(function(){function a(t){this.rules=[],this.length=0}return a.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},a.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},a.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},a})(),$v=Ac,kE={isServer:!Ac,useCSSOMInjection:!Wk},e1=(function(){function a(t,r,s){t===void 0&&(t=Ss),r===void 0&&(r={});var l=this;this.options=Qn(Qn({},kE),t),this.gs=r,this.names=new Map(s),this.server=!!t.isServer,!this.server&&Ac&&$v&&($v=!1,Uv(this)),$h(this,function(){return(function(c){for(var d=c.getTag(),p=d.length,m="",g=function(w){var x=(function(ee){return _c.get(ee)})(w);if(x===void 0)return"continue";var E=c.names.get(x),_=d.getGroup(w);if(E===void 0||!E.size||_.length===0)return"continue";var F="".concat(ws,".g").concat(w,'[id="').concat(x,'"]'),V="";E!==void 0&&E.forEach(function(ee){ee.length>0&&(V+="".concat(ee,","))}),m+="".concat(_).concat(F,'{content:"').concat(V,'"}').concat(Bh)},b=0;b<p;b++)g(b);return m})(l)})}return a.registerId=function(t){return ic(t)},a.prototype.rehydrate=function(){!this.server&&Ac&&Uv(this)},a.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new a(Qn(Qn({},this.options),t),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(t=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new xE(l):s?new wE(l):new SE(l)})(this.options),new hE(t)));var t},a.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},a.prototype.registerName=function(t,r){if(ic(t),this.names.has(t))this.names.get(t).add(r);else{var s=new Set;s.add(r),this.names.set(t,s)}},a.prototype.insertRules=function(t,r,s){this.registerName(t,r),this.getTag().insertRules(ic(t),s)},a.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},a.prototype.clearRules=function(t){this.getTag().clearGroup(ic(t)),this.clearNames(t)},a.prototype.clearTag=function(){this.tag=void 0},a})(),EE=/&/g,CE=/^\s*\/\/.*$/gm;function t1(a,t){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(s){return"".concat(t," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=t1(r.children,t)),r})}function TE(a){var t,r,s,l=Ss,c=l.options,d=c===void 0?Ss:c,p=l.plugins,m=p===void 0?qc:p,g=function(x,E,_){return _.startsWith(r)&&_.endsWith(r)&&_.replaceAll(r,"").length>0?".".concat(t):x},b=m.slice();b.push(function(x){x.type===Uc&&x.value.includes("&")&&(x.props[0]=x.props[0].replace(EE,r).replace(s,g))}),d.prefix&&b.push(Kk),b.push(Fk);var w=function(x,E,_,F){E===void 0&&(E=""),_===void 0&&(_=""),F===void 0&&(F="&"),t=F,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var V=x.replace(CE,""),ee=Yk(_||E?"".concat(_," ").concat(E," { ").concat(V," }"):V);d.namespace&&(ee=t1(ee,d.namespace));var W=[];return jc(ee,Zk(b.concat(Xk(function(L){return W.push(L)})))),W};return w.hash=m.length?m.reduce(function(x,E){return E.name||Vo(15),hs(x,E.name)},Fb).toString():"",w}var NE=new e1,eh=TE(),n1=Ra.createContext({shouldForwardProp:void 0,styleSheet:NE,stylis:eh});n1.Consumer;Ra.createContext(void 0);function Iv(){return k.useContext(n1)}var OE=(function(){function a(t,r){var s=this;this.inject=function(l,c){c===void 0&&(c=eh);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,$h(this,function(){throw Vo(12,String(s.name))})}return a.prototype.getName=function(t){return t===void 0&&(t=eh),this.name+t.hash},a})(),jE=function(a){return a>="A"&&a<="Z"};function Hv(a){for(var t="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;jE(s)?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var a1=function(a){return a==null||a===!1||a===""},r1=function(a){var t,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!a1(c)&&(Array.isArray(c)&&c.isCss||xs(c)?s.push("".concat(Hv(l),":"),c,";"):$o(c)?s.push.apply(s,Oc(Oc(["".concat(l," {")],r1(c),!1),["}"],!1)):s.push("".concat(Hv(l),": ").concat((t=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in Qk||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function Ci(a,t,r,s){if(a1(a))return[];if(Uh(a))return[".".concat(a.styledComponentId)];if(xs(a)){if(!xs(c=a)||c.prototype&&c.prototype.isReactComponent||!t)return[a];var l=a(t);return Ci(l,t,r,s)}var c;return a instanceof OE?r?(a.inject(r,s),[a.getName(s)]):[a]:$o(a)?r1(a):Array.isArray(a)?Array.prototype.concat.apply(qc,a.map(function(d){return Ci(d,t,r,s)})):[a.toString()]}function AE(a){for(var t=0;t<a.length;t+=1){var r=a[t];if(xs(r)&&!Uh(r))return!1}return!0}var _E=Zb(Vc),DE=(function(){function a(t,r,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&AE(t),this.componentId=r,this.baseHash=hs(_E,r),this.baseStyle=s,e1.registerId(r)}return a.prototype.generateAndInjectStyles=function(t,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Si(l,this.staticRulesId);else{var c=Bv(Ci(this.rules,t,r,s)),d=Wf(hs(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var p=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,p)}l=Si(l,d),this.staticRulesId=d}else{for(var m=hs(this.baseHash,s.hash),g="",b=0;b<this.rules.length;b++){var w=this.rules[b];if(typeof w=="string")g+=w;else if(w){var x=Bv(Ci(w,t,r,s));m=hs(m,x+b),g+=x}}if(g){var E=Wf(m>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(g,".".concat(E),void 0,this.componentId)),l=Si(l,E)}}return l},a})(),i1=Ra.createContext(void 0);i1.Consumer;var Nf={};function ME(a,t,r){var s=Uh(a),l=a,c=!Tf(a),d=t.attrs,p=d===void 0?qc:d,m=t.componentId,g=m===void 0?(function(Y,me){var be=typeof Y!="string"?"sc":Dv(Y);Nf[be]=(Nf[be]||0)+1;var B="".concat(be,"-").concat(aE(Vc+be+Nf[be]));return me?"".concat(me,"-").concat(B):B})(t.displayName,t.parentComponentId):m,b=t.displayName,w=b===void 0?(function(Y){return Tf(Y)?"styled.".concat(Y):"Styled(".concat(rE(Y),")")})(a):b,x=t.displayName&&t.componentId?"".concat(Dv(t.displayName),"-").concat(t.componentId):t.componentId||g,E=s&&l.attrs?l.attrs.concat(p).filter(Boolean):p,_=t.shouldForwardProp;if(s&&l.shouldForwardProp){var F=l.shouldForwardProp;if(t.shouldForwardProp){var V=t.shouldForwardProp;_=function(Y,me){return F(Y,me)&&V(Y,me)}}else _=F}var ee=new DE(r,x,s?l.componentStyle:void 0);function W(Y,me){return(function(be,B,he){var se=be.attrs,ye=be.componentStyle,$e=be.defaultProps,De=be.foldedComponentIds,We=be.styledComponentId,it=be.target,Ke=Ra.useContext(i1),P=Iv(),de=be.shouldForwardProp||P.shouldForwardProp,pe=Jk(B,Ke,$e)||Ss,Le=(function(X,ue,we){for(var Ie,Ye=Qn(Qn({},ue),{className:void 0,theme:we}),Et=0;Et<X.length;Et+=1){var zt=xs(Ie=X[Et])?Ie(Ye):Ie;for(var Lt in zt)Ye[Lt]=Lt==="className"?Si(Ye[Lt],zt[Lt]):Lt==="style"?Qn(Qn({},Ye[Lt]),zt[Lt]):zt[Lt]}return ue.className&&(Ye.className=Si(Ye.className,ue.className)),Ye})(se,B,pe),Q=Le.as||it,v={};for(var C in Le)Le[C]===void 0||C[0]==="$"||C==="as"||C==="theme"&&Le.theme===pe||(C==="forwardedAs"?v.as=Le.forwardedAs:de&&!de(C,Q)||(v[C]=Le[C]));var A=(function(X,ue){var we=Iv(),Ie=X.generateAndInjectStyles(ue,we.styleSheet,we.stylis);return Ie})(ye,Le),D=Si(De,We);return A&&(D+=" "+A),Le.className&&(D+=" "+Le.className),v[Tf(Q)&&!Pb.has(Q)?"class":"className"]=D,he&&(v.ref=he),k.createElement(Q,v)})(L,Y,me)}W.displayName=w;var L=Ra.forwardRef(W);return L.attrs=E,L.componentStyle=ee,L.displayName=w,L.shouldForwardProp=_,L.foldedComponentIds=s?Si(l.foldedComponentIds,l.styledComponentId):"",L.styledComponentId=x,L.target=s?l.target:a,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(Y){this._foldedDefaultProps=s?(function(me){for(var be=[],B=1;B<arguments.length;B++)be[B-1]=arguments[B];for(var he=0,se=be;he<se.length;he++)Jf(me,se[he],!0);return me})({},l.defaultProps,Y):Y}}),$h(L,function(){return".".concat(L.styledComponentId)}),c&&Wb(L,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function Vv(a,t){for(var r=[a[0]],s=0,l=t.length;s<l;s+=1)r.push(t[s],a[s+1]);return r}var qv=function(a){return Object.assign(a,{isCss:!0})};function Ih(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(xs(a)||$o(a))return qv(Ci(Vv(qc,Oc([a],t,!0))));var s=a;return t.length===0&&s.length===1&&typeof s[0]=="string"?Ci(s):qv(Ci(Vv(s,t)))}function th(a,t,r){if(r===void 0&&(r=Ss),!t)throw Vo(1,t);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(t,r,Ih.apply(void 0,Oc([l],c,!1)))};return s.attrs=function(l){return th(a,t,Qn(Qn({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return th(a,t,Qn(Qn({},r),l))},s}var s1=function(a){return th(ME,a)},In=s1;Pb.forEach(function(a){In[a]=s1(a)});function Ti(){return Ti=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Ti.apply(null,arguments)}function RE(a,t){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(t.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Hh(a,t){if(a==null)return{};var r,s,l=RE(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function zE(a){var t=a?.createRoot,r=new WeakMap;function s(d){var p=r.get(d);if(p)return p;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var p=r.get(d);p&&(p.remove(),r.delete(d))}if(t){var c=new WeakMap;return{mount:function(p,m){var g,b=s(m),w=c.get(b);return w||(w=t(b),c.set(b,w)),w.render(p),(g=b.firstElementChild)!==null&&g!==void 0?g:b},unmount:function(p){var m=s(p),g=c.get(m);g&&(g.unmount(),c.delete(m)),l(p)}}}return{mount:function(p,m){var g=s(m);if("render"in ev&&typeof Xr.render=="function"){var b=Xr.render(p,g);return b||g}throw new Error("ReactDOM.render is not available")},unmount:function(p){var m=s(p);if("unmountComponentAtNode"in ev&&typeof Xr.unmountComponentAtNode=="function")Xr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(p)}}}function LE(a){var t=a.children,r=a.rendered;return k.useEffect(function(){r()}),t}function BE(){var a=k.useRef(!1);return k.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Xr.flushSync(r)}):r()}}}var o1=k.createContext({start:null,end:null,path:null});function UE(a){var t=a.children,r=k.useState(null),s=qn(r,2),l=s[0],c=s[1],d=k.useState(null),p=qn(d,2),m=p[0],g=p[1],b=k.useState(null),w=qn(b,2),x=w[0],E=w[1],_="x"in a.start?a.start:l,F="x"in a.end?a.end:m,V=BE();return k.useEffect(function(){var ee=typeof a.start=="function"&&a.start(function(L){V.apply(function(){c(L)})}),W=typeof a.end=="function"&&a.end(function(L){V.apply(function(){g(L)})});return function(){ee&&ee(),W&&W()}},[]),k.useEffect(function(){_&&F&&a.path(_,F).then(function(ee){V.apply(function(){E(ee)})})},[_,F]),k.createElement(o1.Provider,{value:{start:_,end:F,path:x}},t)}function l1(){return k.useContext(o1)}var Gv,Yv,$E=In.svg(Gv||(Gv=zn([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),IE=In.path(Yv||(Yv=zn([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function c1(a){var t=l1(),r=t.path;return r?k.createElement($E,{"data-testid":"connection"},k.createElement(IE,{styles:a.styles,d:r})):null}function HE(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=VE(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function VE(a,t){if(a){if(typeof a=="string")return Pv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pv(a,t):void 0}}function Pv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function qE(a){for(var t=new a.constructor(a.type),r=t;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=HE(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=t[d];typeof p!="function"&&Object.defineProperty(t,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return t}var GE="__reactContainer$";function YE(a){for(var t=a;t;){if(t._reactRootContainer||Object.keys(t).some(function(r){return r.startsWith(GE)}))return t;t=t.parentElement}}function Fv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Zv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fv(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Fv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function u1(a,t){return{start:function(s){var l=Zv({},t(s));function c(p){var m=Zv({},t(p)),g=m.x-l.x,b=m.y-l.y;l=m,a(g,b)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function PE(a,t){k.useEffect(function(){var r=function(c){if(!t){var d=YE(c.target),p=k.version.startsWith("16")?document:d;p&&(c.stopPropagation(),p.dispatchEvent(qE(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,t])}var Xv,FE=In.input(Xv||(Xv=zn([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function nh(a){var t=k.useState(a.data.value),r=qn(t,2),s=r[0],l=r[1],c=k.useRef(null);return PE(c),k.useEffect(function(){l(a.data.value)},[a.data.value]),k.createElement(FE,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(p){var m=a.data.type==="number"?+p.target.value:p.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var ah="rgba(110,136,255,0.8)",d1="#ffd92c",qa=24,yr=6,f1="#96b38a",h1=180,ZE=Object.freeze({__proto__:null,$nodecolor:ah,$nodecolorselected:d1,$socketsize:qa,$socketmargin:yr,$socketcolor:f1,$nodewidth:h1}),XE=["init","unmount"];function Vh(a){var t=a.init,r=a.unmount,s=Hh(a,XE),l=k.useRef(null);return k.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),k.useEffect(function(){l.current&&t(l.current)}),k.createElement("span",Ti({},s,{ref:l}))}var KE=["name","emit","payload"];function rh(a){var t=a.name,r=a.emit,s=a.payload,l=Hh(a,KE);return k.createElement(Vh,Ti({},l,{className:t,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var QE=["name","emit","nodeId","side","socketKey","payload"];function ih(a){var t=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,p=Hh(a,QE);return k.createElement(Vh,Ti({},p,{className:t,init:function(g){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:g,payload:d}})},unmount:function(g){r({type:"unmount",data:{element:g}})}}))}var Kv,Qv,p1=In.div(Kv||(Kv=zn([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),ah,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(h1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},ah,function(a){return a.selected&&Ih(Qv||(Qv=zn([`
        background: `,`;
        border-color: #e3c000;
    `])),d1)},qa/2+yr,qa/2+yr,yr,qa,qa+2*yr,yr,qa/2+yr,function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function Of(a){a.sort(function(t,r){var s,l,c=((s=t[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function m1(a){var t=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,p=c.label,m=c.width,g=c.height;return Of(t),Of(r),Of(s),k.createElement(p1,{selected:l,width:m,height:g,styles:a.styles,"data-testid":"node"},k.createElement("div",{className:"title","data-testid":"title"},p),r.map(function(b){var w=qn(b,2),x=w[0],E=w[1];return E&&k.createElement("div",{className:"output",key:x,"data-testid":"output-".concat(x)},k.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),k.createElement(ih,{name:"output-socket",side:"output",socketKey:x,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(b){var w=qn(b,2),x=w[0],E=w[1];return E?k.createElement(rh,{key:x,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(x)}):null}),t.map(function(b){var w=qn(b,2),x=w[0],E=w[1];return E&&k.createElement("div",{className:"input",key:x,"data-testid":"input-".concat(x)},k.createElement(ih,{name:"input-socket",side:"input",socketKey:x,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&k.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&k.createElement(rh,{key:x,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var Wv,Jv,g1=In.div(Wv||(Wv=zn([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),qa/2,qa,qa,f1),WE=In.div(Jv||(Jv=zn([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(qa+yr*2)/2,yr,g1);function y1(a){return k.createElement(WE,null,k.createElement(g1,{title:a.data.name}))}function JE(a){var t=typeof a?.socketPositionWatcher>"u"?Dk():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){t.attach(m)},render:function(m,g){if(m.data.type==="node"){var b=g.parentScope(),w=s?s(m.data):m1;return w&&k.createElement(w,{data:m.data.payload,emit:function(me){return void b.emit(me)}})}else if(m.data.type==="connection"){var x=l?l(m.data):c1,E=m.data.payload,_=E.sourceOutput,F=E.targetInput,V=E.source,ee=E.target;return x&&k.createElement(UE,{start:m.data.start||function(Y){return t.listen(V,"output",_,Y)},end:m.data.end||function(Y){return t.listen(ee,"input",F,Y)},path:(function(){var Y=rt(ke.mark(function me(be,B){var he,se,ye,$e,De;return ke.wrap(function(We){for(;;)switch(We.prev=We.next){case 0:return We.next=1,g.emit({type:"connectionpath",data:{payload:E,points:[be,B]}});case 1:if(he=We.sent,he){We.next=2;break}return We.abrupt("return","");case 2:if(se=he.data,ye=se.path,$e=se.points,De=.3,!(!ye&&$e.length!==2)){We.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(ye){We.next=4;break}return We.abrupt("return",E.isLoop?Ck($e,De,120):Ek($e,De));case 4:return We.abrupt("return",ye);case 5:case"end":return We.stop()}},me)}));return function(me,be){return Y.apply(this,arguments)}})()},k.createElement(x,{data:m.data.payload}))}else if(m.data.type==="socket"){var W=c?c(m.data):y1;return W&&m.data.payload&&k.createElement(W,{data:m.data.payload})}else if(m.data.type==="control"){var L=d&&m.data.payload?d(m.data):m.data.payload instanceof Xt.InputControl?nh:null;return L&&k.createElement(L,{data:m.data.payload})}}}}var eC=Object.freeze({__proto__:null,vars:ZE,setup:JE,Connection:c1,useConnection:l1,Control:nh,InputControl:nh,Node:m1,NodeStyles:p1,RefControl:rh,RefSocket:ih,Socket:y1});function v1(a,t){var r=k.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},t)};return k.useEffect(function(){return s},[]),[l,s]}var tC="rgba(110,136,255,0.8)",nC="rgba(130, 153, 255, 0.8)",aC="rgba(69, 103, 255, 0.8)",sc="5px",sh=120,e0,qh=In.div(e0||(e0=zn([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),aC,tC,sc,sc,sc,sc,nC),t0,n0,a0,b1=In(qh)(t0||(t0=zn([`
    `,`
`])),function(a){return a.hasSubitems&&Ih(n0||(n0=zn([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),w1=In.div(a0||(a0=zn([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),sh);function S1(a){var t,r,s,l,c=k.useState(!1),d=qn(c,2),p=d[0],m=d[1],g=k.useCallback(function(){m(!1)},[m]),b=v1(g,a.delay),w=qn(b,2),x=w[0],E=w[1],_=((t=a.components)===null||t===void 0||(r=t.item)===null||r===void 0?void 0:r.call(t,a.data))||b1,F=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||w1;return k.createElement(_,{onClick:function(ee){ee.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(ee){ee.stopPropagation()},onPointerOver:function(){E(),m(!0)},onPointerLeave:function(){x&&x()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&p&&k.createElement(F,null,a.data.subitems.map(function(V){return k.createElement(S1,{key:V.key,data:V,delay:a.delay,hide:a.hide,components:a.components},V.label)})))}var r0,x1=In.input(r0||(r0=zn([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function rC(a){var t=a.component||x1;return k.createElement(t,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var i0,k1=In.div(i0||(i0=zn([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),sh,sh/2);function iC(a){var t,r,s,l,c,d,p=v1(a.onHide,a.delay),m=qn(p,2),g=m[0],b=m[1],w=k.useState(""),x=qn(w,2),E=x[0],_=x[1],F=new RegExp(E,"i"),V=a.items.filter(function(L){return L.label.match(F)}),ee=((t=a.components)===null||t===void 0||(r=t.main)===null||r===void 0?void 0:r.call(t))||k1,W=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||qh;return k.createElement(ee,{onMouseOver:function(){b()},onMouseLeave:function(){g?.()},onWheel:function(Y){Y.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&k.createElement(W,null,k.createElement(rC,{value:E,onChange:_,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),V.map(function(L){return k.createElement(S1,{key:L.key,data:L,delay:a.delay,hide:a.onHide,components:a.components},L.label)}))}function sC(a){var t=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return k.createElement(iC,{items:s.data.items,delay:t,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var oC=Object.freeze({__proto__:null,setup:sC,Item:b1,Subitems:w1,Menu:k1,Search:x1,Common:qh}),oc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lC=typeof oc=="object"&&oc&&oc.Object===Object&&oc,cC=typeof self=="object"&&self&&self.Object===Object&&self;lC||cC||Function("return this")();function uC(){const a=k.useRef(!1);return k.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),k.useCallback(()=>a.current,[])}var s0={width:void 0,height:void 0};function dC(a){const{ref:t,box:r="content-box"}=a,[{width:s,height:l},c]=k.useState(s0),d=uC(),p=k.useRef({...s0}),m=k.useRef(void 0);return m.current=a.onResize,k.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([b])=>{const w=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",x=o0(b,w,"inlineSize"),E=o0(b,w,"blockSize");if(p.current.width!==x||p.current.height!==E){const F={width:x,height:E};p.current.width=x,p.current.height=E,m.current?m.current(F):d()&&c(F)}});return g.observe(t.current,{box:r}),()=>{g.disconnect()}},[r,t,d]),{width:s,height:l}}function o0(a,t,r){return a[t]?Array.isArray(a[t])?a[t][0][r]:a[t][r]:t==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Ga(a){return"".concat(a,"px")}var l0,fC=In.div(l0||(l0=zn([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function hC(a){return k.createElement(fC,{style:{left:Ga(a.left),top:Ga(a.top),width:Ga(a.width),height:Ga(a.height)},"data-testid":"minimap-node"})}var c0,pC=In.div(c0||(c0=zn([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function mC(a){var t=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=u1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return k.createElement(pC,{onPointerDown:s.start,style:{left:Ga(t(a.left)),top:Ga(t(a.top)),width:Ga(t(a.width)),height:Ga(t(a.height))},"data-testid":"minimap-viewport"})}var u0,gC=In.div(u0||(u0=zn([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function yC(a){var t,r=k.useRef(null),s=dC({ref:r}),l=s.width,c=l===void 0?0:l,d=((t=r.current)===null||t===void 0?void 0:t.clientWidth)||c,p=k.useCallback(function(m){return m*d},[d]);return k.createElement(gC,{size:a.size,style:{width:Ga(a.size*a.ratio),height:Ga(a.size)},onPointerDown:function(g){g.stopPropagation(),g.preventDefault()},onDoubleClick:function(g){if(g.stopPropagation(),g.preventDefault(),!!r.current){var b=r.current.getBoundingClientRect(),w=(g.clientX-b.left)/(a.size*a.ratio),x=(g.clientY-b.top)/(a.size*a.ratio);a.point(w,x)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,g){return k.createElement(hC,{key:g,left:p(m.left),top:p(m.top),width:p(m.width),height:p(m.height)})}):null,k.createElement(mC,Ti({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function vC(a){return{render:function(r){if(r.data.type==="minimap")return k.createElement(yC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var bC=Object.freeze({__proto__:null,setup:vC}),d0,Ro=20,wC=In.div(d0||(d0=zn([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),Ro,Ro,function(a){return a.selected?"#ffd92c":"steelblue"},Ro);function SC(a){var t=u1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return k.createElement(wC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),t.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-Ro/2,"px"),left:"".concat(s-Ro/2,"px")},"data-testid":"pin"})}function xC(a){function t(r,s){return k.createElement(k.Fragment,null,r.pins.map(function(l){return k.createElement(SC,Ti({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,p){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,p)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Ho);if(c.type==="reroute-pins")return t(c.data,function(){return d.area.pointer})}}}var kC=Object.freeze({__proto__:null,setup:xC}),jf=Object.freeze({__proto__:null,classic:eC,contextMenu:oC,minimap:bC,reroute:kC});function EC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=CC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function CC(a,t){if(a){if(typeof a=="string")return f0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f0(a,t):void 0}}function f0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function h0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function lc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?h0(Object(r),!0).forEach(function(s){Ue(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):h0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function TC(a,t,r){return t=Ht(t),Za(a,E1()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function E1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E1=function(){return!!a})()}function NC(a,t,r,s){var l=Uo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var OC=(function(a){function t(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return pt(this,t),r=TC(this,t,["react-render"]),Ue(r,"presets",[]),r.renderer=zE({createRoot:d?.createRoot}),r.addPipe(function(p){if(!p||Rn(p)!=="object"||!("type"in p))return p;if(p.type==="unmount")r.unmount(p.data.element);else if(p.type==="render"){if("filled"in p.data&&p.data.filled)return p;if(r.mount(p.data.element,p))return lc(lc({},p),{},{data:lc(lc({},p.data),{},{filled:!0})})}return p}),r}return Wn(t,a),mt(t,[{key:"setParent",value:function(s){var l=this;NC(t,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=EC(this.presets),p;try{for(d.s();!(p=d.n()).done;){var m=p.value,g=m.render(l,this);if(g){var b=k.createElement(LE,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},g);return this.renderer.mount(b,s),!0}}}catch(w){d.e(w)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(Es);function jC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}function AC(a,t,r){if(C1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var l=new(a.bind.apply(a,s));return r&&Bo(l,r.prototype),l}function oh(a){var t=typeof Map=="function"?new Map:void 0;return oh=function(s){if(s===null||!jC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,l)}function l(){return AC(s,arguments,Ht(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Bo(l,s)},oh(a)}function _C(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=DC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function DC(a,t){if(a){if(typeof a=="string")return p0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p0(a,t):void 0}}function p0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}var MC=(function(){function a(t){pt(this,a),Ue(this,"setups",new Map),this.editor=t}return mt(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var t=rt(ke.mark(function s(l){var c=this,d,p,m,g,b,w,x,E,_,F,V,ee;return ke.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(d=this.setups.get(l),d){L.next=3;break}throw new Error("node is not initialized");case 3:return p=d.inputs(),m=this.editor.getConnections().filter(function(Y){return Y.target===l&&p.includes(Y.targetInput)}),g={},L.next=8,Promise.all(m.map((function(){var Y=rt(ke.mark(function me(be){return ke.wrap(function(he){for(;;)switch(he.prev=he.next){case 0:return he.t0=be,he.next=3,c.fetch(be.source);case 3:return he.t1=he.sent,he.abrupt("return",{c:he.t0,sourceData:he.t1});case 5:case"end":return he.stop()}},me)}));return function(me){return Y.apply(this,arguments)}})()));case 8:b=L.sent,w=_C(b);try{for(w.s();!(x=w.n()).done;)E=x.value,_=E.c,F=E.sourceData,V=g[_.targetInput]?g[_.targetInput]:[],ee=g,ee[_.targetInput]=[].concat(Cs(V),[F[_.sourceOutput]])}catch(Y){w.e(Y)}finally{w.f()}return L.abrupt("return",g);case 12:case"end":return L.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var t=rt(ke.mark(function s(l){var c=this,d,p,m,g;return ke.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(d=this.setups.get(l),d){w.next=3;break}throw new Error("node is not initialized");case 3:return p=d.outputs(),w.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=w.sent,g=Object.keys(m),p.every(function(x){return g.includes(x)})){w.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(p.join('", "'),'". Got "').concat(g.join('", "'),'"'));case 10:return w.abrupt("return",m);case 11:case"end":return w.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()}])})(),RC=(function(){function a(t){pt(this,a),Ue(this,"cache",new Map),this.onDelete=t}return mt(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function zC(a,t,r){return t=Ht(t),Za(a,T1()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}var m0=(function(a){function t(){return pt(this,t),zC(this,t,["cancelled"])}return Wn(t,a),mt(t)})(oh(Error));function LC(){var a=!1;function t(m){if(a)throw new m0;return m}for(var r,s=new Promise(function(m,g){r=g,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var p=c.reduce(function(m,g){var b=m.then(g).then(t);return b},s);return p.cancel=function(){a||r(new m0),a=!0},p}function BC(a,t,r){return t=Ht(t),Za(a,N1()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function N1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N1=function(){return!!a})()}function UC(a,t,r,s){var l=Uo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var $C=(function(a){function t(r){var s;return pt(this,t),s=BC(this,t,["dataflow-engine"]),Ue(s,"cache",new RC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return Wn(t,a),mt(t,[{key:"setParent",value:function(s){UC(t,"setParent",this)([s]),this.editor=this.parentScope(Jr),this.dataflow=new MC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=rt(ke.mark(function m(g){var b,w;return ke.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(b=l.cache.get(s.id),!b){E.next=3;break}return E.abrupt("return",b);case 3:return w=LC(function(){return g()},function(_){return s.data(_)}),l.cache.add(s.id,w),E.abrupt("return",w);case 6:case"end":return E.stop()}},m)}));function p(m){return d.apply(this,arguments)}return p})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(p){return p.source===s&&d.includes(p.sourceOutput)}).forEach(function(p){l.reset(p.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=rt(ke.mark(function l(c){var d;return ke.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Rn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=rt(ke.mark(function l(c){var d;return ke.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Rn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(Es);const IC=!1,Gh=(...a)=>IC,g0=Xt.Socket.canConnect;Xt.Socket.canConnect=function(a,t){return Gh(`[Socket Check] ${a.name} <-> ${t.name}`),g0&&g0(a,t)||a.name==="any"||t.name==="any"?!0:a.name===t.name};Xt.Socket.prototype.canConnectTo=function(a){return Gh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Xt.Socket.canConnect(this,a)};const O1={boolean:new Xt.Socket("boolean"),number:new Xt.Socket("number"),object:new Xt.Socket("object"),lightInfo:new Xt.Socket("light_info"),any:new Xt.Socket("any")};Object.values(O1).forEach(a=>{a.canConnectTo=function(t){return Gh(`[Socket Instance Direct] ${this.name} -> ${t.name}`),this.name===t.name||this.name==="any"||t.name==="any"}});let ko=null;function Gc(){if(ko!==null)return ko;const t=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return t?ko=t[1]:ko="",ko}function kn(a){const t=Gc(),r=a.startsWith("/")?a:"/"+a;return t+r}Gc();const xi="t2app-pin",Dc="t2app-pin-remember",j1=(a,t)=>{try{return a.getItem(t)}catch{return null}},cc=(a,t,r)=>{try{return a.setItem(t,r),!0}catch{return!1}},zo=(a,t)=>{try{return a.removeItem(t),!0}catch{return!1}},Mc=()=>j1(localStorage,Dc)==="true",ms=()=>{const t=Mc()?localStorage:sessionStorage;return(j1(t,xi)||"").trim()||null},A1=()=>{zo(sessionStorage,xi),zo(localStorage,xi),zo(localStorage,Dc),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},y0=(a,{remember:t}={})=>{const r=(a||"").toString().trim(),s=typeof t=="boolean"?t:Mc();if(!r){A1(),typeof t=="boolean"&&cc(localStorage,Dc,t?"true":"false");return}cc(localStorage,Dc,s?"true":"false"),s?(cc(localStorage,xi,r),zo(sessionStorage,xi)):(cc(sessionStorage,xi,r),zo(localStorage,xi)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},fs=async(a,t={})=>{const r=typeof a=="string"?kn(a):a;return fetch(r,t)},dn=async(a,t={})=>{const r=ms(),s=typeof a=="string"?kn(a):a;if(!r)return fetch(s,t);const l=new Headers(t.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...t,headers:l})},v0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function HC(){const[a,t]=k.useState([]),[r,s]=k.useState(!1),[l,c]=k.useState(null),[d,p]=k.useState(null),[m,g]=k.useState(5e3),[b,w]=k.useState(null),x=k.useCallback(async()=>{s(!0),c(null);try{const ee=await fs("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!ee.ok){const L=await ee.json();throw new Error(L.error||`Scan failed (${ee.status})`)}const W=await ee.json();t(W.devices||[]),p(new Date)}catch(ee){console.error("[Discovery] Scan error:",ee),c(ee.message)}finally{s(!1)}},[m]),E=ee=>v0[ee]||v0.generic,_=ee=>ee?new Date(ee).toLocaleTimeString():"",V=(ee=>{const W={};for(const L of ee){const Y=L.type||"generic";W[Y]||(W[Y]=[]),W[Y].push(L)}return W})(a);return h.jsxs("div",{className:"discovery-panel",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),h.jsxs("select",{value:m,onChange:ee=>g(Number(ee.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[h.jsx("option",{value:3e3,children:"3 seconds"}),h.jsx("option",{value:5e3,children:"5 seconds"}),h.jsx("option",{value:1e4,children:"10 seconds"}),h.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),h.jsx("button",{onClick:x,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):h.jsx(h.Fragment,{children:" Scan Network"})})]}),l&&h.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&h.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&h.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[h.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),h.jsx("div",{children:"No devices found on your network."}),h.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(V).map(([ee,W])=>{const L=E(ee);return h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[h.jsx("span",{style:{fontSize:"16px"},children:L.icon}),h.jsx("span",{style:{color:L.color,fontSize:"13px",fontWeight:500},children:L.label}),h.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:W.length})]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:W.map(Y=>h.jsxs("div",{style:{background:b===Y.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>w(b===Y.id?null:Y.id),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:Y.name}),h.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[Y.ip,":",Y.port]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[Y.configured?h.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):h.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),h.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:b===Y.id?"":""})]})]}),b===Y.id&&h.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[h.jsx("span",{children:"Host:"}),h.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:Y.host||"N/A"}),h.jsx("span",{children:"Source:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:Y.source==="mdns"?"mDNS/Bonjour":Y.source==="udp"?"UDP Broadcast":Y.source}),h.jsx("span",{children:"Discovered:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:_(Y.discoveredAt)}),Y.capabilities&&Y.capabilities.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Capabilities:"}),h.jsx("span",{style:{color:"#5fb3b3"},children:Y.capabilities.join(", ")})]}),Y.model&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Model:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:Y.model})]})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:me=>{me.stopPropagation(),window.open(`http://${Y.ip}:${Y.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),h.jsx("button",{onClick:me=>{me.stopPropagation(),navigator.clipboard.writeText(Y.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},Y.id))})]},ee)}),h.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const Eo={tron:{name:"Tron (Default)",description:"Cyan neon on dark - the classic T2 look",colors:{primary:"#5fb3b3",background:"#1e2428",surface:"#2a3238",surfaceLight:"#343d44",text:"#c5cdd3",textMuted:"#8a959e",success:"#5faa7d",warning:"#d4a054",error:"#c75f5f",borderOpacity:25}},midnight:{name:"Midnight Purple",description:"Deep purple with pink accents",colors:{primary:"#b388ff",background:"#1a1a2e",surface:"#25253a",surfaceLight:"#32324a",text:"#e0d6ff",textMuted:"#9990b8",success:"#69f0ae",warning:"#ffab40",error:"#ff5252",borderOpacity:30}},forest:{name:"Forest",description:"Natural greens with earth tones",colors:{primary:"#81c784",background:"#1b2420",surface:"#263530",surfaceLight:"#324540",text:"#d5e8d4",textMuted:"#8aa888",success:"#4caf50",warning:"#ffb74d",error:"#e57373",borderOpacity:25}},ember:{name:"Ember",description:"Warm orange and red firelight",colors:{primary:"#ff7043",background:"#1f1510",surface:"#2d2018",surfaceLight:"#3d2d22",text:"#ffe0cc",textMuted:"#b08060",success:"#aed581",warning:"#ffc107",error:"#ff5722",borderOpacity:30}},arctic:{name:"Arctic",description:"Cool blues with icy highlights",colors:{primary:"#4fc3f7",background:"#0d1b2a",surface:"#1b2838",surfaceLight:"#283848",text:"#e3f2fd",textMuted:"#78a5c8",success:"#26a69a",warning:"#ffca28",error:"#ef5350",borderOpacity:25}},monochrome:{name:"Monochrome",description:"Clean grayscale - easy on the eyes",colors:{primary:"#90a4ae",background:"#1a1a1a",surface:"#252525",surfaceLight:"#333333",text:"#e0e0e0",textMuted:"#888888",success:"#a5d6a7",warning:"#ffe082",error:"#ef9a9a",borderOpacity:20}}},_1={"Core Colors":{icon:"",settings:[{key:"primary",label:"Primary Accent",type:"color",default:"#5fb3b3"},{key:"background",label:"Background",type:"color",default:"#1e2428"},{key:"surface",label:"Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"}]},"Status Colors":{icon:"",settings:[{key:"success",label:"Success",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning",type:"color",default:"#d4a054"},{key:"error",label:"Error",type:"color",default:"#c75f5f"}]},"Socket Colors":{icon:"",settings:[{key:"socketBoolean",label:"Boolean",type:"color",default:"#10b981",cssVar:"socket-boolean-color"},{key:"socketNumber",label:"Number",type:"color",default:"#3b82f6",cssVar:"socket-number-color"},{key:"socketString",label:"String",type:"color",default:"#f59e0b",cssVar:"socket-string-color"},{key:"socketHsv",label:"HSV/Color",type:"color",default:"#8b5cf6",cssVar:"socket-hsv-color"},{key:"socketObject",label:"Object",type:"color",default:"#6366f1",cssVar:"socket-object-color"},{key:"socketLight",label:"Light/Device",type:"color",default:"#eab308",cssVar:"socket-light-color"}]},"Node Glow Colors":{icon:"",settings:[{key:"nodeHa",label:"Home Assistant",type:"color",default:"#00d4ff",cssVar:"node-ha-glow"},{key:"nodeLogic",label:"Logic",type:"color",default:"#8b5cf6",cssVar:"node-logic-glow"},{key:"nodeTimer",label:"Timer/Event",type:"color",default:"#f59e0b",cssVar:"node-timer-glow"},{key:"nodeColor",label:"Color",type:"color",default:"#ec4899",cssVar:"node-color-glow"},{key:"nodeUtility",label:"Utility",type:"color",default:"#14b8a6",cssVar:"node-utility-glow"},{key:"nodeDevice",label:"Direct Device",type:"color",default:"#22c55e",cssVar:"node-device-glow"}]},Editor:{icon:"",settings:[{key:"borderOpacity",label:"Border Opacity",type:"range",min:0,max:100,default:25},{key:"glowIntensity",label:"Glow Intensity",type:"range",min:0,max:100,default:50},{key:"gridOpacity",label:"Grid Opacity",type:"range",min:0,max:100,default:30}]}},Af=Object.values(_1).flatMap(a=>a.settings),VC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"ElevenLabs TTS",icon:"",description:"AI voice generation for TTS Announcement node",settings:[{key:"ELEVENLABS_API_KEY",label:"API Key",placeholder:"Your ElevenLabs API key",type:"password",isSecret:!0,hint:"Get one at elevenlabs.io"},{key:"PUBLIC_URL",label:"Public URL",placeholder:"http://192.168.1.x:3000",type:"text",hint:"URL reachable by your speakers (for audio playback)"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],b0=a=>{try{const t=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},w0=a=>{try{const t=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function qC({isOpen:a,onClose:t}){const[r,s]=k.useState({}),[l,c]=k.useState(!0),[d,p]=k.useState(!1),[m,g]=k.useState(null),[b,w]=k.useState(null),[x,E]=k.useState({}),[_,F]=k.useState({}),[V,ee]=k.useState({}),[W,L]=k.useState({}),[Y,me]=k.useState([]),[be,B]=k.useState(!1),he=k.useRef(!1),se=k.useRef(null),[ye,$e]=k.useState(""),[De,We]=k.useState(()=>Mc()),[it,Ke]=k.useState(()=>!!ms()),[P,de]=k.useState(!1),[pe,Le]=k.useState(()=>{try{const O=localStorage.getItem("t2theme-overrides"),j=O?JSON.parse(O):{},K={};return Af.forEach(re=>{K[re.key]=re.default}),{...K,...j}}catch{const O={};return Af.forEach(j=>{O[j.key]=j.default}),O}}),[Q,v]=k.useState(!1),[C,A]=k.useState(()=>{try{return localStorage.getItem("t2theme-preset")||"tron"}catch{return"tron"}}),[D,X]=k.useState(()=>{try{const O=localStorage.getItem("t2-custom-themes");return O?JSON.parse(O):{}}catch{return{}}}),[ue,we]=k.useState(!1),[Ie,Ye]=k.useState(""),Et={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[zt,Lt]=k.useState(()=>{try{const O=localStorage.getItem("t2category-overrides"),j=O?JSON.parse(O):{},K={};for(const[re,Me]of Object.entries(Et))K[re]={...Me,...j[re]||{}};return K}catch{return{...Et}}}),[Jt,ot]=k.useState(!1),Bt={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},bn={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[Hn,Xe]=k.useState(()=>{try{const O=localStorage.getItem("t2socket-colors"),j=O?JSON.parse(O):{},K={};for(const[re,Me]of Object.entries(Bt))K[re]={...Me,...j[re]||{}};return K}catch{return{...Bt}}}),[q,ne]=k.useState(!1),[J,je]=k.useState(!1),[Ee,R]=k.useState(null),[T,U]=k.useState(!1),[ce,le]=k.useState(!1);k.useEffect(()=>{a?(Se(),F({Security:!0,"Home Assistant":!0}),ee({}),We(Mc()),Ke(!!ms()),$e(""),he.current||(he.current=!0,(async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),B(!0);try{const O=await dn("/api/lights/ha/");if(console.log("[SettingsModal] Response status:",O.status),!O.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",O.status),B(!1);return}const j=await O.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),B(!1);return}const K=j.filter(re=>(re.id||re.entity_id||"").includes("sensor.")).map(re=>({id:(re.id||re.entity_id||"").replace("ha_",""),name:re.name||re.friendly_name||re.id||re.entity_id})).sort((re,Me)=>re.name.localeCompare(Me.name));console.log("[SettingsModal] Filtered sensors:",K.length),me(K),B(!1)}catch(O){console.warn("[SettingsModal] Error fetching HA sensors:",O),B(!1)}})())):he.current=!1},[a]);const Ae=async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),B(!0);try{const O=await dn("/api/lights/ha/");if(!O.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",O.status),B(!1);return}const j=await O.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),B(!1);return}const K=j.filter(re=>(re.id||re.entity_id||"").includes("sensor.")).map(re=>({id:(re.id||re.entity_id||"").replace("ha_",""),name:re.name||re.friendly_name||re.id||re.entity_id})).sort((re,Me)=>re.name.localeCompare(Me.name));console.log("[SettingsModal] Filtered sensors:",K.length),me(K),B(!1)}catch(O){console.warn("[SettingsModal] Error fetching HA sensors:",O),B(!1)}},Se=async()=>{c(!0),g(null);try{const O=await dn("/api/settings");if(!O.ok)throw new Error("Failed to fetch settings");const K=(await O.json()).settings||{};s(K);try{const re=await dn("/api/config");if(re.ok){const Me=await re.json();if(Me.success){U(Me.isAddon||!1),le(!0);const Qt=!K.LOCATION_CITY,On=!K.LOCATION_LATITUDE,ze=!K.LOCATION_LONGITUDE,Ut=!K.LOCATION_TIMEZONE;(Qt||On||ze||Ut)&&(s(dt=>({...dt,...Qt&&Me.locationName?{LOCATION_CITY:Me.locationName}:{},...On&&Me.latitude?{LOCATION_LATITUDE:String(Me.latitude)}:{},...ze&&Me.longitude?{LOCATION_LONGITUDE:String(Me.longitude)}:{},...Ut&&Me.timezone?{LOCATION_TIMEZONE:Me.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(re){console.log("[Settings] Could not fetch HA config for location auto-fill:",re.message)}}catch(O){g("Failed to load settings: "+O.message)}finally{c(!1)}},He=async()=>{p(!0),g(null),w(null);try{const O=await dn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!O.ok){const j=await O.json();throw new Error(j.error||"Failed to save settings")}w("Settings saved! Some changes may require a server restart."),setTimeout(()=>w(null),5e3)}catch(O){g("Failed to save: "+O.message)}finally{p(!1)}},Ve=(O,j)=>{s(K=>({...K,[O]:j}))},et=async()=>{const O=r.LOCATION_CITY;if(!O||O.trim().length<2){R("Please enter a city name first");return}je(!0),R(null);try{const j=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(O)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!j.ok)throw new Error("Geocoding service unavailable");const K=await j.json();if(K.length===0){R(`Could not find "${O}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const re=K[0],Me=parseFloat(re.lat).toFixed(4),Qt=parseFloat(re.lon).toFixed(4),On=re.address?[re.address.city||re.address.town||re.address.village||re.name,re.address.state,re.address.country].filter(Boolean).join(", "):re.display_name.split(",").slice(0,3).join(",");let ze="UTC";const Ut=re.address?.state?.toLowerCase()||"",dt=re.address?.country?.toLowerCase()||"";if(dt.includes("portugal"))ze="Europe/Lisbon";else if(dt.includes("spain"))ze="Europe/Madrid";else if(dt.includes("france"))ze="Europe/Paris";else if(dt.includes("germany"))ze="Europe/Berlin";else if(dt.includes("italy"))ze="Europe/Rome";else if(dt.includes("united kingdom")||dt.includes("ireland"))ze="Europe/London";else if(dt.includes("netherlands"))ze="Europe/Amsterdam";else if(dt.includes("belgium"))ze="Europe/Brussels";else if(dt.includes("australia"))ze="Australia/Sydney";else if(dt.includes("japan"))ze="Asia/Tokyo";else if(dt.includes("china"))ze="Asia/Shanghai";else if(dt.includes("india"))ze="Asia/Kolkata";else if(dt.includes("brazil"))ze="America/Sao_Paulo";else if(dt.includes("canada"))Ut.includes("british columbia")?ze="America/Vancouver":Ut.includes("alberta")?ze="America/Edmonton":Ut.includes("saskatchewan")?ze="America/Regina":Ut.includes("manitoba")?ze="America/Winnipeg":Ut.includes("ontario")?ze="America/Toronto":Ut.includes("quebec")?ze="America/Montreal":ze="America/Toronto";else if(dt.includes("united states")||dt.includes("usa"))Ut.includes("hawaii")?ze="Pacific/Honolulu":Ut.includes("alaska")?ze="America/Anchorage":["california","nevada","oregon","washington"].some(st=>Ut.includes(st))?ze="America/Los_Angeles":["arizona"].some(st=>Ut.includes(st))?ze="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(st=>Ut.includes(st))?ze="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(st=>Ut.includes(st))?ze="America/Chicago":ze="America/New_York";else{const st=parseFloat(Qt);st>=-125&&st<-115?ze="America/Los_Angeles":st>=-115&&st<-102?ze="America/Denver":st>=-102&&st<-87?ze="America/Chicago":st>=-87&&st<-67?ze="America/New_York":st>=-10&&st<3?ze="Europe/London":st>=3&&st<15?ze="Europe/Paris":st>=15&&st<30&&(ze="Europe/Berlin")}s(st=>({...st,LOCATION_CITY:On,LOCATION_LATITUDE:Me,LOCATION_LONGITUDE:Qt,LOCATION_TIMEZONE:ze})),w(`Found: ${On} (${Me}, ${Qt})`),setTimeout(()=>w(null),5e3)}catch(j){R("Search failed: "+j.message)}finally{je(!1)}},_e=(O,j)=>{const K=Af.find(Me=>Me.key===O),re=document.documentElement;if(O==="borderOpacity")re.style.setProperty("--node-border-opacity",j/100);else if(O==="glowIntensity")re.style.setProperty("--node-glow-intensity",j/100);else if(O==="gridOpacity")re.style.setProperty("--editor-grid-opacity",j/100);else if(K?.cssVar){const Me=K.cssVar;if(re.style.setProperty(`--${Me}`,j),typeof j=="string"&&j.startsWith("#")){const Qt=parseInt(j.slice(1,3),16),On=parseInt(j.slice(3,5),16),ze=parseInt(j.slice(5,7),16);re.style.setProperty(`--${Me.replace("-color","-rgb").replace("-glow","-rgb")}`,`${Qt}, ${On}, ${ze}`);const Ut=Math.max(0,Qt-40),dt=Math.max(0,On-40),st=Math.max(0,ze-40);re.style.setProperty(`--${Me.replace("-color","-dark").replace("-glow","-dark")}`,`rgb(${Ut}, ${dt}, ${st})`);const Xa=Math.min(255,Qt+40),ua=Math.min(255,On+40),I=Math.min(255,ze+40);re.style.setProperty(`--${Me.replace("-color","-border").replace("-glow","-border")}`,`rgb(${Xa}, ${ua}, ${I})`)}}else if(re.style.setProperty(`--theme-${O}`,j),typeof j=="string"&&j.startsWith("#")){const Me=parseInt(j.slice(1,3),16),Qt=parseInt(j.slice(3,5),16),On=parseInt(j.slice(5,7),16);re.style.setProperty(`--theme-${O}-rgb`,`${Me}, ${Qt}, ${On}`)}},Ce=(O,j)=>{Le(re=>({...re,[O]:j})),v(!0),A("custom"),_e(O,j);const K={...pe,[O]:j};localStorage.setItem("t2theme-overrides",JSON.stringify(K)),localStorage.setItem("t2theme-preset","custom")},oe=O=>{const j=Eo[O];j&&(Object.entries(j.colors).forEach(([K,re])=>{_e(K,re)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",O),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),Le(j.colors),A(O),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},At=O=>{const j=D[O];j&&(Object.entries(j.colors).forEach(([K,re])=>{_e(K,re)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",`custom:${O}`),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),Le(j.colors),A(`custom:${O}`),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},Pe=()=>{if(!Ie.trim()){g("Please enter a theme name");return}const O=Ie.trim().toLowerCase().replace(/\s+/g,"-");if(Eo[O]){g("Cannot use a built-in theme name");return}const j={name:Ie.trim(),colors:{...pe}},K={...D,[O]:j};X(K);try{localStorage.setItem("t2-custom-themes",JSON.stringify(K)),localStorage.setItem("t2theme-preset",`custom:${O}`),A(`custom:${O}`),we(!1),Ye(""),v(!1),w(`Custom theme "${Ie.trim()}" saved!`),setTimeout(()=>w(null),3e3)}catch(re){g("Failed to save custom theme: "+re.message)}},Nt=(O,j)=>{j.stopPropagation();const K=D[O]?.name||O;if(!window.confirm(`Delete custom theme "${K}"?`))return;const{[O]:re,...Me}=D;X(Me);try{localStorage.setItem("t2-custom-themes",JSON.stringify(Me)),C===`custom:${O}`&&oe("tron"),w(`Theme "${K}" deleted`),setTimeout(()=>w(null),3e3)}catch(Qt){g("Failed to delete theme: "+Qt.message)}},Kt=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(pe)),localStorage.setItem("t2theme-preset","custom"),A("custom"),w("Theme saved! Refresh the page to apply changes."),v(!1),setTimeout(()=>w(null),5e3)}catch(O){g("Failed to save theme: "+O.message)}},lt=()=>{oe("tron"),localStorage.removeItem("t2theme-overrides"),localStorage.removeItem("t2theme-preset"),v(!1),setTimeout(()=>w(null),5e3)},_t=(O,j,K)=>{Lt(re=>({...re,[O]:{...re[O],[j]:K}})),ot(!0)},qt=O=>{const j=parseInt(O.slice(1,3),16),K=parseInt(O.slice(3,5),16),re=parseInt(O.slice(5,7),16);return`${j}, ${K}, ${re}`},En={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},Vt=O=>{const j=document.documentElement;for(const[K,re]of Object.entries(O)){const Me=En[K];Me&&(j.style.setProperty(`--node-${Me}-color`,re.accent),j.style.setProperty(`--node-${Me}-color-rgb`,qt(re.accent)),re.background&&j.style.setProperty(`--node-${Me}-bg`,re.background))}},Cn=()=>{try{const O={};for(const[j,K]of Object.entries(zt)){const re=Et[j],Me={};K.accent!==re.accent&&(Me.accent=K.accent),K.background!==re.background&&(Me.background=K.background),Object.keys(Me).length>0&&(O[j]=Me)}Object.keys(O).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(O)):localStorage.removeItem("t2category-overrides"),Vt(zt),w("Category colors applied!"),ot(!1),setTimeout(()=>w(null),3e3)}catch(O){g("Failed to save category colors: "+O.message)}},La=()=>{Lt({...Et}),localStorage.removeItem("t2category-overrides"),Vt(Et),w("Category colors reset to defaults!"),ot(!1),setTimeout(()=>w(null),3e3)},Ba=(O,j)=>{Xe(K=>({...K,[O]:{...K[O],color:j}})),ne(!0)},Gn=(O,j=20)=>{const K=parseInt(O.slice(1),16),re=Math.max(0,(K>>16)-Math.round(255*j/100)),Me=Math.max(0,(K>>8&255)-Math.round(255*j/100)),Qt=Math.max(0,(K&255)-Math.round(255*j/100));return`#${(1<<24|re<<16|Me<<8|Qt).toString(16).slice(1)}`},Oi=(O,j=20)=>{const K=parseInt(O.slice(1),16),re=Math.min(255,(K>>16)+Math.round(255*j/100)),Me=Math.min(255,(K>>8&255)+Math.round(255*j/100)),Qt=Math.min(255,(K&255)+Math.round(255*j/100));return`#${(1<<24|re<<16|Me<<8|Qt).toString(16).slice(1)}`},vr=O=>{const j=document.documentElement;for(const[K,re]of Object.entries(O)){const Me=bn[K];Me&&(j.style.setProperty(`--socket-${Me}-color`,re.color),j.style.setProperty(`--socket-${Me}-dark`,Gn(re.color,15)),j.style.setProperty(`--socket-${Me}-border`,Oi(re.color,20)),j.style.setProperty(`--socket-${Me}-rgb`,qt(re.color)))}},ti=()=>{try{const O={};for(const[j,K]of Object.entries(Hn)){const re=Bt[j];K.color!==re.color&&(O[j]={color:K.color})}Object.keys(O).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(O)):localStorage.removeItem("t2socket-colors"),vr(Hn),w("Socket colors applied!"),ne(!1),setTimeout(()=>w(null),3e3)}catch(O){g("Failed to save socket colors: "+O.message)}},en=()=>{Xe({...Bt}),localStorage.removeItem("t2socket-colors"),vr(Bt),w("Socket colors reset to defaults!"),ne(!1),setTimeout(()=>w(null),3e3)},sn=O=>{F(j=>({...j,[O]:!j[O]})),O==="Forecast Panel"&&!_[O]&&Y.length===0&&Ae()},Jn=O=>{E(j=>({...j,[O]:!j[O]}))},wn=async O=>{L(j=>({...j,[O]:!0})),ee(j=>({...j,[O]:null}));try{const K=await(await dn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:O,settings:r})})).json();ee(re=>({...re,[O]:{success:K.success,message:K.message||(K.success?"Connection successful!":"Connection failed"),details:K.details}}))}catch(j){ee(K=>({...K,[O]:{success:!1,message:"Test failed: "+j.message}}))}finally{L(j=>({...j,[O]:!1}))}},ni=()=>{const O={version:"1.0",timestamp:new Date().toISOString(),settings:r},j=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),K=URL.createObjectURL(j),re=document.createElement("a");re.href=K,re.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(re),re.click(),document.body.removeChild(re),URL.revokeObjectURL(K),w("Settings exported successfully!"),setTimeout(()=>w(null),3e3)},ea=O=>{const j=O.target.files?.[0];if(!j)return;const K=new FileReader;K.onload=re=>{try{const Me=JSON.parse(re.target.result);if(!Me.settings||typeof Me.settings!="object")throw new Error("Invalid backup file format");s(Qt=>({...Qt,...Me.settings})),w(`Imported ${Object.keys(Me.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>w(null),5e3)}catch(Me){g("Failed to import backup: "+Me.message)}},K.readAsText(j),O.target.value=""};return a?Oh.createPortal(h.jsx("div",{className:"settings-modal-overlay",onClick:t,children:h.jsxs("div",{className:"settings-modal",onClick:O=>O.stopPropagation(),children:[h.jsxs("div",{className:"settings-header",children:[h.jsx("h2",{children:" Settings & API Keys"}),h.jsx("button",{className:"settings-close-btn",onClick:t,children:""})]}),h.jsx("div",{className:"settings-content",children:l?h.jsx("div",{className:"settings-loading",children:"Loading settings..."}):h.jsxs(h.Fragment,{children:[m&&h.jsx("div",{className:"settings-error",children:m}),b&&h.jsx("div",{className:"settings-success",children:b}),h.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[h.jsxs("span",{children:[_.Security?"":""," Security (This Device)"]}),it&&h.jsxs("span",{style:{fontSize:"10px",color:De?"#00c896":"#ffaa00"},children:[" ",De?"REMEMBERED":"SESSION"]})]}),_.Security&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:["App PIN",h.jsx("button",{className:"settings-show-btn",onClick:()=>de(O=>!O),type:"button",children:P?" Hide":" Show"})]}),h.jsx("input",{type:P?"text":"password",className:"settings-input",value:ye,onChange:O=>$e(O.target.value),placeholder:it?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[h.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[h.jsx("input",{type:"checkbox",checked:De,onChange:O=>{const j=O.target.checked;We(j);const K=ms();K&&y0(K,{remember:j})}}),"Remember PIN on this device"]}),h.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const O=ye.trim();O&&(y0(O,{remember:De}),Ke(!0),$e(""),(async()=>{try{const j=await dn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:O}})});if(!j.ok){const K=await j.text();throw new Error(K||`HTTP ${j.status}`)}w("PIN saved (server + this device)."),setTimeout(()=>w(null),3e3)}catch{w("PIN saved on this device. Server PIN update failed."),setTimeout(()=>w(null),4e3)}finally{Se()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!ye.trim(),children:" Save PIN"}),h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{A1(),Ke(!1),$e(""),We(!1),w("PIN cleared."),setTimeout(()=>w(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!it,children:"Clear"})]})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:it?`PIN is saved (${De?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),h.jsxs("div",{className:"settings-backup-section",children:[h.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),h.jsxs("div",{className:"settings-backup-buttons",children:[h.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:ni,children:" Export Backup"}),h.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>se.current?.click(),children:" Import Backup"}),h.jsx("input",{ref:se,type:"file",accept:".json",style:{display:"none"},onChange:ea})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[h.jsxs("span",{children:[_.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&h.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),_.Performance&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",h.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),h.jsx("br",{}),h.jsx("br",{}),"Performance Mode disables:",h.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),h.jsx("li",{children:"Complex glow shadows"}),h.jsx("li",{children:"Infinite pulse/glow animations"}),h.jsx("li",{children:"Transition effects on nodes"})]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),h.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),h.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[h.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:O=>{window.setPerformanceMode?.(O.target.checked),F(j=>({...j}))},style:{opacity:0,width:0,height:0}}),h.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:h.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),h.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsx("div",{className:"settings-category-header",onClick:()=>sn("Discovery"),children:h.jsxs("span",{children:[_.Discovery?"":""," Network Device Discovery"]})}),_.Discovery&&h.jsx("div",{className:"settings-category-content",children:h.jsx(HC,{})})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn("Theme"),children:[h.jsxs("span",{children:[_.Theme?"":""," Node Theme Settings"]}),Q&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),_.Theme&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(95, 179, 179, 0.08)",borderRadius:"8px",border:"1px solid rgba(95, 179, 179, 0.2)"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginBottom:"8px",display:"block"},children:" Built-in Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(Eo).map(([O,j])=>h.jsxs("button",{onClick:()=>oe(O),style:{padding:"8px 14px",borderRadius:"6px",border:C===O?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:C===O?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:C===O?"600":"400",boxShadow:C===O?`0 0 12px ${j.colors.primary}40`:"none"},title:j.description,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name]},O))}),Object.keys(D).length>0&&h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginTop:"16px",marginBottom:"8px",display:"block"},children:" Your Saved Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(D).map(([O,j])=>h.jsxs("button",{onClick:()=>At(O),style:{padding:"8px 14px",borderRadius:"6px",border:C===`custom:${O}`?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:C===`custom:${O}`?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:C===`custom:${O}`?"600":"400",boxShadow:C===`custom:${O}`?`0 0 12px ${j.colors.primary}40`:"none",position:"relative",paddingRight:"28px"},title:`Custom theme: ${j.name}`,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name,h.jsx("span",{onClick:K=>Nt(O,K),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",opacity:.6,cursor:"pointer"},title:"Delete this theme",children:""})]},O))})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"10px",color:"#8a959e",fontStyle:"italic"},children:C.startsWith("custom:")&&D[C.replace("custom:","")]?`Custom theme: ${D[C.replace("custom:","")].name}`:C!=="custom"&&Eo[C]?Eo[C].description:"Custom theme - you've modified individual colors"})]}),h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Click a preset to apply instantly, or customize individual colors below."}),Object.entries(_1).map(([O,j])=>h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:pe.primary||"#5fb3b3",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:j.icon}),h.jsx("span",{children:O})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"},children:j.settings.map(K=>h.jsxs("div",{className:"settings-field",style:{marginBottom:"4px"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"9px",marginBottom:"4px"},children:K.label}),K.type==="color"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"color",value:pe[K.key]||K.default,onChange:re=>Ce(K.key,re.target.value),style:{width:"32px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("input",{type:"text",value:pe[K.key]||K.default,onChange:re=>Ce(K.key,re.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"9px",padding:"4px"}})]}):K.type==="range"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"range",min:K.min,max:K.max,value:pe[K.key]??K.default,onChange:re=>Ce(K.key,parseInt(re.target.value)),style:{flex:1}}),h.jsxs("span",{style:{minWidth:"28px",textAlign:"right",color:"#c5cdd3",fontSize:"10px"},children:[pe[K.key]??K.default,"%"]})]}):null]},K.key))})]},O)),h.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:pe.background||"#1e2428",borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(pe.borderOpacity||25)/100})`},children:[h.jsx("div",{style:{fontSize:"10px",color:pe.textMuted||"#8a959e",marginBottom:"8px"},children:"PREVIEW"}),h.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[h.jsx("div",{style:{padding:"8px 12px",background:pe.surface,color:pe.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),h.jsx("div",{style:{padding:"8px 12px",background:pe.surfaceLight,color:pe.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),h.jsx("span",{style:{color:pe.primary},children:"Primary"}),h.jsx("span",{style:{color:pe.success},children:"Success"}),h.jsx("span",{style:{color:pe.warning},children:"Warning"}),h.jsx("span",{style:{color:pe.error},children:"Error"})]})]}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:lt,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:()=>we(!0),style:{background:"rgba(95, 140, 220, 0.15)",borderColor:"rgba(95, 140, 220, 0.5)",color:"#5f8adc"},title:"Save current colors as a named custom theme",children:" Save as Custom Theme"}),h.jsx("button",{className:"settings-btn-small",onClick:Kt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Apply Changes"})]}),ue&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:h.jsxs("div",{style:{background:"var(--theme-surface, #2a3238)",padding:"24px",borderRadius:"12px",border:"1px solid rgba(95, 179, 179, 0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",minWidth:"300px"},children:[h.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--theme-text, #c5cdd3)",fontSize:"16px"},children:" Save Custom Theme"}),h.jsx("p",{style:{margin:"0 0 16px 0",color:"var(--theme-textMuted, #8a959e)",fontSize:"12px"},children:"Give your theme a name to save it for later use."}),h.jsx("input",{type:"text",value:Ie,onChange:O=>Ye(O.target.value),placeholder:"My Awesome Theme",style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.3)",background:"var(--theme-background, #1e2428)",color:"var(--theme-text, #c5cdd3)",fontSize:"14px",marginBottom:"16px",boxSizing:"border-box"},autoFocus:!0,onKeyDown:O=>{O.key==="Enter"&&Pe(),O.key==="Escape"&&(we(!1),Ye(""))}}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[h.jsx("button",{onClick:()=>{we(!1),Ye("")},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"var(--theme-text, #c5cdd3)",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),h.jsx("button",{onClick:Pe,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.5)",background:"rgba(95, 179, 179, 0.2)",color:"#5fb3b3",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:" Save Theme"})]})]})})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn("CategoryColors"),children:[h.jsxs("span",{children:[_.CategoryColors?"":""," Category Accent Colors"]}),Jt&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),_.CategoryColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(zt).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:j.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${j.accent}55`},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.accent,onChange:K=>_t(O,"accent",K.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.background||"#0a0f14",onChange:K=>_t(O,"background",K.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),h.jsx("div",{style:{flex:1,minWidth:0},children:h.jsxs("div",{style:{fontSize:"11px",color:j.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[j.icon," ",O]})})]},O))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:La,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:Cn,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn("SocketColors"),children:[h.jsxs("span",{children:[_.SocketColors?"":""," Socket Colors"]}),q&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),_.SocketColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),h.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[h.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:""})," Preview Node"]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(Hn).slice(0,3).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${b0(j.color)})`,border:`2px solid ${w0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}}),h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:O})]},O))}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(Hn).slice(3).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:O}),h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${b0(j.color)})`,border:`2px solid ${w0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}})]},O))})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Hn).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${j.color}55`},children:[h.jsx("input",{type:"color",value:j.color,onChange:K=>Ba(O,K.target.value),title:`${O} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsxs("div",{style:{fontSize:"12px",color:j.color,fontWeight:"600"},children:[j.icon," ",O]}),h.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:j.description})]})]},O))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:en,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:ti,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),VC.map(O=>h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>sn(O.category),children:[h.jsxs("span",{children:[_[O.category]?"":"",O.icon," ",O.category]}),O.testable&&_[O.category]&&h.jsx("button",{className:`settings-test-btn ${V[O.testable]?.success?"success":V[O.testable]?.success===!1?"error":""}`,onClick:j=>{j.stopPropagation(),wn(O.testable)},disabled:W[O.testable],children:W[O.testable]?" Testing...":" Test Connection"})]}),_[O.category]&&h.jsxs("div",{className:"settings-category-content",children:[V[O.testable]&&h.jsxs("div",{className:`settings-test-result ${V[O.testable].success?"success":"error"}`,children:[V[O.testable].success?"":""," ",V[O.testable].message,V[O.testable].details&&h.jsx("div",{className:"settings-test-details",children:V[O.testable].details})]}),O.category==="Location"&&h.jsxs("div",{className:"settings-location-search",children:[ce&&T&&h.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),h.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:j=>Ve("LOCATION_CITY",j.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:j=>{j.key==="Enter"&&et()}}),h.jsx("button",{className:"settings-test-btn",onClick:et,disabled:J,style:{whiteSpace:"nowrap"},children:J?" Searching...":" Search City"})]}),Ee&&h.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",Ee]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Latitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:j=>Ve("LOCATION_LATITUDE",j.target.value),placeholder:"32.7767"})]}),h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Longitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:j=>Ve("LOCATION_LONGITUDE",j.target.value),placeholder:"-96.7970"})]})]}),h.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[h.jsx("label",{className:"settings-label",children:"Timezone"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:j=>Ve("LOCATION_TIMEZONE",j.target.value),placeholder:"America/Chicago"}),h.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),O.category!=="Location"&&O.settings.map(j=>h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:[j.label,j.isSecret&&h.jsx("button",{className:"settings-show-btn",onClick:()=>Jn(j.key),type:"button",children:x[j.key]?" Hide":" Show"})]}),j.type==="select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:K=>Ve(j.key,K.target.value),children:[h.jsx("option",{value:"",children:"Select..."}),j.options.map(K=>h.jsx("option",{value:K,children:K},K))]}):j.type==="sensor-select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:K=>Ve(j.key,K.target.value),disabled:be,children:[h.jsx("option",{value:"",children:be?"Loading sensors...":"None (disabled)"}),Y.map(K=>h.jsx("option",{value:K.id,children:K.name},K.id))]}):h.jsx("input",{type:j.isSecret&&!x[j.key]?"password":"text",className:"settings-input",value:r[j.key]||"",onChange:K=>Ve(j.key,K.target.value),placeholder:j.placeholder}),h.jsx("span",{className:"settings-key-hint",children:j.key})]},j.key))]})]},O.category))]})}),h.jsxs("div",{className:"settings-footer",children:[h.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:t,children:"Cancel"}),h.jsx("button",{className:"settings-btn settings-btn-primary",onClick:He,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const GC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function YC({isOpen:a,onClose:t}){if(k.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,t]),!a)return null;const r=s=>{s.target===s.currentTarget&&t()};return Oh.createPortal(h.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:h.jsxs("div",{className:"shortcuts-modal",children:[h.jsxs("div",{className:"shortcuts-modal-header",children:[h.jsx("h2",{children:" Keyboard Shortcuts"}),h.jsx("button",{className:"shortcuts-close-btn",onClick:t,children:" Close"})]}),h.jsx("div",{className:"shortcuts-modal-body",children:GC.map((s,l)=>h.jsxs("div",{className:"shortcuts-section",children:[h.jsx("h3",{children:s.category}),h.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>h.jsxs("div",{className:"shortcut-row",children:[h.jsx("div",{className:"shortcut-keys",children:c.keys.map((p,m)=>h.jsxs(Ra.Fragment,{children:[h.jsx("kbd",{children:p}),m<c.keys.length-1&&h.jsx("span",{className:"key-separator",children:"+"})]},m))}),h.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),h.jsx("div",{className:"shortcuts-modal-footer",children:h.jsxs("p",{children:["Press ",h.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function PC({isExpanded:a,onToggle:t}){const[r,s]=k.useState([]),[l,c]=k.useState([]),[d,p]=k.useState(!0),[m,g]=k.useState(!1),[b,w]=k.useState(null),[x,E]=k.useState(!1),[_,F]=k.useState(null),[V,ee]=k.useState(null),[W,L]=k.useState({username:"",password:"",name:""}),[Y,me]=k.useState({username:"",password:""}),[be,B]=k.useState(""),[he,se]=k.useState(5e3),[ye,$e]=k.useState(null),De=k.useRef(null),[We,it]=k.useState({});k.useEffect(()=>(Ke(),()=>{De.current&&clearInterval(De.current)}),[]),k.useEffect(()=>(De.current&&clearInterval(De.current),a&&r.length>0&&he>0&&(De.current=setInterval(()=>{it(A=>{const D={...A};return r.forEach(X=>{D[X.ip]=Date.now()}),D})},he)),()=>{De.current&&clearInterval(De.current)}),[a,r,he]);const Ke=async()=>{try{p(!0);const A=await fs("/api/cameras");if(A.ok){const D=await A.json();s(D.cameras||[]),D.defaultCredentials&&me(X=>({...X,username:D.defaultCredentials.username||""}))}}catch{w("Failed to load cameras")}finally{p(!1)}},P=async()=>{g(!0),w(null);try{const A=await fs("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(A.ok){const D=await A.json();if(D.found&&D.found.length>0){const X=r.map(we=>we.ip),ue=D.found.filter(we=>!X.includes(we.ip));c(ue),window.T2Toast&&(ue.length>0?window.T2Toast.success(`Found ${ue.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${D.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{w("Discovery failed")}finally{g(!1)}},de=async()=>{try{await fs("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{w("Failed to save credentials")}},pe=async(A,D,X)=>{try{await fs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:A,name:D||`Camera ${A.split(".").pop()}`,username:X?.username||Y.username,password:X?.password||Y.password})}),c(ue=>ue.filter(we=>we.ip!==A)),F(null),B(""),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${A} added!`)}catch{w("Failed to add camera")}},Le=async A=>{try{await fetch(`/api/cameras/${A}`,{method:"DELETE"}),await Ke(),ye===A&&$e(null)}catch{w("Failed to remove camera")}},Q=async()=>{if(V)try{await fs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:V,name:W.name,username:W.username,password:W.password})}),ee(null),it(A=>({...A,[V]:Date.now()})),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${V} updated!`)}catch{w("Failed to update camera")}},v={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},C=A=>{const D=We[A]||Date.now();return`/api/cameras/snapshot/${A}?t=${D}`};return h.jsxs("div",{style:v.container,children:[h.jsxs("div",{style:v.header,onClick:t,children:[h.jsxs("div",{style:v.title,children:[h.jsx("span",{style:v.icon,children:""}),h.jsx("span",{children:"Cameras"}),r.length>0&&h.jsx("span",{style:v.badge,children:r.length})]}),h.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&h.jsxs("div",{style:v.content,children:[h.jsxs("div",{style:v.toolbar,children:[h.jsx("button",{style:{...v.btn,...m?v.btnActive:{}},onClick:P,disabled:m,children:m?" Scanning...":" Discover"}),h.jsx("button",{style:{...v.btn,...x?v.btnActive:{}},onClick:()=>E(!x),children:" Settings"}),h.jsxs("select",{style:v.refreshSelect,value:he,onChange:A=>se(Number(A.target.value)),title:"Refresh interval",children:[h.jsx("option",{value:0,children:"Manual"}),h.jsx("option",{value:2e3,children:"2s"}),h.jsx("option",{value:5e3,children:"5s"}),h.jsx("option",{value:1e4,children:"10s"}),h.jsx("option",{value:3e4,children:"30s"})]})]}),x&&h.jsxs("div",{style:v.settings,children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Select Camera to Configure"}),h.jsxs("select",{style:{...v.input,cursor:"pointer"},value:V||"",onChange:A=>{const D=A.target.value;if(!D){ee(null),L({username:"",password:"",name:""});return}const X=r.find(ue=>ue.ip===D);X?(ee(D),L({name:X.name||"",username:X.username||"",password:""})):(ee(D),L({name:`Camera ${D.split(".").pop()}`,username:Y.username||"",password:Y.password||""}))},children:[h.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&h.jsx("optgroup",{label:" Configured Cameras",children:r.map(A=>h.jsxs("option",{value:A.ip,children:[A.name," (",A.ip,")"]},A.ip))}),l.length>0&&h.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(A=>h.jsxs("option",{value:A.ip,children:[A.ip," (Ports: ",A.ports.join(", "),")"]},A.ip))})]})]}),V&&h.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Camera Name"}),h.jsx("input",{type:"text",style:v.input,value:W.name,onChange:A=>L(D=>({...D,name:A.target.value})),placeholder:"Front Door"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Username"}),h.jsx("input",{type:"text",style:v.input,value:W.username,onChange:A=>L(D=>({...D,username:A.target.value})),placeholder:"admin"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsxs("label",{style:v.label,children:["Password ",r.find(A=>A.ip===V)?"(leave blank to keep current)":""]}),h.jsx("input",{type:"password",style:v.input,value:W.password,onChange:A=>L(D=>({...D,password:A.target.value})),placeholder:""})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:h.jsx("button",{style:{...v.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(D=>D.ip===V)?pe(V,W.name,W):Q()},children:r.find(A=>A.ip===V)?" Save Changes":" Add Camera"})})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",style:{...v.input,flex:1},value:Y.username,onChange:A=>me(D=>({...D,username:A.target.value})),placeholder:"Username"}),h.jsx("input",{type:"password",style:{...v.input,flex:1},value:Y.password,onChange:A=>me(D=>({...D,password:A.target.value})),placeholder:"Password"}),h.jsx("button",{style:v.btn,onClick:de,title:"Save as default",children:""})]})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",id:"addCameraIp",style:{...v.input,flex:1},placeholder:"192.168.1.100",onKeyDown:A=>{if(A.key==="Enter"&&A.target.value){const D=A.target.value;!l.find(X=>X.ip===D)&&!r.find(X=>X.ip===D)&&c(X=>[...X,{ip:D,ports:["manual"]}]),ee(D),L({name:`Camera ${D.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),A.target.value=""}}}),h.jsx("button",{style:v.btn,onClick:()=>{const A=document.getElementById("addCameraIp"),D=A?.value;D&&(!l.find(X=>X.ip===D)&&!r.find(X=>X.ip===D)&&c(X=>[...X,{ip:D,ports:["manual"]}]),ee(D),L({name:`Camera ${D.split(".").pop()}`,username:Y.username||"",password:Y.password||""}),A.value="")},children:"Configure"})]})]})]}),b&&h.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",b]}),d?h.jsx("div",{style:v.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?h.jsxs("div",{style:v.emptyState,children:[h.jsx("p",{children:"No cameras configured"}),h.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):h.jsx("div",{style:v.grid,children:r.map(A=>h.jsxs("div",{style:{...v.cameraCard,...ye===A.ip?v.cameraCardSelected:{}},onClick:()=>$e(A.ip),children:[h.jsx("img",{src:C(A.ip),alt:A.name,style:v.cameraImage,onError:D=>{D.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),h.jsxs("div",{style:v.cameraInfo,children:[h.jsx("span",{style:v.cameraName,title:A.ip,children:A.name}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{style:{...v.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:D=>{D.stopPropagation(),E(!0),ee(A.ip),L({name:A.name||"",username:A.username||"",password:""})},title:"Edit credentials",children:""}),h.jsx("button",{style:v.deleteBtn,onClick:D=>{D.stopPropagation(),Le(A.ip)},title:"Remove camera",children:""})]})]})]},A.ip))})]}),ye&&h.jsxs("div",{style:v.fullView,onClick:()=>$e(null),children:[h.jsx("img",{src:C(ye),alt:"Camera feed",style:v.fullImage}),h.jsx("button",{style:v.closeBtn,onClick:()=>$e(null),children:" Close"}),h.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(A=>A.ip===ye)?.name||ye})]})]})}const Pa=Object.create(null);Pa.open="0";Pa.close="1";Pa.ping="2";Pa.pong="3";Pa.message="4";Pa.upgrade="5";Pa.noop="6";const Sc=Object.create(null);Object.keys(Pa).forEach(a=>{Sc[Pa[a]]=a});const lh={type:"error",data:"parser error"},D1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",M1=typeof ArrayBuffer=="function",R1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Yh=({type:a,data:t},r,s)=>D1&&t instanceof Blob?r?s(t):S0(t,s):M1&&(t instanceof ArrayBuffer||R1(t))?r?s(t):S0(new Blob([t]),s):s(Pa[a]+(t||"")),S0=(a,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(a)};function x0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let _f;function FC(a,t){if(D1&&a.data instanceof Blob)return a.data.arrayBuffer().then(x0).then(t);if(M1&&(a.data instanceof ArrayBuffer||R1(a.data)))return t(x0(a.data));Yh(a,!1,r=>{_f||(_f=new TextEncoder),t(_f.encode(r))})}const k0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Oo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<k0.length;a++)Oo[k0.charCodeAt(a)]=a;const ZC=a=>{let t=a.length*.75,r=a.length,s,l=0,c,d,p,m;a[a.length-1]==="="&&(t--,a[a.length-2]==="="&&t--);const g=new ArrayBuffer(t),b=new Uint8Array(g);for(s=0;s<r;s+=4)c=Oo[a.charCodeAt(s)],d=Oo[a.charCodeAt(s+1)],p=Oo[a.charCodeAt(s+2)],m=Oo[a.charCodeAt(s+3)],b[l++]=c<<2|d>>4,b[l++]=(d&15)<<4|p>>2,b[l++]=(p&3)<<6|m&63;return g},XC=typeof ArrayBuffer=="function",Ph=(a,t)=>{if(typeof a!="string")return{type:"message",data:z1(a,t)};const r=a.charAt(0);return r==="b"?{type:"message",data:KC(a.substring(1),t)}:Sc[r]?a.length>1?{type:Sc[r],data:a.substring(1)}:{type:Sc[r]}:lh},KC=(a,t)=>{if(XC){const r=ZC(a);return z1(r,t)}else return{base64:!0,data:a}},z1=(a,t)=>{switch(t){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},L1="",QC=(a,t)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Yh(c,!1,p=>{s[d]=p,++l===r&&t(s.join(L1))})})},WC=(a,t)=>{const r=a.split(L1),s=[];for(let l=0;l<r.length;l++){const c=Ph(r[l],t);if(s.push(c),c.type==="error")break}return s};function JC(){return new TransformStream({transform(a,t){FC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(r)})}})}let Df;function uc(a){return a.reduce((t,r)=>t+r.length,0)}function dc(a,t){if(a[0].length===t)return a.shift();const r=new Uint8Array(t);let s=0;for(let l=0;l<t;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function eT(a,t){Df||(Df=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,p){for(r.push(d);;){if(s===0){if(uc(r)<1)break;const m=dc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(uc(r)<2)break;const m=dc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(uc(r)<8)break;const m=dc(r,8),g=new DataView(m.buffer,m.byteOffset,m.length),b=g.getUint32(0);if(b>Math.pow(2,21)-1){p.enqueue(lh);break}l=b*Math.pow(2,32)+g.getUint32(4),s=3}else{if(uc(r)<l)break;const m=dc(r,l);p.enqueue(Ph(c?m:Df.decode(m),t)),s=0}if(l===0||l>a){p.enqueue(lh);break}}}})}const B1=4;function vn(a){if(a)return tT(a)}function tT(a){for(var t in vn.prototype)a[t]=vn.prototype[t];return a}vn.prototype.on=vn.prototype.addEventListener=function(a,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(t),this};vn.prototype.once=function(a,t){function r(){this.off(a,r),t.apply(this,arguments)}return r.fn=t,this.on(a,r),this};vn.prototype.off=vn.prototype.removeListener=vn.prototype.removeAllListeners=vn.prototype.removeEventListener=function(a,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===t||s.fn===t){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};vn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,t)}return this};vn.prototype.emitReserved=vn.prototype.emit;vn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};vn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Yc=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Sa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nT="arraybuffer";function U1(a,...t){return t.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const aT=Sa.setTimeout,rT=Sa.clearTimeout;function Pc(a,t){t.useNativeTimers?(a.setTimeoutFn=aT.bind(Sa),a.clearTimeoutFn=rT.bind(Sa)):(a.setTimeoutFn=Sa.setTimeout.bind(Sa),a.clearTimeoutFn=Sa.clearTimeout.bind(Sa))}const iT=1.33;function sT(a){return typeof a=="string"?oT(a):Math.ceil((a.byteLength||a.size)*iT)}function oT(a){let t=0,r=0;for(let s=0,l=a.length;s<l;s++)t=a.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function $1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lT(a){let t="";for(let r in a)a.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return t}function cT(a){let t={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}class uT extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class Fh extends vn{constructor(t){super(),this.writable=!1,Pc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new uT(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ph(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=lT(t);return r.length?"?"+r:""}}class dT extends Fh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};WC(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,QC(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=$1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let I1=!1;try{I1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const fT=I1;function hT(){}class pT extends dT{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class Ya extends vn{constructor(t,r,s){super(),this.createRequest=t,Pc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=U1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Ya.requestsCount++,Ya.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hT,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ya.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ya.requestsCount=0;Ya.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",E0);else if(typeof addEventListener=="function"){const a="onpagehide"in Sa?"pagehide":"unload";addEventListener(a,E0,!1)}}function E0(){for(let a in Ya.requests)Ya.requests.hasOwnProperty(a)&&Ya.requests[a].abort()}const mT=(function(){const a=H1({xdomain:!1});return a&&a.responseType!==null})();class gT extends pT{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=mT&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ya(H1,this.uri(),t)}}function H1(a){const t=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||fT))return new XMLHttpRequest}catch{}if(!t)try{return new Sa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const V1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yT extends Fh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=V1?{}:U1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;Yh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=$1()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Mf=Sa.WebSocket||Sa.MozWebSocket;class vT extends yT{createSocket(t,r,s){return V1?new Mf(t,r,s):r?new Mf(t,r):new Mf(t)}doWrite(t,r){this.ws.send(r)}}class bT extends Fh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=eT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),l=JC();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:p,value:m})=>{p||(this.onPacket(m),c())}).catch(p=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;this._writer.write(s).then(()=>{l&&Yc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const wT={websocket:vT,webtransport:bT,polling:gT},ST=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ch(a){if(a.length>8e3)throw"URI too long";const t=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=ST.exec(a||""),c={},d=14;for(;d--;)c[xT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=kT(c,c.path),c.queryKey=ET(c,c.query),c}function kT(a,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ET(a,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const uh=typeof addEventListener=="function"&&typeof removeEventListener=="function",xc=[];uh&&addEventListener("offline",()=>{xc.forEach(a=>a())},!1);class Kr extends vn{constructor(t,r){if(super(),this.binaryType=nT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=ch(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=ch(r.host).host);Pc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=cT(this.opts.query)),uh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},xc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=B1,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Kr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Kr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=sT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Yc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:t,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Kr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),uh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=xc.indexOf(this._offlineEventListener);s!==-1&&xc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Kr.protocol=B1;class CT extends Kr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;Kr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",w=>{if(!s)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Kr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(b(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=r.name,this.emitReserved("upgradeError",x)}}))};function c(){s||(s=!0,b(),r.close(),r=null)}const d=w=>{const x=new Error("probe error: "+w);x.transport=r.name,c(),this.emitReserved("upgradeError",x)};function p(){d("transport closed")}function m(){d("socket closed")}function g(w){r&&w.name!==r.name&&c()}const b=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",p),this.off("close",m),this.off("upgrading",g)};r.once("open",l),r.once("error",d),r.once("close",p),this.once("close",m),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let TT=class extends CT{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>wT[l]).filter(l=>!!l)),super(t,s)}};function NT(a,t="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=ch(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const OT=typeof ArrayBuffer=="function",jT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,q1=Object.prototype.toString,AT=typeof Blob=="function"||typeof Blob<"u"&&q1.call(Blob)==="[object BlobConstructor]",_T=typeof File=="function"||typeof File<"u"&&q1.call(File)==="[object FileConstructor]";function Zh(a){return OT&&(a instanceof ArrayBuffer||jT(a))||AT&&a instanceof Blob||_T&&a instanceof File}function kc(a,t){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(kc(a[r]))return!0;return!1}if(Zh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return kc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&kc(a[r]))return!0;return!1}function DT(a){const t=[],r=a.data,s=a;return s.data=dh(r,t),s.attachments=t.length,{packet:s,buffers:t}}function dh(a,t){if(!a)return a;if(Zh(a)){const r={_placeholder:!0,num:t.length};return t.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=dh(a[s],t);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=dh(a[s],t));return r}return a}function MT(a,t){return a.data=fh(a.data,t),delete a.attachments,a}function fh(a,t){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<t.length)return t[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=fh(a[r],t);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=fh(a[r],t));return a}const RT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zT=5;var yt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(yt||(yt={}));class LT{constructor(t){this.replacer=t}encode(t){return(t.type===yt.EVENT||t.type===yt.ACK)&&kc(t)?this.encodeAsBinary({type:t.type===yt.EVENT?yt.BINARY_EVENT:yt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===yt.BINARY_EVENT||t.type===yt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=DT(t),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function C0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Xh extends vn{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===yt.BINARY_EVENT;s||r.type===yt.BINARY_ACK?(r.type=s?yt.EVENT:yt.ACK,this.reconstructor=new BT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Zh(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(yt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===yt.BINARY_EVENT||s.type===yt.BINARY_ACK){const c=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(c,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(t.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(c,r)}else s.nsp="/";const l=t.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}s.id=Number(t.substring(c,r+1))}if(t.charAt(++r)){const c=this.tryParse(t.substr(r));if(Xh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case yt.CONNECT:return C0(r);case yt.DISCONNECT:return r===void 0;case yt.CONNECT_ERROR:return typeof r=="string"||C0(r);case yt.EVENT:case yt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&RT.indexOf(r[0])===-1);case yt.ACK:case yt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=MT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const UT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xh,Encoder:LT,get PacketType(){return yt},protocol:zT},Symbol.toStringTag,{value:"Module"}));function _a(a,t,r){return a.on(t,r),function(){a.off(t,r)}}const $T=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class G1 extends vn{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[_a(t,"open",this.onopen.bind(this)),_a(t,"packet",this.onpacket.bind(this)),_a(t,"error",this.onerror.bind(this)),_a(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,l,c;if($T.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:yt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const b=this.ids++,w=r.pop();this._registerAckCallback(b,w),d.id=b}const p=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[t]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},l),d=(...p)=>{this.io.clearTimeoutFn(c),r.apply(this,p)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((s,l)=>{const c=(d,p)=>d?l(d):s(p);c.withError=!0,r.push(c),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:yt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case yt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case yt.EVENT:case yt.BINARY_EVENT:this.onevent(t);break;case yt.ACK:case yt.BINARY_ACK:this.onack(t);break;case yt.DISCONNECT:this.ondisconnect();break;case yt.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:yt.ACK,id:t,data:l}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:yt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function Ns(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}Ns.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*a);a=(Math.floor(t*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};Ns.prototype.reset=function(){this.attempts=0};Ns.prototype.setMin=function(a){this.ms=a};Ns.prototype.setMax=function(a){this.max=a};Ns.prototype.setJitter=function(a){this.jitter=a};class hh extends vn{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Pc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ns({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const l=r.parser||UT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new TT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=_a(r,"open",function(){s.onopen(),t&&t()}),c=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},d=_a(r,"error",c);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(_a(t,"ping",this.onping.bind(this)),_a(t,"data",this.ondata.bind(this)),_a(t,"error",this.onerror.bind(this)),_a(t,"close",this.onclose.bind(this)),_a(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Yc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new G1(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Co={};function Ec(a,t){typeof a=="object"&&(t=a,a=void 0),t=t||{};const r=NT(a,t.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=Co[l]&&c in Co[l].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let m;return p?m=new hh(s,t):(Co[l]||(Co[l]=new hh(s,t)),m=Co[l]),r.query&&!t.query&&(t.query=r.queryKey),m.socket(r.path,t)}Object.assign(Ec,{Manager:hh,Socket:G1,io:Ec,connect:Ec});const IT=typeof window<"u"?window.location.origin:"http://localhost:3000",T0=Gc(),HT=T0?`${T0}/socket.io`:"/socket.io",ge=Ec(IT,{path:HT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),VT=()=>{ge.connected||ge.connect()},qT=()=>{ge.connected&&ge.disconnect()};class GT{constructor(){this.nodes=new Map}register(t,r){typeof t=="object"&&r===void 0&&(r=t,t=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(t,r)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values()).filter(t=>t)}getByLabel(t){for(const r of this.nodes.values())if(r.label===t)return r;return null}getByInstance(t){for(const r of this.nodes.values())if(r.nodeClass&&t instanceof r.nodeClass)return r;return null}}const Mn=new GT;class Ni extends Error{}class YT extends Ni{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class PT extends Ni{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class FT extends Ni{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class ps extends Ni{}class Y1 extends Ni{constructor(t){super(`Invalid unit ${t}`)}}class Bn extends Ni{}class qr extends Ni{constructor(){super("Zone is an abstract class")}}const Oe="numeric",za="short",ca="long",Rc={year:Oe,month:Oe,day:Oe},P1={year:Oe,month:za,day:Oe},ZT={year:Oe,month:za,day:Oe,weekday:za},F1={year:Oe,month:ca,day:Oe},Z1={year:Oe,month:ca,day:Oe,weekday:ca},X1={hour:Oe,minute:Oe},K1={hour:Oe,minute:Oe,second:Oe},Q1={hour:Oe,minute:Oe,second:Oe,timeZoneName:za},W1={hour:Oe,minute:Oe,second:Oe,timeZoneName:ca},J1={hour:Oe,minute:Oe,hourCycle:"h23"},ew={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23"},tw={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:za},nw={hour:Oe,minute:Oe,second:Oe,hourCycle:"h23",timeZoneName:ca},aw={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe},rw={year:Oe,month:Oe,day:Oe,hour:Oe,minute:Oe,second:Oe},iw={year:Oe,month:za,day:Oe,hour:Oe,minute:Oe},sw={year:Oe,month:za,day:Oe,hour:Oe,minute:Oe,second:Oe},XT={year:Oe,month:za,day:Oe,weekday:za,hour:Oe,minute:Oe},ow={year:Oe,month:ca,day:Oe,hour:Oe,minute:Oe,timeZoneName:za},lw={year:Oe,month:ca,day:Oe,hour:Oe,minute:Oe,second:Oe,timeZoneName:za},cw={year:Oe,month:ca,day:Oe,weekday:ca,hour:Oe,minute:Oe,timeZoneName:ca},uw={year:Oe,month:ca,day:Oe,weekday:ca,hour:Oe,minute:Oe,second:Oe,timeZoneName:ca};class Os{get type(){throw new qr}get name(){throw new qr}get ianaName(){return this.name}get isUniversal(){throw new qr}offsetName(t,r){throw new qr}formatOffset(t,r){throw new qr}offset(t){throw new qr}equals(t){throw new qr}get isValid(){throw new qr}}let Rf=null;class qo extends Os{static get instance(){return Rf===null&&(Rf=new qo),Rf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return xw(t,r,s)}formatOffset(t,r){return Lo(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const ph=new Map;function KT(a){let t=ph.get(a);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),ph.set(a,t)),t}const QT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function WT(a,t){const r=a.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,p,m,g,b]=s;return[d,l,c,p,m,g,b]}function JT(a,t){const r=a.formatToParts(t),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],p=QT[c];c==="era"?s[p]=d:Fe(p)||(s[p]=parseInt(d,10))}return s}const zf=new Map;class Fa extends Os{static create(t){let r=zf.get(t);return r===void 0&&zf.set(t,r=new Fa(t)),r}static resetCache(){zf.clear(),ph.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Fa.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return xw(t,r,s,this.name)}formatOffset(t,r){return Lo(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const s=KT(this.name);let[l,c,d,p,m,g,b]=s.formatToParts?JT(s,r):WT(s,r);p==="BC"&&(l=-Math.abs(l)+1);const x=Zc({year:l,month:c,day:d,hour:m===24?0:m,minute:g,second:b,millisecond:0});let E=+r;const _=E%1e3;return E-=_>=0?_:1e3+_,(x-E)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let N0={};function eN(a,t={}){const r=JSON.stringify([a,t]);let s=N0[r];return s||(s=new Intl.ListFormat(a,t),N0[r]=s),s}const mh=new Map;function gh(a,t={}){const r=JSON.stringify([a,t]);let s=mh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,t),mh.set(r,s)),s}const yh=new Map;function tN(a,t={}){const r=JSON.stringify([a,t]);let s=yh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,t),yh.set(r,s)),s}const vh=new Map;function nN(a,t={}){const{base:r,...s}=t,l=JSON.stringify([a,s]);let c=vh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,t),vh.set(l,c)),c}let jo=null;function aN(){return jo||(jo=new Intl.DateTimeFormat().resolvedOptions().locale,jo)}const bh=new Map;function dw(a){let t=bh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat(a).resolvedOptions(),bh.set(a,t)),t}const wh=new Map;function rN(a){let t=wh.get(a);if(!t){const r=new Intl.Locale(a);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...fw,...t}),wh.set(a,t)}return t}function iN(a){const t=a.indexOf("-x-");t!==-1&&(a=a.substring(0,t));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=gh(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=gh(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function sN(a,t,r){return(r||t)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),t&&(a+=`-nu-${t}`)),a}function oN(a){const t=[];for(let r=1;r<=12;r++){const s=Ze.utc(2009,r,1);t.push(a(s))}return t}function lN(a){const t=[];for(let r=1;r<=7;r++){const s=Ze.utc(2016,11,13+r);t.push(a(s))}return t}function fc(a,t,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(t):s(t)}function cN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||dw(a.locale).numberingSystem==="latn"}class uN{constructor(t,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const p={useGrouping:!1,...s};s.padTo>0&&(p.minimumIntegerDigits=s.padTo),this.inf=tN(t,p)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):ep(t,3);return gn(r,this.padTo)}}}class dN{constructor(t,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const d=-1*(t.offset/60),p=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;t.offset!==0&&Fa.create(p).valid?(l=p,this.dt=t):(l="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,l=t.zone.name):(l="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=gh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class fN{constructor(t,r,s){this.opts={style:"long",...s},!r&&ww()&&(this.rtf=nN(t,s))}format(t,r){return this.rtf?this.rtf.format(t,r):MN(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const fw={firstDay:1,minimalDays:4,weekend:[6,7]};class Tt{static fromOpts(t){return Tt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,s,l,c=!1){const d=t||nn.defaultLocale,p=d||(c?"en-US":aN()),m=r||nn.defaultNumberingSystem,g=s||nn.defaultOutputCalendar,b=xh(l)||nn.defaultWeekSettings;return new Tt(p,m,g,b,d)}static resetCache(){jo=null,mh.clear(),yh.clear(),vh.clear(),bh.clear(),wh.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Tt.create(t,r,s,l)}constructor(t,r,s,l,c){const[d,p,m]=iN(t);this.locale=d,this.numberingSystem=r||p||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=sN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cN(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Tt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,xh(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return fc(this,t,Cw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:t,day:"numeric"}:{month:t},c=r?"format":"standalone";if(!this.monthsCache[c][t]){const d=s?p=>this.dtFormatter(p,l).format():p=>this.extract(p,l,"month");this.monthsCache[c][t]=oN(d)}return this.monthsCache[c][t]})}weekdays(t,r=!1){return fc(this,t,Ow,()=>{const s=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},l=r?"format":"standalone";return this.weekdaysCache[l][t]||(this.weekdaysCache[l][t]=lN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][t]})}meridiems(){return fc(this,void 0,()=>jw,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ze.utc(2016,11,13,9),Ze.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return fc(this,t,Aw,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ze.utc(-40,1,1),Ze.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,r,s){const l=this.dtFormatter(t,r),c=l.formatToParts(),d=c.find(p=>p.type.toLowerCase()===s);return d?d.value:null}numberFormatter(t={}){return new uN(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new dN(t,this.intl,r)}relFormatter(t={}){return new fN(this.intl,this.isEnglish(),t)}listFormatter(t={}){return eN(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||dw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Sw()?rN(this.locale):fw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Lf=null;class $n extends Os{static get utcInstance(){return Lf===null&&(Lf=new $n(0)),Lf}static instance(t){return t===0?$n.utcInstance:new $n(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new $n(Xc(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Lo(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Lo(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Lo(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class hw extends Os{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Zr(a,t){if(Fe(a)||a===null)return t;if(a instanceof Os)return a;if(vN(a)){const r=a.toLowerCase();return r==="default"?t:r==="local"||r==="system"?qo.instance:r==="utc"||r==="gmt"?$n.utcInstance:$n.parseSpecifier(r)||Fa.create(a)}else return Qr(a)?$n.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new hw(a)}const Kh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},O0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hN=Kh.hanidec.replace(/[\[|\]]/g,"").split("");function pN(a){let t=parseInt(a,10);if(isNaN(t)){t="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Kh.hanidec)!==-1)t+=hN.indexOf(a[r]);else for(const l in O0){const[c,d]=O0[l];s>=c&&s<=d&&(t+=s-c)}}return parseInt(t,10)}else return t}const Sh=new Map;function mN(){Sh.clear()}function ja({numberingSystem:a},t=""){const r=a||"latn";let s=Sh.get(r);s===void 0&&(s=new Map,Sh.set(r,s));let l=s.get(t);return l===void 0&&(l=new RegExp(`${Kh[r]}${t}`),s.set(t,l)),l}let j0=()=>Date.now(),A0="system",_0=null,D0=null,M0=null,R0=60,z0,L0=null;class nn{static get now(){return j0}static set now(t){j0=t}static set defaultZone(t){A0=t}static get defaultZone(){return Zr(A0,qo.instance)}static get defaultLocale(){return _0}static set defaultLocale(t){_0=t}static get defaultNumberingSystem(){return D0}static set defaultNumberingSystem(t){D0=t}static get defaultOutputCalendar(){return M0}static set defaultOutputCalendar(t){M0=t}static get defaultWeekSettings(){return L0}static set defaultWeekSettings(t){L0=xh(t)}static get twoDigitCutoffYear(){return R0}static set twoDigitCutoffYear(t){R0=t%100}static get throwOnInvalid(){return z0}static set throwOnInvalid(t){z0=t}static resetCaches(){Tt.resetCache(),Fa.resetCache(),Ze.resetCache(),mN()}}class Da{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const pw=[0,31,59,90,120,151,181,212,243,273,304,334],mw=[0,31,60,91,121,152,182,213,244,274,305,335];function xa(a,t){return new Da("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function Qh(a,t,r){const s=new Date(Date.UTC(a,t-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function gw(a,t,r){return r+(Go(a)?mw:pw)[t-1]}function yw(a,t){const r=Go(a)?mw:pw,s=r.findIndex(c=>c<t),l=t-r[s];return{month:s+1,day:l}}function Wh(a,t){return(a-t+7)%7+1}function zc(a,t=4,r=1){const{year:s,month:l,day:c}=a,d=gw(s,l,c),p=Wh(Qh(s,l,c),r);let m=Math.floor((d-p+14-t)/7),g;return m<1?(g=s-1,m=Io(g,t,r)):m>Io(s,t,r)?(g=s+1,m=1):g=s,{weekYear:g,weekNumber:m,weekday:p,...Kc(a)}}function B0(a,t=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Wh(Qh(s,1,t),r),p=gs(s);let m=l*7+c-d-7+t,g;m<1?(g=s-1,m+=gs(g)):m>p?(g=s+1,m-=gs(s)):g=s;const{month:b,day:w}=yw(g,m);return{year:g,month:b,day:w,...Kc(a)}}function Bf(a){const{year:t,month:r,day:s}=a,l=gw(t,r,s);return{year:t,ordinal:l,...Kc(a)}}function U0(a){const{year:t,ordinal:r}=a,{month:s,day:l}=yw(t,r);return{year:t,month:s,day:l,...Kc(a)}}function $0(a,t){if(!Fe(a.localWeekday)||!Fe(a.localWeekNumber)||!Fe(a.localWeekYear)){if(!Fe(a.weekday)||!Fe(a.weekNumber)||!Fe(a.weekYear))throw new ps("Cannot mix locale-based week fields with ISO-based week fields");return Fe(a.localWeekday)||(a.weekday=a.localWeekday),Fe(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Fe(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gN(a,t=4,r=1){const s=Fc(a.weekYear),l=ka(a.weekNumber,1,Io(a.weekYear,t,r)),c=ka(a.weekday,1,7);return s?l?c?!1:xa("weekday",a.weekday):xa("week",a.weekNumber):xa("weekYear",a.weekYear)}function yN(a){const t=Fc(a.year),r=ka(a.ordinal,1,gs(a.year));return t?r?!1:xa("ordinal",a.ordinal):xa("year",a.year)}function vw(a){const t=Fc(a.year),r=ka(a.month,1,12),s=ka(a.day,1,Lc(a.year,a.month));return t?r?s?!1:xa("day",a.day):xa("month",a.month):xa("year",a.year)}function bw(a){const{hour:t,minute:r,second:s,millisecond:l}=a,c=ka(t,0,23)||t===24&&r===0&&s===0&&l===0,d=ka(r,0,59),p=ka(s,0,59),m=ka(l,0,999);return c?d?p?m?!1:xa("millisecond",l):xa("second",s):xa("minute",r):xa("hour",t)}function Fe(a){return typeof a>"u"}function Qr(a){return typeof a=="number"}function Fc(a){return typeof a=="number"&&a%1===0}function vN(a){return typeof a=="string"}function bN(a){return Object.prototype.toString.call(a)==="[object Date]"}function ww(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function Sw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function wN(a){return Array.isArray(a)?a:[a]}function I0(a,t,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[t(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function SN(a,t){return t.reduce((r,s)=>(r[s]=a[s],r),{})}function ks(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function xh(a){if(a==null)return null;if(typeof a!="object")throw new Bn("Week settings must be an object");if(!ka(a.firstDay,1,7)||!ka(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(t=>!ka(t,1,7)))throw new Bn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ka(a,t,r){return Fc(a)&&a>=t&&a<=r}function xN(a,t){return a-t*Math.floor(a/t)}function gn(a,t=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(t,"0"):s=(""+a).padStart(t,"0"),s}function Fr(a){if(!(Fe(a)||a===null||a===""))return parseInt(a,10)}function bi(a){if(!(Fe(a)||a===null||a===""))return parseFloat(a)}function Jh(a){if(!(Fe(a)||a===null||a==="")){const t=parseFloat("0."+a)*1e3;return Math.floor(t)}}function ep(a,t,r="round"){const s=10**t;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Go(a){return a%4===0&&(a%100!==0||a%400===0)}function gs(a){return Go(a)?366:365}function Lc(a,t){const r=xN(t-1,12)+1,s=a+(t-r)/12;return r===2?Go(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Zc(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(t=new Date(t),t.setUTCFullYear(a.year,a.month-1,a.day)),+t}function H0(a,t,r){return-Wh(Qh(a,1,t),r)+t-1}function Io(a,t=4,r=1){const s=H0(a,t,r),l=H0(a+1,t,r);return(gs(a)-s+l)/7}function kh(a){return a>99?a:a>nn.twoDigitCutoffYear?1900+a:2e3+a}function xw(a,t,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:t,...c},p=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return p?p.value:null}function Xc(a,t){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(t,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function kw(a){const t=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(t))throw new Bn(`Invalid unit value ${a}`);return t}function Bc(a,t){const r={};for(const s in a)if(ks(a,s)){const l=a[s];if(l==null)continue;r[t(s)]=kw(l)}return r}function Lo(a,t){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(t){case"short":return`${l}${gn(r,2)}:${gn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${gn(r,2)}${gn(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Kc(a){return SN(a,["hour","minute","second","millisecond"])}const kN=["January","February","March","April","May","June","July","August","September","October","November","December"],Ew=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EN=["J","F","M","A","M","J","J","A","S","O","N","D"];function Cw(a){switch(a){case"narrow":return[...EN];case"short":return[...Ew];case"long":return[...kN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Tw=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Nw=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],CN=["M","T","W","T","F","S","S"];function Ow(a){switch(a){case"narrow":return[...CN];case"short":return[...Nw];case"long":return[...Tw];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const jw=["AM","PM"],TN=["Before Christ","Anno Domini"],NN=["BC","AD"],ON=["B","A"];function Aw(a){switch(a){case"narrow":return[...ON];case"short":return[...NN];case"long":return[...TN];default:return null}}function jN(a){return jw[a.hour<12?0:1]}function AN(a,t){return Ow(t)[a.weekday-1]}function _N(a,t){return Cw(t)[a.month-1]}function DN(a,t){return Aw(t)[a.year<0?0:1]}function MN(a,t,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const w=a==="days";switch(t){case 1:return w?"tomorrow":`next ${l[a][0]}`;case-1:return w?"yesterday":`last ${l[a][0]}`;case 0:return w?"today":`this ${l[a][0]}`}}const d=Object.is(t,-0)||t<0,p=Math.abs(t),m=p===1,g=l[a],b=s?m?g[1]:g[2]||g[1]:m?l[a][0]:a;return d?`${p} ${b} ago`:`in ${p} ${b}`}function V0(a,t){let r="";for(const s of a)s.literal?r+=s.val:r+=t(s.val);return r}const RN={D:Rc,DD:P1,DDD:F1,DDDD:Z1,t:X1,tt:K1,ttt:Q1,tttt:W1,T:J1,TT:ew,TTT:tw,TTTT:nw,f:aw,ff:iw,fff:ow,ffff:cw,F:rw,FF:sw,FFF:lw,FFFF:uw};class Un{static create(t,r={}){return new Un(t,r)}static parseFormat(t){let r=null,s="",l=!1;const c=[];for(let d=0;d<t.length;d++){const p=t.charAt(d);p==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||p===r?s+=p:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=p,r=p)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(t){return RN[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0,s=void 0){if(this.opts.forceSimple)return gn(t,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(t)}formatDateTimeFromString(t,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,_)=>this.loc.extract(t,E,_),d=E=>t.isOffsetFixed&&t.offset===0&&E.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,E.format):"",p=()=>s?jN(t):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(E,_)=>s?_N(t,E):c(_?{month:E}:{month:E,day:"numeric"},"month"),g=(E,_)=>s?AN(t,E):c(_?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),b=E=>{const _=Un.macroTokenToFormatOpts(E);return _?this.formatWithSystemDefault(t,_):E},w=E=>s?DN(t,E):c({era:E},"era"),x=E=>{switch(E){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return p();case"d":return l?c({day:"numeric"},"day"):this.num(t.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return g("short",!0);case"cccc":return g("long",!0);case"ccccc":return g("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return g("short",!1);case"EEEE":return g("long",!1);case"EEEEE":return g("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(t.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(t.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(t.year,6);case"G":return w("short");case"GG":return w("long");case"GGGGG":return w("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return b(E)}};return V0(Un.parseFormat(r),x)}formatDurationFromString(t,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=b=>{switch(b[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(b,w)=>x=>{const E=l(x);if(E){const _=w.isNegativeDuration&&E!==w.largestUnit?s:1;let F;return this.opts.signMode==="negativeLargestOnly"&&E!==w.largestUnit?F="never":this.opts.signMode==="all"?F="always":F="auto",this.num(b.get(E)*_,x.length,F)}else return x},d=Un.parseFormat(r),p=d.reduce((b,{literal:w,val:x})=>w?b:b.concat(x),[]),m=t.shiftTo(...p.map(l).filter(b=>b)),g={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return V0(d,c(m,g))}}const _w=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function js(...a){const t=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${t}$`)}function As(...a){return t=>a.reduce(([r,s,l],c)=>{const[d,p,m]=c(t,l);return[{...r,...d},p||s,m]},[{},null,1]).slice(0,2)}function _s(a,...t){if(a==null)return[null,null];for(const[r,s]of t){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Dw(...a){return(t,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Fr(t[r+l]);return[s,null,r+l]}}const Mw=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,zN=`(?:${Mw.source}?(?:\\[(${_w.source})\\])?)?`,tp=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Rw=RegExp(`${tp.source}${zN}`),np=RegExp(`(?:[Tt]${Rw.source})?`),LN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,BN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,UN=/(\d{4})-?(\d{3})/,$N=Dw("weekYear","weekNumber","weekDay"),IN=Dw("year","ordinal"),HN=/(\d{4})-(\d\d)-(\d\d)/,zw=RegExp(`${tp.source} ?(?:${Mw.source}|(${_w.source}))?`),VN=RegExp(`(?: ${zw.source})?`);function ys(a,t,r){const s=a[t];return Fe(s)?r:Fr(s)}function qN(a,t){return[{year:ys(a,t),month:ys(a,t+1,1),day:ys(a,t+2,1)},null,t+3]}function Ds(a,t){return[{hours:ys(a,t,0),minutes:ys(a,t+1,0),seconds:ys(a,t+2,0),milliseconds:Jh(a[t+3])},null,t+4]}function Yo(a,t){const r=!a[t]&&!a[t+1],s=Xc(a[t+1],a[t+2]),l=r?null:$n.instance(s);return[{},l,t+3]}function Po(a,t){const r=a[t]?Fa.create(a[t]):null;return[{},r,t+1]}const GN=RegExp(`^T?${tp.source}$`),YN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function PN(a){const[t,r,s,l,c,d,p,m,g]=a,b=t[0]==="-",w=m&&m[0]==="-",x=(E,_=!1)=>E!==void 0&&(_||E&&b)?-E:E;return[{years:x(bi(r)),months:x(bi(s)),weeks:x(bi(l)),days:x(bi(c)),hours:x(bi(d)),minutes:x(bi(p)),seconds:x(bi(m),m==="-0"),milliseconds:x(Jh(g),w)}]}const FN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function ap(a,t,r,s,l,c,d){const p={year:t.length===2?kh(Fr(t)):Fr(t),month:Ew.indexOf(r)+1,day:Fr(s),hour:Fr(l),minute:Fr(c)};return d&&(p.second=Fr(d)),a&&(p.weekday=a.length>3?Tw.indexOf(a)+1:Nw.indexOf(a)+1),p}const ZN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function XN(a){const[,t,r,s,l,c,d,p,m,g,b,w]=a,x=ap(t,l,s,r,c,d,p);let E;return m?E=FN[m]:g?E=0:E=Xc(b,w),[x,new $n(E)]}function KN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const QN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,WN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function q0(a){const[,t,r,s,l,c,d,p]=a;return[ap(t,l,s,r,c,d,p),$n.utcInstance]}function eO(a){const[,t,r,s,l,c,d,p]=a;return[ap(t,p,r,s,l,c,d),$n.utcInstance]}const tO=js(LN,np),nO=js(BN,np),aO=js(UN,np),rO=js(Rw),Lw=As(qN,Ds,Yo,Po),iO=As($N,Ds,Yo,Po),sO=As(IN,Ds,Yo,Po),oO=As(Ds,Yo,Po);function lO(a){return _s(a,[tO,Lw],[nO,iO],[aO,sO],[rO,oO])}function cO(a){return _s(KN(a),[ZN,XN])}function uO(a){return _s(a,[QN,q0],[WN,q0],[JN,eO])}function dO(a){return _s(a,[YN,PN])}const fO=As(Ds);function hO(a){return _s(a,[GN,fO])}const pO=js(HN,VN),mO=js(zw),gO=As(Ds,Yo,Po);function yO(a){return _s(a,[pO,Lw],[mO,gO])}const G0="Invalid Duration",Bw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},vO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Bw},wa=146097/400,cs=146097/4800,bO={years:{quarters:4,months:12,weeks:wa/7,days:wa,hours:wa*24,minutes:wa*24*60,seconds:wa*24*60*60,milliseconds:wa*24*60*60*1e3},quarters:{months:3,weeks:wa/28,days:wa/4,hours:wa*24/4,minutes:wa*24*60/4,seconds:wa*24*60*60/4,milliseconds:wa*24*60*60*1e3/4},months:{weeks:cs/7,days:cs,hours:cs*24,minutes:cs*24*60,seconds:cs*24*60*60,milliseconds:cs*24*60*60*1e3},...Bw},ki=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wO=ki.slice(0).reverse();function mr(a,t,r=!1){const s={values:r?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new vt(s)}function Uw(a,t){let r=t.milliseconds??0;for(const s of wO.slice(1))t[s]&&(r+=t[s]*a[s].milliseconds);return r}function Y0(a,t){const r=Uw(a,t)<0?-1:1;ki.reduceRight((s,l)=>{if(Fe(t[l]))return s;if(s){const c=t[s]*r,d=a[l][s],p=Math.floor(c/d);t[l]+=p*r,t[s]-=p*d*r}return l},null),ki.reduce((s,l)=>{if(Fe(t[l]))return s;if(s){const c=t[s]%1;t[s]-=c,t[l]+=c*a[s][l]}return l},null)}function P0(a){const t={};for(const[r,s]of Object.entries(a))s!==0&&(t[r]=s);return t}class vt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let s=r?bO:vO;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||Tt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,r){return vt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Bn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new vt({values:Bc(t,vt.normalizeUnit),loc:Tt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(Qr(t))return vt.fromMillis(t);if(vt.isDuration(t))return t;if(typeof t=="object")return vt.fromObject(t);throw new Bn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[s]=dO(t);return s?vt.fromObject(s,r):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[s]=hO(t);return s?vt.fromObject(s,r):vt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Bn("need to specify a reason the Duration is invalid");const s=t instanceof Da?t:new Da(t,r);if(nn.throwOnInvalid)throw new FT(s);return new vt({invalid:s})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new Y1(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Un.create(this.loc,s).formatDurationFromString(this,t):G0}toHuman(t={}){if(!this.isValid)return G0;const r=t.showZeros!==!1,s=ki.map(l=>{const c=this.values[l];return Fe(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=ep(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ze.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Uw(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t),s={};for(const l of ki)(ks(r.values,l)||ks(this.values,l))&&(s[l]=r.get(l)+this.get(l));return mr(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=kw(t(this.values[s],s));return mr(this,{values:r},!0)}get(t){return this[vt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Bc(t,vt.normalizeUnit)};return mr(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:l,conversionAccuracy:s};return mr(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return Y0(this.matrix,t),mr(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=P0(this.normalize().shiftToAll().toObject());return mr(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(d=>vt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of ki)if(t.indexOf(d)>=0){c=d;let p=0;for(const g in s)p+=this.matrix[g][d]*s[g],s[g]=0;Qr(l[d])&&(p+=l[d]);const m=Math.trunc(p);r[d]=m,s[d]=(p*1e3-m*1e3)/1e3}else Qr(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return Y0(this.matrix,r),mr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return mr(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=P0(this.values);return mr(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of ki)if(!r(this.values[s],t.values[s]))return!1;return!0}}const us="Invalid Interval";function SO(a,t){return!a||!a.isValid?tn.invalid("missing or invalid start"):!t||!t.isValid?tn.invalid("missing or invalid end"):t<a?tn.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null}class tn{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Bn("need to specify a reason the Interval is invalid");const s=t instanceof Da?t:new Da(t,r);if(nn.throwOnInvalid)throw new PT(s);return new tn({invalid:s})}static fromDateTimes(t,r){const s=To(t),l=To(r),c=SO(s,l);return c??new tn({start:s,end:l})}static after(t,r){const s=vt.fromDurationLike(r),l=To(t);return tn.fromDateTimes(l,l.plus(s))}static before(t,r){const s=vt.fromDurationLike(r),l=To(t);return tn.fromDateTimes(l.minus(s),l)}static fromISO(t,r){const[s,l]=(t||"").split("/",2);if(s&&l){let c,d;try{c=Ze.fromISO(s,r),d=c.isValid}catch{d=!1}let p,m;try{p=Ze.fromISO(l,r),m=p.isValid}catch{m=!1}if(d&&m)return tn.fromDateTimes(c,p);if(d){const g=vt.fromISO(l,r);if(g.isValid)return tn.after(c,g)}else if(m){const g=vt.fromISO(s,r);if(g.isValid)return tn.before(p,g)}}return tn.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(t,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(t,r),Math.floor(l.diff(s,t).get(t))+(l.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?tn.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(To).filter(d=>this.contains(d)).sort((d,p)=>d.toMillis()-p.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,p=+d>+this.e?this.e:d;s.push(tn.fromDateTimes(l,p)),l=p,c+=1}return s}splitBy(t){const r=vt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const p=this.start.plus(r.mapUnits(m=>m*l));c=+p>+this.e?this.e:p,d.push(tn.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return r>=s?null:tn.fromDateTimes(r,s)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return tn.fromDateTimes(r,s)}static merge(t){const[r,s]=t.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(t){let r=null,s=0;const l=[],c=t.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),p=d.sort((m,g)=>m.time-g.time);for(const m of p)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(tn.fromDateTimes(r,m.time)),r=null);return tn.merge(l)}difference(...t){return tn.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:us}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Rc,r={}){return this.isValid?Un.create(this.s.loc.clone(r),t).formatInterval(this):us}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:us}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:us}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:us}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:us}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):vt.invalid(this.invalidReason)}mapEndpoints(t){return tn.fromDateTimes(t(this.s),t(this.e))}}class Ao{static hasDST(t=nn.defaultZone){const r=Ze.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Fa.isValidZone(t)}static normalizeZone(t){return Zr(t,nn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Tt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Tt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Tt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Tt.create(r,s,c)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Tt.create(r,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Tt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Tt.create(r,null,"gregory").eras(t)}static features(){return{relative:ww(),localeWeek:Sw()}}}function F0(a,t){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(t)-r(a);return Math.floor(vt.fromMillis(s).as("days"))}function xO(a,t,r){const s=[["years",(m,g)=>g.year-m.year],["quarters",(m,g)=>g.quarter-m.quarter+(g.year-m.year)*4],["months",(m,g)=>g.month-m.month+(g.year-m.year)*12],["weeks",(m,g)=>{const b=F0(m,g);return(b-b%7)/7}],["days",F0]],l={},c=a;let d,p;for(const[m,g]of s)r.indexOf(m)>=0&&(d=m,l[m]=g(a,t),p=c.plus(l),p>t?(l[m]--,a=c.plus(l),a>t&&(p=a,l[m]--,a=c.plus(l))):a=p);return[a,l,p,d]}function kO(a,t,r,s){let[l,c,d,p]=xO(a,t,r);const m=t-l,g=r.filter(w=>["hours","minutes","seconds","milliseconds"].indexOf(w)>=0);g.length===0&&(d<t&&(d=l.plus({[p]:1})),d!==l&&(c[p]=(c[p]||0)+m/(d-l)));const b=vt.fromObject(c,s);return g.length>0?vt.fromMillis(m,s).shiftTo(...g).plus(b):b}const EO="missing Intl.DateTimeFormat.formatToParts support";function kt(a,t=r=>r){return{regex:a,deser:([r])=>t(pN(r))}}const CO="",$w=`[ ${CO}]`,Iw=new RegExp($w,"g");function TO(a){return a.replace(/\./g,"\\.?").replace(Iw,$w)}function Z0(a){return a.replace(/\./g,"").replace(Iw," ").toLowerCase()}function Aa(a,t){return a===null?null:{regex:RegExp(a.map(TO).join("|")),deser:([r])=>a.findIndex(s=>Z0(r)===Z0(s))+t}}function X0(a,t){return{regex:a,deser:([,r,s])=>Xc(r,s),groups:t}}function hc(a){return{regex:a,deser:([t])=>t}}function NO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function OO(a,t){const r=ja(t),s=ja(t,"{2}"),l=ja(t,"{3}"),c=ja(t,"{4}"),d=ja(t,"{6}"),p=ja(t,"{1,2}"),m=ja(t,"{1,3}"),g=ja(t,"{1,6}"),b=ja(t,"{1,9}"),w=ja(t,"{2,4}"),x=ja(t,"{4,6}"),E=V=>({regex:RegExp(NO(V.val)),deser:([ee])=>ee,literal:!0}),F=(V=>{if(a.literal)return E(V);switch(V.val){case"G":return Aa(t.eras("short"),0);case"GG":return Aa(t.eras("long"),0);case"y":return kt(g);case"yy":return kt(w,kh);case"yyyy":return kt(c);case"yyyyy":return kt(x);case"yyyyyy":return kt(d);case"M":return kt(p);case"MM":return kt(s);case"MMM":return Aa(t.months("short",!0),1);case"MMMM":return Aa(t.months("long",!0),1);case"L":return kt(p);case"LL":return kt(s);case"LLL":return Aa(t.months("short",!1),1);case"LLLL":return Aa(t.months("long",!1),1);case"d":return kt(p);case"dd":return kt(s);case"o":return kt(m);case"ooo":return kt(l);case"HH":return kt(s);case"H":return kt(p);case"hh":return kt(s);case"h":return kt(p);case"mm":return kt(s);case"m":return kt(p);case"q":return kt(p);case"qq":return kt(s);case"s":return kt(p);case"ss":return kt(s);case"S":return kt(m);case"SSS":return kt(l);case"u":return hc(b);case"uu":return hc(p);case"uuu":return kt(r);case"a":return Aa(t.meridiems(),0);case"kkkk":return kt(c);case"kk":return kt(w,kh);case"W":return kt(p);case"WW":return kt(s);case"E":case"c":return kt(r);case"EEE":return Aa(t.weekdays("short",!1),1);case"EEEE":return Aa(t.weekdays("long",!1),1);case"ccc":return Aa(t.weekdays("short",!0),1);case"cccc":return Aa(t.weekdays("long",!0),1);case"Z":case"ZZ":return X0(new RegExp(`([+-]${p.source})(?::(${s.source}))?`),2);case"ZZZ":return X0(new RegExp(`([+-]${p.source})(${s.source})?`),2);case"z":return hc(/[a-z_+-/]{1,256}?/i);case" ":return hc(/[^\S\n\r]/);default:return E(V)}})(a)||{invalidReason:EO};return F.token=a,F}const jO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function AO(a,t,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=t[s];let d=s;s==="hour"&&(t.hour12!=null?d=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let p=jO[d];if(typeof p=="object"&&(p=p[c]),p)return{literal:!1,val:p}}function _O(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function DO(a,t,r){const s=a.match(t);if(s){const l={};let c=1;for(const d in r)if(ks(r,d)){const p=r[d],m=p.groups?p.groups+1:1;!p.literal&&p.token&&(l[p.token.val[0]]=p.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function MO(a){const t=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Fe(a.z)||(r=Fa.create(a.z)),Fe(a.Z)||(r||(r=new $n(a.Z)),s=a.Z),Fe(a.q)||(a.M=(a.q-1)*3+1),Fe(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Fe(a.u)||(a.S=Jh(a.u)),[Object.keys(a).reduce((c,d)=>{const p=t(d);return p&&(c[p]=a[d]),c},{}),r,s]}let Uf=null;function RO(){return Uf||(Uf=Ze.fromMillis(1555555555555)),Uf}function zO(a,t){if(a.literal)return a;const r=Un.macroTokenToFormatOpts(a.val),s=Gw(r,t);return s==null||s.includes(void 0)?a:s}function Hw(a,t){return Array.prototype.concat(...a.map(r=>zO(r,t)))}class Vw{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=Hw(Un.parseFormat(r),t),this.units=this.tokens.map(s=>OO(s,t)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=_O(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(t){if(this.isValid){const[r,s]=DO(t,this.regex,this.handlers),[l,c,d]=s?MO(s):[null,null,void 0];if(ks(s,"a")&&ks(s,"H"))throw new ps("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function qw(a,t,r){return new Vw(a,r).explainFromTokens(t)}function LO(a,t,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=qw(a,t,r);return[s,l,c,d]}function Gw(a,t){if(!a)return null;const s=Un.create(t,a).dtFormatter(RO()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>AO(d,a,c))}const $f="Invalid DateTime",K0=864e13;function _o(a){return new Da("unsupported zone",`the zone "${a.name}" is not supported`)}function If(a){return a.weekData===null&&(a.weekData=zc(a.c)),a.weekData}function Hf(a){return a.localWeekData===null&&(a.localWeekData=zc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function wi(a,t){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ze({...r,...t,old:r})}function Yw(a,t,r){let s=a-t*60*1e3;const l=r.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function pc(a,t){a+=t*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Cc(a,t,r){return Yw(Zc(a),t,r)}function Q0(a,t){const r=a.o,s=a.c.year+Math.trunc(t.years),l=a.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,Lc(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},d=vt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),p=Zc(c);let[m,g]=Yw(p,r,a.zone);return d!==0&&(m+=d,g=a.zone.offset(m)),{ts:m,o:g}}function ds(a,t,r,s,l,c){const{setZone:d,zone:p}=r;if(a&&Object.keys(a).length!==0||t){const m=t||p,g=Ze.fromObject(a,{...r,zone:m,specificOffset:c});return d?g:g.setZone(p)}else return Ze.invalid(new Da("unparsable",`the input "${l}" can't be parsed as ${s}`))}function mc(a,t,r=!0){return a.isValid?Un.create(Tt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Vf(a,t,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=gn(a.c.year,s?6:4),r==="year")return l;if(t){if(l+="-",l+=gn(a.c.month),r==="month")return l;l+="-"}else if(l+=gn(a.c.month),r==="month")return l;return l+=gn(a.c.day),l}function W0(a,t,r,s,l,c,d){let p=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=gn(a.c.hour),d==="hour")break;if(t){if(m+=":",m+=gn(a.c.minute),d==="minute")break;p&&(m+=":",m+=gn(a.c.second))}else{if(m+=gn(a.c.minute),d==="minute")break;p&&(m+=gn(a.c.second))}if(d==="second")break;p&&(!s||a.c.millisecond!==0)&&(m+=".",m+=gn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=gn(Math.trunc(-a.o/60)),m+=":",m+=gn(Math.trunc(-a.o%60))):(m+="+",m+=gn(Math.trunc(a.o/60)),m+=":",m+=gn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Pw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},BO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},UO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Tc=["year","month","day","hour","minute","second","millisecond"],$O=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],IO=["year","ordinal","hour","minute","second","millisecond"];function Nc(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new Y1(a);return t}function J0(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Nc(a)}}function HO(a){if(Do===void 0&&(Do=nn.now()),a.type!=="iana")return a.offset(Do);const t=a.name;let r=Eh.get(t);return r===void 0&&(r=a.offset(Do),Eh.set(t,r)),r}function eb(a,t){const r=Zr(t.zone,nn.defaultZone);if(!r.isValid)return Ze.invalid(_o(r));const s=Tt.fromObject(t);let l,c;if(Fe(a.year))l=nn.now();else{for(const m of Tc)Fe(a[m])&&(a[m]=Pw[m]);const d=vw(a)||bw(a);if(d)return Ze.invalid(d);const p=HO(r);[l,c]=Cc(a,p,r)}return new Ze({ts:l,zone:r,loc:s,o:c})}function tb(a,t,r){const s=Fe(r.round)?!0:r.round,l=Fe(r.rounding)?"trunc":r.rounding,c=(p,m)=>(p=ep(p,s||r.calendary?0:2,r.calendary?"round":l),t.loc.clone(r).relFormatter(r).format(p,m)),d=p=>r.calendary?t.hasSame(a,p)?0:t.startOf(p).diff(a.startOf(p),p).get(p):t.diff(a,p).get(p);if(r.unit)return c(d(r.unit),r.unit);for(const p of r.units){const m=d(p);if(Math.abs(m)>=1)return c(m,p)}return c(a>t?-0:0,r.units[r.units.length-1])}function nb(a){let t={},r;return a.length>0&&typeof a[a.length-1]=="object"?(t=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[t,r]}let Do;const Eh=new Map;class Ze{constructor(t){const r=t.zone||nn.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new Da("invalid input"):null)||(r.isValid?null:_o(r));this.ts=Fe(t.ts)?nn.now():t.ts;let l=null,c=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[l,c]=[t.old.c,t.old.o];else{const p=Qr(t.o)&&!t.old?t.o:r.offset(this.ts);l=pc(this.ts,p),s=Number.isNaN(l.year)?new Da("invalid input"):null,l=s?null:l,c=s?null:p}this._zone=r,this.loc=t.loc||Tt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Ze({})}static local(){const[t,r]=nb(arguments),[s,l,c,d,p,m,g]=r;return eb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static utc(){const[t,r]=nb(arguments),[s,l,c,d,p,m,g]=r;return t.zone=$n.utcInstance,eb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static fromJSDate(t,r={}){const s=bN(t)?t.valueOf():NaN;if(Number.isNaN(s))return Ze.invalid("invalid input");const l=Zr(r.zone,nn.defaultZone);return l.isValid?new Ze({ts:s,zone:l,loc:Tt.fromObject(r)}):Ze.invalid(_o(l))}static fromMillis(t,r={}){if(Qr(t))return t<-K0||t>K0?Ze.invalid("Timestamp out of range"):new Ze({ts:t,zone:Zr(r.zone,nn.defaultZone),loc:Tt.fromObject(r)});throw new Bn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Qr(t))return new Ze({ts:t*1e3,zone:Zr(r.zone,nn.defaultZone),loc:Tt.fromObject(r)});throw new Bn("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const s=Zr(r.zone,nn.defaultZone);if(!s.isValid)return Ze.invalid(_o(s));const l=Tt.fromObject(r),c=Bc(t,J0),{minDaysInFirstWeek:d,startOfWeek:p}=$0(c,l),m=nn.now(),g=Fe(r.specificOffset)?s.offset(m):r.specificOffset,b=!Fe(c.ordinal),w=!Fe(c.year),x=!Fe(c.month)||!Fe(c.day),E=w||x,_=c.weekYear||c.weekNumber;if((E||b)&&_)throw new ps("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(x&&b)throw new ps("Can't mix ordinal dates with month/day");const F=_||c.weekday&&!E;let V,ee,W=pc(m,g);F?(V=$O,ee=BO,W=zc(W,d,p)):b?(V=IO,ee=UO,W=Bf(W)):(V=Tc,ee=Pw);let L=!1;for(const ye of V){const $e=c[ye];Fe($e)?L?c[ye]=ee[ye]:c[ye]=W[ye]:L=!0}const Y=F?gN(c,d,p):b?yN(c):vw(c),me=Y||bw(c);if(me)return Ze.invalid(me);const be=F?B0(c,d,p):b?U0(c):c,[B,he]=Cc(be,g,s),se=new Ze({ts:B,zone:s,o:he,loc:l});return c.weekday&&E&&t.weekday!==se.weekday?Ze.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${se.toISO()}`):se.isValid?se:Ze.invalid(se.invalid)}static fromISO(t,r={}){const[s,l]=lO(t);return ds(s,l,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[s,l]=cO(t);return ds(s,l,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[s,l]=uO(t);return ds(s,l,r,"HTTP",r)}static fromFormat(t,r,s={}){if(Fe(t)||Fe(r))throw new Bn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[p,m,g,b]=LO(d,t,r);return b?Ze.invalid(b):ds(p,m,s,`format ${r}`,t,g)}static fromString(t,r,s={}){return Ze.fromFormat(t,r,s)}static fromSQL(t,r={}){const[s,l]=yO(t);return ds(s,l,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Bn("need to specify a reason the DateTime is invalid");const s=t instanceof Da?t:new Da(t,r);if(nn.throwOnInvalid)throw new YT(s);return new Ze({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const s=Gw(t,Tt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(t,r={}){return Hw(Un.parseFormat(t),Tt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){Do=void 0,Eh.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?If(this).weekYear:NaN}get weekNumber(){return this.isValid?If(this).weekNumber:NaN}get weekday(){return this.isValid?If(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Hf(this).weekday:NaN}get localWeekNumber(){return this.isValid?Hf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Hf(this).weekYear:NaN}get ordinal(){return this.isValid?Bf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ao.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ao.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ao.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ao.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,s=Zc(this.c),l=this.zone.offset(s-t),c=this.zone.offset(s+t),d=this.zone.offset(s-l*r),p=this.zone.offset(s-c*r);if(d===p)return[this];const m=s-d*r,g=s-p*r,b=pc(m,d),w=pc(g,p);return b.hour===w.hour&&b.minute===w.minute&&b.second===w.second&&b.millisecond===w.millisecond?[wi(this,{ts:m}),wi(this,{ts:g})]:[this]}get isInLeapYear(){return Go(this.year)}get daysInMonth(){return Lc(this.year,this.month)}get daysInYear(){return this.isValid?gs(this.year):NaN}get weeksInWeekYear(){return this.isValid?Io(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Io(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:s,calendar:l}=Un.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(t=0,r={}){return this.setZone($n.instance(t),r)}toLocal(){return this.setZone(nn.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(t=Zr(t,nn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(r||s){const c=t.offset(this.ts),d=this.toObject();[l]=Cc(d,c,t)}return wi(this,{ts:l,zone:t})}else return Ze.invalid(_o(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:s});return wi(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Bc(t,J0),{minDaysInFirstWeek:s,startOfWeek:l}=$0(r,this.loc),c=!Fe(r.weekYear)||!Fe(r.weekNumber)||!Fe(r.weekday),d=!Fe(r.ordinal),p=!Fe(r.year),m=!Fe(r.month)||!Fe(r.day),g=p||m,b=r.weekYear||r.weekNumber;if((g||d)&&b)throw new ps("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new ps("Can't mix ordinal dates with month/day");let w;c?w=B0({...zc(this.c,s,l),...r},s,l):Fe(r.ordinal)?(w={...this.toObject(),...r},Fe(r.day)&&(w.day=Math.min(Lc(w.year,w.month),w.day))):w=U0({...Bf(this.c),...r});const[x,E]=Cc(w,this.o,this.zone);return wi(this,{ts:x,o:E})}plus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t);return wi(this,Q0(this,r))}minus(t){if(!this.isValid)return this;const r=vt.fromDurationLike(t).negate();return wi(this,Q0(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=vt.normalizeUnit(t);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Un.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):$f}toLocaleString(t=Rc,r={}){return this.isValid?Un.create(this.loc.clone(r),t).formatDateTime(this):$f}toLocaleParts(t={}){return this.isValid?Un.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Nc(d);const p=t==="extended";let m=Vf(this,p,d);return Tc.indexOf(d)>=3&&(m+="T"),m+=W0(this,p,r,s,l,c,d),m}toISODate({format:t="extended",precision:r="day"}={}){return this.isValid?Vf(this,t==="extended",Nc(r)):null}toISOWeekDate(){return mc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:p="milliseconds"}={}){return this.isValid?(p=Nc(p),(l&&Tc.indexOf(p)>=3?"T":"")+W0(this,d==="extended",r,t,s,c,p)):null}toRFC2822(){return mc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return mc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Vf(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||t)&&(s&&(l+=" "),r?l+="z":t&&(l+="ZZ")),mc(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():$f}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",s={}){if(!this.isValid||!t.isValid)return vt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=wN(r).map(vt.normalizeUnit),d=t.valueOf()>this.valueOf(),p=d?this:t,m=d?t:this,g=kO(p,m,c,l);return d?g.negate():g}diffNow(t="milliseconds",r={}){return this.diff(Ze.now(),t,r)}until(t){return this.isValid?tn.fromDateTimes(this,t):this}hasSame(t,r,s){if(!this.isValid)return!1;const l=t.valueOf(),c=this.setZone(t.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Ze.fromObject({},{zone:this.zone}),s=t.padding?this<r?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=t.unit;return Array.isArray(t.unit)&&(l=t.unit,c=void 0),tb(r,this.plus(s),{...t,numeric:"always",units:l,unit:c})}toRelativeCalendar(t={}){return this.isValid?tb(t.base||Ze.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ze.isDateTime))throw new Bn("min requires all arguments be DateTimes");return I0(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Ze.isDateTime))throw new Bn("max requires all arguments be DateTimes");return I0(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return qw(d,t,r)}static fromStringExplain(t,r,s={}){return Ze.fromFormatExplain(t,r,s)}static buildFormatParser(t,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=Tt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new Vw(c,t)}static fromFormatParser(t,r,s={}){if(Fe(t)||Fe(r))throw new Bn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=Tt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new Bn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:p,zone:m,specificOffset:g,invalidReason:b}=r.explainFromTokens(t);return b?Ze.invalid(b):ds(p,m,s,`format ${r.format}`,t,g)}static get DATE_SHORT(){return Rc}static get DATE_MED(){return P1}static get DATE_MED_WITH_WEEKDAY(){return ZT}static get DATE_FULL(){return F1}static get DATE_HUGE(){return Z1}static get TIME_SIMPLE(){return X1}static get TIME_WITH_SECONDS(){return K1}static get TIME_WITH_SHORT_OFFSET(){return Q1}static get TIME_WITH_LONG_OFFSET(){return W1}static get TIME_24_SIMPLE(){return J1}static get TIME_24_WITH_SECONDS(){return ew}static get TIME_24_WITH_SHORT_OFFSET(){return tw}static get TIME_24_WITH_LONG_OFFSET(){return nw}static get DATETIME_SHORT(){return aw}static get DATETIME_SHORT_WITH_SECONDS(){return rw}static get DATETIME_MED(){return iw}static get DATETIME_MED_WITH_SECONDS(){return sw}static get DATETIME_MED_WITH_WEEKDAY(){return XT}static get DATETIME_FULL(){return ow}static get DATETIME_FULL_WITH_SECONDS(){return lw}static get DATETIME_HUGE(){return cw}static get DATETIME_HUGE_WITH_SECONDS(){return uw}}function To(a){if(Ze.isDateTime(a))return a;if(a&&a.valueOf&&Qr(a.valueOf()))return Ze.fromJSDate(a);if(a&&typeof a=="object")return Ze.fromObject(a);throw new Bn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const VO="3.7.2",qO=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Ze,Duration:vt,FixedOffsetZone:$n,IANAZone:Fa,Info:Ao,Interval:tn,InvalidZone:hw,Settings:nn,SystemZone:qo,VERSION:VO,Zone:Os},Symbol.toStringTag,{value:"Module"}));window.Rete=L2;window.React=o2;window.RefComponent=Vh;window.luxon=qO;window.nodeRegistry=Mn;window.sockets=O1;window.socket=ge;window.apiUrl=kn;window.getApiBase=Gc;window.apiFetch=async function(a,t={}){const r=kn(a);return fetch(r,t)};let Wr={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Ch=new Set;function Fw(a){return Ch.add(a),a({...Wr}),()=>Ch.delete(a)}function Gr(a){Wr={...Wr,...a},Ch.forEach(t=>t({...Wr}))}function GO(){return{...Wr}}async function YO(){Gr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(kn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const t=await a.json(),r=t.length,s=t.filter(m=>m.includes("/00_")),l=t.filter(m=>!m.includes("/00_"));Gr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const g=m.split("/").pop().replace(".js","");Gr({status:`Loading ${g}...`});try{await ab(kn(m)),c++,Gr({loadedCount:c,progress:Math.round(c/r*100)})}catch(b){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,b),Wr.failedPlugins.push({name:g,error:b.message})}}Gr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const g=m.split("/").pop().replace(".js","");try{return await ab(kn(m)),c++,Gr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:g}}catch(b){return console.error(`[PluginLoader] Failed to load ${m}`,b),Wr.failedPlugins.push({name:g,error:b.message}),{success:!1,name:g,error:b.message}}})),p=Wr.failedPlugins.length;Gr({isLoading:!1,progress:100,status:p>0?`Loaded ${c} plugins (${p} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Gr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function ab(a){return new Promise((t,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=t,s.onerror=r,document.body.appendChild(s)})}const Zw=k.createContext(null),rb={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function PO({id:a,type:t,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[p,m]=k.useState(!1),g=rb[t]||rb.info;k.useEffect(()=>{if(s>0){const x=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(x)}},[a,s,l]);const b=()=>{m(!0),setTimeout(()=>l(a),300)},w=()=>{c&&c(),b()};return h.jsxs("div",{className:`toast ${g.className} ${p?"toast-exit":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.icon}),h.jsx("span",{className:"toast-message",children:r}),c&&d&&h.jsx("button",{className:"toast-action",onClick:w,children:d}),h.jsx("button",{className:"toast-close",onClick:b,children:""})]})}function FO({children:a}){const[t,r]=k.useState([]);let s=0;const l=k.useCallback((p,m,g={})=>{const b=++s,w=typeof g=="number"?g:g.duration??4e3,x=typeof g=="object"?g.action:null,E=typeof g=="object"?g.actionLabel:null;return r(_=>[..._,{id:b,type:p,message:m,duration:w,action:x,actionLabel:E}]),b},[]),c=k.useCallback(p=>{r(m=>m.filter(g=>g.id!==p))},[]),d={success:(p,m)=>l("success",p,m),error:(p,m)=>l("error",p,typeof m=="number"?m:{duration:6e3,...m}),warning:(p,m)=>l("warning",p,m),info:(p,m)=>l("info",p,m),dismiss:c,dismissAll:()=>r([])};return h.jsxs(Zw.Provider,{value:d,children:[a,h.jsx("div",{className:"toast-container",children:t.map(p=>h.jsx(PO,{id:p.id,type:p.type,message:p.message,duration:p.duration,onRemove:c,action:p.action,actionLabel:p.actionLabel},p.id))})]})}function rp(){const a=k.useContext(Zw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function ZO(){const a=rp();return k.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const ib=window.location.pathname.includes("/api/hassio/ingress/");function XO({onSave:a,onLoad:t,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:p=!1,onToggleMerged:m}){const[g,b]=k.useState(!1),[w,x]=k.useState(!1),[E,_]=k.useState(!1),[F,V]=k.useState([]),[ee,W]=k.useState(!1),[L,Y]=k.useState(!1),[me,be]=k.useState(!1),[B,he]=k.useState(null),se=rp(),[ye,$e]=k.useState(()=>{const R=localStorage.getItem("dock-position");return R?JSON.parse(R):{x:20,y:20}}),[De,We]=k.useState(!1),[it,Ke]=k.useState({x:0,y:0}),[P,de]=k.useState(!0),[pe,Le]=k.useState(!0),[Q,v]=k.useState(!1),[C,A]=k.useState(new Date),[D,X]=k.useState({backend:ge.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[ue,we]=k.useState({loaded:0,failed:0,total:0}),[Ie,Ye]=k.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Et;const zt=k.useRef(null),Lt=k.useRef(null);k.useEffect(()=>{(async()=>{try{const T=await fetch("/api/version");if(T.ok){const U=await T.json();he(U.version)}}catch{}})()},[]),k.useEffect(()=>{Et=Fw(T=>{let U=0,ce=T.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(U=window.nodeRegistry.getAll().length,(!ce||U>ce)&&(ce=U)):U=T.loadedCount,we({loaded:U,failed:T.failedPlugins?.length||0,total:ce})});const R=T=>{T.target.tagName==="INPUT"||T.target.tagName==="TEXTAREA"||T.target.isContentEditable||(T.key==="?"||T.shiftKey&&T.code==="Slash")&&(T.preventDefault(),x(!0))};return window.addEventListener("keydown",R),()=>window.removeEventListener("keydown",R)},[]),k.useEffect(()=>{const R=()=>{X(Ce=>({...Ce,backend:!0})),ge.emit("request-hue-status")},T=()=>X(Ce=>({...Ce,backend:!1})),U=Ce=>X(oe=>({...oe,ha:{connected:Ce.connected,wsConnected:Ce.wsConnected,deviceCount:Ce.deviceCount||0}})),ce=Ce=>{Ce.hue&&X(oe=>({...oe,hue:Ce.hue})),Ce.kasa&&X(oe=>({...oe,kasa:Ce.kasa}))},le=Ce=>{X(oe=>({...oe,hue:{connected:Ce.connected,deviceCount:Ce.deviceCount||0,bridgeIp:Ce.bridgeIp||null}}))};ge.on("connect",R),ge.on("disconnect",T),ge.on("ha-connection-status",U),ge.on("device-counts",ce),ge.on("hue-connection-status",le);const Ae=Ce=>Ye(Ce),Se=Ce=>Ye(oe=>({...oe,...Ce,running:!0})),He=Ce=>Ye(oe=>({...oe,...Ce,running:!1}));ge.on("engine-status",Ae),ge.on("engine-started",Se),ge.on("engine-stopped",He),X(Ce=>({...Ce,backend:ge.connected})),ge.connected&&(ge.emit("request-hue-status"),ge.emit("request-engine-status"));const Ve=GO();let et=0,_e=Ve.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(et=window.nodeRegistry.getAll().length,(!_e||et>_e)&&(_e=et)):et=Ve.loadedCount,we({loaded:et,failed:Ve.failedPlugins?.length||0,total:_e}),()=>{ge.off("connect",R),ge.off("disconnect",T),ge.off("ha-connection-status",U),ge.off("device-counts",ce),ge.off("hue-connection-status",le),ge.off("engine-status",Ae),ge.off("engine-started",Se),ge.off("engine-stopped",He),Et&&Et()}},[]),k.useEffect(()=>{const R=setInterval(()=>{A(new Date)},1e3);return()=>clearInterval(R)},[]);const Jt=()=>{const R={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return C.toLocaleDateString("en-US",R)};k.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(ye))},[ye]);const ot=R=>{p||R.target.closest(".dock-header")&&(We(!0),Ke({x:R.clientX-ye.x,y:R.clientY-ye.y}))},Bt=R=>{De&&$e({x:R.clientX-it.x,y:R.clientY-it.y})},bn=()=>{We(!1)};k.useEffect(()=>{if(De)return window.addEventListener("mousemove",Bt),window.addEventListener("mouseup",bn),()=>{window.removeEventListener("mousemove",Bt),window.removeEventListener("mouseup",bn)}},[De,it]);const Hn=()=>{Lt.current?.click()},Xe=R=>{const T=R.target.files?.[0];if(T){const U=new FileReader;U.onload=ce=>{try{const le=JSON.parse(ce.target.result);c(le)}catch(le){console.error("Failed to parse JSON:",le),alert("Invalid JSON file")}},U.readAsText(T)}R.target.value=""},q=async()=>{_(!0),W(!0);try{const R=await dn("/api/engine/graphs");if(R.ok){const T=await R.json();V(T.graphs||[])}else se.error("Failed to load graphs list"),V([])}catch(R){console.error("Failed to fetch server graphs:",R),se.error("Failed to connect to server"),V([])}finally{W(!1)}},ne=async R=>{try{const T=await dn(`/api/engine/graphs/${encodeURIComponent(R)}`);if(T.ok){const U=await T.json();U.graph&&(c(U.graph),_(!1),se.success(`Loaded: ${R.replace(".json","")}`))}else se.error("Failed to load graph")}catch(T){console.error("Failed to load graph:",T),se.error("Failed to load graph")}},J=async(R,T)=>{T.stopPropagation();try{const U=await dn(`/api/engine/graphs/${encodeURIComponent(R)}`);if(U.ok){const ce=await U.json();if(ce.graph){const le=new Blob([JSON.stringify(ce.graph,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(le),Se=document.createElement("a");Se.href=Ae,Se.download=R.endsWith(".json")?R:`${R}.json`,Se.click(),URL.revokeObjectURL(Ae),se.success(`Downloaded: ${R.replace(".json","")}`)}}else se.error("Failed to download graph")}catch(U){console.error("Failed to download graph:",U),se.error("Failed to download graph")}},je=async()=>{if(!L){Y(!0);try{const R=await dn("/api/update/check?force=true");if(!R.ok){const U=await R.text();throw new Error(U||`HTTP ${R.status}`)}const T=await R.json();if(T.isAddon){T.hasUpdate?se.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):se.success(` You're up to date! (v${T.currentVersion})`,4e3);return}T.hasUpdate?se.info(` Update available: ${T.currentVersion}  ${T.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ge.emit("request-show-update-modal",T),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:T}))}}):se.success(` You're up to date! (v${T.currentVersion})`,4e3)}catch(R){console.error("Failed to check for updates:",R),se.error("Failed to check for updates: "+R.message,5e3)}finally{Y(!1)}}},Ee=async()=>{if(!me){be(!0);try{const R=await dn("/api/update/plugins/check");if(!R.ok)throw new Error(`HTTP ${R.status}`);const T=await R.json();if(!T.hasUpdates){se.success(" Plugins are up to date!",3e3);return}const U=(T.newPlugins?.length||0)+(T.modifiedPlugins?.length||0);se.info(` ${U} plugin update(s) available. Downloading...`,3e3);const ce=await dn("/api/update/plugins",{method:"POST"});if(!ce.ok)throw new Error(`HTTP ${ce.status}`);const le=await ce.json();le.success&&le.updated?.length>0?se.success(` Updated ${le.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):le.updated?.length===0?se.info("No plugins needed updating",3e3):se.error("Plugin update failed: "+(le.error||"Unknown error"),5e3)}catch(R){console.error("Failed to update plugins:",R),se.error("Failed to update plugins: "+R.message,5e3)}finally{be(!1)}}};return h.jsxs("div",{ref:zt,className:`dock-container ${p?"dock-merged":""}`,style:{...p?{cursor:"default"}:{left:`${ye.x}px`,top:`${ye.y}px`,cursor:De?"grabbing":"default"}},onMouseDown:ot,children:[h.jsxs("div",{className:"dock-header",style:{cursor:p?"default":"grab"},children:[h.jsxs("div",{className:"dock-header-row",children:[h.jsx("span",{className:"dock-title",children:" Control Panel"}),h.jsx("button",{type:"button",className:"dock-btn-small",onClick:R=>{R.stopPropagation(),m?.()},onMouseDown:R=>R.stopPropagation(),title:p?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:p?"Pop out":"Merge"})]}),h.jsx("span",{className:"dock-datetime",children:Jt()})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>de(!P),children:h.jsxs("span",{children:[P?"":""," Graph Tools ",d&&h.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),P&&h.jsxs("div",{className:"dock-section-content",children:[h.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),h.jsx("button",{onClick:t,className:"dock-btn",children:" Load Last"}),h.jsx("button",{onClick:q,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),h.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),h.jsx("button",{onClick:Hn,className:"dock-btn",children:" Import File"}),h.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),h.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),h.jsx("button",{onClick:()=>ge.emit(Ie.running?"stop-engine":"start-engine"),className:`dock-btn ${Ie.running?"dock-btn-active":""}`,title:Ie.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Ie.running?" Stop Engine":" Start Engine"}),h.jsx("input",{ref:Lt,type:"file",accept:".json",style:{display:"none"},onChange:Xe})]})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>Le(!pe),children:h.jsxs("span",{children:[pe?"":""," Connection Status"]})}),pe&&h.jsxs("div",{className:"dock-section-content dock-status-grid",children:[h.jsxs("div",{className:`dock-status-item ${D.backend?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Backend"}),h.jsx("span",{className:"dock-status-value",children:D.backend?"Connected":"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${D.ha.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),h.jsx("span",{className:"dock-status-value",children:D.ha.connected?`${D.ha.deviceCount} devices`:"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${D.hue.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),h.jsx("span",{className:"dock-status-value",children:D.hue.connected?`${D.hue.deviceCount||0} lights${D.hue.bridgeIp?` (${D.hue.bridgeIp})`:""}`:"Offline"})]}),D.kasa.deviceCount>0&&h.jsxs("div",{className:`dock-status-item ${D.kasa.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Kasa"}),h.jsxs("span",{className:"dock-status-value",children:[D.kasa.deviceCount," devices"]})]}),h.jsxs("div",{className:"dock-status-item plugins",children:[h.jsx("span",{className:"dock-status-dot",style:{background:ue.failed>0?"#f59e0b":"#10b981"}}),h.jsx("span",{className:"dock-status-label",children:"Plugins"}),h.jsx("span",{className:"dock-status-value",children:ue.total>0?`${ue.loaded} / ${ue.total} loaded${ue.failed>0?` (${ue.failed} failed)`:""}`:`${ue.loaded} loaded`})]}),h.jsxs("div",{className:`dock-status-item ${Ie.running?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot",style:{background:Ie.running?"#10b981":"#6b7280"}}),h.jsx("span",{className:"dock-status-label",children:"Engine"}),h.jsx("span",{className:"dock-status-value",children:Ie.running?`Running (${Ie.nodeCount} nodes)`:"Stopped"})]})]})]}),h.jsx(PC,{isExpanded:Q,onToggle:()=>v(!Q)}),h.jsxs("div",{className:"dock-section",children:[h.jsxs("div",{className:"dock-section-content",children:[h.jsx("button",{onClick:()=>b(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),h.jsx("button",{onClick:()=>x(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),h.jsx("button",{onClick:async()=>{let R=B||"unknown";try{const le=await fetch("/api/version");le.ok&&(R=(await le.json()).version||R)}catch{}const T={version:R,userAgent:navigator.userAgent,isAddon:ib,backend:D.backend,ha:D.ha.connected,engine:Ie.running,plugins:ue.loaded},U=Object.entries(T).map(([le,Ae])=>`- **${le}**: ${Ae}`).join(`
`),ce=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");ce.searchParams.set("template","bug_report.md"),ce.searchParams.set("title","[Bug]: "),ce.searchParams.set("body",`##  Environment (auto-filled)
${U}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(ce.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),h.jsx("button",{onClick:()=>{const R=`${window.location.origin}/tools/debug_dashboard.html`;window.open(R,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),ib?h.jsx("button",{onClick:()=>se.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):h.jsx("button",{onClick:je,disabled:L,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:L?" Checking...":" Check for Updates"}),h.jsx("button",{onClick:Ee,disabled:me,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:me?" Updating...":" Update Plugins"})]}),B&&h.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",B]})]}),h.jsx(qC,{isOpen:g,onClose:()=>b(!1)}),h.jsx(YC,{isOpen:w,onClose:()=>x(!1)}),E&&h.jsx("div",{className:"modal-overlay",onClick:()=>_(!1),children:h.jsxs("div",{className:"modal server-graphs-modal",onClick:R=>R.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{children:" Saved Graphs"}),h.jsx("button",{className:"modal-close",onClick:()=>_(!1),children:""})]}),h.jsx("div",{className:"modal-body",children:ee?h.jsx("div",{className:"loading-message",children:"Loading graphs..."}):F.length===0?h.jsxs("div",{className:"empty-message",children:[h.jsx("p",{children:"No saved graphs found."}),h.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):h.jsx("div",{className:"graphs-list",children:F.map((R,T)=>h.jsxs("div",{className:"graph-item",children:[h.jsxs("div",{className:"graph-info",onClick:()=>ne(R.name),title:"Click to load this graph",children:[h.jsx("span",{className:"graph-name",children:R.displayName}),h.jsx("span",{className:"graph-date",children:new Date(R.modified).toLocaleDateString()})]}),h.jsx("button",{className:"graph-download-btn",onClick:U=>J(R.name,U),title:"Download this graph to your computer",children:""})]},T))})})]})})]})}function KO({dockSlotRef:a}){const[t,r]=k.useState(!0),[s,l]=k.useState(!0),[c,d]=k.useState(null),[p,m]=k.useState(null),[g,b]=k.useState(ge?.connected??!1),[w,x]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,_]=k.useState(new Map),[F,V]=k.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[ee,W]=k.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[L,Y]=k.useState(null),[me,be]=k.useState(null),[B,he]=k.useState(null),[se,ye]=k.useState(!1),$e=k.useRef(null);k.useEffect(()=>{(async()=>{try{const v=await dn(kn("/api/settings"));if(v.ok){const C=await v.json(),A={tempSensor:C.FORECAST_TEMP_SENSOR||null,windSensor:C.FORECAST_WIND_SENSOR||null,windDirSensor:C.FORECAST_WIND_DIR_SENSOR||null,rainSensor:C.FORECAST_RAIN_SENSOR||null};(A.tempSensor||A.windSensor||A.windDirSensor||A.rainSensor)&&(be(A),De(A))}}catch(v){console.warn("Could not fetch forecast sensor config:",v)}})()},[]);const De=async Q=>{if(!Q)return;const v={source:"ha-sensors"};try{if(Q.tempSensor){const C=await dn(kn(`/api/lights/ha/${Q.tempSensor}/state`));if(C.ok){const A=await C.json();v.temp=parseFloat(A.state)}}if(Q.windSensor){const C=await dn(kn(`/api/lights/ha/${Q.windSensor}/state`));if(C.ok){const A=await C.json();v.windSpeed=parseFloat(A.state)}}if(Q.windDirSensor){const C=await dn(kn(`/api/lights/ha/${Q.windDirSensor}/state`));if(C.ok){const A=await C.json();v.windDir=parseFloat(A.state)}}if(Q.rainSensor){const C=await dn(kn(`/api/lights/ha/${Q.rainSensor}/state`));if(C.ok){const A=await C.json();v.rainRate=parseFloat(A.state)}}v.temp!==void 0&&Y(C=>({...C,...v}))}catch(C){console.warn("Error fetching sensor values:",C)}};k.useEffect(()=>{if(!ge)return;const Q=()=>{b(!0),ge.emit("request-ha-status")},v=()=>{b(!1),x({connected:!1,wsConnected:!1,deviceCount:0})},C=X=>{x(X)};ge.on("connect",Q),ge.on("disconnect",v),ge.on("ha-connection-status",C),ge.on("forecast-update",X=>{d(X)});const A=X=>{Y(ue=>ue?.source==="ha-sensors"||me?.tempSensor?ue:{temp:X.tempf,humidity:X.humidity,windSpeed:X.windspeedmph,windDir:X.winddir,rainRate:X.hourlyrainin,dailyRain:X.dailyrainin,source:X._source||"ambient"})};ge.on("weather-update",A),me?.tempSensor||ge.emit("request-weather-update");const D=X=>{const{id:ue,state:we,on:Ie,name:Ye}=X;if(!ue)return;if(me){const Jt=ue.replace("ha_","");if(Jt===me.tempSensor){const ot=parseFloat(we);isNaN(ot)||Y(Bt=>({...Bt,temp:ot,source:"ha-sensors"}))}else if(Jt===me.windSensor){const ot=parseFloat(we);isNaN(ot)||Y(Bt=>({...Bt,windSpeed:ot}))}else if(Jt===me.windDirSensor){const ot=parseFloat(we);isNaN(ot)||Y(Bt=>({...Bt,windDir:ot}))}else if(Jt===me.rainSensor){const ot=parseFloat(we);isNaN(ot)||Y(Bt=>({...Bt,rainRate:ot}))}}const Et=Ie!==void 0?Ie:we==="on"||we==="playing"||we==="open",zt=Ye||X.friendly_name||X.attributes?.friendly_name||ue.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(ue.includes("light.")||ue.includes("switch.")||ue.startsWith("kasa_"))&&_(Jt=>{const ot=new Map(Jt);return Et?ot.set(ue,{name:zt,on:!0}):ot.delete(ue),ot})};return ge.on("device-state-update",D),ge.emit("request-forecast"),ge.connected&&(b(!0),ge.emit("request-ha-status")),()=>{ge.off("connect",Q),ge.off("disconnect",v),ge.off("ha-connection-status",C),ge.off("forecast-update"),ge.off("weather-update",A),ge.off("device-state-update",D)}},[me]),k.useEffect(()=>{if(!ge||p===null){he(null);return}ye(!0);const Q=v=>{ye(!1),v.error?(console.warn("Hourly rain fetch error:",v.error),he(null)):he(v)};return ge.on("hourly-rain-update",Q),ge.emit("request-hourly-rain",{dayOffset:p}),()=>{ge.off("hourly-rain-update",Q)}},[p]);const We=()=>{ge?.emit("request-forecast"),me?.tempSensor?De(me):ge?.emit("request-weather-update")},it=Q=>{if(Q==null)return"";const v=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],C=Math.round(Q/22.5)%16;return v[C]},Ke=Q=>{const v=(Q||"").toLowerCase();return v.includes("clear")||v.includes("sun")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"5"}),h.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),h.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),h.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),h.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),h.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),h.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):v.includes("rain")||v.includes("drizzle")||v.includes("shower")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),h.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),h.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),h.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):v.includes("partly")||v.includes("partial")||v.includes("few")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),h.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),h.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),h.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),h.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):v.includes("snow")||v.includes("flurr")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),h.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),h.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),h.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),h.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),h.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):v.includes("thunder")||v.includes("storm")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),h.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):v.includes("fog")||v.includes("mist")||v.includes("haze")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),h.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):h.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},P=Q=>{if(!Q)return{day:"",date:""};let v;if(typeof Q=="string"&&Q.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const D=Q.match(/(\w+),\s*(\w+)\s*(\d+)/);return D?{day:`${D[1]}, ${D[2]}`,date:D[3]}:{day:Q,date:""}}if(v=new Date(parseInt(Q)||Q),isNaN(v.getTime()))return{day:Q,date:""};const C=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${C[v.getUTCDay()]}, ${A[v.getUTCMonth()]}`,date:`${v.getUTCDate()}`}},de=()=>{if(!c||!c.length)return h.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(p!==null){const Q=c[p],v=P(Q.date||Q.day);return h.jsxs("div",{className:"forecast-detail",children:[h.jsxs("div",{className:"forecast-detail-header",children:[h.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),h.jsxs("span",{className:"detail-date",children:[v.day," ",v.date]})]}),h.jsxs("div",{className:"detail-main",children:[h.jsx("div",{className:"detail-icon",children:Ke(Q.conditions||Q.condition)}),h.jsxs("div",{className:"detail-temps",children:[h.jsxs("div",{className:"detail-high",children:[Q.high,""]}),h.jsxs("div",{className:"detail-low",children:[Q.low,""]})]}),h.jsx("div",{className:"detail-condition",children:Q.conditions||Q.condition||"N/A"})]}),Q.description&&h.jsx("div",{className:"detail-description",children:Q.description}),h.jsxs("div",{className:"detail-stats",children:[h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Precipitation"}),h.jsx("span",{className:"stat-value",children:Q.precipitation||Q.precip||"0%"})]}),Q.humidity&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Humidity"}),h.jsxs("span",{className:"stat-value",children:[Q.humidity,"%"]})]}),Q.wind&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Wind"}),h.jsx("span",{className:"stat-value",children:Q.wind})]}),(Q.sunrise||Q.sunset)&&h.jsxs("div",{className:"detail-sun-times",children:[Q.sunrise&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunrise"}),h.jsx("span",{className:"stat-value",children:Q.sunrise})]}),Q.sunset&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunset"}),h.jsx("span",{className:"stat-value",children:Q.sunset})]})]})]}),h.jsxs("div",{className:"rain-timeline-section",children:[h.jsx("div",{className:"rain-timeline-header",children:h.jsx("span",{className:"rain-timeline-title",children:" Hourly Rain Forecast"})}),se?h.jsx("div",{className:"rain-timeline-loading",children:"Loading..."}):B&&B.hours?h.jsxs(h.Fragment,{children:[B.summary&&h.jsx("div",{className:"rain-summary",children:B.summary}),h.jsx("div",{className:"rain-timeline",children:B.hours.map((C,A)=>{const D=Math.max(4,C.probability),X=C.intensity||"none",ue=C.displayTime||`${C.hour||0}:00`;return h.jsxs("div",{className:`rain-bar-wrapper ${X!=="none"?"has-rain":""}`,title:`${ue}: ${C.probability}% chance${C.amountIn>0?`, ${C.amountIn}"`:""}`,children:[A%4===0&&C.probability>0&&h.jsxs("span",{className:"rain-prob-label",children:[C.probability,"%"]}),h.jsx("div",{className:`rain-bar rain-${X}`,style:{height:`${D}%`}}),A%4===0&&h.jsx("span",{className:"rain-hour-label",children:ue})]},A)})}),h.jsxs("div",{className:"rain-legend",children:[h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-none"}),"Dry"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-light"}),"Light"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-moderate"}),"Moderate"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-heavy"}),"Heavy"]})]})]}):h.jsx("div",{className:"rain-timeline-empty",children:"No rain expected"})]})]})}return c.slice(0,5).map((Q,v)=>{const C=P(Q.date||Q.day),A=v===0;return h.jsxs("div",{className:`forecast-card ${A&&L?"forecast-card-today":""}`,onClick:()=>m(v),children:[h.jsxs("div",{className:"forecast-row-top",children:[h.jsxs("div",{className:"forecast-date",children:[h.jsx("span",{className:"date-day",children:C.day}),h.jsx("span",{className:"date-num",children:C.date})]}),h.jsx("div",{className:"forecast-icon",children:Ke(Q.conditions||Q.condition)})]}),A&&L&&h.jsxs("div",{className:"station-data",children:[h.jsxs("div",{className:"station-current-temp",children:[Math.round(L.temp),"",h.jsx("span",{className:"station-label",children:"now"})]}),h.jsxs("div",{className:"station-details",children:[h.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(L.windSpeed||0)," mph ",it(L.windDir)]}),L.rainRate>0&&h.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",L.rainRate.toFixed(2),'"/hr']})]})]}),h.jsxs("div",{className:"forecast-row-bottom",children:[h.jsxs("span",{className:"temp-low",children:[Q.low,""]}),h.jsxs("span",{className:"temp-high",children:[Q.high,""]}),h.jsxs("span",{className:"precip-group",children:[h.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("path",{d:"M16 14v4"}),h.jsx("path",{d:"M8 14v4"}),h.jsx("path",{d:"M12 16v4"})]}),h.jsx("span",{className:"precip-value",children:Q.precipitation||Q.precip||"0%"})]})]})]},v)})},pe=Q=>{Q.preventDefault();const v=Q.clientX,C=F,A=X=>{const ue=v-X.clientX,we=Math.max(250,Math.min(500,C+ue));V(we),localStorage.setItem("forecastPanelWidth",we)},D=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",D)},Le=Q=>{Q.preventDefault(),Q.stopPropagation();const v=Q.clientY,C=ee,A=X=>{const ue=v-X.clientY,we=Math.max(100,Math.min(500,C+ue));W(we),localStorage.setItem("devicesOnHeight",we)},D=()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",D)};return h.jsxs("div",{className:"forecast-panel",style:{width:F},children:[h.jsx("div",{className:"forecast-resize-handle",ref:$e,onMouseDown:pe,children:h.jsx("div",{className:"forecast-resize-grip"})}),h.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!t),children:[h.jsx("span",{children:"5-Day Forecast"}),h.jsx("button",{onClick:Q=>{Q.stopPropagation(),We()},className:"forecast-refresh-btn",children:"Refresh"})]}),t&&h.jsx("div",{className:"forecast-panel-content",children:de()}),h.jsx("div",{className:"forecast-dock-slot",ref:a}),h.jsxs("div",{className:"devices-on-section",style:{height:s?ee:"auto"},children:[h.jsx("div",{className:"devices-resize-handle",onMouseDown:Le,children:h.jsx("div",{className:"devices-resize-grip"})}),h.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[h.jsxs("span",{children:["Devices ON (",E.size,")"]}),h.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&h.jsx("div",{className:"devices-on-list",children:E.size===0?h.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((Q,v)=>Q.name.localeCompare(v.name)).map((Q,v)=>h.jsxs("div",{className:"device-on-item",children:[h.jsx("span",{className:"device-on-indicator"}),h.jsx("span",{className:"device-on-name",children:Q.name})]},v))})]}),h.jsxs("div",{className:"status-indicators",children:[h.jsx("div",{className:`connection-status ${g?"connected":"disconnected"}`,children:g?"Backend":"Backend X"}),h.jsx("div",{className:`connection-status ${w.connected?"connected":"disconnected"}`,children:w.connected?`HA (${w.deviceCount})`:"HA X"})]})]})}function QO({width:a=180,panelRef:t,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const p=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,g=(s||[]).reduce((w,x)=>w+(x?.labels||[]).length,0),b=w=>{const x=(w||"").toString().trim();x&&c?.(x)};return h.jsxs("div",{ref:t,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:w=>w.stopPropagation(),children:[h.jsx("div",{className:"favorites-header",children:h.jsxs("div",{className:"favorites-header-row",children:[h.jsx("span",{className:"favorites-title",children:" Favorites"}),p?h.jsx(p,{text:m,position:"bottom",children:h.jsx("span",{className:"favorites-help-fallback",children:"?"})}):h.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),h.jsx("div",{className:"favorites-list",children:g===0?h.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(w=>{const x=(w?.category||"Other").toString(),E=Array.isArray(w?.labels)?w.labels:[];return E.length===0?null:h.jsxs("div",{className:"favorites-group",children:[h.jsx("div",{className:"favorites-divider",children:h.jsx("span",{className:"favorites-divider-text",children:x})}),E.map(_=>h.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(_),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),b(_)},title:"Click: add to canvas  Right-click: remove",children:_},`${x}:${_}`))]},x)})})]})}function WO({isOpen:a,onClose:t,onSave:r,currentGraphData:s}){const[l,c]=k.useState(""),[d,p]=k.useState([]),[m,g]=k.useState(!1),[b,w]=k.useState(!1),[x,E]=k.useState(null),_=k.useRef(null);k.useEffect(()=>{a&&(F(),setTimeout(()=>_.current?.focus(),100))},[a]);const F=async()=>{g(!0),E(null);try{const Y=await(await fetch(kn("/api/engine/graphs"))).json();Y.success?p(Y.graphs||[]):E("Failed to load existing graphs")}catch(L){console.error("[SaveModal] Error fetching graphs:",L),E("Failed to connect to server")}finally{g(!1)}},V=async()=>{if(!l.trim()){E("Please enter a filename");return}w(!0),E(null);try{const Y=await(await fetch(kn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();Y.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${Y.filename}"`,3e3),r?.(Y.filename),t()):E(Y.error||"Failed to save graph")}catch(L){console.error("[SaveModal] Error saving:",L),E("Failed to save graph")}finally{w(!1)}},ee=L=>{L.key==="Enter"&&!b?V():L.key==="Escape"&&t()},W=L=>{const Y=L.replace(".json","");c(Y),_.current?.focus()};return a?h.jsx("div",{className:"save-modal-overlay",onClick:t,children:h.jsxs("div",{className:"save-modal",onClick:L=>L.stopPropagation(),children:[h.jsxs("div",{className:"save-modal-header",children:[h.jsx("h2",{children:" Save Graph"}),h.jsx("button",{className:"save-modal-close",onClick:t,children:""})]}),h.jsxs("div",{className:"save-modal-content",children:[h.jsxs("div",{className:"save-modal-input-section",children:[h.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),h.jsxs("div",{className:"save-modal-input-row",children:[h.jsx("input",{ref:_,id:"graph-filename",type:"text",value:l,onChange:L=>c(L.target.value),onKeyDown:ee,placeholder:"my_automation_graph",disabled:b}),h.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),x&&h.jsxs("div",{className:"save-modal-error",children:[" ",x]}),h.jsxs("div",{className:"save-modal-existing",children:[h.jsxs("h3",{children:["Existing Graphs ",m&&h.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?h.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):h.jsx("ul",{className:"save-modal-list",children:d.map(L=>h.jsxs("li",{onClick:()=>W(L.name),className:l===L.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(L.modified).toLocaleString()}`,children:[h.jsx("span",{className:"graph-name",children:L.displayName}),h.jsx("span",{className:"graph-date",children:new Date(L.modified).toLocaleDateString()})]},L.name))})]})]}),h.jsxs("div",{className:"save-modal-footer",children:[h.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:t,disabled:b,children:"Cancel"}),h.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:V,disabled:b||!l.trim(),children:b?"Saving...":" Save"})]})]})}):null}function JO({visible:a,position:t,items:r,onClose:s,onSelect:l}){const c=k.useRef(null),d=k.useRef(null),[p,m]=k.useState(null),[g,b]=k.useState({x:0,y:0}),[w,x]=k.useState(""),E=k.useRef(null),_=k.useRef(null);k.useEffect(()=>{a&&(x(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const F=k.useMemo(()=>{if(!w.trim())return r;const B=w.toLowerCase(),he=[];for(const se of r)if(se.subitems)for(const ye of se.subitems)ye.label&&ye.label.toLowerCase().includes(B)&&he.push({...ye,categoryHint:se.label});else se.label&&se.label.toLowerCase().includes(B)&&he.push(se);return he},[r,w]),V=w.trim().length>0;k.useEffect(()=>{if(!a)return;const B=se=>{c.current&&!c.current.contains(se.target)&&s()},he=se=>{se.key==="Escape"&&s()};return document.addEventListener("mousedown",B),document.addEventListener("keydown",he),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",he)}},[a,s]),k.useEffect(()=>()=>{E.current&&clearTimeout(E.current),_.current&&clearTimeout(_.current)},[]);const ee=k.useCallback((B,he,se)=>{_.current&&(clearTimeout(_.current),_.current=null),he.subitems&&he.subitems.length>0?m(se):m(null)},[]),W=k.useCallback(()=>{_.current=setTimeout(()=>{m(null)},150)},[]),L=k.useCallback(()=>{_.current&&(clearTimeout(_.current),_.current=null)},[]),Y=k.useCallback(()=>{_.current=setTimeout(()=>{m(null)},100)},[]),me=k.useCallback(B=>{B.subitems&&B.subitems.length>0||(l(B),s())},[l,s]);if(!a)return null;const be={...t};if(typeof window<"u"){const he=Math.min(F.length*36+50,400);t.x+220>window.innerWidth&&(be.x=window.innerWidth-220-10),t.y+he>window.innerHeight&&(be.y=Math.max(10,window.innerHeight-he-10))}return h.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:be.x,top:be.y},children:[h.jsxs("div",{className:"fast-menu-search",children:[h.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:w,onChange:B=>x(B.target.value),onClick:B=>B.stopPropagation(),onKeyDown:B=>{if(B.key==="Enter"&&F.length===1){const he=F[0];he.subitems||me(he)}B.stopPropagation()}}),w&&h.jsx("span",{className:"search-clear",onClick:B=>{B.stopPropagation(),x(""),d.current?.focus()},children:""})]}),h.jsx("div",{className:"fast-menu-results",children:F.length===0?h.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):V?F.map((B,he)=>h.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>me(B),children:[h.jsx("span",{className:"menu-label",children:B.label}),B.categoryHint&&h.jsx("span",{className:"category-hint",children:B.categoryHint})]},B.label||he)):F.map((B,he)=>h.jsxs("div",{className:`fast-menu-item ${B.subitems?"has-submenu":""} ${p===he?"active":""}`,onMouseEnter:se=>ee(se,B,he),onMouseLeave:W,onClick:()=>me(B),children:[B.icon&&h.jsx("span",{className:"menu-icon",children:B.icon}),h.jsx("span",{className:"menu-label",children:B.label}),B.subitems&&h.jsx("span",{className:"submenu-arrow",children:""}),p===he&&B.subitems&&h.jsx("div",{className:"fast-submenu",onMouseEnter:L,onMouseLeave:Y,children:B.subitems.map((se,ye)=>h.jsx("div",{className:"fast-menu-item",title:se.description||"",onClick:$e=>{$e.stopPropagation(),me(se)},children:h.jsx("span",{className:"menu-label",children:se.label})},se.label||ye))})]},B.label||he))})]})}function sb(a){const t=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))t.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&t.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):t.push(`Node at index ${c} is missing "id"`),l.label||t.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&t.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))t.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||t.push(`Connection ${d} references non-existent source node: ${c.source}`):t.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||t.push(`Connection ${d} references non-existent target node: ${c.target}`):t.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const p=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(p)&&r.push(`Duplicate connection: ${p}`),l.add(p),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:t.length===0,errors:t,warnings:r}}function ob(a){const t=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],t.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],t.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,p)=>{if(!d.id)return t.push(`Removed node at index ${p} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${p}`;t.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",t.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},t.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,t.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,t.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,p)=>l.has(d.source)?l.has(d.target)?!0:(t.push(`Removed connection ${p} (invalid target: ${d.target})`),r=!0,!1):(t.push(`Removed connection ${p} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,t.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,t.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,t.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:t}}class wj extends Xt.Control{constructor(t,r){super(),this.label=t,this.onClick=r}}function ej({data:a}){return h.jsx("button",{onPointerDown:t=>t.stopPropagation(),onDoubleClick:t=>t.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.25)",t.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.1)",t.currentTarget.style.boxShadow="none"},children:a.label})}class Sj extends Xt.Control{constructor(t,r,s,l){super(),this.label=t,this.values=r,this.value=s,this.onChange=l}setValue(t){this.value=t}}function tj({data:a}){const[,t]=k.useReducer(d=>d+1,0),[r,s]=k.useState(a.value);k.useEffect(()=>{s(a.value)},[a.value]),k.useEffect(()=>{t()},[a]);const l=d=>{const p=d.target.value;s(p),typeof a.setValue=="function"?a.setValue(p):a.value=p,a.onChange&&a.onChange(p)},c=a.values||[];return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,p)=>h.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${p}-${d}`))})]})}class xj extends Xt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function nj({data:a}){const[t,r]=k.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Xt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function aj({data:a}){const[t,r]=k.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[h.jsx("input",{type:"checkbox",checked:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),h.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Ej extends Xt.Control{constructor(t,r,s,l={}){super(),this.label=t,this.value=r,this.onChange=s,this.options=l}}function rj({data:a}){const[t,r]=k.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"number",value:t,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Cj extends Xt.Control{constructor(t,r,s,l="text"){super(),this.label=t,this.value=r,this.onChange=s,this.type=l}}function ij({data:a}){const[t,r]=k.useState(a.value);k.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:a.type||"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Tj extends Xt.Control{constructor(t,r){super(),this.deviceId=t,this.getState=r}}function sj({data:a}){const t=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!t)return h.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:h.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=t.on||t.state==="on",l=t.attributes&&typeof t.attributes.brightness=="number"?Number(t.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof t.brightness=="number"&&Number.isFinite(t.brightness)?c=t.brightness>100?Math.round(t.brightness/255*100):Math.round(t.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=t.hs_color||[0,0],[p,m]=d;let g="#e74c3c";s&&(m===0?g="#f1c40f":g=`hsl(${p}, ${m}%, 50%)`);const b={width:"14px",height:"14px",borderRadius:"50%",background:g,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:g,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${g}`:"none"};return h.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[h.jsx("div",{style:b}),h.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:t.name||a.deviceId})]}),h.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&h.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${g})`,transition:"width 0.3s ease-out"}})})]})}function oj(a){const{state:t,color:r}=a.data.data||{},s=t==="on"||t==="open"||t==="playing",l=r||(s?"#00f3ff":"#333");return h.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[h.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),h.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function lj(a){const[,t]=k.useState(0);k.useEffect(()=>{let w=JSON.stringify(a.data.data||{});const x=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==w&&(w=E,t(_=>_+1))},100);return()=>clearInterval(x)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let p="#444";s&&s.length===2?p=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(p="#ffaa00");const m=c==="on"||d===!0;let g=typeof r=="number"&&Number.isFinite(r)?r:0;g>100&&(g=g/255*100),g=Math.max(0,Math.min(100,g));const b=m?g:0;return h.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:w=>w.stopPropagation(),children:h.jsx("div",{style:{width:`${b}%`,height:"100%",backgroundColor:p,transition:"all 0.3s ease",boxShadow:b>0?`0 0 10px ${p}`:"none"}})})}function cj(a){const{power:t,energy:r}=a.data.data||{};return t===null&&r===null?h.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):h.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"PWR:"}),h.jsx("span",{style:{color:"#00f3ff"},children:t!==null?`${t} W`:"--"})]}),r!==null&&h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"NRG:"}),h.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const uj=window.EDITOR_DEBUG,Te=(...a)=>uj&&console.debug("[Editor]",...a),dj=Ra.memo(({data:a,socketKey:t,side:r})=>{let l=a?.name||"any";if(t&&typeof t=="string"){const d=t.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${t||"socket"} (${l})`;return Ra.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function fj(){const a=k.useRef(null),[t,r]=k.useState(null),[s,l]=k.useState(null),[c,d]=k.useState(null),[p,m]=k.useState(null),[g,b]=k.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),w=k.useRef(null),x=k.useRef(null);k.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(g))}catch{}},[g]);const E=k.useRef(!1),_=k.useRef(new Set),F=k.useRef(null),V=k.useRef(!1),ee=k.useRef(null),W=k.useRef(null),L=k.useRef(null),Y=k.useRef({x:0,y:0}),me=k.useRef(!1),be=k.useRef([]),[B,he]=k.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),se=180,ye="favoriteNodes",[$e,De]=k.useState(()=>{try{const q=localStorage.getItem(ye),ne=q?JSON.parse(q):null,J=R=>{const T=[];for(const U of Array.isArray(R)?R:[]){if(typeof U!="string")continue;const ce=U.trim();ce&&(T.includes(ce)||T.push(ce))}return T};if(Array.isArray(ne)){const R=J(ne);return R.length?[{category:"Other",labels:R}]:[]}const je=Array.isArray(ne?.groups)?ne.groups:Array.isArray(ne?.favoriteGroups)?ne.favoriteGroups:Array.isArray(ne)?ne:null;if(!je)return[];const Ee=[];for(const R of je){const T=(R?.category||"Other").toString().trim()||"Other",U=J(R?.labels);U.length!==0&&Ee.push({category:T,labels:U})}return Ee}catch{return[]}}),We=k.useRef(null),[it,Ke]=k.useState(!1),P=k.useRef(null),[de,pe]=k.useState(!1),[Le,Q]=k.useState(null);k.useEffect(()=>{try{localStorage.setItem(ye,JSON.stringify({version:2,groups:$e}))}catch{}},[$e]);const v=k.useCallback(q=>{const ne=(q||"").toString().trim();if(!ne)return;const je=(Mn.getByLabel(ne)?.category||"Other").toString().trim()||"Other";De(Ee=>{for(const U of Ee)if(Array.isArray(U?.labels)&&U.labels.includes(ne))return Ee;const R=Ee.map(U=>({category:U.category,labels:[...U.labels]})),T=R.findIndex(U=>U.category===je);return T===-1?R.push({category:je,labels:[ne]}):R[T].labels.push(ne),R})},[]),C=k.useCallback(q=>{const ne=(q||"").toString().trim();ne&&De(J=>{const je=[];for(const Ee of J){const R=(Ee?.labels||[]).filter(T=>T!==ne);R.length!==0&&je.push({category:Ee.category,labels:R})}return je})},[]),A=k.useCallback(async q=>{const ne=a.current,J=ee.current,je=W.current;if(!ne||!J||!je)return;const Ee=ne.getBoundingClientRect(),R={x:Ee.left+Ee.width/2,y:Ee.top+Ee.height/2};try{const ce=window._t2GetMenuItems;if(typeof ce=="function"){const le=ce();for(const Ae of le||[])for(const Se of Ae.subitems||[])if(Se.label===q&&typeof Se.handler=="function"){await Se.handler(R);return}}}catch(ce){console.warn("[Favorites] Failed to create via context handlers:",ce)}const T=Mn.getByLabel(q);if(!T)return;const U=()=>{try{F.current?.()}catch{}};try{const ce=T.factory(U);await J.addNode(ce);const le=je.area.transform,Ae=(R.x-le.x)/le.k,Se=(R.y-le.y)/le.k;await je.translate(ce.id,{x:Ae,y:Se}),q==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(ce){console.warn("[Favorites] Fallback create failed:",ce)}},[]);k.useEffect(()=>{try{const q=Mn.getAll();if(q.length===0)return;const ne=new Map;for(const J of q)J?.label&&ne.set(J.label,(J.category||"Other").toString().trim()||"Other");De(J=>{const je=[],Ee=new Map,R=(T,U)=>{Ee.has(T)||(Ee.set(T,[]),je.push(T));const ce=Ee.get(T);ce.includes(U)||ce.push(U)};for(const T of J)for(const U of T?.labels||[]){const ce=ne.get(U);ce&&R(ce,U)}return je.map(T=>({category:T,labels:Ee.get(T)})).filter(T=>T.labels.length>0)})}catch{}},[t]);const D=k.useCallback(async q=>{await new Promise(I=>{const fe=()=>{const ve=q.getBoundingClientRect();ve.width>0&&ve.height>0?I():requestAnimationFrame(fe)};requestAnimationFrame(fe)});const ne=new Jr,J=new _b(q),je=new kk,Ee=new OC({createRoot:ub.createRoot}),R=new $C;ne.use(R);let T=0,U=0,ce=Date.now();window._t2PerfStats=()=>{const I=(Date.now()-ce)/1e3;return console.log(`[Perf] In ${I.toFixed(1)}s: ${T} process calls, ${U} skipped (${(T/I).toFixed(1)}/sec)`),{calls:T,skipped:U,perSecond:T/I}},window._t2PerfReset=()=>{T=0,U=0,ce=Date.now(),console.log("[Perf] Stats reset")};let le=null;const Ae=()=>{const I=ne?.getNodes?.()?.length||0;return I<50?16:I<100?32:I<150?50:100};let Se=!1;const He=async()=>{if(Se){U++;return}if(le)return;T++;const I=Ae();le=setTimeout(async()=>{le=null,Se=!0;try{const fe=ne.getNodes(),ve=ne.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",fe.map(Ne=>`${Ne.id}:${Ne.label}`)),console.log("[Editor] process() - connections:",ve.map(Ne=>`${Ne.source}:${Ne.sourceOutput} -> ${Ne.target}:${Ne.targetInput}`)),window._debugProcess=!1),R.reset();for(const Ne of fe)try{await R.fetch(Ne.id)}catch{}}finally{Se=!1}},I)},Ve=async()=>{if(!Se){le&&(clearTimeout(le),le=null),Se=!0;try{R.reset();for(const I of ne.getNodes())try{await R.fetch(I.id)}catch{}}finally{Se=!1}}},et=new Set;let _e=null;const Ce=I=>{et.add(I),_e||(_e=setTimeout(()=>{_e=null,et.forEach(fe=>{J.update("node",fe)}),et.clear(),He()},16))},oe=()=>{He()},At=()=>{const I=Mn.getAll(),fe={};I.forEach(Ne=>{const nt=Ne.category||"Other";fe[nt]||(fe[nt]=[]),fe[nt].push({label:Ne.label,order:Ne.order,description:Ne.description,handler:async Gt=>{let on;const ln=()=>{Ne.updateStrategy==="dataflow"?oe():Ce(on.id)};on=Ne.factory(ln),await ne.addNode(on);const Yt=J.area.transform,Sn=(Gt.x-Yt.x)/Yt.k,bt=(Gt.y-Yt.y)/Yt.k;await J.translate(on.id,{x:Sn,y:bt}),Ne.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const ve=window.T2Controls?.THEME?.categories||{};return Object.entries(fe).map(([Ne,nt])=>({label:Ne,icon:ve[Ne]?.icon||"",subitems:nt.sort((Gt,on)=>{const ln=Gt.order??999,Yt=on.order??999;return ln!==Yt?ln-Yt:Gt.label.localeCompare(on.label)})})).sort((Ne,nt)=>Ne.label.localeCompare(nt.label))};window._t2GetMenuItems=At,window._t2Editor=ne,window._t2Area=J,window._t2Process=He,window._t2ProcessImmediate=Ve,window._t2Engine=R;const Pe=Yr.selector();Ee.addPreset(jf.classic.setup({customize:{node(I){const fe=Mn.getByInstance(I.payload);return fe?fe.component:jf.classic.Node},socket(I){const fe=I.key,ve=I.side;return function({data:Ne}){return Ra.createElement(dj,{data:Ne,socketKey:fe,side:ve})}},control(I){if(I.payload instanceof Xt.Control){const ve=I.payload.constructor.name;if(ve==="ButtonControl")return ej;if(ve==="DropdownControl")return tj;if(ve==="TextControl")return nj;if(ve==="SwitchControl")return aj;if(ve==="NumberControl")return rj;if(ve==="InputControl")return ij;if(ve==="DeviceStateControl")return sj;if(ve==="StatusIndicatorControl")return oj;if(ve==="ColorBarControl")return lj;if(ve==="PowerStatsControl")return cj}return jf.classic.Control}}})),je.addPreset(vk.classic.setup()),ne.use(J),J.use(je),J.use(Ee),Yr.selectableNodes(J,Pe,{accumulating:Yr.accumulateOnCtrl()}),Yr.simpleNodesOrder(J),ne.addPipe(I=>{if(I.type==="nodecreated"){const fe=I.data,ve=Mn.getByInstance(fe);ve&&ve.isBackdrop&&setTimeout(()=>{const xe=J.nodeViews.get(fe.id);xe&&xe.element&&(xe.element.style.zIndex="-10",Te("[Backdrop] Set z-index on creation for:",fe.id))},50)}return I});let Nt=!1,Kt=!1,lt={x:0,y:0};je.addPipe(I=>(I.type==="connectionpick"?(Nt=!0,Te(" Connection pick - wire dragging started")):I.type==="connectiondrop"&&(Nt=!1,Kt=!1,Te(" Connection drop - wire dragging ended")),I));const _t=I=>{if(Nt)if(I.ctrlKey||I.metaKey)if(!Kt)Kt=!0,lt={x:I.clientX,y:I.clientY},q.style.cursor="grab";else{const fe=I.clientX-lt.x,ve=I.clientY-lt.y;if(fe!==0||ve!==0){const xe=J.area.transform;J.area.translate(xe.x+fe,xe.y+ve),lt={x:I.clientX,y:I.clientY}}}else Kt&&(Kt=!1,q.style.cursor="")},qt=I=>{(I.key==="Control"||I.key==="Meta")&&Kt&&(Kt=!1,q.style.cursor="")};window.addEventListener("pointermove",_t),window.addEventListener("keyup",qt);let En=!1,Vt=!1,Cn=null,La=!1,Ba={x:0,y:0},Gn={x:0,y:0};const Oi=I=>{I.code==="Space"&&En&&Cn&&(La=!0,Gn={x:0,y:0},I.preventDefault())},vr=I=>{if(I.code==="Space"&&(La=!1,Vt&&Cn)){const fe=J.nodeViews.get(Cn);if(fe){const ve=J.area.transform,xe=Gn.x/ve.k,Ne=Gn.y/ve.k,nt={x:fe.position.x-xe,y:fe.position.y-Ne};E.current=!0,J.translate(Cn,nt).finally(()=>{E.current=!1})}Vt=!1,q.style.cursor=""}},ti=I=>{if(!(!En||!Cn))if(La)if(!Vt)Vt=!0,Ba={x:I.clientX,y:I.clientY},Gn={x:0,y:0},q.style.cursor="grab";else{const fe=I.clientX-Ba.x,ve=I.clientY-Ba.y;if(fe!==0||ve!==0){const xe=J.area.transform;J.area.translate(xe.x+fe,xe.y+ve),Gn.x+=fe,Gn.y+=ve,Ba={x:I.clientX,y:I.clientY}}}else Vt&&(Vt=!1,q.style.cursor="")};window.addEventListener("keydown",Oi,!0),window.addEventListener("keyup",vr,!0),q.addEventListener("pointermove",ti,!0);const en=document.createElement("div");en.classList.add("selection-box"),q.appendChild(en);let sn=!1,Jn={x:0,y:0};const wn=_.current,ni=()=>{sn&&(Te(" Safety reset: clearing stuck lasso selection"),sn=!1,en.style.display="none")},ea=()=>{ni(),window.resetEditorDragState&&window.resetEditorDragState()},O=()=>{document.hidden&&(ni(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",ea),document.addEventListener("visibilitychange",O);const j=I=>{try{const fe=I.target;fe&&(fe.tagName==="INPUT"||fe.tagName==="TEXTAREA"||fe.isContentEditable)||(q.tabIndex=-1,q.focus())}catch{}if((I.ctrlKey||I.metaKey)&&I.button===0){I.stopPropagation(),I.preventDefault(),sn=!0;const fe=q.getBoundingClientRect();Jn={x:I.clientX-fe.left,y:I.clientY-fe.top},en.style.display="block",en.style.left=`${Jn.x}px`,en.style.top=`${Jn.y}px`,en.style.width="0px",en.style.height="0px",I.shiftKey||(wn.forEach(ve=>{const xe=J.nodeViews.get(ve);xe&&xe.element&&(xe.element.classList.remove("selected"),xe.element.style.outline="")}),wn.clear(),Pe&&Pe.entities&&Array.from(Pe.entities).forEach(ve=>Pe.remove(ve)))}},K=I=>{if(!sn)return;const fe=q.getBoundingClientRect(),ve=I.clientX-fe.left,xe=I.clientY-fe.top,Ne=Math.min(Jn.x,ve),nt=Math.min(Jn.y,xe),Gt=Math.abs(ve-Jn.x),on=Math.abs(xe-Jn.y);en.style.left=`${Ne}px`,en.style.top=`${nt}px`,en.style.width=`${Gt}px`,en.style.height=`${on}px`},re=I=>{if(!sn)return;const fe=en.getBoundingClientRect();if(sn=!1,en.style.display="none",fe.width<5&&fe.height<5)return;const ve=[];ne.getNodes().forEach(xe=>{const Ne=J.nodeViews.get(xe.id);if(Ne&&Ne.element){const nt=Ne.element.getBoundingClientRect();fe.left<=nt.left&&fe.right>=nt.right&&fe.top<=nt.top&&fe.bottom>=nt.bottom&&ve.push({node:xe,view:Ne})}}),ve.forEach(({node:xe,view:Ne})=>{wn.add(xe.id),Pe.add({id:xe.id,label:"node",translate(nt,Gt){},unselect(){Ne.element.classList.remove("selected"),Ne.element.style.outline=""}},!1),Ne.element.classList.add("selected"),Ne.element.style.outline="3px solid #00f3ff"})},Qt=()=>{wn.size>0&&(wn.forEach(I=>{const fe=J.nodeViews.get(I);fe&&fe.element&&(fe.element.classList.remove("selected"),fe.element.style.outline="")}),wn.clear()),Pe&&Pe.entities&&(Pe.entities instanceof Map?Array.from(Pe.entities.values()):Array.from(Pe.entities)).forEach(fe=>{fe.unselect&&fe.unselect(),Pe.remove(fe)}),ne.getNodes().forEach(I=>{const fe=J.nodeViews.get(I.id);fe&&fe.element&&fe.element.classList.remove("selected")})},On=I=>{if(!I.ctrlKey&&!I.metaKey&&!sn){let fe=!1;for(const[ve,xe]of J.nodeViews)if(xe.element.contains(I.target)){fe=!0;break}if(!fe){const ve=I.target;(ve===q||ve.classList.contains("rete-area")||ve.closest('[data-testid="area"]'))&&Qt()}}};q.addEventListener("pointerdown",j,{capture:!0}),q.addEventListener("click",On),window.addEventListener("pointermove",K),window.addEventListener("pointerup",re),ne.addPipe(I=>((I.type==="connectioncreated"||I.type==="connectionremoved")&&He(),I));let ze={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},Ut=!1,dt=null;const st=I=>{Ut=I,dt&&(clearTimeout(dt),dt=null),I&&(dt=setTimeout(()=>{Ut&&(Te(" Safety reset: clearing stuck isGroupMoving"),Ut=!1),dt=null},500))},Xa=()=>{sn&&(Te(" Resetting stuck lasso selection"),sn=!1,en.style.display="none"),Ut&&(Te(" Resetting stuck group moving"),st(!1)),ze.isDragging&&(Te(" Resetting stuck backdrop drag"),ze.isDragging=!1,ze.activeBackdropId=null,ze.nodesBeingMoved.clear())};window.resetEditorDragState=Xa;function ua(){const I=ne.getNodes(),fe=I.filter(xe=>{const Ne=Mn.getByInstance(xe);return Ne&&Ne.isBackdrop}),ve=I.filter(xe=>{const Ne=Mn.getByInstance(xe);return!Ne||!Ne.isBackdrop});fe.forEach(xe=>{const Ne=J.nodeViews.get(xe.id);if(!Ne)return;Ne.element&&(Ne.element.style.zIndex="-10");const nt=Ne.position,Gt=[],on=xe.properties.width||400,ln=xe.properties.height||300,Yt=(bt,$t,br)=>{const Ka=bt.x+$t/2,Ca=bt.y+br/2;return Ka>=nt.x&&Ka<=nt.x+on&&Ca>=nt.y&&Ca<=nt.y+ln};ve.forEach(bt=>{const $t=J.nodeViews.get(bt.id);if(!$t)return;$t.element&&parseInt($t.element.style.zIndex||"0",10)<0&&($t.element.style.zIndex="1");const br=$t.position,Ka=bt.width||180,Ca=bt.height||100;Yt(br,Ka,Ca)&&Gt.push(bt.id)}),fe.forEach(bt=>{if(bt.id===xe.id)return;const $t=J.nodeViews.get(bt.id);if(!$t)return;const br=$t.position,Ka=bt.properties.width||400,Ca=bt.properties.height||300;Ka>=on||Ca>=ln||Yt(br,Ka,Ca)&&Gt.push(bt.id)});const Sn=xe.properties.capturedNodes.length;xe.properties.capturedNodes=Gt,Sn!==Gt.length&&xe.changeCallback&&xe.changeCallback()})}return J.updateBackdropCaptures=ua,J.addPipe(I=>{if(I.type==="nodepicked"){const fe=I.data.id,ve=ne.getNode(fe);En=!0,Cn=fe,Vt=!1;try{if(ve&&P?.current!==void 0){const Ne=J.nodeViews.get(fe)?.position||{x:0,y:0};P.current={nodeId:fe,label:ve.label,startPos:Ne,active:!1,over:!1}}}catch{}if(ve){const Ne=Mn.getByInstance(ve);if(Ne&&Ne.isBackdrop&&ve.properties.locked)return}!me.current&&!wn.has(fe)&&(wn.forEach(Ne=>{const nt=J.nodeViews.get(Ne);nt&&nt.element&&(nt.element.classList.remove("selected"),nt.element.style.outline="")}),wn.clear()),wn.add(fe);const xe=J.nodeViews.get(fe);xe&&xe.element&&(xe.element.classList.add("selected"),xe.element.style.outline="3px solid #00f3ff")}return I}),J.addPipe(I=>{try{if(E.current)return I;const fe=ve=>{const xe=We.current?.getBoundingClientRect();if(!xe)return!1;const nt=J.nodeViews.get(ve)?.element;if(!nt)return!1;const Gt=nt.getBoundingClientRect(),on=Gt.left+Gt.width/2,ln=Gt.top+Gt.height/2;return on>=xe.left&&on<=xe.right&&ln>=xe.top&&ln<=xe.bottom};if(I.type==="nodetranslate"){const ve=P.current;if(!ve)return I;const xe=I.data?.id;if(!xe||ve.nodeId!==xe)return I;ve.active||(ve.active=!0,!ve.startPos&&I.data?.previous&&(ve.startPos=I.data.previous));const Ne=fe(xe);return Ne!==ve.over&&(ve.over=Ne,Ke(Ne)),I}if(I.type==="nodedragged"){const ve=P.current;if(!ve)return I;const xe=I.data?.id;if(!xe||ve.nodeId!==xe)return I;if(ve.active&&fe(xe)){v(ve.label);const nt=ve.startPos;nt&&setTimeout(()=>{try{J.translate(xe,nt)}catch{}},0)}return P.current=null,Ke(!1),I}}catch{}return I}),J.addPipe(I=>{if(I.type==="render"&&I.data?.payload){const fe=I.data.payload,ve=Mn.getByInstance(fe);ve&&ve.isBackdrop&&setTimeout(()=>{const xe=J.nodeViews.get(fe.id);if(xe&&xe.element){xe.element.style.zIndex!=="-10"&&(xe.element.style.zIndex="-10");const Ne=fe.properties.locked?"none":"auto";xe.element.style.pointerEvents!==Ne&&(xe.element.style.pointerEvents=Ne)}},0)}if(I.type==="nodetranslate"){if(E.current||Ut)return I;const fe=I.data.id,ve=ne.getNode(fe);if(!ve)return I;const xe=I.data.position,Ne=I.data.previous,nt=xe.x-Ne.x,Gt=xe.y-Ne.y;if(nt===0&&Gt===0)return I;if(Vt&&Cn===fe)return{...I,data:{...I.data,position:I.data.previous}};if(wn.size>1&&wn.has(fe)){st(!0);const ln=[];return wn.forEach(Yt=>{if(Yt!==fe){const Sn=J.nodeViews.get(Yt);if(Sn){const bt=Sn.position.x+nt,$t=Sn.position.y+Gt;ln.push(J.translate(Yt,{x:bt,y:$t}))}}}),Promise.all(ln).then(()=>{st(!1)}),I}const on=Mn.getByInstance(ve);if(on&&on.isBackdrop){if(ve.properties.locked)return{...I,data:{...I.data,position:I.data.previous}};if(ze.isDragging&&ze.nodesBeingMoved.has(fe)&&ze.activeBackdropId!==fe)return I;if(ze.activeBackdropId!==fe){ze.activeBackdropId=fe,ze.isDragging=!0,ze.nodesBeingMoved.clear(),ua();const ln=Yt=>{Yt.forEach(Sn=>{ze.nodesBeingMoved.add(Sn);const bt=ne.getNode(Sn);bt&&bt.properties.capturedNodes&&ln(bt.properties.capturedNodes)})};ln(ve.properties.capturedNodes)}if(ve.properties.capturedNodes.length>0){st(!0);const ln=[];return ve.properties.capturedNodes.forEach(Yt=>{if(!wn.has(Yt)){const Sn=J.nodeViews.get(Yt);if(Sn){const bt=Sn.position.x+nt,$t=Sn.position.y+Gt;ln.push(J.translate(Yt,{x:bt,y:$t}))}}}),Promise.all(ln).then(()=>{st(!1)}),I}}}if(I.type==="nodedragged"){if(E.current)return I;ze.isDragging=!1,ze.activeBackdropId=null,ze.nodesBeingMoved.clear(),En=!1,Cn=null,Vt&&(Vt=!1,q.style.cursor=""),ua()}return I}),ee.current=ne,W.current=J,L.current=Pe,window.updateBackdropLockState=(I,fe)=>{const ve=J.nodeViews.get(I);ve&&ve.element&&(ve.element.style.pointerEvents=fe?"none":"auto",Te(" Updated backdrop lock state:",I,"locked:",fe))},r(ne),l(J),d(R),{destroy:()=>{q.removeEventListener("pointerdown",j,{capture:!0}),q.removeEventListener("click",On),q.removeEventListener("pointermove",ti,!0),window.removeEventListener("pointermove",K),window.removeEventListener("pointerup",re),window.removeEventListener("pointermove",_t),window.removeEventListener("keyup",qt),window.removeEventListener("keydown",Oi,!0),window.removeEventListener("keyup",vr,!0),window.removeEventListener("blur",ea),document.removeEventListener("visibilitychange",O),dt&&clearTimeout(dt),en.parentNode&&en.parentNode.removeChild(en),J.destroy()},selector:Pe,editor:ne,area:J,engine:R,process:He,processImmediate:Ve}},[]);k.useEffect(()=>{const q=a.current;if(!q)return;let ne=null,J=null,je=null;const Ee=new Map,R=le=>{try{typeof le.pointerId=="number"&&Ee.set(le.pointerId,{el:le.target,pointerType:le.pointerType||"mouse"})}catch{}},T=le=>{try{typeof le.pointerId=="number"&&Ee.delete(le.pointerId)}catch{}},U=le=>{try{typeof le.pointerId=="number"&&Ee.delete(le.pointerId)}catch{}};q.addEventListener("gotpointercapture",R,!0),q.addEventListener("lostpointercapture",T,!0),window.addEventListener("pointerup",U,!0),window.addEventListener("pointercancel",U,!0),J=YO().then(()=>(Te(" External plugins loaded, now creating editor..."),D(q))).then(le=>{le.editor,ne=le.area,le.engine,le.selector,r(le.editor),l(le.area),d(le.engine),m(le.selector),F.current=le.processImmediate,setTimeout(()=>{if(q){q.tabIndex=-1,q.focus();const Se=q.getBoundingClientRect(),He=Se.left+Se.width/2,Ve=Se.top+Se.height/2,et=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:He,clientY:Ve,deltaY:0});q.dispatchEvent(et),Te(" Container initialized and focused"),window.resetEditorView=()=>{Te(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const _e=q.getBoundingClientRect(),Ce=_e.left+_e.width/2,oe=_e.top+_e.height/2;q.tabIndex=-1,q.focus();try{const Pe=Array.from(Ee.entries());Ee.clear(),Pe.forEach(([Nt,Kt])=>{const lt=Kt?.el,_t=Kt?.pointerType||"mouse";try{const qt=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:Nt,pointerType:_t});q.dispatchEvent(qt)}catch{}try{q.releasePointerCapture(Nt)}catch{}try{lt&&typeof lt.releasePointerCapture=="function"&&lt.releasePointerCapture(Nt)}catch{}})}catch{}try{for(let Nt=0;Nt<5;Nt++)try{q.releasePointerCapture(Nt)}catch{}q.querySelectorAll(".node, .connection, [data-drag]").forEach(Nt=>{try{Nt.releasePointerCapture(1)}catch{}})}catch{}if(ne){const Pe=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});q.dispatchEvent(Pe);const Nt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});q.dispatchEvent(Nt)}setTimeout(()=>{const Pe=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Ce,clientY:oe,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),Nt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:Ce,clientY:oe,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});q.dispatchEvent(Pe),setTimeout(()=>{q.dispatchEvent(Nt);const Kt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ce,clientY:oe,deltaY:0});q.dispatchEvent(Kt),Te(" Reset complete")},50)},50)})}}},100);let Ae=!1;return je=new ResizeObserver(Se=>{for(const He of Se){const{width:Ve,height:et}=He.contentRect;!Ae&&Ve>0&&et>0&&(Ae=!0,Te(" ResizeObserver: Container now has size",Ve,et),setTimeout(()=>{q.focus();const _e=q.getBoundingClientRect(),Ce=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:_e.left+_e.width/2,clientY:_e.top+_e.height/2,deltaY:0});q.dispatchEvent(Ce)},50))}}),je.observe(q),le});const ce=()=>{Te(" graphLoadComplete event received - triggering view reset");const le=()=>{window.resetEditorView&&window.resetEditorView()};le(),setTimeout(le,100),setTimeout(le,500),setTimeout(le,1e3)};return window.addEventListener("graphLoadComplete",ce),()=>{je&&je.disconnect(),window.removeEventListener("graphLoadComplete",ce),q.removeEventListener("gotpointercapture",R,!0),q.removeEventListener("lostpointercapture",T,!0),window.removeEventListener("pointerup",U,!0),window.removeEventListener("pointercancel",U,!0),J.then(le=>le.destroy())}},[D]),k.useEffect(()=>{if(!t||!s||!p)return;const q=async T=>{if(T.target.tagName==="INPUT"||T.target.tagName==="TEXTAREA"||T.target.isContentEditable)return;if(Te(` KeyDown: ${T.code} (Ctrl: ${T.ctrlKey}, Meta: ${T.metaKey})`),T.code==="F5"||(T.ctrlKey||T.metaKey)&&T.shiftKey&&T.code==="KeyR"){T.preventDefault(),Te(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(T.code==="KeyF"&&!T.ctrlKey&&!T.metaKey&&!T.altKey){T.preventDefault();const Se=W.current,He=ee.current;if(Se&&He){const Ve=He.getNodes();Ve.length>0&&(Te(" Zoom extents triggered (F key)"),Yr.zoomAt(Se,Ve,{scale:.9}).catch(et=>{console.warn("[F key] zoomAt failed:",et)}))}return}const U=ee.current,ce=W.current,le=L.current;if(!U||!ce){Te(" No editor/area ref available");return}const Ae=()=>{const Se=new Set;if(le&&le.entities&&le.entities instanceof Map)for(const[He,Ve]of le.entities)U.getNode(He)&&Se.add(He);for(const He of _.current){const Ve=U.getNode(He);Te(` Checking node ${He}: exists=${!!Ve}`),Ve&&Se.add(He)}return Te(` Found ${Se.size} selected nodes:`,Array.from(Se)),Array.from(Se)};if(T.code==="Delete"||T.code==="Backspace"){Te(" Delete key pressed. lassoSelectedNodesRef.current size:",_.current.size),Te(" lassoSelectedNodesRef.current contents:",Array.from(_.current));const Se=Ae();if(Te(` Deleting ${Se.length} nodes:`,Se),Se.length>0){const He=[],Ve=[],et=new Set(Se);for(const _e of U.getConnections())(et.has(_e.source)||et.has(_e.target))&&Ve.push({source:_e.source,target:_e.target,sourceOutput:_e.sourceOutput,targetInput:_e.targetInput});for(const _e of Se){const Ce=U.getNode(_e);Ce&&He.push({id:_e,label:Ce.label,position:ce.nodeViews.get(_e)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(Ce.properties||{}))})}be.current.push({type:"delete",nodes:He,connections:Ve}),Te(" Saved undo state:",be.current.length,"items in stack");for(const _e of Se){const Ce=U.getConnections().filter(oe=>oe.source===_e||oe.target===_e);for(const oe of Ce)await U.removeConnection(oe.id);await U.removeNode(_e),_.current.delete(_e)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((T.ctrlKey||T.metaKey)&&T.code==="KeyZ"&&!T.shiftKey){if(T.preventDefault(),be.current.length===0){Te(" Nothing to undo");return}const Se=be.current.pop();if(Te(" Undoing:",Se.type,Se.nodes.length,"nodes"),Se.type==="delete"){const He={};E.current=!0;try{for(const Ve of Se.nodes){const et=Mn.getByLabel(Ve.label);if(et){let _e;const Ce=()=>{ce&&ce.update("node",_e.id),c&&U&&(c.reset(),setTimeout(()=>{U.getNodes().forEach(async At=>{try{await c.fetch(At.id)}catch{}})},0))},oe=()=>{et.updateStrategy==="dataflow"?(c&&c.reset(),c&&U&&setTimeout(()=>{U.getNodes().forEach(async At=>{try{await c.fetch(At.id)}catch{}})},0)):Ce()};_e=et.factory(oe),Ve.properties&&Object.assign(_e.properties,Ve.properties),await U.addNode(_e),await ce.translate(_e.id,Ve.position),He[Ve.id]=_e.id}}for(const Ve of Se.connections){const et=He[Ve.source]||Ve.source,_e=He[Ve.target]||Ve.target,Ce=U.getNode(et),oe=U.getNode(_e);if(Ce&&oe)try{await U.addConnection(new Xt.Connection(Ce,Ve.sourceOutput,oe,Ve.targetInput))}catch(At){console.warn("[Editor] Could not restore connection:",At)}}Te(" Undo complete - restored",Se.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,ce?.updateBackdropCaptures?.()}}}if((T.ctrlKey||T.metaKey)&&T.code==="KeyC")try{const Se=Ae();if(Se.length===0){Te(" Nothing selected to copy");return}Te(` Copying ${Se.length} nodes`);const He=[],Ve=new Set(Se);for(const Ce of Se){const oe=U.getNode(Ce);oe&&He.push({label:oe.label,position:ce.nodeViews.get(oe.id)?.position||{x:0,y:0},data:{id:oe.id,properties:JSON.parse(JSON.stringify(oe.properties||{}))}})}if(He.length===0){Te(" Nothing selected to copy (no nodes in selection)");return}const et=[];for(const Ce of U.getConnections())Ve.has(Ce.source)&&Ve.has(Ce.target)&&et.push({source:Ce.source,target:Ce.target,sourceOutput:Ce.sourceOutput,targetInput:Ce.targetInput});const _e={nodes:He,connections:et};localStorage.setItem("rete-clipboard",JSON.stringify(_e)),Te("Copied to clipboard:",_e)}catch(Se){console.error("[Editor] Copy failed:",Se)}if((T.ctrlKey||T.metaKey)&&T.code==="KeyV"){const Se=localStorage.getItem("rete-clipboard");if(!Se){Te(" Clipboard empty");return}try{const He=JSON.parse(Se),Ve={},_e=(W.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},Ce=ce.area.transform,oe=(Y.current.x-_e.left-Ce.x)/Ce.k,At=(Y.current.y-_e.top-Ce.y)/Ce.k;let Pe=1/0,Nt=1/0;for(const lt of He.nodes)Pe=Math.min(Pe,lt.position.x),Nt=Math.min(Nt,lt.position.y);le&&le.entities&&Array.from(le.entities).forEach(lt=>le.remove(lt)),E.current=!0;try{for(const lt of He.nodes){let _t;const qt=Mn.getByLabel(lt.label);if(qt){const En=()=>{ce&&ce.update("node",_t.id),c&&U&&(c.reset(),setTimeout(()=>{U.getNodes().forEach(async Cn=>{try{await c.fetch(Cn.id)}catch{}})},0))},Vt=()=>{qt.updateStrategy==="dataflow"?(c&&c.reset(),c&&U&&setTimeout(()=>{U.getNodes().forEach(async Cn=>{try{await c.fetch(Cn.id)}catch{}})},0)):En()};_t=qt.factory(Vt)}if(_t){typeof _t.restore=="function"&&lt.data?_t.restore(lt.data):lt.data&&lt.data.properties&&_t.properties&&Object.assign(_t.properties,lt.data.properties),await U.addNode(_t);const En=lt.position.x-Pe,Vt=lt.position.y-Nt,Cn={x:oe+En,y:At+Vt};await ce.translate(_t.id,Cn),Ve[lt.data.id]=_t.id,le&&le.add({id:_t.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,ce?.updateBackdropCaptures?.()}const Kt=[];for(const lt of He.connections){const _t=Ve[lt.source],qt=Ve[lt.target];if(_t&&qt){const En=U.getNode(_t),Vt=U.getNode(qt);En&&Vt&&Kt.push(U.addConnection(new Xt.Connection(En,lt.sourceOutput,Vt,lt.targetInput)))}}if(await Promise.all(Kt),c&&U){c.reset();for(const lt of U.getNodes())try{await c.fetch(lt.id)}catch{}}Te("Pasted from clipboard")}catch(He){console.error("[Editor] Paste failed:",He)}}T.code==="Home"&&(T.preventDefault(),ce.area&&(ce.area.zoom(1,0,0),ce.area.translate(0,0),Te(" Viewport reset via Home key"))),T.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Te(" Drag state reset via Escape key"))},ne=T=>{Y.current={x:T.clientX,y:T.clientY}},J=T=>{T.key==="Shift"&&(me.current=!0)},je=T=>{T.key==="Shift"&&(me.current=!1)},Ee=()=>{Te(" Received delete from Electron IPC"),q({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let R=null;return window.api&&window.api.onDeleteKey&&(R=window.api.onDeleteKey(Ee)),window.addEventListener("keydown",q),window.addEventListener("keydown",J),window.addEventListener("keyup",je),window.addEventListener("mousemove",ne),()=>{window.removeEventListener("keydown",q),window.removeEventListener("keydown",J),window.removeEventListener("keyup",je),window.removeEventListener("mousemove",ne),R&&R()}},[t,s,c,p]),k.useEffect(()=>{const q=a.current;if(!q||!t||!s)return;const ne=J=>{let je=null;const Ee=J.target.closest('[data-testid="node"]');if(Ee&&(je=Ee.dataset.nodeId),!je&&s?.nodeViews){for(const[R,T]of s.nodeViews.entries())if(T.element&&T.element.contains(J.target)){je=R,T.element;break}}if(console.log("[ContextMenu] clickedNodeId:",je),console.log("[ContextMenu] lassoSelectedNodesRef:",_.current.size,Array.from(_.current)),je){J.preventDefault();const R=t.getNode(je),T=_.current,U=T.size>1&&T.has(je),ce=[];U&&(ce.push({label:" Convert to Sub-Graph",handler:async()=>{const le=Array.from(T);await X(le)}}),ce.push({separator:!0})),ce.push({label:"Delete",handler:async()=>{const le=U?Array.from(T):[je];for(const Ae of le){const Se=t.getConnections().filter(He=>He.source===Ae||He.target===Ae);for(const He of Se)await t.removeConnection(He.id);await t.removeNode(Ae)}T.clear()}}),he({visible:!0,position:{x:J.clientX,y:J.clientY},items:ce,nodeContext:R})}else{J.preventDefault();const R=window._t2GetMenuItems?window._t2GetMenuItems():[];he({visible:!0,position:{x:J.clientX,y:J.clientY},items:R,nodeContext:null})}};return q.addEventListener("contextmenu",ne),()=>{q.removeEventListener("contextmenu",ne)}},[t,s]);const X=k.useCallback(async q=>{if(!t||!s||q.length<2){window.T2Toast&&window.T2Toast.warn("Select at least 2 nodes to create a sub-graph");return}try{const ne=q.map(oe=>t.getNode(oe)).filter(Boolean),J=q.map(oe=>s.nodeViews.get(oe)).filter(Boolean);let je=0,Ee=0;J.forEach(oe=>{je+=oe.position.x,Ee+=oe.position.y});const R=je/J.length,T=Ee/J.length,U=ne.map((oe,At)=>{const Pe=J[At];return{id:oe.id,name:oe.constructor.name,label:oe.label,properties:oe.properties?{...oe.properties}:{},position:[Pe.position.x-R,Pe.position.y-T]}}),ce=t.getConnections(),le=new Set(q),Ae=ce.filter(oe=>le.has(oe.source)&&le.has(oe.target)).map(oe=>({id:oe.id,source:oe.source,sourceOutput:oe.sourceOutput,target:oe.target,targetInput:oe.targetInput})),Se=[],He=[];ce.forEach(oe=>{le.has(oe.target)&&!le.has(oe.source)&&Se.push({originalConnection:oe,internalNodeId:oe.target,internalPort:oe.targetInput}),le.has(oe.source)&&!le.has(oe.target)&&He.push({originalConnection:oe,internalNodeId:oe.source,internalPort:oe.sourceOutput})});const Ve=Se.map((oe,At)=>({key:`in_${At}`,label:oe.internalPort,type:"any",internalNodeId:oe.internalNodeId,internalPort:oe.internalPort})),et=He.map((oe,At)=>({key:`out_${At}`,label:oe.internalPort,type:"any",internalNodeId:oe.internalNodeId,internalPort:oe.internalPort})),_e=Mn.get("SubGraphNode");if(!_e)throw new Error("SubGraphNode not registered");const Ce=_e.factory(()=>{F.current&&F.current()});Ce.properties={name:`Sub-Graph (${ne.length} nodes)`,description:"",icon:"",internalNodes:U,internalConnections:Ae,exposedInputs:Ve,exposedOutputs:et},Ce.rebuildSockets(),await t.addNode(Ce),await s.translate(Ce.id,{x:R,y:T});for(const oe of[...Se,...He])await t.removeConnection(oe.originalConnection.id);for(let oe=0;oe<Se.length;oe++){const At=Se[oe],Pe=t.getNode(At.originalConnection.source);if(Pe){const Nt=new Xt.Connection(Pe,At.originalConnection.sourceOutput,Ce,`exp_in_${oe}`);await t.addConnection(Nt)}}for(let oe=0;oe<He.length;oe++){const At=He[oe],Pe=t.getNode(At.originalConnection.target);if(Pe){const Nt=new Xt.Connection(Ce,`exp_out_${oe}`,Pe,At.originalConnection.targetInput);await t.addConnection(Nt)}}for(const oe of q){const At=t.getConnections().filter(Pe=>Pe.source===oe||Pe.target===oe);for(const Pe of At)await t.removeConnection(Pe.id);await t.removeNode(oe)}_.current.clear(),window.T2Toast&&window.T2Toast.success(`Created sub-graph with ${ne.length} nodes`),Te(`[SubGraph] Created sub-graph with ${U.length} nodes, ${Ae.length} internal connections, ${Ve.length} inputs, ${et.length} outputs`)}catch(ne){console.error("[SubGraph] Conversion failed:",ne),window.T2Toast&&window.T2Toast.error(`Sub-graph creation failed: ${ne.message}`)}},[t,s]),ue=k.useCallback(()=>{he(q=>({...q,visible:!1}))},[]),we=k.useCallback(async q=>{q.handler&&await q.handler(B.position)},[B.position]),Ie=async()=>{if(!(!t||!s))try{const q=t.getNodes().map(Ae=>{const Se=typeof Ae.toJSON=="function"?Ae.toJSON():{...Ae};return Ae.properties&&(Se.properties=Ae.properties),{id:Ae.id,label:Ae.label,position:s.nodeViews.get(Ae.id)?.position||{x:0,y:0},data:Se}}),ne=t.getConnections().map(Ae=>({id:Ae.id,source:Ae.source,target:Ae.target,sourceOutput:Ae.sourceOutput,targetInput:Ae.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:q,connections:ne,viewport:J},Ee=JSON.stringify(je,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("Running in HA ingress - showing save dialog"),Q(je),pe(!0);return}try{Ee.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",Ee))}catch{console.warn("localStorage skipped")}Te("Graph saved to localStorage");try{const Ae=await fetch(kn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:Ee});Ae.ok?Te("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",Ae.status)}catch(Ae){console.warn("[handleSave] Failed to save to server:",Ae)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",Ee),Te("[handleSave] Saved temp file for Electron reload")}catch(Ae){console.warn("[handleSave] Failed to save temp file via Electron API",Ae)}if(window.showSaveFilePicker)try{const Se=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await Se.write(Ee),await Se.close(),Te("Graph saved to file");return}catch(Ae){if(Ae.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",Ae)}const U=new Blob([Ee],{type:"application/json"}),ce=URL.createObjectURL(U),le=document.createElement("a");le.href=ce,le.download=`autotron_graph_${Date.now()}.json`,le.click(),URL.revokeObjectURL(ce),Te("Graph saved via download")}catch(q){console.error("Failed to save graph:",q)}};k.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!t||!s))try{const q=t.getNodes().map(R=>{const T=typeof R.toJSON=="function"?R.toJSON():{...R};return R.properties&&(T.properties=R.properties),{id:R.id,label:R.label,position:s.nodeViews.get(R.id)?.position||{x:0,y:0},data:T}}),ne=t.getConnections().map(R=>({id:R.id,source:R.source,target:R.target,sourceOutput:R.sourceOutput,targetInput:R.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:q,connections:ne,viewport:J,preUpdateSave:!0,timestamp:Date.now()},Ee=JSON.stringify(je);Ee.length<2e6&&(localStorage.setItem("saved-graph",Ee),Te("[triggerGraphSave] Graph saved before update"))}catch(q){console.warn("[triggerGraphSave] Failed:",q)}},()=>{delete window.triggerGraphSave}),[t,s]);const[Ye,Et]=k.useState(!1),zt=k.useRef(null),Lt=k.useRef(Date.now());k.useEffect(()=>{if(!t)return;const q=()=>{Et(!0)};t.addPipe(ne=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ne.type)&&q(),ne))},[t]),k.useEffect(()=>{if(!t||!s)return;const q=async()=>{if(!(window.graphLoading||V.current)&&Ye)try{const ne=t.getNodes().map(T=>{const U=typeof T.toJSON=="function"?T.toJSON():{...T};return T.properties&&(U.properties=T.properties),{id:T.id,label:T.label,position:s.nodeViews.get(T.id)?.position||{x:0,y:0},data:U}}),J=t.getConnections().map(T=>({id:T.id,source:T.source,target:T.target,sourceOutput:T.sourceOutput,targetInput:T.targetInput})),je=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},Ee={nodes:ne,connections:J,viewport:je,autoSaved:!0,timestamp:Date.now()},R=JSON.stringify(Ee);if(R.length<2e6){localStorage.setItem("saved-graph",R),Lt.current=Date.now(),Et(!1);try{await fetch(kn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:R})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ne){console.warn("[Auto-save] Failed:",ne)}};return zt.current=setInterval(q,12e4),()=>{zt.current&&clearInterval(zt.current)}},[t,s,Ye]),k.useEffect(()=>{if(!t||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Te("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ne=setTimeout(async()=>{try{const J=localStorage.getItem("saved-graph");if(J){Te("[AutoLoad] Found saved graph, loading...");const je=JSON.parse(J);je.nodes&&je.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(J){console.warn("[AutoLoad] Failed to auto-load graph:",J)}},1e3);return()=>clearTimeout(ne)}},[t,s,c]);const Jt=k.useRef(!1);k.useEffect(()=>{if(!t||!s||!c||Jt.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Te("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),Jt.current=!0;return}const J=localStorage.getItem("saved-graph"),je=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(J||je){Te("[ServerAutoLoad] Skipping - desktop mode with local graph");return}Jt.current=!0;const R=setTimeout(async()=>{try{Te("[ServerAutoLoad] Fetching last active graph from server...");const U=await(await fetch(kn("/api/engine/last-active"))).json();U.success&&U.graph?(Te("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(U.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Te("[ServerAutoLoad] No last active graph on server")}catch(T){console.warn("[ServerAutoLoad] Failed to fetch from server:",T)}},1500);return()=>clearTimeout(R)},[t,s,c]);const ot=async()=>{if(!t||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!t,area:!!s,engine:!!c});return}try{let q=localStorage.getItem("saved-graph");if(!q&&window.api?.readTempFile)try{const R=await window.api.readTempFile("autotron_graph.json");R?.success&&R.content&&(q=R.content,Te("[handleLoad] Loaded graph from Electron temp file"))}catch(R){console.warn("[handleLoad] Failed to read Electron temp file",R)}if(!q){alert("No saved graph found");return}const ne=JSON.parse(q);Te(`[handleLoad] Loading graph with ${ne.nodes?.length} nodes`);const J=sb(ne);if(!J.valid){console.warn("[handleLoad] Graph validation failed:",J.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${J.errors.length} errors`,4e3);const R=ob(ne);R.repaired&&(Te("[handleLoad] Graph repaired:",R.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${R.fixes.length} fixes applied`,3e3),Object.assign(ne,R.graphData))}J.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",J.warnings),await bn();const je=t.getNodes();if(je.length>0){console.error("[handleLoad] Clear did not work! Still have",je.length,"nodes");for(const R of je)try{await t.removeNode(R.id)}catch(T){console.error("[handleLoad] Force remove failed:",T)}}if(E.current=!0,V.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const T of ne.nodes){let U;const ce=Mn.getByLabel(T.label);if(ce){const le=()=>{if(V.current||window.graphLoading){s&&s.update("node",T.id);return}s&&s.update("node",T.id),window._t2Process&&window._t2Process()};U=ce.factory(le)}U&&(U.id=T.id,typeof U.restore=="function"&&T.data?U.restore(T.data):T.data&&T.data.properties&&U.properties&&Object.assign(U.properties,T.data.properties),await t.addNode(U),await s.translate(U.id,T.position))}const R=[];for(const T of ne.connections){const U=t.getNode(T.source),ce=t.getNode(T.target);U&&ce&&R.push(t.addConnection(new Xt.Connection(U,T.sourceOutput,ce,T.targetInput)))}await Promise.all(R)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const Ee=t.getNodes();if(Ee.length>0&&s){Te("[handleLoad] Zooming to fit",Ee.length,"nodes...");try{await Yr.zoomAt(s,Ee,{scale:.9})}catch(R){console.warn("[handleLoad] zoomAt failed:",R)}}F.current&&(Te("[handleLoad] Processing graph immediately..."),await F.current(),Te("[handleLoad] Graph processing complete")),V.current=!1,Te("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Te("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const R=ne.viewport||{x:0,y:0,k:1},T=R.k||1,U=R.x||0,ce=R.y||0;Te("[handleLoad] Restoring viewport:",{savedX:U,savedY:ce,savedK:T}),Te("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(T,0,0),s.area.translate(U,ce)}catch(Ae){console.warn("[handleLoad] Viewport restore failed:",Ae)}Te("[handleLoad] Transform after restore:",{...s.area.transform});const le=s.container;if(le){le.tabIndex=-1,le.focus(),document.activeElement&&document.activeElement!==le&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const Ae=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(Ae,100),setTimeout(Ae,500),setTimeout(Ae,1e3)}t.getNodes().forEach(Ae=>{const Se=s.nodeViews.get(Ae.id);if(Se?.element)try{for(let He=0;He<10;He++)try{Se.element.releasePointerCapture(He)}catch{}}catch{}})}},300),Te("Graph loaded")}catch(q){console.error("Failed to load graph:",q),V.current=!1,alert("Failed to load graph")}},Bt=async()=>{if(!t||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(t.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ne=await fetch(kn("/api/examples/starter"));if(!ne.ok)throw new Error(`Failed to fetch example: ${ne.status}`);const J=await ne.json();if(!J.success||!J.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(J.graph)),Te("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await ot(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ne){console.error("[handleLoadExample] Failed:",ne),alert("Failed to load example graph: "+ne.message)}};k.useEffect(()=>{const q=()=>{Te("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),ot()};return document.addEventListener("autoLoadGraph",q),()=>document.removeEventListener("autoLoadGraph",q)},[t,s,c]);const bn=async()=>{if(!t){console.warn("[handleClear] No editor instance!");return}try{const q=t.getConnections(),ne=t.getNodes();Te(`[handleClear] Removing ${q.length} connections and ${ne.length} nodes`);for(const je of q)await t.removeConnection(je.id);for(const je of ne)await t.removeNode(je.id);const J=t.getNodes();Te(`[handleClear] Complete. Remaining nodes: ${J.length}`),J.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",J.map(je=>je.id))}catch(q){console.error("Failed to clear graph:",q)}},Hn=()=>{if(!(!t||!s))try{const q=t.getNodes().map(U=>{const ce=typeof U.toJSON=="function"?U.toJSON():{...U};return U.properties&&(ce.properties=U.properties),{id:U.id,label:U.label,position:s.nodeViews.get(U.id)?.position||{x:0,y:0},data:ce}}),ne=t.getConnections().map(U=>({id:U.id,source:U.source,target:U.target,sourceOutput:U.sourceOutput,targetInput:U.targetInput})),J=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},je={nodes:q,connections:ne,viewport:J},Ee=new Blob([JSON.stringify(je,null,2)],{type:"application/json"}),R=URL.createObjectURL(Ee),T=document.createElement("a");T.href=R,T.download=`graph-${Date.now()}.json`,T.click(),URL.revokeObjectURL(R),Te("Graph exported")}catch(q){console.error("Failed to export graph:",q)}},Xe=async q=>{const ne=sb(q);if(!ne.valid){console.warn("[handleImport] Graph validation failed:",ne.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ne.errors.length} errors`,4e3);const Ee=ob(q);if(Ee.repaired)Te("[handleImport] Graph repaired:",Ee.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${Ee.fixes.length} fixes applied`,3e3),q=Ee.graphData;else if(!confirm(`Graph has ${ne.errors.length} errors. Continue anyway?`))return}const J={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let je=0;if(console.error=(...Ee)=>{je++<10&&J.error(...Ee)},J.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!t||!s||!c){Object.assign(console,J);return}try{if(await bn(),E.current=!0,V.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const T of q.nodes){let U;const ce=Mn.getByLabel(T.label);if(!ce){console.warn(`[handleImport] No definition found for node label: "${T.label}"`);continue}if(ce){const le=()=>{if(V.current||window.graphLoading){s&&s.update("node",T.id);return}s&&s.update("node",T.id),window._t2Process&&window._t2Process()};U=ce.factory(le)}U&&(U.id=T.id,T.label==="Timeline Color"&&J.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof U.restore=="function",hasData:!!T.data,dataKeys:T.data?Object.keys(T.data):"N/A",propertiesKeys:T.data?.properties?Object.keys(T.data.properties):"N/A",previewModeValue:T.data?.properties?.previewMode}),typeof U.restore=="function"&&T.data?U.restore(T.data):T.data&&T.data.properties&&U.properties&&Object.assign(U.properties,T.data.properties),await t.addNode(U),await s.translate(U.id,T.position))}const R=[];for(const T of q.connections){const U=t.getNode(T.source),ce=t.getNode(T.target);U&&ce?R.push(t.addConnection(new Xt.Connection(U,T.sourceOutput,ce,T.targetInput))):console.warn(`[handleImport] Connection skipped - missing node: source=${T.source} (${!!U}), target=${T.target} (${!!ce})`)}await Promise.all(R)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const Ee=t.getNodes();if(Ee.length>0&&s)try{await Yr.zoomAt(s,Ee,{scale:.9})}catch{}V.current=!1,setTimeout(async()=>{window.graphLoading=!1,Te("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{F.current&&(Te("[handleImport] Running processImmediate to sync node states"),F.current()),setTimeout(()=>{F.current&&(Te("[handleImport] Running second processImmediate for late-loading data"),F.current())},1500)},500);try{const T=JSON.stringify(q,null,2);T.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",T),Te("[handleImport] Graph saved to localStorage")),(await fetch(kn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:T})).ok&&Te("[handleImport] Graph saved to server as last active")}catch(T){console.warn("[handleImport] Failed to save imported graph:",T)}const R=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(R,100),setTimeout(R,500)},2e3),Object.assign(console,J),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Te("Graph imported successfully. Pan/zoom should work now.")}catch(Ee){window.graphLoading=!1,typeof J<"u"&&Object.assign(console,J),console.error("Failed to import graph:",Ee),V.current=!1,alert("Failed to import graph: "+Ee.message)}};return h.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[h.jsx(QO,{width:se,panelRef:We,dropActive:it,favoriteGroups:$e,onAddFavorite:v,onRemoveFavorite:C,onCreateNode:A}),h.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${se}px`}}),h.jsx("div",{ref:w}),(()=>{const q=g?x.current:w.current;return q?Xr.createPortal(h.jsx(XO,{onSave:Ie,onLoad:ot,onLoadExample:Bt,onClear:bn,onExport:Hn,onImport:Xe,hasUnsavedChanges:Ye,isMerged:g,onToggleMerged:()=>b(ne=>!ne)}),q):null})(),h.jsx(KO,{dockSlotRef:x}),h.jsx(JO,{visible:B.visible,position:B.position,items:B.items,onClose:ue,onSelect:we}),h.jsx(WO,{isOpen:de,onClose:()=>pe(!1),onSave:()=>{Et(!1),pe(!1)},currentGraphData:Le})]})}class hj extends Ra.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",r),this.setState({error:t,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?h.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:h.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),h.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),h.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&h.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[h.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),h.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[h.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#4a4a6c",onMouseOut:t=>t.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),h.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#339af0",onMouseOut:t=>t.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function pj({isLoading:a,progress:t=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,p]=k.useState(!1),[m,g]=k.useState(a);return k.useEffect(()=>{if(!a&&m){p(!0);const b=setTimeout(()=>{g(!1),p(!1)},500);return()=>clearTimeout(b)}else a&&!m&&g(!0)},[a,m]),m?h.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[h.jsx("div",{className:"loading-logo",children:""}),h.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),h.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),h.jsx("div",{className:"loading-progress-container",children:h.jsx("div",{className:"loading-progress-bar",children:h.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,t)}%`}})})}),h.jsx("div",{className:"loading-status",children:r}),l>0&&h.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&h.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function mj({updateInfo:a,onClose:t,onApplyUpdate:r}){const[s,l]=k.useState(!1),[c,d]=k.useState("");if(!a||!a.hasUpdate)return null;const p=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(g){console.warn("Pre-update graph save failed:",g)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const b=await(await dn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(b.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const w=()=>{dn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(w,2e3))};w()},3e3)},2e3)}catch(g){g.message.includes("fetch")||g.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const b=()=>{dn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)):(d(`Update failed: ${g.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),t()};return h.jsx("div",{className:"update-modal-overlay",children:h.jsxs("div",{className:"update-modal",children:[h.jsxs("div",{className:"update-modal-header",children:[h.jsx("span",{className:"update-icon",children:""}),h.jsx("h2",{children:"Update Available!"})]}),h.jsxs("div",{className:"update-modal-version",children:[h.jsx("span",{className:"version-current",children:a.currentVersion}),h.jsx("span",{className:"version-arrow",children:""}),h.jsx("span",{className:"version-new",children:a.newVersion})]}),h.jsxs("div",{className:"update-modal-content",children:[h.jsx("h3",{children:"What's New:"}),h.jsx("div",{className:"changelog-content",children:h.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&h.jsxs("div",{className:"update-status",children:[h.jsx("span",{className:"status-spinner",children:""}),c]}),h.jsx("div",{className:"update-modal-actions",children:s?h.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"update-btn update-btn-primary",onClick:p,children:"Update Now"}),h.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const gj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};gj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Xw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},t={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const p=t[c];p&&(d.accent&&(l.style.setProperty(`--node-${p}-color`,d.accent),l.style.setProperty(`--node-${p}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${p}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Kw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),p=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${p}, ${m}`},t=(c,d=15)=>{const p=parseInt(c.slice(1),16),m=Math.max(0,(p>>16)-Math.round(255*d/100)),g=Math.max(0,(p>>8&255)-Math.round(255*d/100)),b=Math.max(0,(p&255)-Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},r=(c,d=20)=>{const p=parseInt(c.slice(1),16),m=Math.min(255,(p>>16)+Math.round(255*d/100)),g=Math.min(255,(p>>8&255)+Math.round(255*d/100)),b=Math.min(255,(p&255)+Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},p=document.documentElement;for(const[m,g]of Object.entries(s)){const b=d[m]?.color||l[m];b&&(p.style.setProperty(`--socket-${g}-color`,b),p.style.setProperty(`--socket-${g}-dark`,t(b)),p.style.setProperty(`--socket-${g}-border`,r(b)),p.style.setProperty(`--socket-${g}-rgb`,a(b)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Xw();Kw();Qw();function Qw(){const a=t=>{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return`${r}, ${s}, ${l}`};try{const t=localStorage.getItem("t2theme-overrides");if(t){const r=JSON.parse(t),s=document.documentElement;Object.entries(r).forEach(([l,c])=>{l==="borderOpacity"?s.style.setProperty("--node-border-opacity",c/100):typeof c=="string"&&c.startsWith("#")&&(s.style.setProperty(`--theme-${l}`,c),s.style.setProperty(`--theme-${l}-rgb`,a(c)))})}}catch(t){console.warn("Failed to apply stored theme:",t)}}window.applyCategoryColors=Xw;window.applySocketColors=Kw;window.applyTheme=Qw;const qf=new Map,Gf=new Map;function yj(){const[a,t]=k.useState(ge.connected),[r,s]=k.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=k.useState([]),[d,p]=k.useState([]),[m,g]=k.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[b,w]=k.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[x,E]=k.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[_,F]=k.useState(null),[V,ee]=k.useState(0),[W,L]=k.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[Y,me]=k.useState([]),be=k.useRef(null),B=k.useRef(null),he=k.useRef({authenticated:!1,invalidPinNotified:!1}),se=100,ye=rp();k.useEffect(()=>{const v=setInterval(()=>{ee(C=>C+1)},3e4);return()=>clearInterval(v)},[]);const $e=k.useCallback(()=>{const v=window._t2Editor;if(!v)return;const A=v.getNodes().filter(D=>D.label==="Backdrop"||D.constructor?.name==="BackdropNode"||D.properties?.width!==void 0&&D.properties?.height!==void 0&&D.properties?.title!==void 0).map(D=>({id:D.id,title:D.properties?.title||"Group",color:D.properties?.customColor||window.BackdropColorPalette?.[D.properties?.colorIndex]?.border||"#888"})).sort((D,X)=>D.title.localeCompare(X.title));me(A)},[]);k.useEffect(()=>{const v=()=>{setTimeout($e,200)};window.addEventListener("graphLoadComplete",v),window.refreshBackdropGroups=$e;const C=setTimeout($e,500);return()=>{window.removeEventListener("graphLoadComplete",v),delete window.refreshBackdropGroups,clearTimeout(C)}},[$e]),k.useEffect(()=>Fw(C=>{E(C),!C.isLoading&&C.progress===100&&C.failedPlugins?.length>0&&ye.warning(`Loaded ${C.loadedCount} plugins (${C.failedPlugins.length} failed)`),C.error&&ye.error(`Plugin loading failed: ${C.error}`)}),[ye]),k.useEffect(()=>{function v(){t(!0),ye.success("Connected to server"),De("system","Socket connected to server"),Gf.clear();const Xe=ms();Xe&&ge.emit("authenticate",Xe),ge.emit("editor-active"),ge.emit("request-ha-status")}function C(){t(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),he.current.authenticated=!1,ye.warning("Disconnected from server - reconnecting..."),De("system","Socket disconnected from server")}function A(Xe){De("system",`Socket reconnected after ${Xe} attempt(s)`)}function D(Xe){Xe%5===0&&De("system",`Reconnection attempt ${Xe}...`)}function X(Xe){De("system","Reconnection failed, retrying...")}function ue(Xe){s(Xe)}function we(){he.current.authenticated||(he.current.authenticated=!0,he.current.invalidPinNotified=!1,ye.success("Authenticated"))}function Ie(Xe){he.current.authenticated=!1;const q=(Xe?.error||"").toString();if(q.toLowerCase().includes("invalid pin")){he.current.invalidPinNotified||(he.current.invalidPinNotified=!0,ye.error("Stored PIN is invalid. Update it in Settings  Security."));return}const ne=q?`Authentication failed: ${q}`:"Authentication failed";ye.error(ne)}function Ye(){if(!ge.connected)return;he.current.invalidPinNotified=!1;const Xe=ms();Xe&&ge.emit("authenticate",Xe)}function Et(Xe){const{id:q,state:ne,on:J,name:je,vendor:Ee}=Xe;if(!q)return;const R=Gf.get(q),T=J!==void 0?J:ne==="on"||ne==="playing"||ne==="open",U=je||Xe.friendly_name||Xe.attributes?.friendly_name||q.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(R&&R.on===T)return;Gf.set(q,{on:T,state:ne});const ce=qf.get(q),le=T?"ON":"OFF";let Ae=Ee||"External";Ee||(q.startsWith("ha_")?Ae="HA":q.startsWith("hue_")?Ae="Hue":q.startsWith("kasa_")&&(Ae="Kasa")),ce&&Date.now()-ce.timestamp<5e3?(De("device",`${U}  ${le}`,{source:"app",triggeredBy:ce.nodeTitle,nodeId:ce.nodeId}),qf.delete(q)):De("trigger",`${U}  ${le}`,{source:Ae})}function zt(Xe){}function Lt(Xe){const{nodeId:q,nodeLabel:ne,result:J}=Xe;De("node",`${ne||q} executed`,{...J,nodeId:q})}function Jt(Xe){Array.isArray(Xe)&&p(Xe.slice(0,20))}function ot(Xe){const{type:q,name:ne,value:J}=Xe;De("trigger",`${q}: ${ne}`,J)}function Bt(Xe){if(Xe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Xe.newVersion&&ye.info(` Update available: ${Xe.currentVersion}  ${Xe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>F(Xe)})}ge.on("connect",v),ge.on("disconnect",C),ge.on("reconnect",A),ge.on("reconnect_attempt",D),ge.on("reconnect_error",X),ge.on("auth-success",we),ge.on("auth-failed",Ie),ge.on("ha-connection-status",ue),ge.on("device-state-update",Et),ge.on("device_state_change",zt),ge.on("node_executed",Lt),ge.on("scheduled_events",Jt),ge.on("trigger_event",ot),ge.on("update-available",Bt),window.addEventListener("t2-pin-changed",Ye);const bn=()=>{ge.connected&&ge.emit("editor-inactive")};window.addEventListener("beforeunload",bn),VT();const Hn=setInterval(()=>{ge.connected&&ge.emit("editor-heartbeat")},3e4);return()=>{ge.connected&&ge.emit("editor-inactive"),clearInterval(Hn),ge.off("connect",v),ge.off("disconnect",C),ge.off("reconnect",A),ge.off("reconnect_attempt",D),ge.off("reconnect_error",X),ge.off("auth-success",we),ge.off("auth-failed",Ie),ge.off("ha-connection-status",ue),ge.off("device-state-update",Et),ge.off("device_state_change",zt),ge.off("node_executed",Lt),ge.off("scheduled_events",Jt),ge.off("trigger_event",ot),ge.off("update-available",Bt),window.removeEventListener("t2-pin-changed",Ye),window.removeEventListener("beforeunload",bn),qT()}},[]);const De=(v,C,A=null)=>{const D=new Date().toLocaleTimeString();c(X=>[{timestamp:D,type:v,message:C,details:A},...X].slice(0,se))},We=k.useRef({}),it=k.useCallback((v,C)=>{const A=C.map(we=>({...we,nodeId:v}));We.current[v]=A;const D=[];Object.values(We.current).forEach(we=>{Array.isArray(we)&&D.push(...we)});const X=new Date,ue=D.filter(we=>we.time&&new Date(we.time)>X).sort((we,Ie)=>new Date(we.time)-new Date(Ie.time)).slice(0,20);p(ue)},[]),Ke=k.useCallback(v=>{delete We.current[v],it(v,[])},[it]),P=k.useCallback(()=>d||[],[d]);k.useEffect(()=>(window.addEventLog=De,window.setUpcomingEvents=p,window.getUpcomingEvents=P,window.registerScheduledEvents=it,window.unregisterScheduledEvents=Ke,window.T2Toast=ye,window.registerPendingCommand=(v,C,A,D)=>{qf.set(v,{nodeTitle:C,action:A,nodeId:D,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.getUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[it,Ke,P,ye]);const de=v=>{if(!v)return"";const C=new Date(v),D=C-new Date,X=Math.floor(D/6e4),ue=Math.floor(X/60),we=Math.floor(ue/24);let Ie="";return we>0?Ie=`${we}d ${ue%24}h`:ue>0?Ie=`${ue}h ${X%60}m`:X>0?Ie=`${X}m`:Ie="<1m",`${C.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${Ie})`},pe=k.useCallback(async v=>{if(!v)return;const C=window._t2Area,A=window._t2Editor;if(!C||!A){console.warn("[focusNode] Editor not ready");return}const D=A.getNode(v);if(!D){console.warn("[focusNode] Node not found:",v);return}try{const{AreaExtensions:X}=await Jy(async()=>{const{AreaExtensions:ue}=await Promise.resolve().then(()=>Cv);return{AreaExtensions:ue}},void 0,import.meta.url);await X.zoomAt(C,[D],{scale:1})}catch(X){console.warn("[focusNode] Failed to zoom to node:",X)}},[]),Le=k.useCallback(async v=>{if(!v)return;const C=window._t2Area,A=window._t2Editor;if(!C||!A){console.warn("[focusBackdrop] Editor not ready");return}const D=A.getNode(v);if(!D){console.warn("[focusBackdrop] Backdrop not found:",v);return}try{const X=C.nodeViews.get(v);if(!X){console.warn("[focusBackdrop] Node view not found");return}const ue=X.position,we=D.properties?.width||D.width||400,Ie=D.properties?.height||D.height||300,Ye=ue.x+we/2,Et=ue.y+Ie/2,zt=C.container,Lt=zt.clientWidth,Jt=zt.clientHeight,ot=Lt*.85/we,Bt=Jt*.85/Ie,bn=Math.min(ot,Bt,1.5),Hn=Lt/2-Ye*bn,Xe=Jt/2-Et*bn;await C.area.zoom(bn,0,0),await C.area.translate(Hn,Xe)}catch(X){console.warn("[focusBackdrop] Failed to zoom to backdrop:",X)}},[]),Q=k.useCallback(async()=>{const v=window._t2Area,C=window._t2Editor;if(!v||!C){console.warn("[zoomExtents] Editor not ready");return}const A=C.getNodes();if(A.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:D}=await Jy(async()=>{const{AreaExtensions:X}=await Promise.resolve().then(()=>Cv);return{AreaExtensions:X}},void 0,import.meta.url);await D.zoomAt(v,A,{scale:.7})}catch(D){console.warn("[zoomExtents] Failed to zoom:",D)}},[]);return h.jsxs("div",{className:"app-container",children:[_&&_.hasUpdate&&h.jsx(mj,{updateInfo:_,onClose:()=>F(null)}),h.jsx(pj,{isLoading:x.isLoading,progress:x.progress,status:x.status,loadedCount:x.loadedCount,totalCount:x.totalCount,error:x.error}),h.jsx("div",{className:"editor-wrapper",children:h.jsx(fj,{})}),h.jsx("div",{className:"resize-handle",ref:B,onMouseDown:v=>{v.preventDefault();const C=v.clientY,A=m,D=ue=>{const we=C-ue.clientY,Ie=Math.max(80,Math.min(400,A+we));g(Ie),localStorage.setItem("panelHeight",Ie)},X=()=>{document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",X)};document.addEventListener("mousemove",D),document.addEventListener("mouseup",X)},children:h.jsx("div",{className:"resize-handle-grip"})}),h.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:b},children:[h.jsxs("div",{className:"panel event-log-panel",children:[h.jsxs("div",{className:"panel-header",children:[h.jsx("span",{className:"panel-title",children:"Event Log"}),h.jsxs("div",{className:"group-nav-buttons",children:[h.jsx("button",{className:"group-nav-btn group-nav-all",onClick:Q,title:"Zoom to fit all nodes (F key)",children:" All"}),Y.map(v=>h.jsx("button",{className:"group-nav-btn",style:{borderColor:v.color},onClick:()=>Le(v.id),title:`Zoom to "${v.title}" group`,children:v.title},v.id))]}),h.jsxs("div",{className:"panel-controls",children:[h.jsxs("div",{className:"filter-buttons",children:[h.jsx("button",{className:`filter-btn ${W==="all"?"active":""}`,onClick:()=>{L("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),h.jsx("button",{className:`filter-btn ${W==="app"?"active":""}`,onClick:()=>{L("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),h.jsx("button",{className:`filter-btn ${W==="ha"?"active":""}`,onClick:()=>{L("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.max(8,b-1);w(v),localStorage.setItem("panelFontSize",v)},children:"A-"}),h.jsxs("span",{className:"font-size-label",children:[b,"px"]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.min(16,b+1);w(v),localStorage.setItem("panelFontSize",v)},children:"A+"}),h.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),h.jsx("div",{className:"panel-content",ref:be,children:l.length===0?h.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(v=>W==="all"?!0:W==="app"?v.details?.triggeredBy||v.details?.source==="app"||v.type==="node"||v.type==="device"||v.type==="system":W==="ha"?v.type==="trigger"||v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy:!0).map((v,C)=>h.jsxs("div",{className:`log-entry log-${v.type}${v.details?.nodeId?" clickable":""}`,title:v.details?.nodeId?"Click to jump to this node":v.details?.triggeredBy?`Triggered by: ${v.details.triggeredBy}`:v.details?.source&&v.details.source!=="app"?`Triggered externally via ${v.details.source}`:"",onClick:()=>v.details?.nodeId&&pe(v.details.nodeId),style:v.details?.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"log-time",children:v.timestamp}),h.jsx("span",{className:`log-type-badge ${v.type}`,children:v.type==="trigger"?"external":v.type}),h.jsx("span",{className:"log-message",children:v.message}),v.details?.triggeredBy&&h.jsxs("span",{className:"log-source app-source",children:["via ",v.details.triggeredBy]}),v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy&&h.jsxs("span",{className:"log-source external-source",children:["via ",v.details.source]})]},C))})]}),h.jsxs("div",{className:"panel upcoming-events-panel",children:[h.jsx("div",{className:"panel-header",children:h.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),h.jsx("div",{className:"panel-content",children:d.length===0?h.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((v,C)=>h.jsxs("div",{className:`event-entry event-${v.action||"unknown"}${v.nodeId?" clickable":""}`,onClick:()=>v.nodeId&&pe(v.nodeId),title:v.nodeId?"Click to jump to this node":"",style:v.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"event-time",children:de(v.time)}),h.jsx("span",{className:`event-action ${v.action}`,children:v.action||"event"}),h.jsx("span",{className:"event-device",children:v.deviceName||v.device||"Unknown"})]},C))})]})]})]})}function vj(){return h.jsx(hj,{children:h.jsxs(FO,{children:[h.jsx(ZO,{}),h.jsx(yj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");ub.createRoot(document.getElementById("root")).render(h.jsx(k.StrictMode,{children:h.jsx(vj,{})}));
