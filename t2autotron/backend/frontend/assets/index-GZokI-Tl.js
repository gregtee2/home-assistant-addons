function ub(a,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function jh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var lf={exports:{}},Co={};var qy;function i2(){if(qy)return Co;qy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return Co.Fragment=t,Co.jsx=r,Co.jsxs=r,Co}var Yy;function s2(){return Yy||(Yy=1,lf.exports=i2()),lf.exports}var h=s2(),cf={exports:{}},We={};var Py;function o2(){if(Py)return We;Py=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=k&&v[k]||v["@@iterator"],typeof v=="function"?v:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,V={};function ee(v,N,_){this.props=v,this.context=N,this.refs=V,this.updater=_||D}ee.prototype.isReactComponent={},ee.prototype.setState=function(v,N){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,N,"setState")},ee.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function W(){}W.prototype=ee.prototype;function I(v,N,_){this.props=v,this.context=N,this.refs=V,this.updater=_||D}var q=I.prototype=new W;q.constructor=I,X(q,ee.prototype),q.isPureReactComponent=!0;var ve=Array.isArray;function xe(){}var $={H:null,A:null,T:null,S:null},me=Object.prototype.hasOwnProperty;function ce(v,N,_){var M=_.ref;return{$$typeof:a,type:v,key:N,ref:M!==void 0?M:null,props:_}}function ge(v,N){return ce(v.type,N,v.props)}function Re(v){return typeof v=="object"&&v!==null&&v.$$typeof===a}function _e(v){var N={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(_){return N[_]})}var Je=/\/+/g;function tt(v,N){return typeof v=="object"&&v!==null&&v.key!=null?_e(""+v.key):N.toString(36)}function Qe(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(xe,xe):(v.status="pending",v.then(function(N){v.status==="pending"&&(v.status="fulfilled",v.value=N)},function(N){v.status==="pending"&&(v.status="rejected",v.reason=N)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function Y(v,N,_,M,Q){var pe=typeof v;(pe==="undefined"||pe==="boolean")&&(v=null);var Ee=!1;if(v===null)Ee=!0;else switch(pe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(v.$$typeof){case a:case t:Ee=!0;break;case b:return Ee=v._init,Y(Ee(v._payload),N,_,M,Q)}}if(Ee)return Q=Q(v),Ee=M===""?"."+tt(v,0):M,ve(Q)?(_="",Ee!=null&&(_=Ee.replace(Je,"$&/")+"/"),Y(Q,N,_,"",function(Rt){return Rt})):Q!=null&&(Re(Q)&&(Q=ge(Q,_+(Q.key==null||v&&v.key===Q.key?"":(""+Q.key).replace(Je,"$&/")+"/")+Ee)),N.push(Q)),1;Ee=0;var Ie=M===""?".":M+":";if(ve(v))for(var Ye=0;Ye<v.length;Ye++)M=v[Ye],pe=Ie+tt(M,Ye),Ee+=Y(M,N,_,pe,Q);else if(Ye=E(v),typeof Ye=="function")for(v=Ye.call(v),Ye=0;!(M=v.next()).done;)M=M.value,pe=Ie+tt(M,Ye++),Ee+=Y(M,N,_,pe,Q);else if(pe==="object"){if(typeof v.then=="function")return Y(Qe(v),N,_,M,Q);throw N=String(v),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function he(v,N,_){if(v==null)return v;var M=[],Q=0;return Y(v,M,"","",function(pe){return N.call(_,pe,Q++)}),M}function ye(v){if(v._status===-1){var N=v._result;N=N(),N.then(function(_){(v._status===0||v._status===-1)&&(v._status=1,v._result=_)},function(_){(v._status===0||v._status===-1)&&(v._status=2,v._result=_)}),v._status===-1&&(v._status=0,v._result=N)}if(v._status===1)return v._result.default;throw v._result}var ze=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},J={map:he,forEach:function(v,N,_){he(v,function(){N.apply(this,arguments)},_)},count:function(v){var N=0;return he(v,function(){N++}),N},toArray:function(v){return he(v,function(N){return N})||[]},only:function(v){if(!Re(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return We.Activity=w,We.Children=J,We.Component=ee,We.Fragment=r,We.Profiler=l,We.PureComponent=I,We.StrictMode=s,We.Suspense=m,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,We.__COMPILER_RUNTIME={__proto__:null,c:function(v){return $.H.useMemoCache(v)}},We.cache=function(v){return function(){return v.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(v,N,_){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var M=X({},v.props),Q=v.key;if(N!=null)for(pe in N.key!==void 0&&(Q=""+N.key),N)!me.call(N,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&N.ref===void 0||(M[pe]=N[pe]);var pe=arguments.length-2;if(pe===1)M.children=_;else if(1<pe){for(var Ee=Array(pe),Ie=0;Ie<pe;Ie++)Ee[Ie]=arguments[Ie+2];M.children=Ee}return ce(v.type,Q,M)},We.createContext=function(v){return v={$$typeof:d,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:c,_context:v},v},We.createElement=function(v,N,_){var M,Q={},pe=null;if(N!=null)for(M in N.key!==void 0&&(pe=""+N.key),N)me.call(N,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(Q[M]=N[M]);var Ee=arguments.length-2;if(Ee===1)Q.children=_;else if(1<Ee){for(var Ie=Array(Ee),Ye=0;Ye<Ee;Ye++)Ie[Ye]=arguments[Ye+2];Q.children=Ie}if(v&&v.defaultProps)for(M in Ee=v.defaultProps,Ee)Q[M]===void 0&&(Q[M]=Ee[M]);return ce(v,pe,Q)},We.createRef=function(){return{current:null}},We.forwardRef=function(v){return{$$typeof:p,render:v}},We.isValidElement=Re,We.lazy=function(v){return{$$typeof:b,_payload:{_status:-1,_result:v},_init:ye}},We.memo=function(v,N){return{$$typeof:g,type:v,compare:N===void 0?null:N}},We.startTransition=function(v){var N=$.T,_={};$.T=_;try{var M=v(),Q=$.S;Q!==null&&Q(_,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(xe,ze)}catch(pe){ze(pe)}finally{N!==null&&_.types!==null&&(N.types=_.types),$.T=N}},We.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},We.use=function(v){return $.H.use(v)},We.useActionState=function(v,N,_){return $.H.useActionState(v,N,_)},We.useCallback=function(v,N){return $.H.useCallback(v,N)},We.useContext=function(v){return $.H.useContext(v)},We.useDebugValue=function(){},We.useDeferredValue=function(v,N){return $.H.useDeferredValue(v,N)},We.useEffect=function(v,N){return $.H.useEffect(v,N)},We.useEffectEvent=function(v){return $.H.useEffectEvent(v)},We.useId=function(){return $.H.useId()},We.useImperativeHandle=function(v,N,_){return $.H.useImperativeHandle(v,N,_)},We.useInsertionEffect=function(v,N){return $.H.useInsertionEffect(v,N)},We.useLayoutEffect=function(v,N){return $.H.useLayoutEffect(v,N)},We.useMemo=function(v,N){return $.H.useMemo(v,N)},We.useOptimistic=function(v,N){return $.H.useOptimistic(v,N)},We.useReducer=function(v,N,_){return $.H.useReducer(v,N,_)},We.useRef=function(v){return $.H.useRef(v)},We.useState=function(v){return $.H.useState(v)},We.useSyncExternalStore=function(v,N,_){return $.H.useSyncExternalStore(v,N,_)},We.useTransition=function(){return $.H.useTransition()},We.version="19.2.0",We}var Fy;function Ah(){return Fy||(Fy=1,cf.exports=o2()),cf.exports}var x=Ah();const Ea=jh(x),l2=ub({__proto__:null,default:Ea},[x]);var uf={exports:{}},To={},df={exports:{}},ff={};var Zy;function c2(){return Zy||(Zy=1,(function(a){function t(Y,he){var ye=Y.length;Y.push(he);e:for(;0<ye;){var ze=ye-1>>>1,J=Y[ze];if(0<l(J,he))Y[ze]=he,Y[ye]=J,ye=ze;else break e}}function r(Y){return Y.length===0?null:Y[0]}function s(Y){if(Y.length===0)return null;var he=Y[0],ye=Y.pop();if(ye!==he){Y[0]=ye;e:for(var ze=0,J=Y.length,v=J>>>1;ze<v;){var N=2*(ze+1)-1,_=Y[N],M=N+1,Q=Y[M];if(0>l(_,ye))M<J&&0>l(Q,_)?(Y[ze]=Q,Y[M]=ye,ze=M):(Y[ze]=_,Y[N]=ye,ze=N);else if(M<J&&0>l(Q,ye))Y[ze]=Q,Y[M]=ye,ze=M;else break e}}return he}function l(Y,he){var ye=Y.sortIndex-he.sortIndex;return ye!==0?ye:Y.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();a.unstable_now=function(){return d.now()-p}}var m=[],g=[],b=1,w=null,k=3,E=!1,D=!1,X=!1,V=!1,ee=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function q(Y){for(var he=r(g);he!==null;){if(he.callback===null)s(g);else if(he.startTime<=Y)s(g),he.sortIndex=he.expirationTime,t(m,he);else break;he=r(g)}}function ve(Y){if(X=!1,q(Y),!D)if(r(m)!==null)D=!0,xe||(xe=!0,_e());else{var he=r(g);he!==null&&Qe(ve,he.startTime-Y)}}var xe=!1,$=-1,me=5,ce=-1;function ge(){return V?!0:!(a.unstable_now()-ce<me)}function Re(){if(V=!1,xe){var Y=a.unstable_now();ce=Y;var he=!0;try{e:{D=!1,X&&(X=!1,W($),$=-1),E=!0;var ye=k;try{t:{for(q(Y),w=r(m);w!==null&&!(w.expirationTime>Y&&ge());){var ze=w.callback;if(typeof ze=="function"){w.callback=null,k=w.priorityLevel;var J=ze(w.expirationTime<=Y);if(Y=a.unstable_now(),typeof J=="function"){w.callback=J,q(Y),he=!0;break t}w===r(m)&&s(m),q(Y)}else s(m);w=r(m)}if(w!==null)he=!0;else{var v=r(g);v!==null&&Qe(ve,v.startTime-Y),he=!1}}break e}finally{w=null,k=ye,E=!1}he=void 0}}finally{he?_e():xe=!1}}}var _e;if(typeof I=="function")_e=function(){I(Re)};else if(typeof MessageChannel<"u"){var Je=new MessageChannel,tt=Je.port2;Je.port1.onmessage=Re,_e=function(){tt.postMessage(null)}}else _e=function(){ee(Re,0)};function Qe(Y,he){$=ee(function(){Y(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Y){Y.callback=null},a.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):me=0<Y?Math.floor(1e3/Y):5},a.unstable_getCurrentPriorityLevel=function(){return k},a.unstable_next=function(Y){switch(k){case 1:case 2:case 3:var he=3;break;default:he=k}var ye=k;k=he;try{return Y()}finally{k=ye}},a.unstable_requestPaint=function(){V=!0},a.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ye=k;k=Y;try{return he()}finally{k=ye}},a.unstable_scheduleCallback=function(Y,he,ye){var ze=a.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,Y){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=ye+J,Y={id:b++,callback:he,priorityLevel:Y,startTime:ye,expirationTime:J,sortIndex:-1},ye>ze?(Y.sortIndex=ye,t(g,Y),r(m)===null&&Y===r(g)&&(X?(W($),$=-1):X=!0,Qe(ve,ye-ze))):(Y.sortIndex=J,t(m,Y),D||E||(D=!0,xe||(xe=!0,_e()))),Y},a.unstable_shouldYield=ge,a.unstable_wrapCallback=function(Y){var he=k;return function(){var ye=k;k=he;try{return Y.apply(this,arguments)}finally{k=ye}}}})(ff)),ff}var Xy;function u2(){return Xy||(Xy=1,df.exports=c2()),df.exports}var hf={exports:{}},Hn={};var Ky;function d2(){if(Ky)return Hn;Ky=1;var a=Ah();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:m,containerInfo:g,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Hn.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(m,g,null,b)},Hn.flushSync=function(m){var g=d.T,b=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=b,s.d.f()}},Hn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Hn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Hn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin),k=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:E}):b==="script"&&s.d.X(m,{crossOrigin:w,integrity:k,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Hn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin);s.d.L(m,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Hn.requestFormReset=function(m){s.d.r(m)},Hn.unstable_batchedUpdates=function(m,g){return m(g)},Hn.useFormState=function(m,g,b){return d.H.useFormState(m,g,b)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.0",Hn}var Qy;function db(){if(Qy)return hf.exports;Qy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),hf.exports=d2(),hf.exports}var Wy;function f2(){if(Wy)return To;Wy=1;var a=u2(),t=Ah(),r=db();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),n;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var y=!1,S=u.child;S;){if(S===i){y=!0,i=u,o=f;break}if(S===o){y=!0,o=u,i=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===i){y=!0,i=f,o=u;break}if(S===o){y=!0,o=f,i=u;break}S=S.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),ee=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),I=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),ve=Symbol.for("react.suspense"),xe=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),ge=Symbol.for("react.memo_cache_sentinel"),Re=Symbol.iterator;function _e(e){return e===null||typeof e!="object"?null:(e=Re&&e[Re]||e["@@iterator"],typeof e=="function"?e:null)}var Je=Symbol.for("react.client.reference");function tt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case X:return"Fragment";case ee:return"Profiler";case V:return"StrictMode";case ve:return"Suspense";case xe:return"SuspenseList";case ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case I:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case q:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return n=e.displayName||null,n!==null?n:tt(e.type)||"Memo";case me:n=e._payload,e=e._init;try{return tt(e(n))}catch{}}return null}var Qe=Array.isArray,Y=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ze=[],J=-1;function v(e){return{current:e}}function N(e){0>J||(e.current=ze[J],ze[J]=null,J--)}function _(e,n){J++,ze[J]=e.current,e.current=n}var M=v(null),Q=v(null),pe=v(null),Ee=v(null);function Ie(e,n){switch(_(pe,n),_(Q,e),_(M,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?hy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=hy(n),e=py(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}N(M),_(M,e)}function Ye(){N(M),N(Q),N(pe)}function Rt(e){e.memoizedState!==null&&_(Ee,e);var n=M.current,i=py(n,e.type);n!==i&&(_(Q,e),_(M,i))}function Yt(e){Q.current===e&&(N(M),N(Q)),Ee.current===e&&(N(Ee),So._currentValue=ye)}var It,ln;function it(e){if(It===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);It=n&&n[1]||"",ln=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+It+e+ln}var jt=!1;function Nn(e,n){if(!e||jt)return"";jt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(K){var G=K}Reflect.construct(e,[],ue)}else{try{ue.call()}catch(K){G=K}e.call(ue.prototype)}}else{try{throw Error()}catch(K){G=K}(ue=e())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var A=y.split(`
`),H=S.split(`
`);for(u=o=0;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;for(;u<H.length&&!H[u].includes("DetermineComponentFrameRoot");)u++;if(o===A.length||u===H.length)for(o=A.length-1,u=H.length-1;1<=o&&0<=u&&A[o]!==H[u];)u--;for(;1<=o&&0<=u;o--,u--)if(A[o]!==H[u]){if(o!==1||u!==1)do if(o--,u--,0>u||A[o]!==H[u]){var ae=`
`+A[o].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=o&&0<=u);break}}}finally{jt=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?it(i):""}function Fe(e,n){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return e.child!==n&&n!==null?it("Suspense Fallback"):it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return Nn(e.type,!1);case 11:return Nn(e.type.render,!1);case 1:return Nn(e.type,!0);case 31:return it("Activity");default:return""}}function vt(e){try{var n="",i=null;do n+=Fe(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var nn=Object.prototype.hasOwnProperty,On=a.unstable_scheduleCallback,Zn=a.unstable_cancelCallback,Ta=a.unstable_shouldYield,Na=a.unstable_requestPaint,C=a.unstable_now,z=a.unstable_getCurrentPriorityLevel,L=a.unstable_ImmediatePriority,re=a.unstable_UserBlockingPriority,te=a.unstable_NormalPriority,ne=a.unstable_LowPriority,T=a.unstable_IdlePriority,F=a.log,de=a.unstable_setDisableYieldValue,ie=null,Se=null;function oe(e){if(typeof F=="function"&&de(e),Se&&typeof Se.setStrictMode=="function")try{Se.setStrictMode(ie,e)}catch{}}var Ce=Math.clz32?Math.clz32:Ve,Pe=Math.log,kt=Math.LN2;function Ve(e){return e>>>=0,e===0?32:31-(Pe(e)/kt|0)|0}var Xe=256,ke=262144,bt=4194304;function He(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function wt(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?u=He(o):(y&=S,y!==0?u=He(y):i||(i=S&~e,i!==0&&(u=He(i))))):(S=o&~f,S!==0?u=He(S):y!==0?u=He(y):i||(i=o&~e,i!==0&&(u=He(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function Vt(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function lt(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $t(){var e=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),e}function hn(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function kn(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cn(e,n,i,o,u,f){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,A=e.expirationTimes,H=e.hiddenUpdates;for(i=y&~i;0<i;){var ae=31-Ce(i),ue=1<<ae;S[ae]=0,A[ae]=-1;var G=H[ae];if(G!==null)for(H[ae]=null,ae=0;ae<G.length;ae++){var K=G[ae];K!==null&&(K.lane&=-536870913)}i&=~ue}o!==0&&pn(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function pn(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ce(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function $a(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Ce(i),u=1<<o;u&n|e[o]&n&&(e[o]|=n),i&=~u}}function er(e,n){var i=n&-n;return i=(i&42)!==0?1:jn(i),(i&(e.suspendedLanes|n))!==0?0:i}function jn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function kr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function ii(){var e=he.p;return e!==0?e:(e=window.event,e===void 0?32:By(e.type))}function si(e,n){var i=he.p;try{return he.p=e,n()}finally{he.p=i}}var At=Math.random().toString(36).slice(2),O="__reactFiber$"+At,j="__reactProps$"+At,P="__reactContainer$"+At,le="__reactEvents$"+At,De="__reactListeners$"+At,Pt="__reactHandles$"+At,Rn="__reactResources$"+At,Ge="__reactMarker$"+At;function Qt(e){delete e[O],delete e[j],delete e[le],delete e[De],delete e[Pt]}function _t(e){var n=e[O];if(n)return n;for(var i=e.parentNode;i;){if(n=i[P]||i[O]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=Sy(e);e!==null;){if(i=e[O])return i;e=Sy(e)}return n}e=i,i=e.parentNode}return null}function ht(e){if(e=e[O]||e[P]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ua(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Wt(e){var n=e[Rn];return n||(n=e[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Gt(e){e[Ge]=!0}var Ha=new Set,Er={};function tr(e,n){Va(e,n),Va(e+"Capture",n)}function Va(e,n){for(Er[e]=n,e=0;e<n.length;e++)Ha.add(n[e])}var Z=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fe={},we={};function Ne(e){return nn.call(we,e)?!0:nn.call(fe,e)?!1:Z.test(e)?we[e]=!0:(fe[e]=!0,!1)}function je(e,n,i){if(Ne(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function $e(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function pt(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function Et(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function an(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function rn(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function An(e){if(!e._valueTracker){var n=an(e)?"checked":"value";e._valueTracker=rn(e,n,""+e[n])}}function qt(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=an(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function En(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var oi=/[\n"\\]/g;function mn(e){return e.replace(oi,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Oa(e,n,i,o,u,f,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Et(n)):e.value!==""+Et(n)&&(e.value=""+Et(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?nu(e,y,Et(n)):i!=null?nu(e,y,Et(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+Et(S):e.removeAttribute("name")}function tu(e,n,i,o,u,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){An(e);return}i=i!=null?""+Et(i):"",n=n!=null?""+Et(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),An(e)}function nu(e,n,i){n==="number"&&En(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function Mi(e,n,i,o){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+Et(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function lp(e,n,i){if(n!=null&&(n=""+Et(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+Et(i):""}function cp(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(Qe(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=Et(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),An(e)}function Ri(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var eS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function up(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||eS.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function dp(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&i[u]!==o&&up(e,u,o)}else for(var f in n)n.hasOwnProperty(f)&&up(e,f,n[f])}function au(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qo(e){return nS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function nr(){}var ru=null;function iu(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zi=null,Li=null;function fp(e){var n=ht(e);if(n&&(e=n.stateNode)){var i=e[j]||null;e:switch(e=n.stateNode,n.type){case"input":if(Oa(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mn(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var u=o[j]||null;if(!u)throw Error(s(90));Oa(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&qt(o)}break e;case"textarea":lp(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&Mi(e,!!i.multiple,n,!1)}}}var su=!1;function hp(e,n,i){if(su)return e(n,i);su=!0;try{var o=e(n);return o}finally{if(su=!1,(zi!==null||Li!==null)&&(Il(),zi&&(n=zi,e=Li,Li=zi=null,fp(n),e)))for(n=0;n<e.length;n++)fp(e[n])}}function Bs(e,n){var i=e.stateNode;if(i===null)return null;var o=i[j]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ou=!1;if(ar)try{var Is={};Object.defineProperty(Is,"passive",{get:function(){ou=!0}}),window.addEventListener("test",Is,Is),window.removeEventListener("test",Is,Is)}catch{ou=!1}var Cr=null,lu=null,Wo=null;function pp(){if(Wo)return Wo;var e,n=lu,i=n.length,o,u="value"in Cr?Cr.value:Cr.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&n[i-o]===u[f-o];o++);return Wo=u.slice(e,1<o?1-o:void 0)}function Jo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function el(){return!0}function mp(){return!1}function Xn(e){function n(i,o,u,f,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?el:mp,this.isPropagationStopped=mp,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=el)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=el)},persist:function(){},isPersistent:el}),n}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tl=Xn(li),$s=w({},li,{view:0,detail:0}),aS=Xn($s),cu,uu,Us,nl=w({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Us&&(Us&&e.type==="mousemove"?(cu=e.screenX-Us.screenX,uu=e.screenY-Us.screenY):uu=cu=0,Us=e),cu)},movementY:function(e){return"movementY"in e?e.movementY:uu}}),gp=Xn(nl),rS=w({},nl,{dataTransfer:0}),iS=Xn(rS),sS=w({},$s,{relatedTarget:0}),du=Xn(sS),oS=w({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),lS=Xn(oS),cS=w({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uS=Xn(cS),dS=w({},li,{data:0}),yp=Xn(dS),fS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=pS[e])?!!n[e]:!1}function fu(){return mS}var gS=w({},$s,{key:function(e){if(e.key){var n=fS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Jo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fu,charCode:function(e){return e.type==="keypress"?Jo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yS=Xn(gS),vS=w({},nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vp=Xn(vS),bS=w({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fu}),wS=Xn(bS),SS=w({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),xS=Xn(SS),kS=w({},nl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ES=Xn(kS),CS=w({},li,{newState:0,oldState:0}),TS=Xn(CS),NS=[9,13,27,32],hu=ar&&"CompositionEvent"in window,Hs=null;ar&&"documentMode"in document&&(Hs=document.documentMode);var OS=ar&&"TextEvent"in window&&!Hs,bp=ar&&(!hu||Hs&&8<Hs&&11>=Hs),wp=" ",Sp=!1;function xp(e,n){switch(e){case"keyup":return NS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Bi=!1;function jS(e,n){switch(e){case"compositionend":return kp(n);case"keypress":return n.which!==32?null:(Sp=!0,wp);case"textInput":return e=n.data,e===wp&&Sp?null:e;default:return null}}function AS(e,n){if(Bi)return e==="compositionend"||!hu&&xp(e,n)?(e=pp(),Wo=lu=Cr=null,Bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return bp&&n.locale!=="ko"?null:n.data;default:return null}}var _S={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!_S[e.type]:n==="textarea"}function Cp(e,n,i,o){zi?Li?Li.push(o):Li=[o]:zi=o,n=Yl(n,"onChange"),0<n.length&&(i=new tl("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var Vs=null,Gs=null;function DS(e){oy(e,0)}function al(e){var n=Ua(e);if(qt(n))return e}function Tp(e,n){if(e==="change")return n}var Np=!1;if(ar){var pu;if(ar){var mu="oninput"in document;if(!mu){var Op=document.createElement("div");Op.setAttribute("oninput","return;"),mu=typeof Op.oninput=="function"}pu=mu}else pu=!1;Np=pu&&(!document.documentMode||9<document.documentMode)}function jp(){Vs&&(Vs.detachEvent("onpropertychange",Ap),Gs=Vs=null)}function Ap(e){if(e.propertyName==="value"&&al(Gs)){var n=[];Cp(n,Gs,e,iu(e)),hp(DS,n)}}function MS(e,n,i){e==="focusin"?(jp(),Vs=n,Gs=i,Vs.attachEvent("onpropertychange",Ap)):e==="focusout"&&jp()}function RS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return al(Gs)}function zS(e,n){if(e==="click")return al(n)}function LS(e,n){if(e==="input"||e==="change")return al(n)}function BS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var aa=typeof Object.is=="function"?Object.is:BS;function qs(e,n){if(aa(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!nn.call(n,u)||!aa(e[u],n[u]))return!1}return!0}function _p(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Dp(e,n){var i=_p(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=_p(i)}}function Mp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Mp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Rp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=En(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=En(e.document)}return n}function gu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var IS=ar&&"documentMode"in document&&11>=document.documentMode,Ii=null,yu=null,Ys=null,vu=!1;function zp(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;vu||Ii==null||Ii!==En(o)||(o=Ii,"selectionStart"in o&&gu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ys&&qs(Ys,o)||(Ys=o,o=Yl(yu,"onSelect"),0<o.length&&(n=new tl("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=Ii)))}function ci(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var $i={animationend:ci("Animation","AnimationEnd"),animationiteration:ci("Animation","AnimationIteration"),animationstart:ci("Animation","AnimationStart"),transitionrun:ci("Transition","TransitionRun"),transitionstart:ci("Transition","TransitionStart"),transitioncancel:ci("Transition","TransitionCancel"),transitionend:ci("Transition","TransitionEnd")},bu={},Lp={};ar&&(Lp=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function ui(e){if(bu[e])return bu[e];if(!$i[e])return e;var n=$i[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in Lp)return bu[e]=n[i];return e}var Bp=ui("animationend"),Ip=ui("animationiteration"),$p=ui("animationstart"),$S=ui("transitionrun"),US=ui("transitionstart"),HS=ui("transitioncancel"),Up=ui("transitionend"),Hp=new Map,wu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wu.push("scrollEnd");function ja(e,n){Hp.set(e,n),tr(n,[e])}var rl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},fa=[],Ui=0,Su=0;function il(){for(var e=Ui,n=Su=Ui=0;n<e;){var i=fa[n];fa[n++]=null;var o=fa[n];fa[n++]=null;var u=fa[n];fa[n++]=null;var f=fa[n];if(fa[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}f!==0&&Vp(i,u,f)}}function sl(e,n,i,o){fa[Ui++]=e,fa[Ui++]=n,fa[Ui++]=i,fa[Ui++]=o,Su|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function xu(e,n,i,o){return sl(e,n,i,o),ol(e)}function di(e,n){return sl(e,null,null,n),ol(e)}function Vp(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&n!==null&&(u=31-Ce(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[n]:o.push(n),n.lane=i|536870912),f):null}function ol(e){if(50<po)throw po=0,_d=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Hi={};function VS(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ra(e,n,i,o){return new VS(e,n,i,o)}function ku(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rr(e,n){var i=e.alternate;return i===null?(i=ra(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Gp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ll(e,n,i,o,u,f){var y=0;if(o=e,typeof e=="function")ku(e)&&(y=1);else if(typeof e=="string")y=Fx(e,i,M.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ce:return e=ra(31,i,n,u),e.elementType=ce,e.lanes=f,e;case X:return fi(i.children,u,f,n);case V:y=8,u|=24;break;case ee:return e=ra(12,i,n,u|2),e.elementType=ee,e.lanes=f,e;case ve:return e=ra(13,i,n,u),e.elementType=ve,e.lanes=f,e;case xe:return e=ra(19,i,n,u),e.elementType=xe,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:y=10;break e;case W:y=9;break e;case q:y=11;break e;case $:y=14;break e;case me:y=16,o=null;break e}y=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=ra(y,i,n,u),n.elementType=e,n.type=o,n.lanes=f,n}function fi(e,n,i,o){return e=ra(7,e,o,n),e.lanes=i,e}function Eu(e,n,i){return e=ra(6,e,null,n),e.lanes=i,e}function qp(e){var n=ra(18,null,null,0);return n.stateNode=e,n}function Cu(e,n,i){return n=ra(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var Yp=new WeakMap;function ha(e,n){if(typeof e=="object"&&e!==null){var i=Yp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:vt(n)},Yp.set(e,n),n)}return{value:e,source:n,stack:vt(n)}}var Vi=[],Gi=0,cl=null,Ps=0,pa=[],ma=0,Tr=null,Ga=1,qa="";function ir(e,n){Vi[Gi++]=Ps,Vi[Gi++]=cl,cl=e,Ps=n}function Pp(e,n,i){pa[ma++]=Ga,pa[ma++]=qa,pa[ma++]=Tr,Tr=e;var o=Ga;e=qa;var u=32-Ce(o)-1;o&=~(1<<u),i+=1;var f=32-Ce(n)+u;if(30<f){var y=u-u%5;f=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Ga=1<<32-Ce(n)+u|i<<u|o,qa=f+e}else Ga=1<<f|i<<u|o,qa=e}function Tu(e){e.return!==null&&(ir(e,1),Pp(e,1,0))}function Nu(e){for(;e===cl;)cl=Vi[--Gi],Vi[Gi]=null,Ps=Vi[--Gi],Vi[Gi]=null;for(;e===Tr;)Tr=pa[--ma],pa[ma]=null,qa=pa[--ma],pa[ma]=null,Ga=pa[--ma],pa[ma]=null}function Fp(e,n){pa[ma++]=Ga,pa[ma++]=qa,pa[ma++]=Tr,Ga=n.id,qa=n.overflow,Tr=e}var zn=null,Ft=null,mt=!1,Nr=null,ga=!1,Ou=Error(s(519));function Or(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Fs(ha(n,e)),Ou}function Zp(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[O]=e,n[j]=o,i){case"dialog":ot("cancel",n),ot("close",n);break;case"iframe":case"object":case"embed":ot("load",n);break;case"video":case"audio":for(i=0;i<go.length;i++)ot(go[i],n);break;case"source":ot("error",n);break;case"img":case"image":case"link":ot("error",n),ot("load",n);break;case"details":ot("toggle",n);break;case"input":ot("invalid",n),tu(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ot("invalid",n);break;case"textarea":ot("invalid",n),cp(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||dy(n.textContent,i)?(o.popover!=null&&(ot("beforetoggle",n),ot("toggle",n)),o.onScroll!=null&&ot("scroll",n),o.onScrollEnd!=null&&ot("scrollend",n),o.onClick!=null&&(n.onclick=nr),n=!0):n=!1,n||Or(e,!0)}function Xp(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:ga=!1;return;case 27:case 3:ga=!0;return;default:zn=zn.return}}function qi(e){if(e!==zn)return!1;if(!mt)return Xp(e),mt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||Pd(e.type,e.memoizedProps)),i=!i),i&&Ft&&Or(e),Xp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=wy(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=wy(e)}else n===27?(n=Ft,Vr(e.type)?(e=Qd,Qd=null,Ft=e):Ft=n):Ft=zn?va(e.stateNode.nextSibling):null;return!0}function hi(){Ft=zn=null,mt=!1}function ju(){var e=Nr;return e!==null&&(Jn===null?Jn=e:Jn.push.apply(Jn,e),Nr=null),e}function Fs(e){Nr===null?Nr=[e]:Nr.push(e)}var Au=v(null),pi=null,sr=null;function jr(e,n,i){_(Au,n._currentValue),n._currentValue=i}function or(e){e._currentValue=Au.current,N(Au)}function _u(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function Du(e,n,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var y=u.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=u;for(var A=0;A<n.length;A++)if(S.context===n[A]){f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),_u(f.return,i,e),o||(y=null);break e}f=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(s(341));y.lanes|=i,f=y.alternate,f!==null&&(f.lanes|=i),_u(y,i,e),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===e){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function Yi(e,n,i,o){e=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var S=u.type;aa(u.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(u===Ee.current){if(y=u.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(So):e=[So])}u=u.return}e!==null&&Du(n,e,i,o),n.flags|=262144}function ul(e){for(e=e.firstContext;e!==null;){if(!aa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function mi(e){pi=e,sr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Kp(pi,e)}function dl(e,n){return pi===null&&mi(e),Kp(e,n)}function Kp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},sr===null){if(e===null)throw Error(s(308));sr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else sr=sr.next=n;return i}var GS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},qS=a.unstable_scheduleCallback,YS=a.unstable_NormalPriority,gn={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new GS,data:new Map,refCount:0}}function Zs(e){e.refCount--,e.refCount===0&&qS(YS,function(){e.controller.abort()})}var Xs=null,Ru=0,Pi=0,Fi=null;function PS(e,n){if(Xs===null){var i=Xs=[];Ru=0,Pi=Bd(),Fi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Ru++,n.then(Qp,Qp),n}function Qp(){if(--Ru===0&&Xs!==null){Fi!==null&&(Fi.status="fulfilled");var e=Xs;Xs=null,Pi=0,Fi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function FS(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Wp=Y.S;Y.S=function(e,n){zg=C(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&PS(e,n),Wp!==null&&Wp(e,n)};var gi=v(null);function zu(){var e=gi.current;return e!==null?e:Ut.pooledCache}function fl(e,n){n===null?_(gi,gi.current):_(gi,n.pool)}function Jp(){var e=zu();return e===null?null:{parent:gn._currentValue,pool:e}}var Zi=Error(s(460)),Lu=Error(s(474)),hl=Error(s(542)),pl={then:function(){}};function em(e){return e=e.status,e==="fulfilled"||e==="rejected"}function tm(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(nr,nr),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,am(e),e;default:if(typeof n.status=="string")n.then(nr,nr);else{if(e=Ut,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,am(e),e}throw vi=n,Zi}}function yi(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(vi=i,Zi):i}}var vi=null;function nm(){if(vi===null)throw Error(s(459));var e=vi;return vi=null,e}function am(e){if(e===Zi||e===hl)throw Error(s(483))}var Xi=null,Ks=0;function ml(e){var n=Ks;return Ks+=1,Xi===null&&(Xi=[]),tm(Xi,e,n)}function Qs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function gl(e,n){throw n.$$typeof===k?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function rm(e){function n(B,R){if(e){var U=B.deletions;U===null?(B.deletions=[R],B.flags|=16):U.push(R)}}function i(B,R){if(!e)return null;for(;R!==null;)n(B,R),R=R.sibling;return null}function o(B){for(var R=new Map;B!==null;)B.key!==null?R.set(B.key,B):R.set(B.index,B),B=B.sibling;return R}function u(B,R){return B=rr(B,R),B.index=0,B.sibling=null,B}function f(B,R,U){return B.index=U,e?(U=B.alternate,U!==null?(U=U.index,U<R?(B.flags|=67108866,R):U):(B.flags|=67108866,R)):(B.flags|=1048576,R)}function y(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function S(B,R,U,se){return R===null||R.tag!==6?(R=Eu(U,B.mode,se),R.return=B,R):(R=u(R,U),R.return=B,R)}function A(B,R,U,se){var Ue=U.type;return Ue===X?ae(B,R,U.props.children,se,U.key):R!==null&&(R.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===me&&yi(Ue)===R.type)?(R=u(R,U.props),Qs(R,U),R.return=B,R):(R=ll(U.type,U.key,U.props,null,B.mode,se),Qs(R,U),R.return=B,R)}function H(B,R,U,se){return R===null||R.tag!==4||R.stateNode.containerInfo!==U.containerInfo||R.stateNode.implementation!==U.implementation?(R=Cu(U,B.mode,se),R.return=B,R):(R=u(R,U.children||[]),R.return=B,R)}function ae(B,R,U,se,Ue){return R===null||R.tag!==7?(R=fi(U,B.mode,se,Ue),R.return=B,R):(R=u(R,U),R.return=B,R)}function ue(B,R,U){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=Eu(""+R,B.mode,U),R.return=B,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case E:return U=ll(R.type,R.key,R.props,null,B.mode,U),Qs(U,R),U.return=B,U;case D:return R=Cu(R,B.mode,U),R.return=B,R;case me:return R=yi(R),ue(B,R,U)}if(Qe(R)||_e(R))return R=fi(R,B.mode,U,null),R.return=B,R;if(typeof R.then=="function")return ue(B,ml(R),U);if(R.$$typeof===I)return ue(B,dl(B,R),U);gl(B,R)}return null}function G(B,R,U,se){var Ue=R!==null?R.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return Ue!==null?null:S(B,R,""+U,se);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case E:return U.key===Ue?A(B,R,U,se):null;case D:return U.key===Ue?H(B,R,U,se):null;case me:return U=yi(U),G(B,R,U,se)}if(Qe(U)||_e(U))return Ue!==null?null:ae(B,R,U,se,null);if(typeof U.then=="function")return G(B,R,ml(U),se);if(U.$$typeof===I)return G(B,R,dl(B,U),se);gl(B,U)}return null}function K(B,R,U,se,Ue){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(U)||null,S(R,B,""+se,Ue);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case E:return B=B.get(se.key===null?U:se.key)||null,A(R,B,se,Ue);case D:return B=B.get(se.key===null?U:se.key)||null,H(R,B,se,Ue);case me:return se=yi(se),K(B,R,U,se,Ue)}if(Qe(se)||_e(se))return B=B.get(U)||null,ae(R,B,se,Ue,null);if(typeof se.then=="function")return K(B,R,U,ml(se),Ue);if(se.$$typeof===I)return K(B,R,U,dl(R,se),Ue);gl(R,se)}return null}function Me(B,R,U,se){for(var Ue=null,St=null,Le=R,nt=R=0,ut=null;Le!==null&&nt<U.length;nt++){Le.index>nt?(ut=Le,Le=null):ut=Le.sibling;var xt=G(B,Le,U[nt],se);if(xt===null){Le===null&&(Le=ut);break}e&&Le&&xt.alternate===null&&n(B,Le),R=f(xt,R,nt),St===null?Ue=xt:St.sibling=xt,St=xt,Le=ut}if(nt===U.length)return i(B,Le),mt&&ir(B,nt),Ue;if(Le===null){for(;nt<U.length;nt++)Le=ue(B,U[nt],se),Le!==null&&(R=f(Le,R,nt),St===null?Ue=Le:St.sibling=Le,St=Le);return mt&&ir(B,nt),Ue}for(Le=o(Le);nt<U.length;nt++)ut=K(Le,B,nt,U[nt],se),ut!==null&&(e&&ut.alternate!==null&&Le.delete(ut.key===null?nt:ut.key),R=f(ut,R,nt),St===null?Ue=ut:St.sibling=ut,St=ut);return e&&Le.forEach(function(Fr){return n(B,Fr)}),mt&&ir(B,nt),Ue}function qe(B,R,U,se){if(U==null)throw Error(s(151));for(var Ue=null,St=null,Le=R,nt=R=0,ut=null,xt=U.next();Le!==null&&!xt.done;nt++,xt=U.next()){Le.index>nt?(ut=Le,Le=null):ut=Le.sibling;var Fr=G(B,Le,xt.value,se);if(Fr===null){Le===null&&(Le=ut);break}e&&Le&&Fr.alternate===null&&n(B,Le),R=f(Fr,R,nt),St===null?Ue=Fr:St.sibling=Fr,St=Fr,Le=ut}if(xt.done)return i(B,Le),mt&&ir(B,nt),Ue;if(Le===null){for(;!xt.done;nt++,xt=U.next())xt=ue(B,xt.value,se),xt!==null&&(R=f(xt,R,nt),St===null?Ue=xt:St.sibling=xt,St=xt);return mt&&ir(B,nt),Ue}for(Le=o(Le);!xt.done;nt++,xt=U.next())xt=K(Le,B,nt,xt.value,se),xt!==null&&(e&&xt.alternate!==null&&Le.delete(xt.key===null?nt:xt.key),R=f(xt,R,nt),St===null?Ue=xt:St.sibling=xt,St=xt);return e&&Le.forEach(function(r2){return n(B,r2)}),mt&&ir(B,nt),Ue}function Bt(B,R,U,se){if(typeof U=="object"&&U!==null&&U.type===X&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case E:e:{for(var Ue=U.key;R!==null;){if(R.key===Ue){if(Ue=U.type,Ue===X){if(R.tag===7){i(B,R.sibling),se=u(R,U.props.children),se.return=B,B=se;break e}}else if(R.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===me&&yi(Ue)===R.type){i(B,R.sibling),se=u(R,U.props),Qs(se,U),se.return=B,B=se;break e}i(B,R);break}else n(B,R);R=R.sibling}U.type===X?(se=fi(U.props.children,B.mode,se,U.key),se.return=B,B=se):(se=ll(U.type,U.key,U.props,null,B.mode,se),Qs(se,U),se.return=B,B=se)}return y(B);case D:e:{for(Ue=U.key;R!==null;){if(R.key===Ue)if(R.tag===4&&R.stateNode.containerInfo===U.containerInfo&&R.stateNode.implementation===U.implementation){i(B,R.sibling),se=u(R,U.children||[]),se.return=B,B=se;break e}else{i(B,R);break}else n(B,R);R=R.sibling}se=Cu(U,B.mode,se),se.return=B,B=se}return y(B);case me:return U=yi(U),Bt(B,R,U,se)}if(Qe(U))return Me(B,R,U,se);if(_e(U)){if(Ue=_e(U),typeof Ue!="function")throw Error(s(150));return U=Ue.call(U),qe(B,R,U,se)}if(typeof U.then=="function")return Bt(B,R,ml(U),se);if(U.$$typeof===I)return Bt(B,R,dl(B,U),se);gl(B,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,R!==null&&R.tag===6?(i(B,R.sibling),se=u(R,U),se.return=B,B=se):(i(B,R),se=Eu(U,B.mode,se),se.return=B,B=se),y(B)):i(B,R)}return function(B,R,U,se){try{Ks=0;var Ue=Bt(B,R,U,se);return Xi=null,Ue}catch(Le){if(Le===Zi||Le===hl)throw Le;var St=ra(29,Le,null,B.mode);return St.lanes=se,St.return=B,St}finally{}}}var bi=rm(!0),im=rm(!1),Ar=!1;function Bu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Dr(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Ct&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=ol(e),Vp(e,null,i),n}return sl(e,o,n,i),ol(e)}function Ws(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,$a(e,i)}}function $u(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Uu=!1;function Js(){if(Uu){var e=Fi;if(e!==null)throw e}}function eo(e,n,i,o){Uu=!1;var u=e.updateQueue;Ar=!1;var f=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var A=S,H=A.next;A.next=null,y===null?f=H:y.next=H,y=A;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,S=ae.lastBaseUpdate,S!==y&&(S===null?ae.firstBaseUpdate=H:S.next=H,ae.lastBaseUpdate=A))}if(f!==null){var ue=u.baseState;y=0,ae=H=A=null,S=f;do{var G=S.lane&-536870913,K=G!==S.lane;if(K?(ct&G)===G:(o&G)===G){G!==0&&G===Pi&&(Uu=!0),ae!==null&&(ae=ae.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Me=e,qe=S;G=n;var Bt=i;switch(qe.tag){case 1:if(Me=qe.payload,typeof Me=="function"){ue=Me.call(Bt,ue,G);break e}ue=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=qe.payload,G=typeof Me=="function"?Me.call(Bt,ue,G):Me,G==null)break e;ue=w({},ue,G);break e;case 2:Ar=!0}}G=S.callback,G!==null&&(e.flags|=64,K&&(e.flags|=8192),K=u.callbacks,K===null?u.callbacks=[G]:K.push(G))}else K={lane:G,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ae===null?(H=ae=K,A=ue):ae=ae.next=K,y|=G;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;K=S,S=K.next,K.next=null,u.lastBaseUpdate=K,u.shared.pending=null}}while(!0);ae===null&&(A=ue),u.baseState=A,u.firstBaseUpdate=H,u.lastBaseUpdate=ae,f===null&&(u.shared.lanes=0),Br|=y,e.lanes=y,e.memoizedState=ue}}function sm(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function om(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)sm(i[e],n)}var Ki=v(null),yl=v(0);function lm(e,n){e=gr,_(yl,e),_(Ki,n),gr=e|n.baseLanes}function Hu(){_(yl,gr),_(Ki,Ki.current)}function Vu(){gr=yl.current,N(Ki),N(yl)}var ia=v(null),ya=null;function Mr(e){var n=e.alternate;_(un,un.current&1),_(ia,e),ya===null&&(n===null||Ki.current!==null||n.memoizedState!==null)&&(ya=e)}function Gu(e){_(un,un.current),_(ia,e),ya===null&&(ya=e)}function cm(e){e.tag===22?(_(un,un.current),_(ia,e),ya===null&&(ya=e)):Rr()}function Rr(){_(un,un.current),_(ia,ia.current)}function sa(e){N(ia),ya===e&&(ya=null),N(un)}var un=v(0);function vl(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Xd(i)||Kd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var lr=0,et=null,zt=null,yn=null,bl=!1,Qi=!1,wi=!1,wl=0,to=0,Wi=null,ZS=0;function sn(){throw Error(s(321))}function qu(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!aa(e[i],n[i]))return!1;return!0}function Yu(e,n,i,o,u,f){return lr=f,et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=e===null||e.memoizedState===null?Pm:sd,wi=!1,f=i(o,u),wi=!1,Qi&&(f=dm(n,i,o,u)),um(e),f}function um(e){Y.H=ro;var n=zt!==null&&zt.next!==null;if(lr=0,yn=zt=et=null,bl=!1,to=0,Wi=null,n)throw Error(s(300));e===null||vn||(e=e.dependencies,e!==null&&ul(e)&&(vn=!0))}function dm(e,n,i,o){et=e;var u=0;do{if(Qi&&(Wi=null),to=0,Qi=!1,25<=u)throw Error(s(301));if(u+=1,yn=zt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}Y.H=Fm,f=n(i,o)}while(Qi);return f}function XS(){var e=Y.H,n=e.useState()[0];return n=typeof n.then=="function"?no(n):n,e=e.useState()[0],(zt!==null?zt.memoizedState:null)!==e&&(et.flags|=1024),n}function Pu(){var e=wl!==0;return wl=0,e}function Fu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Zu(e){if(bl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}bl=!1}lr=0,yn=zt=et=null,Qi=!1,to=wl=0,Wi=null}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yn===null?et.memoizedState=yn=e:yn=yn.next=e,yn}function dn(){if(zt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var n=yn===null?et.memoizedState:yn.next;if(n!==null)yn=n,zt=e;else{if(e===null)throw et.alternate===null?Error(s(467)):Error(s(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},yn===null?et.memoizedState=yn=e:yn=yn.next=e}return yn}function Sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function no(e){var n=to;return to+=1,Wi===null&&(Wi=[]),e=tm(Wi,e,n),n=et,(yn===null?n.memoizedState:yn.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?Pm:sd),e}function xl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return no(e);if(e.$$typeof===I)return Ln(e)}throw Error(s(438,String(e)))}function Xu(e){var n=null,i=et.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=et.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=Sl(),et.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=ge;return n.index++,i}function cr(e,n){return typeof n=="function"?n(e):n}function kl(e){var n=dn();return Ku(n,zt,e)}function Ku(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var y=u.next;u.next=f.next,f.next=y}n.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{n=u.next;var S=y=null,A=null,H=n,ae=!1;do{var ue=H.lane&-536870913;if(ue!==H.lane?(ct&ue)===ue:(lr&ue)===ue){var G=H.revertLane;if(G===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ue===Pi&&(ae=!0);else if((lr&G)===G){H=H.next,G===Pi&&(ae=!0);continue}else ue={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(S=A=ue,y=f):A=A.next=ue,et.lanes|=G,Br|=G;ue=H.action,wi&&i(f,ue),f=H.hasEagerState?H.eagerState:i(f,ue)}else G={lane:ue,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(S=A=G,y=f):A=A.next=G,et.lanes|=ue,Br|=ue;H=H.next}while(H!==null&&H!==n);if(A===null?y=f:A.next=S,!aa(f,e.memoizedState)&&(vn=!0,ae&&(i=Fi,i!==null)))throw i;e.memoizedState=f,e.baseState=y,e.baseQueue=A,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Qu(e){var n=dn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do f=e(f,y.action),y=y.next;while(y!==u);aa(f,n.memoizedState)||(vn=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,o]}function fm(e,n,i){var o=et,u=dn(),f=mt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=n();var y=!aa((zt||u).memoizedState,i);if(y&&(u.memoizedState=i,vn=!0),u=u.queue,ed(mm.bind(null,o,u,e),[e]),u.getSnapshot!==n||y||yn!==null&&yn.memoizedState.tag&1){if(o.flags|=2048,Ji(9,{destroy:void 0},pm.bind(null,o,u,i,n),null),Ut===null)throw Error(s(349));f||(lr&127)!==0||hm(o,n,i)}return i}function hm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=et.updateQueue,n===null?(n=Sl(),et.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function pm(e,n,i,o){n.value=i,n.getSnapshot=o,gm(n)&&ym(e)}function mm(e,n,i){return i(function(){gm(n)&&ym(e)})}function gm(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!aa(e,i)}catch{return!0}}function ym(e){var n=di(e,2);n!==null&&ea(n,e,2)}function Wu(e){var n=Pn();if(typeof e=="function"){var i=e;if(e=i(),wi){oe(!0);try{i()}finally{oe(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:e},n}function vm(e,n,i,o){return e.baseState=i,Ku(e,zt,typeof o=="function"?o:cr)}function KS(e,n,i,o,u){if(Tl(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};Y.T!==null?i(!0):f.isTransition=!1,o(f),i=n.pending,i===null?(f.next=n.pending=f,bm(n,f)):(f.next=i.next,n.pending=i.next=f)}}function bm(e,n){var i=n.action,o=n.payload,u=e.state;if(n.isTransition){var f=Y.T,y={};Y.T=y;try{var S=i(u,o),A=Y.S;A!==null&&A(y,S),wm(e,n,S)}catch(H){Ju(e,n,H)}finally{f!==null&&y.types!==null&&(f.types=y.types),Y.T=f}}else try{f=i(u,o),wm(e,n,f)}catch(H){Ju(e,n,H)}}function wm(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Sm(e,n,o)},function(o){return Ju(e,n,o)}):Sm(e,n,i)}function Sm(e,n,i){n.status="fulfilled",n.value=i,xm(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,bm(e,i)))}function Ju(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,xm(n),n=n.next;while(n!==o)}e.action=null}function xm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function km(e,n){return n}function Em(e,n){if(mt){var i=Ut.formState;if(i!==null){e:{var o=et;if(mt){if(Ft){t:{for(var u=Ft,f=ga;u.nodeType!==8;){if(!f){u=null;break t}if(u=va(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Ft=va(u.nextSibling),o=u.data==="F!";break e}}Or(o)}o=!1}o&&(n=i[0])}}return i=Pn(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:km,lastRenderedState:n},i.queue=o,i=Gm.bind(null,et,o),o.dispatch=i,o=Wu(!1),f=id.bind(null,et,!1,o.queue),o=Pn(),u={state:n,dispatch:null,action:e,pending:null},o.queue=u,i=KS.bind(null,et,u,f,i),u.dispatch=i,o.memoizedState=e,[n,i,!1]}function Cm(e){var n=dn();return Tm(n,zt,e)}function Tm(e,n,i){if(n=Ku(e,n,km)[0],e=kl(cr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=no(n)}catch(y){throw y===Zi?hl:y}else o=n;n=dn();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(et.flags|=2048,Ji(9,{destroy:void 0},QS.bind(null,u,i),null)),[o,f,e]}function QS(e,n){e.action=n}function Nm(e){var n=dn(),i=zt;if(i!==null)return Tm(n,i,e);dn(),n=n.memoizedState,i=dn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function Ji(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=et.updateQueue,n===null&&(n=Sl(),et.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function Om(){return dn().memoizedState}function El(e,n,i,o){var u=Pn();et.flags|=e,u.memoizedState=Ji(1|n,{destroy:void 0},i,o===void 0?null:o)}function Cl(e,n,i,o){var u=dn();o=o===void 0?null:o;var f=u.memoizedState.inst;zt!==null&&o!==null&&qu(o,zt.memoizedState.deps)?u.memoizedState=Ji(n,f,i,o):(et.flags|=e,u.memoizedState=Ji(1|n,f,i,o))}function jm(e,n){El(8390656,8,e,n)}function ed(e,n){Cl(2048,8,e,n)}function WS(e){et.flags|=4;var n=et.updateQueue;if(n===null)n=Sl(),et.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function Am(e){var n=dn().memoizedState;return WS({ref:n,nextImpl:e}),function(){if((Ct&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function _m(e,n){return Cl(4,2,e,n)}function Dm(e,n){return Cl(4,4,e,n)}function Mm(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Rm(e,n,i){i=i!=null?i.concat([e]):null,Cl(4,4,Mm.bind(null,n,e),i)}function td(){}function zm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&qu(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function Lm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&qu(n,o[1]))return o[0];if(o=e(),wi){oe(!0);try{e()}finally{oe(!1)}}return i.memoizedState=[o,n],o}function nd(e,n,i){return i===void 0||(lr&1073741824)!==0&&(ct&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Bg(),et.lanes|=e,Br|=e,i)}function Bm(e,n,i,o){return aa(i,n)?i:Ki.current!==null?(e=nd(e,i,o),aa(e,n)||(vn=!0),e):(lr&42)===0||(lr&1073741824)!==0&&(ct&261930)===0?(vn=!0,e.memoizedState=i):(e=Bg(),et.lanes|=e,Br|=e,n)}function Im(e,n,i,o,u){var f=he.p;he.p=f!==0&&8>f?f:8;var y=Y.T,S={};Y.T=S,id(e,!1,n,i);try{var A=u(),H=Y.S;if(H!==null&&H(S,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var ae=FS(A,o);ao(e,n,ae,ca(e))}else ao(e,n,o,ca(e))}catch(ue){ao(e,n,{then:function(){},status:"rejected",reason:ue},ca())}finally{he.p=f,y!==null&&S.types!==null&&(y.types=S.types),Y.T=y}}function JS(){}function ad(e,n,i,o){if(e.tag!==5)throw Error(s(476));var u=$m(e).queue;Im(e,u,n,ye,i===null?JS:function(){return Um(e),i(o)})}function $m(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:ye},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Um(e){var n=$m(e);n.next===null&&(n=e.alternate.memoizedState),ao(e,n.next.queue,{},ca())}function rd(){return Ln(So)}function Hm(){return dn().memoizedState}function Vm(){return dn().memoizedState}function ex(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=ca();e=_r(i);var o=Dr(n,e,i);o!==null&&(ea(o,n,i),Ws(o,n,i)),n={cache:Mu()},e.payload=n;return}n=n.return}}function tx(e,n,i){var o=ca();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Tl(e)?qm(n,i):(i=xu(e,n,i,o),i!==null&&(ea(i,e,o),Ym(i,n,o)))}function Gm(e,n,i){var o=ca();ao(e,n,i,o)}function ao(e,n,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Tl(e))qm(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,S=f(y,i);if(u.hasEagerState=!0,u.eagerState=S,aa(S,y))return sl(e,n,u,0),Ut===null&&il(),!1}catch{}finally{}if(i=xu(e,n,u,o),i!==null)return ea(i,e,o),Ym(i,n,o),!0}return!1}function id(e,n,i,o){if(o={lane:2,revertLane:Bd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Tl(e)){if(n)throw Error(s(479))}else n=xu(e,i,o,2),n!==null&&ea(n,e,2)}function Tl(e){var n=e.alternate;return e===et||n!==null&&n===et}function qm(e,n){Qi=bl=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function Ym(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,$a(e,i)}}var ro={readContext:Ln,use:xl,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};ro.useEffectEvent=sn;var Pm={readContext:Ln,use:xl,useCallback:function(e,n){return Pn().memoizedState=[e,n===void 0?null:n],e},useContext:Ln,useEffect:jm,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,El(4194308,4,Mm.bind(null,n,e),i)},useLayoutEffect:function(e,n){return El(4194308,4,e,n)},useInsertionEffect:function(e,n){El(4,2,e,n)},useMemo:function(e,n){var i=Pn();n=n===void 0?null:n;var o=e();if(wi){oe(!0);try{e()}finally{oe(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Pn();if(i!==void 0){var u=i(n);if(wi){oe(!0);try{i(n)}finally{oe(!1)}}}else u=n;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=tx.bind(null,et,e),[o.memoizedState,e]},useRef:function(e){var n=Pn();return e={current:e},n.memoizedState=e},useState:function(e){e=Wu(e);var n=e.queue,i=Gm.bind(null,et,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:td,useDeferredValue:function(e,n){var i=Pn();return nd(i,e,n)},useTransition:function(){var e=Wu(!1);return e=Im.bind(null,et,e.queue,!0,!1),Pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=et,u=Pn();if(mt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Ut===null)throw Error(s(349));(ct&127)!==0||hm(o,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,jm(mm.bind(null,o,f,e),[e]),o.flags|=2048,Ji(9,{destroy:void 0},pm.bind(null,o,f,i,n),null),i},useId:function(){var e=Pn(),n=Ut.identifierPrefix;if(mt){var i=qa,o=Ga;i=(o&~(1<<32-Ce(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=wl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=ZS++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:rd,useFormState:Em,useActionState:Em,useOptimistic:function(e){var n=Pn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=id.bind(null,et,!0,i),i.dispatch=n,[e,n]},useMemoCache:Xu,useCacheRefresh:function(){return Pn().memoizedState=ex.bind(null,et)},useEffectEvent:function(e){var n=Pn(),i={impl:e};return n.memoizedState=i,function(){if((Ct&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},sd={readContext:Ln,use:xl,useCallback:zm,useContext:Ln,useEffect:ed,useImperativeHandle:Rm,useInsertionEffect:_m,useLayoutEffect:Dm,useMemo:Lm,useReducer:kl,useRef:Om,useState:function(){return kl(cr)},useDebugValue:td,useDeferredValue:function(e,n){var i=dn();return Bm(i,zt.memoizedState,e,n)},useTransition:function(){var e=kl(cr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:no(e),n]},useSyncExternalStore:fm,useId:Hm,useHostTransitionStatus:rd,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,n){var i=dn();return vm(i,zt,e,n)},useMemoCache:Xu,useCacheRefresh:Vm};sd.useEffectEvent=Am;var Fm={readContext:Ln,use:xl,useCallback:zm,useContext:Ln,useEffect:ed,useImperativeHandle:Rm,useInsertionEffect:_m,useLayoutEffect:Dm,useMemo:Lm,useReducer:Qu,useRef:Om,useState:function(){return Qu(cr)},useDebugValue:td,useDeferredValue:function(e,n){var i=dn();return zt===null?nd(i,e,n):Bm(i,zt.memoizedState,e,n)},useTransition:function(){var e=Qu(cr)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:no(e),n]},useSyncExternalStore:fm,useId:Hm,useHostTransitionStatus:rd,useFormState:Nm,useActionState:Nm,useOptimistic:function(e,n){var i=dn();return zt!==null?vm(i,zt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:Vm};Fm.useEffectEvent=Am;function od(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var ld={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=ca(),u=_r(o);u.payload=n,i!=null&&(u.callback=i),n=Dr(e,u,o),n!==null&&(ea(n,e,o),Ws(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=ca(),u=_r(o);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=Dr(e,u,o),n!==null&&(ea(n,e,o),Ws(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=ca(),o=_r(i);o.tag=2,n!=null&&(o.callback=n),n=Dr(e,o,i),n!==null&&(ea(n,e,i),Ws(n,e,i))}};function Zm(e,n,i,o,u,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!qs(i,o)||!qs(u,f):!0}function Xm(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&ld.enqueueReplaceState(n,n.state,null)}function Si(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=w({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Km(e){rl(e)}function Qm(e){console.error(e)}function Wm(e){rl(e)}function Nl(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Jm(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function cd(e,n,i){return i=_r(i),i.tag=3,i.payload={element:null},i.callback=function(){Nl(e,n)},i}function eg(e){return e=_r(e),e.tag=3,e}function tg(e,n,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Jm(n,i,o)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Jm(n,i,o),typeof u!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function nx(e,n,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Yi(n,i,u,!0),i=ia.current,i!==null){switch(i.tag){case 31:case 13:return ya===null?$l():i.alternate===null&&on===0&&(on=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===pl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),Rd(e,o,u)),!1;case 22:return i.flags|=65536,o===pl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),Rd(e,o,u)),!1}throw Error(s(435,i.tag))}return Rd(e,o,u),$l(),!1}if(mt)return n=ia.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Ou&&(e=Error(s(422),{cause:o}),Fs(ha(e,i)))):(o!==Ou&&(n=Error(s(423),{cause:o}),Fs(ha(n,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ha(o,i),u=cd(e.stateNode,o,u),$u(e,u),on!==4&&(on=2)),!1;var f=Error(s(520),{cause:o});if(f=ha(f,i),ho===null?ho=[f]:ho.push(f),on!==4&&(on=2),n===null)return!0;o=ha(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=cd(i.stateNode,o,e),$u(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ir===null||!Ir.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=eg(u),tg(u,e,i,o),$u(i,u),!1}i=i.return}while(i!==null);return!1}var ud=Error(s(461)),vn=!1;function Bn(e,n,i,o){n.child=e===null?im(n,null,i,o):bi(n,e.child,i,o)}function ng(e,n,i,o,u){i=i.render;var f=n.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return mi(n),o=Yu(e,n,i,y,f,u),S=Pu(),e!==null&&!vn?(Fu(e,n,u),ur(e,n,u)):(mt&&S&&Tu(n),n.flags|=1,Bn(e,n,o,u),n.child)}function ag(e,n,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!ku(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,rg(e,n,f,o,u)):(e=ll(i.type,null,o,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!vd(e,u)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:qs,i(y,o)&&e.ref===n.ref)return ur(e,n,u)}return n.flags|=1,e=rr(f,o),e.ref=n.ref,e.return=n,n.child=e}function rg(e,n,i,o,u){if(e!==null){var f=e.memoizedProps;if(qs(f,o)&&e.ref===n.ref)if(vn=!1,n.pendingProps=o=f,vd(e,u))(e.flags&131072)!==0&&(vn=!0);else return n.lanes=e.lanes,ur(e,n,u)}return dd(e,n,i,o,u)}function ig(e,n,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=n.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,n.child=null;return sg(e,n,f,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&fl(n,f!==null?f.cachePool:null),f!==null?lm(n,f):Hu(),cm(n);else return o=n.lanes=536870912,sg(e,n,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(fl(n,f.cachePool),lm(n,f),Rr(),n.memoizedState=null):(e!==null&&fl(n,null),Hu(),Rr());return Bn(e,n,u,i),n.child}function io(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function sg(e,n,i,o,u){var f=zu();return f=f===null?null:{parent:gn._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&fl(n,null),Hu(),cm(n),e!==null&&Yi(e,n,o,!0),n.childLanes=u,null}function Ol(e,n){return n=Al({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function og(e,n,i){return bi(n,e.child,null,i),e=Ol(n,n.pendingProps),e.flags|=2,sa(n),n.memoizedState=null,e}function ax(e,n,i){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(mt){if(o.mode==="hidden")return e=Ol(n,o),n.lanes=536870912,io(null,e);if(Gu(n),(e=Ft)?(e=by(e,ga),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Ga,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},i=qp(e),i.return=n,n.child=i,zn=n,Ft=null)):e=null,e===null)throw Or(n);return n.lanes=536870912,null}return Ol(n,o)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Gu(n),u)if(n.flags&256)n.flags&=-257,n=og(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(vn||Yi(e,n,i,!1),u=(i&e.childLanes)!==0,vn||u){if(o=Ut,o!==null&&(y=er(o,i),y!==0&&y!==f.retryLane))throw f.retryLane=y,di(e,y),ea(o,e,y),ud;$l(),n=og(e,n,i)}else e=f.treeContext,Ft=va(y.nextSibling),zn=n,mt=!0,Nr=null,ga=!1,e!==null&&Fp(n,e),n=Ol(n,o),n.flags|=4096;return n}return e=rr(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function jl(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function dd(e,n,i,o,u){return mi(n),i=Yu(e,n,i,o,void 0,u),o=Pu(),e!==null&&!vn?(Fu(e,n,u),ur(e,n,u)):(mt&&o&&Tu(n),n.flags|=1,Bn(e,n,i,u),n.child)}function lg(e,n,i,o,u,f){return mi(n),n.updateQueue=null,i=dm(n,o,i,u),um(e),o=Pu(),e!==null&&!vn?(Fu(e,n,f),ur(e,n,f)):(mt&&o&&Tu(n),n.flags|=1,Bn(e,n,i,f),n.child)}function cg(e,n,i,o,u){if(mi(n),n.stateNode===null){var f=Hi,y=i.contextType;typeof y=="object"&&y!==null&&(f=Ln(y)),f=new i(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ld,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},Bu(n),y=i.contextType,f.context=typeof y=="object"&&y!==null?Ln(y):Hi,f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(od(n,i,y,o),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&ld.enqueueReplaceState(f,f.state,null),eo(n,o,f,u),Js(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var S=n.memoizedProps,A=Si(i,S);f.props=A;var H=f.context,ae=i.contextType;y=Hi,typeof ae=="object"&&ae!==null&&(y=Ln(ae));var ue=i.getDerivedStateFromProps;ae=typeof ue=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,ae||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||H!==y)&&Xm(n,f,o,y),Ar=!1;var G=n.memoizedState;f.state=G,eo(n,o,f,u),Js(),H=n.memoizedState,S||G!==H||Ar?(typeof ue=="function"&&(od(n,i,ue,o),H=n.memoizedState),(A=Ar||Zm(n,i,A,o,G,H,y))?(ae||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),f.props=o,f.state=H,f.context=y,o=A):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Iu(e,n),y=n.memoizedProps,ae=Si(i,y),f.props=ae,ue=n.pendingProps,G=f.context,H=i.contextType,A=Hi,typeof H=="object"&&H!==null&&(A=Ln(H)),S=i.getDerivedStateFromProps,(H=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==ue||G!==A)&&Xm(n,f,o,A),Ar=!1,G=n.memoizedState,f.state=G,eo(n,o,f,u),Js();var K=n.memoizedState;y!==ue||G!==K||Ar||e!==null&&e.dependencies!==null&&ul(e.dependencies)?(typeof S=="function"&&(od(n,i,S,o),K=n.memoizedState),(ae=Ar||Zm(n,i,ae,o,G,K,A)||e!==null&&e.dependencies!==null&&ul(e.dependencies))?(H||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,K,A),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,K,A)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=K),f.props=o,f.state=K,f.context=A,o=ae):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&G===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,jl(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=bi(n,e.child,null,u),n.child=bi(n,null,i,u)):Bn(e,n,i,u),n.memoizedState=f.state,e=n.child):e=ur(e,n,u),e}function ug(e,n,i,o){return hi(),n.flags|=256,Bn(e,n,i,o),n.child}var fd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hd(e){return{baseLanes:e,cachePool:Jp()}}function pd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=la),e}function dg(e,n,i){var o=n.pendingProps,u=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(un.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(mt){if(u?Mr(n):Rr(),(e=Ft)?(e=by(e,ga),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Ga,overflow:qa}:null,retryLane:536870912,hydrationErrors:null},i=qp(e),i.return=n,n.child=i,zn=n,Ft=null)):e=null,e===null)throw Or(n);return Kd(e)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(Rr(),u=n.mode,S=Al({mode:"hidden",children:S},u),o=fi(o,u,i,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=hd(i),o.childLanes=pd(e,y,i),n.memoizedState=fd,io(null,o)):(Mr(n),md(n,S))}var A=e.memoizedState;if(A!==null&&(S=A.dehydrated,S!==null)){if(f)n.flags&256?(Mr(n),n.flags&=-257,n=gd(e,n,i)):n.memoizedState!==null?(Rr(),n.child=e.child,n.flags|=128,n=null):(Rr(),S=o.fallback,u=n.mode,o=Al({mode:"visible",children:o.children},u),S=fi(S,u,i,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,bi(n,e.child,null,i),o=n.child,o.memoizedState=hd(i),o.childLanes=pd(e,y,i),n.memoizedState=fd,n=io(null,o));else if(Mr(n),Kd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var H=y.dgst;y=H,o=Error(s(419)),o.stack="",o.digest=y,Fs({value:o,source:null,stack:null}),n=gd(e,n,i)}else if(vn||Yi(e,n,i,!1),y=(i&e.childLanes)!==0,vn||y){if(y=Ut,y!==null&&(o=er(y,i),o!==0&&o!==A.retryLane))throw A.retryLane=o,di(e,o),ea(y,e,o),ud;Xd(S)||$l(),n=gd(e,n,i)}else Xd(S)?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,Ft=va(S.nextSibling),zn=n,mt=!0,Nr=null,ga=!1,e!==null&&Fp(n,e),n=md(n,o.children),n.flags|=4096);return n}return u?(Rr(),S=o.fallback,u=n.mode,A=e.child,H=A.sibling,o=rr(A,{mode:"hidden",children:o.children}),o.subtreeFlags=A.subtreeFlags&65011712,H!==null?S=rr(H,S):(S=fi(S,u,i,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,io(null,o),o=n.child,S=e.child.memoizedState,S===null?S=hd(i):(u=S.cachePool,u!==null?(A=gn._currentValue,u=u.parent!==A?{parent:A,pool:A}:u):u=Jp(),S={baseLanes:S.baseLanes|i,cachePool:u}),o.memoizedState=S,o.childLanes=pd(e,y,i),n.memoizedState=fd,io(e.child,o)):(Mr(n),i=e.child,e=i.sibling,i=rr(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function md(e,n){return n=Al({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Al(e,n){return e=ra(22,e,null,n),e.lanes=0,e}function gd(e,n,i){return bi(n,e.child,null,i),e=md(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function fg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),_u(e.return,n,i)}function yd(e,n,i,o,u,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=i,y.tailMode=u,y.treeForkCount=f)}function hg(e,n,i){var o=n.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var y=un.current,S=(y&2)!==0;if(S?(y=y&1|2,n.flags|=128):y&=1,_(un,y),Bn(e,n,o,i),o=mt?Ps:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fg(e,i,n);else if(e.tag===19)fg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&vl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),yd(n,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&vl(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}yd(n,!0,i,null,f,o);break;case"together":yd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function ur(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Br|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Yi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=rr(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=rr(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function vd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&ul(e)))}function rx(e,n,i){switch(n.tag){case 3:Ie(n,n.stateNode.containerInfo),jr(n,gn,e.memoizedState.cache),hi();break;case 27:case 5:Rt(n);break;case 4:Ie(n,n.stateNode.containerInfo);break;case 10:jr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Gu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Mr(n),n.flags|=128,null):(i&n.child.childLanes)!==0?dg(e,n,i):(Mr(n),e=ur(e,n,i),e!==null?e.sibling:null);Mr(n);break;case 19:var u=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Yi(e,n,i,!1),o=(i&n.childLanes)!==0),u){if(o)return hg(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),_(un,un.current),o)break;return null;case 22:return n.lanes=0,ig(e,n,i,n.pendingProps);case 24:jr(n,gn,e.memoizedState.cache)}return ur(e,n,i)}function pg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)vn=!0;else{if(!vd(e,i)&&(n.flags&128)===0)return vn=!1,rx(e,n,i);vn=(e.flags&131072)!==0}else vn=!1,mt&&(n.flags&1048576)!==0&&Pp(n,Ps,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=yi(n.elementType),n.type=e,typeof e=="function")ku(e)?(o=Si(e,o),n.tag=1,n=cg(null,n,e,o,i)):(n.tag=0,n=dd(null,n,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===q){n.tag=11,n=ng(null,n,e,o,i);break e}else if(u===$){n.tag=14,n=ag(null,n,e,o,i);break e}}throw n=tt(e)||e,Error(s(306,n,""))}}return n;case 0:return dd(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,u=Si(o,n.pendingProps),cg(e,n,o,u,i);case 3:e:{if(Ie(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;u=f.element,Iu(e,n),eo(n,o,null,i);var y=n.memoizedState;if(o=y.cache,jr(n,gn,o),o!==f.cache&&Du(n,[gn],i,!0),Js(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=ug(e,n,o,i);break e}else if(o!==u){u=ha(Error(s(424)),n),Fs(u),n=ug(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ft=va(e.firstChild),zn=n,mt=!0,Nr=null,ga=!0,i=im(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(hi(),o===u){n=ur(e,n,i);break e}Bn(e,n,o,i)}n=n.child}return n;case 26:return jl(e,n),e===null?(i=Cy(n.type,null,n.pendingProps,null))?n.memoizedState=i:mt||(i=n.type,e=n.pendingProps,o=Pl(pe.current).createElement(i),o[O]=n,o[j]=e,In(o,i,e),Gt(o),n.stateNode=o):n.memoizedState=Cy(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Rt(n),e===null&&mt&&(o=n.stateNode=xy(n.type,n.pendingProps,pe.current),zn=n,ga=!0,u=Ft,Vr(n.type)?(Qd=u,Ft=va(o.firstChild)):Ft=u),Bn(e,n,n.pendingProps.children,i),jl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&mt&&((u=o=Ft)&&(o=Rx(o,n.type,n.pendingProps,ga),o!==null?(n.stateNode=o,zn=n,Ft=va(o.firstChild),ga=!1,u=!0):u=!1),u||Or(n)),Rt(n),u=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,Pd(u,f)?o=null:y!==null&&Pd(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=Yu(e,n,XS,null,null,i),So._currentValue=u),jl(e,n),Bn(e,n,o,i),n.child;case 6:return e===null&&mt&&((e=i=Ft)&&(i=zx(i,n.pendingProps,ga),i!==null?(n.stateNode=i,zn=n,Ft=null,e=!0):e=!1),e||Or(n)),null;case 13:return dg(e,n,i);case 4:return Ie(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=bi(n,null,o,i):Bn(e,n,o,i),n.child;case 11:return ng(e,n,n.type,n.pendingProps,i);case 7:return Bn(e,n,n.pendingProps,i),n.child;case 8:return Bn(e,n,n.pendingProps.children,i),n.child;case 12:return Bn(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,jr(n,n.type,o.value),Bn(e,n,o.children,i),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,mi(n),u=Ln(u),o=o(u),n.flags|=1,Bn(e,n,o,i),n.child;case 14:return ag(e,n,n.type,n.pendingProps,i);case 15:return rg(e,n,n.type,n.pendingProps,i);case 19:return hg(e,n,i);case 31:return ax(e,n,i);case 22:return ig(e,n,i,n.pendingProps);case 24:return mi(n),o=Ln(gn),e===null?(u=zu(),u===null&&(u=Ut,f=Mu(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:o,cache:u},Bu(n),jr(n,gn,u)):((e.lanes&i)!==0&&(Iu(e,n),eo(n,null,null,i),Js()),u=e.memoizedState,f=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),jr(n,gn,o)):(o=f.cache,jr(n,gn,o),o!==u.cache&&Du(n,[gn],i,!0))),Bn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function dr(e){e.flags|=4}function bd(e,n,i,o,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Hg())e.flags|=8192;else throw vi=pl,Lu}else e.flags&=-16777217}function mg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ay(n))if(Hg())e.flags|=8192;else throw vi=pl,Lu}function _l(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?$t():536870912,e.lanes|=n,as|=n)}function so(e,n){if(!mt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Zt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function ix(e,n,i){var o=n.pendingProps;switch(Nu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(n),null;case 1:return Zt(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),or(gn),Ye(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(qi(n)?dr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ju())),Zt(n),null;case 26:var u=n.type,f=n.memoizedState;return e===null?(dr(n),f!==null?(Zt(n),mg(n,f)):(Zt(n),bd(n,u,null,o,i))):f?f!==e.memoizedState?(dr(n),Zt(n),mg(n,f)):(Zt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&dr(n),Zt(n),bd(n,u,e,o,i)),null;case 27:if(Yt(n),i=pe.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}e=M.current,qi(n)?Zp(n):(e=xy(u,o,i),n.stateNode=e,dr(n))}return Zt(n),null;case 5:if(Yt(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}if(f=M.current,qi(n))Zp(n);else{var y=Pl(pe.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}f[O]=n,f[j]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=f;e:switch(In(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&dr(n)}}return Zt(n),bd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&dr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=pe.current,qi(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,u=zn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[O]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||dy(e.nodeValue,i)),e||Or(n,!0)}else e=Pl(e).createTextNode(o),e[O]=n,n.stateNode=e}return Zt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=qi(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[O]=n}else hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),e=!1}else i=ju(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(sa(n),n):(sa(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Zt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=qi(n),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[O]=n}else hi(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),u=!1}else u=ju(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(sa(n),n):(sa(n),null)}return sa(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),_l(n,n.updateQueue),Zt(n),null);case 4:return Ye(),e===null&&Hd(n.stateNode.containerInfo),Zt(n),null;case 10:return or(n.type),Zt(n),null;case 19:if(N(un),o=n.memoizedState,o===null)return Zt(n),null;if(u=(n.flags&128)!==0,f=o.rendering,f===null)if(u)so(o,!1);else{if(on!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=vl(e),f!==null){for(n.flags|=128,so(o,!1),e=f.updateQueue,n.updateQueue=e,_l(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Gp(i,e),i=i.sibling;return _(un,un.current&1|2),mt&&ir(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&C()>Ll&&(n.flags|=128,u=!0,so(o,!1),n.lanes=4194304)}else{if(!u)if(e=vl(f),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,_l(n,e),so(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!mt)return Zt(n),null}else 2*C()-o.renderingStartTime>Ll&&i!==536870912&&(n.flags|=128,u=!0,so(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=C(),e.sibling=null,i=un.current,_(un,u?i&1|2:i&1),mt&&ir(n,o.treeForkCount),e):(Zt(n),null);case 22:case 23:return sa(n),Vu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(Zt(n),n.subtreeFlags&6&&(n.flags|=8192)):Zt(n),i=n.updateQueue,i!==null&&_l(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&N(gi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),or(gn),Zt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function sx(e,n){switch(Nu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return or(gn),Ye(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return Yt(n),null;case 31:if(n.memoizedState!==null){if(sa(n),n.alternate===null)throw Error(s(340));hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(sa(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));hi()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return N(un),null;case 4:return Ye(),null;case 10:return or(n.type),null;case 22:case 23:return sa(n),Vu(),e!==null&&N(gi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return or(gn),null;case 25:return null;default:return null}}function gg(e,n){switch(Nu(n),n.tag){case 3:or(gn),Ye();break;case 26:case 27:case 5:Yt(n);break;case 4:Ye();break;case 31:n.memoizedState!==null&&sa(n);break;case 13:sa(n);break;case 19:N(un);break;case 10:or(n.type);break;case 22:case 23:sa(n),Vu(),e!==null&&N(gi);break;case 24:or(gn)}}function oo(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,y=i.inst;o=f(),y.destroy=o}i=i.next}while(i!==u)}}catch(S){Mt(n,n.return,S)}}function zr(e,n,i){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=n;var A=i,H=S;try{H()}catch(ae){Mt(u,A,ae)}}}o=o.next}while(o!==f)}}catch(ae){Mt(n,n.return,ae)}}function yg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{om(n,i)}catch(o){Mt(e,e.return,o)}}}function vg(e,n,i){i.props=Si(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Mt(e,n,o)}}function lo(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Mt(e,n,u)}}function Ya(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Mt(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Mt(e,n,u)}else i.current=null}function bg(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Mt(e,e.return,u)}}function wd(e,n,i){try{var o=e.stateNode;Ox(o,e.type,i,n),o[j]=n}catch(u){Mt(e,e.return,u)}}function wg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Vr(e.type)||e.tag===4}function Sd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Vr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xd(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=nr));else if(o!==4&&(o===27&&Vr(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(xd(e,n,i),e=e.sibling;e!==null;)xd(e,n,i),e=e.sibling}function Dl(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&Vr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(Dl(e,n,i),e=e.sibling;e!==null;)Dl(e,n,i),e=e.sibling}function Sg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);In(n,o,i),n[O]=e,n[j]=i}catch(f){Mt(e,e.return,f)}}var fr=!1,bn=!1,kd=!1,xg=typeof WeakSet=="function"?WeakSet:Set,_n=null;function ox(e,n){if(e=e.containerInfo,qd=Jl,e=Rp(e),gu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,S=-1,A=-1,H=0,ae=0,ue=e,G=null;t:for(;;){for(var K;ue!==i||u!==0&&ue.nodeType!==3||(S=y+u),ue!==f||o!==0&&ue.nodeType!==3||(A=y+o),ue.nodeType===3&&(y+=ue.nodeValue.length),(K=ue.firstChild)!==null;)G=ue,ue=K;for(;;){if(ue===e)break t;if(G===i&&++H===u&&(S=y),G===f&&++ae===o&&(A=y),(K=ue.nextSibling)!==null)break;ue=G,G=ue.parentNode}ue=K}i=S===-1||A===-1?null:{start:S,end:A}}else i=null}i=i||{start:0,end:0}}else i=null;for(Yd={focusedElem:e,selectionRange:i},Jl=!1,_n=n;_n!==null;)if(n=_n,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,_n=e;else for(;_n!==null;){switch(n=_n,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var Me=Si(i.type,u);e=o.getSnapshotBeforeUpdate(Me,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(qe){Mt(i,i.return,qe)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Zd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,_n=e;break}_n=n.return}}function kg(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:pr(e,i),o&4&&oo(5,i);break;case 1:if(pr(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){Mt(i,i.return,y)}else{var u=Si(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Mt(i,i.return,y)}}o&64&&yg(i),o&512&&lo(i,i.return);break;case 3:if(pr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{om(e,n)}catch(y){Mt(i,i.return,y)}}break;case 27:n===null&&o&4&&Sg(i);case 26:case 5:pr(e,i),n===null&&o&4&&bg(i),o&512&&lo(i,i.return);break;case 12:pr(e,i);break;case 31:pr(e,i),o&4&&Tg(e,i);break;case 13:pr(e,i),o&4&&Ng(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=gx.bind(null,i),Lx(e,i))));break;case 22:if(o=i.memoizedState!==null||fr,!o){n=n!==null&&n.memoizedState!==null||bn,u=fr;var f=bn;fr=o,(bn=n)&&!f?mr(e,i,(i.subtreeFlags&8772)!==0):pr(e,i),fr=u,bn=f}break;case 30:break;default:pr(e,i)}}function Eg(e){var n=e.alternate;n!==null&&(e.alternate=null,Eg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Qt(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Jt=null,Kn=!1;function hr(e,n,i){for(i=i.child;i!==null;)Cg(e,n,i),i=i.sibling}function Cg(e,n,i){if(Se&&typeof Se.onCommitFiberUnmount=="function")try{Se.onCommitFiberUnmount(ie,i)}catch{}switch(i.tag){case 26:bn||Ya(i,n),hr(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:bn||Ya(i,n);var o=Jt,u=Kn;Vr(i.type)&&(Jt=i.stateNode,Kn=!1),hr(e,n,i),vo(i.stateNode),Jt=o,Kn=u;break;case 5:bn||Ya(i,n);case 6:if(o=Jt,u=Kn,Jt=null,hr(e,n,i),Jt=o,Kn=u,Jt!==null)if(Kn)try{(Jt.nodeType===9?Jt.body:Jt.nodeName==="HTML"?Jt.ownerDocument.body:Jt).removeChild(i.stateNode)}catch(f){Mt(i,n,f)}else try{Jt.removeChild(i.stateNode)}catch(f){Mt(i,n,f)}break;case 18:Jt!==null&&(Kn?(e=Jt,yy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),ds(e)):yy(Jt,i.stateNode));break;case 4:o=Jt,u=Kn,Jt=i.stateNode.containerInfo,Kn=!0,hr(e,n,i),Jt=o,Kn=u;break;case 0:case 11:case 14:case 15:zr(2,i,n),bn||zr(4,i,n),hr(e,n,i);break;case 1:bn||(Ya(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&vg(i,n,o)),hr(e,n,i);break;case 21:hr(e,n,i);break;case 22:bn=(o=bn)||i.memoizedState!==null,hr(e,n,i),bn=o;break;default:hr(e,n,i)}}function Tg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ds(e)}catch(i){Mt(n,n.return,i)}}}function Ng(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ds(e)}catch(i){Mt(n,n.return,i)}}function lx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new xg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new xg),n;default:throw Error(s(435,e.tag))}}function Ml(e,n){var i=lx(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var u=yx.bind(null,e,o);o.then(u,u)}})}function Qn(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Vr(S.type)){Jt=S.stateNode,Kn=!1;break e}break;case 5:Jt=S.stateNode,Kn=!1;break e;case 3:case 4:Jt=S.stateNode.containerInfo,Kn=!0;break e}S=S.return}if(Jt===null)throw Error(s(160));Cg(f,y,u),Jt=null,Kn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Og(n,e),n=n.sibling}var Aa=null;function Og(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qn(n,e),Wn(e),o&4&&(zr(3,e,e.return),oo(3,e),zr(5,e,e.return));break;case 1:Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),o&64&&fr&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Aa;if(Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Ge]||f[O]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),In(f,o,i),f[O]=e,Gt(f),o=f;break e;case"link":var y=Oy("link","href",u).get(o+(i.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(S,1);break t}}f=u.createElement(o),In(f,o,i),u.head.appendChild(f);break;case"meta":if(y=Oy("meta","content",u).get(o+(i.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(S,1);break t}}f=u.createElement(o),In(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[O]=e,Gt(f),o=f}e.stateNode=o}else jy(u,e.type,e.stateNode);else e.stateNode=Ny(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?jy(u,e.type,e.stateNode):Ny(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&wd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),i!==null&&o&4&&wd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Qn(n,e),Wn(e),o&512&&(bn||i===null||Ya(i,i.return)),e.flags&32){u=e.stateNode;try{Ri(u,"")}catch(Me){Mt(e,e.return,Me)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,wd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(kd=!0);break;case 6:if(Qn(n,e),Wn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(Me){Mt(e,e.return,Me)}}break;case 3:if(Xl=null,u=Aa,Aa=Fl(n.containerInfo),Qn(n,e),Aa=u,Wn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{ds(n.containerInfo)}catch(Me){Mt(e,e.return,Me)}kd&&(kd=!1,jg(e));break;case 4:o=Aa,Aa=Fl(e.stateNode.containerInfo),Qn(n,e),Wn(e),Aa=o;break;case 12:Qn(n,e),Wn(e);break;case 31:Qn(n,e),Wn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 13:Qn(n,e),Wn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(zl=C()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 22:u=e.memoizedState!==null;var A=i!==null&&i.memoizedState!==null,H=fr,ae=bn;if(fr=H||u,bn=ae||A,Qn(n,e),bn=ae,fr=H,Wn(e),o&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||A||fr||bn||xi(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){A=i=n;try{if(f=A.stateNode,u)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=A.stateNode;var ue=A.memoizedProps.style,G=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;S.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(Me){Mt(A,A.return,Me)}}}else if(n.tag===6){if(i===null){A=n;try{A.stateNode.nodeValue=u?"":A.memoizedProps}catch(Me){Mt(A,A.return,Me)}}}else if(n.tag===18){if(i===null){A=n;try{var K=A.stateNode;u?vy(K,!0):vy(A.stateNode,!1)}catch(Me){Mt(A,A.return,Me)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Ml(e,i))));break;case 19:Qn(n,e),Wn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Ml(e,o)));break;case 30:break;case 21:break;default:Qn(n,e),Wn(e)}}function Wn(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(wg(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=Sd(e);Dl(e,f,u);break;case 5:var y=i.stateNode;i.flags&32&&(Ri(y,""),i.flags&=-33);var S=Sd(e);Dl(e,S,y);break;case 3:case 4:var A=i.stateNode.containerInfo,H=Sd(e);xd(e,H,A);break;default:throw Error(s(161))}}catch(ae){Mt(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function jg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;jg(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function pr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)kg(e,n.alternate,n),n=n.sibling}function xi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:zr(4,n,n.return),xi(n);break;case 1:Ya(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&vg(n,n.return,i),xi(n);break;case 27:vo(n.stateNode);case 26:case 5:Ya(n,n.return),xi(n);break;case 22:n.memoizedState===null&&xi(n);break;case 30:xi(n);break;default:xi(n)}e=e.sibling}}function mr(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:mr(u,f,i),oo(4,f);break;case 1:if(mr(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(H){Mt(o,o.return,H)}if(o=f,u=o.updateQueue,u!==null){var S=o.stateNode;try{var A=u.shared.hiddenCallbacks;if(A!==null)for(u.shared.hiddenCallbacks=null,u=0;u<A.length;u++)sm(A[u],S)}catch(H){Mt(o,o.return,H)}}i&&y&64&&yg(f),lo(f,f.return);break;case 27:Sg(f);case 26:case 5:mr(u,f,i),i&&o===null&&y&4&&bg(f),lo(f,f.return);break;case 12:mr(u,f,i);break;case 31:mr(u,f,i),i&&y&4&&Tg(u,f);break;case 13:mr(u,f,i),i&&y&4&&Ng(u,f);break;case 22:f.memoizedState===null&&mr(u,f,i),lo(f,f.return);break;case 30:break;default:mr(u,f,i)}n=n.sibling}}function Ed(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Zs(i))}function Cd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zs(e))}function _a(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ag(e,n,i,o),n=n.sibling}function Ag(e,n,i,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:_a(e,n,i,o),u&2048&&oo(9,n);break;case 1:_a(e,n,i,o);break;case 3:_a(e,n,i,o),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Zs(e)));break;case 12:if(u&2048){_a(e,n,i,o),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){Mt(n,n.return,A)}}else _a(e,n,i,o);break;case 31:_a(e,n,i,o);break;case 13:_a(e,n,i,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?_a(e,n,i,o):co(e,n):f._visibility&2?_a(e,n,i,o):(f._visibility|=2,es(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&Ed(y,n);break;case 24:_a(e,n,i,o),u&2048&&Cd(n.alternate,n);break;default:_a(e,n,i,o)}}function es(e,n,i,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,y=n,S=i,A=o,H=y.flags;switch(y.tag){case 0:case 11:case 15:es(f,y,S,A,u),oo(8,y);break;case 23:break;case 22:var ae=y.stateNode;y.memoizedState!==null?ae._visibility&2?es(f,y,S,A,u):co(f,y):(ae._visibility|=2,es(f,y,S,A,u)),u&&H&2048&&Ed(y.alternate,y);break;case 24:es(f,y,S,A,u),u&&H&2048&&Cd(y.alternate,y);break;default:es(f,y,S,A,u)}n=n.sibling}}function co(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,u=o.flags;switch(o.tag){case 22:co(i,o),u&2048&&Ed(o.alternate,o);break;case 24:co(i,o),u&2048&&Cd(o.alternate,o);break;default:co(i,o)}n=n.sibling}}var uo=8192;function ts(e,n,i){if(e.subtreeFlags&uo)for(e=e.child;e!==null;)_g(e,n,i),e=e.sibling}function _g(e,n,i){switch(e.tag){case 26:ts(e,n,i),e.flags&uo&&e.memoizedState!==null&&Zx(i,Aa,e.memoizedState,e.memoizedProps);break;case 5:ts(e,n,i);break;case 3:case 4:var o=Aa;Aa=Fl(e.stateNode.containerInfo),ts(e,n,i),Aa=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=uo,uo=16777216,ts(e,n,i),uo=o):ts(e,n,i));break;default:ts(e,n,i)}}function Dg(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function fo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];_n=o,Rg(o,e)}Dg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Mg(e),e=e.sibling}function Mg(e){switch(e.tag){case 0:case 11:case 15:fo(e),e.flags&2048&&zr(9,e,e.return);break;case 3:fo(e);break;case 12:fo(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Rl(e)):fo(e);break;default:fo(e)}}function Rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];_n=o,Rg(o,e)}Dg(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:zr(8,n,n.return),Rl(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Rl(n));break;default:Rl(n)}e=e.sibling}}function Rg(e,n){for(;_n!==null;){var i=_n;switch(i.tag){case 0:case 11:case 15:zr(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Zs(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,_n=o;else e:for(i=e;_n!==null;){o=_n;var u=o.sibling,f=o.return;if(Eg(o),o===i){_n=null;break e}if(u!==null){u.return=f,_n=u;break e}_n=f}}}var cx={getCacheForType:function(e){var n=Ln(gn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Ln(gn).controller.signal}},ux=typeof WeakMap=="function"?WeakMap:Map,Ct=0,Ut=null,st=null,ct=0,Dt=0,oa=null,Lr=!1,ns=!1,Td=!1,gr=0,on=0,Br=0,ki=0,Nd=0,la=0,as=0,ho=null,Jn=null,Od=!1,zl=0,zg=0,Ll=1/0,Bl=null,Ir=null,Cn=0,$r=null,rs=null,yr=0,jd=0,Ad=null,Lg=null,po=0,_d=null;function ca(){return(Ct&2)!==0&&ct!==0?ct&-ct:Y.T!==null?Bd():ii()}function Bg(){if(la===0)if((ct&536870912)===0||mt){var e=ke;ke<<=1,(ke&3932160)===0&&(ke=262144),la=e}else la=536870912;return e=ia.current,e!==null&&(e.flags|=32),la}function ea(e,n,i){(e===Ut&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)&&(is(e,0),Ur(e,ct,la,!1)),kn(e,i),((Ct&2)===0||e!==Ut)&&(e===Ut&&((Ct&2)===0&&(ki|=i),on===4&&Ur(e,ct,la,!1)),Pa(e))}function Ig(e,n,i){if((Ct&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Vt(e,n),u=o?hx(e,n):Md(e,n,!0),f=o;do{if(u===0){ns&&!o&&Ur(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!dx(i)){u=Md(e,n,!1),f=!1;continue}if(u===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=e;u=ho;var A=S.current.memoizedState.isDehydrated;if(A&&(is(S,y).flags|=256),y=Md(S,y,!1),y!==2){if(Td&&!A){S.errorRecoveryDisabledLanes|=f,ki|=f,u=4;break e}f=Jn,Jn=u,f!==null&&(Jn===null?Jn=f:Jn.push.apply(Jn,f))}u=y}if(f=!1,u!==2)continue}}if(u===1){is(e,0),Ur(e,n,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Ur(o,n,la,!Lr);break e;case 2:Jn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(u=zl+300-C(),10<u)){if(Ur(o,n,la,!Lr),wt(o,0,!0)!==0)break e;yr=n,o.timeoutHandle=my($g.bind(null,o,i,Jn,Bl,Od,n,la,ki,as,Lr,f,"Throttled",-0,0),u);break e}$g(o,i,Jn,Bl,Od,n,la,ki,as,Lr,f,null,-0,0)}}break}while(!0);Pa(e)}function $g(e,n,i,o,u,f,y,S,A,H,ae,ue,G,K){if(e.timeoutHandle=-1,ue=n.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:nr},_g(n,f,ue);var Me=(f&62914560)===f?zl-C():(f&4194048)===f?zg-C():0;if(Me=Xx(ue,Me),Me!==null){yr=f,e.cancelPendingCommit=Me(Fg.bind(null,e,n,f,i,o,u,y,S,A,ae,ue,null,G,K)),Ur(e,f,y,!H);return}}Fg(e,n,f,i,o,u,y,S,A)}function dx(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!aa(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Ur(e,n,i,o){n&=~Nd,n&=~ki,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var u=n;0<u;){var f=31-Ce(u),y=1<<f;o[f]=-1,u&=~y}i!==0&&pn(e,i,n)}function Il(){return(Ct&6)===0?(mo(0),!1):!0}function Dd(){if(st!==null){if(Dt===0)var e=st.return;else e=st,sr=pi=null,Zu(e),Xi=null,Ks=0,e=st;for(;e!==null;)gg(e.alternate,e),e=e.return;st=null}}function is(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,_x(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),yr=0,Dd(),Ut=e,st=i=rr(e.current,null),ct=n,Dt=0,oa=null,Lr=!1,ns=Vt(e,n),Td=!1,as=la=Nd=ki=Br=on=0,Jn=ho=null,Od=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var u=31-Ce(o),f=1<<u;n|=e[u],o&=~f}return gr=n,il(),i}function Ug(e,n){et=null,Y.H=ro,n===Zi||n===hl?(n=nm(),Dt=3):n===Lu?(n=nm(),Dt=4):Dt=n===ud?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,oa=n,st===null&&(on=1,Nl(e,ha(n,e.current)))}function Hg(){var e=ia.current;return e===null?!0:(ct&4194048)===ct?ya===null:(ct&62914560)===ct||(ct&536870912)!==0?e===ya:!1}function Vg(){var e=Y.H;return Y.H=ro,e===null?ro:e}function Gg(){var e=Y.A;return Y.A=cx,e}function $l(){on=4,Lr||(ct&4194048)!==ct&&ia.current!==null||(ns=!0),(Br&134217727)===0&&(ki&134217727)===0||Ut===null||Ur(Ut,ct,la,!1)}function Md(e,n,i){var o=Ct;Ct|=2;var u=Vg(),f=Gg();(Ut!==e||ct!==n)&&(Bl=null,is(e,n)),n=!1;var y=on;e:do try{if(Dt!==0&&st!==null){var S=st,A=oa;switch(Dt){case 8:Dd(),y=6;break e;case 3:case 2:case 9:case 6:ia.current===null&&(n=!0);var H=Dt;if(Dt=0,oa=null,ss(e,S,A,H),i&&ns){y=0;break e}break;default:H=Dt,Dt=0,oa=null,ss(e,S,A,H)}}fx(),y=on;break}catch(ae){Ug(e,ae)}while(!0);return n&&e.shellSuspendCounter++,sr=pi=null,Ct=o,Y.H=u,Y.A=f,st===null&&(Ut=null,ct=0,il()),y}function fx(){for(;st!==null;)qg(st)}function hx(e,n){var i=Ct;Ct|=2;var o=Vg(),u=Gg();Ut!==e||ct!==n?(Bl=null,Ll=C()+500,is(e,n)):ns=Vt(e,n);e:do try{if(Dt!==0&&st!==null){n=st;var f=oa;t:switch(Dt){case 1:Dt=0,oa=null,ss(e,n,f,1);break;case 2:case 9:if(em(f)){Dt=0,oa=null,Yg(n);break}n=function(){Dt!==2&&Dt!==9||Ut!==e||(Dt=7),Pa(e)},f.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:em(f)?(Dt=0,oa=null,Yg(n)):(Dt=0,oa=null,ss(e,n,f,7));break;case 5:var y=null;switch(st.tag){case 26:y=st.memoizedState;case 5:case 27:var S=st;if(y?Ay(y):S.stateNode.complete){Dt=0,oa=null;var A=S.sibling;if(A!==null)st=A;else{var H=S.return;H!==null?(st=H,Ul(H)):st=null}break t}}Dt=0,oa=null,ss(e,n,f,5);break;case 6:Dt=0,oa=null,ss(e,n,f,6);break;case 8:Dd(),on=6;break e;default:throw Error(s(462))}}px();break}catch(ae){Ug(e,ae)}while(!0);return sr=pi=null,Y.H=o,Y.A=u,Ct=i,st!==null?0:(Ut=null,ct=0,il(),on)}function px(){for(;st!==null&&!Ta();)qg(st)}function qg(e){var n=pg(e.alternate,e,gr);e.memoizedProps=e.pendingProps,n===null?Ul(e):st=n}function Yg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=lg(i,n,n.pendingProps,n.type,void 0,ct);break;case 11:n=lg(i,n,n.pendingProps,n.type.render,n.ref,ct);break;case 5:Zu(n);default:gg(i,n),n=st=Gp(n,gr),n=pg(i,n,gr)}e.memoizedProps=e.pendingProps,n===null?Ul(e):st=n}function ss(e,n,i,o){sr=pi=null,Zu(n),Xi=null,Ks=0;var u=n.return;try{if(nx(e,u,n,i,ct)){on=1,Nl(e,ha(i,e.current)),st=null;return}}catch(f){if(u!==null)throw st=u,f;on=1,Nl(e,ha(i,e.current)),st=null;return}n.flags&32768?(mt||o===1?e=!0:ns||(ct&536870912)!==0?e=!1:(Lr=e=!0,(o===2||o===9||o===3||o===6)&&(o=ia.current,o!==null&&o.tag===13&&(o.flags|=16384))),Pg(n,e)):Ul(n)}function Ul(e){var n=e;do{if((n.flags&32768)!==0){Pg(n,Lr);return}e=n.return;var i=ix(n.alternate,n,gr);if(i!==null){st=i;return}if(n=n.sibling,n!==null){st=n;return}st=n=e}while(n!==null);on===0&&(on=5)}function Pg(e,n){do{var i=sx(e.alternate,e);if(i!==null){i.flags&=32767,st=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){st=e;return}st=e=i}while(e!==null);on=6,st=null}function Fg(e,n,i,o,u,f,y,S,A){e.cancelPendingCommit=null;do Hl();while(Cn!==0);if((Ct&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=Su,cn(e,i,f,y,S,A),e===Ut&&(st=Ut=null,ct=0),rs=n,$r=e,yr=i,jd=f,Ad=u,Lg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,vx(te,function(){return Wg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,u=he.p,he.p=2,y=Ct,Ct|=4;try{ox(e,n,i)}finally{Ct=y,he.p=u,Y.T=o}}Cn=1,Zg(),Xg(),Kg()}}function Zg(){if(Cn===1){Cn=0;var e=$r,n=rs,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=Y.T,Y.T=null;var o=he.p;he.p=2;var u=Ct;Ct|=4;try{Og(n,e);var f=Yd,y=Rp(e.containerInfo),S=f.focusedElem,A=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&Mp(S.ownerDocument.documentElement,S)){if(A!==null&&gu(S)){var H=A.start,ae=A.end;if(ae===void 0&&(ae=H),"selectionStart"in S)S.selectionStart=H,S.selectionEnd=Math.min(ae,S.value.length);else{var ue=S.ownerDocument||document,G=ue&&ue.defaultView||window;if(G.getSelection){var K=G.getSelection(),Me=S.textContent.length,qe=Math.min(A.start,Me),Bt=A.end===void 0?qe:Math.min(A.end,Me);!K.extend&&qe>Bt&&(y=Bt,Bt=qe,qe=y);var B=Dp(S,qe),R=Dp(S,Bt);if(B&&R&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==R.node||K.focusOffset!==R.offset)){var U=ue.createRange();U.setStart(B.node,B.offset),K.removeAllRanges(),qe>Bt?(K.addRange(U),K.extend(R.node,R.offset)):(U.setEnd(R.node,R.offset),K.addRange(U))}}}}for(ue=[],K=S;K=K.parentNode;)K.nodeType===1&&ue.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ue.length;S++){var se=ue[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Jl=!!qd,Yd=qd=null}finally{Ct=u,he.p=o,Y.T=i}}e.current=n,Cn=2}}function Xg(){if(Cn===2){Cn=0;var e=$r,n=rs,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=Y.T,Y.T=null;var o=he.p;he.p=2;var u=Ct;Ct|=4;try{kg(e,n.alternate,n)}finally{Ct=u,he.p=o,Y.T=i}}Cn=3}}function Kg(){if(Cn===4||Cn===3){Cn=0,Na();var e=$r,n=rs,i=yr,o=Lg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Cn=5:(Cn=0,rs=$r=null,Qg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ir=null),kr(i),n=n.stateNode,Se&&typeof Se.onCommitFiberRoot=="function")try{Se.onCommitFiberRoot(ie,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Y.T,u=he.p,he.p=2,Y.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];f(S.value,{componentStack:S.stack})}}finally{Y.T=n,he.p=u}}(yr&3)!==0&&Hl(),Pa(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===_d?po++:(po=0,_d=e):po=0,mo(0)}}function Qg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Zs(n)))}function Hl(){return Zg(),Xg(),Kg(),Wg()}function Wg(){if(Cn!==5)return!1;var e=$r,n=jd;jd=0;var i=kr(yr),o=Y.T,u=he.p;try{he.p=32>i?32:i,Y.T=null,i=Ad,Ad=null;var f=$r,y=yr;if(Cn=0,rs=$r=null,yr=0,(Ct&6)!==0)throw Error(s(331));var S=Ct;if(Ct|=4,Mg(f.current),Ag(f,f.current,y,i),Ct=S,mo(0,!1),Se&&typeof Se.onPostCommitFiberRoot=="function")try{Se.onPostCommitFiberRoot(ie,f)}catch{}return!0}finally{he.p=u,Y.T=o,Qg(e,n)}}function Jg(e,n,i){n=ha(i,n),n=cd(e.stateNode,n,2),e=Dr(e,n,2),e!==null&&(kn(e,2),Pa(e))}function Mt(e,n,i){if(e.tag===3)Jg(e,e,i);else for(;n!==null;){if(n.tag===3){Jg(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ir===null||!Ir.has(o))){e=ha(i,e),i=eg(2),o=Dr(n,i,2),o!==null&&(tg(i,o,n,e),kn(o,2),Pa(o));break}}n=n.return}}function Rd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new ux;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(i)||(Td=!0,u.add(i),e=mx.bind(null,e,n,i),n.then(e,e))}function mx(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ut===e&&(ct&i)===i&&(on===4||on===3&&(ct&62914560)===ct&&300>C()-zl?(Ct&2)===0&&is(e,0):Nd|=i,as===ct&&(as=0)),Pa(e)}function ey(e,n){n===0&&(n=$t()),e=di(e,n),e!==null&&(kn(e,n),Pa(e))}function gx(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),ey(e,i)}function yx(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),ey(e,i)}function vx(e,n){return On(e,n)}var Vl=null,os=null,zd=!1,Gl=!1,Ld=!1,Hr=0;function Pa(e){e!==os&&e.next===null&&(os===null?Vl=os=e:os=os.next=e),Gl=!0,zd||(zd=!0,wx())}function mo(e,n){if(!Ld&&Gl){Ld=!0;do for(var i=!1,o=Vl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var y=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Ce(42|e)+1)-1,f&=u&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,ry(o,f))}else f=ct,f=wt(o,o===Ut?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Vt(o,f)||(i=!0,ry(o,f));o=o.next}while(i);Ld=!1}}function bx(){ty()}function ty(){Gl=zd=!1;var e=0;Hr!==0&&Ax()&&(e=Hr);for(var n=C(),i=null,o=Vl;o!==null;){var u=o.next,f=ny(o,n);f===0?(o.next=null,i===null?Vl=u:i.next=u,u===null&&(os=i)):(i=o,(e!==0||(f&3)!==0)&&(Gl=!0)),o=u}Cn!==0&&Cn!==5||mo(e),Hr!==0&&(Hr=0)}function ny(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Ce(f),S=1<<y,A=u[y];A===-1?((S&i)===0||(S&o)!==0)&&(u[y]=lt(S,n)):A<=n&&(e.expiredLanes|=S),f&=~S}if(n=Ut,i=ct,i=wt(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&Zn(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Vt(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&Zn(o),kr(i)){case 2:case 8:i=re;break;case 32:i=te;break;case 268435456:i=T;break;default:i=te}return o=ay.bind(null,e),i=On(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&Zn(o),e.callbackPriority=2,e.callbackNode=null,2}function ay(e,n){if(Cn!==0&&Cn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Hl()&&e.callbackNode!==i)return null;var o=ct;return o=wt(e,e===Ut?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Ig(e,o,n),ny(e,C()),e.callbackNode!=null&&e.callbackNode===i?ay.bind(null,e):null)}function ry(e,n){if(Hl())return null;Ig(e,n,!0)}function wx(){Dx(function(){(Ct&6)!==0?On(L,bx):ty()})}function Bd(){if(Hr===0){var e=Pi;e===0&&(e=Xe,Xe<<=1,(Xe&261888)===0&&(Xe=256)),Hr=e}return Hr}function iy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Qo(""+e)}function sy(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function Sx(e,n,i,o,u){if(n==="submit"&&i&&i.stateNode===u){var f=iy((u[j]||null).action),y=o.submitter;y&&(n=(n=y[j]||null)?iy(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var S=new tl("action","action",null,o,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var A=y?sy(u,y):new FormData(u);ad(i,{pending:!0,data:A,method:u.method,action:f},null,A)}}else typeof f=="function"&&(S.preventDefault(),A=y?sy(u,y):new FormData(u),ad(i,{pending:!0,data:A,method:u.method,action:f},f,A))},currentTarget:u}]})}}for(var Id=0;Id<wu.length;Id++){var $d=wu[Id],xx=$d.toLowerCase(),kx=$d[0].toUpperCase()+$d.slice(1);ja(xx,"on"+kx)}ja(Bp,"onAnimationEnd"),ja(Ip,"onAnimationIteration"),ja($p,"onAnimationStart"),ja("dblclick","onDoubleClick"),ja("focusin","onFocus"),ja("focusout","onBlur"),ja($S,"onTransitionRun"),ja(US,"onTransitionStart"),ja(HS,"onTransitionCancel"),ja(Up,"onTransitionEnd"),Va("onMouseEnter",["mouseout","mouseover"]),Va("onMouseLeave",["mouseout","mouseover"]),Va("onPointerEnter",["pointerout","pointerover"]),Va("onPointerLeave",["pointerout","pointerover"]),tr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),tr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),tr("onBeforeInput",["compositionend","keypress","textInput","paste"]),tr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),tr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ex=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(go));function oy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var S=o[y],A=S.instance,H=S.currentTarget;if(S=S.listener,A!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=H;try{f(u)}catch(ae){rl(ae)}u.currentTarget=null,f=A}else for(y=0;y<o.length;y++){if(S=o[y],A=S.instance,H=S.currentTarget,S=S.listener,A!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=H;try{f(u)}catch(ae){rl(ae)}u.currentTarget=null,f=A}}}}function ot(e,n){var i=n[le];i===void 0&&(i=n[le]=new Set);var o=e+"__bubble";i.has(o)||(ly(n,e,2,!1),i.add(o))}function Ud(e,n,i){var o=0;n&&(o|=4),ly(i,e,o,n)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Hd(e){if(!e[ql]){e[ql]=!0,Ha.forEach(function(i){i!=="selectionchange"&&(Ex.has(i)||Ud(i,!1,e),Ud(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[ql]||(n[ql]=!0,Ud("selectionchange",!1,n))}}function ly(e,n,i,o){switch(By(n)){case 2:var u=Wx;break;case 8:u=Jx;break;default:u=nf}i=u.bind(null,n,i,e),u=void 0,!ou||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Vd(e,n,i,o,u){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var A=y.tag;if((A===3||A===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=_t(S),y===null)return;if(A=y.tag,A===5||A===6||A===26||A===27){o=f=y;continue e}S=S.parentNode}}o=o.return}hp(function(){var H=f,ae=iu(i),ue=[];e:{var G=Hp.get(e);if(G!==void 0){var K=tl,Me=e;switch(e){case"keypress":if(Jo(i)===0)break e;case"keydown":case"keyup":K=yS;break;case"focusin":Me="focus",K=du;break;case"focusout":Me="blur",K=du;break;case"beforeblur":case"afterblur":K=du;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=iS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=wS;break;case Bp:case Ip:case $p:K=lS;break;case Up:K=xS;break;case"scroll":case"scrollend":K=aS;break;case"wheel":K=ES;break;case"copy":case"cut":case"paste":K=uS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=vp;break;case"toggle":case"beforetoggle":K=TS}var qe=(n&4)!==0,Bt=!qe&&(e==="scroll"||e==="scrollend"),B=qe?G!==null?G+"Capture":null:G;qe=[];for(var R=H,U;R!==null;){var se=R;if(U=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||U===null||B===null||(se=Bs(R,B),se!=null&&qe.push(yo(R,se,U))),Bt)break;R=R.return}0<qe.length&&(G=new K(G,Me,null,i,ae),ue.push({event:G,listeners:qe}))}}if((n&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",G&&i!==ru&&(Me=i.relatedTarget||i.fromElement)&&(_t(Me)||Me[P]))break e;if((K||G)&&(G=ae.window===ae?ae:(G=ae.ownerDocument)?G.defaultView||G.parentWindow:window,K?(Me=i.relatedTarget||i.toElement,K=H,Me=Me?_t(Me):null,Me!==null&&(Bt=c(Me),qe=Me.tag,Me!==Bt||qe!==5&&qe!==27&&qe!==6)&&(Me=null)):(K=null,Me=H),K!==Me)){if(qe=gp,se="onMouseLeave",B="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(qe=vp,se="onPointerLeave",B="onPointerEnter",R="pointer"),Bt=K==null?G:Ua(K),U=Me==null?G:Ua(Me),G=new qe(se,R+"leave",K,i,ae),G.target=Bt,G.relatedTarget=U,se=null,_t(ae)===H&&(qe=new qe(B,R+"enter",Me,i,ae),qe.target=U,qe.relatedTarget=Bt,se=qe),Bt=se,K&&Me)t:{for(qe=Cx,B=K,R=Me,U=0,se=B;se;se=qe(se))U++;se=0;for(var Ue=R;Ue;Ue=qe(Ue))se++;for(;0<U-se;)B=qe(B),U--;for(;0<se-U;)R=qe(R),se--;for(;U--;){if(B===R||R!==null&&B===R.alternate){qe=B;break t}B=qe(B),R=qe(R)}qe=null}else qe=null;K!==null&&cy(ue,G,K,qe,!1),Me!==null&&Bt!==null&&cy(ue,Bt,Me,qe,!0)}}e:{if(G=H?Ua(H):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var St=Tp;else if(Ep(G))if(Np)St=LS;else{St=RS;var Le=MS}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?H&&au(H.elementType)&&(St=Tp):St=zS;if(St&&(St=St(e,H))){Cp(ue,St,i,ae);break e}Le&&Le(e,G,H),e==="focusout"&&H&&G.type==="number"&&H.memoizedProps.value!=null&&nu(G,"number",G.value)}switch(Le=H?Ua(H):window,e){case"focusin":(Ep(Le)||Le.contentEditable==="true")&&(Ii=Le,yu=H,Ys=null);break;case"focusout":Ys=yu=Ii=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,zp(ue,i,ae);break;case"selectionchange":if(IS)break;case"keydown":case"keyup":zp(ue,i,ae)}var nt;if(hu)e:{switch(e){case"compositionstart":var ut="onCompositionStart";break e;case"compositionend":ut="onCompositionEnd";break e;case"compositionupdate":ut="onCompositionUpdate";break e}ut=void 0}else Bi?xp(e,i)&&(ut="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ut="onCompositionStart");ut&&(bp&&i.locale!=="ko"&&(Bi||ut!=="onCompositionStart"?ut==="onCompositionEnd"&&Bi&&(nt=pp()):(Cr=ae,lu="value"in Cr?Cr.value:Cr.textContent,Bi=!0)),Le=Yl(H,ut),0<Le.length&&(ut=new yp(ut,e,null,i,ae),ue.push({event:ut,listeners:Le}),nt?ut.data=nt:(nt=kp(i),nt!==null&&(ut.data=nt)))),(nt=OS?jS(e,i):AS(e,i))&&(ut=Yl(H,"onBeforeInput"),0<ut.length&&(Le=new yp("onBeforeInput","beforeinput",null,i,ae),ue.push({event:Le,listeners:ut}),Le.data=nt)),Sx(ue,e,H,i,ae)}oy(ue,n)})}function yo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function Yl(e,n){for(var i=n+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Bs(e,i),u!=null&&o.unshift(yo(e,u,f)),u=Bs(e,n),u!=null&&o.push(yo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Cx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function cy(e,n,i,o,u){for(var f=n._reactName,y=[];i!==null&&i!==o;){var S=i,A=S.alternate,H=S.stateNode;if(S=S.tag,A!==null&&A===o)break;S!==5&&S!==26&&S!==27||H===null||(A=H,u?(H=Bs(i,f),H!=null&&y.unshift(yo(i,H,A))):u||(H=Bs(i,f),H!=null&&y.push(yo(i,H,A)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var Tx=/\r\n?/g,Nx=/\u0000|\uFFFD/g;function uy(e){return(typeof e=="string"?e:""+e).replace(Tx,`
`).replace(Nx,"")}function dy(e,n){return n=uy(n),uy(e)===n}function Lt(e,n,i,o,u,f){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Ri(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Ri(e,""+o);break;case"className":$e(e,"class",o);break;case"tabIndex":$e(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":$e(e,i,o);break;case"style":dp(e,o,f);break;case"data":if(n!=="object"){$e(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Qo(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Lt(e,n,"name",u.name,u,null),Lt(e,n,"formEncType",u.formEncType,u,null),Lt(e,n,"formMethod",u.formMethod,u,null),Lt(e,n,"formTarget",u.formTarget,u,null)):(Lt(e,n,"encType",u.encType,u,null),Lt(e,n,"method",u.method,u,null),Lt(e,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Qo(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=nr);break;case"onScroll":o!=null&&ot("scroll",e);break;case"onScrollEnd":o!=null&&ot("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Qo(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ot("beforetoggle",e),ot("toggle",e),je(e,"popover",o);break;case"xlinkActuate":pt(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":pt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":pt(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":pt(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":pt(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":pt(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":pt(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":pt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":pt(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":je(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=tS.get(i)||i,je(e,i,o))}}function Gd(e,n,i,o,u,f){switch(i){case"style":dp(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Ri(e,o):(typeof o=="number"||typeof o=="bigint")&&Ri(e,""+o);break;case"onScroll":o!=null&&ot("scroll",e);break;case"onScrollEnd":o!=null&&ot("scrollend",e);break;case"onClick":o!=null&&(e.onclick=nr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Er.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=e[j]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):je(e,i,o)}}}function In(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ot("error",e),ot("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var y=i[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Lt(e,n,f,y,i,null)}}u&&Lt(e,n,"srcSet",i.srcSet,i,null),o&&Lt(e,n,"src",i.src,i,null);return;case"input":ot("invalid",e);var S=f=y=u=null,A=null,H=null;for(o in i)if(i.hasOwnProperty(o)){var ae=i[o];if(ae!=null)switch(o){case"name":u=ae;break;case"type":y=ae;break;case"checked":A=ae;break;case"defaultChecked":H=ae;break;case"value":f=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,n));break;default:Lt(e,n,o,ae,i,null)}}tu(e,f,S,A,H,y,u,!1);return;case"select":ot("invalid",e),o=y=f=null;for(u in i)if(i.hasOwnProperty(u)&&(S=i[u],S!=null))switch(u){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:Lt(e,n,u,S,i,null)}n=f,i=y,e.multiple=!!o,n!=null?Mi(e,!!o,n,!1):i!=null&&Mi(e,!!o,i,!0);return;case"textarea":ot("invalid",e),f=u=o=null;for(y in i)if(i.hasOwnProperty(y)&&(S=i[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Lt(e,n,y,S,i,null)}cp(e,o,u,f);return;case"option":for(A in i)if(i.hasOwnProperty(A)&&(o=i[A],o!=null))switch(A){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Lt(e,n,A,o,i,null)}return;case"dialog":ot("beforetoggle",e),ot("toggle",e),ot("cancel",e),ot("close",e);break;case"iframe":case"object":ot("load",e);break;case"video":case"audio":for(o=0;o<go.length;o++)ot(go[o],e);break;case"image":ot("error",e),ot("load",e);break;case"details":ot("toggle",e);break;case"embed":case"source":case"link":ot("error",e),ot("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in i)if(i.hasOwnProperty(H)&&(o=i[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Lt(e,n,H,o,i,null)}return;default:if(au(n)){for(ae in i)i.hasOwnProperty(ae)&&(o=i[ae],o!==void 0&&Gd(e,n,ae,o,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(o=i[S],o!=null&&Lt(e,n,S,o,i,null))}function Ox(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,y=null,S=null,A=null,H=null,ae=null;for(K in i){var ue=i[K];if(i.hasOwnProperty(K)&&ue!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":A=ue;default:o.hasOwnProperty(K)||Lt(e,n,K,null,o,ue)}}for(var G in o){var K=o[G];if(ue=i[G],o.hasOwnProperty(G)&&(K!=null||ue!=null))switch(G){case"type":f=K;break;case"name":u=K;break;case"checked":H=K;break;case"defaultChecked":ae=K;break;case"value":y=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==ue&&Lt(e,n,G,K,o,ue)}}Oa(e,y,S,A,H,ae,f,u);return;case"select":K=y=S=G=null;for(f in i)if(A=i[f],i.hasOwnProperty(f)&&A!=null)switch(f){case"value":break;case"multiple":K=A;default:o.hasOwnProperty(f)||Lt(e,n,f,null,o,A)}for(u in o)if(f=o[u],A=i[u],o.hasOwnProperty(u)&&(f!=null||A!=null))switch(u){case"value":G=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==A&&Lt(e,n,u,f,o,A)}n=S,i=y,o=K,G!=null?Mi(e,!!i,G,!1):!!o!=!!i&&(n!=null?Mi(e,!!i,n,!0):Mi(e,!!i,i?[]:"",!1));return;case"textarea":K=G=null;for(S in i)if(u=i[S],i.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Lt(e,n,S,null,o,u)}for(y in o)if(u=o[y],f=i[y],o.hasOwnProperty(y)&&(u!=null||f!=null))switch(y){case"value":G=u;break;case"defaultValue":K=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Lt(e,n,y,u,o,f)}lp(e,G,K);return;case"option":for(var Me in i)if(G=i[Me],i.hasOwnProperty(Me)&&G!=null&&!o.hasOwnProperty(Me))switch(Me){case"selected":e.selected=!1;break;default:Lt(e,n,Me,null,o,G)}for(A in o)if(G=o[A],K=i[A],o.hasOwnProperty(A)&&G!==K&&(G!=null||K!=null))switch(A){case"selected":e.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:Lt(e,n,A,G,o,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var qe in i)G=i[qe],i.hasOwnProperty(qe)&&G!=null&&!o.hasOwnProperty(qe)&&Lt(e,n,qe,null,o,G);for(H in o)if(G=o[H],K=i[H],o.hasOwnProperty(H)&&G!==K&&(G!=null||K!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,n));break;default:Lt(e,n,H,G,o,K)}return;default:if(au(n)){for(var Bt in i)G=i[Bt],i.hasOwnProperty(Bt)&&G!==void 0&&!o.hasOwnProperty(Bt)&&Gd(e,n,Bt,void 0,o,G);for(ae in o)G=o[ae],K=i[ae],!o.hasOwnProperty(ae)||G===K||G===void 0&&K===void 0||Gd(e,n,ae,G,o,K);return}}for(var B in i)G=i[B],i.hasOwnProperty(B)&&G!=null&&!o.hasOwnProperty(B)&&Lt(e,n,B,null,o,G);for(ue in o)G=o[ue],K=i[ue],!o.hasOwnProperty(ue)||G===K||G==null&&K==null||Lt(e,n,ue,G,o,K)}function fy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function jx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,y=u.initiatorType,S=u.duration;if(f&&S&&fy(y)){for(y=0,S=u.responseEnd,o+=1;o<i.length;o++){var A=i[o],H=A.startTime;if(H>S)break;var ae=A.transferSize,ue=A.initiatorType;ae&&fy(ue)&&(A=A.responseEnd,y+=ae*(A<S?1:(S-H)/(A-H)))}if(--o,n+=8*(f+y)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var qd=null,Yd=null;function Pl(e){return e.nodeType===9?e:e.ownerDocument}function hy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function py(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Pd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Fd=null;function Ax(){var e=window.event;return e&&e.type==="popstate"?e===Fd?!1:(Fd=e,!0):(Fd=null,!1)}var my=typeof setTimeout=="function"?setTimeout:void 0,_x=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,Dx=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(e){return gy.resolve(null).then(e).catch(Mx)}:my;function Mx(e){setTimeout(function(){throw e})}function Vr(e){return e==="head"}function yy(e,n){var i=n,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),ds(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")vo(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,vo(i);for(var f=i.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[Ge]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=y}}else i==="body"&&vo(e.ownerDocument.body);i=u}while(i);ds(n)}function vy(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Zd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Zd(i),Qt(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Rx(e,n,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ge])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=va(e.nextSibling),e===null)break}return null}function zx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=va(e.nextSibling),e===null))return null;return e}function by(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=va(e.nextSibling),e===null))return null;return e}function Xd(e){return e.data==="$?"||e.data==="$~"}function Kd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Lx(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function va(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Qd=null;function wy(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return va(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function Sy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function xy(e,n,i){switch(n=Pl(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function vo(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Qt(e)}var ba=new Map,ky=new Set;function Fl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var vr=he.d;he.d={f:Bx,r:Ix,D:$x,C:Ux,L:Hx,m:Vx,X:qx,S:Gx,M:Yx};function Bx(){var e=vr.f(),n=Il();return e||n}function Ix(e){var n=ht(e);n!==null&&n.tag===5&&n.type==="form"?Um(n):vr.r(e)}var ls=typeof document>"u"?null:document;function Ey(e,n,i){var o=ls;if(o&&typeof n=="string"&&n){var u=mn(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),ky.has(u)||(ky.add(u),e={rel:e,crossOrigin:i,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),In(n,"link",e),Gt(n),o.head.appendChild(n)))}}function $x(e){vr.D(e),Ey("dns-prefetch",e,null)}function Ux(e,n){vr.C(e,n),Ey("preconnect",e,n)}function Hx(e,n,i){vr.L(e,n,i);var o=ls;if(o&&e&&n){var u='link[rel="preload"][as="'+mn(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+mn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+mn(i.imageSizes)+'"]')):u+='[href="'+mn(e)+'"]';var f=u;switch(n){case"style":f=cs(e);break;case"script":f=us(e)}ba.has(f)||(e=w({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ba.set(f,e),o.querySelector(u)!==null||n==="style"&&o.querySelector(bo(f))||n==="script"&&o.querySelector(wo(f))||(n=o.createElement("link"),In(n,"link",e),Gt(n),o.head.appendChild(n)))}}function Vx(e,n){vr.m(e,n);var i=ls;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+mn(o)+'"][href="'+mn(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=us(e)}if(!ba.has(f)&&(e=w({rel:"modulepreload",href:e},n),ba.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(wo(f)))return}o=i.createElement("link"),In(o,"link",e),Gt(o),i.head.appendChild(o)}}}function Gx(e,n,i){vr.S(e,n,i);var o=ls;if(o&&e){var u=Wt(o).hoistableStyles,f=cs(e);n=n||"default";var y=u.get(f);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(bo(f)))S.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ba.get(f))&&Wd(e,i);var A=y=o.createElement("link");Gt(A),In(A,"link",e),A._p=new Promise(function(H,ae){A.onload=H,A.onerror=ae}),A.addEventListener("load",function(){S.loading|=1}),A.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Zl(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(f,y)}}}function qx(e,n){vr.X(e,n);var i=ls;if(i&&e){var o=Wt(i).hoistableScripts,u=us(e),f=o.get(u);f||(f=i.querySelector(wo(u)),f||(e=w({src:e,async:!0},n),(n=ba.get(u))&&Jd(e,n),f=i.createElement("script"),Gt(f),In(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Yx(e,n){vr.M(e,n);var i=ls;if(i&&e){var o=Wt(i).hoistableScripts,u=us(e),f=o.get(u);f||(f=i.querySelector(wo(u)),f||(e=w({src:e,async:!0,type:"module"},n),(n=ba.get(u))&&Jd(e,n),f=i.createElement("script"),Gt(f),In(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Cy(e,n,i,o){var u=(u=pe.current)?Fl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=cs(i.href),i=Wt(u).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=cs(i.href);var f=Wt(u).hoistableStyles,y=f.get(e);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=u.querySelector(bo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),ba.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ba.set(e,i),f||Px(u,e,i,y.state))),n&&o===null)throw Error(s(528,""));return y}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=us(i),i=Wt(u).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function cs(e){return'href="'+mn(e)+'"'}function bo(e){return'link[rel="stylesheet"]['+e+"]"}function Ty(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Px(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),In(n,"link",i),Gt(n),e.head.appendChild(n))}function us(e){return'[src="'+mn(e)+'"]'}function wo(e){return"script[async]"+e}function Ny(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+mn(i.href)+'"]');if(o)return n.instance=o,Gt(o),o;var u=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Gt(o),In(o,"style",u),Zl(o,i.precedence,e),n.instance=o;case"stylesheet":u=cs(i.href);var f=e.querySelector(bo(u));if(f)return n.state.loading|=4,n.instance=f,Gt(f),f;o=Ty(i),(u=ba.get(u))&&Wd(o,u),f=(e.ownerDocument||e).createElement("link"),Gt(f);var y=f;return y._p=new Promise(function(S,A){y.onload=S,y.onerror=A}),In(f,"link",o),n.state.loading|=4,Zl(f,i.precedence,e),n.instance=f;case"script":return f=us(i.src),(u=e.querySelector(wo(f)))?(n.instance=u,Gt(u),u):(o=i,(u=ba.get(f))&&(o=w({},i),Jd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),Gt(u),In(u,"link",o),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Zl(o,i.precedence,e));return n.instance}function Zl(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===n)f=S;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Wd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Jd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Xl=null;function Oy(e,n,i){if(Xl===null){var o=new Map,u=Xl=new Map;u.set(i,o)}else u=Xl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Ge]||f[O]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var S=o.get(y);S?S.push(f):o.set(y,[f])}}return o}function jy(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Fx(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ay(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Zx(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=cs(o.href),f=n.querySelector(bo(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Kl.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,Gt(f);return}f=n.ownerDocument||n,o=Ty(o),(u=ba.get(u))&&Wd(o,u),f=f.createElement("link"),Gt(f);var y=f;y._p=new Promise(function(S,A){y.onload=S,y.onerror=A}),In(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Kl.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var ef=0;function Xx(e,n){return e.stylesheets&&e.count===0&&Wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&ef===0&&(ef=62500*jx());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wl(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>ef?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ql=null;function Wl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ql=new Map,n.forEach(Kx,e),Ql=null,Kl.call(e))}function Kx(e,n){if(!(n.state.loading&4)){var i=Ql.get(e);if(i)var o=i.get(null);else{i=new Map,Ql.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var y=u[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),o=y)}o&&i.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),f=i.get(y)||o,f===o&&i.set(null,u),i.set(y,u),this.count++,o=Kl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var So={$$typeof:I,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function Qx(e,n,i,o,u,f,y,S,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hn(0),this.hiddenUpdates=hn(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function _y(e,n,i,o,u,f,y,S,A,H,ae,ue){return e=new Qx(e,n,i,y,A,H,ae,ue,S),n=1,f===!0&&(n|=24),f=ra(3,null,null,n),e.current=f,f.stateNode=e,n=Mu(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:n},Bu(f),e}function Dy(e){return e?(e=Hi,e):Hi}function My(e,n,i,o,u,f){u=Dy(u),o.context===null?o.context=u:o.pendingContext=u,o=_r(n),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Dr(e,o,n),i!==null&&(ea(i,e,n),Ws(i,e,n))}function Ry(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function tf(e,n){Ry(e,n),(e=e.alternate)&&Ry(e,n)}function zy(e){if(e.tag===13||e.tag===31){var n=di(e,67108864);n!==null&&ea(n,e,67108864),tf(e,67108864)}}function Ly(e){if(e.tag===13||e.tag===31){var n=ca();n=jn(n);var i=di(e,n);i!==null&&ea(i,e,n),tf(e,n)}}var Jl=!0;function Wx(e,n,i,o){var u=Y.T;Y.T=null;var f=he.p;try{he.p=2,nf(e,n,i,o)}finally{he.p=f,Y.T=u}}function Jx(e,n,i,o){var u=Y.T;Y.T=null;var f=he.p;try{he.p=8,nf(e,n,i,o)}finally{he.p=f,Y.T=u}}function nf(e,n,i,o){if(Jl){var u=af(o);if(u===null)Vd(e,n,o,ec,i),Iy(e,o);else if(t2(u,e,n,i,o))o.stopPropagation();else if(Iy(e,o),n&4&&-1<e2.indexOf(e)){for(;u!==null;){var f=ht(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=He(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var A=1<<31-Ce(y);S.entanglements[1]|=A,y&=~A}Pa(f),(Ct&6)===0&&(Ll=C()+500,mo(0))}}break;case 31:case 13:S=di(f,2),S!==null&&ea(S,f,2),Il(),tf(f,2)}if(f=af(o),f===null&&Vd(e,n,o,ec,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Vd(e,n,o,null,i)}}function af(e){return e=iu(e),rf(e)}var ec=null;function rf(e){if(ec=null,e=_t(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return ec=e,null}function By(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(z()){case L:return 2;case re:return 8;case te:case ne:return 32;case T:return 268435456;default:return 32}default:return 32}}var sf=!1,Gr=null,qr=null,Yr=null,xo=new Map,ko=new Map,Pr=[],e2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iy(e,n){switch(e){case"focusin":case"focusout":Gr=null;break;case"dragenter":case"dragleave":qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":xo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(n.pointerId)}}function Eo(e,n,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},n!==null&&(n=ht(n),n!==null&&zy(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function t2(e,n,i,o,u){switch(n){case"focusin":return Gr=Eo(Gr,e,n,i,o,u),!0;case"dragenter":return qr=Eo(qr,e,n,i,o,u),!0;case"mouseover":return Yr=Eo(Yr,e,n,i,o,u),!0;case"pointerover":var f=u.pointerId;return xo.set(f,Eo(xo.get(f)||null,e,n,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,ko.set(f,Eo(ko.get(f)||null,e,n,i,o,u)),!0}return!1}function $y(e){var n=_t(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,si(e.priority,function(){Ly(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,si(e.priority,function(){Ly(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function tc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=af(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);ru=o,i.target.dispatchEvent(o),ru=null}else return n=ht(i),n!==null&&zy(n),e.blockedOn=i,!1;n.shift()}return!0}function Uy(e,n,i){tc(e)&&i.delete(n)}function n2(){sf=!1,Gr!==null&&tc(Gr)&&(Gr=null),qr!==null&&tc(qr)&&(qr=null),Yr!==null&&tc(Yr)&&(Yr=null),xo.forEach(Uy),ko.forEach(Uy)}function nc(e,n){e.blockedOn===n&&(e.blockedOn=null,sf||(sf=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,n2)))}var ac=null;function Hy(e){ac!==e&&(ac=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){ac===e&&(ac=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],u=e[n+2];if(typeof o!="function"){if(rf(o||i)===null)continue;break}var f=ht(i);f!==null&&(e.splice(n,3),n-=3,ad(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function ds(e){function n(A){return nc(A,e)}Gr!==null&&nc(Gr,e),qr!==null&&nc(qr,e),Yr!==null&&nc(Yr,e),xo.forEach(n),ko.forEach(n);for(var i=0;i<Pr.length;i++){var o=Pr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Pr.length&&(i=Pr[0],i.blockedOn===null);)$y(i),i.blockedOn===null&&Pr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],y=u[j]||null;if(typeof f=="function")y||Hy(i);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(u=f,y=f[j]||null)S=y.formAction;else if(rf(u)!==null)continue}else S=y.action;typeof S=="function"?i[o+1]=S:(i.splice(o,3),o-=3),Hy(i)}}}function Vy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function of(e){this._internalRoot=e}rc.prototype.render=of.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=ca();My(i,o,e,n,null,null)},rc.prototype.unmount=of.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;My(e.current,2,null,e,null,null),Il(),n[P]=null}};function rc(e){this._internalRoot=e}rc.prototype.unstable_scheduleHydration=function(e){if(e){var n=ii();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Pr.length&&n!==0&&n<Pr[i].priority;i++);Pr.splice(i,0,e),i===0&&$y(e)}};var Gy=t.version;if(Gy!=="19.2.0")throw Error(s(527,Gy,"19.2.0"));he.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var a2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ie=ic.inject(a2),Se=ic}catch{}}return To.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",u=Km,f=Qm,y=Wm;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=_y(e,1,!1,null,null,i,o,null,u,f,y,Vy),e[P]=n.current,Hd(e),new of(n)},To.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Km,y=Qm,S=Wm,A=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(A=i.formState)),n=_y(e,1,!0,n,i??null,o,u,A,f,y,S,Vy),n.context=Dy(null),i=n.current,o=ca(),o=jn(o),u=_r(o),u.callback=null,Dr(i,u,o),i=o,n.current.lanes=i,kn(n,i),Pa(n),e[P]=n.current,Hd(e),new rc(n)},To.version="19.2.0",To}var Jy;function h2(){if(Jy)return uf.exports;Jy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),uf.exports=f2(),uf.exports}var fb=h2();const p2="modulepreload",m2=function(a,t){return new URL(a,t).href},ev={},tv=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let g=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");l=g(r.map(b=>{if(b=m2(b,s),b in ev)return;ev[b]=!0;const w=b.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(s)for(let D=d.length-1;D>=0;D--){const X=d[D];if(X.href===b&&(!w||X.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${k}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":p2,w||(E.as="script"),E.crossOrigin="",E.href=b,m&&E.setAttribute("nonce",m),document.head.appendChild(E),w)return new Promise((D,X)=>{E.addEventListener("load",D),E.addEventListener("error",()=>X(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})};var Jr=db();const _h=jh(Jr),nv=ub({__proto__:null,default:_h},[Jr]);function av(a,t,r,s,l,c,d){try{var p=a[c](d),m=p.value}catch(g){return void r(g)}p.done?t(m):Promise.resolve(m).then(s,l)}function rt(a){return function(){var t=this,r=arguments;return new Promise(function(s,l){var c=a.apply(t,r);function d(m){av(c,s,l,d,p,"next",m)}function p(m){av(c,s,l,d,p,"throw",m)}d(void 0)})}}function dt(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function $n(a){"@babel/helpers - typeof";return $n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$n(a)}function g2(a,t){if($n(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if($n(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function hb(a){var t=g2(a,"string");return $n(t)=="symbol"?t:t+""}function y2(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,hb(s.key),s)}}function ft(a,t,r){return t&&y2(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function v2(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ja(a,t){if(t&&($n(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v2(a)}function Ht(a){return Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ht(a)}function Ho(a,t){return Ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ho(a,t)}function na(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Ho(a,t)}function Be(a,t,r){return(t=hb(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var pf={exports:{}},mf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){function t(r,s){this.v=r,this.k=s}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var gf={exports:{}},yf={exports:{}},iv;function mb(){return iv||(iv=1,(function(a){function t(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=t=function(m,g,b,w){function k(E,D){t(m,E,function(X){return this._invoke(E,D,X)})}g?d?d(m,g,{value:b,enumerable:!w,configurable:!w,writable:!w}):m[g]=b:(k("next",0),k("throw",1),k("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,t(r,s,l,c)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var sv;function gb(){return sv||(sv=1,(function(a){var t=mb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",p=c.toStringTag||"@@toStringTag";function m(V,ee,W,I){var q=ee&&ee.prototype instanceof b?ee:b,ve=Object.create(q.prototype);return t(ve,"_invoke",(function(xe,$,me){var ce,ge,Re,_e=0,Je=me||[],tt=!1,Qe={p:0,n:0,v:s,a:Y,f:Y.bind(s,4),d:function(ye,ze){return ce=ye,ge=0,Re=s,Qe.n=ze,g}};function Y(he,ye){for(ge=he,Re=ye,l=0;!tt&&_e&&!ze&&l<Je.length;l++){var ze,J=Je[l],v=Qe.p,N=J[2];he>3?(ze=N===ye)&&(Re=J[(ge=J[4])?5:(ge=3,3)],J[4]=J[5]=s):J[0]<=v&&((ze=he<2&&v<J[1])?(ge=0,Qe.v=ye,Qe.n=J[1]):v<N&&(ze=he<3||J[0]>ye||ye>N)&&(J[4]=he,J[5]=ye,Qe.n=N,ge=0))}if(ze||he>1)return g;throw tt=!0,ye}return function(he,ye,ze){if(_e>1)throw TypeError("Generator is already running");for(tt&&ye===1&&Y(ye,ze),ge=ye,Re=ze;(l=ge<2?s:Re)||!tt;){ce||(ge?ge<3?(ge>1&&(Qe.n=-1),Y(ge,Re)):Qe.n=Re:Qe.v=Re);try{if(_e=2,ce){if(ge||(he="next"),l=ce[he]){if(!(l=l.call(ce,Re)))throw TypeError("iterator result is not an object");if(!l.done)return l;Re=l.value,ge<2&&(ge=0)}else ge===1&&(l=ce.return)&&l.call(ce),ge<2&&(Re=TypeError("The iterator does not provide a '"+he+"' method"),ge=1);ce=s}else if((l=(tt=Qe.n<0)?Re:xe.call($,Qe))!==g)break}catch(J){ce=s,ge=1,Re=J}finally{_e=1}}return{value:l,done:tt}}})(V,W,I),!0),ve}var g={};function b(){}function w(){}function k(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(t(l={},d,function(){return this}),l),D=k.prototype=b.prototype=Object.create(E);function X(V){return Object.setPrototypeOf?Object.setPrototypeOf(V,k):(V.__proto__=k,t(V,p,"GeneratorFunction")),V.prototype=Object.create(D),V}return w.prototype=k,t(D,"constructor",k),t(k,"constructor",w),w.displayName="GeneratorFunction",t(k,p,"GeneratorFunction"),t(D),t(D,p,"Generator"),t(D,d,function(){return this}),t(D,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:X}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var vf={exports:{}},bf={exports:{}},wf={exports:{}},ov;function yb(){return ov||(ov=1,(function(a){var t=pb(),r=mb();function s(l,c){function d(m,g,b,w){try{var k=l[m](g),E=k.value;return E instanceof t?c.resolve(E.v).then(function(D){d("next",D,b,w)},function(D){d("throw",D,b,w)}):c.resolve(E).then(function(D){k.value=D,b(k)},function(D){return d("throw",D,b,w)})}catch(D){w(D)}}var p;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,g,b){function w(){return new c(function(k,E){d(m,b,k,E)})}return p=p?p.then(w,w):w()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(wf)),wf.exports}var lv;function vb(){return lv||(lv=1,(function(a){var t=gb(),r=yb();function s(l,c,d,p,m){return new r(t().w(l,c,d,p),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var cv;function b2(){return cv||(cv=1,(function(a){var t=vb();function r(s,l,c,d,p){var m=t(s,l,c,d,p);return m.next().then(function(g){return g.done?g.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var Sf={exports:{}},uv;function w2(){return uv||(uv=1,(function(a){function t(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(Sf)),Sf.exports}var xf={exports:{}},kf={exports:{}},dv;function S2(){return dv||(dv=1,(function(a){function t(r){"@babel/helpers - typeof";return a.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,t(r)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(kf)),kf.exports}var fv;function x2(){return fv||(fv=1,(function(a){var t=S2().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(t(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(xf)),xf.exports}var hv;function k2(){return hv||(hv=1,(function(a){var t=pb(),r=gb(),s=b2(),l=vb(),c=yb(),d=w2(),p=x2();function m(){var g=r(),b=g.m(m),w=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function k(X){var V=typeof X=="function"&&X.constructor;return!!V&&(V===w||(V.displayName||V.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function D(X){var V,ee;return function(W){V||(V={stop:function(){return ee(W.a,2)},catch:function(){return W.v},abrupt:function(q,ve){return ee(W.a,E[q],ve)},delegateYield:function(q,ve,xe){return V.resultName=ve,ee(W.d,p(q),xe)},finish:function(q){return ee(W.f,q)}},ee=function(q,ve,xe){W.p=V.prev,W.n=V.next;try{return q(ve,xe)}finally{V.next=W.n}}),V.resultName&&(V[V.resultName]=W.v,V.resultName=void 0),V.sent=W.v,V.next=W.n;try{return X.call(this,V)}finally{W.p=V.prev,W.n=V.next}}}return(a.exports=m=function(){return{wrap:function(ee,W,I,q){return g.w(D(ee),W,I,q&&q.reverse())},isGeneratorFunction:k,mark:g.m,awrap:function(ee,W){return new t(ee,W)},AsyncIterator:c,async:function(ee,W,I,q,ve){return(k(W)?l:s)(D(ee),W,I,q,ve)},keys:d,values:p}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var Ef,pv;function E2(){if(pv)return Ef;pv=1;var a=k2()();Ef=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return Ef}var C2=E2();const Te=jh(C2);function T2(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=N2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function N2(a,t){if(a){if(typeof a=="string")return mv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mv(a,t):void 0}}function mv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function O2(){return{debug:function(t){}}}var bb=(function(){function a(){dt(this,a),Be(this,"pipes",[])}return ft(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var t=rt(Te.mark(function s(l){var c,d,p,m;return Te.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:c=l,d=T2(this.pipes),b.prev=2,d.s();case 4:if((p=d.n()).done){b.next=13;break}return m=p.value,b.next=8,m(c);case 8:if(c=b.sent,!(typeof c>"u")){b.next=11;break}return b.abrupt("return");case 11:b.next=4;break;case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(2),d.e(b.t0);case 18:return b.prev=18,d.f(),b.finish(18);case 21:return b.abrupt("return",c);case 22:case"end":return b.stop()}},s,this,[[2,15,18,21]])}));function r(s){return t.apply(this,arguments)}return r})()}])})(),Os=(function(){function a(t){dt(this,a),Be(this,"signal",new bb),this.name=t}return ft(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),O2()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function gv(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=j2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function j2(a,t){if(a){if(typeof a=="string")return yv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yv(a,t):void 0}}function yv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function A2(a,t,r){return t=Ht(t),Ja(a,wb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function wb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wb=function(){return!!a})()}var ai=(function(a){function t(){var r;return dt(this,t),r=A2(this,t,["NodeEditor"]),Be(r,"nodes",[]),Be(r,"connections",[]),r}return na(t,a),ft(t,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=rt(Te.mark(function l(c){return Te.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getNode(c.id)){p.next=2;break}throw new Error("node has already been added");case 2:return p.next=4,this.emit({type:"nodecreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.nodes.push(c),p.next=9,this.emit({type:"nodecreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=rt(Te.mark(function l(c){return Te.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getConnection(c.id)){p.next=2;break}throw new Error("connection has already been added");case 2:return p.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.connections.push(c),p.next=9,this.emit({type:"connectioncreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=rt(Te.mark(function l(c){var d,p;return Te.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.nodes.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find node");case 3:return g.next=5,this.emit({type:"noderemove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.nodes.indexOf(d),this.nodes.splice(p,1),g.next=11,this.emit({type:"noderemoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=rt(Te.mark(function l(c){var d,p;return Te.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.connections.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find connection");case 3:return g.next=5,this.emit({type:"connectionremove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.connections.indexOf(d),this.connections.splice(p,1),g.next=11,this.emit({type:"connectionremoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=rt(Te.mark(function l(){var c,d,p,m,g,b;return Te.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.emit({type:"clear"});case 2:if(k.sent){k.next=6;break}return k.next=5,this.emit({type:"clearcancelled"});case 5:return k.abrupt("return",!1);case 6:c=gv(this.connections.slice()),k.prev=7,c.s();case 9:if((d=c.n()).done){k.next=15;break}return p=d.value,k.next=13,this.removeConnection(p.id);case 13:k.next=9;break;case 15:k.next=20;break;case 17:k.prev=17,k.t0=k.catch(7),c.e(k.t0);case 20:return k.prev=20,c.f(),k.finish(20);case 23:m=gv(this.nodes.slice()),k.prev=24,m.s();case 26:if((g=m.n()).done){k.next=32;break}return b=g.value,k.next=30,this.removeNode(b.id);case 30:k.next=26;break;case 32:k.next=37;break;case 34:k.prev=34,k.t1=k.catch(24),m.e(k.t1);case 37:return k.prev=37,m.f(),k.finish(37);case 40:return k.next=42,this.emit({type:"cleared"});case 42:return k.abrupt("return",!0);case 43:case"end":return k.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(Os),Cf=globalThis.crypto;function ri(){if("randomBytes"in Cf)return Cf.randomBytes(8).toString("hex");var a=Cf.getRandomValues(new Uint8Array(8)),t=Array.from(a),r=t.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Dh(a,t,r){return t=Ht(t),Ja(a,Sb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Sb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sb=function(){return!!a})()}var _2=ft(function a(t){dt(this,a),this.name=t}),Mh=ft(function a(t,r,s){dt(this,a),this.socket=t,this.label=r,this.multipleConnections=s,this.id=ri()}),D2=(function(a){function t(r,s,l){var c;return dt(this,t),c=Dh(this,t,[r,s,l]),Be(c,"control",null),Be(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return na(t,a),ft(t,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(Mh),M2=(function(a){function t(r,s,l){return dt(this,t),Dh(this,t,[r,s,l!==!1])}return na(t,a),ft(t)})(Mh),xb=ft(function a(){dt(this,a),this.id=ri()}),R2=(function(a){function t(r,s){var l,c;return dt(this,t),c=Dh(this,t),c.type=r,c.options=s,c.id=ri(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return na(t,a),ft(t,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(xb),z2=(function(){function a(t){dt(this,a),Be(this,"inputs",{}),Be(this,"outputs",{}),Be(this,"controls",{}),this.label=t,this.id=ri()}return ft(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),L2=ft(function a(t,r,s,l){if(dt(this,a),this.sourceOutput=r,this.targetInput=l,!t.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=ri(),this.source=t.id,this.target=s.id}),Kt=Object.freeze({__proto__:null,Socket:_2,Port:Mh,Input:D2,Output:M2,Control:xb,InputControl:R2,Node:z2,Connection:L2});const B2=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Kt,NodeEditor:ai,Scope:Os,Signal:bb,getUID:ri},Symbol.toStringTag,{value:"Module"}));function Zf(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function I2(a){if(Array.isArray(a))return Zf(a)}function $2(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function kb(a,t){if(a){if(typeof a=="string")return Zf(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zf(a,t):void 0}}function U2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function js(a){return I2(a)||$2(a)||kb(a)||U2()}var H2=(function(){function a(t){dt(this,a),this.reordered=t,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return ft(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,p=r.clientY-c;return{x:d,y:p}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var t=rt(Te.mark(function s(l,c){return Te.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.holder.contains(l)){p.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){p.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),p.next=7,this.reordered(l);case 7:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function Eb(a,t){var r=function(d){t.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),t.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),t.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var vv=function(t){return t.length===0?0:Math.min.apply(Math,js(t))},bv=function(t){return t.length===0?0:Math.max.apply(Math,js(t))};function Cb(a){var t=vv(a.map(function(c){return c.position.x})),r=vv(a.map(function(c){return c.position.y})),s=bv(a.map(function(c){return c.position.x+c.width})),l=bv(a.map(function(c){return c.position.y+c.height}));return{left:t,right:s,top:r,bottom:l,width:Math.abs(t-s),height:Math.abs(r-l),center:{x:(t+s)/2,y:(r+l)/2}}}function wv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function V2(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Rh=(function(){function a(t){var r=this;dt(this,a),Be(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=V2({},r.config.getCurrentPosition()),r.events.start(s))}),Be(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,p=r.startPosition.y+l.y/c;r.events.translate(d,p,s)}}),Be(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=t||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return ft(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=Eb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Tb=(function(){function a(t){var r=this;dt(this,a),Be(this,"previous",null),Be(this,"pointers",[]),Be(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=s.deltaY<0,m=p?r.intensity:-r.intensity,g=(c-s.clientX)*m,b=(d-s.clientY)*m;r.onzoom(m,g,b,"wheel")}),Be(this,"down",function(s){r.pointers.push(s)}),Be(this,"move",function(s){if(r.pointers=r.pointers.map(function(D){return D.pointerId===s.pointerId?s:D}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=r.getTouches(),m=p.cx,g=p.cy,b=p.distance;if(r.previous!==null&&r.previous.distance>0){var w=b/r.previous.distance-1,k=(c-m)*w,E=(d-g)*w;r.onzoom(w,k-(r.previous.cx-m),E-(r.previous.cy-g),"touch")}r.previous={cx:m,cy:g,distance:b}}}),Be(this,"contextmenu",function(){r.pointers=[]}),Be(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Be(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=4*r.intensity,m=(c-s.clientX)*p,g=(d-s.clientY)*p;r.onzoom(p,m,g,"dblclick")}),this.intensity=t}return ft(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],p=d[0],m=d[1],g=Math.sqrt(Math.pow(l-p,2)+Math.pow(c-m,2));return{cx:(l+p)/2,cy:(c+m)/2,distance:g}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Nb=(function(){function a(t,r,s){var l=this;dt(this,a),Be(this,"transform",{k:1,x:0,y:0}),Be(this,"pointer",{x:0,y:0}),Be(this,"zoomHandler",null),Be(this,"dragHandler",null),Be(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Be(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Be(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Be(this,"resize",function(c){l.events.resize(c)}),Be(this,"onTranslate",function(c,d){var p;(p=l.zoomHandler)!==null&&p!==void 0&&p.isTranslating()||l.translate(c,d)}),Be(this,"onZoom",function(c,d,p,m){l.zoom(l.transform.k*(1+c),d,p,m),l.update()}),this.container=t,this.events=r,this.guards=s,this.content=new H2(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Tb(.1)),this.setDragHandler(new Rh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),t.appendChild(this.content.holder),this.update()}return ft(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var t=rt(Te.mark(function s(l,c){var d,p;return Te.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d={x:l,y:c},g.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(p=g.sent,p){g.next=6;break}return g.abrupt("return",!1);case 6:return this.transform.x=p.data.position.x,this.transform.y=p.data.position.y,this.update(),g.next=11,this.events.translated(p.data);case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var t=rt(Te.mark(function s(l){var c,d,p,m,g,b,w=arguments;return Te.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=w.length>1&&w[1]!==void 0?w[1]:0,d=w.length>2&&w[2]!==void 0?w[2]:0,p=w.length>3?w[3]:void 0,m=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:p});case 6:if(g=E.sent,g){E.next=9;break}return E.abrupt("return",!0);case 9:return b=(m-g.data.zoom)/(m-l||1),this.transform.k=g.data.zoom||1,this.transform.x+=c*b,this.transform.y+=d*b,this.update(),E.next=16,this.events.zoomed(g.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function G2(a,t,r){return t=Ht(t),Ja(a,Ob()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Ob(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ob=function(){return!!a})()}var Yo=(function(a){function t(){return dt(this,t),G2(this,t,arguments)}return na(t,a),ft(t)})(Os),q2=ft(function a(t){dt(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return t.contextmenu(r)})}),Y2=(function(){function a(){dt(this,a),Be(this,"views",new WeakMap),Be(this,"viewsElements",new Map)}return ft(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function Sv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function xv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var jb=(function(){function a(t,r,s){var l=this;dt(this,a),Be(this,"translate",(function(){var c=rt(Te.mark(function d(p,m){var g,b;return Te.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g=xv({},l.position),k.next=3,l.guards.translate({previous:g,position:{x:p,y:m}});case 3:if(b=k.sent,b){k.next=6;break}return k.abrupt("return",!1);case 6:return l.position=xv({},b.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),k.next=10,l.events.translated({position:l.position,previous:g});case 10:return k.abrupt("return",!0);case 11:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),Be(this,"resize",(function(){var c=rt(Te.mark(function d(p,m){var g,b;return Te.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g={width:p,height:m},k.next=3,l.guards.resize({size:g});case 3:if(k.sent){k.next=5;break}return k.abrupt("return",!1);case 5:if(b=l.element.querySelector("*:not(span):not([fragment])"),!(!b||!(b instanceof HTMLElement))){k.next=8;break}return k.abrupt("return",!1);case 8:return b.style.width="".concat(p,"px"),b.style.height="".concat(m,"px"),k.next=12,l.events.resized({size:g});case 12:return k.abrupt("return",!0);case 13:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),this.getZoom=t,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new Rh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return ft(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function Ab(a,t){return a.map(function(r){return{view:t.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function P2(a,t){var r=a.parentScope(ai),s=t.map(function(c){return $n(c)==="object"?c:r.getNode(c)}),l=Ab(s,a.nodeViews);return Cb(l)}function F2(a){var t=a;t.addPipe(function(r){if(!r||$n(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=t.nodeViews.get(r.data.id),l=t.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=t.connectionViews.get(r.data.id),d=t.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function kv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function br(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function Z2(a,t){var r=t!=null&&t.scaling?t.scaling===!0?{min:.1,max:1}:t.scaling:!1,s=t!=null&&t.translation?t.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:t.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var p=typeof r=="function"?r():r,m=p.min,g=p.max;return d<m?m:d>g?g:d}function c(d){if(!s)throw new Error("translation param isnt defined");var p=br({},d),m=typeof s=="function"?s():s,g=m.left,b=m.top,w=m.right,k=m.bottom;return p.x<g&&(p.x=g),p.x>w&&(p.x=w),p.y<b&&(p.y=b),p.y>k&&(p.y=k),p}a.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return br(br({},d),{},{data:br(br({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var p=c(a.area.transform);a.area.translate(p.x,p.y)}return s&&d.type==="translate"?br(br({},d),{},{data:br(br({},d.data),{},{position:c(d.data.position)})}):d})}function X2(){var a=!1;function t(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",t),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)}}}var _b=(function(){function a(){dt(this,a),Be(this,"entities",new Map),Be(this,"pickId",null)}return ft(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var t=rt(Te.mark(function s(l,c){return Te.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c){p.next=3;break}return p.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var t=rt(Te.mark(function s(l){var c,d;return Te.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var t=rt(Te.mark(function s(){var l=this;return Te.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(js(Array.from(this.entities.values())).map(function(p){return l.remove(p)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var t=rt(Te.mark(function s(l,c){var d=this;return Te.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(g){return!d.isPicked(g)&&g.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function K2(){return new _b}function Q2(a,t,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(ai))},d=0;function p(E){E.selected||(E.selected=!0,l.update("node",E.id))}function m(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function g(E,D){return b.apply(this,arguments)}function b(){return b=rt(Te.mark(function E(D,X){var V;return Te.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(V=c().getNode(D),V){W.next=3;break}return W.abrupt("return");case 3:return W.next=5,t.add({label:"node",id:V.id,translate:function(q,ve){return rt(Te.mark(function xe(){var $,me;return Te.wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:if($=l.nodeViews.get(V.id),me=$?.position,!me){ge.next=5;break}return ge.next=5,$.translate(me.x+q,me.y+ve);case 5:case"end":return ge.stop()}},xe)}))()},unselect:function(){m(V)}},X);case 5:p(V);case 6:case"end":return W.stop()}},E)})),b.apply(this,arguments)}function w(E){return k.apply(this,arguments)}function k(){return k=rt(Te.mark(function E(D){return Te.wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,t.remove({id:D,label:"node"});case 2:case"end":return V.stop()}},E)})),k.apply(this,arguments)}return l.addPipe((function(){var E=rt(Te.mark(function D(X){var V,ee,W,I,q,ve,xe,$;return Te.wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:if(!(!X||$n(X)!=="object"||!("type"in X))){ce.next=2;break}return ce.abrupt("return",X);case 2:if(X.type!=="nodepicked"){ce.next=11;break}return V=X.data.id,ee=r.accumulating.active(),t.pick({id:V,label:"node"}),d=null,ce.next=9,g(V,ee);case 9:ce.next=33;break;case 11:if(X.type!=="nodetranslated"){ce.next=20;break}if(W=X.data,I=W.id,q=W.position,ve=W.previous,xe=q.x-ve.x,$=q.y-ve.y,!t.isPicked({id:I,label:"node"})){ce.next=18;break}return ce.next=18,t.translate(xe,$);case 18:ce.next=33;break;case 20:if(X.type!=="pointerdown"){ce.next=24;break}d=0,ce.next=33;break;case 24:if(X.type!=="pointermove"){ce.next=28;break}d!==null&&d++,ce.next=33;break;case 28:if(X.type!=="pointerup"){ce.next=33;break}if(!(d!==null&&d<4)){ce.next=32;break}return ce.next=32,t.unselectAll();case 32:d=null;case 33:return ce.abrupt("return",X);case 34:case"end":return ce.stop()}},D)}));return function(D){return E.apply(this,arguments)}})()),{select:g,unselect:w}}function W2(a,t){var r=null,s=function(){return r||(r=a.parentScope(ai))};function l(c,d){var p=s().getNode(c);if(p){var m=p.inputs[d];if(!m)throw new Error("cannot find input");var g=m.showControl,b=s().getConnections(),w=!!b.find(function(k){return k.target===c&&k.targetInput===d});m.showControl=t?t({hasAnyConnection:w,input:m}):!w,m.showControl!==g&&a.update("node",p.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function Ev(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function sc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ev(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ev(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function J2(a,t){var r=a,s=typeof t?.size>"u"?16:t.size,l=typeof t?.dynamic>"u"?!0:t.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var p=d.data.position,m=c(p.x),g=c(p.y);return sc(sc({},d),{},{data:sc(sc({},d.data),{},{position:{x:m,y:g}})})}if(!l&&d.type==="nodedragged"){var b=r.nodeViews.get(d.data.id);if(b){var w=b.position,k=w.x,E=w.y;b.translate(c(k),c(E))}}return d})}function ek(a,t,r){return Xf.apply(this,arguments)}function Xf(){return Xf=rt(Te.mark(function a(t,r,s){var l,c,d,p,m,g,b,w,k,E,D,X,V;return Te.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,p=t.parentScope(ai),m=r.map(function(I){return $n(I)==="object"?I:p.getNode(I)}),g=Ab(m,t.nodeViews),b=Cb(g),w=[t.container.clientWidth,t.container.clientHeight],k=w[0],E=w[1],D=k/b.width,X=E/b.height,V=Math.min(X*d,D*d,1),t.area.transform.x=k/2-b.center.x*V,t.area.transform.y=E/2-b.center.y*V,W.next=12,t.area.zoom(V,0,0);case 12:case"end":return W.stop()}},a)})),Xf.apply(this,arguments)}var Ra=Object.freeze({__proto__:null,getBoundingBox:P2,simpleNodesOrder:F2,restrictor:Z2,accumulateOnCtrl:X2,selectableNodes:Q2,Selector:_b,selector:K2,showInputControl:W2,snapGrid:J2,zoomAt:ek});function Cv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Tv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function tk(a,t,r){return t=Ht(t),Ja(a,Db()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Db(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Db=function(){return!!a})()}var Mb=(function(a){function t(r){var s;return dt(this,t),s=tk(this,t,["area"]),Be(s,"nodeViews",new Map),Be(s,"connectionViews",new Map),Be(s,"elements",new Y2),Be(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!($n(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Nb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return na(t,a),ft(t,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new jb(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Tv({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var g=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:g}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Tv({id:c},m)})},resize:function(m){var g=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:g}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new q2({contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=rt(Te.mark(function l(c,d){var p;return Te.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=this.elements.get(c,d),!p){g.next=4;break}return g.next=4,this.emit({type:"render",data:p});case 4:case"end":return g.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=rt(Te.mark(function l(c,d,p){var m;return Te.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(m=this.nodeViews.get(c),!m){b.next=5;break}return b.next=4,m.resize(d,p);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=rt(Te.mark(function l(c,d){var p,m,g;return Te.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p=d.x,m=d.y,g=this.nodeViews.get(c),!g){w.next=6;break}return w.next=5,g.translate(p,m);case 5:return w.abrupt("return",w.sent);case 6:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Yo);const Nv=Object.freeze(Object.defineProperty({__proto__:null,Area:Nb,AreaExtensions:Ra,AreaPlugin:Mb,BaseAreaPlugin:Yo,Drag:Rh,NodeView:jb,Zoom:Tb,usePointerListener:Eb},Symbol.toStringTag,{value:"Module"}));function nk(a,t){for(;!{}.hasOwnProperty.call(a,t)&&(a=Ht(a))!==null;);return a}function Vo(){return Vo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,t,r){var s=nk(a,t);if(s){var l=Object.getOwnPropertyDescriptor(s,t);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Vo.apply(null,arguments)}function ak(a){if(Array.isArray(a))return a}function rk(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,p=[],m=!0,g=!1;try{if(c=(r=r.call(a)).next,t!==0)for(;!(m=(s=c.call(r)).done)&&(p.push(s.value),p.length!==t);m=!0);}catch(b){g=!0,l=b}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(g)throw l}}return p}}function ik(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fn(a,t){return ak(a)||rk(a,t)||kb(a,t)||ik()}function Ov(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Tf(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ov(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ov(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function sk(a){var t=null,r=null;function s(c){r&&c.removeConnectionView(r),t=null,r=null}function l(c){s(c),r="pseudo_".concat(ri())}return{isMounted:function(){return!!r},mount:l,render:function(d,p,m){var g=p.x,b=p.y,w=m.side==="output",k={x:g+(w?-3:3),y:b};if(!r)throw new Error("pseudo connection id wasn't generated");var E=w?Tf({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):Tf({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!t){var D=d.addConnectionView(E);t=D.element}t&&d.emit({type:"render",data:Tf({element:t,type:"connection",payload:E},w?{end:k}:{start:k})})},unmount:s}}function ok(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=lk(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function lk(a,t){if(a){if(typeof a=="string")return jv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jv(a,t):void 0}}function jv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function ck(a,t){var r=ok(t),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function Rb(a,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,t),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,js(Rb(a,t,c))),l}var zh=(function(){function a(){dt(this,a)}return ft(a,[{key:"setContext",value:function(r){this.context=r}}])})();function zb(a,t){var r=a.side==="output"&&t.side==="input",s=a.side==="input"&&t.side==="output",l=r?[a,t]:s?[t,a]:[],c=Fn(l,2),d=c[0],p=c[1];if(d&&p)return[d,p]}function uk(a,t){return!!zb(a,t)}function dk(a,t,r){var s=zb(a,t)||[null,null],l=Fn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:ri(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function fk(a,t){var r=t.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function hk(a,t){var r=a.nodeId,s=a.side,l=a.key;return t.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Kf(a,t){var r=a.map(function(s){var l=fk(s,t),c=l?.multipleConnections;return c?[]:hk(s,t)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void t.removeConnection(c)})}}}function Lh(a,t,r){return t=Ht(t),Ja(a,Lb()?Reflect.construct(t,[],Ht(a).constructor):t.apply(a,r))}function Lb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lb=function(){return!!a})()}var pk=(function(a){function t(r,s){var l;return dt(this,t),l=Lh(this,t),l.initial=r,l.params=s,l}return na(t,a),ft(t,[{key:"pick",value:(function(){var r=rt(Te.mark(function l(c,d){var p,m;return Te.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:p=c.socket,this.params.canMakeConnection(this.initial,p)&&(Kf([this.initial,p],d.editor).commit(),m=this.params.makeConnection(this.initial,p,d),this.drop(d,m?p:null,m));case 2:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Bh(this.params))}}])})(zh),mk=(function(a){function t(r,s,l){var c;dt(this,t),c=Lh(this,t),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(p){return p.nodeId===c.connection.source&&p.side==="output"&&p.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return na(t,a),ft(t,[{key:"init",value:(function(){var r=rt(Te.mark(function l(c){var d=this;return Te.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(g){g?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=rt(Te.mark(function l(c,d){var p,m,g,b,w,k;return Te.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:p=c.socket,m=c.event,this.initial&&!(p.side==="input"&&this.connection.target===p.nodeId&&this.connection.targetInput===p.key)?this.params.canMakeConnection(this.initial,p)&&(Kf([this.initial,p],d.editor).commit(),g=this.params.makeConnection(this.initial,p,d),b=g?p:null,this.drop(d,b,g)):m==="down"&&this.initial&&(Kf([this.initial,p],d.editor).commit(),w=this.params.makeConnection(this.initial,p,d),k=w?null:p,this.drop(d,k,w));case 2:case"end":return D.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new Bh(this.params))}}])})(zh),Bh=(function(a){function t(r){var s;return dt(this,t),s=Lh(this,t),s.params=r,s}return na(t,a),ft(t,[{key:"pick",value:(function(){var r=rt(Te.mark(function l(c,d){var p,m,g,b;return Te.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=c.socket,m=c.event,m==="down"){k.next=3;break}return k.abrupt("return");case 3:if(p.side!=="input"){k.next=11;break}if(g=d.editor.getConnections().find(function(E){return E.target===p.nodeId&&E.targetInput===p.key}),!g){k.next=11;break}return b=new mk(g,this.params,d),k.next=9,b.init(d);case 9:return this.context.switchTo(b),k.abrupt("return");case 11:return k.next=13,d.scope.emit({type:"connectionpick",data:{socket:p}});case 13:if(!k.sent){k.next=17;break}this.context.switchTo(new pk(p,this.params)),k.next=18;break;case 17:this.drop(d);case 18:case"end":return k.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(zh),gk=(function(){function a(t){dt(this,a);var r=t?.canMakeConnection||uk,s=t?.makeConnection||dk;this.switchTo(new Bh({canMakeConnection:r,makeConnection:s}))}return ft(a,[{key:"pick",value:(function(){var t=rt(Te.mark(function s(l,c){return Te.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.currentState.pick(l,c);case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function yk(){return function(){return new gk}}var vk=Object.freeze({__proto__:null,setup:yk}),bk=Object.freeze({__proto__:null,classic:vk});function wk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=Sk(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function Sk(a,t){if(a){if(typeof a=="string")return Av(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Av(a,t):void 0}}function Av(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function xk(a,t,r){return t=Ht(t),Ja(a,Bb()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Bb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bb=function(){return!!a})()}function kk(a,t,r,s){var l=Vo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var Ek=(function(a){function t(){var r;return dt(this,t),r=xk(this,t,["connection"]),Be(r,"presets",[]),Be(r,"currentFlow",null),Be(r,"preudoconnection",sk({isPseudo:!0})),Be(r,"socketsCache",new Map),r}return na(t,a),ft(t,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=wk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=d(s);if(p)return p}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=rt(Te.mark(function l(c,d){var p,m,g;return Te.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=Rb(c.clientX,c.clientY),g=ck(this.socketsCache,m),!g){w.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(g),!this.currentFlow){w.next=11;break}return w.next=10,this.currentFlow.pick({socket:g,event:d},p);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:w.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(p);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;kk(t,"setParent",this)([s]),this.areaPlugin=this.parentScope(Yo),this.editor=this.areaPlugin.parentScope(ai);var c=function(p){l.pick(p,"down")};this.addPipe(function(d){if(!d||$n(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var p=d.data.element;p.addEventListener("pointerdown",c),l.socketsCache.set(p,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(Os);function Ck(a,t){var r=Fn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],p=d.x,m=d.y,g=Math.abs(c-m),b=l+Math.max(g/2,Math.abs(p-l))*t,w=p-Math.max(g/2,Math.abs(p-l))*t;return"M ".concat(l," ").concat(c," C ").concat(b," ").concat(c," ").concat(w," ").concat(m," ").concat(p," ").concat(m)}function Tk(a,t,r){var s=Fn(a,2),l=s[0],c=l.x,d=l.y,p=s[1],m=p.x,g=p.y,b=g>d?1:-1,w=r+Math.abs(c-m)/(r/2),k=(c+m)/2,E=d-b*w,D=(g-d)*t;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+w," ").concat(d,`
        `).concat(c+w," ").concat(E-D,`
        `).concat(k," ").concat(E,`
        C `).concat(m-w," ").concat(E+D,`
        `).concat(m-w," ").concat(g,`
        `).concat(m," ").concat(g,`
    `)}function Nk(a,t){return Qf.apply(this,arguments)}function Qf(){return Qf=rt(Te.mark(function a(t,r){var s,l,c,d,p;return Te.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.offsetParent){g.next=5;break}return g.next=3,new Promise(function(b){return setTimeout(b,0)});case 3:g.next=0;break;case 5:if(s=t.offsetLeft,l=t.offsetTop,c=t.offsetParent,c){g.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=t.offsetWidth,p=t.offsetHeight,g.abrupt("return",{x:s+d/2,y:l+p/2});case 14:case"end":return g.stop()}},a)})),Qf.apply(this,arguments)}var Ok=(function(){function a(){dt(this,a),Be(this,"listeners",new Set)}return ft(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),jk=(function(){function a(){dt(this,a),Be(this,"elements",new Map)}return ft(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(p){return p.side===r.side&&p.nodeId===r.nodeId&&p.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(js(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),Ak=(function(){function a(){dt(this,a),Be(this,"sockets",new jk),Be(this,"emitter",new Ok),Be(this,"area",null)}return ft(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Yo),this.area.addPipe((function(){var l=rt(Te.mark(function c(d){var p,m,g,b,w,k,E,D,X,V,ee;return Te.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){I.next=8;break}return p=d.data,m=p.nodeId,g=p.key,b=p.side,w=p.element,I.next=4,s.calculatePosition(m,b,g,w);case 4:k=I.sent,k&&(s.sockets.add({nodeId:m,key:g,side:b,element:w,position:k}),s.emitter.emit({nodeId:m,key:g,side:b})),I.next=24;break;case 8:if(d.type!=="unmount"){I.next=12;break}s.sockets.remove(d.data.element),I.next=24;break;case 12:if(d.type!=="nodetranslated"){I.next=16;break}s.emitter.emit({nodeId:d.data.id}),I.next=24;break;case 16:if(d.type!=="noderesized"){I.next=23;break}return E=d.data.id,I.next=20,Promise.all(s.sockets.snapshot().filter(function(q){return q.nodeId===d.data.id&&q.side==="output"}).map((function(){var q=rt(Te.mark(function ve(xe){var $,me,ce,ge;return Te.wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return $=xe.side,me=xe.key,ce=xe.element,_e.next=3,s.calculatePosition(E,$,me,ce);case 3:ge=_e.sent,ge&&(xe.position=ge);case 5:case"end":return _e.stop()}},ve)}));return function(ve){return q.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),I.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(D=d.data.payload,X=D.source,V=D.target,ee=X||V,s.emitter.emit({nodeId:ee}));case 24:return I.abrupt("return",d);case 25:case"end":return I.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,p=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var g,b=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!b)return;var w=b.x,k=b.y,E=(g=d.area)===null||g===void 0?void 0:g.nodeViews.get(r);E&&c({x:w+E.position.x,y:k+E.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),p}}])})();function _k(a,t,r){return t=Ht(t),Ja(a,Ib()?Reflect.construct(t,[],Ht(a).constructor):t.apply(a,r))}function Ib(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ib=function(){return!!a})()}var Dk=(function(a){function t(r){var s;return dt(this,t),s=_k(this,t),s.props=r,s}return na(t,a),ft(t,[{key:"calculatePosition",value:(function(){var r=rt(Te.mark(function l(c,d,p,m){var g,b,w,k;return Te.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(w=(g=this.area)===null||g===void 0?void 0:g.nodeViews.get(c),w!=null&&w.element){D.next=3;break}return D.abrupt("return",null);case 3:return D.next=5,Nk(m,w.element);case 5:if(k=D.sent,!((b=this.props)!==null&&b!==void 0&&b.offset)){D.next=8;break}return D.abrupt("return",this.props.offset(k,c,d,p));case 8:return D.abrupt("return",{x:k.x+12*(d==="input"?-1:1),y:k.y});case 9:case"end":return D.stop()}},l,this)}));function s(l,c,d,p){return r.apply(this,arguments)}return s})()}])})(Ak);function Mk(a){return new Dk(a)}function Un(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}var ta=function(){return ta=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},ta.apply(this,arguments)};function _c(a,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,c;s<l;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return a.concat(c||Array.prototype.slice.call(t))}var Xt="-ms-",Bo="-moz-",Nt="-webkit-",$b="comm",Hc="rule",Ih="decl",Rk="@import",Ub="@keyframes",zk="@layer",Hb=Math.abs,$h=String.fromCharCode,Wf=Object.assign;function Lk(a,t){return Mn(a,0)^45?(((t<<2^Mn(a,0))<<2^Mn(a,1))<<2^Mn(a,2))<<2^Mn(a,3):0}function Vb(a){return a.trim()}function Sr(a,t){return(a=t.exec(a))?a[0]:a}function at(a,t,r){return a.replace(t,r)}function bc(a,t,r){return a.indexOf(t,r)}function Mn(a,t){return a.charCodeAt(t)|0}function xs(a,t,r){return a.slice(t,r)}function Fa(a){return a.length}function Gb(a){return a.length}function _o(a,t){return t.push(a),a}function Bk(a,t){return a.map(t).join("")}function _v(a,t){return a.filter(function(r){return!Sr(r,t)})}var Vc=1,ks=1,qb=0,Ca=0,Sn=0,As="";function Gc(a,t,r,s,l,c,d,p){return{value:a,root:t,parent:r,type:s,props:l,children:c,line:Vc,column:ks,length:d,return:"",siblings:p}}function Kr(a,t){return Wf(Gc("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},t)}function fs(a){for(;a.root;)a=Kr(a.root,{children:[a]});_o(a,a.siblings)}function Ik(){return Sn}function $k(){return Sn=Ca>0?Mn(As,--Ca):0,ks--,Sn===10&&(ks=1,Vc--),Sn}function Ba(){return Sn=Ca<qb?Mn(As,Ca++):0,ks++,Sn===10&&(ks=1,Vc++),Sn}function ji(){return Mn(As,Ca)}function wc(){return Ca}function qc(a,t){return xs(As,a,t)}function Jf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Uk(a){return Vc=ks=1,qb=Fa(As=a),Ca=0,[]}function Hk(a){return As="",a}function Nf(a){return Vb(qc(Ca-1,eh(a===91?a+2:a===40?a+1:a)))}function Vk(a){for(;(Sn=ji())&&Sn<33;)Ba();return Jf(a)>2||Jf(Sn)>3?"":" "}function Gk(a,t){for(;--t&&Ba()&&!(Sn<48||Sn>102||Sn>57&&Sn<65||Sn>70&&Sn<97););return qc(a,wc()+(t<6&&ji()==32&&Ba()==32))}function eh(a){for(;Ba();)switch(Sn){case a:return Ca;case 34:case 39:a!==34&&a!==39&&eh(Sn);break;case 40:a===41&&eh(a);break;case 92:Ba();break}return Ca}function qk(a,t){for(;Ba()&&a+Sn!==57;)if(a+Sn===84&&ji()===47)break;return"/*"+qc(t,Ca-1)+"*"+$h(a===47?a:Ba())}function Yk(a){for(;!Jf(ji());)Ba();return qc(a,Ca)}function Pk(a){return Hk(Sc("",null,null,null,[""],a=Uk(a),0,[0],a))}function Sc(a,t,r,s,l,c,d,p,m){for(var g=0,b=0,w=d,k=0,E=0,D=0,X=1,V=1,ee=1,W=0,I="",q=l,ve=c,xe=s,$=I;V;)switch(D=W,W=Ba()){case 40:if(D!=108&&Mn($,w-1)==58){bc($+=at(Nf(W),"&","&\f"),"&\f",Hb(g?p[g-1]:0))!=-1&&(ee=-1);break}case 34:case 39:case 91:$+=Nf(W);break;case 9:case 10:case 13:case 32:$+=Vk(D);break;case 92:$+=Gk(wc()-1,7);continue;case 47:switch(ji()){case 42:case 47:_o(Fk(qk(Ba(),wc()),t,r,m),m);break;default:$+="/"}break;case 123*X:p[g++]=Fa($)*ee;case 125*X:case 59:case 0:switch(W){case 0:case 125:V=0;case 59+b:ee==-1&&($=at($,/\f/g,"")),E>0&&Fa($)-w&&_o(E>32?Mv($+";",s,r,w-1,m):Mv(at($," ","")+";",s,r,w-2,m),m);break;case 59:$+=";";default:if(_o(xe=Dv($,t,r,g,b,l,p,I,q=[],ve=[],w,c),c),W===123)if(b===0)Sc($,t,xe,xe,q,c,w,p,ve);else switch(k===99&&Mn($,3)===110?100:k){case 100:case 108:case 109:case 115:Sc(a,xe,xe,s&&_o(Dv(a,xe,xe,0,0,l,p,I,l,q=[],w,ve),ve),l,ve,w,p,s?q:ve);break;default:Sc($,xe,xe,xe,[""],ve,0,p,ve)}}g=b=E=0,X=ee=1,I=$="",w=d;break;case 58:w=1+Fa($),E=D;default:if(X<1){if(W==123)--X;else if(W==125&&X++==0&&$k()==125)continue}switch($+=$h(W),W*X){case 38:ee=b>0?1:($+="\f",-1);break;case 44:p[g++]=(Fa($)-1)*ee,ee=1;break;case 64:ji()===45&&($+=Nf(Ba())),k=ji(),b=w=Fa(I=$+=Yk(wc())),W++;break;case 45:D===45&&Fa($)==2&&(X=0)}}return c}function Dv(a,t,r,s,l,c,d,p,m,g,b,w){for(var k=l-1,E=l===0?c:[""],D=Gb(E),X=0,V=0,ee=0;X<s;++X)for(var W=0,I=xs(a,k+1,k=Hb(V=d[X])),q=a;W<D;++W)(q=Vb(V>0?E[W]+" "+I:at(I,/&\f/g,E[W])))&&(m[ee++]=q);return Gc(a,t,r,l===0?Hc:p,m,g,b,w)}function Fk(a,t,r,s){return Gc(a,t,r,$b,$h(Ik()),xs(a,2,-2),0,s)}function Mv(a,t,r,s,l){return Gc(a,t,r,Ih,xs(a,0,s),xs(a,s+1,-1),s,l)}function Yb(a,t,r){switch(Lk(a,t)){case 5103:return Nt+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Nt+a+a;case 4789:return Bo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Nt+a+Bo+a+Xt+a+a;case 5936:switch(Mn(a,t+11)){case 114:return Nt+a+Xt+at(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Nt+a+Xt+at(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Nt+a+Xt+at(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Nt+a+Xt+a+a;case 6165:return Nt+a+Xt+"flex-"+a+a;case 5187:return Nt+a+at(a,/(\w+).+(:[^]+)/,Nt+"box-$1$2"+Xt+"flex-$1$2")+a;case 5443:return Nt+a+Xt+"flex-item-"+at(a,/flex-|-self/g,"")+(Sr(a,/flex-|baseline/)?"":Xt+"grid-row-"+at(a,/flex-|-self/g,""))+a;case 4675:return Nt+a+Xt+"flex-line-pack"+at(a,/align-content|flex-|-self/g,"")+a;case 5548:return Nt+a+Xt+at(a,"shrink","negative")+a;case 5292:return Nt+a+Xt+at(a,"basis","preferred-size")+a;case 6060:return Nt+"box-"+at(a,"-grow","")+Nt+a+Xt+at(a,"grow","positive")+a;case 4554:return Nt+at(a,/([^-])(transform)/g,"$1"+Nt+"$2")+a;case 6187:return at(at(at(a,/(zoom-|grab)/,Nt+"$1"),/(image-set)/,Nt+"$1"),a,"")+a;case 5495:case 3959:return at(a,/(image-set\([^]*)/,Nt+"$1$`$1");case 4968:return at(at(a,/(.+:)(flex-)?(.*)/,Nt+"box-pack:$3"+Xt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Nt+a+a;case 4200:if(!Sr(a,/flex-|baseline/))return Xt+"grid-column-align"+xs(a,t)+a;break;case 2592:case 3360:return Xt+at(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return t=l,Sr(s.props,/grid-\w+-end/)})?~bc(a+(r=r[t].value),"span",0)?a:Xt+at(a,"-start","")+a+Xt+"grid-row-span:"+(~bc(r,"span",0)?Sr(r,/\d+/):+Sr(r,/\d+/)-+Sr(a,/\d+/))+";":Xt+at(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return Sr(s.props,/grid-\w+-start/)})?a:Xt+at(at(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return at(a,/(.+)-inline(.+)/,Nt+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Fa(a)-1-t>6)switch(Mn(a,t+1)){case 109:if(Mn(a,t+4)!==45)break;case 102:return at(a,/(.+:)(.+)-([^]+)/,"$1"+Nt+"$2-$3$1"+Bo+(Mn(a,t+3)==108?"$3":"$2-$3"))+a;case 115:return~bc(a,"stretch",0)?Yb(at(a,"stretch","fill-available"),t,r)+a:a}break;case 5152:case 5920:return at(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,p,m,g){return Xt+l+":"+c+g+(d?Xt+l+"-span:"+(p?m:+m-+c)+g:"")+a});case 4949:if(Mn(a,t+6)===121)return at(a,":",":"+Nt)+a;break;case 6444:switch(Mn(a,Mn(a,14)===45?18:11)){case 120:return at(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Nt+(Mn(a,14)===45?"inline-":"")+"box$3$1"+Nt+"$2$3$1"+Xt+"$2box$3")+a;case 100:return at(a,":",":"+Xt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return at(a,"scroll-","scroll-snap-")+a}return a}function Dc(a,t){for(var r="",s=0;s<a.length;s++)r+=t(a[s],s,a,t)||"";return r}function Zk(a,t,r,s){switch(a.type){case zk:if(a.children.length)break;case Rk:case Ih:return a.return=a.return||a.value;case $b:return"";case Ub:return a.return=a.value+"{"+Dc(a.children,s)+"}";case Hc:if(!Fa(a.value=a.props.join(",")))return""}return Fa(r=Dc(a.children,s))?a.return=a.value+"{"+r+"}":""}function Xk(a){var t=Gb(a);return function(r,s,l,c){for(var d="",p=0;p<t;p++)d+=a[p](r,s,l,c)||"";return d}}function Kk(a){return function(t){t.root||(t=t.return)&&a(t)}}function Qk(a,t,r,s){if(a.length>-1&&!a.return)switch(a.type){case Ih:a.return=Yb(a.value,a.length,r);return;case Ub:return Dc([Kr(a,{value:at(a.value,"@","@"+Nt)})],s);case Hc:if(a.length)return Bk(r=a.props,function(l){switch(Sr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":fs(Kr(a,{props:[at(l,/:(read-\w+)/,":"+Bo+"$1")]})),fs(Kr(a,{props:[l]})),Wf(a,{props:_v(r,s)});break;case"::placeholder":fs(Kr(a,{props:[at(l,/:(plac\w+)/,":"+Nt+"input-$1")]})),fs(Kr(a,{props:[at(l,/:(plac\w+)/,":"+Bo+"$1")]})),fs(Kr(a,{props:[at(l,/:(plac\w+)/,Xt+"input-$1")]})),fs(Kr(a,{props:[l]})),Wf(a,{props:_v(r,s)});break}return""})}}var Wk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ua={},Es=typeof process<"u"&&ua!==void 0&&(ua.REACT_APP_SC_ATTR||ua.SC_ATTR)||"data-styled",Pb="active",Fb="data-styled-version",Yc="6.1.19",Uh=`/*!sc*/
`,Mc=typeof window<"u"&&typeof document<"u",Jk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ua!==void 0&&ua.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ua.REACT_APP_SC_DISABLE_SPEEDY!==""?ua.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ua.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ua!==void 0&&ua.SC_DISABLE_SPEEDY!==void 0&&ua.SC_DISABLE_SPEEDY!==""&&ua.SC_DISABLE_SPEEDY!=="false"&&ua.SC_DISABLE_SPEEDY),Pc=Object.freeze([]),Cs=Object.freeze({});function eE(a,t,r){return r===void 0&&(r=Cs),a.theme!==r.theme&&a.theme||t||r.theme}var Zb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),tE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,nE=/(^-|-$)/g;function Rv(a){return a.replace(tE,"-").replace(nE,"")}var aE=/(a)(d)/gi,oc=52,zv=function(a){return String.fromCharCode(a+(a>25?39:97))};function th(a){var t,r="";for(t=Math.abs(a);t>oc;t=t/oc|0)r=zv(t%oc)+r;return(zv(t%oc)+r).replace(aE,"$1-$2")}var Of,Xb=5381,ys=function(a,t){for(var r=t.length;r;)a=33*a^t.charCodeAt(--r);return a},Kb=function(a){return ys(Xb,a)};function rE(a){return th(Kb(a)>>>0)}function iE(a){return a.displayName||a.name||"Component"}function jf(a){return typeof a=="string"&&!0}var Qb=typeof Symbol=="function"&&Symbol.for,Wb=Qb?Symbol.for("react.memo"):60115,sE=Qb?Symbol.for("react.forward_ref"):60112,oE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Jb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},cE=((Of={})[sE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Of[Wb]=Jb,Of);function Lv(a){return("type"in(t=a)&&t.type.$$typeof)===Wb?Jb:"$$typeof"in a?cE[a.$$typeof]:oE;var t}var uE=Object.defineProperty,dE=Object.getOwnPropertyNames,Bv=Object.getOwnPropertySymbols,fE=Object.getOwnPropertyDescriptor,hE=Object.getPrototypeOf,Iv=Object.prototype;function ew(a,t,r){if(typeof t!="string"){if(Iv){var s=hE(t);s&&s!==Iv&&ew(a,s,r)}var l=dE(t);Bv&&(l=l.concat(Bv(t)));for(var c=Lv(a),d=Lv(t),p=0;p<l.length;++p){var m=l[p];if(!(m in lE||r&&r[m]||d&&m in d||c&&m in c)){var g=fE(t,m);try{uE(a,m,g)}catch{}}}}return a}function Ts(a){return typeof a=="function"}function Hh(a){return typeof a=="object"&&"styledComponentId"in a}function Ti(a,t){return a&&t?"".concat(a," ").concat(t):a||t||""}function $v(a,t){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Go(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function nh(a,t,r){if(r===void 0&&(r=!1),!r&&!Go(a)&&!Array.isArray(a))return t;if(Array.isArray(t))for(var s=0;s<t.length;s++)a[s]=nh(a[s],t[s]);else if(Go(t))for(var s in t)a[s]=nh(a[s],t[s]);return a}function Vh(a,t){Object.defineProperty(a,"toString",{value:t})}function Po(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var pE=(function(){function a(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return a.prototype.indexOfGroup=function(t){for(var r=0,s=0;s<t;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;t>=c;)if((c<<=1)<0)throw Po(16,"".concat(t));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var p=this.indexOfGroup(t+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(p,r[d])&&(this.groupSizes[t]++,p++)},a.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],s=this.indexOfGroup(t),l=s+r;this.groupSizes[t]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var s=this.groupSizes[t],l=this.indexOfGroup(t),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Uh);return r},a})(),xc=new Map,Rc=new Map,kc=1,lc=function(a){if(xc.has(a))return xc.get(a);for(;Rc.has(kc);)kc++;var t=kc++;return xc.set(a,t),Rc.set(t,a),t},mE=function(a,t){kc=t+1,xc.set(a,t),Rc.set(t,a)},gE="style[".concat(Es,"][").concat(Fb,'="').concat(Yc,'"]'),yE=new RegExp("^".concat(Es,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),vE=function(a,t,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(t,s)},bE=function(a,t){for(var r,s=((r=t.textContent)!==null&&r!==void 0?r:"").split(Uh),l=[],c=0,d=s.length;c<d;c++){var p=s[c].trim();if(p){var m=p.match(yE);if(m){var g=0|parseInt(m[1],10),b=m[2];g!==0&&(mE(b,g),vE(a,b,m[3]),a.getTag().insertRules(g,l)),l.length=0}else l.push(p)}}},Uv=function(a){for(var t=document.querySelectorAll(gE),r=0,s=t.length;r<s;r++){var l=t[r];l&&l.getAttribute(Es)!==Pb&&(bE(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function wE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var tw=function(a){var t=document.head,r=a||t,s=document.createElement("style"),l=(function(p){var m=Array.from(p.querySelectorAll("style[".concat(Es,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(Es,Pb),s.setAttribute(Fb,Yc);var d=wE();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},SE=(function(){function a(t){this.element=tw(t),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw Po(17)})(this.element),this.length=0}return a.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},a.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},a})(),xE=(function(){function a(t){this.element=tw(t),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[t]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},a.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},a})(),kE=(function(){function a(t){this.rules=[],this.length=0}return a.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},a.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},a.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},a})(),Hv=Mc,EE={isServer:!Mc,useCSSOMInjection:!Jk},nw=(function(){function a(t,r,s){t===void 0&&(t=Cs),r===void 0&&(r={});var l=this;this.options=ta(ta({},EE),t),this.gs=r,this.names=new Map(s),this.server=!!t.isServer,!this.server&&Mc&&Hv&&(Hv=!1,Uv(this)),Vh(this,function(){return(function(c){for(var d=c.getTag(),p=d.length,m="",g=function(w){var k=(function(ee){return Rc.get(ee)})(w);if(k===void 0)return"continue";var E=c.names.get(k),D=d.getGroup(w);if(E===void 0||!E.size||D.length===0)return"continue";var X="".concat(Es,".g").concat(w,'[id="').concat(k,'"]'),V="";E!==void 0&&E.forEach(function(ee){ee.length>0&&(V+="".concat(ee,","))}),m+="".concat(D).concat(X,'{content:"').concat(V,'"}').concat(Uh)},b=0;b<p;b++)g(b);return m})(l)})}return a.registerId=function(t){return lc(t)},a.prototype.rehydrate=function(){!this.server&&Mc&&Uv(this)},a.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new a(ta(ta({},this.options),t),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(t=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new kE(l):s?new SE(l):new xE(l)})(this.options),new pE(t)));var t},a.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},a.prototype.registerName=function(t,r){if(lc(t),this.names.has(t))this.names.get(t).add(r);else{var s=new Set;s.add(r),this.names.set(t,s)}},a.prototype.insertRules=function(t,r,s){this.registerName(t,r),this.getTag().insertRules(lc(t),s)},a.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},a.prototype.clearRules=function(t){this.getTag().clearGroup(lc(t)),this.clearNames(t)},a.prototype.clearTag=function(){this.tag=void 0},a})(),CE=/&/g,TE=/^\s*\/\/.*$/gm;function aw(a,t){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(s){return"".concat(t," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=aw(r.children,t)),r})}function NE(a){var t,r,s,l=Cs,c=l.options,d=c===void 0?Cs:c,p=l.plugins,m=p===void 0?Pc:p,g=function(k,E,D){return D.startsWith(r)&&D.endsWith(r)&&D.replaceAll(r,"").length>0?".".concat(t):k},b=m.slice();b.push(function(k){k.type===Hc&&k.value.includes("&")&&(k.props[0]=k.props[0].replace(CE,r).replace(s,g))}),d.prefix&&b.push(Qk),b.push(Zk);var w=function(k,E,D,X){E===void 0&&(E=""),D===void 0&&(D=""),X===void 0&&(X="&"),t=X,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var V=k.replace(TE,""),ee=Pk(D||E?"".concat(D," ").concat(E," { ").concat(V," }"):V);d.namespace&&(ee=aw(ee,d.namespace));var W=[];return Dc(ee,Xk(b.concat(Kk(function(I){return W.push(I)})))),W};return w.hash=m.length?m.reduce(function(k,E){return E.name||Po(15),ys(k,E.name)},Xb).toString():"",w}var OE=new nw,ah=NE(),rw=Ea.createContext({shouldForwardProp:void 0,styleSheet:OE,stylis:ah});rw.Consumer;Ea.createContext(void 0);function Vv(){return x.useContext(rw)}var jE=(function(){function a(t,r){var s=this;this.inject=function(l,c){c===void 0&&(c=ah);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,Vh(this,function(){throw Po(12,String(s.name))})}return a.prototype.getName=function(t){return t===void 0&&(t=ah),this.name+t.hash},a})(),AE=function(a){return a>="A"&&a<="Z"};function Gv(a){for(var t="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;AE(s)?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var iw=function(a){return a==null||a===!1||a===""},sw=function(a){var t,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!iw(c)&&(Array.isArray(c)&&c.isCss||Ts(c)?s.push("".concat(Gv(l),":"),c,";"):Go(c)?s.push.apply(s,_c(_c(["".concat(l," {")],sw(c),!1),["}"],!1)):s.push("".concat(Gv(l),": ").concat((t=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in Wk||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function Ai(a,t,r,s){if(iw(a))return[];if(Hh(a))return[".".concat(a.styledComponentId)];if(Ts(a)){if(!Ts(c=a)||c.prototype&&c.prototype.isReactComponent||!t)return[a];var l=a(t);return Ai(l,t,r,s)}var c;return a instanceof jE?r?(a.inject(r,s),[a.getName(s)]):[a]:Go(a)?sw(a):Array.isArray(a)?Array.prototype.concat.apply(Pc,a.map(function(d){return Ai(d,t,r,s)})):[a.toString()]}function _E(a){for(var t=0;t<a.length;t+=1){var r=a[t];if(Ts(r)&&!Hh(r))return!1}return!0}var DE=Kb(Yc),ME=(function(){function a(t,r,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&_E(t),this.componentId=r,this.baseHash=ys(DE,r),this.baseStyle=s,nw.registerId(r)}return a.prototype.generateAndInjectStyles=function(t,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=Ti(l,this.staticRulesId);else{var c=$v(Ai(this.rules,t,r,s)),d=th(ys(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var p=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,p)}l=Ti(l,d),this.staticRulesId=d}else{for(var m=ys(this.baseHash,s.hash),g="",b=0;b<this.rules.length;b++){var w=this.rules[b];if(typeof w=="string")g+=w;else if(w){var k=$v(Ai(w,t,r,s));m=ys(m,k+b),g+=k}}if(g){var E=th(m>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(g,".".concat(E),void 0,this.componentId)),l=Ti(l,E)}}return l},a})(),ow=Ea.createContext(void 0);ow.Consumer;var Af={};function RE(a,t,r){var s=Hh(a),l=a,c=!jf(a),d=t.attrs,p=d===void 0?Pc:d,m=t.componentId,g=m===void 0?(function(q,ve){var xe=typeof q!="string"?"sc":Rv(q);Af[xe]=(Af[xe]||0)+1;var $="".concat(xe,"-").concat(rE(Yc+xe+Af[xe]));return ve?"".concat(ve,"-").concat($):$})(t.displayName,t.parentComponentId):m,b=t.displayName,w=b===void 0?(function(q){return jf(q)?"styled.".concat(q):"Styled(".concat(iE(q),")")})(a):b,k=t.displayName&&t.componentId?"".concat(Rv(t.displayName),"-").concat(t.componentId):t.componentId||g,E=s&&l.attrs?l.attrs.concat(p).filter(Boolean):p,D=t.shouldForwardProp;if(s&&l.shouldForwardProp){var X=l.shouldForwardProp;if(t.shouldForwardProp){var V=t.shouldForwardProp;D=function(q,ve){return X(q,ve)&&V(q,ve)}}else D=X}var ee=new ME(r,k,s?l.componentStyle:void 0);function W(q,ve){return(function(xe,$,me){var ce=xe.attrs,ge=xe.componentStyle,Re=xe.defaultProps,_e=xe.foldedComponentIds,Je=xe.styledComponentId,tt=xe.target,Qe=Ea.useContext(ow),Y=Vv(),he=xe.shouldForwardProp||Y.shouldForwardProp,ye=eE($,Qe,Re)||Cs,ze=(function(Q,pe,Ee){for(var Ie,Ye=ta(ta({},pe),{className:void 0,theme:Ee}),Rt=0;Rt<Q.length;Rt+=1){var Yt=Ts(Ie=Q[Rt])?Ie(Ye):Ie;for(var It in Yt)Ye[It]=It==="className"?Ti(Ye[It],Yt[It]):It==="style"?ta(ta({},Ye[It]),Yt[It]):Yt[It]}return pe.className&&(Ye.className=Ti(Ye.className,pe.className)),Ye})(ce,$,ye),J=ze.as||tt,v={};for(var N in ze)ze[N]===void 0||N[0]==="$"||N==="as"||N==="theme"&&ze.theme===ye||(N==="forwardedAs"?v.as=ze.forwardedAs:he&&!he(N,J)||(v[N]=ze[N]));var _=(function(Q,pe){var Ee=Vv(),Ie=Q.generateAndInjectStyles(pe,Ee.styleSheet,Ee.stylis);return Ie})(ge,ze),M=Ti(_e,Je);return _&&(M+=" "+_),ze.className&&(M+=" "+ze.className),v[jf(J)&&!Zb.has(J)?"class":"className"]=M,me&&(v.ref=me),x.createElement(J,v)})(I,q,ve)}W.displayName=w;var I=Ea.forwardRef(W);return I.attrs=E,I.componentStyle=ee,I.displayName=w,I.shouldForwardProp=D,I.foldedComponentIds=s?Ti(l.foldedComponentIds,l.styledComponentId):"",I.styledComponentId=k,I.target=s?l.target:a,Object.defineProperty(I,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(q){this._foldedDefaultProps=s?(function(ve){for(var xe=[],$=1;$<arguments.length;$++)xe[$-1]=arguments[$];for(var me=0,ce=xe;me<ce.length;me++)nh(ve,ce[me],!0);return ve})({},l.defaultProps,q):q}}),Vh(I,function(){return".".concat(I.styledComponentId)}),c&&ew(I,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),I}function qv(a,t){for(var r=[a[0]],s=0,l=t.length;s<l;s+=1)r.push(t[s],a[s+1]);return r}var Yv=function(a){return Object.assign(a,{isCss:!0})};function Gh(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Ts(a)||Go(a))return Yv(Ai(qv(Pc,_c([a],t,!0))));var s=a;return t.length===0&&s.length===1&&typeof s[0]=="string"?Ai(s):Yv(Ai(qv(s,t)))}function rh(a,t,r){if(r===void 0&&(r=Cs),!t)throw Po(1,t);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(t,r,Gh.apply(void 0,_c([l],c,!1)))};return s.attrs=function(l){return rh(a,t,ta(ta({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return rh(a,t,ta(ta({},r),l))},s}var lw=function(a){return rh(RE,a)},Yn=lw;Zb.forEach(function(a){Yn[a]=lw(a)});function _i(){return _i=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},_i.apply(null,arguments)}function zE(a,t){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(t.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function qh(a,t){if(a==null)return{};var r,s,l=zE(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function LE(a){var t=a?.createRoot,r=new WeakMap;function s(d){var p=r.get(d);if(p)return p;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var p=r.get(d);p&&(p.remove(),r.delete(d))}if(t){var c=new WeakMap;return{mount:function(p,m){var g,b=s(m),w=c.get(b);return w||(w=t(b),c.set(b,w)),w.render(p),(g=b.firstElementChild)!==null&&g!==void 0?g:b},unmount:function(p){var m=s(p),g=c.get(m);g&&(g.unmount(),c.delete(m)),l(p)}}}return{mount:function(p,m){var g=s(m);if("render"in nv&&typeof Jr.render=="function"){var b=Jr.render(p,g);return b||g}throw new Error("ReactDOM.render is not available")},unmount:function(p){var m=s(p);if("unmountComponentAtNode"in nv&&typeof Jr.unmountComponentAtNode=="function")Jr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(p)}}}function BE(a){var t=a.children,r=a.rendered;return x.useEffect(function(){r()}),t}function IE(){var a=x.useRef(!1);return x.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Jr.flushSync(r)}):r()}}}var cw=x.createContext({start:null,end:null,path:null});function $E(a){var t=a.children,r=x.useState(null),s=Fn(r,2),l=s[0],c=s[1],d=x.useState(null),p=Fn(d,2),m=p[0],g=p[1],b=x.useState(null),w=Fn(b,2),k=w[0],E=w[1],D="x"in a.start?a.start:l,X="x"in a.end?a.end:m,V=IE();return x.useEffect(function(){var ee=typeof a.start=="function"&&a.start(function(I){V.apply(function(){c(I)})}),W=typeof a.end=="function"&&a.end(function(I){V.apply(function(){g(I)})});return function(){ee&&ee(),W&&W()}},[]),x.useEffect(function(){D&&X&&a.path(D,X).then(function(ee){V.apply(function(){E(ee)})})},[D,X]),x.createElement(cw.Provider,{value:{start:D,end:X,path:k}},t)}function uw(){return x.useContext(cw)}var Pv,Fv,UE=Yn.svg(Pv||(Pv=Un([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),HE=Yn.path(Fv||(Fv=Un([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function dw(a){var t=uw(),r=t.path;return r?x.createElement(UE,{"data-testid":"connection"},x.createElement(HE,{styles:a.styles,d:r})):null}function VE(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=GE(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function GE(a,t){if(a){if(typeof a=="string")return Zv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zv(a,t):void 0}}function Zv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function qE(a){for(var t=new a.constructor(a.type),r=t;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=VE(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=t[d];typeof p!="function"&&Object.defineProperty(t,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return t}var YE="__reactContainer$";function PE(a){for(var t=a;t;){if(t._reactRootContainer||Object.keys(t).some(function(r){return r.startsWith(YE)}))return t;t=t.parentElement}}function Xv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Kv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Xv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function fw(a,t){return{start:function(s){var l=Kv({},t(s));function c(p){var m=Kv({},t(p)),g=m.x-l.x,b=m.y-l.y;l=m,a(g,b)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function FE(a,t){x.useEffect(function(){var r=function(c){if(!t){var d=PE(c.target),p=x.version.startsWith("16")?document:d;p&&(c.stopPropagation(),p.dispatchEvent(qE(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,t])}var Qv,ZE=Yn.input(Qv||(Qv=Un([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function ih(a){var t=x.useState(a.data.value),r=Fn(t,2),s=r[0],l=r[1],c=x.useRef(null);return FE(c),x.useEffect(function(){l(a.data.value)},[a.data.value]),x.createElement(ZE,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(p){var m=a.data.type==="number"?+p.target.value:p.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var sh="rgba(110,136,255,0.8)",hw="#ffd92c",Za=24,xr=6,pw="#96b38a",mw=180,XE=Object.freeze({__proto__:null,$nodecolor:sh,$nodecolorselected:hw,$socketsize:Za,$socketmargin:xr,$socketcolor:pw,$nodewidth:mw}),KE=["init","unmount"];function Yh(a){var t=a.init,r=a.unmount,s=qh(a,KE),l=x.useRef(null);return x.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),x.useEffect(function(){l.current&&t(l.current)}),x.createElement("span",_i({},s,{ref:l}))}var QE=["name","emit","payload"];function oh(a){var t=a.name,r=a.emit,s=a.payload,l=qh(a,QE);return x.createElement(Yh,_i({},l,{className:t,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var WE=["name","emit","nodeId","side","socketKey","payload"];function lh(a){var t=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,p=qh(a,WE);return x.createElement(Yh,_i({},p,{className:t,init:function(g){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:g,payload:d}})},unmount:function(g){r({type:"unmount",data:{element:g}})}}))}var Wv,Jv,gw=Yn.div(Wv||(Wv=Un([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),sh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(mw,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},sh,function(a){return a.selected&&Gh(Jv||(Jv=Un([`
        background: `,`;
        border-color: #e3c000;
    `])),hw)},Za/2+xr,Za/2+xr,xr,Za,Za+2*xr,xr,Za/2+xr,function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function _f(a){a.sort(function(t,r){var s,l,c=((s=t[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function yw(a){var t=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,p=c.label,m=c.width,g=c.height;return _f(t),_f(r),_f(s),x.createElement(gw,{selected:l,width:m,height:g,styles:a.styles,"data-testid":"node"},x.createElement("div",{className:"title","data-testid":"title"},p),r.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E&&x.createElement("div",{className:"output",key:k,"data-testid":"output-".concat(k)},x.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),x.createElement(lh,{name:"output-socket",side:"output",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E?x.createElement(oh,{key:k,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(k)}):null}),t.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E&&x.createElement("div",{className:"input",key:k,"data-testid":"input-".concat(k)},x.createElement(lh,{name:"input-socket",side:"input",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&x.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&x.createElement(oh,{key:k,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var e0,t0,vw=Yn.div(e0||(e0=Un([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Za/2,Za,Za,pw),JE=Yn.div(t0||(t0=Un([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Za+xr*2)/2,xr,vw);function bw(a){return x.createElement(JE,null,x.createElement(vw,{title:a.data.name}))}function eC(a){var t=typeof a?.socketPositionWatcher>"u"?Mk():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){t.attach(m)},render:function(m,g){if(m.data.type==="node"){var b=g.parentScope(),w=s?s(m.data):yw;return w&&x.createElement(w,{data:m.data.payload,emit:function(ve){return void b.emit(ve)}})}else if(m.data.type==="connection"){var k=l?l(m.data):dw,E=m.data.payload,D=E.sourceOutput,X=E.targetInput,V=E.source,ee=E.target;return k&&x.createElement($E,{start:m.data.start||function(q){return t.listen(V,"output",D,q)},end:m.data.end||function(q){return t.listen(ee,"input",X,q)},path:(function(){var q=rt(Te.mark(function ve(xe,$){var me,ce,ge,Re,_e;return Te.wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return Je.next=1,g.emit({type:"connectionpath",data:{payload:E,points:[xe,$]}});case 1:if(me=Je.sent,me){Je.next=2;break}return Je.abrupt("return","");case 2:if(ce=me.data,ge=ce.path,Re=ce.points,_e=.3,!(!ge&&Re.length!==2)){Je.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(ge){Je.next=4;break}return Je.abrupt("return",E.isLoop?Tk(Re,_e,120):Ck(Re,_e));case 4:return Je.abrupt("return",ge);case 5:case"end":return Je.stop()}},ve)}));return function(ve,xe){return q.apply(this,arguments)}})()},x.createElement(k,{data:m.data.payload}))}else if(m.data.type==="socket"){var W=c?c(m.data):bw;return W&&m.data.payload&&x.createElement(W,{data:m.data.payload})}else if(m.data.type==="control"){var I=d&&m.data.payload?d(m.data):m.data.payload instanceof Kt.InputControl?ih:null;return I&&x.createElement(I,{data:m.data.payload})}}}}var tC=Object.freeze({__proto__:null,vars:XE,setup:eC,Connection:dw,useConnection:uw,Control:ih,InputControl:ih,Node:yw,NodeStyles:gw,RefControl:oh,RefSocket:lh,Socket:bw});function ww(a,t){var r=x.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},t)};return x.useEffect(function(){return s},[]),[l,s]}var nC="rgba(110,136,255,0.8)",aC="rgba(130, 153, 255, 0.8)",rC="rgba(69, 103, 255, 0.8)",cc="5px",ch=120,n0,Ph=Yn.div(n0||(n0=Un([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),rC,nC,cc,cc,cc,cc,aC),a0,r0,i0,Sw=Yn(Ph)(a0||(a0=Un([`
    `,`
`])),function(a){return a.hasSubitems&&Gh(r0||(r0=Un([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),xw=Yn.div(i0||(i0=Un([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),ch);function kw(a){var t,r,s,l,c=x.useState(!1),d=Fn(c,2),p=d[0],m=d[1],g=x.useCallback(function(){m(!1)},[m]),b=ww(g,a.delay),w=Fn(b,2),k=w[0],E=w[1],D=((t=a.components)===null||t===void 0||(r=t.item)===null||r===void 0?void 0:r.call(t,a.data))||Sw,X=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||xw;return x.createElement(D,{onClick:function(ee){ee.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(ee){ee.stopPropagation()},onPointerOver:function(){E(),m(!0)},onPointerLeave:function(){k&&k()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&p&&x.createElement(X,null,a.data.subitems.map(function(V){return x.createElement(kw,{key:V.key,data:V,delay:a.delay,hide:a.hide,components:a.components},V.label)})))}var s0,Ew=Yn.input(s0||(s0=Un([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function iC(a){var t=a.component||Ew;return x.createElement(t,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var o0,Cw=Yn.div(o0||(o0=Un([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),ch,ch/2);function sC(a){var t,r,s,l,c,d,p=ww(a.onHide,a.delay),m=Fn(p,2),g=m[0],b=m[1],w=x.useState(""),k=Fn(w,2),E=k[0],D=k[1],X=new RegExp(E,"i"),V=a.items.filter(function(I){return I.label.match(X)}),ee=((t=a.components)===null||t===void 0||(r=t.main)===null||r===void 0?void 0:r.call(t))||Cw,W=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||Ph;return x.createElement(ee,{onMouseOver:function(){b()},onMouseLeave:function(){g?.()},onWheel:function(q){q.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&x.createElement(W,null,x.createElement(iC,{value:E,onChange:D,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),V.map(function(I){return x.createElement(kw,{key:I.key,data:I,delay:a.delay,hide:a.onHide,components:a.components},I.label)}))}function oC(a){var t=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return x.createElement(sC,{items:s.data.items,delay:t,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var lC=Object.freeze({__proto__:null,setup:oC,Item:Sw,Subitems:xw,Menu:Cw,Search:Ew,Common:Ph}),uc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cC=typeof uc=="object"&&uc&&uc.Object===Object&&uc,uC=typeof self=="object"&&self&&self.Object===Object&&self;cC||uC||Function("return this")();function dC(){const a=x.useRef(!1);return x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useCallback(()=>a.current,[])}var l0={width:void 0,height:void 0};function fC(a){const{ref:t,box:r="content-box"}=a,[{width:s,height:l},c]=x.useState(l0),d=dC(),p=x.useRef({...l0}),m=x.useRef(void 0);return m.current=a.onResize,x.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([b])=>{const w=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",k=c0(b,w,"inlineSize"),E=c0(b,w,"blockSize");if(p.current.width!==k||p.current.height!==E){const X={width:k,height:E};p.current.width=k,p.current.height=E,m.current?m.current(X):d()&&c(X)}});return g.observe(t.current,{box:r}),()=>{g.disconnect()}},[r,t,d]),{width:s,height:l}}function c0(a,t,r){return a[t]?Array.isArray(a[t])?a[t][0][r]:a[t][r]:t==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Xa(a){return"".concat(a,"px")}var u0,hC=Yn.div(u0||(u0=Un([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function pC(a){return x.createElement(hC,{style:{left:Xa(a.left),top:Xa(a.top),width:Xa(a.width),height:Xa(a.height)},"data-testid":"minimap-node"})}var d0,mC=Yn.div(d0||(d0=Un([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function gC(a){var t=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=fw(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return x.createElement(mC,{onPointerDown:s.start,style:{left:Xa(t(a.left)),top:Xa(t(a.top)),width:Xa(t(a.width)),height:Xa(t(a.height))},"data-testid":"minimap-viewport"})}var f0,yC=Yn.div(f0||(f0=Un([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function vC(a){var t,r=x.useRef(null),s=fC({ref:r}),l=s.width,c=l===void 0?0:l,d=((t=r.current)===null||t===void 0?void 0:t.clientWidth)||c,p=x.useCallback(function(m){return m*d},[d]);return x.createElement(yC,{size:a.size,style:{width:Xa(a.size*a.ratio),height:Xa(a.size)},onPointerDown:function(g){g.stopPropagation(),g.preventDefault()},onDoubleClick:function(g){if(g.stopPropagation(),g.preventDefault(),!!r.current){var b=r.current.getBoundingClientRect(),w=(g.clientX-b.left)/(a.size*a.ratio),k=(g.clientY-b.top)/(a.size*a.ratio);a.point(w,k)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,g){return x.createElement(pC,{key:g,left:p(m.left),top:p(m.top),width:p(m.width),height:p(m.height)})}):null,x.createElement(gC,_i({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function bC(a){return{render:function(r){if(r.data.type==="minimap")return x.createElement(vC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var wC=Object.freeze({__proto__:null,setup:bC}),h0,Io=20,SC=Yn.div(h0||(h0=Un([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),Io,Io,function(a){return a.selected?"#ffd92c":"steelblue"},Io);function xC(a){var t=fw(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return x.createElement(SC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),t.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-Io/2,"px"),left:"".concat(s-Io/2,"px")},"data-testid":"pin"})}function kC(a){function t(r,s){return x.createElement(x.Fragment,null,r.pins.map(function(l){return x.createElement(xC,_i({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,p){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,p)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Yo);if(c.type==="reroute-pins")return t(c.data,function(){return d.area.pointer})}}}var EC=Object.freeze({__proto__:null,setup:kC}),Df=Object.freeze({__proto__:null,classic:tC,contextMenu:lC,minimap:wC,reroute:EC});function CC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=TC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function TC(a,t){if(a){if(typeof a=="string")return p0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p0(a,t):void 0}}function p0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function m0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function dc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?m0(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):m0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function NC(a,t,r){return t=Ht(t),Ja(a,Tw()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Tw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tw=function(){return!!a})()}function OC(a,t,r,s){var l=Vo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var jC=(function(a){function t(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return dt(this,t),r=NC(this,t,["react-render"]),Be(r,"presets",[]),r.renderer=LE({createRoot:d?.createRoot}),r.addPipe(function(p){if(!p||$n(p)!=="object"||!("type"in p))return p;if(p.type==="unmount")r.unmount(p.data.element);else if(p.type==="render"){if("filled"in p.data&&p.data.filled)return p;if(r.mount(p.data.element,p))return dc(dc({},p),{},{data:dc(dc({},p.data),{},{filled:!0})})}return p}),r}return na(t,a),ft(t,[{key:"setParent",value:function(s){var l=this;OC(t,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=CC(this.presets),p;try{for(d.s();!(p=d.n()).done;){var m=p.value,g=m.render(l,this);if(g){var b=x.createElement(BE,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},g);return this.renderer.mount(b,s),!0}}}catch(w){d.e(w)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(Os);function AC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function Nw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nw=function(){return!!a})()}function _C(a,t,r){if(Nw())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var l=new(a.bind.apply(a,s));return r&&Ho(l,r.prototype),l}function uh(a){var t=typeof Map=="function"?new Map:void 0;return uh=function(s){if(s===null||!AC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,l)}function l(){return _C(s,arguments,Ht(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ho(l,s)},uh(a)}function DC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=MC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function MC(a,t){if(a){if(typeof a=="string")return g0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g0(a,t):void 0}}function g0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}var RC=(function(){function a(t){dt(this,a),Be(this,"setups",new Map),this.editor=t}return ft(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var t=rt(Te.mark(function s(l){var c=this,d,p,m,g,b,w,k,E,D,X,V,ee;return Te.wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(d=this.setups.get(l),d){I.next=3;break}throw new Error("node is not initialized");case 3:return p=d.inputs(),m=this.editor.getConnections().filter(function(q){return q.target===l&&p.includes(q.targetInput)}),g={},I.next=8,Promise.all(m.map((function(){var q=rt(Te.mark(function ve(xe){return Te.wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return me.t0=xe,me.next=3,c.fetch(xe.source);case 3:return me.t1=me.sent,me.abrupt("return",{c:me.t0,sourceData:me.t1});case 5:case"end":return me.stop()}},ve)}));return function(ve){return q.apply(this,arguments)}})()));case 8:b=I.sent,w=DC(b);try{for(w.s();!(k=w.n()).done;)E=k.value,D=E.c,X=E.sourceData,V=g[D.targetInput]?g[D.targetInput]:[],ee=g,ee[D.targetInput]=[].concat(js(V),[X[D.sourceOutput]])}catch(q){w.e(q)}finally{w.f()}return I.abrupt("return",g);case 12:case"end":return I.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var t=rt(Te.mark(function s(l){var c=this,d,p,m,g;return Te.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(d=this.setups.get(l),d){w.next=3;break}throw new Error("node is not initialized");case 3:return p=d.outputs(),w.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=w.sent,g=Object.keys(m),p.every(function(k){return g.includes(k)})){w.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(p.join('", "'),'". Got "').concat(g.join('", "'),'"'));case 10:return w.abrupt("return",m);case 11:case"end":return w.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()}])})(),zC=(function(){function a(t){dt(this,a),Be(this,"cache",new Map),this.onDelete=t}return ft(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function LC(a,t,r){return t=Ht(t),Ja(a,Ow()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function Ow(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ow=function(){return!!a})()}var y0=(function(a){function t(){return dt(this,t),LC(this,t,["cancelled"])}return na(t,a),ft(t)})(uh(Error));function BC(){var a=!1;function t(m){if(a)throw new y0;return m}for(var r,s=new Promise(function(m,g){r=g,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var p=c.reduce(function(m,g){var b=m.then(g).then(t);return b},s);return p.cancel=function(){a||r(new y0),a=!0},p}function IC(a,t,r){return t=Ht(t),Ja(a,jw()?Reflect.construct(t,r||[],Ht(a).constructor):t.apply(a,r))}function jw(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jw=function(){return!!a})()}function $C(a,t,r,s){var l=Vo(Ht(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var UC=(function(a){function t(r){var s;return dt(this,t),s=IC(this,t,["dataflow-engine"]),Be(s,"cache",new zC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return na(t,a),ft(t,[{key:"setParent",value:function(s){$C(t,"setParent",this)([s]),this.editor=this.parentScope(ai),this.dataflow=new RC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=rt(Te.mark(function m(g){var b,w;return Te.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(b=l.cache.get(s.id),!b){E.next=3;break}return E.abrupt("return",b);case 3:return w=BC(function(){return g()},function(D){return s.data(D)}),l.cache.add(s.id,w),E.abrupt("return",w);case 6:case"end":return E.stop()}},m)}));function p(m){return d.apply(this,arguments)}return p})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(p){return p.source===s&&d.includes(p.sourceOutput)}).forEach(function(p){l.reset(p.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=rt(Te.mark(function l(c){var d;return Te.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=$n(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=rt(Te.mark(function l(c){var d;return Te.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=$n(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(Os);const HC=!1,Fh=(...a)=>HC,v0=Kt.Socket.canConnect;Kt.Socket.canConnect=function(a,t){return Fh(`[Socket Check] ${a.name} <-> ${t.name}`),v0&&v0(a,t)||a.name==="any"||t.name==="any"?!0:a.name===t.name};Kt.Socket.prototype.canConnectTo=function(a){return Fh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Kt.Socket.canConnect(this,a)};const Aw={boolean:new Kt.Socket("boolean"),number:new Kt.Socket("number"),object:new Kt.Socket("object"),lightInfo:new Kt.Socket("light_info"),any:new Kt.Socket("any")};Object.values(Aw).forEach(a=>{a.canConnectTo=function(t){return Fh(`[Socket Instance Direct] ${this.name} -> ${t.name}`),this.name===t.name||this.name==="any"||t.name==="any"}});let No=null;function Fc(){if(No!==null)return No;const t=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return t?No=t[1]:No="",No}function Tn(a){const t=Fc(),r=a.startsWith("/")?a:"/"+a;return t+r}Fc();const Ni="t2app-pin",zc="t2app-pin-remember",_w=(a,t)=>{try{return a.getItem(t)}catch{return null}},fc=(a,t,r)=>{try{return a.setItem(t,r),!0}catch{return!1}},$o=(a,t)=>{try{return a.removeItem(t),!0}catch{return!1}},Lc=()=>_w(localStorage,zc)==="true",bs=()=>{const t=Lc()?localStorage:sessionStorage;return(_w(t,Ni)||"").trim()||null},Dw=()=>{$o(sessionStorage,Ni),$o(localStorage,Ni),$o(localStorage,zc),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},b0=(a,{remember:t}={})=>{const r=(a||"").toString().trim(),s=typeof t=="boolean"?t:Lc();if(!r){Dw(),typeof t=="boolean"&&fc(localStorage,zc,t?"true":"false");return}fc(localStorage,zc,s?"true":"false"),s?(fc(localStorage,Ni,r),$o(sessionStorage,Ni)):(fc(sessionStorage,Ni,r),$o(localStorage,Ni)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},gs=async(a,t={})=>{const r=typeof a=="string"?Tn(a):a;return fetch(r,t)},fn=async(a,t={})=>{const r=bs(),s=typeof a=="string"?Tn(a):a;if(!r)return fetch(s,t);const l=new Headers(t.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...t,headers:l})},w0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function VC(){const[a,t]=x.useState([]),[r,s]=x.useState(!1),[l,c]=x.useState(null),[d,p]=x.useState(null),[m,g]=x.useState(5e3),[b,w]=x.useState(null),k=x.useCallback(async()=>{s(!0),c(null);try{const ee=await gs("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!ee.ok){const I=await ee.json();throw new Error(I.error||`Scan failed (${ee.status})`)}const W=await ee.json();t(W.devices||[]),p(new Date)}catch(ee){console.error("[Discovery] Scan error:",ee),c(ee.message)}finally{s(!1)}},[m]),E=ee=>w0[ee]||w0.generic,D=ee=>ee?new Date(ee).toLocaleTimeString():"",V=(ee=>{const W={};for(const I of ee){const q=I.type||"generic";W[q]||(W[q]=[]),W[q].push(I)}return W})(a);return h.jsxs("div",{className:"discovery-panel",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),h.jsxs("select",{value:m,onChange:ee=>g(Number(ee.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[h.jsx("option",{value:3e3,children:"3 seconds"}),h.jsx("option",{value:5e3,children:"5 seconds"}),h.jsx("option",{value:1e4,children:"10 seconds"}),h.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),h.jsx("button",{onClick:k,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):h.jsx(h.Fragment,{children:" Scan Network"})})]}),l&&h.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&h.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&h.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[h.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),h.jsx("div",{children:"No devices found on your network."}),h.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(V).map(([ee,W])=>{const I=E(ee);return h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[h.jsx("span",{style:{fontSize:"16px"},children:I.icon}),h.jsx("span",{style:{color:I.color,fontSize:"13px",fontWeight:500},children:I.label}),h.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:W.length})]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:W.map(q=>h.jsxs("div",{style:{background:b===q.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>w(b===q.id?null:q.id),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:q.name}),h.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[q.ip,":",q.port]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[q.configured?h.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):h.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),h.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:b===q.id?"":""})]})]}),b===q.id&&h.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[h.jsx("span",{children:"Host:"}),h.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:q.host||"N/A"}),h.jsx("span",{children:"Source:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:q.source==="mdns"?"mDNS/Bonjour":q.source==="udp"?"UDP Broadcast":q.source}),h.jsx("span",{children:"Discovered:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:D(q.discoveredAt)}),q.capabilities&&q.capabilities.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Capabilities:"}),h.jsx("span",{style:{color:"#5fb3b3"},children:q.capabilities.join(", ")})]}),q.model&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Model:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:q.model})]})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:ve=>{ve.stopPropagation(),window.open(`http://${q.ip}:${q.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),h.jsx("button",{onClick:ve=>{ve.stopPropagation(),navigator.clipboard.writeText(q.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},q.id))})]},ee)}),h.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const Oo={tron:{name:"Tron (Default)",description:"Cyan neon on dark - the classic T2 look",colors:{primary:"#5fb3b3",background:"#1e2428",surface:"#2a3238",surfaceLight:"#343d44",text:"#c5cdd3",textMuted:"#8a959e",success:"#5faa7d",warning:"#d4a054",error:"#c75f5f",borderOpacity:25}},midnight:{name:"Midnight Purple",description:"Deep purple with pink accents",colors:{primary:"#b388ff",background:"#1a1a2e",surface:"#25253a",surfaceLight:"#32324a",text:"#e0d6ff",textMuted:"#9990b8",success:"#69f0ae",warning:"#ffab40",error:"#ff5252",borderOpacity:30}},forest:{name:"Forest",description:"Natural greens with earth tones",colors:{primary:"#81c784",background:"#1b2420",surface:"#263530",surfaceLight:"#324540",text:"#d5e8d4",textMuted:"#8aa888",success:"#4caf50",warning:"#ffb74d",error:"#e57373",borderOpacity:25}},ember:{name:"Ember",description:"Warm orange and red firelight",colors:{primary:"#ff7043",background:"#1f1510",surface:"#2d2018",surfaceLight:"#3d2d22",text:"#ffe0cc",textMuted:"#b08060",success:"#aed581",warning:"#ffc107",error:"#ff5722",borderOpacity:30}},arctic:{name:"Arctic",description:"Cool blues with icy highlights",colors:{primary:"#4fc3f7",background:"#0d1b2a",surface:"#1b2838",surfaceLight:"#283848",text:"#e3f2fd",textMuted:"#78a5c8",success:"#26a69a",warning:"#ffca28",error:"#ef5350",borderOpacity:25}},monochrome:{name:"Monochrome",description:"Clean grayscale - easy on the eyes",colors:{primary:"#90a4ae",background:"#1a1a1a",surface:"#252525",surfaceLight:"#333333",text:"#e0e0e0",textMuted:"#888888",success:"#a5d6a7",warning:"#ffe082",error:"#ef9a9a",borderOpacity:20}}},Mw={"Core Colors":{icon:"",settings:[{key:"primary",label:"Primary Accent",type:"color",default:"#5fb3b3"},{key:"background",label:"Background",type:"color",default:"#1e2428"},{key:"surface",label:"Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"}]},"Status Colors":{icon:"",settings:[{key:"success",label:"Success",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning",type:"color",default:"#d4a054"},{key:"error",label:"Error",type:"color",default:"#c75f5f"}]},"Socket Colors":{icon:"",settings:[{key:"socketBoolean",label:"Boolean",type:"color",default:"#10b981",cssVar:"socket-boolean-color"},{key:"socketNumber",label:"Number",type:"color",default:"#3b82f6",cssVar:"socket-number-color"},{key:"socketString",label:"String",type:"color",default:"#f59e0b",cssVar:"socket-string-color"},{key:"socketHsv",label:"HSV/Color",type:"color",default:"#8b5cf6",cssVar:"socket-hsv-color"},{key:"socketObject",label:"Object",type:"color",default:"#6366f1",cssVar:"socket-object-color"},{key:"socketLight",label:"Light/Device",type:"color",default:"#eab308",cssVar:"socket-light-color"}]},"Node Glow Colors":{icon:"",settings:[{key:"nodeHa",label:"Home Assistant",type:"color",default:"#00d4ff",cssVar:"node-ha-glow"},{key:"nodeLogic",label:"Logic",type:"color",default:"#8b5cf6",cssVar:"node-logic-glow"},{key:"nodeTimer",label:"Timer/Event",type:"color",default:"#f59e0b",cssVar:"node-timer-glow"},{key:"nodeColor",label:"Color",type:"color",default:"#ec4899",cssVar:"node-color-glow"},{key:"nodeUtility",label:"Utility",type:"color",default:"#14b8a6",cssVar:"node-utility-glow"},{key:"nodeDevice",label:"Direct Device",type:"color",default:"#22c55e",cssVar:"node-device-glow"}]},Editor:{icon:"",settings:[{key:"borderOpacity",label:"Border Opacity",type:"range",min:0,max:100,default:25},{key:"glowIntensity",label:"Glow Intensity",type:"range",min:0,max:100,default:50},{key:"gridOpacity",label:"Grid Opacity",type:"range",min:0,max:100,default:30}]}},Mf=Object.values(Mw).flatMap(a=>a.settings),GC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"ElevenLabs TTS",icon:"",description:"AI voice generation for TTS Announcement node",settings:[{key:"ELEVENLABS_API_KEY",label:"API Key",placeholder:"Your ElevenLabs API key",type:"password",isSecret:!0,hint:"Get one at elevenlabs.io"},{key:"PUBLIC_URL",label:"Public URL",placeholder:"http://192.168.1.x:3000",type:"text",hint:"URL reachable by your speakers (for audio playback)"}]},{category:"Chatterbox TTS",icon:"",description:"Local AI voice generation (requires GPU server)",settings:[{key:"CHATTERBOX_URL",label:"Server URL",placeholder:"http://localhost:8100",type:"text",hint:"URL of Chatterbox server (local or remote GPU machine)"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],S0=a=>{try{const t=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},x0=a=>{try{const t=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function qC({isOpen:a,onClose:t}){const[r,s]=x.useState({}),[l,c]=x.useState(!0),[d,p]=x.useState(!1),[m,g]=x.useState(null),[b,w]=x.useState(null),[k,E]=x.useState({}),[D,X]=x.useState({}),[V,ee]=x.useState({}),[W,I]=x.useState({}),[q,ve]=x.useState([]),[xe,$]=x.useState(!1),me=x.useRef(!1),ce=x.useRef(null),[ge,Re]=x.useState(""),[_e,Je]=x.useState(()=>Lc()),[tt,Qe]=x.useState(()=>!!bs()),[Y,he]=x.useState(!1),[ye,ze]=x.useState(()=>{try{const O=localStorage.getItem("t2theme-overrides"),j=O?JSON.parse(O):{},P={};return Mf.forEach(le=>{P[le.key]=le.default}),{...P,...j}}catch{const O={};return Mf.forEach(j=>{O[j.key]=j.default}),O}}),[J,v]=x.useState(!1),[N,_]=x.useState(()=>{try{return localStorage.getItem("t2theme-preset")||"tron"}catch{return"tron"}}),[M,Q]=x.useState(()=>{try{const O=localStorage.getItem("t2-custom-themes");return O?JSON.parse(O):{}}catch{return{}}}),[pe,Ee]=x.useState(!1),[Ie,Ye]=x.useState(""),Rt={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[Yt,It]=x.useState(()=>{try{const O=localStorage.getItem("t2category-overrides"),j=O?JSON.parse(O):{},P={};for(const[le,De]of Object.entries(Rt))P[le]={...De,...j[le]||{}};return P}catch{return{...Rt}}}),[ln,it]=x.useState(!1),jt={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},Nn={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[Fe,vt]=x.useState(()=>{try{const O=localStorage.getItem("t2socket-colors"),j=O?JSON.parse(O):{},P={};for(const[le,De]of Object.entries(jt))P[le]={...De,...j[le]||{}};return P}catch{return{...jt}}}),[nn,On]=x.useState(!1),[Zn,Ta]=x.useState(!1),[Na,C]=x.useState(null),[z,L]=x.useState(!1),[re,te]=x.useState(!1);x.useEffect(()=>{a?(T(),X({Security:!0,"Home Assistant":!0}),ee({}),Je(Lc()),Qe(!!bs()),Re(""),me.current||(me.current=!0,(async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),$(!0);try{const O=await fn("/api/lights/ha/");if(console.log("[SettingsModal] Response status:",O.status),!O.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",O.status),$(!1);return}const j=await O.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),$(!1);return}const P=j.filter(le=>(le.id||le.entity_id||"").includes("sensor.")).map(le=>({id:(le.id||le.entity_id||"").replace("ha_",""),name:le.name||le.friendly_name||le.id||le.entity_id})).sort((le,De)=>le.name.localeCompare(De.name));console.log("[SettingsModal] Filtered sensors:",P.length),ve(P),$(!1)}catch(O){console.warn("[SettingsModal] Error fetching HA sensors:",O),$(!1)}})())):me.current=!1},[a]);const ne=async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),$(!0);try{const O=await fn("/api/lights/ha/");if(!O.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",O.status),$(!1);return}const j=await O.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),$(!1);return}const P=j.filter(le=>(le.id||le.entity_id||"").includes("sensor.")).map(le=>({id:(le.id||le.entity_id||"").replace("ha_",""),name:le.name||le.friendly_name||le.id||le.entity_id})).sort((le,De)=>le.name.localeCompare(De.name));console.log("[SettingsModal] Filtered sensors:",P.length),ve(P),$(!1)}catch(O){console.warn("[SettingsModal] Error fetching HA sensors:",O),$(!1)}},T=async()=>{c(!0),g(null);try{const O=await fn("/api/settings");if(!O.ok)throw new Error("Failed to fetch settings");const P=(await O.json()).settings||{};s(P);try{const le=await fn("/api/config");if(le.ok){const De=await le.json();if(De.success){L(De.isAddon||!1),te(!0);const Pt=!P.LOCATION_CITY,Rn=!P.LOCATION_LATITUDE,Ge=!P.LOCATION_LONGITUDE,Qt=!P.LOCATION_TIMEZONE;(Pt||Rn||Ge||Qt)&&(s(_t=>({..._t,...Pt&&De.locationName?{LOCATION_CITY:De.locationName}:{},...Rn&&De.latitude?{LOCATION_LATITUDE:String(De.latitude)}:{},...Ge&&De.longitude?{LOCATION_LONGITUDE:String(De.longitude)}:{},...Qt&&De.timezone?{LOCATION_TIMEZONE:De.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(le){console.log("[Settings] Could not fetch HA config for location auto-fill:",le.message)}}catch(O){g("Failed to load settings: "+O.message)}finally{c(!1)}},F=async()=>{p(!0),g(null),w(null);try{const O=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!O.ok){const j=await O.json();throw new Error(j.error||"Failed to save settings")}w("Settings saved! Some changes may require a server restart."),setTimeout(()=>w(null),5e3)}catch(O){g("Failed to save: "+O.message)}finally{p(!1)}},de=(O,j)=>{s(P=>({...P,[O]:j}))},ie=async()=>{const O=r.LOCATION_CITY;if(!O||O.trim().length<2){C("Please enter a city name first");return}Ta(!0),C(null);try{const j=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(O)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!j.ok)throw new Error("Geocoding service unavailable");const P=await j.json();if(P.length===0){C(`Could not find "${O}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const le=P[0],De=parseFloat(le.lat).toFixed(4),Pt=parseFloat(le.lon).toFixed(4),Rn=le.address?[le.address.city||le.address.town||le.address.village||le.name,le.address.state,le.address.country].filter(Boolean).join(", "):le.display_name.split(",").slice(0,3).join(",");let Ge="UTC";const Qt=le.address?.state?.toLowerCase()||"",_t=le.address?.country?.toLowerCase()||"";if(_t.includes("portugal"))Ge="Europe/Lisbon";else if(_t.includes("spain"))Ge="Europe/Madrid";else if(_t.includes("france"))Ge="Europe/Paris";else if(_t.includes("germany"))Ge="Europe/Berlin";else if(_t.includes("italy"))Ge="Europe/Rome";else if(_t.includes("united kingdom")||_t.includes("ireland"))Ge="Europe/London";else if(_t.includes("netherlands"))Ge="Europe/Amsterdam";else if(_t.includes("belgium"))Ge="Europe/Brussels";else if(_t.includes("australia"))Ge="Australia/Sydney";else if(_t.includes("japan"))Ge="Asia/Tokyo";else if(_t.includes("china"))Ge="Asia/Shanghai";else if(_t.includes("india"))Ge="Asia/Kolkata";else if(_t.includes("brazil"))Ge="America/Sao_Paulo";else if(_t.includes("canada"))Qt.includes("british columbia")?Ge="America/Vancouver":Qt.includes("alberta")?Ge="America/Edmonton":Qt.includes("saskatchewan")?Ge="America/Regina":Qt.includes("manitoba")?Ge="America/Winnipeg":Qt.includes("ontario")?Ge="America/Toronto":Qt.includes("quebec")?Ge="America/Montreal":Ge="America/Toronto";else if(_t.includes("united states")||_t.includes("usa"))Qt.includes("hawaii")?Ge="Pacific/Honolulu":Qt.includes("alaska")?Ge="America/Anchorage":["california","nevada","oregon","washington"].some(ht=>Qt.includes(ht))?Ge="America/Los_Angeles":["arizona"].some(ht=>Qt.includes(ht))?Ge="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(ht=>Qt.includes(ht))?Ge="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(ht=>Qt.includes(ht))?Ge="America/Chicago":Ge="America/New_York";else{const ht=parseFloat(Pt);ht>=-125&&ht<-115?Ge="America/Los_Angeles":ht>=-115&&ht<-102?Ge="America/Denver":ht>=-102&&ht<-87?Ge="America/Chicago":ht>=-87&&ht<-67?Ge="America/New_York":ht>=-10&&ht<3?Ge="Europe/London":ht>=3&&ht<15?Ge="Europe/Paris":ht>=15&&ht<30&&(Ge="Europe/Berlin")}s(ht=>({...ht,LOCATION_CITY:Rn,LOCATION_LATITUDE:De,LOCATION_LONGITUDE:Pt,LOCATION_TIMEZONE:Ge})),w(`Found: ${Rn} (${De}, ${Pt})`),setTimeout(()=>w(null),5e3)}catch(j){C("Search failed: "+j.message)}finally{Ta(!1)}},Se=(O,j)=>{const P=Mf.find(De=>De.key===O),le=document.documentElement;if(O==="borderOpacity")le.style.setProperty("--node-border-opacity",j/100);else if(O==="glowIntensity")le.style.setProperty("--node-glow-intensity",j/100);else if(O==="gridOpacity")le.style.setProperty("--editor-grid-opacity",j/100);else if(P?.cssVar){const De=P.cssVar;if(le.style.setProperty(`--${De}`,j),typeof j=="string"&&j.startsWith("#")){const Pt=parseInt(j.slice(1,3),16),Rn=parseInt(j.slice(3,5),16),Ge=parseInt(j.slice(5,7),16);le.style.setProperty(`--${De.replace("-color","-rgb").replace("-glow","-rgb")}`,`${Pt}, ${Rn}, ${Ge}`);const Qt=Math.max(0,Pt-40),_t=Math.max(0,Rn-40),ht=Math.max(0,Ge-40);le.style.setProperty(`--${De.replace("-color","-dark").replace("-glow","-dark")}`,`rgb(${Qt}, ${_t}, ${ht})`);const Ua=Math.min(255,Pt+40),Wt=Math.min(255,Rn+40),Gt=Math.min(255,Ge+40);le.style.setProperty(`--${De.replace("-color","-border").replace("-glow","-border")}`,`rgb(${Ua}, ${Wt}, ${Gt})`)}}else if(le.style.setProperty(`--theme-${O}`,j),typeof j=="string"&&j.startsWith("#")){const De=parseInt(j.slice(1,3),16),Pt=parseInt(j.slice(3,5),16),Rn=parseInt(j.slice(5,7),16);le.style.setProperty(`--theme-${O}-rgb`,`${De}, ${Pt}, ${Rn}`)}},oe=(O,j)=>{ze(le=>({...le,[O]:j})),v(!0),_("custom"),Se(O,j);const P={...ye,[O]:j};localStorage.setItem("t2theme-overrides",JSON.stringify(P)),localStorage.setItem("t2theme-preset","custom")},Ce=O=>{const j=Oo[O];j&&(Object.entries(j.colors).forEach(([P,le])=>{Se(P,le)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",O),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),ze(j.colors),_(O),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},Pe=O=>{const j=M[O];j&&(Object.entries(j.colors).forEach(([P,le])=>{Se(P,le)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",`custom:${O}`),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),ze(j.colors),_(`custom:${O}`),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},kt=()=>{if(!Ie.trim()){g("Please enter a theme name");return}const O=Ie.trim().toLowerCase().replace(/\s+/g,"-");if(Oo[O]){g("Cannot use a built-in theme name");return}const j={name:Ie.trim(),colors:{...ye}},P={...M,[O]:j};Q(P);try{localStorage.setItem("t2-custom-themes",JSON.stringify(P)),localStorage.setItem("t2theme-preset",`custom:${O}`),_(`custom:${O}`),Ee(!1),Ye(""),v(!1),w(`Custom theme "${Ie.trim()}" saved!`),setTimeout(()=>w(null),3e3)}catch(le){g("Failed to save custom theme: "+le.message)}},Ve=(O,j)=>{j.stopPropagation();const P=M[O]?.name||O;if(!window.confirm(`Delete custom theme "${P}"?`))return;const{[O]:le,...De}=M;Q(De);try{localStorage.setItem("t2-custom-themes",JSON.stringify(De)),N===`custom:${O}`&&Ce("tron"),w(`Theme "${P}" deleted`),setTimeout(()=>w(null),3e3)}catch(Pt){g("Failed to delete theme: "+Pt.message)}},Xe=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(ye)),localStorage.setItem("t2theme-preset","custom"),_("custom"),w("Theme saved! Refresh the page to apply changes."),v(!1),setTimeout(()=>w(null),5e3)}catch(O){g("Failed to save theme: "+O.message)}},ke=()=>{Ce("tron"),localStorage.removeItem("t2theme-overrides"),localStorage.removeItem("t2theme-preset"),v(!1),setTimeout(()=>w(null),5e3)},bt=(O,j,P)=>{It(le=>({...le,[O]:{...le[O],[j]:P}})),it(!0)},He=O=>{const j=parseInt(O.slice(1,3),16),P=parseInt(O.slice(3,5),16),le=parseInt(O.slice(5,7),16);return`${j}, ${P}, ${le}`},wt={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},Vt=O=>{const j=document.documentElement;for(const[P,le]of Object.entries(O)){const De=wt[P];De&&(j.style.setProperty(`--node-${De}-color`,le.accent),j.style.setProperty(`--node-${De}-color-rgb`,He(le.accent)),le.background&&j.style.setProperty(`--node-${De}-bg`,le.background))}},lt=()=>{try{const O={};for(const[j,P]of Object.entries(Yt)){const le=Rt[j],De={};P.accent!==le.accent&&(De.accent=P.accent),P.background!==le.background&&(De.background=P.background),Object.keys(De).length>0&&(O[j]=De)}Object.keys(O).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(O)):localStorage.removeItem("t2category-overrides"),Vt(Yt),w("Category colors applied!"),it(!1),setTimeout(()=>w(null),3e3)}catch(O){g("Failed to save category colors: "+O.message)}},$t=()=>{It({...Rt}),localStorage.removeItem("t2category-overrides"),Vt(Rt),w("Category colors reset to defaults!"),it(!1),setTimeout(()=>w(null),3e3)},hn=(O,j)=>{vt(P=>({...P,[O]:{...P[O],color:j}})),On(!0)},kn=(O,j=20)=>{const P=parseInt(O.slice(1),16),le=Math.max(0,(P>>16)-Math.round(255*j/100)),De=Math.max(0,(P>>8&255)-Math.round(255*j/100)),Pt=Math.max(0,(P&255)-Math.round(255*j/100));return`#${(1<<24|le<<16|De<<8|Pt).toString(16).slice(1)}`},cn=(O,j=20)=>{const P=parseInt(O.slice(1),16),le=Math.min(255,(P>>16)+Math.round(255*j/100)),De=Math.min(255,(P>>8&255)+Math.round(255*j/100)),Pt=Math.min(255,(P&255)+Math.round(255*j/100));return`#${(1<<24|le<<16|De<<8|Pt).toString(16).slice(1)}`},pn=O=>{const j=document.documentElement;for(const[P,le]of Object.entries(O)){const De=Nn[P];De&&(j.style.setProperty(`--socket-${De}-color`,le.color),j.style.setProperty(`--socket-${De}-dark`,kn(le.color,15)),j.style.setProperty(`--socket-${De}-border`,cn(le.color,20)),j.style.setProperty(`--socket-${De}-rgb`,He(le.color)))}},$a=()=>{try{const O={};for(const[j,P]of Object.entries(Fe)){const le=jt[j];P.color!==le.color&&(O[j]={color:P.color})}Object.keys(O).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(O)):localStorage.removeItem("t2socket-colors"),pn(Fe),w("Socket colors applied!"),On(!1),setTimeout(()=>w(null),3e3)}catch(O){g("Failed to save socket colors: "+O.message)}},er=()=>{vt({...jt}),localStorage.removeItem("t2socket-colors"),pn(jt),w("Socket colors reset to defaults!"),On(!1),setTimeout(()=>w(null),3e3)},jn=O=>{X(j=>({...j,[O]:!j[O]})),O==="Forecast Panel"&&!D[O]&&q.length===0&&ne()},kr=O=>{E(j=>({...j,[O]:!j[O]}))},ii=async O=>{I(j=>({...j,[O]:!0})),ee(j=>({...j,[O]:null}));try{const P=await(await fn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:O,settings:r})})).json();ee(le=>({...le,[O]:{success:P.success,message:P.message||(P.success?"Connection successful!":"Connection failed"),details:P.details}}))}catch(j){ee(P=>({...P,[O]:{success:!1,message:"Test failed: "+j.message}}))}finally{I(j=>({...j,[O]:!1}))}},si=()=>{const O={version:"1.0",timestamp:new Date().toISOString(),settings:r},j=new Blob([JSON.stringify(O,null,2)],{type:"application/json"}),P=URL.createObjectURL(j),le=document.createElement("a");le.href=P,le.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(le),le.click(),document.body.removeChild(le),URL.revokeObjectURL(P),w("Settings exported successfully!"),setTimeout(()=>w(null),3e3)},At=O=>{const j=O.target.files?.[0];if(!j)return;const P=new FileReader;P.onload=le=>{try{const De=JSON.parse(le.target.result);if(!De.settings||typeof De.settings!="object")throw new Error("Invalid backup file format");s(Pt=>({...Pt,...De.settings})),w(`Imported ${Object.keys(De.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>w(null),5e3)}catch(De){g("Failed to import backup: "+De.message)}},P.readAsText(j),O.target.value=""};return a?_h.createPortal(h.jsx("div",{className:"settings-modal-overlay",onClick:t,children:h.jsxs("div",{className:"settings-modal",onClick:O=>O.stopPropagation(),children:[h.jsxs("div",{className:"settings-header",children:[h.jsx("h2",{children:" Settings & API Keys"}),h.jsx("button",{className:"settings-close-btn",onClick:t,children:""})]}),h.jsx("div",{className:"settings-content",children:l?h.jsx("div",{className:"settings-loading",children:"Loading settings..."}):h.jsxs(h.Fragment,{children:[m&&h.jsx("div",{className:"settings-error",children:m}),b&&h.jsx("div",{className:"settings-success",children:b}),h.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[h.jsxs("span",{children:[D.Security?"":""," Security (This Device)"]}),tt&&h.jsxs("span",{style:{fontSize:"10px",color:_e?"#00c896":"#ffaa00"},children:[" ",_e?"REMEMBERED":"SESSION"]})]}),D.Security&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:["App PIN",h.jsx("button",{className:"settings-show-btn",onClick:()=>he(O=>!O),type:"button",children:Y?" Hide":" Show"})]}),h.jsx("input",{type:Y?"text":"password",className:"settings-input",value:ge,onChange:O=>Re(O.target.value),placeholder:tt?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[h.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[h.jsx("input",{type:"checkbox",checked:_e,onChange:O=>{const j=O.target.checked;Je(j);const P=bs();P&&b0(P,{remember:j})}}),"Remember PIN on this device"]}),h.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const O=ge.trim();O&&(b0(O,{remember:_e}),Qe(!0),Re(""),(async()=>{try{const j=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:O}})});if(!j.ok){const P=await j.text();throw new Error(P||`HTTP ${j.status}`)}w("PIN saved (server + this device)."),setTimeout(()=>w(null),3e3)}catch{w("PIN saved on this device. Server PIN update failed."),setTimeout(()=>w(null),4e3)}finally{T()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!ge.trim(),children:" Save PIN"}),h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{Dw(),Qe(!1),Re(""),Je(!1),w("PIN cleared."),setTimeout(()=>w(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!tt,children:"Clear"})]})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:tt?`PIN is saved (${_e?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),h.jsxs("div",{className:"settings-backup-section",children:[h.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),h.jsxs("div",{className:"settings-backup-buttons",children:[h.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:si,children:" Export Backup"}),h.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>ce.current?.click(),children:" Import Backup"}),h.jsx("input",{ref:ce,type:"file",accept:".json",style:{display:"none"},onChange:At})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[h.jsxs("span",{children:[D.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&h.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),D.Performance&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",h.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),h.jsx("br",{}),h.jsx("br",{}),"Performance Mode disables:",h.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),h.jsx("li",{children:"Complex glow shadows"}),h.jsx("li",{children:"Infinite pulse/glow animations"}),h.jsx("li",{children:"Transition effects on nodes"})]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),h.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),h.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[h.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:O=>{window.setPerformanceMode?.(O.target.checked),X(j=>({...j}))},style:{opacity:0,width:0,height:0}}),h.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:h.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),h.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsx("div",{className:"settings-category-header",onClick:()=>jn("Discovery"),children:h.jsxs("span",{children:[D.Discovery?"":""," Network Device Discovery"]})}),D.Discovery&&h.jsx("div",{className:"settings-category-content",children:h.jsx(VC,{})})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn("Theme"),children:[h.jsxs("span",{children:[D.Theme?"":""," Node Theme Settings"]}),J&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.Theme&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(95, 179, 179, 0.08)",borderRadius:"8px",border:"1px solid rgba(95, 179, 179, 0.2)"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginBottom:"8px",display:"block"},children:" Built-in Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(Oo).map(([O,j])=>h.jsxs("button",{onClick:()=>Ce(O),style:{padding:"8px 14px",borderRadius:"6px",border:N===O?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:N===O?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:N===O?"600":"400",boxShadow:N===O?`0 0 12px ${j.colors.primary}40`:"none"},title:j.description,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name]},O))}),Object.keys(M).length>0&&h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginTop:"16px",marginBottom:"8px",display:"block"},children:" Your Saved Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(M).map(([O,j])=>h.jsxs("button",{onClick:()=>Pe(O),style:{padding:"8px 14px",borderRadius:"6px",border:N===`custom:${O}`?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:N===`custom:${O}`?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:N===`custom:${O}`?"600":"400",boxShadow:N===`custom:${O}`?`0 0 12px ${j.colors.primary}40`:"none",position:"relative",paddingRight:"28px"},title:`Custom theme: ${j.name}`,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name,h.jsx("span",{onClick:P=>Ve(O,P),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",opacity:.6,cursor:"pointer"},title:"Delete this theme",children:""})]},O))})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"10px",color:"#8a959e",fontStyle:"italic"},children:N.startsWith("custom:")&&M[N.replace("custom:","")]?`Custom theme: ${M[N.replace("custom:","")].name}`:N!=="custom"&&Oo[N]?Oo[N].description:"Custom theme - you've modified individual colors"})]}),h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Click a preset to apply instantly, or customize individual colors below."}),Object.entries(Mw).map(([O,j])=>h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:ye.primary||"#5fb3b3",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:j.icon}),h.jsx("span",{children:O})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"},children:j.settings.map(P=>h.jsxs("div",{className:"settings-field",style:{marginBottom:"4px"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"9px",marginBottom:"4px"},children:P.label}),P.type==="color"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"color",value:ye[P.key]||P.default,onChange:le=>oe(P.key,le.target.value),style:{width:"32px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("input",{type:"text",value:ye[P.key]||P.default,onChange:le=>oe(P.key,le.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"9px",padding:"4px"}})]}):P.type==="range"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"range",min:P.min,max:P.max,value:ye[P.key]??P.default,onChange:le=>oe(P.key,parseInt(le.target.value)),style:{flex:1}}),h.jsxs("span",{style:{minWidth:"28px",textAlign:"right",color:"#c5cdd3",fontSize:"10px"},children:[ye[P.key]??P.default,"%"]})]}):null]},P.key))})]},O)),h.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:ye.background||"#1e2428",borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(ye.borderOpacity||25)/100})`},children:[h.jsx("div",{style:{fontSize:"10px",color:ye.textMuted||"#8a959e",marginBottom:"8px"},children:"PREVIEW"}),h.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[h.jsx("div",{style:{padding:"8px 12px",background:ye.surface,color:ye.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),h.jsx("div",{style:{padding:"8px 12px",background:ye.surfaceLight,color:ye.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),h.jsx("span",{style:{color:ye.primary},children:"Primary"}),h.jsx("span",{style:{color:ye.success},children:"Success"}),h.jsx("span",{style:{color:ye.warning},children:"Warning"}),h.jsx("span",{style:{color:ye.error},children:"Error"})]})]}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:ke,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:()=>Ee(!0),style:{background:"rgba(95, 140, 220, 0.15)",borderColor:"rgba(95, 140, 220, 0.5)",color:"#5f8adc"},title:"Save current colors as a named custom theme",children:" Save as Custom Theme"}),h.jsx("button",{className:"settings-btn-small",onClick:Xe,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Apply Changes"})]}),pe&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:h.jsxs("div",{style:{background:"var(--theme-surface, #2a3238)",padding:"24px",borderRadius:"12px",border:"1px solid rgba(95, 179, 179, 0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",minWidth:"300px"},children:[h.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--theme-text, #c5cdd3)",fontSize:"16px"},children:" Save Custom Theme"}),h.jsx("p",{style:{margin:"0 0 16px 0",color:"var(--theme-textMuted, #8a959e)",fontSize:"12px"},children:"Give your theme a name to save it for later use."}),h.jsx("input",{type:"text",value:Ie,onChange:O=>Ye(O.target.value),placeholder:"My Awesome Theme",style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.3)",background:"var(--theme-background, #1e2428)",color:"var(--theme-text, #c5cdd3)",fontSize:"14px",marginBottom:"16px",boxSizing:"border-box"},autoFocus:!0,onKeyDown:O=>{O.key==="Enter"&&kt(),O.key==="Escape"&&(Ee(!1),Ye(""))}}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[h.jsx("button",{onClick:()=>{Ee(!1),Ye("")},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"var(--theme-text, #c5cdd3)",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),h.jsx("button",{onClick:kt,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.5)",background:"rgba(95, 179, 179, 0.2)",color:"#5fb3b3",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:" Save Theme"})]})]})})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn("CategoryColors"),children:[h.jsxs("span",{children:[D.CategoryColors?"":""," Category Accent Colors"]}),ln&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.CategoryColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Yt).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:j.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${j.accent}55`},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.accent,onChange:P=>bt(O,"accent",P.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.background||"#0a0f14",onChange:P=>bt(O,"background",P.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),h.jsx("div",{style:{flex:1,minWidth:0},children:h.jsxs("div",{style:{fontSize:"11px",color:j.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[j.icon," ",O]})})]},O))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:$t,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:lt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn("SocketColors"),children:[h.jsxs("span",{children:[D.SocketColors?"":""," Socket Colors"]}),nn&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.SocketColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),h.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[h.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:""})," Preview Node"]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(Fe).slice(0,3).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${S0(j.color)})`,border:`2px solid ${x0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}}),h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:O})]},O))}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(Fe).slice(3).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:O}),h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${S0(j.color)})`,border:`2px solid ${x0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}})]},O))})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(Fe).map(([O,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${j.color}55`},children:[h.jsx("input",{type:"color",value:j.color,onChange:P=>hn(O,P.target.value),title:`${O} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsxs("div",{style:{fontSize:"12px",color:j.color,fontWeight:"600"},children:[j.icon," ",O]}),h.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:j.description})]})]},O))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:er,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:$a,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),GC.map(O=>h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>jn(O.category),children:[h.jsxs("span",{children:[D[O.category]?"":"",O.icon," ",O.category]}),O.testable&&D[O.category]&&h.jsx("button",{className:`settings-test-btn ${V[O.testable]?.success?"success":V[O.testable]?.success===!1?"error":""}`,onClick:j=>{j.stopPropagation(),ii(O.testable)},disabled:W[O.testable],children:W[O.testable]?" Testing...":" Test Connection"})]}),D[O.category]&&h.jsxs("div",{className:"settings-category-content",children:[V[O.testable]&&h.jsxs("div",{className:`settings-test-result ${V[O.testable].success?"success":"error"}`,children:[V[O.testable].success?"":""," ",V[O.testable].message,V[O.testable].details&&h.jsx("div",{className:"settings-test-details",children:V[O.testable].details})]}),O.category==="Location"&&h.jsxs("div",{className:"settings-location-search",children:[re&&z&&h.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),h.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:j=>de("LOCATION_CITY",j.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:j=>{j.key==="Enter"&&ie()}}),h.jsx("button",{className:"settings-test-btn",onClick:ie,disabled:Zn,style:{whiteSpace:"nowrap"},children:Zn?" Searching...":" Search City"})]}),Na&&h.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",Na]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Latitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:j=>de("LOCATION_LATITUDE",j.target.value),placeholder:"32.7767"})]}),h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Longitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:j=>de("LOCATION_LONGITUDE",j.target.value),placeholder:"-96.7970"})]})]}),h.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[h.jsx("label",{className:"settings-label",children:"Timezone"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:j=>de("LOCATION_TIMEZONE",j.target.value),placeholder:"America/Chicago"}),h.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),O.category!=="Location"&&O.settings.map(j=>h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:[j.label,j.isSecret&&h.jsx("button",{className:"settings-show-btn",onClick:()=>kr(j.key),type:"button",children:k[j.key]?" Hide":" Show"})]}),j.type==="select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:P=>de(j.key,P.target.value),children:[h.jsx("option",{value:"",children:"Select..."}),j.options.map(P=>h.jsx("option",{value:P,children:P},P))]}):j.type==="sensor-select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:P=>de(j.key,P.target.value),disabled:xe,children:[h.jsx("option",{value:"",children:xe?"Loading sensors...":"None (disabled)"}),q.map(P=>h.jsx("option",{value:P.id,children:P.name},P.id))]}):h.jsx("input",{type:j.isSecret&&!k[j.key]?"password":"text",className:"settings-input",value:r[j.key]||"",onChange:P=>de(j.key,P.target.value),placeholder:j.placeholder}),h.jsx("span",{className:"settings-key-hint",children:j.key})]},j.key))]})]},O.category))]})}),h.jsxs("div",{className:"settings-footer",children:[h.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:t,children:"Cancel"}),h.jsx("button",{className:"settings-btn settings-btn-primary",onClick:F,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const YC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function PC({isOpen:a,onClose:t}){if(x.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,t]),!a)return null;const r=s=>{s.target===s.currentTarget&&t()};return _h.createPortal(h.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:h.jsxs("div",{className:"shortcuts-modal",children:[h.jsxs("div",{className:"shortcuts-modal-header",children:[h.jsx("h2",{children:" Keyboard Shortcuts"}),h.jsx("button",{className:"shortcuts-close-btn",onClick:t,children:" Close"})]}),h.jsx("div",{className:"shortcuts-modal-body",children:YC.map((s,l)=>h.jsxs("div",{className:"shortcuts-section",children:[h.jsx("h3",{children:s.category}),h.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>h.jsxs("div",{className:"shortcut-row",children:[h.jsx("div",{className:"shortcut-keys",children:c.keys.map((p,m)=>h.jsxs(Ea.Fragment,{children:[h.jsx("kbd",{children:p}),m<c.keys.length-1&&h.jsx("span",{className:"key-separator",children:"+"})]},m))}),h.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),h.jsx("div",{className:"shortcuts-modal-footer",children:h.jsxs("p",{children:["Press ",h.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function FC({isExpanded:a,onToggle:t}){const[r,s]=x.useState([]),[l,c]=x.useState([]),[d,p]=x.useState(!0),[m,g]=x.useState(!1),[b,w]=x.useState(null),[k,E]=x.useState(!1),[D,X]=x.useState(null),[V,ee]=x.useState(null),[W,I]=x.useState({username:"",password:"",name:""}),[q,ve]=x.useState({username:"",password:""}),[xe,$]=x.useState(""),[me,ce]=x.useState(5e3),[ge,Re]=x.useState(null),_e=x.useRef(null),[Je,tt]=x.useState({});x.useEffect(()=>(Qe(),()=>{_e.current&&clearInterval(_e.current)}),[]),x.useEffect(()=>(_e.current&&clearInterval(_e.current),a&&r.length>0&&me>0&&(_e.current=setInterval(()=>{tt(_=>{const M={..._};return r.forEach(Q=>{M[Q.ip]=Date.now()}),M})},me)),()=>{_e.current&&clearInterval(_e.current)}),[a,r,me]);const Qe=async()=>{try{p(!0);const _=await gs("/api/cameras");if(_.ok){const M=await _.json();s(M.cameras||[]),M.defaultCredentials&&ve(Q=>({...Q,username:M.defaultCredentials.username||""}))}}catch{w("Failed to load cameras")}finally{p(!1)}},Y=async()=>{g(!0),w(null);try{const _=await gs("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(_.ok){const M=await _.json();if(M.found&&M.found.length>0){const Q=r.map(Ee=>Ee.ip),pe=M.found.filter(Ee=>!Q.includes(Ee.ip));c(pe),window.T2Toast&&(pe.length>0?window.T2Toast.success(`Found ${pe.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${M.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{w("Discovery failed")}finally{g(!1)}},he=async()=>{try{await gs("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(q)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{w("Failed to save credentials")}},ye=async(_,M,Q)=>{try{await gs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:_,name:M||`Camera ${_.split(".").pop()}`,username:Q?.username||q.username,password:Q?.password||q.password})}),c(pe=>pe.filter(Ee=>Ee.ip!==_)),X(null),$(""),await Qe(),window.T2Toast&&window.T2Toast.success(`Camera ${_} added!`)}catch{w("Failed to add camera")}},ze=async _=>{try{await fetch(`/api/cameras/${_}`,{method:"DELETE"}),await Qe(),ge===_&&Re(null)}catch{w("Failed to remove camera")}},J=async()=>{if(V)try{await gs("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:V,name:W.name,username:W.username,password:W.password})}),ee(null),tt(_=>({..._,[V]:Date.now()})),await Qe(),window.T2Toast&&window.T2Toast.success(`Camera ${V} updated!`)}catch{w("Failed to update camera")}},v={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},N=_=>{const M=Je[_]||Date.now();return`/api/cameras/snapshot/${_}?t=${M}`};return h.jsxs("div",{style:v.container,children:[h.jsxs("div",{style:v.header,onClick:t,children:[h.jsxs("div",{style:v.title,children:[h.jsx("span",{style:v.icon,children:""}),h.jsx("span",{children:"Cameras"}),r.length>0&&h.jsx("span",{style:v.badge,children:r.length})]}),h.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&h.jsxs("div",{style:v.content,children:[h.jsxs("div",{style:v.toolbar,children:[h.jsx("button",{style:{...v.btn,...m?v.btnActive:{}},onClick:Y,disabled:m,children:m?" Scanning...":" Discover"}),h.jsx("button",{style:{...v.btn,...k?v.btnActive:{}},onClick:()=>E(!k),children:" Settings"}),h.jsxs("select",{style:v.refreshSelect,value:me,onChange:_=>ce(Number(_.target.value)),title:"Refresh interval",children:[h.jsx("option",{value:0,children:"Manual"}),h.jsx("option",{value:2e3,children:"2s"}),h.jsx("option",{value:5e3,children:"5s"}),h.jsx("option",{value:1e4,children:"10s"}),h.jsx("option",{value:3e4,children:"30s"})]})]}),k&&h.jsxs("div",{style:v.settings,children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Select Camera to Configure"}),h.jsxs("select",{style:{...v.input,cursor:"pointer"},value:V||"",onChange:_=>{const M=_.target.value;if(!M){ee(null),I({username:"",password:"",name:""});return}const Q=r.find(pe=>pe.ip===M);Q?(ee(M),I({name:Q.name||"",username:Q.username||"",password:""})):(ee(M),I({name:`Camera ${M.split(".").pop()}`,username:q.username||"",password:q.password||""}))},children:[h.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&h.jsx("optgroup",{label:" Configured Cameras",children:r.map(_=>h.jsxs("option",{value:_.ip,children:[_.name," (",_.ip,")"]},_.ip))}),l.length>0&&h.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(_=>h.jsxs("option",{value:_.ip,children:[_.ip," (Ports: ",_.ports.join(", "),")"]},_.ip))})]})]}),V&&h.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Camera Name"}),h.jsx("input",{type:"text",style:v.input,value:W.name,onChange:_=>I(M=>({...M,name:_.target.value})),placeholder:"Front Door"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Username"}),h.jsx("input",{type:"text",style:v.input,value:W.username,onChange:_=>I(M=>({...M,username:_.target.value})),placeholder:"admin"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsxs("label",{style:v.label,children:["Password ",r.find(_=>_.ip===V)?"(leave blank to keep current)":""]}),h.jsx("input",{type:"password",style:v.input,value:W.password,onChange:_=>I(M=>({...M,password:_.target.value})),placeholder:""})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:h.jsx("button",{style:{...v.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(M=>M.ip===V)?ye(V,W.name,W):J()},children:r.find(_=>_.ip===V)?" Save Changes":" Add Camera"})})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",style:{...v.input,flex:1},value:q.username,onChange:_=>ve(M=>({...M,username:_.target.value})),placeholder:"Username"}),h.jsx("input",{type:"password",style:{...v.input,flex:1},value:q.password,onChange:_=>ve(M=>({...M,password:_.target.value})),placeholder:"Password"}),h.jsx("button",{style:v.btn,onClick:he,title:"Save as default",children:""})]})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",id:"addCameraIp",style:{...v.input,flex:1},placeholder:"192.168.1.100",onKeyDown:_=>{if(_.key==="Enter"&&_.target.value){const M=_.target.value;!l.find(Q=>Q.ip===M)&&!r.find(Q=>Q.ip===M)&&c(Q=>[...Q,{ip:M,ports:["manual"]}]),ee(M),I({name:`Camera ${M.split(".").pop()}`,username:q.username||"",password:q.password||""}),_.target.value=""}}}),h.jsx("button",{style:v.btn,onClick:()=>{const _=document.getElementById("addCameraIp"),M=_?.value;M&&(!l.find(Q=>Q.ip===M)&&!r.find(Q=>Q.ip===M)&&c(Q=>[...Q,{ip:M,ports:["manual"]}]),ee(M),I({name:`Camera ${M.split(".").pop()}`,username:q.username||"",password:q.password||""}),_.value="")},children:"Configure"})]})]})]}),b&&h.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",b]}),d?h.jsx("div",{style:v.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?h.jsxs("div",{style:v.emptyState,children:[h.jsx("p",{children:"No cameras configured"}),h.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):h.jsx("div",{style:v.grid,children:r.map(_=>h.jsxs("div",{style:{...v.cameraCard,...ge===_.ip?v.cameraCardSelected:{}},onClick:()=>Re(_.ip),children:[h.jsx("img",{src:N(_.ip),alt:_.name,style:v.cameraImage,onError:M=>{M.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),h.jsxs("div",{style:v.cameraInfo,children:[h.jsx("span",{style:v.cameraName,title:_.ip,children:_.name}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{style:{...v.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:M=>{M.stopPropagation(),E(!0),ee(_.ip),I({name:_.name||"",username:_.username||"",password:""})},title:"Edit credentials",children:""}),h.jsx("button",{style:v.deleteBtn,onClick:M=>{M.stopPropagation(),ze(_.ip)},title:"Remove camera",children:""})]})]})]},_.ip))})]}),ge&&h.jsxs("div",{style:v.fullView,onClick:()=>Re(null),children:[h.jsx("img",{src:N(ge),alt:"Camera feed",style:v.fullImage}),h.jsx("button",{style:v.closeBtn,onClick:()=>Re(null),children:" Close"}),h.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(_=>_.ip===ge)?.name||ge})]})]})}const Qa=Object.create(null);Qa.open="0";Qa.close="1";Qa.ping="2";Qa.pong="3";Qa.message="4";Qa.upgrade="5";Qa.noop="6";const Ec=Object.create(null);Object.keys(Qa).forEach(a=>{Ec[Qa[a]]=a});const dh={type:"error",data:"parser error"},Rw=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",zw=typeof ArrayBuffer=="function",Lw=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Zh=({type:a,data:t},r,s)=>Rw&&t instanceof Blob?r?s(t):k0(t,s):zw&&(t instanceof ArrayBuffer||Lw(t))?r?s(t):k0(new Blob([t]),s):s(Qa[a]+(t||"")),k0=(a,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(a)};function E0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Rf;function ZC(a,t){if(Rw&&a.data instanceof Blob)return a.data.arrayBuffer().then(E0).then(t);if(zw&&(a.data instanceof ArrayBuffer||Lw(a.data)))return t(E0(a.data));Zh(a,!1,r=>{Rf||(Rf=new TextEncoder),t(Rf.encode(r))})}const C0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Do=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<C0.length;a++)Do[C0.charCodeAt(a)]=a;const XC=a=>{let t=a.length*.75,r=a.length,s,l=0,c,d,p,m;a[a.length-1]==="="&&(t--,a[a.length-2]==="="&&t--);const g=new ArrayBuffer(t),b=new Uint8Array(g);for(s=0;s<r;s+=4)c=Do[a.charCodeAt(s)],d=Do[a.charCodeAt(s+1)],p=Do[a.charCodeAt(s+2)],m=Do[a.charCodeAt(s+3)],b[l++]=c<<2|d>>4,b[l++]=(d&15)<<4|p>>2,b[l++]=(p&3)<<6|m&63;return g},KC=typeof ArrayBuffer=="function",Xh=(a,t)=>{if(typeof a!="string")return{type:"message",data:Bw(a,t)};const r=a.charAt(0);return r==="b"?{type:"message",data:QC(a.substring(1),t)}:Ec[r]?a.length>1?{type:Ec[r],data:a.substring(1)}:{type:Ec[r]}:dh},QC=(a,t)=>{if(KC){const r=XC(a);return Bw(r,t)}else return{base64:!0,data:a}},Bw=(a,t)=>{switch(t){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},Iw="",WC=(a,t)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Zh(c,!1,p=>{s[d]=p,++l===r&&t(s.join(Iw))})})},JC=(a,t)=>{const r=a.split(Iw),s=[];for(let l=0;l<r.length;l++){const c=Xh(r[l],t);if(s.push(c),c.type==="error")break}return s};function eT(){return new TransformStream({transform(a,t){ZC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(r)})}})}let zf;function hc(a){return a.reduce((t,r)=>t+r.length,0)}function pc(a,t){if(a[0].length===t)return a.shift();const r=new Uint8Array(t);let s=0;for(let l=0;l<t;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function tT(a,t){zf||(zf=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,p){for(r.push(d);;){if(s===0){if(hc(r)<1)break;const m=pc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(hc(r)<2)break;const m=pc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(hc(r)<8)break;const m=pc(r,8),g=new DataView(m.buffer,m.byteOffset,m.length),b=g.getUint32(0);if(b>Math.pow(2,21)-1){p.enqueue(dh);break}l=b*Math.pow(2,32)+g.getUint32(4),s=3}else{if(hc(r)<l)break;const m=pc(r,l);p.enqueue(Xh(c?m:zf.decode(m),t)),s=0}if(l===0||l>a){p.enqueue(dh);break}}}})}const $w=4;function xn(a){if(a)return nT(a)}function nT(a){for(var t in xn.prototype)a[t]=xn.prototype[t];return a}xn.prototype.on=xn.prototype.addEventListener=function(a,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(t),this};xn.prototype.once=function(a,t){function r(){this.off(a,r),t.apply(this,arguments)}return r.fn=t,this.on(a,r),this};xn.prototype.off=xn.prototype.removeListener=xn.prototype.removeAllListeners=xn.prototype.removeEventListener=function(a,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===t||s.fn===t){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};xn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,t)}return this};xn.prototype.emitReserved=xn.prototype.emit;xn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};xn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Zc=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Sa=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),aT="arraybuffer";function Uw(a,...t){return t.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const rT=Sa.setTimeout,iT=Sa.clearTimeout;function Xc(a,t){t.useNativeTimers?(a.setTimeoutFn=rT.bind(Sa),a.clearTimeoutFn=iT.bind(Sa)):(a.setTimeoutFn=Sa.setTimeout.bind(Sa),a.clearTimeoutFn=Sa.clearTimeout.bind(Sa))}const sT=1.33;function oT(a){return typeof a=="string"?lT(a):Math.ceil((a.byteLength||a.size)*sT)}function lT(a){let t=0,r=0;for(let s=0,l=a.length;s<l;s++)t=a.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Hw(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function cT(a){let t="";for(let r in a)a.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return t}function uT(a){let t={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}class dT extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class Kh extends xn{constructor(t){super(),this.writable=!1,Xc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new dT(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Xh(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=cT(t);return r.length?"?"+r:""}}class fT extends Kh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};JC(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,WC(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Hw()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Vw=!1;try{Vw=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const hT=Vw;function pT(){}class mT extends fT{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class Ka extends xn{constructor(t,r,s){super(),this.createRequest=t,Xc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=Uw(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Ka.requestsCount++,Ka.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=pT,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Ka.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Ka.requestsCount=0;Ka.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",T0);else if(typeof addEventListener=="function"){const a="onpagehide"in Sa?"pagehide":"unload";addEventListener(a,T0,!1)}}function T0(){for(let a in Ka.requests)Ka.requests.hasOwnProperty(a)&&Ka.requests[a].abort()}const gT=(function(){const a=Gw({xdomain:!1});return a&&a.responseType!==null})();class yT extends mT{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=gT&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ka(Gw,this.uri(),t)}}function Gw(a){const t=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||hT))return new XMLHttpRequest}catch{}if(!t)try{return new Sa[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const qw=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class vT extends Kh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=qw?{}:Uw(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;Zh(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Zc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Hw()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Lf=Sa.WebSocket||Sa.MozWebSocket;class bT extends vT{createSocket(t,r,s){return qw?new Lf(t,r,s):r?new Lf(t,r):new Lf(t)}doWrite(t,r){this.ws.send(r)}}class wT extends Kh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=tT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),l=eT();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:p,value:m})=>{p||(this.onPacket(m),c())}).catch(p=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;this._writer.write(s).then(()=>{l&&Zc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const ST={websocket:bT,webtransport:wT,polling:yT},xT=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,kT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fh(a){if(a.length>8e3)throw"URI too long";const t=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=xT.exec(a||""),c={},d=14;for(;d--;)c[kT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=ET(c,c.path),c.queryKey=CT(c,c.query),c}function ET(a,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function CT(a,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const hh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Cc=[];hh&&addEventListener("offline",()=>{Cc.forEach(a=>a())},!1);class ei extends xn{constructor(t,r){if(super(),this.binaryType=aT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=fh(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=fh(r.host).host);Xc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=uT(this.opts.query)),hh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Cc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=$w,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ei.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",ei.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=oT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Zc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:t,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(ei.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),hh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Cc.indexOf(this._offlineEventListener);s!==-1&&Cc.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}ei.protocol=$w;class TT extends ei{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;ei.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",w=>{if(!s)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;ei.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(b(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=r.name,this.emitReserved("upgradeError",k)}}))};function c(){s||(s=!0,b(),r.close(),r=null)}const d=w=>{const k=new Error("probe error: "+w);k.transport=r.name,c(),this.emitReserved("upgradeError",k)};function p(){d("transport closed")}function m(){d("socket closed")}function g(w){r&&w.name!==r.name&&c()}const b=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",p),this.off("close",m),this.off("upgrading",g)};r.once("open",l),r.once("error",d),r.once("close",p),this.once("close",m),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let NT=class extends TT{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>ST[l]).filter(l=>!!l)),super(t,s)}};function OT(a,t="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=fh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const jT=typeof ArrayBuffer=="function",AT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,Yw=Object.prototype.toString,_T=typeof Blob=="function"||typeof Blob<"u"&&Yw.call(Blob)==="[object BlobConstructor]",DT=typeof File=="function"||typeof File<"u"&&Yw.call(File)==="[object FileConstructor]";function Qh(a){return jT&&(a instanceof ArrayBuffer||AT(a))||_T&&a instanceof Blob||DT&&a instanceof File}function Tc(a,t){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(Tc(a[r]))return!0;return!1}if(Qh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return Tc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&Tc(a[r]))return!0;return!1}function MT(a){const t=[],r=a.data,s=a;return s.data=ph(r,t),s.attachments=t.length,{packet:s,buffers:t}}function ph(a,t){if(!a)return a;if(Qh(a)){const r={_placeholder:!0,num:t.length};return t.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=ph(a[s],t);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=ph(a[s],t));return r}return a}function RT(a,t){return a.data=mh(a.data,t),delete a.attachments,a}function mh(a,t){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<t.length)return t[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=mh(a[r],t);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=mh(a[r],t));return a}const zT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],LT=5;var gt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(gt||(gt={}));class BT{constructor(t){this.replacer=t}encode(t){return(t.type===gt.EVENT||t.type===gt.ACK)&&Tc(t)?this.encodeAsBinary({type:t.type===gt.EVENT?gt.BINARY_EVENT:gt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===gt.BINARY_EVENT||t.type===gt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=MT(t),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function N0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Wh extends xn{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===gt.BINARY_EVENT;s||r.type===gt.BINARY_ACK?(r.type=s?gt.EVENT:gt.ACK,this.reconstructor=new IT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Qh(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(gt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===gt.BINARY_EVENT||s.type===gt.BINARY_ACK){const c=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(c,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(t.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(c,r)}else s.nsp="/";const l=t.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}s.id=Number(t.substring(c,r+1))}if(t.charAt(++r)){const c=this.tryParse(t.substr(r));if(Wh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case gt.CONNECT:return N0(r);case gt.DISCONNECT:return r===void 0;case gt.CONNECT_ERROR:return typeof r=="string"||N0(r);case gt.EVENT:case gt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&zT.indexOf(r[0])===-1);case gt.ACK:case gt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class IT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=RT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const $T=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Wh,Encoder:BT,get PacketType(){return gt},protocol:LT},Symbol.toStringTag,{value:"Module"}));function za(a,t,r){return a.on(t,r),function(){a.off(t,r)}}const UT=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Pw extends xn{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[za(t,"open",this.onopen.bind(this)),za(t,"packet",this.onpacket.bind(this)),za(t,"error",this.onerror.bind(this)),za(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,l,c;if(UT.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:gt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const b=this.ids++,w=r.pop();this._registerAckCallback(b,w),d.id=b}const p=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[t]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},l),d=(...p)=>{this.io.clearTimeoutFn(c),r.apply(this,p)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((s,l)=>{const c=(d,p)=>d?l(d):s(p);c.withError=!0,r.push(c),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case gt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case gt.EVENT:case gt.BINARY_EVENT:this.onevent(t);break;case gt.ACK:case gt.BINARY_ACK:this.onack(t);break;case gt.DISCONNECT:this.ondisconnect();break;case gt.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:gt.ACK,id:t,data:l}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function _s(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}_s.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*a);a=(Math.floor(t*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};_s.prototype.reset=function(){this.attempts=0};_s.prototype.setMin=function(a){this.ms=a};_s.prototype.setMax=function(a){this.max=a};_s.prototype.setJitter=function(a){this.jitter=a};class gh extends xn{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Xc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new _s({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const l=r.parser||$T;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new NT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=za(r,"open",function(){s.onopen(),t&&t()}),c=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},d=za(r,"error",c);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(za(t,"ping",this.onping.bind(this)),za(t,"data",this.ondata.bind(this)),za(t,"error",this.onerror.bind(this)),za(t,"close",this.onclose.bind(this)),za(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Zc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Pw(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const jo={};function Nc(a,t){typeof a=="object"&&(t=a,a=void 0),t=t||{};const r=OT(a,t.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=jo[l]&&c in jo[l].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let m;return p?m=new gh(s,t):(jo[l]||(jo[l]=new gh(s,t)),m=jo[l]),r.query&&!t.query&&(t.query=r.queryKey),m.socket(r.path,t)}Object.assign(Nc,{Manager:gh,Socket:Pw,io:Nc,connect:Nc});const HT=typeof window<"u"?window.location.origin:"http://localhost:3000",O0=Fc(),VT=O0?`${O0}/socket.io`:"/socket.io",be=Nc(HT,{path:VT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]});be.on("connect",()=>{console.log("[Socket] Connected - sending editor-active"),be.emit("editor-active")});const GT=()=>{be.connected||be.connect()},qT=()=>{be.connected&&be.disconnect()};class YT{constructor(){this.nodes=new Map}register(t,r){typeof t=="object"&&r===void 0&&(r=t,t=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(t,r)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values()).filter(t=>t)}getByLabel(t){for(const r of this.nodes.values())if(r.label===t)return r;return null}getByInstance(t){for(const r of this.nodes.values())if(r.nodeClass&&t instanceof r.nodeClass)return r;return null}}const Dn=new YT;class Di extends Error{}class PT extends Di{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class FT extends Di{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class ZT extends Di{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class vs extends Di{}class Fw extends Di{constructor(t){super(`Invalid unit ${t}`)}}class Vn extends Di{}class Zr extends Di{constructor(){super("Zone is an abstract class")}}const Ae="numeric",Ia="short",da="long",Bc={year:Ae,month:Ae,day:Ae},Zw={year:Ae,month:Ia,day:Ae},XT={year:Ae,month:Ia,day:Ae,weekday:Ia},Xw={year:Ae,month:da,day:Ae},Kw={year:Ae,month:da,day:Ae,weekday:da},Qw={hour:Ae,minute:Ae},Ww={hour:Ae,minute:Ae,second:Ae},Jw={hour:Ae,minute:Ae,second:Ae,timeZoneName:Ia},e1={hour:Ae,minute:Ae,second:Ae,timeZoneName:da},t1={hour:Ae,minute:Ae,hourCycle:"h23"},n1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23"},a1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:Ia},r1={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:da},i1={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae},s1={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae,second:Ae},o1={year:Ae,month:Ia,day:Ae,hour:Ae,minute:Ae},l1={year:Ae,month:Ia,day:Ae,hour:Ae,minute:Ae,second:Ae},KT={year:Ae,month:Ia,day:Ae,weekday:Ia,hour:Ae,minute:Ae},c1={year:Ae,month:da,day:Ae,hour:Ae,minute:Ae,timeZoneName:Ia},u1={year:Ae,month:da,day:Ae,hour:Ae,minute:Ae,second:Ae,timeZoneName:Ia},d1={year:Ae,month:da,day:Ae,weekday:da,hour:Ae,minute:Ae,timeZoneName:da},f1={year:Ae,month:da,day:Ae,weekday:da,hour:Ae,minute:Ae,second:Ae,timeZoneName:da};class Ds{get type(){throw new Zr}get name(){throw new Zr}get ianaName(){return this.name}get isUniversal(){throw new Zr}offsetName(t,r){throw new Zr}formatOffset(t,r){throw new Zr}offset(t){throw new Zr}equals(t){throw new Zr}get isValid(){throw new Zr}}let Bf=null;class Fo extends Ds{static get instance(){return Bf===null&&(Bf=new Fo),Bf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return E1(t,r,s)}formatOffset(t,r){return Uo(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const yh=new Map;function QT(a){let t=yh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),yh.set(a,t)),t}const WT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function JT(a,t){const r=a.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,p,m,g,b]=s;return[d,l,c,p,m,g,b]}function eN(a,t){const r=a.formatToParts(t),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],p=WT[c];c==="era"?s[p]=d:Ze(p)||(s[p]=parseInt(d,10))}return s}const If=new Map;class Wa extends Ds{static create(t){let r=If.get(t);return r===void 0&&If.set(t,r=new Wa(t)),r}static resetCache(){If.clear(),yh.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Wa.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return E1(t,r,s,this.name)}formatOffset(t,r){return Uo(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const s=QT(this.name);let[l,c,d,p,m,g,b]=s.formatToParts?eN(s,r):JT(s,r);p==="BC"&&(l=-Math.abs(l)+1);const k=Qc({year:l,month:c,day:d,hour:m===24?0:m,minute:g,second:b,millisecond:0});let E=+r;const D=E%1e3;return E-=D>=0?D:1e3+D,(k-E)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let j0={};function tN(a,t={}){const r=JSON.stringify([a,t]);let s=j0[r];return s||(s=new Intl.ListFormat(a,t),j0[r]=s),s}const vh=new Map;function bh(a,t={}){const r=JSON.stringify([a,t]);let s=vh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,t),vh.set(r,s)),s}const wh=new Map;function nN(a,t={}){const r=JSON.stringify([a,t]);let s=wh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,t),wh.set(r,s)),s}const Sh=new Map;function aN(a,t={}){const{base:r,...s}=t,l=JSON.stringify([a,s]);let c=Sh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,t),Sh.set(l,c)),c}let Mo=null;function rN(){return Mo||(Mo=new Intl.DateTimeFormat().resolvedOptions().locale,Mo)}const xh=new Map;function h1(a){let t=xh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat(a).resolvedOptions(),xh.set(a,t)),t}const kh=new Map;function iN(a){let t=kh.get(a);if(!t){const r=new Intl.Locale(a);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...p1,...t}),kh.set(a,t)}return t}function sN(a){const t=a.indexOf("-x-");t!==-1&&(a=a.substring(0,t));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=bh(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=bh(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function oN(a,t,r){return(r||t)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),t&&(a+=`-nu-${t}`)),a}function lN(a){const t=[];for(let r=1;r<=12;r++){const s=Ke.utc(2009,r,1);t.push(a(s))}return t}function cN(a){const t=[];for(let r=1;r<=7;r++){const s=Ke.utc(2016,11,13+r);t.push(a(s))}return t}function mc(a,t,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(t):s(t)}function uN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||h1(a.locale).numberingSystem==="latn"}class dN{constructor(t,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const p={useGrouping:!1,...s};s.padTo>0&&(p.minimumIntegerDigits=s.padTo),this.inf=nN(t,p)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):ap(t,3);return wn(r,this.padTo)}}}class fN{constructor(t,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const d=-1*(t.offset/60),p=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;t.offset!==0&&Wa.create(p).valid?(l=p,this.dt=t):(l="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,l=t.zone.name):(l="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=bh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class hN{constructor(t,r,s){this.opts={style:"long",...s},!r&&x1()&&(this.rtf=aN(t,s))}format(t,r){return this.rtf?this.rtf.format(t,r):RN(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const p1={firstDay:1,minimalDays:4,weekend:[6,7]};class Ot{static fromOpts(t){return Ot.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,s,l,c=!1){const d=t||tn.defaultLocale,p=d||(c?"en-US":rN()),m=r||tn.defaultNumberingSystem,g=s||tn.defaultOutputCalendar,b=Ch(l)||tn.defaultWeekSettings;return new Ot(p,m,g,b,d)}static resetCache(){Mo=null,vh.clear(),wh.clear(),Sh.clear(),xh.clear(),kh.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return Ot.create(t,r,s,l)}constructor(t,r,s,l,c){const[d,p,m]=sN(t);this.locale=d,this.numberingSystem=r||p||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=oN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=uN(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Ot.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,Ch(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return mc(this,t,N1,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:t,day:"numeric"}:{month:t},c=r?"format":"standalone";if(!this.monthsCache[c][t]){const d=s?p=>this.dtFormatter(p,l).format():p=>this.extract(p,l,"month");this.monthsCache[c][t]=lN(d)}return this.monthsCache[c][t]})}weekdays(t,r=!1){return mc(this,t,A1,()=>{const s=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},l=r?"format":"standalone";return this.weekdaysCache[l][t]||(this.weekdaysCache[l][t]=cN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][t]})}meridiems(){return mc(this,void 0,()=>_1,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Ke.utc(2016,11,13,9),Ke.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return mc(this,t,D1,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Ke.utc(-40,1,1),Ke.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,r,s){const l=this.dtFormatter(t,r),c=l.formatToParts(),d=c.find(p=>p.type.toLowerCase()===s);return d?d.value:null}numberFormatter(t={}){return new dN(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new fN(t,this.intl,r)}relFormatter(t={}){return new hN(this.intl,this.isEnglish(),t)}listFormatter(t={}){return tN(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||h1(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:k1()?iN(this.locale):p1}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let $f=null;class qn extends Ds{static get utcInstance(){return $f===null&&($f=new qn(0)),$f}static instance(t){return t===0?qn.utcInstance:new qn(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new qn(Wc(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Uo(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Uo(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Uo(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class m1 extends Ds{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Wr(a,t){if(Ze(a)||a===null)return t;if(a instanceof Ds)return a;if(bN(a)){const r=a.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Fo.instance:r==="utc"||r==="gmt"?qn.utcInstance:qn.parseSpecifier(r)||Wa.create(a)}else return ti(a)?qn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new m1(a)}const Jh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},A0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},pN=Jh.hanidec.replace(/[\[|\]]/g,"").split("");function mN(a){let t=parseInt(a,10);if(isNaN(t)){t="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Jh.hanidec)!==-1)t+=pN.indexOf(a[r]);else for(const l in A0){const[c,d]=A0[l];s>=c&&s<=d&&(t+=s-c)}}return parseInt(t,10)}else return t}const Eh=new Map;function gN(){Eh.clear()}function Da({numberingSystem:a},t=""){const r=a||"latn";let s=Eh.get(r);s===void 0&&(s=new Map,Eh.set(r,s));let l=s.get(t);return l===void 0&&(l=new RegExp(`${Jh[r]}${t}`),s.set(t,l)),l}let _0=()=>Date.now(),D0="system",M0=null,R0=null,z0=null,L0=60,B0,I0=null;class tn{static get now(){return _0}static set now(t){_0=t}static set defaultZone(t){D0=t}static get defaultZone(){return Wr(D0,Fo.instance)}static get defaultLocale(){return M0}static set defaultLocale(t){M0=t}static get defaultNumberingSystem(){return R0}static set defaultNumberingSystem(t){R0=t}static get defaultOutputCalendar(){return z0}static set defaultOutputCalendar(t){z0=t}static get defaultWeekSettings(){return I0}static set defaultWeekSettings(t){I0=Ch(t)}static get twoDigitCutoffYear(){return L0}static set twoDigitCutoffYear(t){L0=t%100}static get throwOnInvalid(){return B0}static set throwOnInvalid(t){B0=t}static resetCaches(){Ot.resetCache(),Wa.resetCache(),Ke.resetCache(),gN()}}class La{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const g1=[0,31,59,90,120,151,181,212,243,273,304,334],y1=[0,31,60,91,121,152,182,213,244,274,305,335];function xa(a,t){return new La("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function ep(a,t,r){const s=new Date(Date.UTC(a,t-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function v1(a,t,r){return r+(Zo(a)?y1:g1)[t-1]}function b1(a,t){const r=Zo(a)?y1:g1,s=r.findIndex(c=>c<t),l=t-r[s];return{month:s+1,day:l}}function tp(a,t){return(a-t+7)%7+1}function Ic(a,t=4,r=1){const{year:s,month:l,day:c}=a,d=v1(s,l,c),p=tp(ep(s,l,c),r);let m=Math.floor((d-p+14-t)/7),g;return m<1?(g=s-1,m=qo(g,t,r)):m>qo(s,t,r)?(g=s+1,m=1):g=s,{weekYear:g,weekNumber:m,weekday:p,...Jc(a)}}function $0(a,t=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=tp(ep(s,1,t),r),p=ws(s);let m=l*7+c-d-7+t,g;m<1?(g=s-1,m+=ws(g)):m>p?(g=s+1,m-=ws(s)):g=s;const{month:b,day:w}=b1(g,m);return{year:g,month:b,day:w,...Jc(a)}}function Uf(a){const{year:t,month:r,day:s}=a,l=v1(t,r,s);return{year:t,ordinal:l,...Jc(a)}}function U0(a){const{year:t,ordinal:r}=a,{month:s,day:l}=b1(t,r);return{year:t,month:s,day:l,...Jc(a)}}function H0(a,t){if(!Ze(a.localWeekday)||!Ze(a.localWeekNumber)||!Ze(a.localWeekYear)){if(!Ze(a.weekday)||!Ze(a.weekNumber)||!Ze(a.weekYear))throw new vs("Cannot mix locale-based week fields with ISO-based week fields");return Ze(a.localWeekday)||(a.weekday=a.localWeekday),Ze(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ze(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function yN(a,t=4,r=1){const s=Kc(a.weekYear),l=ka(a.weekNumber,1,qo(a.weekYear,t,r)),c=ka(a.weekday,1,7);return s?l?c?!1:xa("weekday",a.weekday):xa("week",a.weekNumber):xa("weekYear",a.weekYear)}function vN(a){const t=Kc(a.year),r=ka(a.ordinal,1,ws(a.year));return t?r?!1:xa("ordinal",a.ordinal):xa("year",a.year)}function w1(a){const t=Kc(a.year),r=ka(a.month,1,12),s=ka(a.day,1,$c(a.year,a.month));return t?r?s?!1:xa("day",a.day):xa("month",a.month):xa("year",a.year)}function S1(a){const{hour:t,minute:r,second:s,millisecond:l}=a,c=ka(t,0,23)||t===24&&r===0&&s===0&&l===0,d=ka(r,0,59),p=ka(s,0,59),m=ka(l,0,999);return c?d?p?m?!1:xa("millisecond",l):xa("second",s):xa("minute",r):xa("hour",t)}function Ze(a){return typeof a>"u"}function ti(a){return typeof a=="number"}function Kc(a){return typeof a=="number"&&a%1===0}function bN(a){return typeof a=="string"}function wN(a){return Object.prototype.toString.call(a)==="[object Date]"}function x1(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function k1(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function SN(a){return Array.isArray(a)?a:[a]}function V0(a,t,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[t(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function xN(a,t){return t.reduce((r,s)=>(r[s]=a[s],r),{})}function Ns(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function Ch(a){if(a==null)return null;if(typeof a!="object")throw new Vn("Week settings must be an object");if(!ka(a.firstDay,1,7)||!ka(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(t=>!ka(t,1,7)))throw new Vn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function ka(a,t,r){return Kc(a)&&a>=t&&a<=r}function kN(a,t){return a-t*Math.floor(a/t)}function wn(a,t=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(t,"0"):s=(""+a).padStart(t,"0"),s}function Qr(a){if(!(Ze(a)||a===null||a===""))return parseInt(a,10)}function Ei(a){if(!(Ze(a)||a===null||a===""))return parseFloat(a)}function np(a){if(!(Ze(a)||a===null||a==="")){const t=parseFloat("0."+a)*1e3;return Math.floor(t)}}function ap(a,t,r="round"){const s=10**t;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Zo(a){return a%4===0&&(a%100!==0||a%400===0)}function ws(a){return Zo(a)?366:365}function $c(a,t){const r=kN(t-1,12)+1,s=a+(t-r)/12;return r===2?Zo(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Qc(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(t=new Date(t),t.setUTCFullYear(a.year,a.month-1,a.day)),+t}function G0(a,t,r){return-tp(ep(a,1,t),r)+t-1}function qo(a,t=4,r=1){const s=G0(a,t,r),l=G0(a+1,t,r);return(ws(a)-s+l)/7}function Th(a){return a>99?a:a>tn.twoDigitCutoffYear?1900+a:2e3+a}function E1(a,t,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:t,...c},p=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return p?p.value:null}function Wc(a,t){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(t,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function C1(a){const t=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(t))throw new Vn(`Invalid unit value ${a}`);return t}function Uc(a,t){const r={};for(const s in a)if(Ns(a,s)){const l=a[s];if(l==null)continue;r[t(s)]=C1(l)}return r}function Uo(a,t){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(t){case"short":return`${l}${wn(r,2)}:${wn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${wn(r,2)}${wn(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Jc(a){return xN(a,["hour","minute","second","millisecond"])}const EN=["January","February","March","April","May","June","July","August","September","October","November","December"],T1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN=["J","F","M","A","M","J","J","A","S","O","N","D"];function N1(a){switch(a){case"narrow":return[...CN];case"short":return[...T1];case"long":return[...EN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const O1=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],j1=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],TN=["M","T","W","T","F","S","S"];function A1(a){switch(a){case"narrow":return[...TN];case"short":return[...j1];case"long":return[...O1];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const _1=["AM","PM"],NN=["Before Christ","Anno Domini"],ON=["BC","AD"],jN=["B","A"];function D1(a){switch(a){case"narrow":return[...jN];case"short":return[...ON];case"long":return[...NN];default:return null}}function AN(a){return _1[a.hour<12?0:1]}function _N(a,t){return A1(t)[a.weekday-1]}function DN(a,t){return N1(t)[a.month-1]}function MN(a,t){return D1(t)[a.year<0?0:1]}function RN(a,t,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const w=a==="days";switch(t){case 1:return w?"tomorrow":`next ${l[a][0]}`;case-1:return w?"yesterday":`last ${l[a][0]}`;case 0:return w?"today":`this ${l[a][0]}`}}const d=Object.is(t,-0)||t<0,p=Math.abs(t),m=p===1,g=l[a],b=s?m?g[1]:g[2]||g[1]:m?l[a][0]:a;return d?`${p} ${b} ago`:`in ${p} ${b}`}function q0(a,t){let r="";for(const s of a)s.literal?r+=s.val:r+=t(s.val);return r}const zN={D:Bc,DD:Zw,DDD:Xw,DDDD:Kw,t:Qw,tt:Ww,ttt:Jw,tttt:e1,T:t1,TT:n1,TTT:a1,TTTT:r1,f:i1,ff:o1,fff:c1,ffff:d1,F:s1,FF:l1,FFF:u1,FFFF:f1};class Gn{static create(t,r={}){return new Gn(t,r)}static parseFormat(t){let r=null,s="",l=!1;const c=[];for(let d=0;d<t.length;d++){const p=t.charAt(d);p==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||p===r?s+=p:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=p,r=p)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(t){return zN[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0,s=void 0){if(this.opts.forceSimple)return wn(t,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(t)}formatDateTimeFromString(t,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,D)=>this.loc.extract(t,E,D),d=E=>t.isOffsetFixed&&t.offset===0&&E.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,E.format):"",p=()=>s?AN(t):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(E,D)=>s?DN(t,E):c(D?{month:E}:{month:E,day:"numeric"},"month"),g=(E,D)=>s?_N(t,E):c(D?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),b=E=>{const D=Gn.macroTokenToFormatOpts(E);return D?this.formatWithSystemDefault(t,D):E},w=E=>s?MN(t,E):c({era:E},"era"),k=E=>{switch(E){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return p();case"d":return l?c({day:"numeric"},"day"):this.num(t.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return g("short",!0);case"cccc":return g("long",!0);case"ccccc":return g("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return g("short",!1);case"EEEE":return g("long",!1);case"EEEEE":return g("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(t.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(t.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(t.year,6);case"G":return w("short");case"GG":return w("long");case"GGGGG":return w("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return b(E)}};return q0(Gn.parseFormat(r),k)}formatDurationFromString(t,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=b=>{switch(b[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(b,w)=>k=>{const E=l(k);if(E){const D=w.isNegativeDuration&&E!==w.largestUnit?s:1;let X;return this.opts.signMode==="negativeLargestOnly"&&E!==w.largestUnit?X="never":this.opts.signMode==="all"?X="always":X="auto",this.num(b.get(E)*D,k.length,X)}else return k},d=Gn.parseFormat(r),p=d.reduce((b,{literal:w,val:k})=>w?b:b.concat(k),[]),m=t.shiftTo(...p.map(l).filter(b=>b)),g={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return q0(d,c(m,g))}}const M1=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ms(...a){const t=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${t}$`)}function Rs(...a){return t=>a.reduce(([r,s,l],c)=>{const[d,p,m]=c(t,l);return[{...r,...d},p||s,m]},[{},null,1]).slice(0,2)}function zs(a,...t){if(a==null)return[null,null];for(const[r,s]of t){const l=r.exec(a);if(l)return s(l)}return[null,null]}function R1(...a){return(t,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Qr(t[r+l]);return[s,null,r+l]}}const z1=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,LN=`(?:${z1.source}?(?:\\[(${M1.source})\\])?)?`,rp=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,L1=RegExp(`${rp.source}${LN}`),ip=RegExp(`(?:[Tt]${L1.source})?`),BN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,IN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,$N=/(\d{4})-?(\d{3})/,UN=R1("weekYear","weekNumber","weekDay"),HN=R1("year","ordinal"),VN=/(\d{4})-(\d\d)-(\d\d)/,B1=RegExp(`${rp.source} ?(?:${z1.source}|(${M1.source}))?`),GN=RegExp(`(?: ${B1.source})?`);function Ss(a,t,r){const s=a[t];return Ze(s)?r:Qr(s)}function qN(a,t){return[{year:Ss(a,t),month:Ss(a,t+1,1),day:Ss(a,t+2,1)},null,t+3]}function Ls(a,t){return[{hours:Ss(a,t,0),minutes:Ss(a,t+1,0),seconds:Ss(a,t+2,0),milliseconds:np(a[t+3])},null,t+4]}function Xo(a,t){const r=!a[t]&&!a[t+1],s=Wc(a[t+1],a[t+2]),l=r?null:qn.instance(s);return[{},l,t+3]}function Ko(a,t){const r=a[t]?Wa.create(a[t]):null;return[{},r,t+1]}const YN=RegExp(`^T?${rp.source}$`),PN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function FN(a){const[t,r,s,l,c,d,p,m,g]=a,b=t[0]==="-",w=m&&m[0]==="-",k=(E,D=!1)=>E!==void 0&&(D||E&&b)?-E:E;return[{years:k(Ei(r)),months:k(Ei(s)),weeks:k(Ei(l)),days:k(Ei(c)),hours:k(Ei(d)),minutes:k(Ei(p)),seconds:k(Ei(m),m==="-0"),milliseconds:k(np(g),w)}]}const ZN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function sp(a,t,r,s,l,c,d){const p={year:t.length===2?Th(Qr(t)):Qr(t),month:T1.indexOf(r)+1,day:Qr(s),hour:Qr(l),minute:Qr(c)};return d&&(p.second=Qr(d)),a&&(p.weekday=a.length>3?O1.indexOf(a)+1:j1.indexOf(a)+1),p}const XN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function KN(a){const[,t,r,s,l,c,d,p,m,g,b,w]=a,k=sp(t,l,s,r,c,d,p);let E;return m?E=ZN[m]:g?E=0:E=Wc(b,w),[k,new qn(E)]}function QN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const WN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,JN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,eO=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Y0(a){const[,t,r,s,l,c,d,p]=a;return[sp(t,l,s,r,c,d,p),qn.utcInstance]}function tO(a){const[,t,r,s,l,c,d,p]=a;return[sp(t,p,r,s,l,c,d),qn.utcInstance]}const nO=Ms(BN,ip),aO=Ms(IN,ip),rO=Ms($N,ip),iO=Ms(L1),I1=Rs(qN,Ls,Xo,Ko),sO=Rs(UN,Ls,Xo,Ko),oO=Rs(HN,Ls,Xo,Ko),lO=Rs(Ls,Xo,Ko);function cO(a){return zs(a,[nO,I1],[aO,sO],[rO,oO],[iO,lO])}function uO(a){return zs(QN(a),[XN,KN])}function dO(a){return zs(a,[WN,Y0],[JN,Y0],[eO,tO])}function fO(a){return zs(a,[PN,FN])}const hO=Rs(Ls);function pO(a){return zs(a,[YN,hO])}const mO=Ms(VN,GN),gO=Ms(B1),yO=Rs(Ls,Xo,Ko);function vO(a){return zs(a,[mO,I1],[gO,yO])}const P0="Invalid Duration",$1={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},bO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...$1},wa=146097/400,hs=146097/4800,wO={years:{quarters:4,months:12,weeks:wa/7,days:wa,hours:wa*24,minutes:wa*24*60,seconds:wa*24*60*60,milliseconds:wa*24*60*60*1e3},quarters:{months:3,weeks:wa/28,days:wa/4,hours:wa*24/4,minutes:wa*24*60/4,seconds:wa*24*60*60/4,milliseconds:wa*24*60*60*1e3/4},months:{weeks:hs/7,days:hs,hours:hs*24,minutes:hs*24*60,seconds:hs*24*60*60,milliseconds:hs*24*60*60*1e3},...$1},Oi=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],SO=Oi.slice(0).reverse();function wr(a,t,r=!1){const s={values:r?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new yt(s)}function U1(a,t){let r=t.milliseconds??0;for(const s of SO.slice(1))t[s]&&(r+=t[s]*a[s].milliseconds);return r}function F0(a,t){const r=U1(a,t)<0?-1:1;Oi.reduceRight((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]*r,d=a[l][s],p=Math.floor(c/d);t[l]+=p*r,t[s]-=p*d*r}return l},null),Oi.reduce((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]%1;t[s]-=c,t[l]+=c*a[s][l]}return l},null)}function Z0(a){const t={};for(const[r,s]of Object.entries(a))s!==0&&(t[r]=s);return t}class yt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let s=r?wO:bO;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||Ot.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,r){return yt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Vn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new yt({values:Uc(t,yt.normalizeUnit),loc:Ot.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(ti(t))return yt.fromMillis(t);if(yt.isDuration(t))return t;if(typeof t=="object")return yt.fromObject(t);throw new Vn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[s]=fO(t);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[s]=pO(t);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Duration is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new ZT(s);return new yt({invalid:s})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new Fw(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Gn.create(this.loc,s).formatDurationFromString(this,t):P0}toHuman(t={}){if(!this.isValid)return P0;const r=t.showZeros!==!1,s=Oi.map(l=>{const c=this.values[l];return Ze(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=ap(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Ke.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?U1(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t),s={};for(const l of Oi)(Ns(r.values,l)||Ns(this.values,l))&&(s[l]=r.get(l)+this.get(l));return wr(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=C1(t(this.values[s],s));return wr(this,{values:r},!0)}get(t){return this[yt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...Uc(t,yt.normalizeUnit)};return wr(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:l,conversionAccuracy:s};return wr(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return F0(this.matrix,t),wr(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=Z0(this.normalize().shiftToAll().toObject());return wr(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(d=>yt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of Oi)if(t.indexOf(d)>=0){c=d;let p=0;for(const g in s)p+=this.matrix[g][d]*s[g],s[g]=0;ti(l[d])&&(p+=l[d]);const m=Math.trunc(p);r[d]=m,s[d]=(p*1e3-m*1e3)/1e3}else ti(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return F0(this.matrix,r),wr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return wr(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=Z0(this.values);return wr(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of Oi)if(!r(this.values[s],t.values[s]))return!1;return!0}}const ps="Invalid Interval";function xO(a,t){return!a||!a.isValid?en.invalid("missing or invalid start"):!t||!t.isValid?en.invalid("missing or invalid end"):t<a?en.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null}class en{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Interval is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new FT(s);return new en({invalid:s})}static fromDateTimes(t,r){const s=Ao(t),l=Ao(r),c=xO(s,l);return c??new en({start:s,end:l})}static after(t,r){const s=yt.fromDurationLike(r),l=Ao(t);return en.fromDateTimes(l,l.plus(s))}static before(t,r){const s=yt.fromDurationLike(r),l=Ao(t);return en.fromDateTimes(l.minus(s),l)}static fromISO(t,r){const[s,l]=(t||"").split("/",2);if(s&&l){let c,d;try{c=Ke.fromISO(s,r),d=c.isValid}catch{d=!1}let p,m;try{p=Ke.fromISO(l,r),m=p.isValid}catch{m=!1}if(d&&m)return en.fromDateTimes(c,p);if(d){const g=yt.fromISO(l,r);if(g.isValid)return en.after(c,g)}else if(m){const g=yt.fromISO(s,r);if(g.isValid)return en.before(p,g)}}return en.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(t,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(t,r),Math.floor(l.diff(s,t).get(t))+(l.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?en.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Ao).filter(d=>this.contains(d)).sort((d,p)=>d.toMillis()-p.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,p=+d>+this.e?this.e:d;s.push(en.fromDateTimes(l,p)),l=p,c+=1}return s}splitBy(t){const r=yt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const p=this.start.plus(r.mapUnits(m=>m*l));c=+p>+this.e?this.e:p,d.push(en.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return r>=s?null:en.fromDateTimes(r,s)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return en.fromDateTimes(r,s)}static merge(t){const[r,s]=t.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(t){let r=null,s=0;const l=[],c=t.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),p=d.sort((m,g)=>m.time-g.time);for(const m of p)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(en.fromDateTimes(r,m.time)),r=null);return en.merge(l)}difference(...t){return en.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:ps}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Bc,r={}){return this.isValid?Gn.create(this.s.loc.clone(r),t).formatInterval(this):ps}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:ps}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:ps}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:ps}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:ps}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):yt.invalid(this.invalidReason)}mapEndpoints(t){return en.fromDateTimes(t(this.s),t(this.e))}}class Ro{static hasDST(t=tn.defaultZone){const r=Ke.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Wa.isValidZone(t)}static normalizeZone(t){return Wr(t,tn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||Ot.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||Ot.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||Ot.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Ot.create(r,s,c)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||Ot.create(r,s,c)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Ot.create(r,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||Ot.create(r,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Ot.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Ot.create(r,null,"gregory").eras(t)}static features(){return{relative:x1(),localeWeek:k1()}}}function X0(a,t){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(t)-r(a);return Math.floor(yt.fromMillis(s).as("days"))}function kO(a,t,r){const s=[["years",(m,g)=>g.year-m.year],["quarters",(m,g)=>g.quarter-m.quarter+(g.year-m.year)*4],["months",(m,g)=>g.month-m.month+(g.year-m.year)*12],["weeks",(m,g)=>{const b=X0(m,g);return(b-b%7)/7}],["days",X0]],l={},c=a;let d,p;for(const[m,g]of s)r.indexOf(m)>=0&&(d=m,l[m]=g(a,t),p=c.plus(l),p>t?(l[m]--,a=c.plus(l),a>t&&(p=a,l[m]--,a=c.plus(l))):a=p);return[a,l,p,d]}function EO(a,t,r,s){let[l,c,d,p]=kO(a,t,r);const m=t-l,g=r.filter(w=>["hours","minutes","seconds","milliseconds"].indexOf(w)>=0);g.length===0&&(d<t&&(d=l.plus({[p]:1})),d!==l&&(c[p]=(c[p]||0)+m/(d-l)));const b=yt.fromObject(c,s);return g.length>0?yt.fromMillis(m,s).shiftTo(...g).plus(b):b}const CO="missing Intl.DateTimeFormat.formatToParts support";function Tt(a,t=r=>r){return{regex:a,deser:([r])=>t(mN(r))}}const TO="",H1=`[ ${TO}]`,V1=new RegExp(H1,"g");function NO(a){return a.replace(/\./g,"\\.?").replace(V1,H1)}function K0(a){return a.replace(/\./g,"").replace(V1," ").toLowerCase()}function Ma(a,t){return a===null?null:{regex:RegExp(a.map(NO).join("|")),deser:([r])=>a.findIndex(s=>K0(r)===K0(s))+t}}function Q0(a,t){return{regex:a,deser:([,r,s])=>Wc(r,s),groups:t}}function gc(a){return{regex:a,deser:([t])=>t}}function OO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function jO(a,t){const r=Da(t),s=Da(t,"{2}"),l=Da(t,"{3}"),c=Da(t,"{4}"),d=Da(t,"{6}"),p=Da(t,"{1,2}"),m=Da(t,"{1,3}"),g=Da(t,"{1,6}"),b=Da(t,"{1,9}"),w=Da(t,"{2,4}"),k=Da(t,"{4,6}"),E=V=>({regex:RegExp(OO(V.val)),deser:([ee])=>ee,literal:!0}),X=(V=>{if(a.literal)return E(V);switch(V.val){case"G":return Ma(t.eras("short"),0);case"GG":return Ma(t.eras("long"),0);case"y":return Tt(g);case"yy":return Tt(w,Th);case"yyyy":return Tt(c);case"yyyyy":return Tt(k);case"yyyyyy":return Tt(d);case"M":return Tt(p);case"MM":return Tt(s);case"MMM":return Ma(t.months("short",!0),1);case"MMMM":return Ma(t.months("long",!0),1);case"L":return Tt(p);case"LL":return Tt(s);case"LLL":return Ma(t.months("short",!1),1);case"LLLL":return Ma(t.months("long",!1),1);case"d":return Tt(p);case"dd":return Tt(s);case"o":return Tt(m);case"ooo":return Tt(l);case"HH":return Tt(s);case"H":return Tt(p);case"hh":return Tt(s);case"h":return Tt(p);case"mm":return Tt(s);case"m":return Tt(p);case"q":return Tt(p);case"qq":return Tt(s);case"s":return Tt(p);case"ss":return Tt(s);case"S":return Tt(m);case"SSS":return Tt(l);case"u":return gc(b);case"uu":return gc(p);case"uuu":return Tt(r);case"a":return Ma(t.meridiems(),0);case"kkkk":return Tt(c);case"kk":return Tt(w,Th);case"W":return Tt(p);case"WW":return Tt(s);case"E":case"c":return Tt(r);case"EEE":return Ma(t.weekdays("short",!1),1);case"EEEE":return Ma(t.weekdays("long",!1),1);case"ccc":return Ma(t.weekdays("short",!0),1);case"cccc":return Ma(t.weekdays("long",!0),1);case"Z":case"ZZ":return Q0(new RegExp(`([+-]${p.source})(?::(${s.source}))?`),2);case"ZZZ":return Q0(new RegExp(`([+-]${p.source})(${s.source})?`),2);case"z":return gc(/[a-z_+-/]{1,256}?/i);case" ":return gc(/[^\S\n\r]/);default:return E(V)}})(a)||{invalidReason:CO};return X.token=a,X}const AO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function _O(a,t,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=t[s];let d=s;s==="hour"&&(t.hour12!=null?d=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let p=AO[d];if(typeof p=="object"&&(p=p[c]),p)return{literal:!1,val:p}}function DO(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function MO(a,t,r){const s=a.match(t);if(s){const l={};let c=1;for(const d in r)if(Ns(r,d)){const p=r[d],m=p.groups?p.groups+1:1;!p.literal&&p.token&&(l[p.token.val[0]]=p.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function RO(a){const t=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ze(a.z)||(r=Wa.create(a.z)),Ze(a.Z)||(r||(r=new qn(a.Z)),s=a.Z),Ze(a.q)||(a.M=(a.q-1)*3+1),Ze(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ze(a.u)||(a.S=np(a.u)),[Object.keys(a).reduce((c,d)=>{const p=t(d);return p&&(c[p]=a[d]),c},{}),r,s]}let Hf=null;function zO(){return Hf||(Hf=Ke.fromMillis(1555555555555)),Hf}function LO(a,t){if(a.literal)return a;const r=Gn.macroTokenToFormatOpts(a.val),s=P1(r,t);return s==null||s.includes(void 0)?a:s}function G1(a,t){return Array.prototype.concat(...a.map(r=>LO(r,t)))}class q1{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=G1(Gn.parseFormat(r),t),this.units=this.tokens.map(s=>jO(s,t)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=DO(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(t){if(this.isValid){const[r,s]=MO(t,this.regex,this.handlers),[l,c,d]=s?RO(s):[null,null,void 0];if(Ns(s,"a")&&Ns(s,"H"))throw new vs("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function Y1(a,t,r){return new q1(a,r).explainFromTokens(t)}function BO(a,t,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=Y1(a,t,r);return[s,l,c,d]}function P1(a,t){if(!a)return null;const s=Gn.create(t,a).dtFormatter(zO()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>_O(d,a,c))}const Vf="Invalid DateTime",W0=864e13;function zo(a){return new La("unsupported zone",`the zone "${a.name}" is not supported`)}function Gf(a){return a.weekData===null&&(a.weekData=Ic(a.c)),a.weekData}function qf(a){return a.localWeekData===null&&(a.localWeekData=Ic(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function Ci(a,t){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Ke({...r,...t,old:r})}function F1(a,t,r){let s=a-t*60*1e3;const l=r.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function yc(a,t){a+=t*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Oc(a,t,r){return F1(Qc(a),t,r)}function J0(a,t){const r=a.o,s=a.c.year+Math.trunc(t.years),l=a.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,$c(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},d=yt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),p=Qc(c);let[m,g]=F1(p,r,a.zone);return d!==0&&(m+=d,g=a.zone.offset(m)),{ts:m,o:g}}function ms(a,t,r,s,l,c){const{setZone:d,zone:p}=r;if(a&&Object.keys(a).length!==0||t){const m=t||p,g=Ke.fromObject(a,{...r,zone:m,specificOffset:c});return d?g:g.setZone(p)}else return Ke.invalid(new La("unparsable",`the input "${l}" can't be parsed as ${s}`))}function vc(a,t,r=!0){return a.isValid?Gn.create(Ot.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Yf(a,t,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=wn(a.c.year,s?6:4),r==="year")return l;if(t){if(l+="-",l+=wn(a.c.month),r==="month")return l;l+="-"}else if(l+=wn(a.c.month),r==="month")return l;return l+=wn(a.c.day),l}function eb(a,t,r,s,l,c,d){let p=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=wn(a.c.hour),d==="hour")break;if(t){if(m+=":",m+=wn(a.c.minute),d==="minute")break;p&&(m+=":",m+=wn(a.c.second))}else{if(m+=wn(a.c.minute),d==="minute")break;p&&(m+=wn(a.c.second))}if(d==="second")break;p&&(!s||a.c.millisecond!==0)&&(m+=".",m+=wn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=wn(Math.trunc(-a.o/60)),m+=":",m+=wn(Math.trunc(-a.o%60))):(m+="+",m+=wn(Math.trunc(a.o/60)),m+=":",m+=wn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Z1={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},IO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},$O={ordinal:1,hour:0,minute:0,second:0,millisecond:0},jc=["year","month","day","hour","minute","second","millisecond"],UO=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],HO=["year","ordinal","hour","minute","second","millisecond"];function Ac(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new Fw(a);return t}function tb(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return Ac(a)}}function VO(a){if(Lo===void 0&&(Lo=tn.now()),a.type!=="iana")return a.offset(Lo);const t=a.name;let r=Nh.get(t);return r===void 0&&(r=a.offset(Lo),Nh.set(t,r)),r}function nb(a,t){const r=Wr(t.zone,tn.defaultZone);if(!r.isValid)return Ke.invalid(zo(r));const s=Ot.fromObject(t);let l,c;if(Ze(a.year))l=tn.now();else{for(const m of jc)Ze(a[m])&&(a[m]=Z1[m]);const d=w1(a)||S1(a);if(d)return Ke.invalid(d);const p=VO(r);[l,c]=Oc(a,p,r)}return new Ke({ts:l,zone:r,loc:s,o:c})}function ab(a,t,r){const s=Ze(r.round)?!0:r.round,l=Ze(r.rounding)?"trunc":r.rounding,c=(p,m)=>(p=ap(p,s||r.calendary?0:2,r.calendary?"round":l),t.loc.clone(r).relFormatter(r).format(p,m)),d=p=>r.calendary?t.hasSame(a,p)?0:t.startOf(p).diff(a.startOf(p),p).get(p):t.diff(a,p).get(p);if(r.unit)return c(d(r.unit),r.unit);for(const p of r.units){const m=d(p);if(Math.abs(m)>=1)return c(m,p)}return c(a>t?-0:0,r.units[r.units.length-1])}function rb(a){let t={},r;return a.length>0&&typeof a[a.length-1]=="object"?(t=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[t,r]}let Lo;const Nh=new Map;class Ke{constructor(t){const r=t.zone||tn.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new La("invalid input"):null)||(r.isValid?null:zo(r));this.ts=Ze(t.ts)?tn.now():t.ts;let l=null,c=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[l,c]=[t.old.c,t.old.o];else{const p=ti(t.o)&&!t.old?t.o:r.offset(this.ts);l=yc(this.ts,p),s=Number.isNaN(l.year)?new La("invalid input"):null,l=s?null:l,c=s?null:p}this._zone=r,this.loc=t.loc||Ot.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Ke({})}static local(){const[t,r]=rb(arguments),[s,l,c,d,p,m,g]=r;return nb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static utc(){const[t,r]=rb(arguments),[s,l,c,d,p,m,g]=r;return t.zone=qn.utcInstance,nb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static fromJSDate(t,r={}){const s=wN(t)?t.valueOf():NaN;if(Number.isNaN(s))return Ke.invalid("invalid input");const l=Wr(r.zone,tn.defaultZone);return l.isValid?new Ke({ts:s,zone:l,loc:Ot.fromObject(r)}):Ke.invalid(zo(l))}static fromMillis(t,r={}){if(ti(t))return t<-W0||t>W0?Ke.invalid("Timestamp out of range"):new Ke({ts:t,zone:Wr(r.zone,tn.defaultZone),loc:Ot.fromObject(r)});throw new Vn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(ti(t))return new Ke({ts:t*1e3,zone:Wr(r.zone,tn.defaultZone),loc:Ot.fromObject(r)});throw new Vn("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const s=Wr(r.zone,tn.defaultZone);if(!s.isValid)return Ke.invalid(zo(s));const l=Ot.fromObject(r),c=Uc(t,tb),{minDaysInFirstWeek:d,startOfWeek:p}=H0(c,l),m=tn.now(),g=Ze(r.specificOffset)?s.offset(m):r.specificOffset,b=!Ze(c.ordinal),w=!Ze(c.year),k=!Ze(c.month)||!Ze(c.day),E=w||k,D=c.weekYear||c.weekNumber;if((E||b)&&D)throw new vs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(k&&b)throw new vs("Can't mix ordinal dates with month/day");const X=D||c.weekday&&!E;let V,ee,W=yc(m,g);X?(V=UO,ee=IO,W=Ic(W,d,p)):b?(V=HO,ee=$O,W=Uf(W)):(V=jc,ee=Z1);let I=!1;for(const ge of V){const Re=c[ge];Ze(Re)?I?c[ge]=ee[ge]:c[ge]=W[ge]:I=!0}const q=X?yN(c,d,p):b?vN(c):w1(c),ve=q||S1(c);if(ve)return Ke.invalid(ve);const xe=X?$0(c,d,p):b?U0(c):c,[$,me]=Oc(xe,g,s),ce=new Ke({ts:$,zone:s,o:me,loc:l});return c.weekday&&E&&t.weekday!==ce.weekday?Ke.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${ce.toISO()}`):ce.isValid?ce:Ke.invalid(ce.invalid)}static fromISO(t,r={}){const[s,l]=cO(t);return ms(s,l,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[s,l]=uO(t);return ms(s,l,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[s,l]=dO(t);return ms(s,l,r,"HTTP",r)}static fromFormat(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=Ot.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[p,m,g,b]=BO(d,t,r);return b?Ke.invalid(b):ms(p,m,s,`format ${r}`,t,g)}static fromString(t,r,s={}){return Ke.fromFormat(t,r,s)}static fromSQL(t,r={}){const[s,l]=vO(t);return ms(s,l,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the DateTime is invalid");const s=t instanceof La?t:new La(t,r);if(tn.throwOnInvalid)throw new PT(s);return new Ke({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const s=P1(t,Ot.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(t,r={}){return G1(Gn.parseFormat(t),Ot.fromObject(r)).map(l=>l.val).join("")}static resetCache(){Lo=void 0,Nh.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Gf(this).weekYear:NaN}get weekNumber(){return this.isValid?Gf(this).weekNumber:NaN}get weekday(){return this.isValid?Gf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?qf(this).weekday:NaN}get localWeekNumber(){return this.isValid?qf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?qf(this).weekYear:NaN}get ordinal(){return this.isValid?Uf(this.c).ordinal:NaN}get monthShort(){return this.isValid?Ro.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Ro.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Ro.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Ro.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,s=Qc(this.c),l=this.zone.offset(s-t),c=this.zone.offset(s+t),d=this.zone.offset(s-l*r),p=this.zone.offset(s-c*r);if(d===p)return[this];const m=s-d*r,g=s-p*r,b=yc(m,d),w=yc(g,p);return b.hour===w.hour&&b.minute===w.minute&&b.second===w.second&&b.millisecond===w.millisecond?[Ci(this,{ts:m}),Ci(this,{ts:g})]:[this]}get isInLeapYear(){return Zo(this.year)}get daysInMonth(){return $c(this.year,this.month)}get daysInYear(){return this.isValid?ws(this.year):NaN}get weeksInWeekYear(){return this.isValid?qo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?qo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:s,calendar:l}=Gn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(t=0,r={}){return this.setZone(qn.instance(t),r)}toLocal(){return this.setZone(tn.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(t=Wr(t,tn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(r||s){const c=t.offset(this.ts),d=this.toObject();[l]=Oc(d,c,t)}return Ci(this,{ts:l,zone:t})}else return Ke.invalid(zo(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:s});return Ci(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=Uc(t,tb),{minDaysInFirstWeek:s,startOfWeek:l}=H0(r,this.loc),c=!Ze(r.weekYear)||!Ze(r.weekNumber)||!Ze(r.weekday),d=!Ze(r.ordinal),p=!Ze(r.year),m=!Ze(r.month)||!Ze(r.day),g=p||m,b=r.weekYear||r.weekNumber;if((g||d)&&b)throw new vs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new vs("Can't mix ordinal dates with month/day");let w;c?w=$0({...Ic(this.c,s,l),...r},s,l):Ze(r.ordinal)?(w={...this.toObject(),...r},Ze(r.day)&&(w.day=Math.min($c(w.year,w.month),w.day))):w=U0({...Uf(this.c),...r});const[k,E]=Oc(w,this.o,this.zone);return Ci(this,{ts:k,o:E})}plus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t);return Ci(this,J0(this,r))}minus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t).negate();return Ci(this,J0(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=yt.normalizeUnit(t);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Gn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Vf}toLocaleString(t=Bc,r={}){return this.isValid?Gn.create(this.loc.clone(r),t).formatDateTime(this):Vf}toLocaleParts(t={}){return this.isValid?Gn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=Ac(d);const p=t==="extended";let m=Yf(this,p,d);return jc.indexOf(d)>=3&&(m+="T"),m+=eb(this,p,r,s,l,c,d),m}toISODate({format:t="extended",precision:r="day"}={}){return this.isValid?Yf(this,t==="extended",Ac(r)):null}toISOWeekDate(){return vc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:p="milliseconds"}={}){return this.isValid?(p=Ac(p),(l&&jc.indexOf(p)>=3?"T":"")+eb(this,d==="extended",r,t,s,c,p)):null}toRFC2822(){return vc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return vc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Yf(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||t)&&(s&&(l+=" "),r?l+="z":t&&(l+="ZZ")),vc(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Vf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",s={}){if(!this.isValid||!t.isValid)return yt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=SN(r).map(yt.normalizeUnit),d=t.valueOf()>this.valueOf(),p=d?this:t,m=d?t:this,g=EO(p,m,c,l);return d?g.negate():g}diffNow(t="milliseconds",r={}){return this.diff(Ke.now(),t,r)}until(t){return this.isValid?en.fromDateTimes(this,t):this}hasSame(t,r,s){if(!this.isValid)return!1;const l=t.valueOf(),c=this.setZone(t.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Ke.fromObject({},{zone:this.zone}),s=t.padding?this<r?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=t.unit;return Array.isArray(t.unit)&&(l=t.unit,c=void 0),ab(r,this.plus(s),{...t,numeric:"always",units:l,unit:c})}toRelativeCalendar(t={}){return this.isValid?ab(t.base||Ke.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Ke.isDateTime))throw new Vn("min requires all arguments be DateTimes");return V0(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Ke.isDateTime))throw new Vn("max requires all arguments be DateTimes");return V0(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=Ot.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return Y1(d,t,r)}static fromStringExplain(t,r,s={}){return Ke.fromFormatExplain(t,r,s)}static buildFormatParser(t,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=Ot.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new q1(c,t)}static fromFormatParser(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=Ot.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new Vn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:p,zone:m,specificOffset:g,invalidReason:b}=r.explainFromTokens(t);return b?Ke.invalid(b):ms(p,m,s,`format ${r.format}`,t,g)}static get DATE_SHORT(){return Bc}static get DATE_MED(){return Zw}static get DATE_MED_WITH_WEEKDAY(){return XT}static get DATE_FULL(){return Xw}static get DATE_HUGE(){return Kw}static get TIME_SIMPLE(){return Qw}static get TIME_WITH_SECONDS(){return Ww}static get TIME_WITH_SHORT_OFFSET(){return Jw}static get TIME_WITH_LONG_OFFSET(){return e1}static get TIME_24_SIMPLE(){return t1}static get TIME_24_WITH_SECONDS(){return n1}static get TIME_24_WITH_SHORT_OFFSET(){return a1}static get TIME_24_WITH_LONG_OFFSET(){return r1}static get DATETIME_SHORT(){return i1}static get DATETIME_SHORT_WITH_SECONDS(){return s1}static get DATETIME_MED(){return o1}static get DATETIME_MED_WITH_SECONDS(){return l1}static get DATETIME_MED_WITH_WEEKDAY(){return KT}static get DATETIME_FULL(){return c1}static get DATETIME_FULL_WITH_SECONDS(){return u1}static get DATETIME_HUGE(){return d1}static get DATETIME_HUGE_WITH_SECONDS(){return f1}}function Ao(a){if(Ke.isDateTime(a))return a;if(a&&a.valueOf&&ti(a.valueOf()))return Ke.fromJSDate(a);if(a&&typeof a=="object")return Ke.fromObject(a);throw new Vn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const GO="3.7.2",qO=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Ke,Duration:yt,FixedOffsetZone:qn,IANAZone:Wa,Info:Ro,Interval:en,InvalidZone:m1,Settings:tn,SystemZone:Fo,VERSION:GO,Zone:Ds},Symbol.toStringTag,{value:"Module"}));window.Rete=B2;window.React=l2;window.RefComponent=Yh;window.luxon=qO;window.nodeRegistry=Dn;window.sockets=Aw;window.socket=be;window.apiUrl=Tn;window.getApiBase=Fc;window.apiFetch=async function(a,t={}){const r=Tn(a);return fetch(r,t)};let ni={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Oh=new Set;function X1(a){return Oh.add(a),a({...ni}),()=>Oh.delete(a)}function Xr(a){ni={...ni,...a},Oh.forEach(t=>t({...ni}))}function YO(){return{...ni}}async function PO(){Xr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(Tn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const t=await a.json(),r=t.length,s=t.filter(m=>m.includes("/00_")),l=t.filter(m=>!m.includes("/00_"));Xr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const g=m.split("/").pop().replace(".js","");Xr({status:`Loading ${g}...`});try{await ib(Tn(m)),c++,Xr({loadedCount:c,progress:Math.round(c/r*100)})}catch(b){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,b),ni.failedPlugins.push({name:g,error:b.message})}}Xr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const g=m.split("/").pop().replace(".js","");try{return await ib(Tn(m)),c++,Xr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:g}}catch(b){return console.error(`[PluginLoader] Failed to load ${m}`,b),ni.failedPlugins.push({name:g,error:b.message}),{success:!1,name:g,error:b.message}}})),p=ni.failedPlugins.length;Xr({isLoading:!1,progress:100,status:p>0?`Loaded ${c} plugins (${p} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Xr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function ib(a){return new Promise((t,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=t,s.onerror=r,document.body.appendChild(s)})}const K1=x.createContext(null),sb={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function FO({id:a,type:t,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[p,m]=x.useState(!1),g=sb[t]||sb.info;x.useEffect(()=>{if(s>0){const k=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(k)}},[a,s,l]);const b=()=>{m(!0),setTimeout(()=>l(a),300)},w=()=>{c&&c(),b()};return h.jsxs("div",{className:`toast ${g.className} ${p?"toast-exit":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.icon}),h.jsx("span",{className:"toast-message",children:r}),c&&d&&h.jsx("button",{className:"toast-action",onClick:w,children:d}),h.jsx("button",{className:"toast-close",onClick:b,children:""})]})}function ZO({children:a}){const[t,r]=x.useState([]);let s=0;const l=x.useCallback((p,m,g={})=>{const b=++s,w=typeof g=="number"?g:g.duration??4e3,k=typeof g=="object"?g.action:null,E=typeof g=="object"?g.actionLabel:null;return r(D=>[...D,{id:b,type:p,message:m,duration:w,action:k,actionLabel:E}]),b},[]),c=x.useCallback(p=>{r(m=>m.filter(g=>g.id!==p))},[]),d={success:(p,m)=>l("success",p,m),error:(p,m)=>l("error",p,typeof m=="number"?m:{duration:6e3,...m}),warning:(p,m)=>l("warning",p,m),info:(p,m)=>l("info",p,m),dismiss:c,dismissAll:()=>r([])};return h.jsxs(K1.Provider,{value:d,children:[a,h.jsx("div",{className:"toast-container",children:t.map(p=>h.jsx(FO,{id:p.id,type:p.type,message:p.message,duration:p.duration,onRemove:c,action:p.action,actionLabel:p.actionLabel},p.id))})]})}function op(){const a=x.useContext(K1);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function XO(){const a=op();return x.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const ob=window.location.pathname.includes("/api/hassio/ingress/");function KO({onSave:a,onLoad:t,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:p=!1,onToggleMerged:m}){const[g,b]=x.useState(!1),[w,k]=x.useState(!1),[E,D]=x.useState(!1),[X,V]=x.useState([]),[ee,W]=x.useState(!1),[I,q]=x.useState(!1),[ve,xe]=x.useState(!1),[$,me]=x.useState(null),ce=op(),[ge,Re]=x.useState(()=>{const C=localStorage.getItem("dock-position");return C?JSON.parse(C):{x:20,y:20}}),[_e,Je]=x.useState(!1),[tt,Qe]=x.useState({x:0,y:0}),[Y,he]=x.useState(!0),[ye,ze]=x.useState(!0),[J,v]=x.useState(!1),[N,_]=x.useState(new Date),[M,Q]=x.useState({backend:be.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[pe,Ee]=x.useState({loaded:0,failed:0,total:0}),[Ie,Ye]=x.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Rt;const Yt=x.useRef(null),It=x.useRef(null);x.useEffect(()=>{(async()=>{try{const z=await fetch("/api/version");if(z.ok){const L=await z.json();me(L.version)}}catch{}})()},[]),x.useEffect(()=>{Rt=X1(z=>{let L=0,re=z.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(L=window.nodeRegistry.getAll().length,(!re||L>re)&&(re=L)):L=z.loadedCount,Ee({loaded:L,failed:z.failedPlugins?.length||0,total:re})});const C=z=>{z.target.tagName==="INPUT"||z.target.tagName==="TEXTAREA"||z.target.isContentEditable||(z.key==="?"||z.shiftKey&&z.code==="Slash")&&(z.preventDefault(),k(!0))};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[]),x.useEffect(()=>{const C=()=>{Q(oe=>({...oe,backend:!0})),be.emit("request-hue-status")},z=()=>Q(oe=>({...oe,backend:!1})),L=oe=>Q(Ce=>({...Ce,ha:{connected:oe.connected,wsConnected:oe.wsConnected,deviceCount:oe.deviceCount||0}})),re=oe=>{oe.hue&&Q(Ce=>({...Ce,hue:oe.hue})),oe.kasa&&Q(Ce=>({...Ce,kasa:oe.kasa}))},te=oe=>{Q(Ce=>({...Ce,hue:{connected:oe.connected,deviceCount:oe.deviceCount||0,bridgeIp:oe.bridgeIp||null}}))};be.on("connect",C),be.on("disconnect",z),be.on("ha-connection-status",L),be.on("device-counts",re),be.on("hue-connection-status",te);const ne=oe=>Ye(oe),T=oe=>Ye(Ce=>({...Ce,...oe,running:!0})),F=oe=>Ye(Ce=>({...Ce,...oe,running:!1}));be.on("engine-status",ne),be.on("engine-started",T),be.on("engine-stopped",F),Q(oe=>({...oe,backend:be.connected})),be.connected&&(be.emit("request-hue-status"),be.emit("request-engine-status"));const de=YO();let ie=0,Se=de.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(ie=window.nodeRegistry.getAll().length,(!Se||ie>Se)&&(Se=ie)):ie=de.loadedCount,Ee({loaded:ie,failed:de.failedPlugins?.length||0,total:Se}),()=>{be.off("connect",C),be.off("disconnect",z),be.off("ha-connection-status",L),be.off("device-counts",re),be.off("hue-connection-status",te),be.off("engine-status",ne),be.off("engine-started",T),be.off("engine-stopped",F),Rt&&Rt()}},[]),x.useEffect(()=>{const C=setInterval(()=>{_(new Date)},1e3);return()=>clearInterval(C)},[]);const ln=()=>{const C={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return N.toLocaleDateString("en-US",C)};x.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(ge))},[ge]);const it=C=>{p||C.target.closest(".dock-header")&&(Je(!0),Qe({x:C.clientX-ge.x,y:C.clientY-ge.y}))},jt=C=>{_e&&Re({x:C.clientX-tt.x,y:C.clientY-tt.y})},Nn=()=>{Je(!1)};x.useEffect(()=>{if(_e)return window.addEventListener("mousemove",jt),window.addEventListener("mouseup",Nn),()=>{window.removeEventListener("mousemove",jt),window.removeEventListener("mouseup",Nn)}},[_e,tt]);const Fe=()=>{It.current?.click()},vt=C=>{const z=C.target.files?.[0];if(z){const L=new FileReader;L.onload=re=>{try{const te=JSON.parse(re.target.result);c(te)}catch(te){console.error("Failed to parse JSON:",te),alert("Invalid JSON file")}},L.readAsText(z)}C.target.value=""},nn=async()=>{D(!0),W(!0);try{const C=await fn("/api/engine/graphs");if(C.ok){const z=await C.json();V(z.graphs||[])}else ce.error("Failed to load graphs list"),V([])}catch(C){console.error("Failed to fetch server graphs:",C),ce.error("Failed to connect to server"),V([])}finally{W(!1)}},On=async C=>{try{const z=await fn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(z.ok){const L=await z.json();L.graph&&(c(L.graph),D(!1),ce.success(`Loaded: ${C.replace(".json","")}`))}else ce.error("Failed to load graph")}catch(z){console.error("Failed to load graph:",z),ce.error("Failed to load graph")}},Zn=async(C,z)=>{z.stopPropagation();try{const L=await fn(`/api/engine/graphs/${encodeURIComponent(C)}`);if(L.ok){const re=await L.json();if(re.graph){const te=new Blob([JSON.stringify(re.graph,null,2)],{type:"application/json"}),ne=URL.createObjectURL(te),T=document.createElement("a");T.href=ne,T.download=C.endsWith(".json")?C:`${C}.json`,T.click(),URL.revokeObjectURL(ne),ce.success(`Downloaded: ${C.replace(".json","")}`)}}else ce.error("Failed to download graph")}catch(L){console.error("Failed to download graph:",L),ce.error("Failed to download graph")}},Ta=async()=>{if(!I){q(!0);try{const C=await fn("/api/update/check?force=true");if(!C.ok){const L=await C.text();throw new Error(L||`HTTP ${C.status}`)}const z=await C.json();if(z.isAddon){z.hasUpdate?ce.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):ce.success(` You're up to date! (v${z.currentVersion})`,4e3);return}z.hasUpdate?ce.info(` Update available: ${z.currentVersion}  ${z.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{be.emit("request-show-update-modal",z),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:z}))}}):ce.success(` You're up to date! (v${z.currentVersion})`,4e3)}catch(C){console.error("Failed to check for updates:",C),ce.error("Failed to check for updates: "+C.message,5e3)}finally{q(!1)}}},Na=async()=>{if(!ve){xe(!0);try{const C=await fn("/api/update/plugins/check");if(!C.ok)throw new Error(`HTTP ${C.status}`);const z=await C.json();if(!z.hasUpdates){ce.success(" Plugins are up to date!",3e3);return}const L=(z.newPlugins?.length||0)+(z.modifiedPlugins?.length||0);ce.info(` ${L} plugin update(s) available. Downloading...`,3e3);const re=await fn("/api/update/plugins",{method:"POST"});if(!re.ok)throw new Error(`HTTP ${re.status}`);const te=await re.json();te.success&&te.updated?.length>0?ce.success(` Updated ${te.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):te.updated?.length===0?ce.info("No plugins needed updating",3e3):ce.error("Plugin update failed: "+(te.error||"Unknown error"),5e3)}catch(C){console.error("Failed to update plugins:",C),ce.error("Failed to update plugins: "+C.message,5e3)}finally{xe(!1)}}};return h.jsxs("div",{ref:Yt,className:`dock-container ${p?"dock-merged":""}`,style:{...p?{cursor:"default"}:{left:`${ge.x}px`,top:`${ge.y}px`,cursor:_e?"grabbing":"default"}},onMouseDown:it,children:[h.jsxs("div",{className:"dock-header",style:{cursor:p?"default":"grab"},children:[h.jsxs("div",{className:"dock-header-row",children:[h.jsx("span",{className:"dock-title",children:" Control Panel"}),h.jsx("button",{type:"button",className:"dock-btn-small",onClick:C=>{C.stopPropagation(),m?.()},onMouseDown:C=>C.stopPropagation(),title:p?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:p?"Pop out":"Merge"})]}),h.jsx("span",{className:"dock-datetime",children:ln()})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>he(!Y),children:h.jsxs("span",{children:[Y?"":""," Graph Tools ",d&&h.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),Y&&h.jsxs("div",{className:"dock-section-content",children:[h.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),h.jsx("button",{onClick:t,className:"dock-btn",children:" Load Last"}),h.jsx("button",{onClick:nn,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),h.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),h.jsx("button",{onClick:Fe,className:"dock-btn",children:" Import File"}),h.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),h.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),h.jsx("button",{onClick:()=>be.emit(Ie.running?"stop-engine":"start-engine"),className:`dock-btn ${Ie.running?"dock-btn-active":""}`,title:Ie.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:Ie.running?" Stop Engine":" Start Engine"}),h.jsx("input",{ref:It,type:"file",accept:".json",style:{display:"none"},onChange:vt})]})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>ze(!ye),children:h.jsxs("span",{children:[ye?"":""," Connection Status"]})}),ye&&h.jsxs("div",{className:"dock-section-content dock-status-grid",children:[h.jsxs("div",{className:`dock-status-item ${M.backend?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Backend"}),h.jsx("span",{className:"dock-status-value",children:M.backend?"Connected":"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${M.ha.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),h.jsx("span",{className:"dock-status-value",children:M.ha.connected?`${M.ha.deviceCount} devices`:"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${M.hue.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),h.jsx("span",{className:"dock-status-value",children:M.hue.connected?`${M.hue.deviceCount||0} lights${M.hue.bridgeIp?` (${M.hue.bridgeIp})`:""}`:"Offline"})]}),M.kasa.deviceCount>0&&h.jsxs("div",{className:`dock-status-item ${M.kasa.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Kasa"}),h.jsxs("span",{className:"dock-status-value",children:[M.kasa.deviceCount," devices"]})]}),h.jsxs("div",{className:"dock-status-item plugins",children:[h.jsx("span",{className:"dock-status-dot",style:{background:pe.failed>0?"#f59e0b":"#10b981"}}),h.jsx("span",{className:"dock-status-label",children:"Plugins"}),h.jsx("span",{className:"dock-status-value",children:pe.total>0?`${pe.loaded} / ${pe.total} loaded${pe.failed>0?` (${pe.failed} failed)`:""}`:`${pe.loaded} loaded`})]}),h.jsxs("div",{className:`dock-status-item ${Ie.running?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot",style:{background:Ie.running?"#10b981":"#6b7280"}}),h.jsx("span",{className:"dock-status-label",children:"Engine"}),h.jsx("span",{className:"dock-status-value",children:Ie.running?`Running (${Ie.nodeCount} nodes)`:"Stopped"})]})]})]}),h.jsx(FC,{isExpanded:J,onToggle:()=>v(!J)}),h.jsxs("div",{className:"dock-section",children:[h.jsxs("div",{className:"dock-section-content",children:[h.jsx("button",{onClick:()=>b(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),h.jsx("button",{onClick:()=>k(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),h.jsx("button",{onClick:async()=>{let C=$||"unknown";try{const te=await fetch("/api/version");te.ok&&(C=(await te.json()).version||C)}catch{}const z={version:C,userAgent:navigator.userAgent,isAddon:ob,backend:M.backend,ha:M.ha.connected,engine:Ie.running,plugins:pe.loaded},L=Object.entries(z).map(([te,ne])=>`- **${te}**: ${ne}`).join(`
`),re=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");re.searchParams.set("template","bug_report.md"),re.searchParams.set("title","[Bug]: "),re.searchParams.set("body",`##  Environment (auto-filled)
${L}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(re.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),h.jsx("button",{onClick:()=>{const C=`${window.location.origin}/tools/debug_dashboard.html`;window.open(C,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),ob?h.jsx("button",{onClick:()=>ce.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):h.jsx("button",{onClick:Ta,disabled:I,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:I?" Checking...":" Check for Updates"}),h.jsx("button",{onClick:Na,disabled:ve,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:ve?" Updating...":" Update Plugins"})]}),$&&h.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",$]})]}),h.jsx(qC,{isOpen:g,onClose:()=>b(!1)}),h.jsx(PC,{isOpen:w,onClose:()=>k(!1)}),E&&h.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:h.jsxs("div",{className:"modal server-graphs-modal",onClick:C=>C.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{children:" Saved Graphs"}),h.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:""})]}),h.jsx("div",{className:"modal-body",children:ee?h.jsx("div",{className:"loading-message",children:"Loading graphs..."}):X.length===0?h.jsxs("div",{className:"empty-message",children:[h.jsx("p",{children:"No saved graphs found."}),h.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):h.jsx("div",{className:"graphs-list",children:X.map((C,z)=>h.jsxs("div",{className:"graph-item",children:[h.jsxs("div",{className:"graph-info",onClick:()=>On(C.name),title:"Click to load this graph",children:[h.jsx("span",{className:"graph-name",children:C.displayName}),h.jsx("span",{className:"graph-date",children:new Date(C.modified).toLocaleDateString()})]}),h.jsx("button",{className:"graph-download-btn",onClick:L=>Zn(C.name,L),title:"Download this graph to your computer",children:""})]},z))})})]})})]})}function QO({dockSlotRef:a}){const[t,r]=x.useState(!0),[s,l]=x.useState(!0),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,b]=x.useState(be?.connected??!1),[w,k]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,D]=x.useState(new Map),[X,V]=x.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[ee,W]=x.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[I,q]=x.useState(null),[ve,xe]=x.useState(null),[$,me]=x.useState(null),[ce,ge]=x.useState(!1),Re=x.useRef(null);x.useEffect(()=>{(async()=>{try{const v=await fn(Tn("/api/settings"));if(v.ok){const N=await v.json(),_={tempSensor:N.FORECAST_TEMP_SENSOR||null,windSensor:N.FORECAST_WIND_SENSOR||null,windDirSensor:N.FORECAST_WIND_DIR_SENSOR||null,rainSensor:N.FORECAST_RAIN_SENSOR||null};(_.tempSensor||_.windSensor||_.windDirSensor||_.rainSensor)&&(xe(_),_e(_))}}catch(v){console.warn("Could not fetch forecast sensor config:",v)}})()},[]);const _e=async J=>{if(!J)return;const v={source:"ha-sensors"};try{if(J.tempSensor){const N=await fn(Tn(`/api/lights/ha/${J.tempSensor}/state`));if(N.ok){const _=await N.json();v.temp=parseFloat(_.state)}}if(J.windSensor){const N=await fn(Tn(`/api/lights/ha/${J.windSensor}/state`));if(N.ok){const _=await N.json();v.windSpeed=parseFloat(_.state)}}if(J.windDirSensor){const N=await fn(Tn(`/api/lights/ha/${J.windDirSensor}/state`));if(N.ok){const _=await N.json();v.windDir=parseFloat(_.state)}}if(J.rainSensor){const N=await fn(Tn(`/api/lights/ha/${J.rainSensor}/state`));if(N.ok){const _=await N.json();v.rainRate=parseFloat(_.state)}}v.temp!==void 0&&q(N=>({...N,...v}))}catch(N){console.warn("Error fetching sensor values:",N)}};x.useEffect(()=>{if(!be)return;const J=()=>{b(!0),be.emit("request-ha-status")},v=()=>{b(!1),k({connected:!1,wsConnected:!1,deviceCount:0})},N=Q=>{k(Q)};be.on("connect",J),be.on("disconnect",v),be.on("ha-connection-status",N),be.on("forecast-update",Q=>{d(Q)});const _=Q=>{q(pe=>pe?.source==="ha-sensors"||ve?.tempSensor?pe:{temp:Q.tempf,humidity:Q.humidity,windSpeed:Q.windspeedmph,windDir:Q.winddir,rainRate:Q.hourlyrainin,dailyRain:Q.dailyrainin,source:Q._source||"ambient"})};be.on("weather-update",_),ve?.tempSensor||be.emit("request-weather-update");const M=Q=>{const{id:pe,state:Ee,on:Ie,name:Ye}=Q;if(!pe)return;if(ve){const ln=pe.replace("ha_","");if(ln===ve.tempSensor){const it=parseFloat(Ee);isNaN(it)||q(jt=>({...jt,temp:it,source:"ha-sensors"}))}else if(ln===ve.windSensor){const it=parseFloat(Ee);isNaN(it)||q(jt=>({...jt,windSpeed:it}))}else if(ln===ve.windDirSensor){const it=parseFloat(Ee);isNaN(it)||q(jt=>({...jt,windDir:it}))}else if(ln===ve.rainSensor){const it=parseFloat(Ee);isNaN(it)||q(jt=>({...jt,rainRate:it}))}}const Rt=Ie!==void 0?Ie:Ee==="on"||Ee==="playing"||Ee==="open",Yt=Ye||Q.friendly_name||Q.attributes?.friendly_name||pe.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(pe.includes("light.")||pe.includes("switch.")||pe.startsWith("kasa_"))&&D(ln=>{const it=new Map(ln);return Rt?it.set(pe,{name:Yt,on:!0}):it.delete(pe),it})};return be.on("device-state-update",M),be.emit("request-forecast"),be.connected&&(b(!0),be.emit("request-ha-status")),()=>{be.off("connect",J),be.off("disconnect",v),be.off("ha-connection-status",N),be.off("forecast-update"),be.off("weather-update",_),be.off("device-state-update",M)}},[ve]),x.useEffect(()=>{if(!be||p===null){me(null);return}ge(!0);const J=v=>{ge(!1),v.error?(console.warn("Hourly rain fetch error:",v.error),me(null)):me(v)};return be.on("hourly-rain-update",J),be.emit("request-hourly-rain",{dayOffset:p}),()=>{be.off("hourly-rain-update",J)}},[p]);const Je=()=>{be?.emit("request-forecast"),ve?.tempSensor?_e(ve):be?.emit("request-weather-update")},tt=J=>{if(J==null)return"";const v=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],N=Math.round(J/22.5)%16;return v[N]},Qe=J=>{const v=(J||"").toLowerCase();return v.includes("clear")||v.includes("sun")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"5"}),h.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),h.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),h.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),h.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),h.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),h.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):v.includes("rain")||v.includes("drizzle")||v.includes("shower")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),h.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),h.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),h.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):v.includes("partly")||v.includes("partial")||v.includes("few")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),h.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),h.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),h.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),h.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):v.includes("snow")||v.includes("flurr")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),h.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),h.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),h.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),h.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),h.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):v.includes("thunder")||v.includes("storm")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),h.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):v.includes("fog")||v.includes("mist")||v.includes("haze")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),h.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):h.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},Y=J=>{if(!J)return{day:"",date:""};let v;if(typeof J=="string"&&J.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const M=J.match(/(\w+),\s*(\w+)\s*(\d+)/);return M?{day:`${M[1]}, ${M[2]}`,date:M[3]}:{day:J,date:""}}if(v=new Date(parseInt(J)||J),isNaN(v.getTime()))return{day:J,date:""};const N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${N[v.getDay()]}, ${_[v.getMonth()]}`,date:`${v.getDate()}`}},he=()=>{if(!c||!c.length)return h.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(p!==null){const J=c[p],v=Y(J.date||J.day);return h.jsxs("div",{className:"forecast-detail",children:[h.jsxs("div",{className:"forecast-detail-header",children:[h.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),h.jsxs("span",{className:"detail-date",children:[v.day," ",v.date]})]}),h.jsxs("div",{className:"detail-main",children:[h.jsx("div",{className:"detail-icon",children:Qe(J.conditions||J.condition)}),h.jsxs("div",{className:"detail-temps",children:[h.jsxs("div",{className:"detail-high",children:[J.high,""]}),h.jsxs("div",{className:"detail-low",children:[J.low,""]})]}),h.jsx("div",{className:"detail-condition",children:J.conditions||J.condition||"N/A"})]}),J.description&&h.jsx("div",{className:"detail-description",children:J.description}),h.jsxs("div",{className:"detail-stats",children:[h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Precipitation"}),h.jsx("span",{className:"stat-value",children:J.precipitation||J.precip||"0%"})]}),J.humidity&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Humidity"}),h.jsxs("span",{className:"stat-value",children:[J.humidity,"%"]})]}),J.wind&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Wind"}),h.jsx("span",{className:"stat-value",children:J.wind})]}),(J.sunrise||J.sunset)&&h.jsxs("div",{className:"detail-sun-times",children:[J.sunrise&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunrise"}),h.jsx("span",{className:"stat-value",children:J.sunrise})]}),J.sunset&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunset"}),h.jsx("span",{className:"stat-value",children:J.sunset})]})]})]}),h.jsxs("div",{className:"rain-timeline-section",children:[h.jsx("div",{className:"rain-timeline-header",children:h.jsx("span",{className:"rain-timeline-title",children:" Hourly Rain Forecast"})}),ce?h.jsx("div",{className:"rain-timeline-loading",children:"Loading..."}):$&&$.hours?h.jsxs(h.Fragment,{children:[$.summary&&h.jsx("div",{className:"rain-summary",children:$.summary}),h.jsx("div",{className:"rain-timeline",children:$.hours.map((N,_)=>{const M=Math.max(4,N.probability),Q=N.intensity||"none",pe=N.displayTime||`${N.hour||0}:00`;return h.jsxs("div",{className:`rain-bar-wrapper ${Q!=="none"?"has-rain":""}`,title:`${pe}: ${N.probability}% chance${N.amountIn>0?`, ${N.amountIn}"`:""}`,children:[_%4===0&&N.probability>0&&h.jsxs("span",{className:"rain-prob-label",children:[N.probability,"%"]}),h.jsx("div",{className:`rain-bar rain-${Q}`,style:{height:`${M}%`}}),_%4===0&&h.jsx("span",{className:"rain-hour-label",children:pe})]},_)})}),h.jsxs("div",{className:"rain-legend",children:[h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-none"}),"Dry"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-light"}),"Light"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-moderate"}),"Moderate"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-heavy"}),"Heavy"]})]})]}):h.jsx("div",{className:"rain-timeline-empty",children:"No rain expected"})]})]})}return c.slice(0,5).map((J,v)=>{const N=Y(J.date||J.day),_=v===0;return h.jsxs("div",{className:`forecast-card ${_&&I?"forecast-card-today":""}`,onClick:()=>m(v),children:[h.jsxs("div",{className:"forecast-row-top",children:[h.jsxs("div",{className:"forecast-date",children:[h.jsx("span",{className:"date-day",children:N.day}),h.jsx("span",{className:"date-num",children:N.date})]}),h.jsx("div",{className:"forecast-icon",children:Qe(J.conditions||J.condition)})]}),_&&I&&h.jsxs("div",{className:"station-data",children:[h.jsxs("div",{className:"station-current-temp",children:[Math.round(I.temp),"",h.jsx("span",{className:"station-label",children:"now"})]}),h.jsxs("div",{className:"station-details",children:[h.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(I.windSpeed||0)," mph ",tt(I.windDir)]}),I.rainRate>0&&h.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",I.rainRate.toFixed(2),'"/hr']})]})]}),h.jsxs("div",{className:"forecast-row-bottom",children:[h.jsxs("span",{className:"temp-low",children:[J.low,""]}),h.jsxs("span",{className:"temp-high",children:[J.high,""]}),h.jsxs("span",{className:"precip-group",children:[h.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("path",{d:"M16 14v4"}),h.jsx("path",{d:"M8 14v4"}),h.jsx("path",{d:"M12 16v4"})]}),h.jsx("span",{className:"precip-value",children:J.precipitation||J.precip||"0%"})]})]})]},v)})},ye=J=>{J.preventDefault();const v=J.clientX,N=X,_=Q=>{const pe=v-Q.clientX,Ee=Math.max(250,Math.min(500,N+pe));V(Ee),localStorage.setItem("forecastPanelWidth",Ee)},M=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",M)},ze=J=>{J.preventDefault(),J.stopPropagation();const v=J.clientY,N=ee,_=Q=>{const pe=v-Q.clientY,Ee=Math.max(100,Math.min(500,N+pe));W(Ee),localStorage.setItem("devicesOnHeight",Ee)},M=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",M)};return h.jsxs("div",{className:"forecast-panel",style:{width:X},children:[h.jsx("div",{className:"forecast-resize-handle",ref:Re,onMouseDown:ye,children:h.jsx("div",{className:"forecast-resize-grip"})}),h.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!t),children:[h.jsx("span",{children:"5-Day Forecast"}),h.jsx("button",{onClick:J=>{J.stopPropagation(),Je()},className:"forecast-refresh-btn",children:"Refresh"})]}),t&&h.jsx("div",{className:"forecast-panel-content",children:he()}),h.jsx("div",{className:"forecast-dock-slot",ref:a}),h.jsxs("div",{className:"devices-on-section",style:{height:s?ee:"auto"},children:[h.jsx("div",{className:"devices-resize-handle",onMouseDown:ze,children:h.jsx("div",{className:"devices-resize-grip"})}),h.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[h.jsxs("span",{children:["Devices ON (",E.size,")"]}),h.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&h.jsx("div",{className:"devices-on-list",children:E.size===0?h.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((J,v)=>J.name.localeCompare(v.name)).map((J,v)=>h.jsxs("div",{className:"device-on-item",children:[h.jsx("span",{className:"device-on-indicator"}),h.jsx("span",{className:"device-on-name",children:J.name})]},v))})]}),h.jsxs("div",{className:"status-indicators",children:[h.jsx("div",{className:`connection-status ${g?"connected":"disconnected"}`,children:g?"Backend":"Backend X"}),h.jsx("div",{className:`connection-status ${w.connected?"connected":"disconnected"}`,children:w.connected?`HA (${w.deviceCount})`:"HA X"})]})]})}function WO({width:a=180,panelRef:t,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const p=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,g=(s||[]).reduce((w,k)=>w+(k?.labels||[]).length,0),b=w=>{const k=(w||"").toString().trim();k&&c?.(k)};return h.jsxs("div",{ref:t,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:w=>w.stopPropagation(),children:[h.jsx("div",{className:"favorites-header",children:h.jsxs("div",{className:"favorites-header-row",children:[h.jsx("span",{className:"favorites-title",children:" Favorites"}),p?h.jsx(p,{text:m,position:"bottom",children:h.jsx("span",{className:"favorites-help-fallback",children:"?"})}):h.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),h.jsx("div",{className:"favorites-list",children:g===0?h.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(w=>{const k=(w?.category||"Other").toString(),E=Array.isArray(w?.labels)?w.labels:[];return E.length===0?null:h.jsxs("div",{className:"favorites-group",children:[h.jsx("div",{className:"favorites-divider",children:h.jsx("span",{className:"favorites-divider-text",children:k})}),E.map(D=>h.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(D),onContextMenu:X=>{X.preventDefault(),X.stopPropagation(),b(D)},title:"Click: add to canvas  Right-click: remove",children:D},`${k}:${D}`))]},k)})})]})}function JO({isOpen:a,onClose:t,onSave:r,currentGraphData:s}){const[l,c]=x.useState(""),[d,p]=x.useState([]),[m,g]=x.useState(!1),[b,w]=x.useState(!1),[k,E]=x.useState(null),D=x.useRef(null);x.useEffect(()=>{a&&(X(),setTimeout(()=>D.current?.focus(),100))},[a]);const X=async()=>{g(!0),E(null);try{const q=await(await fetch(Tn("/api/engine/graphs"))).json();q.success?p(q.graphs||[]):E("Failed to load existing graphs")}catch(I){console.error("[SaveModal] Error fetching graphs:",I),E("Failed to connect to server")}finally{g(!1)}},V=async()=>{if(!l.trim()){E("Please enter a filename");return}w(!0),E(null);try{const q=await(await fetch(Tn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();q.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${q.filename}"`,3e3),r?.(q.filename),t()):E(q.error||"Failed to save graph")}catch(I){console.error("[SaveModal] Error saving:",I),E("Failed to save graph")}finally{w(!1)}},ee=I=>{I.key==="Enter"&&!b?V():I.key==="Escape"&&t()},W=I=>{const q=I.replace(".json","");c(q),D.current?.focus()};return a?h.jsx("div",{className:"save-modal-overlay",onClick:t,children:h.jsxs("div",{className:"save-modal",onClick:I=>I.stopPropagation(),children:[h.jsxs("div",{className:"save-modal-header",children:[h.jsx("h2",{children:" Save Graph"}),h.jsx("button",{className:"save-modal-close",onClick:t,children:""})]}),h.jsxs("div",{className:"save-modal-content",children:[h.jsxs("div",{className:"save-modal-input-section",children:[h.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),h.jsxs("div",{className:"save-modal-input-row",children:[h.jsx("input",{ref:D,id:"graph-filename",type:"text",value:l,onChange:I=>c(I.target.value),onKeyDown:ee,placeholder:"my_automation_graph",disabled:b}),h.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),k&&h.jsxs("div",{className:"save-modal-error",children:[" ",k]}),h.jsxs("div",{className:"save-modal-existing",children:[h.jsxs("h3",{children:["Existing Graphs ",m&&h.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?h.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):h.jsx("ul",{className:"save-modal-list",children:d.map(I=>h.jsxs("li",{onClick:()=>W(I.name),className:l===I.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(I.modified).toLocaleString()}`,children:[h.jsx("span",{className:"graph-name",children:I.displayName}),h.jsx("span",{className:"graph-date",children:new Date(I.modified).toLocaleDateString()})]},I.name))})]})]}),h.jsxs("div",{className:"save-modal-footer",children:[h.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:t,disabled:b,children:"Cancel"}),h.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:V,disabled:b||!l.trim(),children:b?"Saving...":" Save"})]})]})}):null}function ej({visible:a,position:t,items:r,onClose:s,onSelect:l}){const c=x.useRef(null),d=x.useRef(null),[p,m]=x.useState(null),[g,b]=x.useState({x:0,y:0}),[w,k]=x.useState(""),E=x.useRef(null),D=x.useRef(null);x.useEffect(()=>{a&&(k(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const X=x.useMemo(()=>{if(!w.trim())return r;const $=w.toLowerCase(),me=[];for(const ce of r)if(ce.subitems)for(const ge of ce.subitems)ge.label&&ge.label.toLowerCase().includes($)&&me.push({...ge,categoryHint:ce.label});else ce.label&&ce.label.toLowerCase().includes($)&&me.push(ce);return me},[r,w]),V=w.trim().length>0;x.useEffect(()=>{if(!a)return;const $=ce=>{c.current&&!c.current.contains(ce.target)&&s()},me=ce=>{ce.key==="Escape"&&s()};return document.addEventListener("mousedown",$),document.addEventListener("keydown",me),()=>{document.removeEventListener("mousedown",$),document.removeEventListener("keydown",me)}},[a,s]),x.useEffect(()=>()=>{E.current&&clearTimeout(E.current),D.current&&clearTimeout(D.current)},[]);const ee=x.useCallback(($,me,ce)=>{D.current&&(clearTimeout(D.current),D.current=null),me.subitems&&me.subitems.length>0?m(ce):m(null)},[]),W=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},150)},[]),I=x.useCallback(()=>{D.current&&(clearTimeout(D.current),D.current=null)},[]),q=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},100)},[]),ve=x.useCallback($=>{$.subitems&&$.subitems.length>0||(l($),s())},[l,s]);if(!a)return null;const xe={...t};if(typeof window<"u"){const me=Math.min(X.length*36+50,400);t.x+220>window.innerWidth&&(xe.x=window.innerWidth-220-10),t.y+me>window.innerHeight&&(xe.y=Math.max(10,window.innerHeight-me-10))}return h.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:xe.x,top:xe.y},children:[h.jsxs("div",{className:"fast-menu-search",children:[h.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:w,onChange:$=>k($.target.value),onClick:$=>$.stopPropagation(),onKeyDown:$=>{if($.key==="Enter"&&X.length===1){const me=X[0];me.subitems||ve(me)}$.stopPropagation()}}),w&&h.jsx("span",{className:"search-clear",onClick:$=>{$.stopPropagation(),k(""),d.current?.focus()},children:""})]}),h.jsx("div",{className:"fast-menu-results",children:X.length===0?h.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):V?X.map(($,me)=>h.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>ve($),children:[h.jsx("span",{className:"menu-label",children:$.label}),$.categoryHint&&h.jsx("span",{className:"category-hint",children:$.categoryHint})]},$.label||me)):X.map(($,me)=>h.jsxs("div",{className:`fast-menu-item ${$.subitems?"has-submenu":""} ${p===me?"active":""}`,onMouseEnter:ce=>ee(ce,$,me),onMouseLeave:W,onClick:()=>ve($),children:[$.icon&&h.jsx("span",{className:"menu-icon",children:$.icon}),h.jsx("span",{className:"menu-label",children:$.label}),$.subitems&&h.jsx("span",{className:"submenu-arrow",children:""}),p===me&&$.subitems&&h.jsx("div",{className:"fast-submenu",onMouseEnter:I,onMouseLeave:q,children:$.subitems.map((ce,ge)=>h.jsx("div",{className:"fast-menu-item",title:ce.description||"",onClick:Re=>{Re.stopPropagation(),ve(ce)},children:h.jsx("span",{className:"menu-label",children:ce.label})},ce.label||ge))})]},$.label||me))})]})}function lb(a){const t=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))t.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&t.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):t.push(`Node at index ${c} is missing "id"`),l.label||t.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&t.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))t.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||t.push(`Connection ${d} references non-existent source node: ${c.source}`):t.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||t.push(`Connection ${d} references non-existent target node: ${c.target}`):t.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const p=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(p)&&r.push(`Duplicate connection: ${p}`),l.add(p),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:t.length===0,errors:t,warnings:r}}function cb(a){const t=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],t.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],t.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,p)=>{if(!d.id)return t.push(`Removed node at index ${p} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${p}`;t.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",t.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},t.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,t.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,t.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,p)=>l.has(d.source)?l.has(d.target)?!0:(t.push(`Removed connection ${p} (invalid target: ${d.target})`),r=!0,!1):(t.push(`Removed connection ${p} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,t.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,t.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,t.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:t}}class xj extends Kt.Control{constructor(t,r){super(),this.label=t,this.onClick=r}}function tj({data:a}){return h.jsx("button",{onPointerDown:t=>t.stopPropagation(),onDoubleClick:t=>t.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.25)",t.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.1)",t.currentTarget.style.boxShadow="none"},children:a.label})}class kj extends Kt.Control{constructor(t,r,s,l){super(),this.label=t,this.values=r,this.value=s,this.onChange=l}setValue(t){this.value=t}}function nj({data:a}){const[,t]=x.useReducer(d=>d+1,0),[r,s]=x.useState(a.value);x.useEffect(()=>{s(a.value)},[a.value]),x.useEffect(()=>{t()},[a]);const l=d=>{const p=d.target.value;s(p),typeof a.setValue=="function"?a.setValue(p):a.value=p,a.onChange&&a.onChange(p)},c=a.values||[];return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,p)=>h.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${p}-${d}`))})]})}class Ej extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function aj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Cj extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function rj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[h.jsx("input",{type:"checkbox",checked:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),h.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Tj extends Kt.Control{constructor(t,r,s,l={}){super(),this.label=t,this.value=r,this.onChange=s,this.options=l}}function ij({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"number",value:t,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Nj extends Kt.Control{constructor(t,r,s,l="text"){super(),this.label=t,this.value=r,this.onChange=s,this.type=l}}function sj({data:a}){const[t,r]=x.useState(a.value);x.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:a.type||"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Oj extends Kt.Control{constructor(t,r){super(),this.deviceId=t,this.getState=r}}function oj({data:a}){const t=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!t)return h.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:h.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=t.on||t.state==="on",l=t.attributes&&typeof t.attributes.brightness=="number"?Number(t.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof t.brightness=="number"&&Number.isFinite(t.brightness)?c=t.brightness>100?Math.round(t.brightness/255*100):Math.round(t.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=t.hs_color||[0,0],[p,m]=d;let g="#e74c3c";s&&(m===0?g="#f1c40f":g=`hsl(${p}, ${m}%, 50%)`);const b={width:"14px",height:"14px",borderRadius:"50%",background:g,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:g,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${g}`:"none"};return h.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[h.jsx("div",{style:b}),h.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:t.name||a.deviceId})]}),h.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&h.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${g})`,transition:"width 0.3s ease-out"}})})]})}function lj(a){const{state:t,color:r}=a.data.data||{},s=t==="on"||t==="open"||t==="playing",l=r||(s?"#00f3ff":"#333");return h.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[h.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),h.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function cj(a){const[,t]=x.useState(0);x.useEffect(()=>{let w=JSON.stringify(a.data.data||{});const k=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==w&&(w=E,t(D=>D+1))},100);return()=>clearInterval(k)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let p="#444";s&&s.length===2?p=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(p="#ffaa00");const m=c==="on"||d===!0;let g=typeof r=="number"&&Number.isFinite(r)?r:0;g>100&&(g=g/255*100),g=Math.max(0,Math.min(100,g));const b=m?g:0;return h.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:w=>w.stopPropagation(),children:h.jsx("div",{style:{width:`${b}%`,height:"100%",backgroundColor:p,transition:"all 0.3s ease",boxShadow:b>0?`0 0 10px ${p}`:"none"}})})}function uj(a){const{power:t,energy:r}=a.data.data||{};return t===null&&r===null?h.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):h.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"PWR:"}),h.jsx("span",{style:{color:"#00f3ff"},children:t!==null?`${t} W`:"--"})]}),r!==null&&h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"NRG:"}),h.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const dj=window.EDITOR_DEBUG,Oe=(...a)=>dj&&console.debug("[Editor]",...a),fj=Ea.memo(({data:a,socketKey:t,side:r})=>{let l=a?.name||"any";if(t&&typeof t=="string"){const d=t.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${t||"socket"} (${l})`;return Ea.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function hj(){const a=x.useRef(null),[t,r]=x.useState(null),[s,l]=x.useState(null),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,b]=x.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),w=x.useRef(null),k=x.useRef(null);x.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(g))}catch{}},[g]);const E=x.useRef(!1),D=x.useRef(new Set),X=x.useRef(null),V=x.useRef(!1),ee=x.useRef(null),W=x.useRef(null),I=x.useRef(null),q=x.useRef({x:0,y:0}),ve=x.useRef(!1),xe=x.useRef([]),[$,me]=x.useState([]),ce=x.useRef(null),[ge,Re]=x.useState({visible:!1,query:"",results:[],selectedIndex:0}),[_e,Je]=x.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),tt=180,Qe="favoriteNodes",[Y,he]=x.useState(()=>{try{const C=localStorage.getItem(Qe),z=C?JSON.parse(C):null,L=ne=>{const T=[];for(const F of Array.isArray(ne)?ne:[]){if(typeof F!="string")continue;const de=F.trim();de&&(T.includes(de)||T.push(de))}return T};if(Array.isArray(z)){const ne=L(z);return ne.length?[{category:"Other",labels:ne}]:[]}const re=Array.isArray(z?.groups)?z.groups:Array.isArray(z?.favoriteGroups)?z.favoriteGroups:Array.isArray(z)?z:null;if(!re)return[];const te=[];for(const ne of re){const T=(ne?.category||"Other").toString().trim()||"Other",F=L(ne?.labels);F.length!==0&&te.push({category:T,labels:F})}return te}catch{return[]}}),ye=x.useRef(null),[ze,J]=x.useState(!1),v=x.useRef(null),[N,_]=x.useState(!1),[M,Q]=x.useState(null);x.useEffect(()=>{try{localStorage.setItem(Qe,JSON.stringify({version:2,groups:Y}))}catch{}},[Y]);const pe=x.useCallback(C=>{const z=(C||"").toString().trim();if(!z)return;const re=(Dn.getByLabel(z)?.category||"Other").toString().trim()||"Other";he(te=>{for(const F of te)if(Array.isArray(F?.labels)&&F.labels.includes(z))return te;const ne=te.map(F=>({category:F.category,labels:[...F.labels]})),T=ne.findIndex(F=>F.category===re);return T===-1?ne.push({category:re,labels:[z]}):ne[T].labels.push(z),ne})},[]),Ee=x.useCallback(C=>{const z=(C||"").toString().trim();z&&he(L=>{const re=[];for(const te of L){const ne=(te?.labels||[]).filter(T=>T!==z);ne.length!==0&&re.push({category:te.category,labels:ne})}return re})},[]),Ie=x.useCallback(async C=>{const z=a.current,L=ee.current,re=W.current;if(!z||!L||!re)return;const te=z.getBoundingClientRect(),ne={x:te.left+te.width/2,y:te.top+te.height/2};try{const de=window._t2GetMenuItems;if(typeof de=="function"){const ie=de();for(const Se of ie||[])for(const oe of Se.subitems||[])if(oe.label===C&&typeof oe.handler=="function"){await oe.handler(ne);return}}}catch(de){console.warn("[Favorites] Failed to create via context handlers:",de)}const T=Dn.getByLabel(C);if(!T)return;const F=()=>{try{X.current?.()}catch{}};try{const de=T.factory(F);await L.addNode(de);const ie=re.area.transform,Se=(ne.x-ie.x)/ie.k,oe=(ne.y-ie.y)/ie.k;await re.translate(de.id,{x:Se,y:oe}),C==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(de){console.warn("[Favorites] Fallback create failed:",de)}},[]);x.useEffect(()=>{try{const C=Dn.getAll();if(C.length===0)return;const z=new Map;for(const L of C)L?.label&&z.set(L.label,(L.category||"Other").toString().trim()||"Other");he(L=>{const re=[],te=new Map,ne=(T,F)=>{te.has(T)||(te.set(T,[]),re.push(T));const de=te.get(T);de.includes(F)||de.push(F)};for(const T of L)for(const F of T?.labels||[]){const de=z.get(F);de&&ne(de,F)}return re.map(T=>({category:T,labels:te.get(T)})).filter(T=>T.labels.length>0)})}catch{}},[t]);const Ye=x.useCallback(async C=>{await new Promise(Z=>{const fe=()=>{const we=C.getBoundingClientRect();we.width>0&&we.height>0?Z():requestAnimationFrame(fe)};requestAnimationFrame(fe)});const z=new ai,L=new Mb(C),re=new Ek,te=new jC({createRoot:fb.createRoot}),ne=new UC;z.use(ne);let T=0,F=0,de=Date.now();window._t2PerfStats=()=>{const Z=(Date.now()-de)/1e3;return console.log(`[Perf] In ${Z.toFixed(1)}s: ${T} process calls, ${F} skipped (${(T/Z).toFixed(1)}/sec)`),{calls:T,skipped:F,perSecond:T/Z}},window._t2PerfReset=()=>{T=0,F=0,de=Date.now(),console.log("[Perf] Stats reset")};let ie=null;const Se=()=>{const Z=z?.getNodes?.()?.length||0;return Z<50?16:Z<100?32:Z<150?50:100};let oe=!1;const Ce=async()=>{if(oe){F++;return}if(ie)return;T++;const Z=Se();ie=setTimeout(async()=>{ie=null,oe=!0;try{const fe=z.getNodes(),we=z.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",fe.map(je=>`${je.id}:${je.label}`)),console.log("[Editor] process() - connections:",we.map(je=>`${je.source}:${je.sourceOutput} -> ${je.target}:${je.targetInput}`)),window._debugProcess=!1),ne.reset();for(const je of fe)try{await ne.fetch(je.id)}catch{}}finally{oe=!1}},Z)},Pe=async()=>{if(!oe){ie&&(clearTimeout(ie),ie=null),oe=!0;try{ne.reset();for(const Z of z.getNodes())try{await ne.fetch(Z.id)}catch{}}finally{oe=!1}}},kt=new Set;let Ve=null;const Xe=Z=>{kt.add(Z),Ve||(Ve=setTimeout(()=>{Ve=null,kt.forEach(fe=>{L.update("node",fe)}),kt.clear(),Ce()},16))},ke=()=>{Ce()},bt=()=>{const Z=Dn.getAll(),fe={};Z.forEach(je=>{const $e=je.category||"Other";fe[$e]||(fe[$e]=[]),fe[$e].push({label:je.label,order:je.order,description:je.description,handler:async pt=>{let Et;const an=()=>{je.updateStrategy==="dataflow"?ke():Xe(Et.id)};Et=je.factory(an),await z.addNode(Et);const rn=L.area.transform,An=(pt.x-rn.x)/rn.k,qt=(pt.y-rn.y)/rn.k;await L.translate(Et.id,{x:An,y:qt}),je.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const we=window.T2Controls?.THEME?.categories||{};return Object.entries(fe).map(([je,$e])=>({label:je,icon:we[je]?.icon||"",subitems:$e.sort((pt,Et)=>{const an=pt.order??999,rn=Et.order??999;return an!==rn?an-rn:pt.label.localeCompare(Et.label)})})).sort((je,$e)=>je.label.localeCompare($e.label))};window._t2GetMenuItems=bt,window._t2Editor=z,window._t2Area=L,window._t2Process=Ce,window._t2ProcessImmediate=Pe,window._t2Engine=ne,window._t2GetGraphData=()=>{try{const Z=window._t2Editor,fe=window._t2Area;if(!Z||!fe)return console.warn("[_t2GetGraphData] Editor or area not available"),null;if(window.graphLoading)return null;const we=Z.getNodes().map($e=>{const pt=typeof $e.toJSON=="function"?$e.toJSON():{...$e};return $e.properties&&(pt.properties=$e.properties),{id:$e.id,label:$e.label,position:fe.nodeViews.get($e.id)?.position||{x:0,y:0},data:pt}}),Ne=Z.getConnections().map($e=>({id:$e.id,source:$e.source,target:$e.target,sourceOutput:$e.sourceOutput,targetInput:$e.targetInput})),je=fe.area?.transform?{x:fe.area.transform.x,y:fe.area.transform.y,k:fe.area.transform.k}:{x:0,y:0,k:1};return{nodes:we,connections:Ne,viewport:je,syncedOnClose:!0,timestamp:Date.now()}}catch(Z){return console.warn("[_t2GetGraphData] Failed to serialize graph:",Z),null}};const He=Ra.selector();te.addPreset(Df.classic.setup({customize:{node(Z){const fe=Dn.getByInstance(Z.payload);return fe?fe.component:Df.classic.Node},socket(Z){const fe=Z.key,we=Z.side;return function({data:je}){return Ea.createElement(fj,{data:je,socketKey:fe,side:we})}},control(Z){if(Z.payload instanceof Kt.Control){const we=Z.payload.constructor.name;if(we==="ButtonControl")return tj;if(we==="DropdownControl")return nj;if(we==="TextControl")return aj;if(we==="SwitchControl")return rj;if(we==="NumberControl")return ij;if(we==="InputControl")return sj;if(we==="DeviceStateControl")return oj;if(we==="StatusIndicatorControl")return lj;if(we==="ColorBarControl")return cj;if(we==="PowerStatsControl")return uj}return Df.classic.Control}}})),re.addPreset(bk.classic.setup()),z.use(L),L.use(re),L.use(te),Ra.selectableNodes(L,He,{accumulating:Ra.accumulateOnCtrl()}),Ra.simpleNodesOrder(L),z.addPipe(Z=>{if(Z.type==="nodecreated"){const fe=Z.data,we=Dn.getByInstance(fe);we&&we.isBackdrop&&setTimeout(()=>{const Ne=L.nodeViews.get(fe.id);Ne&&Ne.element&&(Ne.element.style.zIndex="-10",Oe("[Backdrop] Set z-index on creation for:",fe.id))},50)}return Z});let wt=!1,Vt=!1,lt={x:0,y:0};re.addPipe(Z=>(Z.type==="connectionpick"?(wt=!0,Oe(" Connection pick - wire dragging started")):Z.type==="connectiondrop"&&(wt=!1,Vt=!1,Oe(" Connection drop - wire dragging ended")),Z));const $t=Z=>{if(wt)if(Z.ctrlKey||Z.metaKey)if(!Vt)Vt=!0,lt={x:Z.clientX,y:Z.clientY},C.style.cursor="grab";else{const fe=Z.clientX-lt.x,we=Z.clientY-lt.y;if(fe!==0||we!==0){const Ne=L.area.transform;L.area.translate(Ne.x+fe,Ne.y+we),lt={x:Z.clientX,y:Z.clientY}}}else Vt&&(Vt=!1,C.style.cursor="")},hn=Z=>{(Z.key==="Control"||Z.key==="Meta")&&Vt&&(Vt=!1,C.style.cursor="")};window.addEventListener("pointermove",$t),window.addEventListener("keyup",hn);let kn=!1,cn=!1,pn=null,$a=!1,er={x:0,y:0},jn={x:0,y:0};const kr=Z=>{Z.code==="Space"&&kn&&pn&&($a=!0,jn={x:0,y:0},Z.preventDefault())},ii=Z=>{if(Z.code==="Space"&&($a=!1,cn&&pn)){const fe=L.nodeViews.get(pn);if(fe){const we=L.area.transform,Ne=jn.x/we.k,je=jn.y/we.k,$e={x:fe.position.x-Ne,y:fe.position.y-je};E.current=!0,L.translate(pn,$e).finally(()=>{E.current=!1})}cn=!1,C.style.cursor=""}},si=Z=>{if(!(!kn||!pn))if($a)if(!cn)cn=!0,er={x:Z.clientX,y:Z.clientY},jn={x:0,y:0},C.style.cursor="grab";else{const fe=Z.clientX-er.x,we=Z.clientY-er.y;if(fe!==0||we!==0){const Ne=L.area.transform;L.area.translate(Ne.x+fe,Ne.y+we),jn.x+=fe,jn.y+=we,er={x:Z.clientX,y:Z.clientY}}}else cn&&(cn=!1,C.style.cursor="")};window.addEventListener("keydown",kr,!0),window.addEventListener("keyup",ii,!0),C.addEventListener("pointermove",si,!0);const At=document.createElement("div");At.classList.add("selection-box"),C.appendChild(At);let O=!1,j={x:0,y:0};const P=D.current,le=()=>{O&&(Oe(" Safety reset: clearing stuck lasso selection"),O=!1,At.style.display="none")},De=()=>{le(),window.resetEditorDragState&&window.resetEditorDragState()},Pt=()=>{document.hidden&&(le(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",De),document.addEventListener("visibilitychange",Pt);const Rn=Z=>{try{const fe=Z.target;fe&&(fe.tagName==="INPUT"||fe.tagName==="TEXTAREA"||fe.isContentEditable)||(C.tabIndex=-1,C.focus())}catch{}if((Z.ctrlKey||Z.metaKey)&&Z.button===0){Z.stopPropagation(),Z.preventDefault(),O=!0;const fe=C.getBoundingClientRect();j={x:Z.clientX-fe.left,y:Z.clientY-fe.top},At.style.display="block",At.style.left=`${j.x}px`,At.style.top=`${j.y}px`,At.style.width="0px",At.style.height="0px",Z.shiftKey||(P.forEach(we=>{const Ne=L.nodeViews.get(we);Ne&&Ne.element&&(Ne.element.classList.remove("selected"),Ne.element.style.outline="")}),P.clear(),He&&He.entities&&Array.from(He.entities).forEach(we=>He.remove(we)))}},Ge=Z=>{if(!O)return;const fe=C.getBoundingClientRect(),we=Z.clientX-fe.left,Ne=Z.clientY-fe.top,je=Math.min(j.x,we),$e=Math.min(j.y,Ne),pt=Math.abs(we-j.x),Et=Math.abs(Ne-j.y);At.style.left=`${je}px`,At.style.top=`${$e}px`,At.style.width=`${pt}px`,At.style.height=`${Et}px`},Qt=Z=>{if(!O)return;const fe=At.getBoundingClientRect();if(O=!1,At.style.display="none",fe.width<5&&fe.height<5)return;const we=[];z.getNodes().forEach(Ne=>{const je=L.nodeViews.get(Ne.id);if(je&&je.element){const $e=je.element.getBoundingClientRect();fe.left<=$e.left&&fe.right>=$e.right&&fe.top<=$e.top&&fe.bottom>=$e.bottom&&we.push({node:Ne,view:je})}}),we.forEach(({node:Ne,view:je})=>{P.add(Ne.id),He.add({id:Ne.id,label:"node",translate($e,pt){},unselect(){je.element.classList.remove("selected"),je.element.style.outline=""}},!1),je.element.classList.add("selected"),je.element.style.outline="3px solid #00f3ff"})},ht=()=>{P.size>0&&(P.forEach(Z=>{const fe=L.nodeViews.get(Z);fe&&fe.element&&(fe.element.classList.remove("selected"),fe.element.style.outline="")}),P.clear()),He&&He.entities&&(He.entities instanceof Map?Array.from(He.entities.values()):Array.from(He.entities)).forEach(fe=>{fe.unselect&&fe.unselect(),He.remove(fe)}),z.getNodes().forEach(Z=>{const fe=L.nodeViews.get(Z.id);fe&&fe.element&&fe.element.classList.remove("selected")})},Ua=Z=>{if(!Z.ctrlKey&&!Z.metaKey&&!O){let fe=!1;for(const[we,Ne]of L.nodeViews)if(Ne.element.contains(Z.target)){fe=!0;break}if(!fe){const we=Z.target;(we===C||we.classList.contains("rete-area")||we.closest('[data-testid="area"]'))&&ht()}}};C.addEventListener("pointerdown",Rn,{capture:!0}),C.addEventListener("click",Ua),window.addEventListener("pointermove",Ge),window.addEventListener("pointerup",Qt),z.addPipe(Z=>((Z.type==="connectioncreated"||Z.type==="connectionremoved")&&Ce(),Z));let Wt={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},Gt=!1,Ha=null;const Er=Z=>{Gt=Z,Ha&&(clearTimeout(Ha),Ha=null),Z&&(Ha=setTimeout(()=>{Gt&&(Oe(" Safety reset: clearing stuck isGroupMoving"),Gt=!1),Ha=null},500))},tr=()=>{O&&(Oe(" Resetting stuck lasso selection"),O=!1,At.style.display="none"),Gt&&(Oe(" Resetting stuck group moving"),Er(!1)),Wt.isDragging&&(Oe(" Resetting stuck backdrop drag"),Wt.isDragging=!1,Wt.activeBackdropId=null,Wt.nodesBeingMoved.clear())};window.resetEditorDragState=tr;function Va(){const Z=z.getNodes(),fe=Z.filter(Ne=>{const je=Dn.getByInstance(Ne);return je&&je.isBackdrop}),we=Z.filter(Ne=>{const je=Dn.getByInstance(Ne);return!je||!je.isBackdrop});fe.forEach(Ne=>{const je=L.nodeViews.get(Ne.id);if(!je)return;je.element&&(je.element.style.zIndex="-10");const $e=je.position,pt=[],Et=Ne.properties.width||400,an=Ne.properties.height||300,rn=(qt,En,oi)=>{const mn=qt.x+En/2,Oa=qt.y+oi/2;return mn>=$e.x&&mn<=$e.x+Et&&Oa>=$e.y&&Oa<=$e.y+an};we.forEach(qt=>{const En=L.nodeViews.get(qt.id);if(!En)return;En.element&&parseInt(En.element.style.zIndex||"0",10)<0&&(En.element.style.zIndex="1");const oi=En.position,mn=qt.width||180,Oa=qt.height||100;rn(oi,mn,Oa)&&pt.push(qt.id)}),fe.forEach(qt=>{if(qt.id===Ne.id)return;const En=L.nodeViews.get(qt.id);if(!En)return;const oi=En.position,mn=qt.properties.width||400,Oa=qt.properties.height||300;mn>=Et||Oa>=an||rn(oi,mn,Oa)&&pt.push(qt.id)});const An=Ne.properties.capturedNodes.length;Ne.properties.capturedNodes=pt,An!==pt.length&&Ne.changeCallback&&Ne.changeCallback()})}return L.updateBackdropCaptures=Va,L.addPipe(Z=>{if(Z.type==="nodepicked"){const fe=Z.data.id,we=z.getNode(fe);kn=!0,pn=fe,cn=!1;try{if(we&&v?.current!==void 0){const je=L.nodeViews.get(fe)?.position||{x:0,y:0};v.current={nodeId:fe,label:we.label,startPos:je,active:!1,over:!1}}}catch{}if(we){const je=Dn.getByInstance(we);if(je&&je.isBackdrop&&we.properties.locked)return}!ve.current&&!P.has(fe)&&(P.forEach(je=>{const $e=L.nodeViews.get(je);$e&&$e.element&&($e.element.classList.remove("selected"),$e.element.style.outline="")}),P.clear()),P.add(fe);const Ne=L.nodeViews.get(fe);Ne&&Ne.element&&(Ne.element.classList.add("selected"),Ne.element.style.outline="3px solid #00f3ff")}return Z}),L.addPipe(Z=>{try{if(E.current)return Z;const fe=we=>{const Ne=ye.current?.getBoundingClientRect();if(!Ne)return!1;const $e=L.nodeViews.get(we)?.element;if(!$e)return!1;const pt=$e.getBoundingClientRect(),Et=pt.left+pt.width/2,an=pt.top+pt.height/2;return Et>=Ne.left&&Et<=Ne.right&&an>=Ne.top&&an<=Ne.bottom};if(Z.type==="nodetranslate"){const we=v.current;if(!we)return Z;const Ne=Z.data?.id;if(!Ne||we.nodeId!==Ne)return Z;we.active||(we.active=!0,!we.startPos&&Z.data?.previous&&(we.startPos=Z.data.previous));const je=fe(Ne);return je!==we.over&&(we.over=je,J(je)),Z}if(Z.type==="nodedragged"){const we=v.current;if(!we)return Z;const Ne=Z.data?.id;if(!Ne||we.nodeId!==Ne)return Z;if(we.active&&fe(Ne)){pe(we.label);const $e=we.startPos;$e&&setTimeout(()=>{try{L.translate(Ne,$e)}catch{}},0)}return v.current=null,J(!1),Z}}catch{}return Z}),L.addPipe(Z=>{if(Z.type==="render"&&Z.data?.payload){const fe=Z.data.payload,we=Dn.getByInstance(fe);we&&we.isBackdrop&&setTimeout(()=>{const Ne=L.nodeViews.get(fe.id);if(Ne&&Ne.element){Ne.element.style.zIndex!=="-10"&&(Ne.element.style.zIndex="-10");const je=fe.properties.locked?"none":"auto";Ne.element.style.pointerEvents!==je&&(Ne.element.style.pointerEvents=je)}},0)}if(Z.type==="nodetranslate"){if(E.current||Gt)return Z;const fe=Z.data.id,we=z.getNode(fe);if(!we)return Z;const Ne=Z.data.position,je=Z.data.previous,$e=Ne.x-je.x,pt=Ne.y-je.y;if($e===0&&pt===0)return Z;if(cn&&pn===fe)return{...Z,data:{...Z.data,position:Z.data.previous}};if(P.size>1&&P.has(fe)){Er(!0);const an=[];return P.forEach(rn=>{if(rn!==fe){const An=L.nodeViews.get(rn);if(An){const qt=An.position.x+$e,En=An.position.y+pt;an.push(L.translate(rn,{x:qt,y:En}))}}}),Promise.all(an).then(()=>{Er(!1)}),Z}const Et=Dn.getByInstance(we);if(Et&&Et.isBackdrop){if(we.properties.locked)return{...Z,data:{...Z.data,position:Z.data.previous}};if(Wt.isDragging&&Wt.nodesBeingMoved.has(fe)&&Wt.activeBackdropId!==fe)return Z;if(Wt.activeBackdropId!==fe){Wt.activeBackdropId=fe,Wt.isDragging=!0,Wt.nodesBeingMoved.clear(),Va();const an=rn=>{rn.forEach(An=>{Wt.nodesBeingMoved.add(An);const qt=z.getNode(An);qt&&qt.properties.capturedNodes&&an(qt.properties.capturedNodes)})};an(we.properties.capturedNodes)}if(we.properties.capturedNodes.length>0){Er(!0);const an=[];return we.properties.capturedNodes.forEach(rn=>{if(!P.has(rn)){const An=L.nodeViews.get(rn);if(An){const qt=An.position.x+$e,En=An.position.y+pt;an.push(L.translate(rn,{x:qt,y:En}))}}}),Promise.all(an).then(()=>{Er(!1)}),Z}}}if(Z.type==="nodedragged"){if(E.current)return Z;Wt.isDragging=!1,Wt.activeBackdropId=null,Wt.nodesBeingMoved.clear(),kn=!1,pn=null,cn&&(cn=!1,C.style.cursor=""),Va()}return Z}),ee.current=z,W.current=L,I.current=He,window.updateBackdropLockState=(Z,fe)=>{const we=L.nodeViews.get(Z);we&&we.element&&(we.element.style.pointerEvents=fe?"none":"auto",Oe(" Updated backdrop lock state:",Z,"locked:",fe))},r(z),l(L),d(ne),{destroy:()=>{C.removeEventListener("pointerdown",Rn,{capture:!0}),C.removeEventListener("click",Ua),C.removeEventListener("pointermove",si,!0),window.removeEventListener("pointermove",Ge),window.removeEventListener("pointerup",Qt),window.removeEventListener("pointermove",$t),window.removeEventListener("keyup",hn),window.removeEventListener("keydown",kr,!0),window.removeEventListener("keyup",ii,!0),window.removeEventListener("blur",De),document.removeEventListener("visibilitychange",Pt),Ha&&clearTimeout(Ha),At.parentNode&&At.parentNode.removeChild(At),L.destroy()},selector:He,editor:z,area:L,engine:ne,process:Ce,processImmediate:Pe}},[]);x.useEffect(()=>{const C=a.current;if(!C)return;let z=null,L=null,re=null;const te=new Map,ne=ie=>{try{typeof ie.pointerId=="number"&&te.set(ie.pointerId,{el:ie.target,pointerType:ie.pointerType||"mouse"})}catch{}},T=ie=>{try{typeof ie.pointerId=="number"&&te.delete(ie.pointerId)}catch{}},F=ie=>{try{typeof ie.pointerId=="number"&&te.delete(ie.pointerId)}catch{}};C.addEventListener("gotpointercapture",ne,!0),C.addEventListener("lostpointercapture",T,!0),window.addEventListener("pointerup",F,!0),window.addEventListener("pointercancel",F,!0),L=PO().then(()=>(Oe(" External plugins loaded, now creating editor..."),Ye(C))).then(ie=>{ie.editor,z=ie.area,ie.engine,ie.selector,r(ie.editor),l(ie.area),d(ie.engine),m(ie.selector),X.current=ie.processImmediate,setTimeout(()=>{if(C){C.tabIndex=-1,C.focus();const oe=C.getBoundingClientRect(),Ce=oe.left+oe.width/2,Pe=oe.top+oe.height/2,kt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ce,clientY:Pe,deltaY:0});C.dispatchEvent(kt),Oe(" Container initialized and focused"),window.resetEditorView=()=>{Oe(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ve=C.getBoundingClientRect(),Xe=Ve.left+Ve.width/2,ke=Ve.top+Ve.height/2;C.tabIndex=-1,C.focus();try{const He=Array.from(te.entries());te.clear(),He.forEach(([wt,Vt])=>{const lt=Vt?.el,$t=Vt?.pointerType||"mouse";try{const hn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:wt,pointerType:$t});C.dispatchEvent(hn)}catch{}try{C.releasePointerCapture(wt)}catch{}try{lt&&typeof lt.releasePointerCapture=="function"&&lt.releasePointerCapture(wt)}catch{}})}catch{}try{for(let wt=0;wt<5;wt++)try{C.releasePointerCapture(wt)}catch{}C.querySelectorAll(".node, .connection, [data-drag]").forEach(wt=>{try{wt.releasePointerCapture(1)}catch{}})}catch{}if(z){const He=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});C.dispatchEvent(He);const wt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});C.dispatchEvent(wt)}setTimeout(()=>{const He=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:ke,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),wt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:ke,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});C.dispatchEvent(He),setTimeout(()=>{C.dispatchEvent(wt);const Vt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Xe,clientY:ke,deltaY:0});C.dispatchEvent(Vt),Oe(" Reset complete")},50)},50)})}}},100);let Se=!1;return re=new ResizeObserver(oe=>{for(const Ce of oe){const{width:Pe,height:kt}=Ce.contentRect;!Se&&Pe>0&&kt>0&&(Se=!0,Oe(" ResizeObserver: Container now has size",Pe,kt),setTimeout(()=>{C.focus();const Ve=C.getBoundingClientRect(),Xe=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ve.left+Ve.width/2,clientY:Ve.top+Ve.height/2,deltaY:0});C.dispatchEvent(Xe)},50))}}),re.observe(C),ie});const de=()=>{Oe(" graphLoadComplete event received - triggering view reset");const ie=()=>{window.resetEditorView&&window.resetEditorView()};ie(),setTimeout(ie,100),setTimeout(ie,500),setTimeout(ie,1e3)};return window.addEventListener("graphLoadComplete",de),()=>{re&&re.disconnect(),window.removeEventListener("graphLoadComplete",de),C.removeEventListener("gotpointercapture",ne,!0),C.removeEventListener("lostpointercapture",T,!0),window.removeEventListener("pointerup",F,!0),window.removeEventListener("pointercancel",F,!0),L.then(ie=>ie.destroy())}},[Ye]),x.useEffect(()=>{if(!t||!s||!p)return;const C=async T=>{if(T.target.tagName==="INPUT"||T.target.tagName==="TEXTAREA"||T.target.isContentEditable)return;if(Oe(` KeyDown: ${T.code} (Ctrl: ${T.ctrlKey}, Meta: ${T.metaKey})`),T.code==="F5"||(T.ctrlKey||T.metaKey)&&T.shiftKey&&T.code==="KeyR"){T.preventDefault(),Oe(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(T.code==="KeyF"&&!T.ctrlKey&&!T.metaKey&&!T.altKey){T.preventDefault();const oe=W.current,Ce=ee.current;if(oe&&Ce){const Pe=Ce.getNodes();Pe.length>0&&(Oe(" Zoom extents triggered (F key)"),Ra.zoomAt(oe,Pe,{scale:.9}).catch(kt=>{console.warn("[F key] zoomAt failed:",kt)}))}return}if((T.ctrlKey||T.metaKey)&&T.code==="KeyF"){T.preventDefault(),Re(oe=>({visible:!oe.visible,query:"",results:[],selectedIndex:0}));return}const F=ee.current,de=W.current,ie=I.current;if(!F||!de){Oe(" No editor/area ref available");return}const Se=()=>{const oe=new Set;if(ie&&ie.entities&&ie.entities instanceof Map)for(const[Ce,Pe]of ie.entities)F.getNode(Ce)&&oe.add(Ce);for(const Ce of D.current){const Pe=F.getNode(Ce);Oe(` Checking node ${Ce}: exists=${!!Pe}`),Pe&&oe.add(Ce)}return Oe(` Found ${oe.size} selected nodes:`,Array.from(oe)),Array.from(oe)};if(T.code==="Delete"||T.code==="Backspace"){Oe(" Delete key pressed. lassoSelectedNodesRef.current size:",D.current.size),Oe(" lassoSelectedNodesRef.current contents:",Array.from(D.current));const oe=Se();if(Oe(` Deleting ${oe.length} nodes:`,oe),oe.length>0){const Ce=[],Pe=[],kt=new Set(oe);for(const Ve of F.getConnections())(kt.has(Ve.source)||kt.has(Ve.target))&&Pe.push({source:Ve.source,target:Ve.target,sourceOutput:Ve.sourceOutput,targetInput:Ve.targetInput});for(const Ve of oe){const Xe=F.getNode(Ve);Xe&&Ce.push({id:Ve,label:Xe.label,position:de.nodeViews.get(Ve)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(Xe.properties||{}))})}xe.current.push({type:"delete",nodes:Ce,connections:Pe}),Oe(" Saved undo state:",xe.current.length,"items in stack");for(const Ve of oe){const Xe=F.getConnections().filter(ke=>ke.source===Ve||ke.target===Ve);for(const ke of Xe)await F.removeConnection(ke.id);await F.removeNode(Ve),D.current.delete(Ve)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((T.ctrlKey||T.metaKey)&&T.code==="KeyZ"&&!T.shiftKey){if(T.preventDefault(),xe.current.length===0){Oe(" Nothing to undo");return}const oe=xe.current.pop();if(Oe(" Undoing:",oe.type,oe.nodes.length,"nodes"),oe.type==="delete"){const Ce={};E.current=!0;try{for(const Pe of oe.nodes){const kt=Dn.getByLabel(Pe.label);if(kt){let Ve;const Xe=()=>{de&&de.update("node",Ve.id),c&&F&&(c.reset(),setTimeout(()=>{F.getNodes().forEach(async bt=>{try{await c.fetch(bt.id)}catch{}})},0))},ke=()=>{kt.updateStrategy==="dataflow"?(c&&c.reset(),c&&F&&setTimeout(()=>{F.getNodes().forEach(async bt=>{try{await c.fetch(bt.id)}catch{}})},0)):Xe()};Ve=kt.factory(ke),Pe.properties&&Object.assign(Ve.properties,Pe.properties),await F.addNode(Ve),await de.translate(Ve.id,Pe.position),Ce[Pe.id]=Ve.id}}for(const Pe of oe.connections){const kt=Ce[Pe.source]||Pe.source,Ve=Ce[Pe.target]||Pe.target,Xe=F.getNode(kt),ke=F.getNode(Ve);if(Xe&&ke)try{await F.addConnection(new Kt.Connection(Xe,Pe.sourceOutput,ke,Pe.targetInput))}catch(bt){console.warn("[Editor] Could not restore connection:",bt)}}Oe(" Undo complete - restored",oe.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,de?.updateBackdropCaptures?.()}}}if((T.ctrlKey||T.metaKey)&&T.code==="KeyC")try{const oe=Se();if(oe.length===0){Oe(" Nothing selected to copy");return}Oe(` Copying ${oe.length} nodes`);const Ce=[],Pe=new Set(oe);for(const Xe of oe){const ke=F.getNode(Xe);ke&&Ce.push({label:ke.label,position:de.nodeViews.get(ke.id)?.position||{x:0,y:0},data:{id:ke.id,properties:JSON.parse(JSON.stringify(ke.properties||{}))}})}if(Ce.length===0){Oe(" Nothing selected to copy (no nodes in selection)");return}const kt=[];for(const Xe of F.getConnections())Pe.has(Xe.source)&&Pe.has(Xe.target)&&kt.push({source:Xe.source,target:Xe.target,sourceOutput:Xe.sourceOutput,targetInput:Xe.targetInput});const Ve={nodes:Ce,connections:kt};localStorage.setItem("rete-clipboard",JSON.stringify(Ve)),Oe("Copied to clipboard:",Ve)}catch(oe){console.error("[Editor] Copy failed:",oe)}if((T.ctrlKey||T.metaKey)&&T.code==="KeyV"){const oe=localStorage.getItem("rete-clipboard");if(!oe){Oe(" Clipboard empty");return}try{const Ce=JSON.parse(oe),Pe={},Ve=(W.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},Xe=de.area.transform,ke=(q.current.x-Ve.left-Xe.x)/Xe.k,bt=(q.current.y-Ve.top-Xe.y)/Xe.k;let He=1/0,wt=1/0;for(const lt of Ce.nodes)He=Math.min(He,lt.position.x),wt=Math.min(wt,lt.position.y);ie&&ie.entities&&Array.from(ie.entities).forEach(lt=>ie.remove(lt)),E.current=!0;try{for(const lt of Ce.nodes){let $t;const hn=Dn.getByLabel(lt.label);if(hn){const kn=()=>{de&&de.update("node",$t.id),c&&F&&(c.reset(),setTimeout(()=>{F.getNodes().forEach(async pn=>{try{await c.fetch(pn.id)}catch{}})},0))},cn=()=>{hn.updateStrategy==="dataflow"?(c&&c.reset(),c&&F&&setTimeout(()=>{F.getNodes().forEach(async pn=>{try{await c.fetch(pn.id)}catch{}})},0)):kn()};$t=hn.factory(cn)}if($t){typeof $t.restore=="function"&&lt.data?$t.restore(lt.data):lt.data&&lt.data.properties&&$t.properties&&Object.assign($t.properties,lt.data.properties),await F.addNode($t);const kn=lt.position.x-He,cn=lt.position.y-wt,pn={x:ke+kn,y:bt+cn};await de.translate($t.id,pn),Pe[lt.data.id]=$t.id,ie&&ie.add({id:$t.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,de?.updateBackdropCaptures?.()}const Vt=[];for(const lt of Ce.connections){const $t=Pe[lt.source],hn=Pe[lt.target];if($t&&hn){const kn=F.getNode($t),cn=F.getNode(hn);kn&&cn&&Vt.push(F.addConnection(new Kt.Connection(kn,lt.sourceOutput,cn,lt.targetInput)))}}if(await Promise.all(Vt),c&&F){c.reset();for(const lt of F.getNodes())try{await c.fetch(lt.id)}catch{}}setTimeout(()=>{for(const lt of Object.keys(Pe)){const $t=Pe[lt];de&&de.update("node",$t)}},100),Oe("Pasted from clipboard")}catch(Ce){console.error("[Editor] Paste failed:",Ce)}}T.code==="Home"&&(T.preventDefault(),de.area&&(de.area.zoom(1,0,0),de.area.translate(0,0),Oe(" Viewport reset via Home key"))),T.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Oe(" Drag state reset via Escape key"))},z=T=>{q.current={x:T.clientX,y:T.clientY}},L=T=>{T.key==="Shift"&&(ve.current=!0)},re=T=>{T.key==="Shift"&&(ve.current=!1)},te=()=>{Oe(" Received delete from Electron IPC"),C({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let ne=null;return window.api&&window.api.onDeleteKey&&(ne=window.api.onDeleteKey(te)),window.addEventListener("keydown",C),window.addEventListener("keydown",L),window.addEventListener("keyup",re),window.addEventListener("mousemove",z),()=>{window.removeEventListener("keydown",C),window.removeEventListener("keydown",L),window.removeEventListener("keyup",re),window.removeEventListener("mousemove",z),ne&&ne()}},[t,s,c,p]),x.useEffect(()=>{const C=a.current;if(!C||!t||!s)return;const z=L=>{let re=null;const te=L.target.closest('[data-testid="node"]');if(te&&(re=te.dataset.nodeId),!re&&s?.nodeViews){for(const[ne,T]of s.nodeViews.entries())if(T.element&&T.element.contains(L.target)){re=ne,T.element;break}}if(console.log("[ContextMenu] clickedNodeId:",re),console.log("[ContextMenu] lassoSelectedNodesRef:",D.current.size,Array.from(D.current)),re){L.preventDefault();const ne=t.getNode(re),T=D.current,F=T.size>1&&T.has(re),de=[];F&&(de.push({label:" Convert to Sub-Graph",handler:async()=>{const ie=Array.from(T);await Rt(ie)}}),de.push({separator:!0})),de.push({label:"Delete",handler:async()=>{const ie=F?Array.from(T):[re];for(const Se of ie){const oe=t.getConnections().filter(Ce=>Ce.source===Se||Ce.target===Se);for(const Ce of oe)await t.removeConnection(Ce.id);await t.removeNode(Se)}T.clear()}}),Je({visible:!0,position:{x:L.clientX,y:L.clientY},items:de,nodeContext:ne})}else{L.preventDefault();const ne=window._t2GetMenuItems?window._t2GetMenuItems():[];Je({visible:!0,position:{x:L.clientX,y:L.clientY},items:ne,nodeContext:null})}};return C.addEventListener("contextmenu",z),()=>{C.removeEventListener("contextmenu",z)}},[t,s]),x.useEffect(()=>{if(!t||!s)return;const C=()=>{const L=t.getNodes().map(te=>{const ne=s.nodeViews.get(te.id);return{id:te.id,name:te.constructor.name,label:te.label,properties:te.properties?{...te.properties}:{},position:ne?[ne.position.x,ne.position.y]:[0,0]}}),re=t.getConnections().map(te=>({id:te.id,source:te.source,sourceOutput:te.sourceOutput,target:te.target,targetInput:te.targetInput}));return{nodes:L,connections:re}},z=async(L,re=!0)=>{const te=t.getConnections(),ne=t.getNodes();for(const T of te)await t.removeConnection(T.id);for(const T of ne)await t.removeNode(T.id);for(const T of L.nodes){const F=Dn.getByLabel(T.label);if(!F){console.warn("[SubGraph] Unknown node type:",T.label);continue}const de=F.factory(()=>{s&&s.update("node",T.id),window._t2Process&&window._t2Process()});de.id=T.id,T.properties&&typeof de.restore=="function"?de.restore({properties:T.properties}):T.properties&&Object.assign(de.properties||{},T.properties),await t.addNode(de);const ie=T.position,Se=Array.isArray(ie)?ie[0]:ie?.x||0,oe=Array.isArray(ie)?ie[1]:ie?.y||0;await s.translate(de.id,{x:Se,y:oe})}for(const T of L.connections){const F=t.getNode(T.source),de=t.getNode(T.target);if(!F||!de)continue;const ie=F.outputs?.[T.sourceOutput],Se=de.inputs?.[T.targetInput];if(!ie||!Se)continue;const oe=new window.Rete.ClassicPreset.Connection(F,T.sourceOutput,de,T.targetInput);oe.id=T.id,await t.addConnection(oe)}re&&s?.area&&setTimeout(()=>{try{Ra.zoomAt(s,t.getNodes())}catch(T){console.warn("[SubGraph] zoomAt failed:",T)}},100)};return window.enterSubGraph=async(L,re)=>{if(console.log("[SubGraph] Entering sub-graph:",L,re?.name),!re?.internalNodes||re.internalNodes.length===0){window.T2Toast&&window.T2Toast.info("This sub-graph is empty");return}const te=C();$.length===0&&(ce.current=te),me(T=>[...T,{nodeId:L,name:re.name||"Sub-Graph",graphData:te}]);const ne={nodes:re.internalNodes||[],connections:re.internalConnections||[]};await z(ne),window.T2Toast&&window.T2Toast.success(`Entered: ${re.name||"Sub-Graph"}`)},window.exitSubGraph=async()=>{if($.length===0){console.warn("[SubGraph] Already at top level");return}const L=C(),re=[],te=[];L.nodes.forEach((ie,Se)=>{ie.label==="SubGraph Input"?re.push({key:`in_${Se}`,label:ie.properties?.portName||"input",type:ie.properties?.portType||"any",internalNodeId:ie.id,internalPort:"value"}):ie.label==="SubGraph Output"&&te.push({key:`out_${Se}`,label:ie.properties?.portName||"output",type:ie.properties?.portType||"any",internalNodeId:ie.id,internalPort:"value"})}),console.log("[SubGraph] Detected exposed ports:",{inputs:re.length,outputs:te.length});const ne=[...$],T=ne.pop();me(ne);const F=T.graphData,de=F.nodes.find(ie=>ie.id===T.nodeId);de&&de.properties&&(de.properties.internalNodes=L.nodes,de.properties.internalConnections=L.connections,de.properties.exposedInputs=re,de.properties.exposedOutputs=te),await z(F),setTimeout(()=>{const ie=t?.getNode(T.nodeId);ie&&typeof ie.rebuildSockets=="function"&&(ie.rebuildSockets(),s&&s.update("node",T.nodeId),console.log("[SubGraph] Rebuilt sockets on parent node"))},200),window.T2Toast&&window.T2Toast.info("Returned to parent graph")},window.exitToMainGraph=async()=>{$.length!==0&&(ce.current&&await z(ce.current),me([]),ce.current=null,window.T2Toast&&window.T2Toast.info("Returned to main graph"))},()=>{delete window.enterSubGraph,delete window.exitSubGraph,delete window.exitToMainGraph}},[t,s,$]);const Rt=x.useCallback(async C=>{if(!t||!s||C.length<2){window.T2Toast&&window.T2Toast.warn("Select at least 2 nodes to create a sub-graph");return}try{const z=C.map(ke=>t.getNode(ke)).filter(Boolean),L=C.map(ke=>s.nodeViews.get(ke)).filter(Boolean);let re=0,te=0;L.forEach(ke=>{re+=ke.position.x,te+=ke.position.y});const ne=re/L.length,T=te/L.length,F=z.map((ke,bt)=>{const He=L[bt];return{id:ke.id,name:ke.constructor.name,label:ke.label,properties:ke.properties?{...ke.properties}:{},position:[He.position.x-ne,He.position.y-T]}}),de=t.getConnections(),ie=new Set(C),Se=de.filter(ke=>ie.has(ke.source)&&ie.has(ke.target)).map(ke=>({id:ke.id,source:ke.source,sourceOutput:ke.sourceOutput,target:ke.target,targetInput:ke.targetInput})),oe=[],Ce=[];de.forEach(ke=>{ie.has(ke.target)&&!ie.has(ke.source)&&oe.push({originalConnection:ke,internalNodeId:ke.target,internalPort:ke.targetInput}),ie.has(ke.source)&&!ie.has(ke.target)&&Ce.push({originalConnection:ke,internalNodeId:ke.source,internalPort:ke.sourceOutput})});const Pe=oe.map((ke,bt)=>({key:`in_${bt}`,label:ke.internalPort,type:"any",internalNodeId:ke.internalNodeId,internalPort:ke.internalPort})),kt=Ce.map((ke,bt)=>({key:`out_${bt}`,label:ke.internalPort,type:"any",internalNodeId:ke.internalNodeId,internalPort:ke.internalPort})),Ve=Dn.get("SubGraphNode");if(!Ve)throw new Error("SubGraphNode not registered");const Xe=Ve.factory(()=>{X.current&&X.current()});Xe.properties={name:`Sub-Graph (${z.length} nodes)`,description:"",icon:"",internalNodes:F,internalConnections:Se,exposedInputs:Pe,exposedOutputs:kt},Xe.rebuildSockets(),await t.addNode(Xe),await s.translate(Xe.id,{x:ne,y:T});for(const ke of[...oe,...Ce])await t.removeConnection(ke.originalConnection.id);for(let ke=0;ke<oe.length;ke++){const bt=oe[ke],He=t.getNode(bt.originalConnection.source);if(He){const wt=new Kt.Connection(He,bt.originalConnection.sourceOutput,Xe,`exp_in_${ke}`);await t.addConnection(wt)}}for(let ke=0;ke<Ce.length;ke++){const bt=Ce[ke],He=t.getNode(bt.originalConnection.target);if(He){const wt=new Kt.Connection(Xe,`exp_out_${ke}`,He,bt.originalConnection.targetInput);await t.addConnection(wt)}}for(const ke of C){const bt=t.getConnections().filter(He=>He.source===ke||He.target===ke);for(const He of bt)await t.removeConnection(He.id);await t.removeNode(ke)}D.current.clear(),window.T2Toast&&window.T2Toast.success(`Created sub-graph with ${z.length} nodes`),Oe(`[SubGraph] Created sub-graph with ${F.length} nodes, ${Se.length} internal connections, ${Pe.length} inputs, ${kt.length} outputs`)}catch(z){console.error("[SubGraph] Conversion failed:",z),window.T2Toast&&window.T2Toast.error(`Sub-graph creation failed: ${z.message}`)}},[t,s]),Yt=x.useCallback(()=>{Je(C=>({...C,visible:!1}))},[]),It=x.useCallback(async C=>{C.handler&&await C.handler(_e.position)},[_e.position]),ln=async()=>{if(!(!t||!s))try{const C=t.getNodes().map(Se=>{const oe=typeof Se.toJSON=="function"?Se.toJSON():{...Se};return Se.properties&&(oe.properties=Se.properties),{id:Se.id,label:Se.label,position:s.nodeViews.get(Se.id)?.position||{x:0,y:0},data:oe}}),z=t.getConnections().map(Se=>({id:Se.id,source:Se.source,target:Se.target,sourceOutput:Se.sourceOutput,targetInput:Se.targetInput})),L=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},re={nodes:C,connections:z,viewport:L},te=JSON.stringify(re,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Oe("Running in HA ingress - showing save dialog"),Q(re),_(!0);return}try{te.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",te))}catch{console.warn("localStorage skipped")}Oe("Graph saved to localStorage");try{const Se=await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:te});Se.ok?Oe("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",Se.status)}catch(Se){console.warn("[handleSave] Failed to save to server:",Se)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",te),Oe("[handleSave] Saved temp file for Electron reload")}catch(Se){console.warn("[handleSave] Failed to save temp file via Electron API",Se)}if(window.showSaveFilePicker)try{const oe=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await oe.write(te),await oe.close(),Oe("Graph saved to file");return}catch(Se){if(Se.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",Se)}const F=new Blob([te],{type:"application/json"}),de=URL.createObjectURL(F),ie=document.createElement("a");ie.href=de,ie.download=`autotron_graph_${Date.now()}.json`,ie.click(),URL.revokeObjectURL(de),Oe("Graph saved via download")}catch(C){console.error("Failed to save graph:",C)}};x.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!t||!s))try{const C=t.getNodes().map(ne=>{const T=typeof ne.toJSON=="function"?ne.toJSON():{...ne};return ne.properties&&(T.properties=ne.properties),{id:ne.id,label:ne.label,position:s.nodeViews.get(ne.id)?.position||{x:0,y:0},data:T}}),z=t.getConnections().map(ne=>({id:ne.id,source:ne.source,target:ne.target,sourceOutput:ne.sourceOutput,targetInput:ne.targetInput})),L=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},re={nodes:C,connections:z,viewport:L,preUpdateSave:!0,timestamp:Date.now()},te=JSON.stringify(re);te.length<2e6&&(localStorage.setItem("saved-graph",te),Oe("[triggerGraphSave] Graph saved before update"))}catch(C){console.warn("[triggerGraphSave] Failed:",C)}},()=>{delete window.triggerGraphSave}),[t,s]);const[it,jt]=x.useState(!1),Nn=x.useRef(null),Fe=x.useRef(Date.now());x.useEffect(()=>{if(!t)return;const C=()=>{jt(!0)};t.addPipe(z=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(z.type)&&C(),z))},[t]),x.useEffect(()=>{if(!t||!s)return;const C=async()=>{if(!(window.graphLoading||V.current)&&it)try{const z=t.getNodes().map(T=>{const F=typeof T.toJSON=="function"?T.toJSON():{...T};return T.properties&&(F.properties=T.properties),{id:T.id,label:T.label,position:s.nodeViews.get(T.id)?.position||{x:0,y:0},data:F}}),L=t.getConnections().map(T=>({id:T.id,source:T.source,target:T.target,sourceOutput:T.sourceOutput,targetInput:T.targetInput})),re=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},te={nodes:z,connections:L,viewport:re,autoSaved:!0,timestamp:Date.now()},ne=JSON.stringify(te);if(ne.length<2e6){localStorage.setItem("saved-graph",ne),Fe.current=Date.now(),jt(!1);try{await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:ne})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(z){console.warn("[Auto-save] Failed:",z)}};return Nn.current=setInterval(C,12e4),()=>{Nn.current&&clearInterval(Nn.current)}},[t,s,it]),x.useEffect(()=>{if(!t||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Oe("[AutoLoad] Detected post-update reload, attempting to restore graph...");const z=setTimeout(async()=>{try{const L=localStorage.getItem("saved-graph");if(L){Oe("[AutoLoad] Found saved graph, loading...");const re=JSON.parse(L);re.nodes&&re.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(L){console.warn("[AutoLoad] Failed to auto-load graph:",L)}},1e3);return()=>clearTimeout(z)}},[t,s,c]);const vt=x.useRef(!1);x.useEffect(()=>{if(!t||!s||!c||vt.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Oe("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),vt.current=!0;return}const L=localStorage.getItem("saved-graph"),re=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(L||re){Oe("[ServerAutoLoad] Skipping - desktop mode with local graph");return}vt.current=!0;const ne=setTimeout(async()=>{try{Oe("[ServerAutoLoad] Fetching last active graph from server...");const F=await(await fetch(Tn("/api/engine/last-active"))).json();F.success&&F.graph?(Oe("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(F.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Oe("[ServerAutoLoad] No last active graph on server")}catch(T){console.warn("[ServerAutoLoad] Failed to fetch from server:",T)}},1500);return()=>clearTimeout(ne)},[t,s,c]);const nn=async()=>{if(!t||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!t,area:!!s,engine:!!c});return}try{let C=localStorage.getItem("saved-graph");if(!C&&window.api?.readTempFile)try{const ne=await window.api.readTempFile("autotron_graph.json");ne?.success&&ne.content&&(C=ne.content,Oe("[handleLoad] Loaded graph from Electron temp file"))}catch(ne){console.warn("[handleLoad] Failed to read Electron temp file",ne)}if(!C){alert("No saved graph found");return}const z=JSON.parse(C);Oe(`[handleLoad] Loading graph with ${z.nodes?.length} nodes`);const L=lb(z);if(!L.valid){console.warn("[handleLoad] Graph validation failed:",L.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${L.errors.length} errors`,4e3);const ne=cb(z);ne.repaired&&(Oe("[handleLoad] Graph repaired:",ne.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${ne.fixes.length} fixes applied`,3e3),Object.assign(z,ne.graphData))}L.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",L.warnings),await Zn();const re=t.getNodes();if(re.length>0){console.error("[handleLoad] Clear did not work! Still have",re.length,"nodes");for(const ne of re)try{await t.removeNode(ne.id)}catch(T){console.error("[handleLoad] Force remove failed:",T)}}if(E.current=!0,V.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const T of z.nodes){let F;const de=Dn.getByLabel(T.label);if(de){const ie=()=>{if(V.current||window.graphLoading){s&&s.update("node",T.id);return}s&&s.update("node",T.id),window._t2Process&&window._t2Process()};F=de.factory(ie)}F&&(F.id=T.id,typeof F.restore=="function"&&T.data?F.restore(T.data):T.data&&T.data.properties&&F.properties&&Object.assign(F.properties,T.data.properties),await t.addNode(F),await s.translate(F.id,T.position))}const ne=[];for(const T of z.connections){const F=t.getNode(T.source),de=t.getNode(T.target);F&&de&&ne.push(t.addConnection(new Kt.Connection(F,T.sourceOutput,de,T.targetInput)))}await Promise.all(ne)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const te=t.getNodes();if(te.length>0&&s){Oe("[handleLoad] Zooming to fit",te.length,"nodes...");try{await Ra.zoomAt(s,te,{scale:.9})}catch(ne){console.warn("[handleLoad] zoomAt failed:",ne)}}X.current&&(Oe("[handleLoad] Processing graph immediately..."),await X.current(),Oe("[handleLoad] Graph processing complete")),V.current=!1,Oe("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Oe("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const ne=z.viewport||{x:0,y:0,k:1},T=ne.k||1,F=ne.x||0,de=ne.y||0;Oe("[handleLoad] Restoring viewport:",{savedX:F,savedY:de,savedK:T}),Oe("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(T,0,0),s.area.translate(F,de)}catch(Se){console.warn("[handleLoad] Viewport restore failed:",Se)}Oe("[handleLoad] Transform after restore:",{...s.area.transform});const ie=s.container;if(ie){ie.tabIndex=-1,ie.focus(),document.activeElement&&document.activeElement!==ie&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const Se=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(Se,100),setTimeout(Se,500),setTimeout(Se,1e3)}t.getNodes().forEach(Se=>{const oe=s.nodeViews.get(Se.id);if(oe?.element)try{for(let Ce=0;Ce<10;Ce++)try{oe.element.releasePointerCapture(Ce)}catch{}}catch{}})}},300),Oe("Graph loaded")}catch(C){console.error("Failed to load graph:",C),V.current=!1,alert("Failed to load graph")}},On=async()=>{if(!t||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(t.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const z=await fetch(Tn("/api/examples/starter"));if(!z.ok)throw new Error(`Failed to fetch example: ${z.status}`);const L=await z.json();if(!L.success||!L.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(L.graph)),Oe("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await nn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(z){console.error("[handleLoadExample] Failed:",z),alert("Failed to load example graph: "+z.message)}};x.useEffect(()=>{const C=()=>{Oe("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),nn()};return document.addEventListener("autoLoadGraph",C),()=>document.removeEventListener("autoLoadGraph",C)},[t,s,c]);const Zn=async()=>{if(!t){console.warn("[handleClear] No editor instance!");return}try{const C=t.getConnections(),z=t.getNodes();Oe(`[handleClear] Removing ${C.length} connections and ${z.length} nodes`);for(const re of C)await t.removeConnection(re.id);for(const re of z)await t.removeNode(re.id);const L=t.getNodes();Oe(`[handleClear] Complete. Remaining nodes: ${L.length}`),L.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",L.map(re=>re.id))}catch(C){console.error("Failed to clear graph:",C)}},Ta=()=>{if(!(!t||!s))try{const C=t.getNodes().map(F=>{const de=typeof F.toJSON=="function"?F.toJSON():{...F};return F.properties&&(de.properties=F.properties),{id:F.id,label:F.label,position:s.nodeViews.get(F.id)?.position||{x:0,y:0},data:de}}),z=t.getConnections().map(F=>({id:F.id,source:F.source,target:F.target,sourceOutput:F.sourceOutput,targetInput:F.targetInput})),L=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},re={nodes:C,connections:z,viewport:L},te=new Blob([JSON.stringify(re,null,2)],{type:"application/json"}),ne=URL.createObjectURL(te),T=document.createElement("a");T.href=ne,T.download=`graph-${Date.now()}.json`,T.click(),URL.revokeObjectURL(ne),Oe("Graph exported")}catch(C){console.error("Failed to export graph:",C)}},Na=async C=>{const z=lb(C);if(!z.valid){console.warn("[handleImport] Graph validation failed:",z.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${z.errors.length} errors`,4e3);const te=cb(C);if(te.repaired)Oe("[handleImport] Graph repaired:",te.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${te.fixes.length} fixes applied`,3e3),C=te.graphData;else if(!confirm(`Graph has ${z.errors.length} errors. Continue anyway?`))return}const L={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let re=0;if(console.error=(...te)=>{re++<10&&L.error(...te)},L.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!t||!s||!c){Object.assign(console,L);return}try{if(await Zn(),E.current=!0,V.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const T of C.nodes){let F;const de=Dn.getByLabel(T.label);if(!de){console.warn(`[handleImport] No definition found for node label: "${T.label}"`);continue}if(de){const ie=()=>{if(V.current||window.graphLoading){s&&s.update("node",T.id);return}s&&s.update("node",T.id),window._t2Process&&window._t2Process()};F=de.factory(ie)}F&&(F.id=T.id,T.label==="Timeline Color"&&L.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof F.restore=="function",hasData:!!T.data,dataKeys:T.data?Object.keys(T.data):"N/A",propertiesKeys:T.data?.properties?Object.keys(T.data.properties):"N/A",previewModeValue:T.data?.properties?.previewMode}),typeof F.restore=="function"&&T.data?F.restore(T.data):T.data&&T.data.properties&&F.properties&&Object.assign(F.properties,T.data.properties),await t.addNode(F),await s.translate(F.id,T.position))}const ne=[];for(const T of C.connections){const F=t.getNode(T.source),de=t.getNode(T.target);if(F&&de){const ie=F.outputs?.[T.sourceOutput],Se=de.inputs?.[T.targetInput];if(!ie){console.warn(`[handleImport] Connection skipped - source output '${T.sourceOutput}' not found on node ${F.label}`);continue}if(!Se){console.warn(`[handleImport] Connection skipped - target input '${T.targetInput}' not found on node ${de.label}`);continue}ne.push(t.addConnection(new Kt.Connection(F,T.sourceOutput,de,T.targetInput)))}else console.warn(`[handleImport] Connection skipped - missing node: source=${T.source} (${!!F}), target=${T.target} (${!!de})`)}await Promise.all(ne)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const te=t.getNodes();if(te.length>0&&s)try{await Ra.zoomAt(s,te,{scale:.9})}catch{}V.current=!1,setTimeout(async()=>{window.graphLoading=!1,Oe("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{if(X.current&&(Oe("[handleImport] Running processImmediate to sync node states"),X.current()),s&&t){const T=t.getNodes();Oe(`[handleImport] Updating ${T.length} nodes for connection visibility`),T.forEach(F=>{s.update("node",F.id)})}setTimeout(()=>{X.current&&(Oe("[handleImport] Running second processImmediate for late-loading data"),X.current())},1500)},500);try{const T=JSON.stringify(C,null,2);T.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",T),Oe("[handleImport] Graph saved to localStorage")),(await fetch(Tn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:T})).ok&&Oe("[handleImport] Graph saved to server as last active")}catch(T){console.warn("[handleImport] Failed to save imported graph:",T)}const ne=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(ne,100),setTimeout(ne,500)},2e3),Object.assign(console,L),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Oe("Graph imported successfully. Pan/zoom should work now.")}catch(te){window.graphLoading=!1,typeof L<"u"&&Object.assign(console,L),console.error("Failed to import graph:",te),V.current=!1,alert("Failed to import graph: "+te.message)}};return h.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[h.jsx(WO,{width:tt,panelRef:ye,dropActive:ze,favoriteGroups:Y,onAddFavorite:pe,onRemoveFavorite:Ee,onCreateNode:Ie}),$.length>0&&h.jsxs("div",{style:{position:"absolute",top:"10px",left:`${tt+20}px`,zIndex:1e3,display:"flex",alignItems:"center",gap:"8px",background:"rgba(30, 40, 50, 0.95)",padding:"8px 16px",borderRadius:"8px",border:"1px solid #3d6070",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[h.jsx("button",{onClick:()=>window.exitToMainGraph?.(),style:{background:"#2a4858",border:"1px solid #4a7080",borderRadius:"4px",color:"#8ab",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},title:"Return to main graph",children:" Main"}),$.map((C,z)=>h.jsxs(Ea.Fragment,{children:[h.jsx("span",{style:{color:"#556"},children:""}),h.jsxs("span",{style:{color:z===$.length-1?"#fff":"#8ab",fontWeight:z===$.length-1?"bold":"normal",fontSize:"13px"},children:[" ",C.name]})]},z)),h.jsx("button",{onClick:()=>window.exitSubGraph?.(),style:{background:"#4a5868",border:"1px solid #6a7888",borderRadius:"4px",color:"#cde",padding:"4px 12px",cursor:"pointer",fontSize:"12px",marginLeft:"12px"},title:"Go back to parent graph",children:" Back"})]}),h.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${tt}px`}}),h.jsx("div",{ref:w}),(()=>{const C=g?k.current:w.current;return C?Jr.createPortal(h.jsx(KO,{onSave:ln,onLoad:nn,onLoadExample:On,onClear:Zn,onExport:Ta,onImport:Na,hasUnsavedChanges:it,isMerged:g,onToggleMerged:()=>b(z=>!z)}),C):null})(),h.jsx(QO,{dockSlotRef:k}),h.jsx(ej,{visible:_e.visible,position:_e.position,items:_e.items,onClose:Yt,onSelect:It}),h.jsx(JO,{isOpen:N,onClose:()=>_(!1),onSave:()=>{jt(!1),_(!1)},currentGraphData:M}),ge.visible&&h.jsxs("div",{style:{position:"absolute",top:"60px",left:"50%",transform:"translateX(-50%)",zIndex:1e4,background:"rgba(30, 40, 50, 0.98)",borderRadius:"12px",border:"1px solid #4a6070",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",width:"500px",maxWidth:"90vw",overflow:"hidden"},children:[h.jsx("div",{style:{padding:"12px 16px",borderBottom:"1px solid #3a5060"},children:h.jsx("input",{type:"text",placeholder:"Search nodes by name, type, or property...",autoFocus:!0,value:ge.query,onChange:C=>{const z=C.target.value,L=ee.current,re=W.current;if(!L||!re)return;const te=[];if(z.trim()){const ne=z.toLowerCase();for(const T of L.getNodes()){const F=(T.label||"").toLowerCase(),de=(T.properties?.customTitle||T.properties?.customName||"").toLowerCase(),ie=(T.constructor?.name||"").toLowerCase(),Se=(T.properties?.deviceName||"").toLowerCase(),oe=(T.properties?.symbol||"").toLowerCase();if(`${F} ${de} ${ie} ${Se} ${oe}`.includes(ne)){const Pe=re.nodeViews.get(T.id)?.position||{x:0,y:0};te.push({id:T.id,label:T.label,customTitle:T.properties?.customTitle||T.properties?.customName,type:T.constructor?.name,position:Pe})}}}Re({visible:!0,query:z,results:te,selectedIndex:0})},onKeyDown:C=>{if(C.key==="Escape")Re({visible:!1,query:"",results:[],selectedIndex:0});else if(C.key==="ArrowDown")C.preventDefault(),Re(z=>({...z,selectedIndex:Math.min(z.selectedIndex+1,z.results.length-1)}));else if(C.key==="ArrowUp")C.preventDefault(),Re(z=>({...z,selectedIndex:Math.max(z.selectedIndex-1,0)}));else if(C.key==="Enter"&&ge.results.length>0){C.preventDefault();const z=ge.results[ge.selectedIndex];if(z){const L=W.current,re=ee.current;if(L&&re){const te=re.getNode(z.id);te&&Ra.zoomAt(L,[te],{scale:1.2})}Re({visible:!1,query:"",results:[],selectedIndex:0})}}},style:{width:"100%",padding:"12px 16px",fontSize:"16px",background:"#1a2a35",border:"1px solid #3a5060",borderRadius:"8px",color:"#fff",outline:"none"}})}),ge.results.length>0&&h.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:ge.results.map((C,z)=>h.jsxs("div",{onClick:()=>{const L=W.current,re=ee.current;if(L&&re){const te=re.getNode(C.id);te&&Ra.zoomAt(L,[te],{scale:1.2})}Re({visible:!1,query:"",results:[],selectedIndex:0})},style:{padding:"10px 16px",cursor:"pointer",background:z===ge.selectedIndex?"#2a4a5a":"transparent",borderBottom:"1px solid #2a3a45",display:"flex",justifyContent:"space-between",alignItems:"center"},onMouseEnter:()=>Re(L=>({...L,selectedIndex:z})),children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#fff",fontWeight:500},children:C.customTitle||C.label}),h.jsxs("div",{style:{color:"#8ab",fontSize:"12px"},children:[C.type,"  x:",Math.round(C.position.x),", y:",Math.round(C.position.y)]})]}),h.jsx("span",{style:{color:"#6a8090",fontSize:"12px"},children:" to zoom"})]},C.id))}),ge.query&&ge.results.length===0&&h.jsxs("div",{style:{padding:"20px",color:"#8ab",textAlign:"center"},children:['No nodes found matching "',ge.query,'"']}),h.jsxs("div",{style:{padding:"8px 16px",background:"#1a2530",color:"#6a7a85",fontSize:"11px",display:"flex",gap:"16px"},children:[h.jsx("span",{children:" Navigate"}),h.jsx("span",{children:" Zoom to node"}),h.jsx("span",{children:"Esc Close"})]})]})]})}class pj extends Ea.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",r),this.setState({error:t,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?h.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:h.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),h.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),h.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&h.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[h.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),h.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[h.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#4a4a6c",onMouseOut:t=>t.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),h.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#339af0",onMouseOut:t=>t.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function mj({isLoading:a,progress:t=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,p]=x.useState(!1),[m,g]=x.useState(a);return x.useEffect(()=>{if(!a&&m){p(!0);const b=setTimeout(()=>{g(!1),p(!1)},500);return()=>clearTimeout(b)}else a&&!m&&g(!0)},[a,m]),m?h.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[h.jsx("div",{className:"loading-logo",children:""}),h.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),h.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),h.jsx("div",{className:"loading-progress-container",children:h.jsx("div",{className:"loading-progress-bar",children:h.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,t)}%`}})})}),h.jsx("div",{className:"loading-status",children:r}),l>0&&h.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&h.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function gj({updateInfo:a,onClose:t,onApplyUpdate:r}){const[s,l]=x.useState(!1),[c,d]=x.useState("");if(!a||!a.hasUpdate)return null;const p=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(g){console.warn("Pre-update graph save failed:",g)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const b=await(await fn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(b.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const w=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(w,2e3))};w()},3e3)},2e3)}catch(g){g.message.includes("fetch")||g.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const b=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)):(d(`Update failed: ${g.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),t()};return h.jsx("div",{className:"update-modal-overlay",children:h.jsxs("div",{className:"update-modal",children:[h.jsxs("div",{className:"update-modal-header",children:[h.jsx("span",{className:"update-icon",children:""}),h.jsx("h2",{children:"Update Available!"})]}),h.jsxs("div",{className:"update-modal-version",children:[h.jsx("span",{className:"version-current",children:a.currentVersion}),h.jsx("span",{className:"version-arrow",children:""}),h.jsx("span",{className:"version-new",children:a.newVersion})]}),h.jsxs("div",{className:"update-modal-content",children:[h.jsx("h3",{children:"What's New:"}),h.jsx("div",{className:"changelog-content",children:h.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&h.jsxs("div",{className:"update-status",children:[h.jsx("span",{className:"status-spinner",children:""}),c]}),h.jsx("div",{className:"update-modal-actions",children:s?h.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"update-btn update-btn-primary",onClick:p,children:"Update Now"}),h.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const eu=a=>{if(!(a?.type==="visibilitychange"&&document.visibilityState!=="hidden")&&!window._t2SyncDone){if(window._t2SyncDone=!0,console.log(`[App] Sync triggered by: ${a?.type||"unknown"}`),window._t2GetGraphData)try{const t=window._t2GetGraphData();if(t&&t.nodes&&t.nodes.length>0){const r=JSON.stringify(t),s=window.location.port==="5173"?"http://localhost:3000":window.location.origin,l=new XMLHttpRequest;l.open("POST",`${s}/api/engine/save-active`,!1),l.setRequestHeader("Content-Type","application/json"),l.send(r),console.log(`[App] Synced graph on close (${t.nodes.length} nodes, status=${l.status})`)}}catch(t){console.warn("[App] Failed to sync graph on close:",t)}window.socket?.connected&&window.socket.emit("editor-inactive"),setTimeout(()=>{window._t2SyncDone=!1},2e3)}},yj=()=>{document.visibilityState==="visible"&&(console.log("[App] Browser woke up - sending editor-active"),window.socket?.connected&&window.socket.emit("editor-active"))};document.addEventListener("visibilitychange",eu);document.addEventListener("visibilitychange",yj);window.addEventListener("beforeunload",eu);window.addEventListener("pagehide",eu);window.addEventListener("unload",eu);const vj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};vj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Q1=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},t={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const p=t[c];p&&(d.accent&&(l.style.setProperty(`--node-${p}-color`,d.accent),l.style.setProperty(`--node-${p}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${p}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},W1=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),p=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${p}, ${m}`},t=(c,d=15)=>{const p=parseInt(c.slice(1),16),m=Math.max(0,(p>>16)-Math.round(255*d/100)),g=Math.max(0,(p>>8&255)-Math.round(255*d/100)),b=Math.max(0,(p&255)-Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},r=(c,d=20)=>{const p=parseInt(c.slice(1),16),m=Math.min(255,(p>>16)+Math.round(255*d/100)),g=Math.min(255,(p>>8&255)+Math.round(255*d/100)),b=Math.min(255,(p&255)+Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},p=document.documentElement;for(const[m,g]of Object.entries(s)){const b=d[m]?.color||l[m];b&&(p.style.setProperty(`--socket-${g}-color`,b),p.style.setProperty(`--socket-${g}-dark`,t(b)),p.style.setProperty(`--socket-${g}-border`,r(b)),p.style.setProperty(`--socket-${g}-rgb`,a(b)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Q1();W1();J1();function J1(){const a=t=>{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return`${r}, ${s}, ${l}`};try{const t=localStorage.getItem("t2theme-overrides");if(t){const r=JSON.parse(t),s=document.documentElement;Object.entries(r).forEach(([l,c])=>{l==="borderOpacity"?s.style.setProperty("--node-border-opacity",c/100):typeof c=="string"&&c.startsWith("#")&&(s.style.setProperty(`--theme-${l}`,c),s.style.setProperty(`--theme-${l}-rgb`,a(c)))})}}catch(t){console.warn("Failed to apply stored theme:",t)}}window.applyCategoryColors=Q1;window.applySocketColors=W1;window.applyTheme=J1;const Pf=new Map,Ff=new Map;function bj(){const[a,t]=x.useState(be.connected),[r,s]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=x.useState([]),[d,p]=x.useState([]),[m,g]=x.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[b,w]=x.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[k,E]=x.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[D,X]=x.useState(null),[V,ee]=x.useState(0),[W,I]=x.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[q,ve]=x.useState([]),xe=x.useRef(null),$=x.useRef(null),me=x.useRef({authenticated:!1,invalidPinNotified:!1}),ce=100,ge=op();x.useEffect(()=>{const v=setInterval(()=>{ee(N=>N+1)},3e4);return()=>clearInterval(v)},[]);const Re=x.useCallback(()=>{const v=window._t2Editor;if(!v)return;const _=v.getNodes().filter(M=>M.label==="Backdrop"||M.constructor?.name==="BackdropNode"||M.properties?.width!==void 0&&M.properties?.height!==void 0&&M.properties?.title!==void 0).map(M=>({id:M.id,title:M.properties?.title||"Group",color:M.properties?.customColor||window.BackdropColorPalette?.[M.properties?.colorIndex]?.border||"#888"})).sort((M,Q)=>M.title.localeCompare(Q.title));ve(_)},[]);x.useEffect(()=>{const v=()=>{setTimeout(Re,200)};window.addEventListener("graphLoadComplete",v),window.refreshBackdropGroups=Re;const N=setTimeout(Re,500);return()=>{window.removeEventListener("graphLoadComplete",v),delete window.refreshBackdropGroups,clearTimeout(N)}},[Re]),x.useEffect(()=>X1(N=>{E(N),!N.isLoading&&N.progress===100&&N.failedPlugins?.length>0&&ge.warning(`Loaded ${N.loadedCount} plugins (${N.failedPlugins.length} failed)`),N.error&&ge.error(`Plugin loading failed: ${N.error}`)}),[ge]),x.useEffect(()=>{function v(){t(!0),ge.success("Connected to server"),_e("system","Socket connected to server"),Ff.clear();const Fe=bs();Fe&&be.emit("authenticate",Fe),be.emit("editor-active"),be.emit("request-ha-status")}function N(){t(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),me.current.authenticated=!1,ge.warning("Disconnected from server - reconnecting..."),_e("system","Socket disconnected from server")}function _(Fe){_e("system",`Socket reconnected after ${Fe} attempt(s)`)}function M(Fe){Fe%5===0&&_e("system",`Reconnection attempt ${Fe}...`)}function Q(Fe){_e("system","Reconnection failed, retrying...")}function pe(Fe){s(Fe)}function Ee(){me.current.authenticated||(me.current.authenticated=!0,me.current.invalidPinNotified=!1,ge.success("Authenticated"))}function Ie(Fe){me.current.authenticated=!1;const vt=(Fe?.error||"").toString();if(vt.toLowerCase().includes("invalid pin")){me.current.invalidPinNotified||(me.current.invalidPinNotified=!0,ge.error("Stored PIN is invalid. Update it in Settings  Security."));return}const nn=vt?`Authentication failed: ${vt}`:"Authentication failed";ge.error(nn)}function Ye(){if(!be.connected)return;me.current.invalidPinNotified=!1;const Fe=bs();Fe&&be.emit("authenticate",Fe)}function Rt(Fe){const{id:vt,state:nn,on:On,name:Zn,vendor:Ta}=Fe;if(!vt)return;const Na=Ff.get(vt),C=On!==void 0?On:nn==="on"||nn==="playing"||nn==="open",z=Zn||Fe.friendly_name||Fe.attributes?.friendly_name||vt.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(Na&&Na.on===C)return;Ff.set(vt,{on:C,state:nn});const L=Pf.get(vt),re=C?"ON":"OFF";let te=Ta||"External";Ta||(vt.startsWith("ha_")?te="HA":vt.startsWith("hue_")?te="Hue":vt.startsWith("kasa_")&&(te="Kasa")),L&&Date.now()-L.timestamp<5e3?(_e("device",`${z}  ${re}`,{source:"app",triggeredBy:L.nodeTitle,nodeId:L.nodeId}),Pf.delete(vt)):_e("trigger",`${z}  ${re}`,{source:te})}function Yt(Fe){}function It(Fe){const{nodeId:vt,nodeLabel:nn,result:On}=Fe;_e("node",`${nn||vt} executed`,{...On,nodeId:vt})}function ln(Fe){Array.isArray(Fe)&&p(Fe.slice(0,20))}function it(Fe){const{type:vt,name:nn,value:On}=Fe;_e("trigger",`${vt}: ${nn}`,On)}function jt(Fe){if(Fe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Fe.newVersion&&ge.info(` Update available: ${Fe.currentVersion}  ${Fe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>X(Fe)})}be.on("connect",v),be.on("disconnect",N),be.on("reconnect",_),be.on("reconnect_attempt",M),be.on("reconnect_error",Q),be.on("auth-success",Ee),be.on("auth-failed",Ie),be.on("ha-connection-status",pe),be.on("device-state-update",Rt),be.on("device_state_change",Yt),be.on("node_executed",It),be.on("scheduled_events",ln),be.on("trigger_event",it),be.on("update-available",jt),window.addEventListener("t2-pin-changed",Ye),GT(),be.connected&&(be.emit("editor-active"),t(!0));const Nn=setInterval(()=>{be.connected&&be.emit("editor-heartbeat")},3e4);return()=>{be.connected&&be.emit("editor-inactive"),clearInterval(Nn),be.off("connect",v),be.off("disconnect",N),be.off("reconnect",_),be.off("reconnect_attempt",M),be.off("reconnect_error",Q),be.off("auth-success",Ee),be.off("auth-failed",Ie),be.off("ha-connection-status",pe),be.off("device-state-update",Rt),be.off("device_state_change",Yt),be.off("node_executed",It),be.off("scheduled_events",ln),be.off("trigger_event",it),be.off("update-available",jt),window.removeEventListener("t2-pin-changed",Ye),qT()}},[]);const _e=(v,N,_=null)=>{const M=new Date().toLocaleTimeString();c(Q=>[{timestamp:M,type:v,message:N,details:_},...Q].slice(0,ce))},Je=x.useRef({}),tt=x.useCallback((v,N)=>{const _=N.map(Ee=>({...Ee,nodeId:v}));Je.current[v]=_;const M=[];Object.values(Je.current).forEach(Ee=>{Array.isArray(Ee)&&M.push(...Ee)});const Q=new Date,pe=M.filter(Ee=>Ee.time&&new Date(Ee.time)>Q).sort((Ee,Ie)=>new Date(Ee.time)-new Date(Ie.time)).slice(0,20);p(pe)},[]),Qe=x.useCallback(v=>{delete Je.current[v],tt(v,[])},[tt]),Y=x.useCallback(()=>d||[],[d]);x.useEffect(()=>(window.addEventLog=_e,window.setUpcomingEvents=p,window.getUpcomingEvents=Y,window.registerScheduledEvents=tt,window.unregisterScheduledEvents=Qe,window.T2Toast=ge,window.registerPendingCommand=(v,N,_,M)=>{Pf.set(v,{nodeTitle:N,action:_,nodeId:M,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.getUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[tt,Qe,Y,ge]);const he=v=>{if(!v)return"";const N=new Date(v),M=N-new Date,Q=Math.floor(M/6e4),pe=Math.floor(Q/60),Ee=Math.floor(pe/24);let Ie="";return Ee>0?Ie=`${Ee}d ${pe%24}h`:pe>0?Ie=`${pe}h ${Q%60}m`:Q>0?Ie=`${Q}m`:Ie="<1m",`${N.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${Ie})`},ye=x.useCallback(async v=>{if(!v)return;const N=window._t2Area,_=window._t2Editor;if(!N||!_){console.warn("[focusNode] Editor not ready");return}const M=_.getNode(v);if(!M){console.warn("[focusNode] Node not found:",v);return}try{const{AreaExtensions:Q}=await tv(async()=>{const{AreaExtensions:pe}=await Promise.resolve().then(()=>Nv);return{AreaExtensions:pe}},void 0,import.meta.url);await Q.zoomAt(N,[M],{scale:1})}catch(Q){console.warn("[focusNode] Failed to zoom to node:",Q)}},[]),ze=x.useCallback(async v=>{if(!v)return;const N=window._t2Area,_=window._t2Editor;if(!N||!_){console.warn("[focusBackdrop] Editor not ready");return}const M=_.getNode(v);if(!M){console.warn("[focusBackdrop] Backdrop not found:",v);return}try{const Q=N.nodeViews.get(v);if(!Q){console.warn("[focusBackdrop] Node view not found");return}const pe=Q.position,Ee=M.properties?.width||M.width||400,Ie=M.properties?.height||M.height||300,Ye=pe.x+Ee/2,Rt=pe.y+Ie/2,Yt=N.container,It=Yt.clientWidth,ln=Yt.clientHeight,it=It*.85/Ee,jt=ln*.85/Ie,Nn=Math.min(it,jt,1.5),Fe=It/2-Ye*Nn,vt=ln/2-Rt*Nn;await N.area.zoom(Nn,0,0),await N.area.translate(Fe,vt)}catch(Q){console.warn("[focusBackdrop] Failed to zoom to backdrop:",Q)}},[]),J=x.useCallback(async()=>{const v=window._t2Area,N=window._t2Editor;if(!v||!N){console.warn("[zoomExtents] Editor not ready");return}const _=N.getNodes();if(_.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:M}=await tv(async()=>{const{AreaExtensions:Q}=await Promise.resolve().then(()=>Nv);return{AreaExtensions:Q}},void 0,import.meta.url);await M.zoomAt(v,_,{scale:.7})}catch(M){console.warn("[zoomExtents] Failed to zoom:",M)}},[]);return h.jsxs("div",{className:"app-container",children:[D&&D.hasUpdate&&h.jsx(gj,{updateInfo:D,onClose:()=>X(null)}),h.jsx(mj,{isLoading:k.isLoading,progress:k.progress,status:k.status,loadedCount:k.loadedCount,totalCount:k.totalCount,error:k.error}),h.jsx("div",{className:"editor-wrapper",children:h.jsx(hj,{})}),h.jsx("div",{className:"resize-handle",ref:$,onMouseDown:v=>{v.preventDefault();const N=v.clientY,_=m,M=pe=>{const Ee=N-pe.clientY,Ie=Math.max(80,Math.min(400,_+Ee));g(Ie),localStorage.setItem("panelHeight",Ie)},Q=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Q)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",Q)},children:h.jsx("div",{className:"resize-handle-grip"})}),h.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:b},children:[h.jsxs("div",{className:"panel event-log-panel",children:[h.jsxs("div",{className:"panel-header",children:[h.jsx("span",{className:"panel-title",children:"Event Log"}),h.jsxs("div",{className:"group-nav-buttons",children:[h.jsx("button",{className:"group-nav-btn group-nav-all",onClick:J,title:"Zoom to fit all nodes (F key)",children:" All"}),q.map(v=>h.jsx("button",{className:"group-nav-btn",style:{borderColor:v.color},onClick:()=>ze(v.id),title:`Zoom to "${v.title}" group`,children:v.title},v.id))]}),h.jsxs("div",{className:"panel-controls",children:[h.jsxs("div",{className:"filter-buttons",children:[h.jsx("button",{className:`filter-btn ${W==="all"?"active":""}`,onClick:()=>{I("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),h.jsx("button",{className:`filter-btn ${W==="app"?"active":""}`,onClick:()=>{I("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),h.jsx("button",{className:`filter-btn ${W==="ha"?"active":""}`,onClick:()=>{I("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.max(8,b-1);w(v),localStorage.setItem("panelFontSize",v)},children:"A-"}),h.jsxs("span",{className:"font-size-label",children:[b,"px"]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.min(16,b+1);w(v),localStorage.setItem("panelFontSize",v)},children:"A+"}),h.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),h.jsx("div",{className:"panel-content",ref:xe,children:l.length===0?h.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(v=>W==="all"?!0:W==="app"?v.details?.triggeredBy||v.details?.source==="app"||v.type==="node"||v.type==="device"||v.type==="system":W==="ha"?v.type==="trigger"||v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy:!0).map((v,N)=>h.jsxs("div",{className:`log-entry log-${v.type}${v.details?.nodeId?" clickable":""}`,title:v.details?.nodeId?"Click to jump to this node":v.details?.triggeredBy?`Triggered by: ${v.details.triggeredBy}`:v.details?.source&&v.details.source!=="app"?`Triggered externally via ${v.details.source}`:"",onClick:()=>v.details?.nodeId&&ye(v.details.nodeId),style:v.details?.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"log-time",children:v.timestamp}),h.jsx("span",{className:`log-type-badge ${v.type}`,children:v.type==="trigger"?"external":v.type}),h.jsx("span",{className:"log-message",children:v.message}),v.details?.triggeredBy&&h.jsxs("span",{className:"log-source app-source",children:["via ",v.details.triggeredBy]}),v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy&&h.jsxs("span",{className:"log-source external-source",children:["via ",v.details.source]})]},N))})]}),h.jsxs("div",{className:"panel upcoming-events-panel",children:[h.jsx("div",{className:"panel-header",children:h.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),h.jsx("div",{className:"panel-content",children:d.length===0?h.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((v,N)=>h.jsxs("div",{className:`event-entry event-${v.action||"unknown"}${v.nodeId?" clickable":""}`,onClick:()=>v.nodeId&&ye(v.nodeId),title:v.nodeId?"Click to jump to this node":"",style:v.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"event-time",children:he(v.time)}),h.jsx("span",{className:`event-action ${v.action}`,children:v.action||"event"}),h.jsx("span",{className:"event-device",children:v.deviceName||v.device||"Unknown"})]},N))})]})]})]})}function wj(){return h.jsx(pj,{children:h.jsxs(ZO,{children:[h.jsx(XO,{}),h.jsx(bj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");fb.createRoot(document.getElementById("root")).render(h.jsx(x.StrictMode,{children:h.jsx(wj,{})}));
