function cb(a,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const l in s)if(l!=="default"&&!(l in a)){const c=Object.getOwnPropertyDescriptor(s,l);c&&Object.defineProperty(a,l,c.get?c:{enumerable:!0,get:()=>s[l]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function Nh(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var sf={exports:{}},ko={};var Gy;function r2(){if(Gy)return ko;Gy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(s,l,c){var d=null;if(c!==void 0&&(d=""+c),l.key!==void 0&&(d=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:a,type:s,key:d,ref:l!==void 0?l:null,props:c}}return ko.Fragment=t,ko.jsx=r,ko.jsxs=r,ko}var qy;function i2(){return qy||(qy=1,sf.exports=r2()),sf.exports}var h=i2(),of={exports:{}},Je={};var Yy;function s2(){if(Yy)return Je;Yy=1;var a=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),k=Symbol.iterator;function E(v){return v===null||typeof v!="object"?null:(v=k&&v[k]||v["@@iterator"],typeof v=="function"?v:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,U={};function te(v,T,_){this.props=v,this.context=T,this.refs=U,this.updater=_||D}te.prototype.isReactComponent={},te.prototype.setState=function(v,T){if(typeof v!="object"&&typeof v!="function"&&v!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,v,T,"setState")},te.prototype.forceUpdate=function(v){this.updater.enqueueForceUpdate(this,v,"forceUpdate")};function ee(){}ee.prototype=te.prototype;function L(v,T,_){this.props=v,this.context=T,this.refs=U,this.updater=_||D}var G=L.prototype=new ee;G.constructor=L,F(G,te.prototype),G.isPureReactComponent=!0;var ge=Array.isArray;function Se(){}var B={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function oe(v,T,_){var M=_.ref;return{$$typeof:a,type:v,key:T,ref:M!==void 0?M:null,props:_}}function ye(v,T){return oe(v.type,T,v.props)}function Ie(v){return typeof v=="object"&&v!==null&&v.$$typeof===a}function De(v){var T={"=":"=0",":":"=2"};return"$"+v.replace(/[=:]/g,function(_){return T[_]})}var et=/\/+/g;function nt(v,T){return typeof v=="object"&&v!==null&&v.key!=null?De(""+v.key):T.toString(36)}function Ke(v){switch(v.status){case"fulfilled":return v.value;case"rejected":throw v.reason;default:switch(typeof v.status=="string"?v.then(Se,Se):(v.status="pending",v.then(function(T){v.status==="pending"&&(v.status="fulfilled",v.value=T)},function(T){v.status==="pending"&&(v.status="rejected",v.reason=T)})),v.status){case"fulfilled":return v.value;case"rejected":throw v.reason}}throw v}function q(v,T,_,M,Q){var fe=typeof v;(fe==="undefined"||fe==="boolean")&&(v=null);var xe=!1;if(v===null)xe=!0;else switch(fe){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(v.$$typeof){case a:case t:xe=!0;break;case b:return xe=v._init,q(xe(v._payload),T,_,M,Q)}}if(xe)return Q=Q(v),xe=M===""?"."+nt(v,0):M,ge(Q)?(_="",xe!=null&&(_=xe.replace(et,"$&/")+"/"),q(Q,T,_,"",function(Rt){return Rt})):Q!=null&&(Ie(Q)&&(Q=ye(Q,_+(Q.key==null||v&&v.key===Q.key?"":(""+Q.key).replace(et,"$&/")+"/")+xe)),T.push(Q)),1;xe=0;var $e=M===""?".":M+":";if(ge(v))for(var Fe=0;Fe<v.length;Fe++)M=v[Fe],fe=$e+nt(M,Fe),xe+=q(M,T,_,fe,Q);else if(Fe=E(v),typeof Fe=="function")for(v=Fe.call(v),Fe=0;!(M=v.next()).done;)M=M.value,fe=$e+nt(M,Fe++),xe+=q(M,T,_,fe,Q);else if(fe==="object"){if(typeof v.then=="function")return q(Ke(v),T,_,M,Q);throw T=String(v),Error("Objects are not valid as a React child (found: "+(T==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":T)+"). If you meant to render a collection of children, use an array instead.")}return xe}function he(v,T,_){if(v==null)return v;var M=[],Q=0;return q(v,M,"","",function(fe){return T.call(_,fe,Q++)}),M}function me(v){if(v._status===-1){var T=v._result;T=T(),T.then(function(_){(v._status===0||v._status===-1)&&(v._status=1,v._result=_)},function(_){(v._status===0||v._status===-1)&&(v._status=2,v._result=_)}),v._status===-1&&(v._status=0,v._result=T)}if(v._status===1)return v._result.default;throw v._result}var Me=typeof reportError=="function"?reportError:function(v){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var T=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof v=="object"&&v!==null&&typeof v.message=="string"?String(v.message):String(v),error:v});if(!window.dispatchEvent(T))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",v);return}console.error(v)},J={map:he,forEach:function(v,T,_){he(v,function(){T.apply(this,arguments)},_)},count:function(v){var T=0;return he(v,function(){T++}),T},toArray:function(v){return he(v,function(T){return T})||[]},only:function(v){if(!Ie(v))throw Error("React.Children.only expected to receive a single React element child.");return v}};return Je.Activity=w,Je.Children=J,Je.Component=te,Je.Fragment=r,Je.Profiler=l,Je.PureComponent=L,Je.StrictMode=s,Je.Suspense=m,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Je.__COMPILER_RUNTIME={__proto__:null,c:function(v){return B.H.useMemoCache(v)}},Je.cache=function(v){return function(){return v.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(v,T,_){if(v==null)throw Error("The argument must be a React element, but you passed "+v+".");var M=F({},v.props),Q=v.key;if(T!=null)for(fe in T.key!==void 0&&(Q=""+T.key),T)!pe.call(T,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&T.ref===void 0||(M[fe]=T[fe]);var fe=arguments.length-2;if(fe===1)M.children=_;else if(1<fe){for(var xe=Array(fe),$e=0;$e<fe;$e++)xe[$e]=arguments[$e+2];M.children=xe}return oe(v.type,Q,M)},Je.createContext=function(v){return v={$$typeof:d,_currentValue:v,_currentValue2:v,_threadCount:0,Provider:null,Consumer:null},v.Provider=v,v.Consumer={$$typeof:c,_context:v},v},Je.createElement=function(v,T,_){var M,Q={},fe=null;if(T!=null)for(M in T.key!==void 0&&(fe=""+T.key),T)pe.call(T,M)&&M!=="key"&&M!=="__self"&&M!=="__source"&&(Q[M]=T[M]);var xe=arguments.length-2;if(xe===1)Q.children=_;else if(1<xe){for(var $e=Array(xe),Fe=0;Fe<xe;Fe++)$e[Fe]=arguments[Fe+2];Q.children=$e}if(v&&v.defaultProps)for(M in xe=v.defaultProps,xe)Q[M]===void 0&&(Q[M]=xe[M]);return oe(v,fe,Q)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(v){return{$$typeof:p,render:v}},Je.isValidElement=Ie,Je.lazy=function(v){return{$$typeof:b,_payload:{_status:-1,_result:v},_init:me}},Je.memo=function(v,T){return{$$typeof:g,type:v,compare:T===void 0?null:T}},Je.startTransition=function(v){var T=B.T,_={};B.T=_;try{var M=v(),Q=B.S;Q!==null&&Q(_,M),typeof M=="object"&&M!==null&&typeof M.then=="function"&&M.then(Se,Me)}catch(fe){Me(fe)}finally{T!==null&&_.types!==null&&(T.types=_.types),B.T=T}},Je.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Je.use=function(v){return B.H.use(v)},Je.useActionState=function(v,T,_){return B.H.useActionState(v,T,_)},Je.useCallback=function(v,T){return B.H.useCallback(v,T)},Je.useContext=function(v){return B.H.useContext(v)},Je.useDebugValue=function(){},Je.useDeferredValue=function(v,T){return B.H.useDeferredValue(v,T)},Je.useEffect=function(v,T){return B.H.useEffect(v,T)},Je.useEffectEvent=function(v){return B.H.useEffectEvent(v)},Je.useId=function(){return B.H.useId()},Je.useImperativeHandle=function(v,T,_){return B.H.useImperativeHandle(v,T,_)},Je.useInsertionEffect=function(v,T){return B.H.useInsertionEffect(v,T)},Je.useLayoutEffect=function(v,T){return B.H.useLayoutEffect(v,T)},Je.useMemo=function(v,T){return B.H.useMemo(v,T)},Je.useOptimistic=function(v,T){return B.H.useOptimistic(v,T)},Je.useReducer=function(v,T,_){return B.H.useReducer(v,T,_)},Je.useRef=function(v){return B.H.useRef(v)},Je.useState=function(v){return B.H.useState(v)},Je.useSyncExternalStore=function(v,T,_){return B.H.useSyncExternalStore(v,T,_)},Je.useTransition=function(){return B.H.useTransition()},Je.version="19.2.0",Je}var Py;function Oh(){return Py||(Py=1,of.exports=s2()),of.exports}var x=Oh();const Oa=Nh(x),o2=cb({__proto__:null,default:Oa},[x]);var lf={exports:{}},Eo={},cf={exports:{}},uf={};var Fy;function l2(){return Fy||(Fy=1,(function(a){function t(q,he){var me=q.length;q.push(he);e:for(;0<me;){var Me=me-1>>>1,J=q[Me];if(0<l(J,he))q[Me]=he,q[me]=J,me=Me;else break e}}function r(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var he=q[0],me=q.pop();if(me!==he){q[0]=me;e:for(var Me=0,J=q.length,v=J>>>1;Me<v;){var T=2*(Me+1)-1,_=q[T],M=T+1,Q=q[M];if(0>l(_,me))M<J&&0>l(Q,_)?(q[Me]=Q,q[M]=me,Me=M):(q[Me]=_,q[T]=me,Me=T);else if(M<J&&0>l(Q,me))q[Me]=Q,q[M]=me,Me=M;else break e}}return he}function l(q,he){var me=q.sortIndex-he.sortIndex;return me!==0?me:q.id-he.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var d=Date,p=d.now();a.unstable_now=function(){return d.now()-p}}var m=[],g=[],b=1,w=null,k=3,E=!1,D=!1,F=!1,U=!1,te=typeof setTimeout=="function"?setTimeout:null,ee=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;function G(q){for(var he=r(g);he!==null;){if(he.callback===null)s(g);else if(he.startTime<=q)s(g),he.sortIndex=he.expirationTime,t(m,he);else break;he=r(g)}}function ge(q){if(F=!1,G(q),!D)if(r(m)!==null)D=!0,Se||(Se=!0,De());else{var he=r(g);he!==null&&Ke(ge,he.startTime-q)}}var Se=!1,B=-1,pe=5,oe=-1;function ye(){return U?!0:!(a.unstable_now()-oe<pe)}function Ie(){if(U=!1,Se){var q=a.unstable_now();oe=q;var he=!0;try{e:{D=!1,F&&(F=!1,ee(B),B=-1),E=!0;var me=k;try{t:{for(G(q),w=r(m);w!==null&&!(w.expirationTime>q&&ye());){var Me=w.callback;if(typeof Me=="function"){w.callback=null,k=w.priorityLevel;var J=Me(w.expirationTime<=q);if(q=a.unstable_now(),typeof J=="function"){w.callback=J,G(q),he=!0;break t}w===r(m)&&s(m),G(q)}else s(m);w=r(m)}if(w!==null)he=!0;else{var v=r(g);v!==null&&Ke(ge,v.startTime-q),he=!1}}break e}finally{w=null,k=me,E=!1}he=void 0}}finally{he?De():Se=!1}}}var De;if(typeof L=="function")De=function(){L(Ie)};else if(typeof MessageChannel<"u"){var et=new MessageChannel,nt=et.port2;et.port1.onmessage=Ie,De=function(){nt.postMessage(null)}}else De=function(){te(Ie,0)};function Ke(q,he){B=te(function(){q(a.unstable_now())},he)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(q){q.callback=null},a.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<q?Math.floor(1e3/q):5},a.unstable_getCurrentPriorityLevel=function(){return k},a.unstable_next=function(q){switch(k){case 1:case 2:case 3:var he=3;break;default:he=k}var me=k;k=he;try{return q()}finally{k=me}},a.unstable_requestPaint=function(){U=!0},a.unstable_runWithPriority=function(q,he){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var me=k;k=q;try{return he()}finally{k=me}},a.unstable_scheduleCallback=function(q,he,me){var Me=a.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Me+me:Me):me=Me,q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=me+J,q={id:b++,callback:he,priorityLevel:q,startTime:me,expirationTime:J,sortIndex:-1},me>Me?(q.sortIndex=me,t(g,q),r(m)===null&&q===r(g)&&(F?(ee(B),B=-1):F=!0,Ke(ge,me-Me))):(q.sortIndex=J,t(m,q),D||E||(D=!0,Se||(Se=!0,De()))),q},a.unstable_shouldYield=ye,a.unstable_wrapCallback=function(q){var he=k;return function(){var me=k;k=he;try{return q.apply(this,arguments)}finally{k=me}}}})(uf)),uf}var Zy;function c2(){return Zy||(Zy=1,cf.exports=l2()),cf.exports}var df={exports:{}},Hn={};var Xy;function u2(){if(Xy)return Hn;Xy=1;var a=Oh();function t(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var s={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,b){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:w==null?null:""+w,children:m,containerInfo:g,implementation:b}}var d=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Hn.createPortal=function(m,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(t(299));return c(m,g,null,b)},Hn.flushSync=function(m){var g=d.T,b=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=b,s.d.f()}},Hn.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Hn.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Hn.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin),k=typeof g.integrity=="string"?g.integrity:void 0,E=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:w,integrity:k,fetchPriority:E}):b==="script"&&s.d.X(m,{crossOrigin:w,integrity:k,fetchPriority:E,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Hn.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Hn.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,w=p(b,g.crossOrigin);s.d.L(m,b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Hn.preloadModule=function(m,g){if(typeof m=="string")if(g){var b=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Hn.requestFormReset=function(m){s.d.r(m)},Hn.unstable_batchedUpdates=function(m,g){return m(g)},Hn.useFormState=function(m,g,b){return d.H.useFormState(m,g,b)},Hn.useFormStatus=function(){return d.H.useHostTransitionStatus()},Hn.version="19.2.0",Hn}var Ky;function ub(){if(Ky)return df.exports;Ky=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),df.exports=u2(),df.exports}var Qy;function d2(){if(Qy)return Eo;Qy=1;var a=c2(),t=Oh(),r=ub();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)n+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var n=e,i=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(i=n.return),e=n.return;while(e)}return n.tag===3?i:null}function d(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(s(188))}function g(e){var n=e.alternate;if(!n){if(n=c(e),n===null)throw Error(s(188));return n!==e?null:e}for(var i=e,o=n;;){var u=i.return;if(u===null)break;var f=u.alternate;if(f===null){if(o=u.return,o!==null){i=o;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===i)return m(u),e;if(f===o)return m(u),n;f=f.sibling}throw Error(s(188))}if(i.return!==o.return)i=u,o=f;else{for(var y=!1,S=u.child;S;){if(S===i){y=!0,i=u,o=f;break}if(S===o){y=!0,o=u,i=f;break}S=S.sibling}if(!y){for(S=f.child;S;){if(S===i){y=!0,i=f,o=u;break}if(S===o){y=!0,o=f,i=u;break}S=S.sibling}if(!y)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?e:n}function b(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=b(e),n!==null)return n;e=e.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),ee=Symbol.for("react.consumer"),L=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),ge=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),ye=Symbol.for("react.memo_cache_sentinel"),Ie=Symbol.iterator;function De(e){return e===null||typeof e!="object"?null:(e=Ie&&e[Ie]||e["@@iterator"],typeof e=="function"?e:null)}var et=Symbol.for("react.client.reference");function nt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===et?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case F:return"Fragment";case te:return"Profiler";case U:return"StrictMode";case ge:return"Suspense";case Se:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case D:return"Portal";case L:return e.displayName||"Context";case ee:return(e._context.displayName||"Context")+".Consumer";case G:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:nt(e.type)||"Memo";case pe:n=e._payload,e=e._init;try{return nt(e(n))}catch{}}return null}var Ke=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Me=[],J=-1;function v(e){return{current:e}}function T(e){0>J||(e.current=Me[J],Me[J]=null,J--)}function _(e,n){J++,Me[J]=e.current,e.current=n}var M=v(null),Q=v(null),fe=v(null),xe=v(null);function $e(e,n){switch(_(fe,n),_(Q,e),_(M,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?fy(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=fy(n),e=hy(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}T(M),_(M,e)}function Fe(){T(M),T(Q),T(fe)}function Rt(e){e.memoizedState!==null&&_(xe,e);var n=M.current,i=hy(n,e.type);n!==i&&(_(Q,e),_(M,i))}function qt(e){Q.current===e&&(T(M),T(Q)),xe.current===e&&(T(xe),bo._currentValue=me)}var At,Wt;function lt(e){if(At===void 0)try{throw Error()}catch(i){var n=i.stack.trim().match(/\n( *(at )?)/);At=n&&n[1]||"",Wt=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+At+e+Wt}var $t=!1;function wn(e,n){if(!e||$t)return"";$t=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(X){var V=X}Reflect.construct(e,[],le)}else{try{le.call()}catch(X){V=X}e.call(le.prototype)}}else{try{throw Error()}catch(X){V=X}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(X){if(X&&V&&typeof X.stack=="string")return[X.stack,V.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=o.DetermineComponentFrameRoot(),y=f[0],S=f[1];if(y&&S){var O=y.split(`
`),$=S.split(`
`);for(u=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;u<$.length&&!$[u].includes("DetermineComponentFrameRoot");)u++;if(o===O.length||u===$.length)for(o=O.length-1,u=$.length-1;1<=o&&0<=u&&O[o]!==$[u];)u--;for(;1<=o&&0<=u;o--,u--)if(O[o]!==$[u]){if(o!==1||u!==1)do if(o--,u--,0>u||O[o]!==$[u]){var ae=`
`+O[o].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=o&&0<=u);break}}}finally{$t=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?lt(i):""}function jn(e,n){switch(e.tag){case 26:case 27:case 5:return lt(e.type);case 16:return lt("Lazy");case 13:return e.child!==n&&n!==null?lt("Suspense Fallback"):lt("Suspense");case 19:return lt("SuspenseList");case 0:case 15:return wn(e.type,!1);case 11:return wn(e.type.render,!1);case 1:return wn(e.type,!0);case 31:return lt("Activity");default:return""}}function Qe(e){try{var n="",i=null;do n+=jn(e,i),i=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var xt=Object.prototype.hasOwnProperty,sn=a.unstable_scheduleCallback,An=a.unstable_cancelCallback,Z=a.unstable_shouldYield,ie=a.unstable_requestPaint,A=a.unstable_now,K=a.unstable_getCurrentPriorityLevel,ne=a.unstable_ImmediatePriority,Y=a.unstable_UserBlockingPriority,C=a.unstable_NormalPriority,H=a.unstable_LowPriority,ue=a.unstable_IdlePriority,ce=a.log,Te=a.unstable_setDisableYieldValue,be=null,je=null;function Ee(e){if(typeof ce=="function"&&Te(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(be,e)}catch{}}var Ue=Math.clz32?Math.clz32:ke,Ve=Math.log,We=Math.LN2;function ke(e){return e>>>=0,e===0?32:31-(Ve(e)/We|0)|0}var kt=256,qe=262144,vt=4194304;function zt(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ot(e,n,i){var o=e.pendingLanes;if(o===0)return 0;var u=0,f=e.suspendedLanes,y=e.pingedLanes;e=e.warmLanes;var S=o&134217727;return S!==0?(o=S&~f,o!==0?u=zt(o):(y&=S,y!==0?u=zt(y):i||(i=S&~e,i!==0&&(u=zt(i))))):(S=o&~f,S!==0?u=zt(S):y!==0?u=zt(y):i||(i=o&~e,i!==0&&(u=zt(i)))),u===0?0:n!==0&&n!==u&&(n&f)===0&&(f=u&-u,i=n&-n,f>=i||f===32&&(i&4194048)!==0)?n:u}function Et(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function kn(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $n(){var e=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),e}function Jt(e){for(var n=[],i=0;31>i;i++)n.push(e);return n}function on(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wa(e,n,i,o,u,f){var y=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var S=e.entanglements,O=e.expirationTimes,$=e.hiddenUpdates;for(i=y&~i;0<i;){var ae=31-Ue(i),le=1<<ae;S[ae]=0,O[ae]=-1;var V=$[ae];if(V!==null)for($[ae]=null,ae=0;ae<V.length;ae++){var X=V[ae];X!==null&&(X.lane&=-536870913)}i&=~le}o!==0&&Ua(e,o,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(y&~n))}function Ua(e,n,i){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ue(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|i&261930}function Aa(e,n){var i=e.entangledLanes|=n;for(e=e.entanglements;i;){var o=31-Ue(i),u=1<<o;u&n|e[o]&n&&(e[o]|=n),i&=~u}}function ri(e,n){var i=n&-n;return i=(i&42)!==0?1:Zn(i),(i&(e.suspendedLanes|n))!==0?0:i}function Zn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xr(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function en(){var e=he.p;return e!==0?e:(e=window.event,e===void 0?32:Ly(e.type))}function Xn(e,n){var i=he.p;try{return he.p=e,n()}finally{he.p=i}}var En=Math.random().toString(36).slice(2),N="__reactFiber$"+En,j="__reactProps$"+En,W="__reactContainer$"+En,se="__reactEvents$"+En,Re="__reactListeners$"+En,Yt="__reactHandles$"+En,_n="__reactResources$"+En,Ye="__reactMarker$"+En;function tn(e){delete e[N],delete e[j],delete e[se],delete e[Re],delete e[Yt]}function Ct(e){var n=e[N];if(n)return n;for(var i=e.parentNode;i;){if(n=i[W]||i[N]){if(i=n.alternate,n.child!==null||i!==null&&i.child!==null)for(e=wy(e);e!==null;){if(i=e[N])return i;e=wy(e)}return n}e=i,i=e.parentNode}return null}function Pe(e){if(e=e[N]||e[W]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ra(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Un(e){var n=e[_n];return n||(n=e[_n]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Gt(e){e[Ye]=!0}var Xo=new Set,Ai={};function P(e,n){de(e,n),de(e+"Capture",n)}function de(e,n){for(Ai[e]=n,e=0;e<n.length;e++)Xo.add(n[e])}var we=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ne={},_e={};function rt(e){return xt.call(_e,e)?!0:xt.call(Ne,e)?!1:we.test(e)?_e[e]=!0:(Ne[e]=!0,!1)}function Ut(e,n,i){if(rt(n))if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+i)}}function nn(e,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+i)}}function _t(e,n,i,o){if(o===null)e.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttributeNS(n,i,""+o)}}function bt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dn(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Pt(e,n,i){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var u=o.get,f=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return u.call(this)},set:function(y){i=""+y,f.call(this,y)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(y){i=""+y},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Cn(e){if(!e._valueTracker){var n=Dn(e)?"checked":"value";e._valueTracker=Pt(e,n,""+e[n])}}function kr(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var i=n.getValue(),o="";return e&&(o=Dn(e)?e.checked?"true":"false":e.value),e=o,e!==i?(n.setValue(e),!0):!1}function ma(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Ja=/[\n"\\]/g;function ia(e){return e.replace(Ja,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Jc(e,n,i,o,u,f,y,S){e.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?e.type=y:e.removeAttribute("type"),n!=null?y==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+bt(n)):e.value!==""+bt(n)&&(e.value=""+bt(n)):y!=="submit"&&y!=="reset"||e.removeAttribute("value"),n!=null?eu(e,y,bt(n)):i!=null?eu(e,y,bt(i)):o!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.name=""+bt(S):e.removeAttribute("name")}function sp(e,n,i,o,u,f,y,S){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),n!=null||i!=null){if(!(f!=="submit"&&f!=="reset"||n!=null)){Cn(e);return}i=i!=null?""+bt(i):"",n=n!=null?""+bt(n):i,S||n===e.value||(e.value=n),e.defaultValue=n}o=o??u,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=S?e.checked:!!o,e.defaultChecked=!!o,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(e.name=y),Cn(e)}function eu(e,n,i){n==="number"&&ma(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function _i(e,n,i,o){if(e=e.options,n){n={};for(var u=0;u<i.length;u++)n["$"+i[u]]=!0;for(i=0;i<e.length;i++)u=n.hasOwnProperty("$"+e[i].value),e[i].selected!==u&&(e[i].selected=u),u&&o&&(e[i].defaultSelected=!0)}else{for(i=""+bt(i),n=null,u=0;u<e.length;u++){if(e[u].value===i){e[u].selected=!0,o&&(e[u].defaultSelected=!0);return}n!==null||e[u].disabled||(n=e[u])}n!==null&&(n.selected=!0)}}function op(e,n,i){if(n!=null&&(n=""+bt(n),n!==e.value&&(e.value=n),i==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=i!=null?""+bt(i):""}function lp(e,n,i,o){if(n==null){if(o!=null){if(i!=null)throw Error(s(92));if(Ke(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),n=i}i=bt(n),e.defaultValue=i,o=e.textContent,o===i&&o!==""&&o!==null&&(e.value=o),Cn(e)}function Di(e,n){if(n){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=n;return}}e.textContent=n}var Jw=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cp(e,n,i){var o=n.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,i):typeof i!="number"||i===0||Jw.has(n)?n==="float"?e.cssFloat=i:e[n]=(""+i).trim():e[n]=i+"px"}function up(e,n,i){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var u in n)o=n[u],n.hasOwnProperty(u)&&i[u]!==o&&cp(e,u,o)}else for(var f in n)n.hasOwnProperty(f)&&cp(e,f,n[f])}function tu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(e){return tS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function er(){}var nu=null;function au(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mi=null,Ri=null;function dp(e){var n=Pe(e);if(n&&(e=n.stateNode)){var i=e[j]||null;e:switch(e=n.stateNode,n.type){case"input":if(Jc(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),n=i.name,i.type==="radio"&&n!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+ia(""+n)+'"][type="radio"]'),n=0;n<i.length;n++){var o=i[n];if(o!==e&&o.form===e.form){var u=o[j]||null;if(!u)throw Error(s(90));Jc(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(n=0;n<i.length;n++)o=i[n],o.form===e.form&&kr(o)}break e;case"textarea":op(e,i.value,i.defaultValue);break e;case"select":n=i.value,n!=null&&_i(e,!!i.multiple,n,!1)}}}var ru=!1;function fp(e,n,i){if(ru)return e(n,i);ru=!0;try{var o=e(n);return o}finally{if(ru=!1,(Mi!==null||Ri!==null)&&(Bl(),Mi&&(n=Mi,e=Ri,Ri=Mi=null,dp(n),e)))for(n=0;n<e.length;n++)dp(e[n])}}function zs(e,n){var i=e.stateNode;if(i===null)return null;var o=i[j]||null;if(o===null)return null;i=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(s(231,n,typeof i));return i}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iu=!1;if(tr)try{var Ls={};Object.defineProperty(Ls,"passive",{get:function(){iu=!0}}),window.addEventListener("test",Ls,Ls),window.removeEventListener("test",Ls,Ls)}catch{iu=!1}var Er=null,su=null,Qo=null;function hp(){if(Qo)return Qo;var e,n=su,i=n.length,o,u="value"in Er?Er.value:Er.textContent,f=u.length;for(e=0;e<i&&n[e]===u[e];e++);var y=i-e;for(o=1;o<=y&&n[i-o]===u[f-o];o++);return Qo=u.slice(e,1<o?1-o:void 0)}function Wo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Jo(){return!0}function pp(){return!1}function Kn(e){function n(i,o,u,f,y){this._reactName=i,this._targetInst=u,this.type=o,this.nativeEvent=f,this.target=y,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(i=e[S],this[S]=i?i(f):f[S]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Jo:pp,this.isPropagationStopped=pp,this}return w(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Jo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Jo)},persist:function(){},isPersistent:Jo}),n}var ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},el=Kn(ii),Bs=w({},ii,{view:0,detail:0}),nS=Kn(Bs),ou,lu,Is,tl=w({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Is&&(Is&&e.type==="mousemove"?(ou=e.screenX-Is.screenX,lu=e.screenY-Is.screenY):lu=ou=0,Is=e),ou)},movementY:function(e){return"movementY"in e?e.movementY:lu}}),mp=Kn(tl),aS=w({},tl,{dataTransfer:0}),rS=Kn(aS),iS=w({},Bs,{relatedTarget:0}),cu=Kn(iS),sS=w({},ii,{animationName:0,elapsedTime:0,pseudoElement:0}),oS=Kn(sS),lS=w({},ii,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),cS=Kn(lS),uS=w({},ii,{data:0}),gp=Kn(uS),dS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pS(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=hS[e])?!!n[e]:!1}function uu(){return pS}var mS=w({},Bs,{key:function(e){if(e.key){var n=dS[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Wo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uu,charCode:function(e){return e.type==="keypress"?Wo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Wo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gS=Kn(mS),yS=w({},tl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yp=Kn(yS),vS=w({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uu}),bS=Kn(vS),wS=w({},ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),SS=Kn(wS),xS=w({},tl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kS=Kn(xS),ES=w({},ii,{newState:0,oldState:0}),CS=Kn(ES),TS=[9,13,27,32],du=tr&&"CompositionEvent"in window,$s=null;tr&&"documentMode"in document&&($s=document.documentMode);var NS=tr&&"TextEvent"in window&&!$s,vp=tr&&(!du||$s&&8<$s&&11>=$s),bp=" ",wp=!1;function Sp(e,n){switch(e){case"keyup":return TS.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function OS(e,n){switch(e){case"compositionend":return xp(n);case"keypress":return n.which!==32?null:(wp=!0,bp);case"textInput":return e=n.data,e===bp&&wp?null:e;default:return null}}function jS(e,n){if(zi)return e==="compositionend"||!du&&Sp(e,n)?(e=hp(),Qo=su=Er=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return vp&&n.locale!=="ko"?null:n.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kp(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!AS[e.type]:n==="textarea"}function Ep(e,n,i,o){Mi?Ri?Ri.push(o):Ri=[o]:Mi=o,n=ql(n,"onChange"),0<n.length&&(i=new el("onChange","change",null,i,o),e.push({event:i,listeners:n}))}var Us=null,Hs=null;function _S(e){sy(e,0)}function nl(e){var n=ra(e);if(kr(n))return e}function Cp(e,n){if(e==="change")return n}var Tp=!1;if(tr){var fu;if(tr){var hu="oninput"in document;if(!hu){var Np=document.createElement("div");Np.setAttribute("oninput","return;"),hu=typeof Np.oninput=="function"}fu=hu}else fu=!1;Tp=fu&&(!document.documentMode||9<document.documentMode)}function Op(){Us&&(Us.detachEvent("onpropertychange",jp),Hs=Us=null)}function jp(e){if(e.propertyName==="value"&&nl(Hs)){var n=[];Ep(n,Hs,e,au(e)),fp(_S,n)}}function DS(e,n,i){e==="focusin"?(Op(),Us=n,Hs=i,Us.attachEvent("onpropertychange",jp)):e==="focusout"&&Op()}function MS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return nl(Hs)}function RS(e,n){if(e==="click")return nl(n)}function zS(e,n){if(e==="input"||e==="change")return nl(n)}function LS(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var sa=typeof Object.is=="function"?Object.is:LS;function Vs(e,n){if(sa(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var u=i[o];if(!xt.call(n,u)||!sa(e[u],n[u]))return!1}return!0}function Ap(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _p(e,n){var i=Ap(e);e=0;for(var o;i;){if(i.nodeType===3){if(o=e+i.textContent.length,e<=n&&o>=n)return{node:i,offset:n-e};e=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Ap(i)}}function Dp(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Dp(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Mp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ma(e.document);n instanceof e.HTMLIFrameElement;){try{var i=typeof n.contentWindow.location.href=="string"}catch{i=!1}if(i)e=n.contentWindow;else break;n=ma(e.document)}return n}function pu(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var BS=tr&&"documentMode"in document&&11>=document.documentMode,Li=null,mu=null,Gs=null,gu=!1;function Rp(e,n,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;gu||Li==null||Li!==ma(o)||(o=Li,"selectionStart"in o&&pu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Gs&&Vs(Gs,o)||(Gs=o,o=ql(mu,"onSelect"),0<o.length&&(n=new el("onSelect","select",null,n,i),e.push({event:n,listeners:o}),n.target=Li)))}function si(e,n){var i={};return i[e.toLowerCase()]=n.toLowerCase(),i["Webkit"+e]="webkit"+n,i["Moz"+e]="moz"+n,i}var Bi={animationend:si("Animation","AnimationEnd"),animationiteration:si("Animation","AnimationIteration"),animationstart:si("Animation","AnimationStart"),transitionrun:si("Transition","TransitionRun"),transitionstart:si("Transition","TransitionStart"),transitioncancel:si("Transition","TransitionCancel"),transitionend:si("Transition","TransitionEnd")},yu={},zp={};tr&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function oi(e){if(yu[e])return yu[e];if(!Bi[e])return e;var n=Bi[e],i;for(i in n)if(n.hasOwnProperty(i)&&i in zp)return yu[e]=n[i];return e}var Lp=oi("animationend"),Bp=oi("animationiteration"),Ip=oi("animationstart"),IS=oi("transitionrun"),$S=oi("transitionstart"),US=oi("transitioncancel"),$p=oi("transitionend"),Up=new Map,vu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");vu.push("scrollEnd");function _a(e,n){Up.set(e,n),P(n,[e])}var al=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},ga=[],Ii=0,bu=0;function rl(){for(var e=Ii,n=bu=Ii=0;n<e;){var i=ga[n];ga[n++]=null;var o=ga[n];ga[n++]=null;var u=ga[n];ga[n++]=null;var f=ga[n];if(ga[n++]=null,o!==null&&u!==null){var y=o.pending;y===null?u.next=u:(u.next=y.next,y.next=u),o.pending=u}f!==0&&Hp(i,u,f)}}function il(e,n,i,o){ga[Ii++]=e,ga[Ii++]=n,ga[Ii++]=i,ga[Ii++]=o,bu|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function wu(e,n,i,o){return il(e,n,i,o),sl(e)}function li(e,n){return il(e,null,null,n),sl(e)}function Hp(e,n,i){e.lanes|=i;var o=e.alternate;o!==null&&(o.lanes|=i);for(var u=!1,f=e.return;f!==null;)f.childLanes|=i,o=f.alternate,o!==null&&(o.childLanes|=i),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&n!==null&&(u=31-Ue(i),e=f.hiddenUpdates,o=e[u],o===null?e[u]=[n]:o.push(n),n.lane=i|536870912),f):null}function sl(e){if(50<fo)throw fo=0,jd=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var $i={};function HS(e,n,i,o){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(e,n,i,o){return new HS(e,n,i,o)}function Su(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nr(e,n){var i=e.alternate;return i===null?(i=oa(e.tag,n,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=n,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&65011712,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,n=e.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Vp(e,n){e.flags&=65011714;var i=e.alternate;return i===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,n=i.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function ol(e,n,i,o,u,f){var y=0;if(o=e,typeof e=="function")Su(e)&&(y=1);else if(typeof e=="string")y=Px(e,i,M.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=oa(31,i,n,u),e.elementType=oe,e.lanes=f,e;case F:return ci(i.children,u,f,n);case U:y=8,u|=24;break;case te:return e=oa(12,i,n,u|2),e.elementType=te,e.lanes=f,e;case ge:return e=oa(13,i,n,u),e.elementType=ge,e.lanes=f,e;case Se:return e=oa(19,i,n,u),e.elementType=Se,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case L:y=10;break e;case ee:y=9;break e;case G:y=11;break e;case B:y=14;break e;case pe:y=16,o=null;break e}y=29,i=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=oa(y,i,n,u),n.elementType=e,n.type=o,n.lanes=f,n}function ci(e,n,i,o){return e=oa(7,e,o,n),e.lanes=i,e}function xu(e,n,i){return e=oa(6,e,null,n),e.lanes=i,e}function Gp(e){var n=oa(18,null,null,0);return n.stateNode=e,n}function ku(e,n,i){return n=oa(4,e.children!==null?e.children:[],e.key,n),n.lanes=i,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var qp=new WeakMap;function ya(e,n){if(typeof e=="object"&&e!==null){var i=qp.get(e);return i!==void 0?i:(n={value:e,source:n,stack:Qe(n)},qp.set(e,n),n)}return{value:e,source:n,stack:Qe(n)}}var Ui=[],Hi=0,ll=null,qs=0,va=[],ba=0,Cr=null,Ha=1,Va="";function ar(e,n){Ui[Hi++]=qs,Ui[Hi++]=ll,ll=e,qs=n}function Yp(e,n,i){va[ba++]=Ha,va[ba++]=Va,va[ba++]=Cr,Cr=e;var o=Ha;e=Va;var u=32-Ue(o)-1;o&=~(1<<u),i+=1;var f=32-Ue(n)+u;if(30<f){var y=u-u%5;f=(o&(1<<y)-1).toString(32),o>>=y,u-=y,Ha=1<<32-Ue(n)+u|i<<u|o,Va=f+e}else Ha=1<<f|i<<u|o,Va=e}function Eu(e){e.return!==null&&(ar(e,1),Yp(e,1,0))}function Cu(e){for(;e===ll;)ll=Ui[--Hi],Ui[Hi]=null,qs=Ui[--Hi],Ui[Hi]=null;for(;e===Cr;)Cr=va[--ba],va[ba]=null,Va=va[--ba],va[ba]=null,Ha=va[--ba],va[ba]=null}function Pp(e,n){va[ba++]=Ha,va[ba++]=Va,va[ba++]=Cr,Ha=n.id,Va=n.overflow,Cr=e}var Mn=null,Ft=null,mt=!1,Tr=null,wa=!1,Tu=Error(s(519));function Nr(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ys(ya(n,e)),Tu}function Fp(e){var n=e.stateNode,i=e.type,o=e.memoizedProps;switch(n[N]=e,n[j]=o,i){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(i=0;i<po.length;i++)ut(po[i],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":ut("invalid",n),sp(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":ut("invalid",n);break;case"textarea":ut("invalid",n),lp(n,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||n.textContent===""+i||o.suppressHydrationWarning===!0||uy(n.textContent,i)?(o.popover!=null&&(ut("beforetoggle",n),ut("toggle",n)),o.onScroll!=null&&ut("scroll",n),o.onScrollEnd!=null&&ut("scrollend",n),o.onClick!=null&&(n.onclick=er),n=!0):n=!1,n||Nr(e,!0)}function Zp(e){for(Mn=e.return;Mn;)switch(Mn.tag){case 5:case 31:case 13:wa=!1;return;case 27:case 3:wa=!0;return;default:Mn=Mn.return}}function Vi(e){if(e!==Mn)return!1;if(!mt)return Zp(e),mt=!0,!1;var n=e.tag,i;if((i=n!==3&&n!==27)&&((i=n===5)&&(i=e.type,i=!(i!=="form"&&i!=="button")||qd(e.type,e.memoizedProps)),i=!i),i&&Ft&&Nr(e),Zp(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=by(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));Ft=by(e)}else n===27?(n=Ft,Hr(e.type)?(e=Xd,Xd=null,Ft=e):Ft=n):Ft=Mn?xa(e.stateNode.nextSibling):null;return!0}function ui(){Ft=Mn=null,mt=!1}function Nu(){var e=Tr;return e!==null&&(ea===null?ea=e:ea.push.apply(ea,e),Tr=null),e}function Ys(e){Tr===null?Tr=[e]:Tr.push(e)}var Ou=v(null),di=null,rr=null;function Or(e,n,i){_(Ou,n._currentValue),n._currentValue=i}function ir(e){e._currentValue=Ou.current,T(Ou)}function ju(e,n,i){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===i)break;e=e.return}}function Au(e,n,i,o){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var y=u.child;f=f.firstContext;e:for(;f!==null;){var S=f;f=u;for(var O=0;O<n.length;O++)if(S.context===n[O]){f.lanes|=i,S=f.alternate,S!==null&&(S.lanes|=i),ju(f.return,i,e),o||(y=null);break e}f=S.next}}else if(u.tag===18){if(y=u.return,y===null)throw Error(s(341));y.lanes|=i,f=y.alternate,f!==null&&(f.lanes|=i),ju(y,i,e),y=null}else y=u.child;if(y!==null)y.return=u;else for(y=u;y!==null;){if(y===e){y=null;break}if(u=y.sibling,u!==null){u.return=y.return,y=u;break}y=y.return}u=y}}function Gi(e,n,i,o){e=null;for(var u=n,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var y=u.alternate;if(y===null)throw Error(s(387));if(y=y.memoizedProps,y!==null){var S=u.type;sa(u.pendingProps.value,y.value)||(e!==null?e.push(S):e=[S])}}else if(u===xe.current){if(y=u.alternate,y===null)throw Error(s(387));y.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(bo):e=[bo])}u=u.return}e!==null&&Au(n,e,i,o),n.flags|=262144}function cl(e){for(e=e.firstContext;e!==null;){if(!sa(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function fi(e){di=e,rr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Rn(e){return Xp(di,e)}function ul(e,n){return di===null&&fi(e),Xp(e,n)}function Xp(e,n){var i=n._currentValue;if(n={context:n,memoizedValue:i,next:null},rr===null){if(e===null)throw Error(s(308));rr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else rr=rr.next=n;return i}var VS=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(i,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(i){return i()})}},GS=a.unstable_scheduleCallback,qS=a.unstable_NormalPriority,hn={$$typeof:L,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _u(){return{controller:new VS,data:new Map,refCount:0}}function Ps(e){e.refCount--,e.refCount===0&&GS(qS,function(){e.controller.abort()})}var Fs=null,Du=0,qi=0,Yi=null;function YS(e,n){if(Fs===null){var i=Fs=[];Du=0,qi=zd(),Yi={status:"pending",value:void 0,then:function(o){i.push(o)}}}return Du++,n.then(Kp,Kp),n}function Kp(){if(--Du===0&&Fs!==null){Yi!==null&&(Yi.status="fulfilled");var e=Fs;Fs=null,qi=0,Yi=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function PS(e,n){var i=[],o={status:"pending",value:null,reason:null,then:function(u){i.push(u)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var u=0;u<i.length;u++)(0,i[u])(n)},function(u){for(o.status="rejected",o.reason=u,u=0;u<i.length;u++)(0,i[u])(void 0)}),o}var Qp=q.S;q.S=function(e,n){Rg=A(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&YS(e,n),Qp!==null&&Qp(e,n)};var hi=v(null);function Mu(){var e=hi.current;return e!==null?e:Ht.pooledCache}function dl(e,n){n===null?_(hi,hi.current):_(hi,n.pool)}function Wp(){var e=Mu();return e===null?null:{parent:hn._currentValue,pool:e}}var Pi=Error(s(460)),Ru=Error(s(474)),fl=Error(s(542)),hl={then:function(){}};function Jp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function em(e,n,i){switch(i=e[i],i===void 0?e.push(n):i!==n&&(n.then(er,er),n=i),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,nm(e),e;default:if(typeof n.status=="string")n.then(er,er);else{if(e=Ht,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var u=n;u.status="fulfilled",u.value=o}},function(o){if(n.status==="pending"){var u=n;u.status="rejected",u.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,nm(e),e}throw mi=n,Pi}}function pi(e){try{var n=e._init;return n(e._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(mi=i,Pi):i}}var mi=null;function tm(){if(mi===null)throw Error(s(459));var e=mi;return mi=null,e}function nm(e){if(e===Pi||e===fl)throw Error(s(483))}var Fi=null,Zs=0;function pl(e){var n=Zs;return Zs+=1,Fi===null&&(Fi=[]),em(Fi,e,n)}function Xs(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function ml(e,n){throw n.$$typeof===k?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function am(e){function n(z,R){if(e){var I=z.deletions;I===null?(z.deletions=[R],z.flags|=16):I.push(R)}}function i(z,R){if(!e)return null;for(;R!==null;)n(z,R),R=R.sibling;return null}function o(z){for(var R=new Map;z!==null;)z.key!==null?R.set(z.key,z):R.set(z.index,z),z=z.sibling;return R}function u(z,R){return z=nr(z,R),z.index=0,z.sibling=null,z}function f(z,R,I){return z.index=I,e?(I=z.alternate,I!==null?(I=I.index,I<R?(z.flags|=67108866,R):I):(z.flags|=67108866,R)):(z.flags|=1048576,R)}function y(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function S(z,R,I,re){return R===null||R.tag!==6?(R=xu(I,z.mode,re),R.return=z,R):(R=u(R,I),R.return=z,R)}function O(z,R,I,re){var He=I.type;return He===F?ae(z,R,I.props.children,re,I.key):R!==null&&(R.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&pi(He)===R.type)?(R=u(R,I.props),Xs(R,I),R.return=z,R):(R=ol(I.type,I.key,I.props,null,z.mode,re),Xs(R,I),R.return=z,R)}function $(z,R,I,re){return R===null||R.tag!==4||R.stateNode.containerInfo!==I.containerInfo||R.stateNode.implementation!==I.implementation?(R=ku(I,z.mode,re),R.return=z,R):(R=u(R,I.children||[]),R.return=z,R)}function ae(z,R,I,re,He){return R===null||R.tag!==7?(R=ci(I,z.mode,re,He),R.return=z,R):(R=u(R,I),R.return=z,R)}function le(z,R,I){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return R=xu(""+R,z.mode,I),R.return=z,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case E:return I=ol(R.type,R.key,R.props,null,z.mode,I),Xs(I,R),I.return=z,I;case D:return R=ku(R,z.mode,I),R.return=z,R;case pe:return R=pi(R),le(z,R,I)}if(Ke(R)||De(R))return R=ci(R,z.mode,I,null),R.return=z,R;if(typeof R.then=="function")return le(z,pl(R),I);if(R.$$typeof===L)return le(z,ul(z,R),I);ml(z,R)}return null}function V(z,R,I,re){var He=R!==null?R.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return He!==null?null:S(z,R,""+I,re);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case E:return I.key===He?O(z,R,I,re):null;case D:return I.key===He?$(z,R,I,re):null;case pe:return I=pi(I),V(z,R,I,re)}if(Ke(I)||De(I))return He!==null?null:ae(z,R,I,re,null);if(typeof I.then=="function")return V(z,R,pl(I),re);if(I.$$typeof===L)return V(z,R,ul(z,I),re);ml(z,I)}return null}function X(z,R,I,re,He){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return z=z.get(I)||null,S(R,z,""+re,He);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case E:return z=z.get(re.key===null?I:re.key)||null,O(R,z,re,He);case D:return z=z.get(re.key===null?I:re.key)||null,$(R,z,re,He);case pe:return re=pi(re),X(z,R,I,re,He)}if(Ke(re)||De(re))return z=z.get(I)||null,ae(R,z,re,He,null);if(typeof re.then=="function")return X(z,R,I,pl(re),He);if(re.$$typeof===L)return X(z,R,I,ul(R,re),He);ml(R,re)}return null}function ze(z,R,I,re){for(var He=null,wt=null,Le=R,at=R=0,ft=null;Le!==null&&at<I.length;at++){Le.index>at?(ft=Le,Le=null):ft=Le.sibling;var St=V(z,Le,I[at],re);if(St===null){Le===null&&(Le=ft);break}e&&Le&&St.alternate===null&&n(z,Le),R=f(St,R,at),wt===null?He=St:wt.sibling=St,wt=St,Le=ft}if(at===I.length)return i(z,Le),mt&&ar(z,at),He;if(Le===null){for(;at<I.length;at++)Le=le(z,I[at],re),Le!==null&&(R=f(Le,R,at),wt===null?He=Le:wt.sibling=Le,wt=Le);return mt&&ar(z,at),He}for(Le=o(Le);at<I.length;at++)ft=X(Le,z,at,I[at],re),ft!==null&&(e&&ft.alternate!==null&&Le.delete(ft.key===null?at:ft.key),R=f(ft,R,at),wt===null?He=ft:wt.sibling=ft,wt=ft);return e&&Le.forEach(function(Pr){return n(z,Pr)}),mt&&ar(z,at),He}function Ge(z,R,I,re){if(I==null)throw Error(s(151));for(var He=null,wt=null,Le=R,at=R=0,ft=null,St=I.next();Le!==null&&!St.done;at++,St=I.next()){Le.index>at?(ft=Le,Le=null):ft=Le.sibling;var Pr=V(z,Le,St.value,re);if(Pr===null){Le===null&&(Le=ft);break}e&&Le&&Pr.alternate===null&&n(z,Le),R=f(Pr,R,at),wt===null?He=Pr:wt.sibling=Pr,wt=Pr,Le=ft}if(St.done)return i(z,Le),mt&&ar(z,at),He;if(Le===null){for(;!St.done;at++,St=I.next())St=le(z,St.value,re),St!==null&&(R=f(St,R,at),wt===null?He=St:wt.sibling=St,wt=St);return mt&&ar(z,at),He}for(Le=o(Le);!St.done;at++,St=I.next())St=X(Le,z,at,St.value,re),St!==null&&(e&&St.alternate!==null&&Le.delete(St.key===null?at:St.key),R=f(St,R,at),wt===null?He=St:wt.sibling=St,wt=St);return e&&Le.forEach(function(a2){return n(z,a2)}),mt&&ar(z,at),He}function It(z,R,I,re){if(typeof I=="object"&&I!==null&&I.type===F&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case E:e:{for(var He=I.key;R!==null;){if(R.key===He){if(He=I.type,He===F){if(R.tag===7){i(z,R.sibling),re=u(R,I.props.children),re.return=z,z=re;break e}}else if(R.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&pi(He)===R.type){i(z,R.sibling),re=u(R,I.props),Xs(re,I),re.return=z,z=re;break e}i(z,R);break}else n(z,R);R=R.sibling}I.type===F?(re=ci(I.props.children,z.mode,re,I.key),re.return=z,z=re):(re=ol(I.type,I.key,I.props,null,z.mode,re),Xs(re,I),re.return=z,z=re)}return y(z);case D:e:{for(He=I.key;R!==null;){if(R.key===He)if(R.tag===4&&R.stateNode.containerInfo===I.containerInfo&&R.stateNode.implementation===I.implementation){i(z,R.sibling),re=u(R,I.children||[]),re.return=z,z=re;break e}else{i(z,R);break}else n(z,R);R=R.sibling}re=ku(I,z.mode,re),re.return=z,z=re}return y(z);case pe:return I=pi(I),It(z,R,I,re)}if(Ke(I))return ze(z,R,I,re);if(De(I)){if(He=De(I),typeof He!="function")throw Error(s(150));return I=He.call(I),Ge(z,R,I,re)}if(typeof I.then=="function")return It(z,R,pl(I),re);if(I.$$typeof===L)return It(z,R,ul(z,I),re);ml(z,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,R!==null&&R.tag===6?(i(z,R.sibling),re=u(R,I),re.return=z,z=re):(i(z,R),re=xu(I,z.mode,re),re.return=z,z=re),y(z)):i(z,R)}return function(z,R,I,re){try{Zs=0;var He=It(z,R,I,re);return Fi=null,He}catch(Le){if(Le===Pi||Le===fl)throw Le;var wt=oa(29,Le,null,z.mode);return wt.lanes=re,wt.return=z,wt}finally{}}}var gi=am(!0),rm=am(!1),jr=!1;function zu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ar(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function _r(e,n,i){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(Tt&2)!==0){var u=o.pending;return u===null?n.next=n:(n.next=u.next,u.next=n),o.pending=n,n=sl(e),Hp(e,null,i),n}return il(e,o,n,i),sl(e)}function Ks(e,n,i){if(n=n.updateQueue,n!==null&&(n=n.shared,(i&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Aa(e,i)}}function Bu(e,n){var i=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var u=null,f=null;if(i=i.firstBaseUpdate,i!==null){do{var y={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};f===null?u=f=y:f=f.next=y,i=i.next}while(i!==null);f===null?u=f=n:f=f.next=n}else u=f=n;i={baseState:o.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:o.shared,callbacks:o.callbacks},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=n:e.next=n,i.lastBaseUpdate=n}var Iu=!1;function Qs(){if(Iu){var e=Yi;if(e!==null)throw e}}function Ws(e,n,i,o){Iu=!1;var u=e.updateQueue;jr=!1;var f=u.firstBaseUpdate,y=u.lastBaseUpdate,S=u.shared.pending;if(S!==null){u.shared.pending=null;var O=S,$=O.next;O.next=null,y===null?f=$:y.next=$,y=O;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,S=ae.lastBaseUpdate,S!==y&&(S===null?ae.firstBaseUpdate=$:S.next=$,ae.lastBaseUpdate=O))}if(f!==null){var le=u.baseState;y=0,ae=$=O=null,S=f;do{var V=S.lane&-536870913,X=V!==S.lane;if(X?(dt&V)===V:(o&V)===V){V!==0&&V===qi&&(Iu=!0),ae!==null&&(ae=ae.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ze=e,Ge=S;V=n;var It=i;switch(Ge.tag){case 1:if(ze=Ge.payload,typeof ze=="function"){le=ze.call(It,le,V);break e}le=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ge.payload,V=typeof ze=="function"?ze.call(It,le,V):ze,V==null)break e;le=w({},le,V);break e;case 2:jr=!0}}V=S.callback,V!==null&&(e.flags|=64,X&&(e.flags|=8192),X=u.callbacks,X===null?u.callbacks=[V]:X.push(V))}else X={lane:V,tag:S.tag,payload:S.payload,callback:S.callback,next:null},ae===null?($=ae=X,O=le):ae=ae.next=X,y|=V;if(S=S.next,S===null){if(S=u.shared.pending,S===null)break;X=S,S=X.next,X.next=null,u.lastBaseUpdate=X,u.shared.pending=null}}while(!0);ae===null&&(O=le),u.baseState=O,u.firstBaseUpdate=$,u.lastBaseUpdate=ae,f===null&&(u.shared.lanes=0),Lr|=y,e.lanes=y,e.memoizedState=le}}function im(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function sm(e,n){var i=e.callbacks;if(i!==null)for(e.callbacks=null,e=0;e<i.length;e++)im(i[e],n)}var Zi=v(null),gl=v(0);function om(e,n){e=pr,_(gl,e),_(Zi,n),pr=e|n.baseLanes}function $u(){_(gl,pr),_(Zi,Zi.current)}function Uu(){pr=gl.current,T(Zi),T(gl)}var la=v(null),Sa=null;function Dr(e){var n=e.alternate;_(un,un.current&1),_(la,e),Sa===null&&(n===null||Zi.current!==null||n.memoizedState!==null)&&(Sa=e)}function Hu(e){_(un,un.current),_(la,e),Sa===null&&(Sa=e)}function lm(e){e.tag===22?(_(un,un.current),_(la,e),Sa===null&&(Sa=e)):Mr()}function Mr(){_(un,un.current),_(la,la.current)}function ca(e){T(la),Sa===e&&(Sa=null),T(un)}var un=v(0);function yl(e){for(var n=e;n!==null;){if(n.tag===13){var i=n.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Fd(i)||Zd(i)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var sr=0,tt=null,Lt=null,pn=null,vl=!1,Xi=!1,yi=!1,bl=0,Js=0,Ki=null,FS=0;function ln(){throw Error(s(321))}function Vu(e,n){if(n===null)return!1;for(var i=0;i<n.length&&i<e.length;i++)if(!sa(e[i],n[i]))return!1;return!0}function Gu(e,n,i,o,u,f){return sr=f,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,q.H=e===null||e.memoizedState===null?Ym:rd,yi=!1,f=i(o,u),yi=!1,Xi&&(f=um(n,i,o,u)),cm(e),f}function cm(e){q.H=no;var n=Lt!==null&&Lt.next!==null;if(sr=0,pn=Lt=tt=null,vl=!1,Js=0,Ki=null,n)throw Error(s(300));e===null||mn||(e=e.dependencies,e!==null&&cl(e)&&(mn=!0))}function um(e,n,i,o){tt=e;var u=0;do{if(Xi&&(Ki=null),Js=0,Xi=!1,25<=u)throw Error(s(301));if(u+=1,pn=Lt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=Pm,f=n(i,o)}while(Xi);return f}function ZS(){var e=q.H,n=e.useState()[0];return n=typeof n.then=="function"?eo(n):n,e=e.useState()[0],(Lt!==null?Lt.memoizedState:null)!==e&&(tt.flags|=1024),n}function qu(){var e=bl!==0;return bl=0,e}function Yu(e,n,i){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i}function Pu(e){if(vl){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}vl=!1}sr=0,pn=Lt=tt=null,Xi=!1,Js=bl=0,Ki=null}function Pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?tt.memoizedState=pn=e:pn=pn.next=e,pn}function dn(){if(Lt===null){var e=tt.alternate;e=e!==null?e.memoizedState:null}else e=Lt.next;var n=pn===null?tt.memoizedState:pn.next;if(n!==null)pn=n,Lt=e;else{if(e===null)throw tt.alternate===null?Error(s(467)):Error(s(310));Lt=e,e={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},pn===null?tt.memoizedState=pn=e:pn=pn.next=e}return pn}function wl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function eo(e){var n=Js;return Js+=1,Ki===null&&(Ki=[]),e=em(Ki,e,n),n=tt,(pn===null?n.memoizedState:pn.next)===null&&(n=n.alternate,q.H=n===null||n.memoizedState===null?Ym:rd),e}function Sl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return eo(e);if(e.$$typeof===L)return Rn(e)}throw Error(s(438,String(e)))}function Fu(e){var n=null,i=tt.updateQueue;if(i!==null&&(n=i.memoCache),n==null){var o=tt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(u){return u.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),i===null&&(i=wl(),tt.updateQueue=i),i.memoCache=n,i=n.data[n.index],i===void 0)for(i=n.data[n.index]=Array(e),o=0;o<e;o++)i[o]=ye;return n.index++,i}function or(e,n){return typeof n=="function"?n(e):n}function xl(e){var n=dn();return Zu(n,Lt,e)}function Zu(e,n,i){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var u=e.baseQueue,f=o.pending;if(f!==null){if(u!==null){var y=u.next;u.next=f.next,f.next=y}n.baseQueue=u=f,o.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{n=u.next;var S=y=null,O=null,$=n,ae=!1;do{var le=$.lane&-536870913;if(le!==$.lane?(dt&le)===le:(sr&le)===le){var V=$.revertLane;if(V===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),le===qi&&(ae=!0);else if((sr&V)===V){$=$.next,V===qi&&(ae=!0);continue}else le={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(S=O=le,y=f):O=O.next=le,tt.lanes|=V,Lr|=V;le=$.action,yi&&i(f,le),f=$.hasEagerState?$.eagerState:i(f,le)}else V={lane:le,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(S=O=V,y=f):O=O.next=V,tt.lanes|=le,Lr|=le;$=$.next}while($!==null&&$!==n);if(O===null?y=f:O.next=S,!sa(f,e.memoizedState)&&(mn=!0,ae&&(i=Yi,i!==null)))throw i;e.memoizedState=f,e.baseState=y,e.baseQueue=O,o.lastRenderedState=f}return u===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Xu(e){var n=dn(),i=n.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=e;var o=i.dispatch,u=i.pending,f=n.memoizedState;if(u!==null){i.pending=null;var y=u=u.next;do f=e(f,y.action),y=y.next;while(y!==u);sa(f,n.memoizedState)||(mn=!0),n.memoizedState=f,n.baseQueue===null&&(n.baseState=f),i.lastRenderedState=f}return[f,o]}function dm(e,n,i){var o=tt,u=dn(),f=mt;if(f){if(i===void 0)throw Error(s(407));i=i()}else i=n();var y=!sa((Lt||u).memoizedState,i);if(y&&(u.memoizedState=i,mn=!0),u=u.queue,Wu(pm.bind(null,o,u,e),[e]),u.getSnapshot!==n||y||pn!==null&&pn.memoizedState.tag&1){if(o.flags|=2048,Qi(9,{destroy:void 0},hm.bind(null,o,u,i,n),null),Ht===null)throw Error(s(349));f||(sr&127)!==0||fm(o,n,i)}return i}function fm(e,n,i){e.flags|=16384,e={getSnapshot:n,value:i},n=tt.updateQueue,n===null?(n=wl(),tt.updateQueue=n,n.stores=[e]):(i=n.stores,i===null?n.stores=[e]:i.push(e))}function hm(e,n,i,o){n.value=i,n.getSnapshot=o,mm(n)&&gm(e)}function pm(e,n,i){return i(function(){mm(n)&&gm(e)})}function mm(e){var n=e.getSnapshot;e=e.value;try{var i=n();return!sa(e,i)}catch{return!0}}function gm(e){var n=li(e,2);n!==null&&ta(n,e,2)}function Ku(e){var n=Pn();if(typeof e=="function"){var i=e;if(e=i(),yi){Ee(!0);try{i()}finally{Ee(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:e},n}function ym(e,n,i,o){return e.baseState=i,Zu(e,Lt,typeof o=="function"?o:or)}function XS(e,n,i,o,u){if(Cl(e))throw Error(s(485));if(e=n.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){f.listeners.push(y)}};q.T!==null?i(!0):f.isTransition=!1,o(f),i=n.pending,i===null?(f.next=n.pending=f,vm(n,f)):(f.next=i.next,n.pending=i.next=f)}}function vm(e,n){var i=n.action,o=n.payload,u=e.state;if(n.isTransition){var f=q.T,y={};q.T=y;try{var S=i(u,o),O=q.S;O!==null&&O(y,S),bm(e,n,S)}catch($){Qu(e,n,$)}finally{f!==null&&y.types!==null&&(f.types=y.types),q.T=f}}else try{f=i(u,o),bm(e,n,f)}catch($){Qu(e,n,$)}}function bm(e,n,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){wm(e,n,o)},function(o){return Qu(e,n,o)}):wm(e,n,i)}function wm(e,n,i){n.status="fulfilled",n.value=i,Sm(n),e.state=i,n=e.pending,n!==null&&(i=n.next,i===n?e.pending=null:(i=i.next,n.next=i,vm(e,i)))}function Qu(e,n,i){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=i,Sm(n),n=n.next;while(n!==o)}e.action=null}function Sm(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function xm(e,n){return n}function km(e,n){if(mt){var i=Ht.formState;if(i!==null){e:{var o=tt;if(mt){if(Ft){t:{for(var u=Ft,f=wa;u.nodeType!==8;){if(!f){u=null;break t}if(u=xa(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){Ft=xa(u.nextSibling),o=u.data==="F!";break e}}Nr(o)}o=!1}o&&(n=i[0])}}return i=Pn(),i.memoizedState=i.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xm,lastRenderedState:n},i.queue=o,i=Vm.bind(null,tt,o),o.dispatch=i,o=Ku(!1),f=ad.bind(null,tt,!1,o.queue),o=Pn(),u={state:n,dispatch:null,action:e,pending:null},o.queue=u,i=XS.bind(null,tt,u,f,i),u.dispatch=i,o.memoizedState=e,[n,i,!1]}function Em(e){var n=dn();return Cm(n,Lt,e)}function Cm(e,n,i){if(n=Zu(e,n,xm)[0],e=xl(or)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=eo(n)}catch(y){throw y===Pi?fl:y}else o=n;n=dn();var u=n.queue,f=u.dispatch;return i!==n.memoizedState&&(tt.flags|=2048,Qi(9,{destroy:void 0},KS.bind(null,u,i),null)),[o,f,e]}function KS(e,n){e.action=n}function Tm(e){var n=dn(),i=Lt;if(i!==null)return Cm(n,i,e);dn(),n=n.memoizedState,i=dn();var o=i.queue.dispatch;return i.memoizedState=e,[n,o,!1]}function Qi(e,n,i,o){return e={tag:e,create:i,deps:o,inst:n,next:null},n=tt.updateQueue,n===null&&(n=wl(),tt.updateQueue=n),i=n.lastEffect,i===null?n.lastEffect=e.next=e:(o=i.next,i.next=e,e.next=o,n.lastEffect=e),e}function Nm(){return dn().memoizedState}function kl(e,n,i,o){var u=Pn();tt.flags|=e,u.memoizedState=Qi(1|n,{destroy:void 0},i,o===void 0?null:o)}function El(e,n,i,o){var u=dn();o=o===void 0?null:o;var f=u.memoizedState.inst;Lt!==null&&o!==null&&Vu(o,Lt.memoizedState.deps)?u.memoizedState=Qi(n,f,i,o):(tt.flags|=e,u.memoizedState=Qi(1|n,f,i,o))}function Om(e,n){kl(8390656,8,e,n)}function Wu(e,n){El(2048,8,e,n)}function QS(e){tt.flags|=4;var n=tt.updateQueue;if(n===null)n=wl(),tt.updateQueue=n,n.events=[e];else{var i=n.events;i===null?n.events=[e]:i.push(e)}}function jm(e){var n=dn().memoizedState;return QS({ref:n,nextImpl:e}),function(){if((Tt&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function Am(e,n){return El(4,2,e,n)}function _m(e,n){return El(4,4,e,n)}function Dm(e,n){if(typeof n=="function"){e=e();var i=n(e);return function(){typeof i=="function"?i():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Mm(e,n,i){i=i!=null?i.concat([e]):null,El(4,4,Dm.bind(null,n,e),i)}function Ju(){}function Rm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;return n!==null&&Vu(n,o[1])?o[0]:(i.memoizedState=[e,n],e)}function zm(e,n){var i=dn();n=n===void 0?null:n;var o=i.memoizedState;if(n!==null&&Vu(n,o[1]))return o[0];if(o=e(),yi){Ee(!0);try{e()}finally{Ee(!1)}}return i.memoizedState=[o,n],o}function ed(e,n,i){return i===void 0||(sr&1073741824)!==0&&(dt&261930)===0?e.memoizedState=n:(e.memoizedState=i,e=Lg(),tt.lanes|=e,Lr|=e,i)}function Lm(e,n,i,o){return sa(i,n)?i:Zi.current!==null?(e=ed(e,i,o),sa(e,n)||(mn=!0),e):(sr&42)===0||(sr&1073741824)!==0&&(dt&261930)===0?(mn=!0,e.memoizedState=i):(e=Lg(),tt.lanes|=e,Lr|=e,n)}function Bm(e,n,i,o,u){var f=he.p;he.p=f!==0&&8>f?f:8;var y=q.T,S={};q.T=S,ad(e,!1,n,i);try{var O=u(),$=q.S;if($!==null&&$(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var ae=PS(O,o);to(e,n,ae,fa(e))}else to(e,n,o,fa(e))}catch(le){to(e,n,{then:function(){},status:"rejected",reason:le},fa())}finally{he.p=f,y!==null&&S.types!==null&&(y.types=S.types),q.T=y}}function WS(){}function td(e,n,i,o){if(e.tag!==5)throw Error(s(476));var u=Im(e).queue;Bm(e,u,n,me,i===null?WS:function(){return $m(e),i(o)})}function Im(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:me},next:null};var i={};return n.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:or,lastRenderedState:i},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function $m(e){var n=Im(e);n.next===null&&(n=e.alternate.memoizedState),to(e,n.next.queue,{},fa())}function nd(){return Rn(bo)}function Um(){return dn().memoizedState}function Hm(){return dn().memoizedState}function JS(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var i=fa();e=Ar(i);var o=_r(n,e,i);o!==null&&(ta(o,n,i),Ks(o,n,i)),n={cache:_u()},e.payload=n;return}n=n.return}}function ex(e,n,i){var o=fa();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Cl(e)?Gm(n,i):(i=wu(e,n,i,o),i!==null&&(ta(i,e,o),qm(i,n,o)))}function Vm(e,n,i){var o=fa();to(e,n,i,o)}function to(e,n,i,o){var u={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Cl(e))Gm(n,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=n.lastRenderedReducer,f!==null))try{var y=n.lastRenderedState,S=f(y,i);if(u.hasEagerState=!0,u.eagerState=S,sa(S,y))return il(e,n,u,0),Ht===null&&rl(),!1}catch{}finally{}if(i=wu(e,n,u,o),i!==null)return ta(i,e,o),qm(i,n,o),!0}return!1}function ad(e,n,i,o){if(o={lane:2,revertLane:zd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Cl(e)){if(n)throw Error(s(479))}else n=wu(e,i,o,2),n!==null&&ta(n,e,2)}function Cl(e){var n=e.alternate;return e===tt||n!==null&&n===tt}function Gm(e,n){Xi=vl=!0;var i=e.pending;i===null?n.next=n:(n.next=i.next,i.next=n),e.pending=n}function qm(e,n,i){if((i&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,i|=o,n.lanes=i,Aa(e,i)}}var no={readContext:Rn,use:Sl,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln};no.useEffectEvent=ln;var Ym={readContext:Rn,use:Sl,useCallback:function(e,n){return Pn().memoizedState=[e,n===void 0?null:n],e},useContext:Rn,useEffect:Om,useImperativeHandle:function(e,n,i){i=i!=null?i.concat([e]):null,kl(4194308,4,Dm.bind(null,n,e),i)},useLayoutEffect:function(e,n){return kl(4194308,4,e,n)},useInsertionEffect:function(e,n){kl(4,2,e,n)},useMemo:function(e,n){var i=Pn();n=n===void 0?null:n;var o=e();if(yi){Ee(!0);try{e()}finally{Ee(!1)}}return i.memoizedState=[o,n],o},useReducer:function(e,n,i){var o=Pn();if(i!==void 0){var u=i(n);if(yi){Ee(!0);try{i(n)}finally{Ee(!1)}}}else u=n;return o.memoizedState=o.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},o.queue=e,e=e.dispatch=ex.bind(null,tt,e),[o.memoizedState,e]},useRef:function(e){var n=Pn();return e={current:e},n.memoizedState=e},useState:function(e){e=Ku(e);var n=e.queue,i=Vm.bind(null,tt,n);return n.dispatch=i,[e.memoizedState,i]},useDebugValue:Ju,useDeferredValue:function(e,n){var i=Pn();return ed(i,e,n)},useTransition:function(){var e=Ku(!1);return e=Bm.bind(null,tt,e.queue,!0,!1),Pn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,i){var o=tt,u=Pn();if(mt){if(i===void 0)throw Error(s(407));i=i()}else{if(i=n(),Ht===null)throw Error(s(349));(dt&127)!==0||fm(o,n,i)}u.memoizedState=i;var f={value:i,getSnapshot:n};return u.queue=f,Om(pm.bind(null,o,f,e),[e]),o.flags|=2048,Qi(9,{destroy:void 0},hm.bind(null,o,f,i,n),null),i},useId:function(){var e=Pn(),n=Ht.identifierPrefix;if(mt){var i=Va,o=Ha;i=(o&~(1<<32-Ue(o)-1)).toString(32)+i,n="_"+n+"R_"+i,i=bl++,0<i&&(n+="H"+i.toString(32)),n+="_"}else i=FS++,n="_"+n+"r_"+i.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:nd,useFormState:km,useActionState:km,useOptimistic:function(e){var n=Pn();n.memoizedState=n.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=i,n=ad.bind(null,tt,!0,i),i.dispatch=n,[e,n]},useMemoCache:Fu,useCacheRefresh:function(){return Pn().memoizedState=JS.bind(null,tt)},useEffectEvent:function(e){var n=Pn(),i={impl:e};return n.memoizedState=i,function(){if((Tt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},rd={readContext:Rn,use:Sl,useCallback:Rm,useContext:Rn,useEffect:Wu,useImperativeHandle:Mm,useInsertionEffect:Am,useLayoutEffect:_m,useMemo:zm,useReducer:xl,useRef:Nm,useState:function(){return xl(or)},useDebugValue:Ju,useDeferredValue:function(e,n){var i=dn();return Lm(i,Lt.memoizedState,e,n)},useTransition:function(){var e=xl(or)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:eo(e),n]},useSyncExternalStore:dm,useId:Um,useHostTransitionStatus:nd,useFormState:Em,useActionState:Em,useOptimistic:function(e,n){var i=dn();return ym(i,Lt,e,n)},useMemoCache:Fu,useCacheRefresh:Hm};rd.useEffectEvent=jm;var Pm={readContext:Rn,use:Sl,useCallback:Rm,useContext:Rn,useEffect:Wu,useImperativeHandle:Mm,useInsertionEffect:Am,useLayoutEffect:_m,useMemo:zm,useReducer:Xu,useRef:Nm,useState:function(){return Xu(or)},useDebugValue:Ju,useDeferredValue:function(e,n){var i=dn();return Lt===null?ed(i,e,n):Lm(i,Lt.memoizedState,e,n)},useTransition:function(){var e=Xu(or)[0],n=dn().memoizedState;return[typeof e=="boolean"?e:eo(e),n]},useSyncExternalStore:dm,useId:Um,useHostTransitionStatus:nd,useFormState:Tm,useActionState:Tm,useOptimistic:function(e,n){var i=dn();return Lt!==null?ym(i,Lt,e,n):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Fu,useCacheRefresh:Hm};Pm.useEffectEvent=jm;function id(e,n,i,o){n=e.memoizedState,i=i(o,n),i=i==null?n:w({},n,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var sd={enqueueSetState:function(e,n,i){e=e._reactInternals;var o=fa(),u=Ar(o);u.payload=n,i!=null&&(u.callback=i),n=_r(e,u,o),n!==null&&(ta(n,e,o),Ks(n,e,o))},enqueueReplaceState:function(e,n,i){e=e._reactInternals;var o=fa(),u=Ar(o);u.tag=1,u.payload=n,i!=null&&(u.callback=i),n=_r(e,u,o),n!==null&&(ta(n,e,o),Ks(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var i=fa(),o=Ar(i);o.tag=2,n!=null&&(o.callback=n),n=_r(e,o,i),n!==null&&(ta(n,e,i),Ks(n,e,i))}};function Fm(e,n,i,o,u,f,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,f,y):n.prototype&&n.prototype.isPureReactComponent?!Vs(i,o)||!Vs(u,f):!0}function Zm(e,n,i,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(i,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(i,o),n.state!==e&&sd.enqueueReplaceState(n,n.state,null)}function vi(e,n){var i=n;if("ref"in n){i={};for(var o in n)o!=="ref"&&(i[o]=n[o])}if(e=e.defaultProps){i===n&&(i=w({},i));for(var u in e)i[u]===void 0&&(i[u]=e[u])}return i}function Xm(e){al(e)}function Km(e){console.error(e)}function Qm(e){al(e)}function Tl(e,n){try{var i=e.onUncaughtError;i(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Wm(e,n,i){try{var o=e.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function od(e,n,i){return i=Ar(i),i.tag=3,i.payload={element:null},i.callback=function(){Tl(e,n)},i}function Jm(e){return e=Ar(e),e.tag=3,e}function eg(e,n,i,o){var u=i.type.getDerivedStateFromError;if(typeof u=="function"){var f=o.value;e.payload=function(){return u(f)},e.callback=function(){Wm(n,i,o)}}var y=i.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(e.callback=function(){Wm(n,i,o),typeof u!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var S=o.stack;this.componentDidCatch(o.value,{componentStack:S!==null?S:""})})}function tx(e,n,i,o,u){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=i.alternate,n!==null&&Gi(n,i,u,!0),i=la.current,i!==null){switch(i.tag){case 31:case 13:return Sa===null?Il():i.alternate===null&&cn===0&&(cn=3),i.flags&=-257,i.flags|=65536,i.lanes=u,o===hl?i.flags|=16384:(n=i.updateQueue,n===null?i.updateQueue=new Set([o]):n.add(o),Dd(e,o,u)),!1;case 22:return i.flags|=65536,o===hl?i.flags|=16384:(n=i.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=n):(i=n.retryQueue,i===null?n.retryQueue=new Set([o]):i.add(o)),Dd(e,o,u)),!1}throw Error(s(435,i.tag))}return Dd(e,o,u),Il(),!1}if(mt)return n=la.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=u,o!==Tu&&(e=Error(s(422),{cause:o}),Ys(ya(e,i)))):(o!==Tu&&(n=Error(s(423),{cause:o}),Ys(ya(n,i))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,o=ya(o,i),u=od(e.stateNode,o,u),Bu(e,u),cn!==4&&(cn=2)),!1;var f=Error(s(520),{cause:o});if(f=ya(f,i),uo===null?uo=[f]:uo.push(f),cn!==4&&(cn=2),n===null)return!0;o=ya(o,i),i=n;do{switch(i.tag){case 3:return i.flags|=65536,e=u&-u,i.lanes|=e,e=od(i.stateNode,o,e),Bu(i,e),!1;case 1:if(n=i.type,f=i.stateNode,(i.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Br===null||!Br.has(f))))return i.flags|=65536,u&=-u,i.lanes|=u,u=Jm(u),eg(u,e,i,o),Bu(i,u),!1}i=i.return}while(i!==null);return!1}var ld=Error(s(461)),mn=!1;function zn(e,n,i,o){n.child=e===null?rm(n,null,i,o):gi(n,e.child,i,o)}function tg(e,n,i,o,u){i=i.render;var f=n.ref;if("ref"in o){var y={};for(var S in o)S!=="ref"&&(y[S]=o[S])}else y=o;return fi(n),o=Gu(e,n,i,y,f,u),S=qu(),e!==null&&!mn?(Yu(e,n,u),lr(e,n,u)):(mt&&S&&Eu(n),n.flags|=1,zn(e,n,o,u),n.child)}function ng(e,n,i,o,u){if(e===null){var f=i.type;return typeof f=="function"&&!Su(f)&&f.defaultProps===void 0&&i.compare===null?(n.tag=15,n.type=f,ag(e,n,f,o,u)):(e=ol(i.type,null,o,n,n.mode,u),e.ref=n.ref,e.return=n,n.child=e)}if(f=e.child,!gd(e,u)){var y=f.memoizedProps;if(i=i.compare,i=i!==null?i:Vs,i(y,o)&&e.ref===n.ref)return lr(e,n,u)}return n.flags|=1,e=nr(f,o),e.ref=n.ref,e.return=n,n.child=e}function ag(e,n,i,o,u){if(e!==null){var f=e.memoizedProps;if(Vs(f,o)&&e.ref===n.ref)if(mn=!1,n.pendingProps=o=f,gd(e,u))(e.flags&131072)!==0&&(mn=!0);else return n.lanes=e.lanes,lr(e,n,u)}return cd(e,n,i,o,u)}function rg(e,n,i,o){var u=o.children,f=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(f=f!==null?f.baseLanes|i:i,e!==null){for(o=n.child=e.child,u=0;o!==null;)u=u|o.lanes|o.childLanes,o=o.sibling;o=u&~f}else o=0,n.child=null;return ig(e,n,f,i,o)}if((i&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&dl(n,f!==null?f.cachePool:null),f!==null?om(n,f):$u(),lm(n);else return o=n.lanes=536870912,ig(e,n,f!==null?f.baseLanes|i:i,i,o)}else f!==null?(dl(n,f.cachePool),om(n,f),Mr(),n.memoizedState=null):(e!==null&&dl(n,null),$u(),Mr());return zn(e,n,u,i),n.child}function ao(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function ig(e,n,i,o,u){var f=Mu();return f=f===null?null:{parent:hn._currentValue,pool:f},n.memoizedState={baseLanes:i,cachePool:f},e!==null&&dl(n,null),$u(),lm(n),e!==null&&Gi(e,n,o,!0),n.childLanes=u,null}function Nl(e,n){return n=jl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function sg(e,n,i){return gi(n,e.child,null,i),e=Nl(n,n.pendingProps),e.flags|=2,ca(n),n.memoizedState=null,e}function nx(e,n,i){var o=n.pendingProps,u=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(mt){if(o.mode==="hidden")return e=Nl(n,o),n.lanes=536870912,ao(null,e);if(Hu(n),(e=Ft)?(e=vy(e,wa),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Ha,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},i=Gp(e),i.return=n,n.child=i,Mn=n,Ft=null)):e=null,e===null)throw Nr(n);return n.lanes=536870912,null}return Nl(n,o)}var f=e.memoizedState;if(f!==null){var y=f.dehydrated;if(Hu(n),u)if(n.flags&256)n.flags&=-257,n=sg(e,n,i);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(mn||Gi(e,n,i,!1),u=(i&e.childLanes)!==0,mn||u){if(o=Ht,o!==null&&(y=ri(o,i),y!==0&&y!==f.retryLane))throw f.retryLane=y,li(e,y),ta(o,e,y),ld;Il(),n=sg(e,n,i)}else e=f.treeContext,Ft=xa(y.nextSibling),Mn=n,mt=!0,Tr=null,wa=!1,e!==null&&Pp(n,e),n=Nl(n,o),n.flags|=4096;return n}return e=nr(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Ol(e,n){var i=n.ref;if(i===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(e===null||e.ref!==i)&&(n.flags|=4194816)}}function cd(e,n,i,o,u){return fi(n),i=Gu(e,n,i,o,void 0,u),o=qu(),e!==null&&!mn?(Yu(e,n,u),lr(e,n,u)):(mt&&o&&Eu(n),n.flags|=1,zn(e,n,i,u),n.child)}function og(e,n,i,o,u,f){return fi(n),n.updateQueue=null,i=um(n,o,i,u),cm(e),o=qu(),e!==null&&!mn?(Yu(e,n,f),lr(e,n,f)):(mt&&o&&Eu(n),n.flags|=1,zn(e,n,i,f),n.child)}function lg(e,n,i,o,u){if(fi(n),n.stateNode===null){var f=$i,y=i.contextType;typeof y=="object"&&y!==null&&(f=Rn(y)),f=new i(o,f),n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=sd,n.stateNode=f,f._reactInternals=n,f=n.stateNode,f.props=o,f.state=n.memoizedState,f.refs={},zu(n),y=i.contextType,f.context=typeof y=="object"&&y!==null?Rn(y):$i,f.state=n.memoizedState,y=i.getDerivedStateFromProps,typeof y=="function"&&(id(n,i,y,o),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(y=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),y!==f.state&&sd.enqueueReplaceState(f,f.state,null),Ws(n,o,f,u),Qs(),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){f=n.stateNode;var S=n.memoizedProps,O=vi(i,S);f.props=O;var $=f.context,ae=i.contextType;y=$i,typeof ae=="object"&&ae!==null&&(y=Rn(ae));var le=i.getDerivedStateFromProps;ae=typeof le=="function"||typeof f.getSnapshotBeforeUpdate=="function",S=n.pendingProps!==S,ae||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(S||$!==y)&&Zm(n,f,o,y),jr=!1;var V=n.memoizedState;f.state=V,Ws(n,o,f,u),Qs(),$=n.memoizedState,S||V!==$||jr?(typeof le=="function"&&(id(n,i,le,o),$=n.memoizedState),(O=jr||Fm(n,i,O,o,V,$,y))?(ae||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(n.flags|=4194308)):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=$),f.props=o,f.state=$,f.context=y,o=O):(typeof f.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{f=n.stateNode,Lu(e,n),y=n.memoizedProps,ae=vi(i,y),f.props=ae,le=n.pendingProps,V=f.context,$=i.contextType,O=$i,typeof $=="object"&&$!==null&&(O=Rn($)),S=i.getDerivedStateFromProps,($=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y!==le||V!==O)&&Zm(n,f,o,O),jr=!1,V=n.memoizedState,f.state=V,Ws(n,o,f,u),Qs();var X=n.memoizedState;y!==le||V!==X||jr||e!==null&&e.dependencies!==null&&cl(e.dependencies)?(typeof S=="function"&&(id(n,i,S,o),X=n.memoizedState),(ae=jr||Fm(n,i,ae,o,V,X,O)||e!==null&&e.dependencies!==null&&cl(e.dependencies))?($||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(o,X,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(o,X,O)),typeof f.componentDidUpdate=="function"&&(n.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=X),f.props=o,f.state=X,f.context=O,o=ae):(typeof f.componentDidUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||y===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),o=!1)}return f=o,Ol(e,n),o=(n.flags&128)!==0,f||o?(f=n.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:f.render(),n.flags|=1,e!==null&&o?(n.child=gi(n,e.child,null,u),n.child=gi(n,null,i,u)):zn(e,n,i,u),n.memoizedState=f.state,e=n.child):e=lr(e,n,u),e}function cg(e,n,i,o){return ui(),n.flags|=256,zn(e,n,i,o),n.child}var ud={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function dd(e){return{baseLanes:e,cachePool:Wp()}}function fd(e,n,i){return e=e!==null?e.childLanes&~i:0,n&&(e|=da),e}function ug(e,n,i){var o=n.pendingProps,u=!1,f=(n.flags&128)!==0,y;if((y=f)||(y=e!==null&&e.memoizedState===null?!1:(un.current&2)!==0),y&&(u=!0,n.flags&=-129),y=(n.flags&32)!==0,n.flags&=-33,e===null){if(mt){if(u?Dr(n):Mr(),(e=Ft)?(e=vy(e,wa),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Ha,overflow:Va}:null,retryLane:536870912,hydrationErrors:null},i=Gp(e),i.return=n,n.child=i,Mn=n,Ft=null)):e=null,e===null)throw Nr(n);return Zd(e)?n.lanes=32:n.lanes=536870912,null}var S=o.children;return o=o.fallback,u?(Mr(),u=n.mode,S=jl({mode:"hidden",children:S},u),o=ci(o,u,i,null),S.return=n,o.return=n,S.sibling=o,n.child=S,o=n.child,o.memoizedState=dd(i),o.childLanes=fd(e,y,i),n.memoizedState=ud,ao(null,o)):(Dr(n),hd(n,S))}var O=e.memoizedState;if(O!==null&&(S=O.dehydrated,S!==null)){if(f)n.flags&256?(Dr(n),n.flags&=-257,n=pd(e,n,i)):n.memoizedState!==null?(Mr(),n.child=e.child,n.flags|=128,n=null):(Mr(),S=o.fallback,u=n.mode,o=jl({mode:"visible",children:o.children},u),S=ci(S,u,i,null),S.flags|=2,o.return=n,S.return=n,o.sibling=S,n.child=o,gi(n,e.child,null,i),o=n.child,o.memoizedState=dd(i),o.childLanes=fd(e,y,i),n.memoizedState=ud,n=ao(null,o));else if(Dr(n),Zd(S)){if(y=S.nextSibling&&S.nextSibling.dataset,y)var $=y.dgst;y=$,o=Error(s(419)),o.stack="",o.digest=y,Ys({value:o,source:null,stack:null}),n=pd(e,n,i)}else if(mn||Gi(e,n,i,!1),y=(i&e.childLanes)!==0,mn||y){if(y=Ht,y!==null&&(o=ri(y,i),o!==0&&o!==O.retryLane))throw O.retryLane=o,li(e,o),ta(y,e,o),ld;Fd(S)||Il(),n=pd(e,n,i)}else Fd(S)?(n.flags|=192,n.child=e.child,n=null):(e=O.treeContext,Ft=xa(S.nextSibling),Mn=n,mt=!0,Tr=null,wa=!1,e!==null&&Pp(n,e),n=hd(n,o.children),n.flags|=4096);return n}return u?(Mr(),S=o.fallback,u=n.mode,O=e.child,$=O.sibling,o=nr(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,$!==null?S=nr($,S):(S=ci(S,u,i,null),S.flags|=2),S.return=n,o.return=n,o.sibling=S,n.child=o,ao(null,o),o=n.child,S=e.child.memoizedState,S===null?S=dd(i):(u=S.cachePool,u!==null?(O=hn._currentValue,u=u.parent!==O?{parent:O,pool:O}:u):u=Wp(),S={baseLanes:S.baseLanes|i,cachePool:u}),o.memoizedState=S,o.childLanes=fd(e,y,i),n.memoizedState=ud,ao(e.child,o)):(Dr(n),i=e.child,e=i.sibling,i=nr(i,{mode:"visible",children:o.children}),i.return=n,i.sibling=null,e!==null&&(y=n.deletions,y===null?(n.deletions=[e],n.flags|=16):y.push(e)),n.child=i,n.memoizedState=null,i)}function hd(e,n){return n=jl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function jl(e,n){return e=oa(22,e,null,n),e.lanes=0,e}function pd(e,n,i){return gi(n,e.child,null,i),e=hd(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function dg(e,n,i){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),ju(e.return,n,i)}function md(e,n,i,o,u,f){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:u,treeForkCount:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=o,y.tail=i,y.tailMode=u,y.treeForkCount=f)}function fg(e,n,i){var o=n.pendingProps,u=o.revealOrder,f=o.tail;o=o.children;var y=un.current,S=(y&2)!==0;if(S?(y=y&1|2,n.flags|=128):y&=1,_(un,y),zn(e,n,o,i),o=mt?qs:0,!S&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dg(e,i,n);else if(e.tag===19)dg(e,i,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(i=n.child,u=null;i!==null;)e=i.alternate,e!==null&&yl(e)===null&&(u=i),i=i.sibling;i=u,i===null?(u=n.child,n.child=null):(u=i.sibling,i.sibling=null),md(n,!1,u,i,f,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,u=n.child,n.child=null;u!==null;){if(e=u.alternate,e!==null&&yl(e)===null){n.child=u;break}e=u.sibling,u.sibling=i,i=u,u=e}md(n,!0,i,null,f,o);break;case"together":md(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function lr(e,n,i){if(e!==null&&(n.dependencies=e.dependencies),Lr|=n.lanes,(i&n.childLanes)===0)if(e!==null){if(Gi(e,n,i,!1),(i&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,i=nr(e,e.pendingProps),n.child=i,i.return=n;e.sibling!==null;)e=e.sibling,i=i.sibling=nr(e,e.pendingProps),i.return=n;i.sibling=null}return n.child}function gd(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&cl(e)))}function ax(e,n,i){switch(n.tag){case 3:$e(n,n.stateNode.containerInfo),Or(n,hn,e.memoizedState.cache),ui();break;case 27:case 5:Rt(n);break;case 4:$e(n,n.stateNode.containerInfo);break;case 10:Or(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Hu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Dr(n),n.flags|=128,null):(i&n.child.childLanes)!==0?ug(e,n,i):(Dr(n),e=lr(e,n,i),e!==null?e.sibling:null);Dr(n);break;case 19:var u=(e.flags&128)!==0;if(o=(i&n.childLanes)!==0,o||(Gi(e,n,i,!1),o=(i&n.childLanes)!==0),u){if(o)return fg(e,n,i);n.flags|=128}if(u=n.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),_(un,un.current),o)break;return null;case 22:return n.lanes=0,rg(e,n,i,n.pendingProps);case 24:Or(n,hn,e.memoizedState.cache)}return lr(e,n,i)}function hg(e,n,i){if(e!==null)if(e.memoizedProps!==n.pendingProps)mn=!0;else{if(!gd(e,i)&&(n.flags&128)===0)return mn=!1,ax(e,n,i);mn=(e.flags&131072)!==0}else mn=!1,mt&&(n.flags&1048576)!==0&&Yp(n,qs,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(e=pi(n.elementType),n.type=e,typeof e=="function")Su(e)?(o=vi(e,o),n.tag=1,n=lg(null,n,e,o,i)):(n.tag=0,n=cd(null,n,e,o,i));else{if(e!=null){var u=e.$$typeof;if(u===G){n.tag=11,n=tg(null,n,e,o,i);break e}else if(u===B){n.tag=14,n=ng(null,n,e,o,i);break e}}throw n=nt(e)||e,Error(s(306,n,""))}}return n;case 0:return cd(e,n,n.type,n.pendingProps,i);case 1:return o=n.type,u=vi(o,n.pendingProps),lg(e,n,o,u,i);case 3:e:{if($e(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var f=n.memoizedState;u=f.element,Lu(e,n),Ws(n,o,null,i);var y=n.memoizedState;if(o=y.cache,Or(n,hn,o),o!==f.cache&&Au(n,[hn],i,!0),Qs(),o=y.element,f.isDehydrated)if(f={element:o,isDehydrated:!1,cache:y.cache},n.updateQueue.baseState=f,n.memoizedState=f,n.flags&256){n=cg(e,n,o,i);break e}else if(o!==u){u=ya(Error(s(424)),n),Ys(u),n=cg(e,n,o,i);break e}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Ft=xa(e.firstChild),Mn=n,mt=!0,Tr=null,wa=!0,i=rm(n,null,o,i),n.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(ui(),o===u){n=lr(e,n,i);break e}zn(e,n,o,i)}n=n.child}return n;case 26:return Ol(e,n),e===null?(i=Ey(n.type,null,n.pendingProps,null))?n.memoizedState=i:mt||(i=n.type,e=n.pendingProps,o=Yl(fe.current).createElement(i),o[N]=n,o[j]=e,Ln(o,i,e),Gt(o),n.stateNode=o):n.memoizedState=Ey(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Rt(n),e===null&&mt&&(o=n.stateNode=Sy(n.type,n.pendingProps,fe.current),Mn=n,wa=!0,u=Ft,Hr(n.type)?(Xd=u,Ft=xa(o.firstChild)):Ft=u),zn(e,n,n.pendingProps.children,i),Ol(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&mt&&((u=o=Ft)&&(o=Mx(o,n.type,n.pendingProps,wa),o!==null?(n.stateNode=o,Mn=n,Ft=xa(o.firstChild),wa=!1,u=!0):u=!1),u||Nr(n)),Rt(n),u=n.type,f=n.pendingProps,y=e!==null?e.memoizedProps:null,o=f.children,qd(u,f)?o=null:y!==null&&qd(u,y)&&(n.flags|=32),n.memoizedState!==null&&(u=Gu(e,n,ZS,null,null,i),bo._currentValue=u),Ol(e,n),zn(e,n,o,i),n.child;case 6:return e===null&&mt&&((e=i=Ft)&&(i=Rx(i,n.pendingProps,wa),i!==null?(n.stateNode=i,Mn=n,Ft=null,e=!0):e=!1),e||Nr(n)),null;case 13:return ug(e,n,i);case 4:return $e(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=gi(n,null,o,i):zn(e,n,o,i),n.child;case 11:return tg(e,n,n.type,n.pendingProps,i);case 7:return zn(e,n,n.pendingProps,i),n.child;case 8:return zn(e,n,n.pendingProps.children,i),n.child;case 12:return zn(e,n,n.pendingProps.children,i),n.child;case 10:return o=n.pendingProps,Or(n,n.type,o.value),zn(e,n,o.children,i),n.child;case 9:return u=n.type._context,o=n.pendingProps.children,fi(n),u=Rn(u),o=o(u),n.flags|=1,zn(e,n,o,i),n.child;case 14:return ng(e,n,n.type,n.pendingProps,i);case 15:return ag(e,n,n.type,n.pendingProps,i);case 19:return fg(e,n,i);case 31:return nx(e,n,i);case 22:return rg(e,n,i,n.pendingProps);case 24:return fi(n),o=Rn(hn),e===null?(u=Mu(),u===null&&(u=Ht,f=_u(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=i),u=f),n.memoizedState={parent:o,cache:u},zu(n),Or(n,hn,u)):((e.lanes&i)!==0&&(Lu(e,n),Ws(n,null,null,i),Qs()),u=e.memoizedState,f=n.memoizedState,u.parent!==o?(u={parent:o,cache:o},n.memoizedState=u,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=u),Or(n,hn,o)):(o=f.cache,Or(n,hn,o),o!==u.cache&&Au(n,[hn],i,!0))),zn(e,n,n.pendingProps.children,i),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function cr(e){e.flags|=4}function yd(e,n,i,o,u){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Ug())e.flags|=8192;else throw mi=hl,Ru}else e.flags&=-16777217}function pg(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jy(n))if(Ug())e.flags|=8192;else throw mi=hl,Ru}function Al(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?$n():536870912,e.lanes|=n,ts|=n)}function ro(e,n){if(!mt)switch(e.tailMode){case"hidden":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Zt(e){var n=e.alternate!==null&&e.alternate.child===e.child,i=0,o=0;if(n)for(var u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags&65011712,o|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)i|=u.lanes|u.childLanes,o|=u.subtreeFlags,o|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=o,e.childLanes=i,n}function rx(e,n,i){var o=n.pendingProps;switch(Cu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(n),null;case 1:return Zt(n),null;case 3:return i=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),ir(hn),Fe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Vi(n)?cr(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Nu())),Zt(n),null;case 26:var u=n.type,f=n.memoizedState;return e===null?(cr(n),f!==null?(Zt(n),pg(n,f)):(Zt(n),yd(n,u,null,o,i))):f?f!==e.memoizedState?(cr(n),Zt(n),pg(n,f)):(Zt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&cr(n),Zt(n),yd(n,u,e,o,i)),null;case 27:if(qt(n),i=fe.current,u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}e=M.current,Vi(n)?Fp(n):(e=Sy(u,o,i),n.stateNode=e,cr(n))}return Zt(n),null;case 5:if(qt(n),u=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&cr(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return Zt(n),null}if(f=M.current,Vi(n))Fp(n);else{var y=Yl(fe.current);switch(f){case 1:f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=y.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=y.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=y.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof o.is=="string"?y.createElement("select",{is:o.is}):y.createElement("select"),o.multiple?f.multiple=!0:o.size&&(f.size=o.size);break;default:f=typeof o.is=="string"?y.createElement(u,{is:o.is}):y.createElement(u)}}f[N]=n,f[j]=o;e:for(y=n.child;y!==null;){if(y.tag===5||y.tag===6)f.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===n)break e;for(;y.sibling===null;){if(y.return===null||y.return===n)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}n.stateNode=f;e:switch(Ln(f,u,o),u){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&cr(n)}}return Zt(n),yd(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,i),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&cr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=fe.current,Vi(n)){if(e=n.stateNode,i=n.memoizedProps,o=null,u=Mn,u!==null)switch(u.tag){case 27:case 5:o=u.memoizedProps}e[N]=n,e=!!(e.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||uy(e.nodeValue,i)),e||Nr(n,!0)}else e=Yl(e).createTextNode(o),e[N]=n,n.stateNode=e}return Zt(n),null;case 31:if(i=n.memoizedState,e===null||e.memoizedState!==null){if(o=Vi(n),i!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[N]=n}else ui(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),e=!1}else i=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=i),e=!0;if(!e)return n.flags&256?(ca(n),n):(ca(n),null);if((n.flags&128)!==0)throw Error(s(558))}return Zt(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Vi(n),o!==null&&o.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=n.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[N]=n}else ui(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Zt(n),u=!1}else u=Nu(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return n.flags&256?(ca(n),n):(ca(n),null)}return ca(n),(n.flags&128)!==0?(n.lanes=i,n):(i=o!==null,e=e!==null&&e.memoizedState!==null,i&&(o=n.child,u=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(u=o.alternate.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==u&&(o.flags|=2048)),i!==e&&i&&(n.child.flags|=8192),Al(n,n.updateQueue),Zt(n),null);case 4:return Fe(),e===null&&$d(n.stateNode.containerInfo),Zt(n),null;case 10:return ir(n.type),Zt(n),null;case 19:if(T(un),o=n.memoizedState,o===null)return Zt(n),null;if(u=(n.flags&128)!==0,f=o.rendering,f===null)if(u)ro(o,!1);else{if(cn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(f=yl(e),f!==null){for(n.flags|=128,ro(o,!1),e=f.updateQueue,n.updateQueue=e,Al(n,e),n.subtreeFlags=0,e=i,i=n.child;i!==null;)Vp(i,e),i=i.sibling;return _(un,un.current&1|2),mt&&ar(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&A()>zl&&(n.flags|=128,u=!0,ro(o,!1),n.lanes=4194304)}else{if(!u)if(e=yl(f),e!==null){if(n.flags|=128,u=!0,e=e.updateQueue,n.updateQueue=e,Al(n,e),ro(o,!0),o.tail===null&&o.tailMode==="hidden"&&!f.alternate&&!mt)return Zt(n),null}else 2*A()-o.renderingStartTime>zl&&i!==536870912&&(n.flags|=128,u=!0,ro(o,!1),n.lanes=4194304);o.isBackwards?(f.sibling=n.child,n.child=f):(e=o.last,e!==null?e.sibling=f:n.child=f,o.last=f)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=A(),e.sibling=null,i=un.current,_(un,u?i&1|2:i&1),mt&&ar(n,o.treeForkCount),e):(Zt(n),null);case 22:case 23:return ca(n),Uu(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(i&536870912)!==0&&(n.flags&128)===0&&(Zt(n),n.subtreeFlags&6&&(n.flags|=8192)):Zt(n),i=n.updateQueue,i!==null&&Al(n,i.retryQueue),i=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==i&&(n.flags|=2048),e!==null&&T(hi),null;case 24:return i=null,e!==null&&(i=e.memoizedState.cache),n.memoizedState.cache!==i&&(n.flags|=2048),ir(hn),Zt(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function ix(e,n){switch(Cu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return ir(hn),Fe(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return qt(n),null;case 31:if(n.memoizedState!==null){if(ca(n),n.alternate===null)throw Error(s(340));ui()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ca(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));ui()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return T(un),null;case 4:return Fe(),null;case 10:return ir(n.type),null;case 22:case 23:return ca(n),Uu(),e!==null&&T(hi),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return ir(hn),null;case 25:return null;default:return null}}function mg(e,n){switch(Cu(n),n.tag){case 3:ir(hn),Fe();break;case 26:case 27:case 5:qt(n);break;case 4:Fe();break;case 31:n.memoizedState!==null&&ca(n);break;case 13:ca(n);break;case 19:T(un);break;case 10:ir(n.type);break;case 22:case 23:ca(n),Uu(),e!==null&&T(hi);break;case 24:ir(hn)}}function io(e,n){try{var i=n.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var u=o.next;i=u;do{if((i.tag&e)===e){o=void 0;var f=i.create,y=i.inst;o=f(),y.destroy=o}i=i.next}while(i!==u)}}catch(S){Mt(n,n.return,S)}}function Rr(e,n,i){try{var o=n.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&e)===e){var y=o.inst,S=y.destroy;if(S!==void 0){y.destroy=void 0,u=n;var O=i,$=S;try{$()}catch(ae){Mt(u,O,ae)}}}o=o.next}while(o!==f)}}catch(ae){Mt(n,n.return,ae)}}function gg(e){var n=e.updateQueue;if(n!==null){var i=e.stateNode;try{sm(n,i)}catch(o){Mt(e,e.return,o)}}}function yg(e,n,i){i.props=vi(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(o){Mt(e,n,o)}}function so(e,n){try{var i=e.ref;if(i!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof i=="function"?e.refCleanup=i(o):i.current=o}}catch(u){Mt(e,n,u)}}function Ga(e,n){var i=e.ref,o=e.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(u){Mt(e,n,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(u){Mt(e,n,u)}else i.current=null}function vg(e){var n=e.type,i=e.memoizedProps,o=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(u){Mt(e,e.return,u)}}function vd(e,n,i){try{var o=e.stateNode;Nx(o,e.type,i,n),o[j]=n}catch(u){Mt(e,e.return,u)}}function bg(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Hr(e.type)||e.tag===4}function bd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||bg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Hr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wd(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(e,n):(n=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,n.appendChild(e),i=i._reactRootContainer,i!=null||n.onclick!==null||(n.onclick=er));else if(o!==4&&(o===27&&Hr(e.type)&&(i=e.stateNode,n=null),e=e.child,e!==null))for(wd(e,n,i),e=e.sibling;e!==null;)wd(e,n,i),e=e.sibling}function _l(e,n,i){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?i.insertBefore(e,n):i.appendChild(e);else if(o!==4&&(o===27&&Hr(e.type)&&(i=e.stateNode),e=e.child,e!==null))for(_l(e,n,i),e=e.sibling;e!==null;)_l(e,n,i),e=e.sibling}function wg(e){var n=e.stateNode,i=e.memoizedProps;try{for(var o=e.type,u=n.attributes;u.length;)n.removeAttributeNode(u[0]);Ln(n,o,i),n[N]=e,n[j]=i}catch(f){Mt(e,e.return,f)}}var ur=!1,gn=!1,Sd=!1,Sg=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function sx(e,n){if(e=e.containerInfo,Vd=Wl,e=Mp(e),pu(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{i=(i=e.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var u=o.anchorOffset,f=o.focusNode;o=o.focusOffset;try{i.nodeType,f.nodeType}catch{i=null;break e}var y=0,S=-1,O=-1,$=0,ae=0,le=e,V=null;t:for(;;){for(var X;le!==i||u!==0&&le.nodeType!==3||(S=y+u),le!==f||o!==0&&le.nodeType!==3||(O=y+o),le.nodeType===3&&(y+=le.nodeValue.length),(X=le.firstChild)!==null;)V=le,le=X;for(;;){if(le===e)break t;if(V===i&&++$===u&&(S=y),V===f&&++ae===o&&(O=y),(X=le.nextSibling)!==null)break;le=V,V=le.parentNode}le=X}i=S===-1||O===-1?null:{start:S,end:O}}else i=null}i=i||{start:0,end:0}}else i=null;for(Gd={focusedElem:e,selectionRange:i},Wl=!1,Tn=n;Tn!==null;)if(n=Tn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Tn=e;else for(;Tn!==null;){switch(n=Tn,f=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(i=0;i<e.length;i++)u=e[i],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,i=n,u=f.memoizedProps,f=f.memoizedState,o=i.stateNode;try{var ze=vi(i.type,u);e=o.getSnapshotBeforeUpdate(ze,f),o.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){Mt(i,i.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,i=e.nodeType,i===9)Pd(e);else if(i===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Tn=e;break}Tn=n.return}}function xg(e,n,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:fr(e,i),o&4&&io(5,i);break;case 1:if(fr(e,i),o&4)if(e=i.stateNode,n===null)try{e.componentDidMount()}catch(y){Mt(i,i.return,y)}else{var u=vi(i.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(u,n,e.__reactInternalSnapshotBeforeUpdate)}catch(y){Mt(i,i.return,y)}}o&64&&gg(i),o&512&&so(i,i.return);break;case 3:if(fr(e,i),o&64&&(e=i.updateQueue,e!==null)){if(n=null,i.child!==null)switch(i.child.tag){case 27:case 5:n=i.child.stateNode;break;case 1:n=i.child.stateNode}try{sm(e,n)}catch(y){Mt(i,i.return,y)}}break;case 27:n===null&&o&4&&wg(i);case 26:case 5:fr(e,i),n===null&&o&4&&vg(i),o&512&&so(i,i.return);break;case 12:fr(e,i);break;case 31:fr(e,i),o&4&&Cg(e,i);break;case 13:fr(e,i),o&4&&Tg(e,i),o&64&&(e=i.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(i=mx.bind(null,i),zx(e,i))));break;case 22:if(o=i.memoizedState!==null||ur,!o){n=n!==null&&n.memoizedState!==null||gn,u=ur;var f=gn;ur=o,(gn=n)&&!f?hr(e,i,(i.subtreeFlags&8772)!==0):fr(e,i),ur=u,gn=f}break;case 30:break;default:fr(e,i)}}function kg(e){var n=e.alternate;n!==null&&(e.alternate=null,kg(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&tn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Qt=null,Qn=!1;function dr(e,n,i){for(i=i.child;i!==null;)Eg(e,n,i),i=i.sibling}function Eg(e,n,i){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(be,i)}catch{}switch(i.tag){case 26:gn||Ga(i,n),dr(e,n,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:gn||Ga(i,n);var o=Qt,u=Qn;Hr(i.type)&&(Qt=i.stateNode,Qn=!1),dr(e,n,i),go(i.stateNode),Qt=o,Qn=u;break;case 5:gn||Ga(i,n);case 6:if(o=Qt,u=Qn,Qt=null,dr(e,n,i),Qt=o,Qn=u,Qt!==null)if(Qn)try{(Qt.nodeType===9?Qt.body:Qt.nodeName==="HTML"?Qt.ownerDocument.body:Qt).removeChild(i.stateNode)}catch(f){Mt(i,n,f)}else try{Qt.removeChild(i.stateNode)}catch(f){Mt(i,n,f)}break;case 18:Qt!==null&&(Qn?(e=Qt,gy(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,i.stateNode),cs(e)):gy(Qt,i.stateNode));break;case 4:o=Qt,u=Qn,Qt=i.stateNode.containerInfo,Qn=!0,dr(e,n,i),Qt=o,Qn=u;break;case 0:case 11:case 14:case 15:Rr(2,i,n),gn||Rr(4,i,n),dr(e,n,i);break;case 1:gn||(Ga(i,n),o=i.stateNode,typeof o.componentWillUnmount=="function"&&yg(i,n,o)),dr(e,n,i);break;case 21:dr(e,n,i);break;case 22:gn=(o=gn)||i.memoizedState!==null,dr(e,n,i),gn=o;break;default:dr(e,n,i)}}function Cg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{cs(e)}catch(i){Mt(n,n.return,i)}}}function Tg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{cs(e)}catch(i){Mt(n,n.return,i)}}function ox(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Sg),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Sg),n;default:throw Error(s(435,e.tag))}}function Dl(e,n){var i=ox(e);n.forEach(function(o){if(!i.has(o)){i.add(o);var u=gx.bind(null,e,o);o.then(u,u)}})}function Wn(e,n){var i=n.deletions;if(i!==null)for(var o=0;o<i.length;o++){var u=i[o],f=e,y=n,S=y;e:for(;S!==null;){switch(S.tag){case 27:if(Hr(S.type)){Qt=S.stateNode,Qn=!1;break e}break;case 5:Qt=S.stateNode,Qn=!1;break e;case 3:case 4:Qt=S.stateNode.containerInfo,Qn=!0;break e}S=S.return}if(Qt===null)throw Error(s(160));Eg(f,y,u),Qt=null,Qn=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Ng(n,e),n=n.sibling}var Da=null;function Ng(e,n){var i=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wn(n,e),Jn(e),o&4&&(Rr(3,e,e.return),io(3,e),Rr(5,e,e.return));break;case 1:Wn(n,e),Jn(e),o&512&&(gn||i===null||Ga(i,i.return)),o&64&&ur&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var u=Da;if(Wn(n,e),Jn(e),o&512&&(gn||i===null||Ga(i,i.return)),o&4){var f=i!==null?i.memoizedState:null;if(o=e.memoizedState,i===null)if(o===null)if(e.stateNode===null){e:{o=e.type,i=e.memoizedProps,u=u.ownerDocument||u;t:switch(o){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Ye]||f[N]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(o),u.head.insertBefore(f,u.querySelector("head > title"))),Ln(f,o,i),f[N]=e,Gt(f),o=f;break e;case"link":var y=Ny("link","href",u).get(o+(i.href||""));if(y){for(var S=0;S<y.length;S++)if(f=y[S],f.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&f.getAttribute("rel")===(i.rel==null?null:i.rel)&&f.getAttribute("title")===(i.title==null?null:i.title)&&f.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){y.splice(S,1);break t}}f=u.createElement(o),Ln(f,o,i),u.head.appendChild(f);break;case"meta":if(y=Ny("meta","content",u).get(o+(i.content||""))){for(S=0;S<y.length;S++)if(f=y[S],f.getAttribute("content")===(i.content==null?null:""+i.content)&&f.getAttribute("name")===(i.name==null?null:i.name)&&f.getAttribute("property")===(i.property==null?null:i.property)&&f.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&f.getAttribute("charset")===(i.charSet==null?null:i.charSet)){y.splice(S,1);break t}}f=u.createElement(o),Ln(f,o,i),u.head.appendChild(f);break;default:throw Error(s(468,o))}f[N]=e,Gt(f),o=f}e.stateNode=o}else Oy(u,e.type,e.stateNode);else e.stateNode=Ty(u,o,e.memoizedProps);else f!==o?(f===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):f.count--,o===null?Oy(u,e.type,e.stateNode):Ty(u,o,e.memoizedProps)):o===null&&e.stateNode!==null&&vd(e,e.memoizedProps,i.memoizedProps)}break;case 27:Wn(n,e),Jn(e),o&512&&(gn||i===null||Ga(i,i.return)),i!==null&&o&4&&vd(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Wn(n,e),Jn(e),o&512&&(gn||i===null||Ga(i,i.return)),e.flags&32){u=e.stateNode;try{Di(u,"")}catch(ze){Mt(e,e.return,ze)}}o&4&&e.stateNode!=null&&(u=e.memoizedProps,vd(e,u,i!==null?i.memoizedProps:u)),o&1024&&(Sd=!0);break;case 6:if(Wn(n,e),Jn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,i=e.stateNode;try{i.nodeValue=o}catch(ze){Mt(e,e.return,ze)}}break;case 3:if(Zl=null,u=Da,Da=Pl(n.containerInfo),Wn(n,e),Da=u,Jn(e),o&4&&i!==null&&i.memoizedState.isDehydrated)try{cs(n.containerInfo)}catch(ze){Mt(e,e.return,ze)}Sd&&(Sd=!1,Og(e));break;case 4:o=Da,Da=Pl(e.stateNode.containerInfo),Wn(n,e),Jn(e),Da=o;break;case 12:Wn(n,e),Jn(e);break;case 31:Wn(n,e),Jn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Dl(e,o)));break;case 13:Wn(n,e),Jn(e),e.child.flags&8192&&e.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Rl=A()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Dl(e,o)));break;case 22:u=e.memoizedState!==null;var O=i!==null&&i.memoizedState!==null,$=ur,ae=gn;if(ur=$||u,gn=ae||O,Wn(n,e),gn=ae,ur=$,Jn(e),o&8192)e:for(n=e.stateNode,n._visibility=u?n._visibility&-2:n._visibility|1,u&&(i===null||O||ur||gn||bi(e)),i=null,n=e;;){if(n.tag===5||n.tag===26){if(i===null){O=i=n;try{if(f=O.stateNode,u)y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{S=O.stateNode;var le=O.memoizedProps.style,V=le!=null&&le.hasOwnProperty("display")?le.display:null;S.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ze){Mt(O,O.return,ze)}}}else if(n.tag===6){if(i===null){O=n;try{O.stateNode.nodeValue=u?"":O.memoizedProps}catch(ze){Mt(O,O.return,ze)}}}else if(n.tag===18){if(i===null){O=n;try{var X=O.stateNode;u?yy(X,!0):yy(O.stateNode,!1)}catch(ze){Mt(O,O.return,ze)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;i===n&&(i=null),n=n.return}i===n&&(i=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Dl(e,i))));break;case 19:Wn(n,e),Jn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,Dl(e,o)));break;case 30:break;case 21:break;default:Wn(n,e),Jn(e)}}function Jn(e){var n=e.flags;if(n&2){try{for(var i,o=e.return;o!==null;){if(bg(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var u=i.stateNode,f=bd(e);_l(e,f,u);break;case 5:var y=i.stateNode;i.flags&32&&(Di(y,""),i.flags&=-33);var S=bd(e);_l(e,S,y);break;case 3:case 4:var O=i.stateNode.containerInfo,$=bd(e);wd(e,$,O);break;default:throw Error(s(161))}}catch(ae){Mt(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function Og(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;Og(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function fr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)xg(e,n.alternate,n),n=n.sibling}function bi(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Rr(4,n,n.return),bi(n);break;case 1:Ga(n,n.return);var i=n.stateNode;typeof i.componentWillUnmount=="function"&&yg(n,n.return,i),bi(n);break;case 27:go(n.stateNode);case 26:case 5:Ga(n,n.return),bi(n);break;case 22:n.memoizedState===null&&bi(n);break;case 30:bi(n);break;default:bi(n)}e=e.sibling}}function hr(e,n,i){for(i=i&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,u=e,f=n,y=f.flags;switch(f.tag){case 0:case 11:case 15:hr(u,f,i),io(4,f);break;case 1:if(hr(u,f,i),o=f,u=o.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch($){Mt(o,o.return,$)}if(o=f,u=o.updateQueue,u!==null){var S=o.stateNode;try{var O=u.shared.hiddenCallbacks;if(O!==null)for(u.shared.hiddenCallbacks=null,u=0;u<O.length;u++)im(O[u],S)}catch($){Mt(o,o.return,$)}}i&&y&64&&gg(f),so(f,f.return);break;case 27:wg(f);case 26:case 5:hr(u,f,i),i&&o===null&&y&4&&vg(f),so(f,f.return);break;case 12:hr(u,f,i);break;case 31:hr(u,f,i),i&&y&4&&Cg(u,f);break;case 13:hr(u,f,i),i&&y&4&&Tg(u,f);break;case 22:f.memoizedState===null&&hr(u,f,i),so(f,f.return);break;case 30:break;default:hr(u,f,i)}n=n.sibling}}function xd(e,n){var i=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==i&&(e!=null&&e.refCount++,i!=null&&Ps(i))}function kd(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ps(e))}function Ma(e,n,i,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jg(e,n,i,o),n=n.sibling}function jg(e,n,i,o){var u=n.flags;switch(n.tag){case 0:case 11:case 15:Ma(e,n,i,o),u&2048&&io(9,n);break;case 1:Ma(e,n,i,o);break;case 3:Ma(e,n,i,o),u&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Ps(e)));break;case 12:if(u&2048){Ma(e,n,i,o),e=n.stateNode;try{var f=n.memoizedProps,y=f.id,S=f.onPostCommit;typeof S=="function"&&S(y,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(O){Mt(n,n.return,O)}}else Ma(e,n,i,o);break;case 31:Ma(e,n,i,o);break;case 13:Ma(e,n,i,o);break;case 23:break;case 22:f=n.stateNode,y=n.alternate,n.memoizedState!==null?f._visibility&2?Ma(e,n,i,o):oo(e,n):f._visibility&2?Ma(e,n,i,o):(f._visibility|=2,Wi(e,n,i,o,(n.subtreeFlags&10256)!==0||!1)),u&2048&&xd(y,n);break;case 24:Ma(e,n,i,o),u&2048&&kd(n.alternate,n);break;default:Ma(e,n,i,o)}}function Wi(e,n,i,o,u){for(u=u&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var f=e,y=n,S=i,O=o,$=y.flags;switch(y.tag){case 0:case 11:case 15:Wi(f,y,S,O,u),io(8,y);break;case 23:break;case 22:var ae=y.stateNode;y.memoizedState!==null?ae._visibility&2?Wi(f,y,S,O,u):oo(f,y):(ae._visibility|=2,Wi(f,y,S,O,u)),u&&$&2048&&xd(y.alternate,y);break;case 24:Wi(f,y,S,O,u),u&&$&2048&&kd(y.alternate,y);break;default:Wi(f,y,S,O,u)}n=n.sibling}}function oo(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var i=e,o=n,u=o.flags;switch(o.tag){case 22:oo(i,o),u&2048&&xd(o.alternate,o);break;case 24:oo(i,o),u&2048&&kd(o.alternate,o);break;default:oo(i,o)}n=n.sibling}}var lo=8192;function Ji(e,n,i){if(e.subtreeFlags&lo)for(e=e.child;e!==null;)Ag(e,n,i),e=e.sibling}function Ag(e,n,i){switch(e.tag){case 26:Ji(e,n,i),e.flags&lo&&e.memoizedState!==null&&Fx(i,Da,e.memoizedState,e.memoizedProps);break;case 5:Ji(e,n,i);break;case 3:case 4:var o=Da;Da=Pl(e.stateNode.containerInfo),Ji(e,n,i),Da=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=lo,lo=16777216,Ji(e,n,i),lo=o):Ji(e,n,i));break;default:Ji(e,n,i)}}function _g(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function co(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Tn=o,Mg(o,e)}_g(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dg(e),e=e.sibling}function Dg(e){switch(e.tag){case 0:case 11:case 15:co(e),e.flags&2048&&Rr(9,e,e.return);break;case 3:co(e);break;case 12:co(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Ml(e)):co(e);break;default:co(e)}}function Ml(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];Tn=o,Mg(o,e)}_g(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Rr(8,n,n.return),Ml(n);break;case 22:i=n.stateNode,i._visibility&2&&(i._visibility&=-3,Ml(n));break;default:Ml(n)}e=e.sibling}}function Mg(e,n){for(;Tn!==null;){var i=Tn;switch(i.tag){case 0:case 11:case 15:Rr(8,i,n);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Ps(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Tn=o;else e:for(i=e;Tn!==null;){o=Tn;var u=o.sibling,f=o.return;if(kg(o),o===i){Tn=null;break e}if(u!==null){u.return=f,Tn=u;break e}Tn=f}}}var lx={getCacheForType:function(e){var n=Rn(hn),i=n.data.get(e);return i===void 0&&(i=e(),n.data.set(e,i)),i},cacheSignal:function(){return Rn(hn).controller.signal}},cx=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ht=null,ct=null,dt=0,Dt=0,ua=null,zr=!1,es=!1,Ed=!1,pr=0,cn=0,Lr=0,wi=0,Cd=0,da=0,ts=0,uo=null,ea=null,Td=!1,Rl=0,Rg=0,zl=1/0,Ll=null,Br=null,Sn=0,Ir=null,ns=null,mr=0,Nd=0,Od=null,zg=null,fo=0,jd=null;function fa(){return(Tt&2)!==0&&dt!==0?dt&-dt:q.T!==null?zd():en()}function Lg(){if(da===0)if((dt&536870912)===0||mt){var e=qe;qe<<=1,(qe&3932160)===0&&(qe=262144),da=e}else da=536870912;return e=la.current,e!==null&&(e.flags|=32),da}function ta(e,n,i){(e===Ht&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)&&(as(e,0),$r(e,dt,da,!1)),on(e,i),((Tt&2)===0||e!==Ht)&&(e===Ht&&((Tt&2)===0&&(wi|=i),cn===4&&$r(e,dt,da,!1)),qa(e))}function Bg(e,n,i){if((Tt&6)!==0)throw Error(s(327));var o=!i&&(n&127)===0&&(n&e.expiredLanes)===0||Et(e,n),u=o?fx(e,n):_d(e,n,!0),f=o;do{if(u===0){es&&!o&&$r(e,n,0,!1);break}else{if(i=e.current.alternate,f&&!ux(i)){u=_d(e,n,!1),f=!1;continue}if(u===2){if(f=n,e.errorRecoveryDisabledLanes&f)var y=0;else y=e.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){n=y;e:{var S=e;u=uo;var O=S.current.memoizedState.isDehydrated;if(O&&(as(S,y).flags|=256),y=_d(S,y,!1),y!==2){if(Ed&&!O){S.errorRecoveryDisabledLanes|=f,wi|=f,u=4;break e}f=ea,ea=u,f!==null&&(ea===null?ea=f:ea.push.apply(ea,f))}u=y}if(f=!1,u!==2)continue}}if(u===1){as(e,0),$r(e,n,0,!0);break}e:{switch(o=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:$r(o,n,da,!zr);break e;case 2:ea=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(u=Rl+300-A(),10<u)){if($r(o,n,da,!zr),ot(o,0,!0)!==0)break e;mr=n,o.timeoutHandle=py(Ig.bind(null,o,i,ea,Ll,Td,n,da,wi,ts,zr,f,"Throttled",-0,0),u);break e}Ig(o,i,ea,Ll,Td,n,da,wi,ts,zr,f,null,-0,0)}}break}while(!0);qa(e)}function Ig(e,n,i,o,u,f,y,S,O,$,ae,le,V,X){if(e.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},Ag(n,f,le);var ze=(f&62914560)===f?Rl-A():(f&4194048)===f?Rg-A():0;if(ze=Zx(le,ze),ze!==null){mr=f,e.cancelPendingCommit=ze(Pg.bind(null,e,n,f,i,o,u,y,S,O,ae,le,null,V,X)),$r(e,f,y,!$);return}}Pg(e,n,f,i,o,u,y,S,O)}function ux(e){for(var n=e;;){var i=n.tag;if((i===0||i===11||i===15)&&n.flags&16384&&(i=n.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var u=i[o],f=u.getSnapshot;u=u.value;try{if(!sa(f(),u))return!1}catch{return!1}}if(i=n.child,n.subtreeFlags&16384&&i!==null)i.return=n,n=i;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function $r(e,n,i,o){n&=~Cd,n&=~wi,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var u=n;0<u;){var f=31-Ue(u),y=1<<f;o[f]=-1,u&=~y}i!==0&&Ua(e,i,n)}function Bl(){return(Tt&6)===0?(ho(0),!1):!0}function Ad(){if(ct!==null){if(Dt===0)var e=ct.return;else e=ct,rr=di=null,Pu(e),Fi=null,Zs=0,e=ct;for(;e!==null;)mg(e.alternate,e),e=e.return;ct=null}}function as(e,n){var i=e.timeoutHandle;i!==-1&&(e.timeoutHandle=-1,Ax(i)),i=e.cancelPendingCommit,i!==null&&(e.cancelPendingCommit=null,i()),mr=0,Ad(),Ht=e,ct=i=nr(e.current,null),dt=n,Dt=0,ua=null,zr=!1,es=Et(e,n),Ed=!1,ts=da=Cd=wi=Lr=cn=0,ea=uo=null,Td=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var u=31-Ue(o),f=1<<u;n|=e[u],o&=~f}return pr=n,rl(),i}function $g(e,n){tt=null,q.H=no,n===Pi||n===fl?(n=tm(),Dt=3):n===Ru?(n=tm(),Dt=4):Dt=n===ld?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,ua=n,ct===null&&(cn=1,Tl(e,ya(n,e.current)))}function Ug(){var e=la.current;return e===null?!0:(dt&4194048)===dt?Sa===null:(dt&62914560)===dt||(dt&536870912)!==0?e===Sa:!1}function Hg(){var e=q.H;return q.H=no,e===null?no:e}function Vg(){var e=q.A;return q.A=lx,e}function Il(){cn=4,zr||(dt&4194048)!==dt&&la.current!==null||(es=!0),(Lr&134217727)===0&&(wi&134217727)===0||Ht===null||$r(Ht,dt,da,!1)}function _d(e,n,i){var o=Tt;Tt|=2;var u=Hg(),f=Vg();(Ht!==e||dt!==n)&&(Ll=null,as(e,n)),n=!1;var y=cn;e:do try{if(Dt!==0&&ct!==null){var S=ct,O=ua;switch(Dt){case 8:Ad(),y=6;break e;case 3:case 2:case 9:case 6:la.current===null&&(n=!0);var $=Dt;if(Dt=0,ua=null,rs(e,S,O,$),i&&es){y=0;break e}break;default:$=Dt,Dt=0,ua=null,rs(e,S,O,$)}}dx(),y=cn;break}catch(ae){$g(e,ae)}while(!0);return n&&e.shellSuspendCounter++,rr=di=null,Tt=o,q.H=u,q.A=f,ct===null&&(Ht=null,dt=0,rl()),y}function dx(){for(;ct!==null;)Gg(ct)}function fx(e,n){var i=Tt;Tt|=2;var o=Hg(),u=Vg();Ht!==e||dt!==n?(Ll=null,zl=A()+500,as(e,n)):es=Et(e,n);e:do try{if(Dt!==0&&ct!==null){n=ct;var f=ua;t:switch(Dt){case 1:Dt=0,ua=null,rs(e,n,f,1);break;case 2:case 9:if(Jp(f)){Dt=0,ua=null,qg(n);break}n=function(){Dt!==2&&Dt!==9||Ht!==e||(Dt=7),qa(e)},f.then(n,n);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:Jp(f)?(Dt=0,ua=null,qg(n)):(Dt=0,ua=null,rs(e,n,f,7));break;case 5:var y=null;switch(ct.tag){case 26:y=ct.memoizedState;case 5:case 27:var S=ct;if(y?jy(y):S.stateNode.complete){Dt=0,ua=null;var O=S.sibling;if(O!==null)ct=O;else{var $=S.return;$!==null?(ct=$,$l($)):ct=null}break t}}Dt=0,ua=null,rs(e,n,f,5);break;case 6:Dt=0,ua=null,rs(e,n,f,6);break;case 8:Ad(),cn=6;break e;default:throw Error(s(462))}}hx();break}catch(ae){$g(e,ae)}while(!0);return rr=di=null,q.H=o,q.A=u,Tt=i,ct!==null?0:(Ht=null,dt=0,rl(),cn)}function hx(){for(;ct!==null&&!Z();)Gg(ct)}function Gg(e){var n=hg(e.alternate,e,pr);e.memoizedProps=e.pendingProps,n===null?$l(e):ct=n}function qg(e){var n=e,i=n.alternate;switch(n.tag){case 15:case 0:n=og(i,n,n.pendingProps,n.type,void 0,dt);break;case 11:n=og(i,n,n.pendingProps,n.type.render,n.ref,dt);break;case 5:Pu(n);default:mg(i,n),n=ct=Vp(n,pr),n=hg(i,n,pr)}e.memoizedProps=e.pendingProps,n===null?$l(e):ct=n}function rs(e,n,i,o){rr=di=null,Pu(n),Fi=null,Zs=0;var u=n.return;try{if(tx(e,u,n,i,dt)){cn=1,Tl(e,ya(i,e.current)),ct=null;return}}catch(f){if(u!==null)throw ct=u,f;cn=1,Tl(e,ya(i,e.current)),ct=null;return}n.flags&32768?(mt||o===1?e=!0:es||(dt&536870912)!==0?e=!1:(zr=e=!0,(o===2||o===9||o===3||o===6)&&(o=la.current,o!==null&&o.tag===13&&(o.flags|=16384))),Yg(n,e)):$l(n)}function $l(e){var n=e;do{if((n.flags&32768)!==0){Yg(n,zr);return}e=n.return;var i=rx(n.alternate,n,pr);if(i!==null){ct=i;return}if(n=n.sibling,n!==null){ct=n;return}ct=n=e}while(n!==null);cn===0&&(cn=5)}function Yg(e,n){do{var i=ix(e.alternate,e);if(i!==null){i.flags&=32767,ct=i;return}if(i=e.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!n&&(e=e.sibling,e!==null)){ct=e;return}ct=e=i}while(e!==null);cn=6,ct=null}function Pg(e,n,i,o,u,f,y,S,O){e.cancelPendingCommit=null;do Ul();while(Sn!==0);if((Tt&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(f=n.lanes|n.childLanes,f|=bu,Wa(e,i,f,y,S,O),e===Ht&&(ct=Ht=null,dt=0),ns=n,Ir=e,mr=i,Nd=f,Od=u,zg=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,yx(C,function(){return Qg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=q.T,q.T=null,u=he.p,he.p=2,y=Tt,Tt|=4;try{sx(e,n,i)}finally{Tt=y,he.p=u,q.T=o}}Sn=1,Fg(),Zg(),Xg()}}function Fg(){if(Sn===1){Sn=0;var e=Ir,n=ns,i=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||i){i=q.T,q.T=null;var o=he.p;he.p=2;var u=Tt;Tt|=4;try{Ng(n,e);var f=Gd,y=Mp(e.containerInfo),S=f.focusedElem,O=f.selectionRange;if(y!==S&&S&&S.ownerDocument&&Dp(S.ownerDocument.documentElement,S)){if(O!==null&&pu(S)){var $=O.start,ae=O.end;if(ae===void 0&&(ae=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(ae,S.value.length);else{var le=S.ownerDocument||document,V=le&&le.defaultView||window;if(V.getSelection){var X=V.getSelection(),ze=S.textContent.length,Ge=Math.min(O.start,ze),It=O.end===void 0?Ge:Math.min(O.end,ze);!X.extend&&Ge>It&&(y=It,It=Ge,Ge=y);var z=_p(S,Ge),R=_p(S,It);if(z&&R&&(X.rangeCount!==1||X.anchorNode!==z.node||X.anchorOffset!==z.offset||X.focusNode!==R.node||X.focusOffset!==R.offset)){var I=le.createRange();I.setStart(z.node,z.offset),X.removeAllRanges(),Ge>It?(X.addRange(I),X.extend(R.node,R.offset)):(I.setEnd(R.node,R.offset),X.addRange(I))}}}}for(le=[],X=S;X=X.parentNode;)X.nodeType===1&&le.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<le.length;S++){var re=le[S];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}Wl=!!Vd,Gd=Vd=null}finally{Tt=u,he.p=o,q.T=i}}e.current=n,Sn=2}}function Zg(){if(Sn===2){Sn=0;var e=Ir,n=ns,i=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||i){i=q.T,q.T=null;var o=he.p;he.p=2;var u=Tt;Tt|=4;try{xg(e,n.alternate,n)}finally{Tt=u,he.p=o,q.T=i}}Sn=3}}function Xg(){if(Sn===4||Sn===3){Sn=0,ie();var e=Ir,n=ns,i=mr,o=zg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Sn=5:(Sn=0,ns=Ir=null,Kg(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Br=null),xr(i),n=n.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(be,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=q.T,u=he.p,he.p=2,q.T=null;try{for(var f=e.onRecoverableError,y=0;y<o.length;y++){var S=o[y];f(S.value,{componentStack:S.stack})}}finally{q.T=n,he.p=u}}(mr&3)!==0&&Ul(),qa(e),u=e.pendingLanes,(i&261930)!==0&&(u&42)!==0?e===jd?fo++:(fo=0,jd=e):fo=0,ho(0)}}function Kg(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Ps(n)))}function Ul(){return Fg(),Zg(),Xg(),Qg()}function Qg(){if(Sn!==5)return!1;var e=Ir,n=Nd;Nd=0;var i=xr(mr),o=q.T,u=he.p;try{he.p=32>i?32:i,q.T=null,i=Od,Od=null;var f=Ir,y=mr;if(Sn=0,ns=Ir=null,mr=0,(Tt&6)!==0)throw Error(s(331));var S=Tt;if(Tt|=4,Dg(f.current),jg(f,f.current,y,i),Tt=S,ho(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(be,f)}catch{}return!0}finally{he.p=u,q.T=o,Kg(e,n)}}function Wg(e,n,i){n=ya(i,n),n=od(e.stateNode,n,2),e=_r(e,n,2),e!==null&&(on(e,2),qa(e))}function Mt(e,n,i){if(e.tag===3)Wg(e,e,i);else for(;n!==null;){if(n.tag===3){Wg(n,e,i);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Br===null||!Br.has(o))){e=ya(i,e),i=Jm(2),o=_r(n,i,2),o!==null&&(eg(i,o,n,e),on(o,2),qa(o));break}}n=n.return}}function Dd(e,n,i){var o=e.pingCache;if(o===null){o=e.pingCache=new cx;var u=new Set;o.set(n,u)}else u=o.get(n),u===void 0&&(u=new Set,o.set(n,u));u.has(i)||(Ed=!0,u.add(i),e=px.bind(null,e,n,i),n.then(e,e))}function px(e,n,i){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,Ht===e&&(dt&i)===i&&(cn===4||cn===3&&(dt&62914560)===dt&&300>A()-Rl?(Tt&2)===0&&as(e,0):Cd|=i,ts===dt&&(ts=0)),qa(e)}function Jg(e,n){n===0&&(n=$n()),e=li(e,n),e!==null&&(on(e,n),qa(e))}function mx(e){var n=e.memoizedState,i=0;n!==null&&(i=n.retryLane),Jg(e,i)}function gx(e,n){var i=0;switch(e.tag){case 31:case 13:var o=e.stateNode,u=e.memoizedState;u!==null&&(i=u.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Jg(e,i)}function yx(e,n){return sn(e,n)}var Hl=null,is=null,Md=!1,Vl=!1,Rd=!1,Ur=0;function qa(e){e!==is&&e.next===null&&(is===null?Hl=is=e:is=is.next=e),Vl=!0,Md||(Md=!0,bx())}function ho(e,n){if(!Rd&&Vl){Rd=!0;do for(var i=!1,o=Hl;o!==null;){if(e!==0){var u=o.pendingLanes;if(u===0)var f=0;else{var y=o.suspendedLanes,S=o.pingedLanes;f=(1<<31-Ue(42|e)+1)-1,f&=u&~(y&~S),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(i=!0,ay(o,f))}else f=dt,f=ot(o,o===Ht?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(f&3)===0||Et(o,f)||(i=!0,ay(o,f));o=o.next}while(i);Rd=!1}}function vx(){ey()}function ey(){Vl=Md=!1;var e=0;Ur!==0&&jx()&&(e=Ur);for(var n=A(),i=null,o=Hl;o!==null;){var u=o.next,f=ty(o,n);f===0?(o.next=null,i===null?Hl=u:i.next=u,u===null&&(is=i)):(i=o,(e!==0||(f&3)!==0)&&(Vl=!0)),o=u}Sn!==0&&Sn!==5||ho(e),Ur!==0&&(Ur=0)}function ty(e,n){for(var i=e.suspendedLanes,o=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var y=31-Ue(f),S=1<<y,O=u[y];O===-1?((S&i)===0||(S&o)!==0)&&(u[y]=kn(S,n)):O<=n&&(e.expiredLanes|=S),f&=~S}if(n=Ht,i=dt,i=ot(e,e===n?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,i===0||e===n&&(Dt===2||Dt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&An(o),e.callbackNode=null,e.callbackPriority=0;if((i&3)===0||Et(e,i)){if(n=i&-i,n===e.callbackPriority)return n;switch(o!==null&&An(o),xr(i)){case 2:case 8:i=Y;break;case 32:i=C;break;case 268435456:i=ue;break;default:i=C}return o=ny.bind(null,e),i=sn(i,o),e.callbackPriority=n,e.callbackNode=i,n}return o!==null&&o!==null&&An(o),e.callbackPriority=2,e.callbackNode=null,2}function ny(e,n){if(Sn!==0&&Sn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(Ul()&&e.callbackNode!==i)return null;var o=dt;return o=ot(e,e===Ht?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Bg(e,o,n),ty(e,A()),e.callbackNode!=null&&e.callbackNode===i?ny.bind(null,e):null)}function ay(e,n){if(Ul())return null;Bg(e,n,!0)}function bx(){_x(function(){(Tt&6)!==0?sn(ne,vx):ey()})}function zd(){if(Ur===0){var e=qi;e===0&&(e=kt,kt<<=1,(kt&261888)===0&&(kt=256)),Ur=e}return Ur}function ry(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ko(""+e)}function iy(e,n){var i=n.ownerDocument.createElement("input");return i.name=n.name,i.value=n.value,e.id&&i.setAttribute("form",e.id),n.parentNode.insertBefore(i,n),e=new FormData(e),i.parentNode.removeChild(i),e}function wx(e,n,i,o,u){if(n==="submit"&&i&&i.stateNode===u){var f=ry((u[j]||null).action),y=o.submitter;y&&(n=(n=y[j]||null)?ry(n.formAction):y.getAttribute("formAction"),n!==null&&(f=n,y=null));var S=new el("action","action",null,o,u);e.push({event:S,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Ur!==0){var O=y?iy(u,y):new FormData(u);td(i,{pending:!0,data:O,method:u.method,action:f},null,O)}}else typeof f=="function"&&(S.preventDefault(),O=y?iy(u,y):new FormData(u),td(i,{pending:!0,data:O,method:u.method,action:f},f,O))},currentTarget:u}]})}}for(var Ld=0;Ld<vu.length;Ld++){var Bd=vu[Ld],Sx=Bd.toLowerCase(),xx=Bd[0].toUpperCase()+Bd.slice(1);_a(Sx,"on"+xx)}_a(Lp,"onAnimationEnd"),_a(Bp,"onAnimationIteration"),_a(Ip,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(IS,"onTransitionRun"),_a($S,"onTransitionStart"),_a(US,"onTransitionCancel"),_a($p,"onTransitionEnd"),de("onMouseEnter",["mouseout","mouseover"]),de("onMouseLeave",["mouseout","mouseover"]),de("onPointerEnter",["pointerout","pointerover"]),de("onPointerLeave",["pointerout","pointerover"]),P("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),P("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),P("onBeforeInput",["compositionend","keypress","textInput","paste"]),P("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),P("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),P("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(po));function sy(e,n){n=(n&4)!==0;for(var i=0;i<e.length;i++){var o=e[i],u=o.event;o=o.listeners;e:{var f=void 0;if(n)for(var y=o.length-1;0<=y;y--){var S=o[y],O=S.instance,$=S.currentTarget;if(S=S.listener,O!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=$;try{f(u)}catch(ae){al(ae)}u.currentTarget=null,f=O}else for(y=0;y<o.length;y++){if(S=o[y],O=S.instance,$=S.currentTarget,S=S.listener,O!==f&&u.isPropagationStopped())break e;f=S,u.currentTarget=$;try{f(u)}catch(ae){al(ae)}u.currentTarget=null,f=O}}}}function ut(e,n){var i=n[se];i===void 0&&(i=n[se]=new Set);var o=e+"__bubble";i.has(o)||(oy(n,e,2,!1),i.add(o))}function Id(e,n,i){var o=0;n&&(o|=4),oy(i,e,o,n)}var Gl="_reactListening"+Math.random().toString(36).slice(2);function $d(e){if(!e[Gl]){e[Gl]=!0,Xo.forEach(function(i){i!=="selectionchange"&&(kx.has(i)||Id(i,!1,e),Id(i,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Gl]||(n[Gl]=!0,Id("selectionchange",!1,n))}}function oy(e,n,i,o){switch(Ly(n)){case 2:var u=Qx;break;case 8:u=Wx;break;default:u=ef}i=u.bind(null,n,i,e),u=void 0,!iu||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(u=!0),o?u!==void 0?e.addEventListener(n,i,{capture:!0,passive:u}):e.addEventListener(n,i,!0):u!==void 0?e.addEventListener(n,i,{passive:u}):e.addEventListener(n,i,!1)}function Ud(e,n,i,o,u){var f=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var y=o.tag;if(y===3||y===4){var S=o.stateNode.containerInfo;if(S===u)break;if(y===4)for(y=o.return;y!==null;){var O=y.tag;if((O===3||O===4)&&y.stateNode.containerInfo===u)return;y=y.return}for(;S!==null;){if(y=Ct(S),y===null)return;if(O=y.tag,O===5||O===6||O===26||O===27){o=f=y;continue e}S=S.parentNode}}o=o.return}fp(function(){var $=f,ae=au(i),le=[];e:{var V=Up.get(e);if(V!==void 0){var X=el,ze=e;switch(e){case"keypress":if(Wo(i)===0)break e;case"keydown":case"keyup":X=gS;break;case"focusin":ze="focus",X=cu;break;case"focusout":ze="blur",X=cu;break;case"beforeblur":case"afterblur":X=cu;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=mp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=rS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=bS;break;case Lp:case Bp:case Ip:X=oS;break;case $p:X=SS;break;case"scroll":case"scrollend":X=nS;break;case"wheel":X=kS;break;case"copy":case"cut":case"paste":X=cS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=yp;break;case"toggle":case"beforetoggle":X=CS}var Ge=(n&4)!==0,It=!Ge&&(e==="scroll"||e==="scrollend"),z=Ge?V!==null?V+"Capture":null:V;Ge=[];for(var R=$,I;R!==null;){var re=R;if(I=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||I===null||z===null||(re=zs(R,z),re!=null&&Ge.push(mo(R,re,I))),It)break;R=R.return}0<Ge.length&&(V=new X(V,ze,null,i,ae),le.push({event:V,listeners:Ge}))}}if((n&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",X=e==="mouseout"||e==="pointerout",V&&i!==nu&&(ze=i.relatedTarget||i.fromElement)&&(Ct(ze)||ze[W]))break e;if((X||V)&&(V=ae.window===ae?ae:(V=ae.ownerDocument)?V.defaultView||V.parentWindow:window,X?(ze=i.relatedTarget||i.toElement,X=$,ze=ze?Ct(ze):null,ze!==null&&(It=c(ze),Ge=ze.tag,ze!==It||Ge!==5&&Ge!==27&&Ge!==6)&&(ze=null)):(X=null,ze=$),X!==ze)){if(Ge=mp,re="onMouseLeave",z="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=yp,re="onPointerLeave",z="onPointerEnter",R="pointer"),It=X==null?V:ra(X),I=ze==null?V:ra(ze),V=new Ge(re,R+"leave",X,i,ae),V.target=It,V.relatedTarget=I,re=null,Ct(ae)===$&&(Ge=new Ge(z,R+"enter",ze,i,ae),Ge.target=I,Ge.relatedTarget=It,re=Ge),It=re,X&&ze)t:{for(Ge=Ex,z=X,R=ze,I=0,re=z;re;re=Ge(re))I++;re=0;for(var He=R;He;He=Ge(He))re++;for(;0<I-re;)z=Ge(z),I--;for(;0<re-I;)R=Ge(R),re--;for(;I--;){if(z===R||R!==null&&z===R.alternate){Ge=z;break t}z=Ge(z),R=Ge(R)}Ge=null}else Ge=null;X!==null&&ly(le,V,X,Ge,!1),ze!==null&&It!==null&&ly(le,It,ze,Ge,!0)}}e:{if(V=$?ra($):window,X=V.nodeName&&V.nodeName.toLowerCase(),X==="select"||X==="input"&&V.type==="file")var wt=Cp;else if(kp(V))if(Tp)wt=zS;else{wt=MS;var Le=DS}else X=V.nodeName,!X||X.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?$&&tu($.elementType)&&(wt=Cp):wt=RS;if(wt&&(wt=wt(e,$))){Ep(le,wt,i,ae);break e}Le&&Le(e,V,$),e==="focusout"&&$&&V.type==="number"&&$.memoizedProps.value!=null&&eu(V,"number",V.value)}switch(Le=$?ra($):window,e){case"focusin":(kp(Le)||Le.contentEditable==="true")&&(Li=Le,mu=$,Gs=null);break;case"focusout":Gs=mu=Li=null;break;case"mousedown":gu=!0;break;case"contextmenu":case"mouseup":case"dragend":gu=!1,Rp(le,i,ae);break;case"selectionchange":if(BS)break;case"keydown":case"keyup":Rp(le,i,ae)}var at;if(du)e:{switch(e){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else zi?Sp(e,i)&&(ft="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(ft="onCompositionStart");ft&&(vp&&i.locale!=="ko"&&(zi||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&zi&&(at=hp()):(Er=ae,su="value"in Er?Er.value:Er.textContent,zi=!0)),Le=ql($,ft),0<Le.length&&(ft=new gp(ft,e,null,i,ae),le.push({event:ft,listeners:Le}),at?ft.data=at:(at=xp(i),at!==null&&(ft.data=at)))),(at=NS?OS(e,i):jS(e,i))&&(ft=ql($,"onBeforeInput"),0<ft.length&&(Le=new gp("onBeforeInput","beforeinput",null,i,ae),le.push({event:Le,listeners:ft}),Le.data=at)),wx(le,e,$,i,ae)}sy(le,n)})}function mo(e,n,i){return{instance:e,listener:n,currentTarget:i}}function ql(e,n){for(var i=n+"Capture",o=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=zs(e,i),u!=null&&o.unshift(mo(e,u,f)),u=zs(e,n),u!=null&&o.push(mo(e,u,f))),e.tag===3)return o;e=e.return}return[]}function Ex(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ly(e,n,i,o,u){for(var f=n._reactName,y=[];i!==null&&i!==o;){var S=i,O=S.alternate,$=S.stateNode;if(S=S.tag,O!==null&&O===o)break;S!==5&&S!==26&&S!==27||$===null||(O=$,u?($=zs(i,f),$!=null&&y.unshift(mo(i,$,O))):u||($=zs(i,f),$!=null&&y.push(mo(i,$,O)))),i=i.return}y.length!==0&&e.push({event:n,listeners:y})}var Cx=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function cy(e){return(typeof e=="string"?e:""+e).replace(Cx,`
`).replace(Tx,"")}function uy(e,n){return n=cy(n),cy(e)===n}function Bt(e,n,i,o,u,f){switch(i){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Di(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Di(e,""+o);break;case"className":nn(e,"class",o);break;case"tabIndex":nn(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":nn(e,i,o);break;case"style":up(e,o,f);break;case"data":if(n!=="object"){nn(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||i!=="href")){e.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Ko(""+o),e.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(i==="formAction"?(n!=="input"&&Bt(e,n,"name",u.name,u,null),Bt(e,n,"formEncType",u.formEncType,u,null),Bt(e,n,"formMethod",u.formMethod,u,null),Bt(e,n,"formTarget",u.formTarget,u,null)):(Bt(e,n,"encType",u.encType,u,null),Bt(e,n,"method",u.method,u,null),Bt(e,n,"target",u.target,u,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(i);break}o=Ko(""+o),e.setAttribute(i,o);break;case"onClick":o!=null&&(e.onclick=er);break;case"onScroll":o!=null&&ut("scroll",e);break;case"onScrollEnd":o!=null&&ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}i=Ko(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""+o):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":o===!0?e.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(i,o):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(i,o):e.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(i):e.setAttribute(i,o);break;case"popover":ut("beforetoggle",e),ut("toggle",e),Ut(e,"popover",o);break;case"xlinkActuate":_t(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":_t(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":_t(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":_t(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":_t(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":_t(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":_t(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":_t(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":_t(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Ut(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=eS.get(i)||i,Ut(e,i,o))}}function Hd(e,n,i,o,u,f){switch(i){case"style":up(e,o,f);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=i}}break;case"children":typeof o=="string"?Di(e,o):(typeof o=="number"||typeof o=="bigint")&&Di(e,""+o);break;case"onScroll":o!=null&&ut("scroll",e);break;case"onScrollEnd":o!=null&&ut("scrollend",e);break;case"onClick":o!=null&&(e.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ai.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(u=i.endsWith("Capture"),n=i.slice(2,u?i.length-7:void 0),f=e[j]||null,f=f!=null?f[i]:null,typeof f=="function"&&e.removeEventListener(n,f,u),typeof o=="function")){typeof f!="function"&&f!==null&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(n,o,u);break e}i in e?e[i]=o:o===!0?e.setAttribute(i,""):Ut(e,i,o)}}}function Ln(e,n,i){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",e),ut("load",e);var o=!1,u=!1,f;for(f in i)if(i.hasOwnProperty(f)){var y=i[f];if(y!=null)switch(f){case"src":o=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Bt(e,n,f,y,i,null)}}u&&Bt(e,n,"srcSet",i.srcSet,i,null),o&&Bt(e,n,"src",i.src,i,null);return;case"input":ut("invalid",e);var S=f=y=u=null,O=null,$=null;for(o in i)if(i.hasOwnProperty(o)){var ae=i[o];if(ae!=null)switch(o){case"name":u=ae;break;case"type":y=ae;break;case"checked":O=ae;break;case"defaultChecked":$=ae;break;case"value":f=ae;break;case"defaultValue":S=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,n));break;default:Bt(e,n,o,ae,i,null)}}sp(e,f,S,O,$,y,u,!1);return;case"select":ut("invalid",e),o=y=f=null;for(u in i)if(i.hasOwnProperty(u)&&(S=i[u],S!=null))switch(u){case"value":f=S;break;case"defaultValue":y=S;break;case"multiple":o=S;default:Bt(e,n,u,S,i,null)}n=f,i=y,e.multiple=!!o,n!=null?_i(e,!!o,n,!1):i!=null&&_i(e,!!o,i,!0);return;case"textarea":ut("invalid",e),f=u=o=null;for(y in i)if(i.hasOwnProperty(y)&&(S=i[y],S!=null))switch(y){case"value":o=S;break;case"defaultValue":u=S;break;case"children":f=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:Bt(e,n,y,S,i,null)}lp(e,o,u,f);return;case"option":for(O in i)if(i.hasOwnProperty(O)&&(o=i[O],o!=null))switch(O){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:Bt(e,n,O,o,i,null)}return;case"dialog":ut("beforetoggle",e),ut("toggle",e),ut("cancel",e),ut("close",e);break;case"iframe":case"object":ut("load",e);break;case"video":case"audio":for(o=0;o<po.length;o++)ut(po[o],e);break;case"image":ut("error",e),ut("load",e);break;case"details":ut("toggle",e);break;case"embed":case"source":case"link":ut("error",e),ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:Bt(e,n,$,o,i,null)}return;default:if(tu(n)){for(ae in i)i.hasOwnProperty(ae)&&(o=i[ae],o!==void 0&&Hd(e,n,ae,o,i,void 0));return}}for(S in i)i.hasOwnProperty(S)&&(o=i[S],o!=null&&Bt(e,n,S,o,i,null))}function Nx(e,n,i,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,y=null,S=null,O=null,$=null,ae=null;for(X in i){var le=i[X];if(i.hasOwnProperty(X)&&le!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=le;default:o.hasOwnProperty(X)||Bt(e,n,X,null,o,le)}}for(var V in o){var X=o[V];if(le=i[V],o.hasOwnProperty(V)&&(X!=null||le!=null))switch(V){case"type":f=X;break;case"name":u=X;break;case"checked":$=X;break;case"defaultChecked":ae=X;break;case"value":y=X;break;case"defaultValue":S=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,n));break;default:X!==le&&Bt(e,n,V,X,o,le)}}Jc(e,y,S,O,$,ae,f,u);return;case"select":X=y=S=V=null;for(f in i)if(O=i[f],i.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":X=O;default:o.hasOwnProperty(f)||Bt(e,n,f,null,o,O)}for(u in o)if(f=o[u],O=i[u],o.hasOwnProperty(u)&&(f!=null||O!=null))switch(u){case"value":V=f;break;case"defaultValue":S=f;break;case"multiple":y=f;default:f!==O&&Bt(e,n,u,f,o,O)}n=S,i=y,o=X,V!=null?_i(e,!!i,V,!1):!!o!=!!i&&(n!=null?_i(e,!!i,n,!0):_i(e,!!i,i?[]:"",!1));return;case"textarea":X=V=null;for(S in i)if(u=i[S],i.hasOwnProperty(S)&&u!=null&&!o.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:Bt(e,n,S,null,o,u)}for(y in o)if(u=o[y],f=i[y],o.hasOwnProperty(y)&&(u!=null||f!=null))switch(y){case"value":V=u;break;case"defaultValue":X=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Bt(e,n,y,u,o,f)}op(e,V,X);return;case"option":for(var ze in i)if(V=i[ze],i.hasOwnProperty(ze)&&V!=null&&!o.hasOwnProperty(ze))switch(ze){case"selected":e.selected=!1;break;default:Bt(e,n,ze,null,o,V)}for(O in o)if(V=o[O],X=i[O],o.hasOwnProperty(O)&&V!==X&&(V!=null||X!=null))switch(O){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Bt(e,n,O,V,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in i)V=i[Ge],i.hasOwnProperty(Ge)&&V!=null&&!o.hasOwnProperty(Ge)&&Bt(e,n,Ge,null,o,V);for($ in o)if(V=o[$],X=i[$],o.hasOwnProperty($)&&V!==X&&(V!=null||X!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:Bt(e,n,$,V,o,X)}return;default:if(tu(n)){for(var It in i)V=i[It],i.hasOwnProperty(It)&&V!==void 0&&!o.hasOwnProperty(It)&&Hd(e,n,It,void 0,o,V);for(ae in o)V=o[ae],X=i[ae],!o.hasOwnProperty(ae)||V===X||V===void 0&&X===void 0||Hd(e,n,ae,V,o,X);return}}for(var z in i)V=i[z],i.hasOwnProperty(z)&&V!=null&&!o.hasOwnProperty(z)&&Bt(e,n,z,null,o,V);for(le in o)V=o[le],X=i[le],!o.hasOwnProperty(le)||V===X||V==null&&X==null||Bt(e,n,le,V,o,X)}function dy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ox(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var u=i[o],f=u.transferSize,y=u.initiatorType,S=u.duration;if(f&&S&&dy(y)){for(y=0,S=u.responseEnd,o+=1;o<i.length;o++){var O=i[o],$=O.startTime;if($>S)break;var ae=O.transferSize,le=O.initiatorType;ae&&dy(le)&&(O=O.responseEnd,y+=ae*(O<S?1:(S-$)/(O-$)))}if(--o,n+=8*(f+y)/(u.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Vd=null,Gd=null;function Yl(e){return e.nodeType===9?e:e.ownerDocument}function fy(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hy(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function qd(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Yd=null;function jx(){var e=window.event;return e&&e.type==="popstate"?e===Yd?!1:(Yd=e,!0):(Yd=null,!1)}var py=typeof setTimeout=="function"?setTimeout:void 0,Ax=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,_x=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(e){return my.resolve(null).then(e).catch(Dx)}:py;function Dx(e){setTimeout(function(){throw e})}function Hr(e){return e==="head"}function gy(e,n){var i=n,o=0;do{var u=i.nextSibling;if(e.removeChild(i),u&&u.nodeType===8)if(i=u.data,i==="/$"||i==="/&"){if(o===0){e.removeChild(u),cs(n);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")go(e.ownerDocument.documentElement);else if(i==="head"){i=e.ownerDocument.head,go(i);for(var f=i.firstChild;f;){var y=f.nextSibling,S=f.nodeName;f[Ye]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&f.rel.toLowerCase()==="stylesheet"||i.removeChild(f),f=y}}else i==="body"&&go(e.ownerDocument.body);i=u}while(i);cs(n)}function yy(e,n){var i=e;e=0;do{var o=i.nextSibling;if(i.nodeType===1?n?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(n?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(e===0)break;e--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||e++;i=o}while(i)}function Pd(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var i=n;switch(n=n.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Pd(i),tn(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}e.removeChild(i)}}function Mx(e,n,i,o){for(;e.nodeType===1;){var u=i;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[Ye])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=xa(e.nextSibling),e===null)break}return null}function Rx(e,n,i){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=xa(e.nextSibling),e===null))return null;return e}function vy(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=xa(e.nextSibling),e===null))return null;return e}function Fd(e){return e.data==="$?"||e.data==="$~"}function Zd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function zx(e,n){var i=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||i.readyState!=="loading")n();else{var o=function(){n(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function xa(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Xd=null;function by(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"||i==="/&"){if(n===0)return xa(e.nextSibling);n--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||n++}e=e.nextSibling}return null}function wy(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(n===0)return e;n--}else i!=="/$"&&i!=="/&"||n++}e=e.previousSibling}return null}function Sy(e,n,i){switch(n=Yl(i),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function go(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);tn(e)}var ka=new Map,xy=new Set;function Pl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gr=he.d;he.d={f:Lx,r:Bx,D:Ix,C:$x,L:Ux,m:Hx,X:Gx,S:Vx,M:qx};function Lx(){var e=gr.f(),n=Bl();return e||n}function Bx(e){var n=Pe(e);n!==null&&n.tag===5&&n.type==="form"?$m(n):gr.r(e)}var ss=typeof document>"u"?null:document;function ky(e,n,i){var o=ss;if(o&&typeof n=="string"&&n){var u=ia(n);u='link[rel="'+e+'"][href="'+u+'"]',typeof i=="string"&&(u+='[crossorigin="'+i+'"]'),xy.has(u)||(xy.add(u),e={rel:e,crossOrigin:i,href:n},o.querySelector(u)===null&&(n=o.createElement("link"),Ln(n,"link",e),Gt(n),o.head.appendChild(n)))}}function Ix(e){gr.D(e),ky("dns-prefetch",e,null)}function $x(e,n){gr.C(e,n),ky("preconnect",e,n)}function Ux(e,n,i){gr.L(e,n,i);var o=ss;if(o&&e&&n){var u='link[rel="preload"][as="'+ia(n)+'"]';n==="image"&&i&&i.imageSrcSet?(u+='[imagesrcset="'+ia(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(u+='[imagesizes="'+ia(i.imageSizes)+'"]')):u+='[href="'+ia(e)+'"]';var f=u;switch(n){case"style":f=os(e);break;case"script":f=ls(e)}ka.has(f)||(e=w({rel:"preload",href:n==="image"&&i&&i.imageSrcSet?void 0:e,as:n},i),ka.set(f,e),o.querySelector(u)!==null||n==="style"&&o.querySelector(yo(f))||n==="script"&&o.querySelector(vo(f))||(n=o.createElement("link"),Ln(n,"link",e),Gt(n),o.head.appendChild(n)))}}function Hx(e,n){gr.m(e,n);var i=ss;if(i&&e){var o=n&&typeof n.as=="string"?n.as:"script",u='link[rel="modulepreload"][as="'+ia(o)+'"][href="'+ia(e)+'"]',f=u;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ls(e)}if(!ka.has(f)&&(e=w({rel:"modulepreload",href:e},n),ka.set(f,e),i.querySelector(u)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(vo(f)))return}o=i.createElement("link"),Ln(o,"link",e),Gt(o),i.head.appendChild(o)}}}function Vx(e,n,i){gr.S(e,n,i);var o=ss;if(o&&e){var u=Un(o).hoistableStyles,f=os(e);n=n||"default";var y=u.get(f);if(!y){var S={loading:0,preload:null};if(y=o.querySelector(yo(f)))S.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":n},i),(i=ka.get(f))&&Kd(e,i);var O=y=o.createElement("link");Gt(O),Ln(O,"link",e),O._p=new Promise(function($,ae){O.onload=$,O.onerror=ae}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Fl(y,n,o)}y={type:"stylesheet",instance:y,count:1,state:S},u.set(f,y)}}}function Gx(e,n){gr.X(e,n);var i=ss;if(i&&e){var o=Un(i).hoistableScripts,u=ls(e),f=o.get(u);f||(f=i.querySelector(vo(u)),f||(e=w({src:e,async:!0},n),(n=ka.get(u))&&Qd(e,n),f=i.createElement("script"),Gt(f),Ln(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function qx(e,n){gr.M(e,n);var i=ss;if(i&&e){var o=Un(i).hoistableScripts,u=ls(e),f=o.get(u);f||(f=i.querySelector(vo(u)),f||(e=w({src:e,async:!0,type:"module"},n),(n=ka.get(u))&&Qd(e,n),f=i.createElement("script"),Gt(f),Ln(f,"link",e),i.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},o.set(u,f))}}function Ey(e,n,i,o){var u=(u=fe.current)?Pl(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(n=os(i.href),i=Un(u).hoistableStyles,o=i.get(n),o||(o={type:"style",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){e=os(i.href);var f=Un(u).hoistableStyles,y=f.get(e);if(y||(u=u.ownerDocument||u,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,y),(f=u.querySelector(yo(e)))&&!f._p&&(y.instance=f,y.state.loading=5),ka.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},ka.set(e,i),f||Yx(u,e,i,y.state))),n&&o===null)throw Error(s(528,""));return y}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=i.async,i=i.src,typeof i=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ls(i),i=Un(u).hoistableScripts,o=i.get(n),o||(o={type:"script",instance:null,count:0,state:null},i.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function os(e){return'href="'+ia(e)+'"'}function yo(e){return'link[rel="stylesheet"]['+e+"]"}function Cy(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function Yx(e,n,i,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Ln(n,"link",i),Gt(n),e.head.appendChild(n))}function ls(e){return'[src="'+ia(e)+'"]'}function vo(e){return"script[async]"+e}function Ty(e,n,i){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+ia(i.href)+'"]');if(o)return n.instance=o,Gt(o),o;var u=w({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Gt(o),Ln(o,"style",u),Fl(o,i.precedence,e),n.instance=o;case"stylesheet":u=os(i.href);var f=e.querySelector(yo(u));if(f)return n.state.loading|=4,n.instance=f,Gt(f),f;o=Cy(i),(u=ka.get(u))&&Kd(o,u),f=(e.ownerDocument||e).createElement("link"),Gt(f);var y=f;return y._p=new Promise(function(S,O){y.onload=S,y.onerror=O}),Ln(f,"link",o),n.state.loading|=4,Fl(f,i.precedence,e),n.instance=f;case"script":return f=ls(i.src),(u=e.querySelector(vo(f)))?(n.instance=u,Gt(u),u):(o=i,(u=ka.get(f))&&(o=w({},i),Qd(o,u)),e=e.ownerDocument||e,u=e.createElement("script"),Gt(u),Ln(u,"link",o),e.head.appendChild(u),n.instance=u);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fl(o,i.precedence,e));return n.instance}function Fl(e,n,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=o.length?o[o.length-1]:null,f=u,y=0;y<o.length;y++){var S=o[y];if(S.dataset.precedence===n)f=S;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(n=i.nodeType===9?i.head:i,n.insertBefore(e,n.firstChild))}function Kd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Qd(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Zl=null;function Ny(e,n,i){if(Zl===null){var o=new Map,u=Zl=new Map;u.set(i,o)}else u=Zl,o=u.get(i),o||(o=new Map,u.set(i,o));if(o.has(e))return o;for(o.set(e,null),i=i.getElementsByTagName(e),u=0;u<i.length;u++){var f=i[u];if(!(f[Ye]||f[N]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var y=f.getAttribute(n)||"";y=e+y;var S=o.get(y);S?S.push(f):o.set(y,[f])}}return o}function Oy(e,n,i){e=e.ownerDocument||e,e.head.insertBefore(i,n==="title"?e.querySelector("head > title"):null)}function Px(e,n,i){if(i===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function jy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Fx(e,n,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var u=os(o.href),f=n.querySelector(yo(u));if(f){n=f._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=Xl.bind(e),n.then(e,e)),i.state.loading|=4,i.instance=f,Gt(f);return}f=n.ownerDocument||n,o=Cy(o),(u=ka.get(u))&&Kd(o,u),f=f.createElement("link"),Gt(f);var y=f;y._p=new Promise(function(S,O){y.onload=S,y.onerror=O}),Ln(f,"link",o),i.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(i,n),(n=i.state.preload)&&(i.state.loading&3)===0&&(e.count++,i=Xl.bind(e),n.addEventListener("load",i),n.addEventListener("error",i))}}var Wd=0;function Zx(e,n){return e.stylesheets&&e.count===0&&Ql(e,e.stylesheets),0<e.count||0<e.imgCount?function(i){var o=setTimeout(function(){if(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+n);0<e.imgBytes&&Wd===0&&(Wd=62500*Ox());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ql(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Wd?50:800)+n);return e.unsuspend=i,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(u)}}:null}function Xl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ql(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Kl=null;function Ql(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Kl=new Map,n.forEach(Xx,e),Kl=null,Xl.call(e))}function Xx(e,n){if(!(n.state.loading&4)){var i=Kl.get(e);if(i)var o=i.get(null);else{i=new Map,Kl.set(e,i);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var y=u[f];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(i.set(y.dataset.precedence,y),o=y)}o&&i.set(null,o)}u=n.instance,y=u.getAttribute("data-precedence"),f=i.get(y)||o,f===o&&i.set(null,u),i.set(y,u),this.count++,o=Xl.bind(this),u.addEventListener("load",o),u.addEventListener("error",o),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),n.state.loading|=4}}var bo={$$typeof:L,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function Kx(e,n,i,o,u,f,y,S,O){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Jt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jt(0),this.hiddenUpdates=Jt(null),this.identifierPrefix=o,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Ay(e,n,i,o,u,f,y,S,O,$,ae,le){return e=new Kx(e,n,i,y,O,$,ae,le,S),n=1,f===!0&&(n|=24),f=oa(3,null,null,n),e.current=f,f.stateNode=e,n=_u(),n.refCount++,e.pooledCache=n,n.refCount++,f.memoizedState={element:o,isDehydrated:i,cache:n},zu(f),e}function _y(e){return e?(e=$i,e):$i}function Dy(e,n,i,o,u,f){u=_y(u),o.context===null?o.context=u:o.pendingContext=u,o=Ar(n),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=_r(e,o,n),i!==null&&(ta(i,e,n),Ks(i,e,n))}function My(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<n?i:n}}function Jd(e,n){My(e,n),(e=e.alternate)&&My(e,n)}function Ry(e){if(e.tag===13||e.tag===31){var n=li(e,67108864);n!==null&&ta(n,e,67108864),Jd(e,67108864)}}function zy(e){if(e.tag===13||e.tag===31){var n=fa();n=Zn(n);var i=li(e,n);i!==null&&ta(i,e,n),Jd(e,n)}}var Wl=!0;function Qx(e,n,i,o){var u=q.T;q.T=null;var f=he.p;try{he.p=2,ef(e,n,i,o)}finally{he.p=f,q.T=u}}function Wx(e,n,i,o){var u=q.T;q.T=null;var f=he.p;try{he.p=8,ef(e,n,i,o)}finally{he.p=f,q.T=u}}function ef(e,n,i,o){if(Wl){var u=tf(o);if(u===null)Ud(e,n,o,Jl,i),By(e,o);else if(e2(u,e,n,i,o))o.stopPropagation();else if(By(e,o),n&4&&-1<Jx.indexOf(e)){for(;u!==null;){var f=Pe(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var y=zt(f.pendingLanes);if(y!==0){var S=f;for(S.pendingLanes|=2,S.entangledLanes|=2;y;){var O=1<<31-Ue(y);S.entanglements[1]|=O,y&=~O}qa(f),(Tt&6)===0&&(zl=A()+500,ho(0))}}break;case 31:case 13:S=li(f,2),S!==null&&ta(S,f,2),Bl(),Jd(f,2)}if(f=tf(o),f===null&&Ud(e,n,o,Jl,i),f===u)break;u=f}u!==null&&o.stopPropagation()}else Ud(e,n,o,null,i)}}function tf(e){return e=au(e),nf(e)}var Jl=null;function nf(e){if(Jl=null,e=Ct(e),e!==null){var n=c(e);if(n===null)e=null;else{var i=n.tag;if(i===13){if(e=d(n),e!==null)return e;e=null}else if(i===31){if(e=p(n),e!==null)return e;e=null}else if(i===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Jl=e,null}function Ly(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(K()){case ne:return 2;case Y:return 8;case C:case H:return 32;case ue:return 268435456;default:return 32}default:return 32}}var af=!1,Vr=null,Gr=null,qr=null,wo=new Map,So=new Map,Yr=[],Jx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function By(e,n){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":wo.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(n.pointerId)}}function xo(e,n,i,o,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:n,domEventName:i,eventSystemFlags:o,nativeEvent:f,targetContainers:[u]},n!==null&&(n=Pe(n),n!==null&&Ry(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,u!==null&&n.indexOf(u)===-1&&n.push(u),e)}function e2(e,n,i,o,u){switch(n){case"focusin":return Vr=xo(Vr,e,n,i,o,u),!0;case"dragenter":return Gr=xo(Gr,e,n,i,o,u),!0;case"mouseover":return qr=xo(qr,e,n,i,o,u),!0;case"pointerover":var f=u.pointerId;return wo.set(f,xo(wo.get(f)||null,e,n,i,o,u)),!0;case"gotpointercapture":return f=u.pointerId,So.set(f,xo(So.get(f)||null,e,n,i,o,u)),!0}return!1}function Iy(e){var n=Ct(e.target);if(n!==null){var i=c(n);if(i!==null){if(n=i.tag,n===13){if(n=d(i),n!==null){e.blockedOn=n,Xn(e.priority,function(){zy(i)});return}}else if(n===31){if(n=p(i),n!==null){e.blockedOn=n,Xn(e.priority,function(){zy(i)});return}}else if(n===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ec(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var i=tf(e.nativeEvent);if(i===null){i=e.nativeEvent;var o=new i.constructor(i.type,i);nu=o,i.target.dispatchEvent(o),nu=null}else return n=Pe(i),n!==null&&Ry(n),e.blockedOn=i,!1;n.shift()}return!0}function $y(e,n,i){ec(e)&&i.delete(n)}function t2(){af=!1,Vr!==null&&ec(Vr)&&(Vr=null),Gr!==null&&ec(Gr)&&(Gr=null),qr!==null&&ec(qr)&&(qr=null),wo.forEach($y),So.forEach($y)}function tc(e,n){e.blockedOn===n&&(e.blockedOn=null,af||(af=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,t2)))}var nc=null;function Uy(e){nc!==e&&(nc=e,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){nc===e&&(nc=null);for(var n=0;n<e.length;n+=3){var i=e[n],o=e[n+1],u=e[n+2];if(typeof o!="function"){if(nf(o||i)===null)continue;break}var f=Pe(i);f!==null&&(e.splice(n,3),n-=3,td(f,{pending:!0,data:u,method:i.method,action:o},o,u))}}))}function cs(e){function n(O){return tc(O,e)}Vr!==null&&tc(Vr,e),Gr!==null&&tc(Gr,e),qr!==null&&tc(qr,e),wo.forEach(n),So.forEach(n);for(var i=0;i<Yr.length;i++){var o=Yr[i];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Yr.length&&(i=Yr[0],i.blockedOn===null);)Iy(i),i.blockedOn===null&&Yr.shift();if(i=(e.ownerDocument||e).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var u=i[o],f=i[o+1],y=u[j]||null;if(typeof f=="function")y||Uy(i);else if(y){var S=null;if(f&&f.hasAttribute("formAction")){if(u=f,y=f[j]||null)S=y.formAction;else if(nf(u)!==null)continue}else S=y.action;typeof S=="function"?i[o+1]=S:(i.splice(o,3),o-=3),Uy(i)}}}function Hy(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(y){return u=y})},focusReset:"manual",scroll:"manual"})}function n(){u!==null&&(u(),u=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),u!==null&&(u(),u=null)}}}function rf(e){this._internalRoot=e}ac.prototype.render=rf.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var i=n.current,o=fa();Dy(i,o,e,n,null,null)},ac.prototype.unmount=rf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Dy(e.current,2,null,e,null,null),Bl(),n[W]=null}};function ac(e){this._internalRoot=e}ac.prototype.unstable_scheduleHydration=function(e){if(e){var n=en();e={blockedOn:null,target:e,priority:n};for(var i=0;i<Yr.length&&n!==0&&n<Yr[i].priority;i++);Yr.splice(i,0,e),i===0&&Iy(e)}};var Vy=t.version;if(Vy!=="19.2.0")throw Error(s(527,Vy,"19.2.0"));he.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(n),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var n2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{be=rc.inject(n2),je=rc}catch{}}return Eo.createRoot=function(e,n){if(!l(e))throw Error(s(299));var i=!1,o="",u=Xm,f=Km,y=Qm;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(u=n.onUncaughtError),n.onCaughtError!==void 0&&(f=n.onCaughtError),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=Ay(e,1,!1,null,null,i,o,null,u,f,y,Hy),e[W]=n.current,$d(e),new rf(n)},Eo.hydrateRoot=function(e,n,i){if(!l(e))throw Error(s(299));var o=!1,u="",f=Xm,y=Km,S=Qm,O=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(u=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(y=i.onCaughtError),i.onRecoverableError!==void 0&&(S=i.onRecoverableError),i.formState!==void 0&&(O=i.formState)),n=Ay(e,1,!0,n,i??null,o,u,O,f,y,S,Hy),n.context=_y(null),i=n.current,o=fa(),o=Zn(o),u=Ar(o),u.callback=null,_r(i,u,o),i=o,n.current.lanes=i,on(n,i),qa(n),e[W]=n.current,$d(e),new ac(n)},Eo.version="19.2.0",Eo}var Wy;function f2(){if(Wy)return lf.exports;Wy=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(t){console.error(t)}}return a(),lf.exports=d2(),lf.exports}var db=f2();const h2="modulepreload",p2=function(a,t){return new URL(a,t).href},Jy={},ev=function(t,r,s){let l=Promise.resolve();if(r&&r.length>0){let g=function(b){return Promise.all(b.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};const d=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");l=g(r.map(b=>{if(b=p2(b,s),b in Jy)return;Jy[b]=!0;const w=b.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(s)for(let D=d.length-1;D>=0;D--){const F=d[D];if(F.href===b&&(!w||F.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${b}"]${k}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":h2,w||(E.as="script"),E.crossOrigin="",E.href=b,m&&E.setAttribute("nonce",m),document.head.appendChild(E),w)return new Promise((D,F)=>{E.addEventListener("load",D),E.addEventListener("error",()=>F(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(d){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=d,window.dispatchEvent(p),!p.defaultPrevented)throw d}return l.then(d=>{for(const p of d||[])p.status==="rejected"&&c(p.reason);return t().catch(c)})};var Wr=ub();const jh=Nh(Wr),tv=cb({__proto__:null,default:jh},[Wr]);function nv(a,t,r,s,l,c,d){try{var p=a[c](d),m=p.value}catch(g){return void r(g)}p.done?t(m):Promise.resolve(m).then(s,l)}function st(a){return function(){var t=this,r=arguments;return new Promise(function(s,l){var c=a.apply(t,r);function d(m){nv(c,s,l,d,p,"next",m)}function p(m){nv(c,s,l,d,p,"throw",m)}d(void 0)})}}function ht(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Bn(a){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(a)}function m2(a,t){if(Bn(a)!="object"||!a)return a;var r=a[Symbol.toPrimitive];if(r!==void 0){var s=r.call(a,t);if(Bn(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(a)}function fb(a){var t=m2(a,"string");return Bn(t)=="symbol"?t:t+""}function g2(a,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(a,fb(s.key),s)}}function pt(a,t,r){return t&&g2(a.prototype,t),Object.defineProperty(a,"prototype",{writable:!1}),a}function y2(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Qa(a,t){if(t&&(Bn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y2(a)}function Vt(a){return Vt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vt(a)}function $o(a,t){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$o(a,t)}function aa(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&$o(a,t)}function Be(a,t,r){return(t=fb(t))in a?Object.defineProperty(a,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[t]=r,a}var ff={exports:{}},hf={exports:{}},av;function hb(){return av||(av=1,(function(a){function t(r,s){this.v=r,this.k=s}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(hf)),hf.exports}var pf={exports:{}},mf={exports:{}},rv;function pb(){return rv||(rv=1,(function(a){function t(r,s,l,c){var d=Object.defineProperty;try{d({},"",{})}catch{d=0}a.exports=t=function(m,g,b,w){function k(E,D){t(m,E,function(F){return this._invoke(E,D,F)})}g?d?d(m,g,{value:b,enumerable:!w,configurable:!w,writable:!w}):m[g]=b:(k("next",0),k("throw",1),k("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,t(r,s,l,c)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(mf)),mf.exports}var iv;function mb(){return iv||(iv=1,(function(a){var t=pb();function r(){var s,l,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",p=c.toStringTag||"@@toStringTag";function m(U,te,ee,L){var G=te&&te.prototype instanceof b?te:b,ge=Object.create(G.prototype);return t(ge,"_invoke",(function(Se,B,pe){var oe,ye,Ie,De=0,et=pe||[],nt=!1,Ke={p:0,n:0,v:s,a:q,f:q.bind(s,4),d:function(me,Me){return oe=me,ye=0,Ie=s,Ke.n=Me,g}};function q(he,me){for(ye=he,Ie=me,l=0;!nt&&De&&!Me&&l<et.length;l++){var Me,J=et[l],v=Ke.p,T=J[2];he>3?(Me=T===me)&&(Ie=J[(ye=J[4])?5:(ye=3,3)],J[4]=J[5]=s):J[0]<=v&&((Me=he<2&&v<J[1])?(ye=0,Ke.v=me,Ke.n=J[1]):v<T&&(Me=he<3||J[0]>me||me>T)&&(J[4]=he,J[5]=me,Ke.n=T,ye=0))}if(Me||he>1)return g;throw nt=!0,me}return function(he,me,Me){if(De>1)throw TypeError("Generator is already running");for(nt&&me===1&&q(me,Me),ye=me,Ie=Me;(l=ye<2?s:Ie)||!nt;){oe||(ye?ye<3?(ye>1&&(Ke.n=-1),q(ye,Ie)):Ke.n=Ie:Ke.v=Ie);try{if(De=2,oe){if(ye||(he="next"),l=oe[he]){if(!(l=l.call(oe,Ie)))throw TypeError("iterator result is not an object");if(!l.done)return l;Ie=l.value,ye<2&&(ye=0)}else ye===1&&(l=oe.return)&&l.call(oe),ye<2&&(Ie=TypeError("The iterator does not provide a '"+he+"' method"),ye=1);oe=s}else if((l=(nt=Ke.n<0)?Ie:Se.call(B,Ke))!==g)break}catch(J){oe=s,ye=1,Ie=J}finally{De=1}}return{value:l,done:nt}}})(U,ee,L),!0),ge}var g={};function b(){}function w(){}function k(){}l=Object.getPrototypeOf;var E=[][d]?l(l([][d]())):(t(l={},d,function(){return this}),l),D=k.prototype=b.prototype=Object.create(E);function F(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,k):(U.__proto__=k,t(U,p,"GeneratorFunction")),U.prototype=Object.create(D),U}return w.prototype=k,t(D,"constructor",k),t(k,"constructor",w),w.displayName="GeneratorFunction",t(k,p,"GeneratorFunction"),t(D),t(D,p,"Generator"),t(D,d,function(){return this}),t(D,"toString",function(){return"[object Generator]"}),(a.exports=r=function(){return{w:m,m:F}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(pf)),pf.exports}var gf={exports:{}},yf={exports:{}},vf={exports:{}},sv;function gb(){return sv||(sv=1,(function(a){var t=hb(),r=pb();function s(l,c){function d(m,g,b,w){try{var k=l[m](g),E=k.value;return E instanceof t?c.resolve(E.v).then(function(D){d("next",D,b,w)},function(D){d("throw",D,b,w)}):c.resolve(E).then(function(D){k.value=D,b(k)},function(D){return d("throw",D,b,w)})}catch(D){w(D)}}var p;this.next||(r(s.prototype),r(s.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),r(this,"_invoke",function(m,g,b){function w(){return new c(function(k,E){d(m,b,k,E)})}return p=p?p.then(w,w):w()},!0)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(vf)),vf.exports}var ov;function yb(){return ov||(ov=1,(function(a){var t=mb(),r=gb();function s(l,c,d,p,m){return new r(t().w(l,c,d,p),m||Promise)}a.exports=s,a.exports.__esModule=!0,a.exports.default=a.exports})(yf)),yf.exports}var lv;function v2(){return lv||(lv=1,(function(a){var t=yb();function r(s,l,c,d,p){var m=t(s,l,c,d,p);return m.next().then(function(g){return g.done?g.value:m.next()})}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(gf)),gf.exports}var bf={exports:{}},cv;function b2(){return cv||(cv=1,(function(a){function t(r){var s=Object(r),l=[];for(var c in s)l.unshift(c);return function d(){for(;l.length;)if((c=l.pop())in s)return d.value=c,d.done=!1,d;return d.done=!0,d}}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(bf)),bf.exports}var wf={exports:{}},Sf={exports:{}},uv;function w2(){return uv||(uv=1,(function(a){function t(r){"@babel/helpers - typeof";return a.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a.exports.__esModule=!0,a.exports.default=a.exports,t(r)}a.exports=t,a.exports.__esModule=!0,a.exports.default=a.exports})(Sf)),Sf.exports}var dv;function S2(){return dv||(dv=1,(function(a){var t=w2().default;function r(s){if(s!=null){var l=s[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],c=0;if(l)return l.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length))return{next:function(){return s&&c>=s.length&&(s=void 0),{value:s&&s[c++],done:!s}}}}throw new TypeError(t(s)+" is not iterable")}a.exports=r,a.exports.__esModule=!0,a.exports.default=a.exports})(wf)),wf.exports}var fv;function x2(){return fv||(fv=1,(function(a){var t=hb(),r=mb(),s=v2(),l=yb(),c=gb(),d=b2(),p=S2();function m(){var g=r(),b=g.m(m),w=(Object.getPrototypeOf?Object.getPrototypeOf(b):b.__proto__).constructor;function k(F){var U=typeof F=="function"&&F.constructor;return!!U&&(U===w||(U.displayName||U.name)==="GeneratorFunction")}var E={throw:1,return:2,break:3,continue:3};function D(F){var U,te;return function(ee){U||(U={stop:function(){return te(ee.a,2)},catch:function(){return ee.v},abrupt:function(G,ge){return te(ee.a,E[G],ge)},delegateYield:function(G,ge,Se){return U.resultName=ge,te(ee.d,p(G),Se)},finish:function(G){return te(ee.f,G)}},te=function(G,ge,Se){ee.p=U.prev,ee.n=U.next;try{return G(ge,Se)}finally{U.next=ee.n}}),U.resultName&&(U[U.resultName]=ee.v,U.resultName=void 0),U.sent=ee.v,U.next=ee.n;try{return F.call(this,U)}finally{ee.p=U.prev,ee.n=U.next}}}return(a.exports=m=function(){return{wrap:function(te,ee,L,G){return g.w(D(te),ee,L,G&&G.reverse())},isGeneratorFunction:k,mark:g.m,awrap:function(te,ee){return new t(te,ee)},AsyncIterator:c,async:function(te,ee,L,G,ge){return(k(ee)?l:s)(D(te),ee,L,G,ge)},keys:d,values:p}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=m,a.exports.__esModule=!0,a.exports.default=a.exports})(ff)),ff.exports}var xf,hv;function k2(){if(hv)return xf;hv=1;var a=x2()();xf=a;try{regeneratorRuntime=a}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}return xf}var E2=k2();const Ce=Nh(E2);function C2(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=T2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function T2(a,t){if(a){if(typeof a=="string")return pv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pv(a,t):void 0}}function pv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function N2(){return{debug:function(t){}}}var vb=(function(){function a(){ht(this,a),Be(this,"pipes",[])}return pt(a,[{key:"addPipe",value:function(r){this.pipes.push(r)}},{key:"emit",value:(function(){var t=st(Ce.mark(function s(l){var c,d,p,m;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:c=l,d=C2(this.pipes),b.prev=2,d.s();case 4:if((p=d.n()).done){b.next=13;break}return m=p.value,b.next=8,m(c);case 8:if(c=b.sent,!(typeof c>"u")){b.next=11;break}return b.abrupt("return");case 11:b.next=4;break;case 13:b.next=18;break;case 15:b.prev=15,b.t0=b.catch(2),d.e(b.t0);case 18:return b.prev=18,d.f(),b.finish(18);case 21:return b.abrupt("return",c);case 22:case"end":return b.stop()}},s,this,[[2,15,18,21]])}));function r(s){return t.apply(this,arguments)}return r})()}])})(),Ts=(function(){function a(t){ht(this,a),Be(this,"signal",new vb),this.name=t}return pt(a,[{key:"addPipe",value:function(r){this.signal.addPipe(r)}},{key:"use",value:function(r){if(!(r instanceof a))throw new Error("cannot use non-Scope instance");return r.setParent(this),this.addPipe(function(s){return r.signal.emit(s)}),N2()}},{key:"setParent",value:function(r){this.parent=r}},{key:"emit",value:function(r){return this.signal.emit(r)}},{key:"hasParent",value:function(){return!!this.parent}},{key:"parentScope",value:function(r){if(!this.parent)throw new Error("cannot find parent");if(r&&this.parent instanceof r)return this.parent;if(r)throw new Error("actual parent is not instance of type");return this.parent}}])})();function mv(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=O2(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function O2(a,t){if(a){if(typeof a=="string")return gv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gv(a,t):void 0}}function gv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function j2(a,t,r){return t=Vt(t),Qa(a,bb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function bb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bb=function(){return!!a})()}var ni=(function(a){function t(){var r;return ht(this,t),r=j2(this,t,["NodeEditor"]),Be(r,"nodes",[]),Be(r,"connections",[]),r}return aa(t,a),pt(t,[{key:"getNode",value:function(s){return this.nodes.find(function(l){return l.id===s})}},{key:"getNodes",value:function(){return this.nodes.slice()}},{key:"getConnections",value:function(){return this.connections.slice()}},{key:"getConnection",value:function(s){return this.connections.find(function(l){return l.id===s})}},{key:"addNode",value:(function(){var r=st(Ce.mark(function l(c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getNode(c.id)){p.next=2;break}throw new Error("node has already been added");case 2:return p.next=4,this.emit({type:"nodecreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.nodes.push(c),p.next=9,this.emit({type:"nodecreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"addConnection",value:(function(){var r=st(Ce.mark(function l(c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(!this.getConnection(c.id)){p.next=2;break}throw new Error("connection has already been added");case 2:return p.next=4,this.emit({type:"connectioncreate",data:c});case 4:if(p.sent){p.next=6;break}return p.abrupt("return",!1);case 6:return this.connections.push(c),p.next=9,this.emit({type:"connectioncreated",data:c});case 9:return p.abrupt("return",!0);case 10:case"end":return p.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeNode",value:(function(){var r=st(Ce.mark(function l(c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.nodes.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find node");case 3:return g.next=5,this.emit({type:"noderemove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.nodes.indexOf(d),this.nodes.splice(p,1),g.next=11,this.emit({type:"noderemoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"removeConnection",value:(function(){var r=st(Ce.mark(function l(c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(d=this.connections.find(function(b){return b.id===c}),d){g.next=3;break}throw new Error("cannot find connection");case 3:return g.next=5,this.emit({type:"connectionremove",data:d});case 5:if(g.sent){g.next=7;break}return g.abrupt("return",!1);case 7:return p=this.connections.indexOf(d),this.connections.splice(p,1),g.next=11,this.emit({type:"connectionremoved",data:d});case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"clear",value:(function(){var r=st(Ce.mark(function l(){var c,d,p,m,g,b;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,this.emit({type:"clear"});case 2:if(k.sent){k.next=6;break}return k.next=5,this.emit({type:"clearcancelled"});case 5:return k.abrupt("return",!1);case 6:c=mv(this.connections.slice()),k.prev=7,c.s();case 9:if((d=c.n()).done){k.next=15;break}return p=d.value,k.next=13,this.removeConnection(p.id);case 13:k.next=9;break;case 15:k.next=20;break;case 17:k.prev=17,k.t0=k.catch(7),c.e(k.t0);case 20:return k.prev=20,c.f(),k.finish(20);case 23:m=mv(this.nodes.slice()),k.prev=24,m.s();case 26:if((g=m.n()).done){k.next=32;break}return b=g.value,k.next=30,this.removeNode(b.id);case 30:k.next=26;break;case 32:k.next=37;break;case 34:k.prev=34,k.t1=k.catch(24),m.e(k.t1);case 37:return k.prev=37,m.f(),k.finish(37);case 40:return k.next=42,this.emit({type:"cleared"});case 42:return k.abrupt("return",!0);case 43:case"end":return k.stop()}},l,this,[[7,17,20,23],[24,34,37,40]])}));function s(){return r.apply(this,arguments)}return s})()}])})(Ts),kf=globalThis.crypto;function ai(){if("randomBytes"in kf)return kf.randomBytes(8).toString("hex");var a=kf.getRandomValues(new Uint8Array(8)),t=Array.from(a),r=t.map(function(s){return s.toString(16).padStart(2,"0")});return r.join("")}function Ah(a,t,r){return t=Vt(t),Qa(a,wb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function wb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wb=function(){return!!a})()}var A2=pt(function a(t){ht(this,a),this.name=t}),_h=pt(function a(t,r,s){ht(this,a),this.socket=t,this.label=r,this.multipleConnections=s,this.id=ai()}),_2=(function(a){function t(r,s,l){var c;return ht(this,t),c=Ah(this,t,[r,s,l]),Be(c,"control",null),Be(c,"showControl",!0),c.socket=r,c.label=s,c.multipleConnections=l,c}return aa(t,a),pt(t,[{key:"addControl",value:function(s){if(this.control)throw new Error("control already added for this input");this.control=s}},{key:"removeControl",value:function(){this.control=null}}])})(_h),D2=(function(a){function t(r,s,l){return ht(this,t),Ah(this,t,[r,s,l!==!1])}return aa(t,a),pt(t)})(_h),Sb=pt(function a(){ht(this,a),this.id=ai()}),M2=(function(a){function t(r,s){var l,c;return ht(this,t),c=Ah(this,t),c.type=r,c.options=s,c.id=ai(),c.readonly=(l=s?.readonly)!==null&&l!==void 0?l:!1,typeof s?.initial<"u"&&(c.value=s.initial),c}return aa(t,a),pt(t,[{key:"setValue",value:function(s){var l;this.value=s,(l=this.options)!==null&&l!==void 0&&l.change&&this.options.change(s)}}])})(Sb),R2=(function(){function a(t){ht(this,a),Be(this,"inputs",{}),Be(this,"outputs",{}),Be(this,"controls",{}),this.label=t,this.id=ai()}return pt(a,[{key:"hasInput",value:function(r){return Object.prototype.hasOwnProperty.call(this.inputs,r)}},{key:"addInput",value:function(r,s){if(this.hasInput(r))throw new Error("input with key '".concat(String(r),"' already added"));Object.defineProperty(this.inputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeInput",value:function(r){delete this.inputs[r]}},{key:"hasOutput",value:function(r){return Object.prototype.hasOwnProperty.call(this.outputs,r)}},{key:"addOutput",value:function(r,s){if(this.hasOutput(r))throw new Error("output with key '".concat(String(r),"' already added"));Object.defineProperty(this.outputs,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeOutput",value:function(r){delete this.outputs[r]}},{key:"hasControl",value:function(r){return Object.prototype.hasOwnProperty.call(this.controls,r)}},{key:"addControl",value:function(r,s){if(this.hasControl(r))throw new Error("control with key '".concat(String(r),"' already added"));Object.defineProperty(this.controls,r,{value:s,enumerable:!0,configurable:!0})}},{key:"removeControl",value:function(r){delete this.controls[r]}}])})(),z2=pt(function a(t,r,s,l){if(ht(this,a),this.sourceOutput=r,this.targetInput=l,!t.outputs[r])throw new Error("source node doesn't have output with a key ".concat(String(r)));if(!s.inputs[l])throw new Error("target node doesn't have input with a key ".concat(String(l)));this.id=ai(),this.source=t.id,this.target=s.id}),Kt=Object.freeze({__proto__:null,Socket:A2,Port:_h,Input:_2,Output:D2,Control:Sb,InputControl:M2,Node:R2,Connection:z2});const L2=Object.freeze(Object.defineProperty({__proto__:null,ClassicPreset:Kt,NodeEditor:ni,Scope:Ts,Signal:vb,getUID:ai},Symbol.toStringTag,{value:"Module"}));function Pf(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function B2(a){if(Array.isArray(a))return Pf(a)}function I2(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function xb(a,t){if(a){if(typeof a=="string")return Pf(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pf(a,t):void 0}}function $2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(a){return B2(a)||I2(a)||xb(a)||$2()}var U2=(function(){function a(t){ht(this,a),this.reordered=t,this.holder=document.createElement("div"),this.holder.style.transformOrigin="0 0"}return pt(a,[{key:"getPointerFrom",value:function(r){var s=this.holder.getBoundingClientRect(),l=s.left,c=s.top,d=r.clientX-l,p=r.clientY-c;return{x:d,y:p}}},{key:"add",value:function(r){this.holder.appendChild(r)}},{key:"reorder",value:(function(){var t=st(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(this.holder.contains(l)){p.next=2;break}throw new Error("content doesn't have 'target' for reordering");case 2:if(!(c!==null&&!this.holder.contains(c))){p.next=4;break}throw new Error("content doesn't have 'next' for reordering");case 4:return this.holder.insertBefore(l,c),p.next=7,this.reordered(l);case 7:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:function(r){this.holder.contains(r)&&this.holder.removeChild(r)}}])})();function kb(a,t){var r=function(d){t.move(d)},s=function(d){window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s),t.up(d)},l=function(d){window.addEventListener("pointermove",r),window.addEventListener("pointerup",s),window.addEventListener("pointercancel",s),t.down(d)};return a.addEventListener("pointerdown",l),{destroy:function(){a.removeEventListener("pointerdown",l),window.removeEventListener("pointermove",r),window.removeEventListener("pointerup",s),window.removeEventListener("pointercancel",s)}}}var yv=function(t){return t.length===0?0:Math.min.apply(Math,Ns(t))},vv=function(t){return t.length===0?0:Math.max.apply(Math,Ns(t))};function Eb(a){var t=yv(a.map(function(c){return c.position.x})),r=yv(a.map(function(c){return c.position.y})),s=vv(a.map(function(c){return c.position.x+c.width})),l=vv(a.map(function(c){return c.position.y+c.height}));return{left:t,right:s,top:r,bottom:l,width:Math.abs(t-s),height:Math.abs(r-l),center:{x:(t+s)/2,y:(r+l)/2}}}function bv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function H2(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):bv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Dh=(function(){function a(t){var r=this;ht(this,a),Be(this,"down",function(s){r.guards.down(s)&&(s.stopPropagation(),r.pointerStart={x:s.pageX,y:s.pageY},r.startPosition=H2({},r.config.getCurrentPosition()),r.events.start(s))}),Be(this,"move",function(s){if(!(!r.pointerStart||!r.startPosition)&&r.guards.move(s)){s.preventDefault();var l={x:s.pageX-r.pointerStart.x,y:s.pageY-r.pointerStart.y},c=r.config.getZoom(),d=r.startPosition.x+l.x/c,p=r.startPosition.y+l.y/c;r.events.translate(d,p,s)}}),Be(this,"up",function(s){r.pointerStart&&(delete r.pointerStart,r.events.drag(s))}),this.guards=t||{down:function(l){return!(l.pointerType==="mouse"&&l.button!==0)},move:function(){return!0}}}return pt(a,[{key:"initialize",value:function(r,s,l){this.config=s,this.events=l,r.style.touchAction="none",this.pointerListener=kb(r,{down:this.down,move:this.move,up:this.up})}},{key:"destroy",value:function(){this.pointerListener.destroy()}}])})(),Cb=(function(){function a(t){var r=this;ht(this,a),Be(this,"previous",null),Be(this,"pointers",[]),Be(this,"wheel",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=s.deltaY<0,m=p?r.intensity:-r.intensity,g=(c-s.clientX)*m,b=(d-s.clientY)*m;r.onzoom(m,g,b,"wheel")}),Be(this,"down",function(s){r.pointers.push(s)}),Be(this,"move",function(s){if(r.pointers=r.pointers.map(function(D){return D.pointerId===s.pointerId?s:D}),!!r.isTranslating()){var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=r.getTouches(),m=p.cx,g=p.cy,b=p.distance;if(r.previous!==null&&r.previous.distance>0){var w=b/r.previous.distance-1,k=(c-m)*w,E=(d-g)*w;r.onzoom(w,k-(r.previous.cx-m),E-(r.previous.cy-g),"touch")}r.previous={cx:m,cy:g,distance:b}}}),Be(this,"contextmenu",function(){r.pointers=[]}),Be(this,"up",function(s){r.previous=null,r.pointers=r.pointers.filter(function(l){return l.pointerId!==s.pointerId})}),Be(this,"dblclick",function(s){s.preventDefault();var l=r.element.getBoundingClientRect(),c=l.left,d=l.top,p=4*r.intensity,m=(c-s.clientX)*p,g=(d-s.clientY)*p;r.onzoom(p,m,g,"dblclick")}),this.intensity=t}return pt(a,[{key:"initialize",value:function(r,s,l){this.container=r,this.element=s,this.onzoom=l,this.container.addEventListener("wheel",this.wheel),this.container.addEventListener("pointerdown",this.down),this.container.addEventListener("dblclick",this.dblclick),window.addEventListener("pointermove",this.move),window.addEventListener("pointerup",this.up),window.addEventListener("pointercancel",this.up),window.addEventListener("contextmenu",this.contextmenu)}},{key:"getTouches",value:function(){var r={touches:this.pointers},s=[r.touches[0].clientX,r.touches[0].clientY],l=s[0],c=s[1],d=[r.touches[1].clientX,r.touches[1].clientY],p=d[0],m=d[1],g=Math.sqrt(Math.pow(l-p,2)+Math.pow(c-m,2));return{cx:(l+p)/2,cy:(c+m)/2,distance:g}}},{key:"isTranslating",value:function(){return this.pointers.length>=2}},{key:"destroy",value:function(){this.container.removeEventListener("wheel",this.wheel),this.container.removeEventListener("pointerdown",this.down),this.container.removeEventListener("dblclick",this.dblclick),window.removeEventListener("pointermove",this.move),window.removeEventListener("pointerup",this.up),window.removeEventListener("pointercancel",this.up),window.removeEventListener("contextmenu",this.contextmenu)}}])})(),Tb=(function(){function a(t,r,s){var l=this;ht(this,a),Be(this,"transform",{k:1,x:0,y:0}),Be(this,"pointer",{x:0,y:0}),Be(this,"zoomHandler",null),Be(this,"dragHandler",null),Be(this,"pointerdown",function(c){l.setPointerFrom(c),l.events.pointerDown(l.pointer,c)}),Be(this,"pointermove",function(c){l.setPointerFrom(c),l.events.pointerMove(l.pointer,c)}),Be(this,"pointerup",function(c){l.setPointerFrom(c),l.events.pointerUp(l.pointer,c)}),Be(this,"resize",function(c){l.events.resize(c)}),Be(this,"onTranslate",function(c,d){var p;(p=l.zoomHandler)!==null&&p!==void 0&&p.isTranslating()||l.translate(c,d)}),Be(this,"onZoom",function(c,d,p,m){l.zoom(l.transform.k*(1+c),d,p,m),l.update()}),this.container=t,this.events=r,this.guards=s,this.content=new U2(function(c){return l.events.reordered(c)}),this.content.holder.style.transformOrigin="0 0",this.setZoomHandler(new Cb(.1)),this.setDragHandler(new Dh),this.container.addEventListener("pointerdown",this.pointerdown),this.container.addEventListener("pointermove",this.pointermove),window.addEventListener("pointerup",this.pointerup),window.addEventListener("resize",this.resize),t.appendChild(this.content.holder),this.update()}return pt(a,[{key:"update",value:function(){var r=this.transform,s=r.x,l=r.y,c=r.k;this.content.holder.style.transform="translate(".concat(s,"px, ").concat(l,"px) scale(").concat(c,")")}},{key:"setDragHandler",value:function(r){var s=this;this.dragHandler&&this.dragHandler.destroy(),this.dragHandler=r,this.dragHandler&&this.dragHandler.initialize(this.container,{getCurrentPosition:function(){return s.transform},getZoom:function(){return 1}},{start:function(){return null},translate:this.onTranslate,drag:function(){return null}})}},{key:"setZoomHandler",value:function(r){this.zoomHandler&&this.zoomHandler.destroy(),this.zoomHandler=r,this.zoomHandler&&this.zoomHandler.initialize(this.container,this.content.holder,this.onZoom)}},{key:"setPointerFrom",value:function(r){var s=this.content.getPointerFrom(r),l=s.x,c=s.y,d=this.transform.k;this.pointer={x:l/d,y:c/d}}},{key:"translate",value:(function(){var t=st(Ce.mark(function s(l,c){var d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d={x:l,y:c},g.next=3,this.guards.translate({previous:this.transform,position:d});case 3:if(p=g.sent,p){g.next=6;break}return g.abrupt("return",!1);case 6:return this.transform.x=p.data.position.x,this.transform.y=p.data.position.y,this.update(),g.next=11,this.events.translated(p.data);case 11:return g.abrupt("return",!0);case 12:case"end":return g.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"zoom",value:(function(){var t=st(Ce.mark(function s(l){var c,d,p,m,g,b,w=arguments;return Ce.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return c=w.length>1&&w[1]!==void 0?w[1]:0,d=w.length>2&&w[2]!==void 0?w[2]:0,p=w.length>3?w[3]:void 0,m=this.transform.k,E.next=6,this.guards.zoom({previous:this.transform,zoom:l,source:p});case 6:if(g=E.sent,g){E.next=9;break}return E.abrupt("return",!0);case 9:return b=(m-g.data.zoom)/(m-l||1),this.transform.k=g.data.zoom||1,this.transform.x+=c*b,this.transform.y+=d*b,this.update(),E.next=16,this.events.zoomed(g.data);case 16:return E.abrupt("return",!1);case 17:case"end":return E.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"destroy",value:function(){this.container.removeEventListener("pointerdown",this.pointerdown),this.container.removeEventListener("pointermove",this.pointermove),window.removeEventListener("pointerup",this.pointerup),window.removeEventListener("resize",this.resize),this.dragHandler&&this.dragHandler.destroy(),this.zoomHandler&&this.zoomHandler.destroy(),this.content.holder.innerHTML=""}}])})();function V2(a,t,r){return t=Vt(t),Qa(a,Nb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Nb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Nb=function(){return!!a})()}var Go=(function(a){function t(){return ht(this,t),V2(this,t,arguments)}return aa(t,a),pt(t)})(Ts),G2=pt(function a(t){ht(this,a),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.left="0",this.element.style.top="0",this.element.addEventListener("contextmenu",function(r){return t.contextmenu(r)})}),q2=(function(){function a(){ht(this,a),Be(this,"views",new WeakMap),Be(this,"viewsElements",new Map)}return pt(a,[{key:"set",value:function(r){var s=r.element,l=r.type,c=r.payload;c!=null&&c.id&&(this.views.set(s,r),this.viewsElements.set("".concat(l,"_").concat(c.id),s))}},{key:"get",value:function(r,s){var l=this.viewsElements.get("".concat(r,"_").concat(s));return l&&this.views.get(l)}},{key:"delete",value:function(r){var s,l=this.views.get(r);l&&(s=l.payload)!==null&&s!==void 0&&s.id&&(this.views.delete(r),this.viewsElements.delete("".concat(l.type,"_").concat(l.payload.id)))}}])})();function wv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Sv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):wv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}var Ob=(function(){function a(t,r,s){var l=this;ht(this,a),Be(this,"translate",(function(){var c=st(Ce.mark(function d(p,m){var g,b;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g=Sv({},l.position),k.next=3,l.guards.translate({previous:g,position:{x:p,y:m}});case 3:if(b=k.sent,b){k.next=6;break}return k.abrupt("return",!1);case 6:return l.position=Sv({},b.data.position),l.element.style.transform="translate(".concat(l.position.x,"px, ").concat(l.position.y,"px)"),k.next=10,l.events.translated({position:l.position,previous:g});case 10:return k.abrupt("return",!0);case 11:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),Be(this,"resize",(function(){var c=st(Ce.mark(function d(p,m){var g,b;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return g={width:p,height:m},k.next=3,l.guards.resize({size:g});case 3:if(k.sent){k.next=5;break}return k.abrupt("return",!1);case 5:if(b=l.element.querySelector("*:not(span):not([fragment])"),!(!b||!(b instanceof HTMLElement))){k.next=8;break}return k.abrupt("return",!1);case 8:return b.style.width="".concat(p,"px"),b.style.height="".concat(m,"px"),k.next=12,l.events.resized({size:g});case 12:return k.abrupt("return",!0);case 13:case"end":return k.stop()}},d)}));return function(d,p){return c.apply(this,arguments)}})()),this.getZoom=t,this.events=r,this.guards=s,this.element=document.createElement("div"),this.element.style.position="absolute",this.position={x:0,y:0},this.translate(0,0),this.element.addEventListener("contextmenu",function(c){return l.events.contextmenu(c)}),this.dragHandler=new Dh,this.dragHandler.initialize(this.element,{getCurrentPosition:function(){return l.position},getZoom:function(){return l.getZoom()}},{start:this.events.picked,translate:this.translate,drag:this.events.dragged})}return pt(a,[{key:"destroy",value:function(){this.dragHandler.destroy()}}])})();function jb(a,t){return a.map(function(r){return{view:t.get(r.id),node:r}}).filter(function(r){return r.view}).map(function(r){var s=r.view,l=r.node,c=l.width,d=l.height;return typeof c<"u"&&typeof d<"u"?{position:s.position,width:c,height:d}:{position:s.position,width:s.element.clientWidth,height:s.element.clientHeight}})}function Y2(a,t){var r=a.parentScope(ni),s=t.map(function(c){return Bn(c)==="object"?c:r.getNode(c)}),l=jb(s,a.nodeViews);return Eb(l)}function P2(a){var t=a;t.addPipe(function(r){if(!r||Bn(r)!=="object"||!("type"in r))return r;if(r.type==="nodepicked"){var s=t.nodeViews.get(r.data.id),l=t.area.content;s&&l.reorder(s.element,null)}if(r.type==="connectioncreated"){var c=t.connectionViews.get(r.data.id),d=t.area.content;c&&d.reorder(c.element,d.holder.firstChild)}return r})}function xv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function yr(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):xv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function F2(a,t){var r=t!=null&&t.scaling?t.scaling===!0?{min:.1,max:1}:t.scaling:!1,s=t!=null&&t.translation?t.translation===!0?{left:0,top:0,right:1e3,bottom:1e3}:t.translation:!1;function l(d){if(!r)throw new Error("scaling param isnt defined");var p=typeof r=="function"?r():r,m=p.min,g=p.max;return d<m?m:d>g?g:d}function c(d){if(!s)throw new Error("translation param isnt defined");var p=yr({},d),m=typeof s=="function"?s():s,g=m.left,b=m.top,w=m.right,k=m.bottom;return p.x<g&&(p.x=g),p.x>w&&(p.x=w),p.y<b&&(p.y=b),p.y>k&&(p.y=k),p}a.addPipe(function(d){if(!d||Bn(d)!=="object"||!("type"in d))return d;if(r&&d.type==="zoom")return yr(yr({},d),{},{data:yr(yr({},d.data),{},{zoom:l(d.data.zoom)})});if(s&&d.type==="zoomed"){var p=c(a.area.transform);a.area.translate(p.x,p.y)}return s&&d.type==="translate"?yr(yr({},d),{},{data:yr(yr({},d.data),{},{position:c(d.data.position)})}):d})}function Z2(){var a=!1;function t(s){(s.key==="Control"||s.key==="Meta")&&(a=!0)}function r(s){(s.key==="Control"||s.key==="Meta")&&(a=!1)}return document.addEventListener("keydown",t),document.addEventListener("keyup",r),{active:function(){return a},destroy:function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",r)}}}var Ab=(function(){function a(){ht(this,a),Be(this,"entities",new Map),Be(this,"pickId",null)}return pt(a,[{key:"isSelected",value:function(r){return this.entities.has("".concat(r.label,"_").concat(r.id))}},{key:"add",value:(function(){var t=st(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:if(c){p.next=3;break}return p.next=3,this.unselectAll();case 3:this.entities.set("".concat(l.label,"_").concat(l.id),l);case 4:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"remove",value:(function(){var t=st(Ce.mark(function s(l){var c,d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(c="".concat(l.label,"_").concat(l.id),d=this.entities.get(c),!d){m.next=6;break}return this.entities.delete(c),m.next=6,d.unselect();case 6:case"end":return m.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"unselectAll",value:(function(){var t=st(Ce.mark(function s(){var l=this;return Ce.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,Promise.all(Ns(Array.from(this.entities.values())).map(function(p){return l.remove(p)}));case 2:case"end":return d.stop()}},s,this)}));function r(){return t.apply(this,arguments)}return r})()},{key:"translate",value:(function(){var t=st(Ce.mark(function s(l,c){var d=this;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Promise.all(Array.from(this.entities.values()).map(function(g){return!d.isPicked(g)&&g.translate(l,c)}));case 2:case"end":return m.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"pick",value:function(r){this.pickId="".concat(r.label,"_").concat(r.id)}},{key:"release",value:function(){this.pickId=null}},{key:"isPicked",value:function(r){return this.pickId==="".concat(r.label,"_").concat(r.id)}}])})();function X2(){return new Ab}function K2(a,t,r){var s=null,l=a,c=function(){return s||(s=l.parentScope(ni))},d=0;function p(E){E.selected||(E.selected=!0,l.update("node",E.id))}function m(E){E.selected&&(E.selected=!1,l.update("node",E.id))}function g(E,D){return b.apply(this,arguments)}function b(){return b=st(Ce.mark(function E(D,F){var U;return Ce.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(U=c().getNode(D),U){ee.next=3;break}return ee.abrupt("return");case 3:return ee.next=5,t.add({label:"node",id:U.id,translate:function(G,ge){return st(Ce.mark(function Se(){var B,pe;return Ce.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(B=l.nodeViews.get(U.id),pe=B?.position,!pe){ye.next=5;break}return ye.next=5,B.translate(pe.x+G,pe.y+ge);case 5:case"end":return ye.stop()}},Se)}))()},unselect:function(){m(U)}},F);case 5:p(U);case 6:case"end":return ee.stop()}},E)})),b.apply(this,arguments)}function w(E){return k.apply(this,arguments)}function k(){return k=st(Ce.mark(function E(D){return Ce.wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,t.remove({id:D,label:"node"});case 2:case"end":return U.stop()}},E)})),k.apply(this,arguments)}return l.addPipe((function(){var E=st(Ce.mark(function D(F){var U,te,ee,L,G,ge,Se,B;return Ce.wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(!(!F||Bn(F)!=="object"||!("type"in F))){oe.next=2;break}return oe.abrupt("return",F);case 2:if(F.type!=="nodepicked"){oe.next=11;break}return U=F.data.id,te=r.accumulating.active(),t.pick({id:U,label:"node"}),d=null,oe.next=9,g(U,te);case 9:oe.next=33;break;case 11:if(F.type!=="nodetranslated"){oe.next=20;break}if(ee=F.data,L=ee.id,G=ee.position,ge=ee.previous,Se=G.x-ge.x,B=G.y-ge.y,!t.isPicked({id:L,label:"node"})){oe.next=18;break}return oe.next=18,t.translate(Se,B);case 18:oe.next=33;break;case 20:if(F.type!=="pointerdown"){oe.next=24;break}d=0,oe.next=33;break;case 24:if(F.type!=="pointermove"){oe.next=28;break}d!==null&&d++,oe.next=33;break;case 28:if(F.type!=="pointerup"){oe.next=33;break}if(!(d!==null&&d<4)){oe.next=32;break}return oe.next=32,t.unselectAll();case 32:d=null;case 33:return oe.abrupt("return",F);case 34:case"end":return oe.stop()}},D)}));return function(D){return E.apply(this,arguments)}})()),{select:g,unselect:w}}function Q2(a,t){var r=null,s=function(){return r||(r=a.parentScope(ni))};function l(c,d){var p=s().getNode(c);if(p){var m=p.inputs[d];if(!m)throw new Error("cannot find input");var g=m.showControl,b=s().getConnections(),w=!!b.find(function(k){return k.target===c&&k.targetInput===d});m.showControl=t?t({hasAnyConnection:w,input:m}):!w,m.showControl!==g&&a.update("node",p.id)}}a.addPipe(function(c){return(c.type==="connectioncreated"||c.type==="connectionremoved")&&l(c.data.target,c.data.targetInput),c})}function kv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function ic(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function W2(a,t){var r=a,s=typeof t?.size>"u"?16:t.size,l=typeof t?.dynamic>"u"?!0:t.dynamic;function c(d){return Math.round(d/s)*s}r.addPipe(function(d){if(!d||Bn(d)!=="object"||!("type"in d))return d;if(l&&d.type==="nodetranslate"){var p=d.data.position,m=c(p.x),g=c(p.y);return ic(ic({},d),{},{data:ic(ic({},d.data),{},{position:{x:m,y:g}})})}if(!l&&d.type==="nodedragged"){var b=r.nodeViews.get(d.data.id);if(b){var w=b.position,k=w.x,E=w.y;b.translate(c(k),c(E))}}return d})}function J2(a,t,r){return Ff.apply(this,arguments)}function Ff(){return Ff=st(Ce.mark(function a(t,r,s){var l,c,d,p,m,g,b,w,k,E,D,F,U;return Ce.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return l=s||{},c=l.scale,d=c===void 0?.9:c,p=t.parentScope(ni),m=r.map(function(L){return Bn(L)==="object"?L:p.getNode(L)}),g=jb(m,t.nodeViews),b=Eb(g),w=[t.container.clientWidth,t.container.clientHeight],k=w[0],E=w[1],D=k/b.width,F=E/b.height,U=Math.min(F*d,D*d,1),t.area.transform.x=k/2-b.center.x*U,t.area.transform.y=E/2-b.center.y*U,ee.next=12,t.area.zoom(U,0,0);case 12:case"end":return ee.stop()}},a)})),Ff.apply(this,arguments)}var br=Object.freeze({__proto__:null,getBoundingBox:Y2,simpleNodesOrder:P2,restrictor:F2,accumulateOnCtrl:Z2,selectableNodes:K2,Selector:Ab,selector:X2,showInputControl:Q2,snapGrid:W2,zoomAt:J2});function Ev(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Cv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ev(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Ev(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function ek(a,t,r){return t=Vt(t),Qa(a,_b()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function _b(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_b=function(){return!!a})()}var Db=(function(a){function t(r){var s;return ht(this,t),s=ek(this,t,["area"]),Be(s,"nodeViews",new Map),Be(s,"connectionViews",new Map),Be(s,"elements",new q2),Be(s,"onContextMenu",function(l){s.emit({type:"contextmenu",data:{event:l,context:"root"}})}),s.container=r,r.style.overflow="hidden",r.addEventListener("contextmenu",s.onContextMenu),s.addPipe(function(l){return!l||!(Bn(l)==="object"&&"type"in l)||(l.type==="nodecreated"&&s.addNodeView(l.data),l.type==="noderemoved"&&s.removeNodeView(l.data.id),l.type==="connectioncreated"&&s.addConnectionView(l.data),l.type==="connectionremoved"&&s.removeConnectionView(l.data.id),l.type==="render"&&s.elements.set(l.data),l.type==="unmount"&&s.elements.delete(l.data.element)),l}),s.area=new Tb(r,{zoomed:function(c){return s.emit({type:"zoomed",data:c})},pointerDown:function(c,d){return void s.emit({type:"pointerdown",data:{position:c,event:d}})},pointerMove:function(c,d){return void s.emit({type:"pointermove",data:{position:c,event:d}})},pointerUp:function(c,d){return void s.emit({type:"pointerup",data:{position:c,event:d}})},resize:function(c){return void s.emit({type:"resized",data:{event:c}})},translated:function(c){return s.emit({type:"translated",data:c})},reordered:function(c){return s.emit({type:"reordered",data:{element:c}})}},{translate:function(c){return s.emit({type:"translate",data:c})},zoom:function(c){return s.emit({type:"zoom",data:c})}}),s}return aa(t,a),pt(t,[{key:"addNodeView",value:function(s){var l=this,c=s.id,d=new Ob(function(){return l.area.transform.k},{picked:function(){return void l.emit({type:"nodepicked",data:{id:c}})},translated:function(m){return l.emit({type:"nodetranslated",data:Cv({id:c},m)})},dragged:function(){return void l.emit({type:"nodedragged",data:s})},contextmenu:function(m){return void l.emit({type:"contextmenu",data:{event:m,context:s}})},resized:function(m){var g=m.size;return l.emit({type:"noderesized",data:{id:s.id,size:g}})}},{translate:function(m){return l.emit({type:"nodetranslate",data:Cv({id:c},m)})},resize:function(m){var g=m.size;return l.emit({type:"noderesize",data:{id:s.id,size:g}})}});return this.nodeViews.set(c,d),this.area.content.add(d.element),this.emit({type:"render",data:{element:d.element,type:"node",payload:s}}),d}},{key:"removeNodeView",value:function(s){var l=this.nodeViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.nodeViews.delete(s),this.area.content.remove(l.element))}},{key:"addConnectionView",value:function(s){var l=this,c=new G2({contextmenu:function(p){return void l.emit({type:"contextmenu",data:{event:p,context:s}})}});return this.connectionViews.set(s.id,c),this.area.content.add(c.element),this.emit({type:"render",data:{element:c.element,type:"connection",payload:s}}),c}},{key:"removeConnectionView",value:function(s){var l=this.connectionViews.get(s);l&&(this.emit({type:"unmount",data:{element:l.element}}),this.connectionViews.delete(s),this.area.content.remove(l.element))}},{key:"update",value:(function(){var r=st(Ce.mark(function l(c,d){var p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(p=this.elements.get(c,d),!p){g.next=4;break}return g.next=4,this.emit({type:"render",data:p});case 4:case"end":return g.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"resize",value:(function(){var r=st(Ce.mark(function l(c,d,p){var m;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(m=this.nodeViews.get(c),!m){b.next=5;break}return b.next=4,m.resize(d,p);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},l,this)}));function s(l,c,d){return r.apply(this,arguments)}return s})()},{key:"translate",value:(function(){var r=st(Ce.mark(function l(c,d){var p,m,g;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p=d.x,m=d.y,g=this.nodeViews.get(c),!g){w.next=6;break}return w.next=5,g.translate(p,m);case 5:return w.abrupt("return",w.sent);case 6:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"destroy",value:function(){var s=this;this.container.removeEventListener("contextmenu",this.onContextMenu),Array.from(this.connectionViews.keys()).forEach(function(l){return s.removeConnectionView(l)}),Array.from(this.nodeViews.keys()).forEach(function(l){return s.removeNodeView(l)}),this.area.destroy()}}])})(Go);const Tv=Object.freeze(Object.defineProperty({__proto__:null,Area:Tb,AreaExtensions:br,AreaPlugin:Db,BaseAreaPlugin:Go,Drag:Dh,NodeView:Ob,Zoom:Cb,usePointerListener:kb},Symbol.toStringTag,{value:"Module"}));function tk(a,t){for(;!{}.hasOwnProperty.call(a,t)&&(a=Vt(a))!==null;);return a}function Uo(){return Uo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(a,t,r){var s=tk(a,t);if(s){var l=Object.getOwnPropertyDescriptor(s,t);return l.get?l.get.call(arguments.length<3?a:r):l.value}},Uo.apply(null,arguments)}function nk(a){if(Array.isArray(a))return a}function ak(a,t){var r=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(r!=null){var s,l,c,d,p=[],m=!0,g=!1;try{if(c=(r=r.call(a)).next,t!==0)for(;!(m=(s=c.call(r)).done)&&(p.push(s.value),p.length!==t);m=!0);}catch(b){g=!0,l=b}finally{try{if(!m&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(g)throw l}}return p}}function rk(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fn(a,t){return nk(a)||ak(a,t)||xb(a,t)||rk()}function Nv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Ef(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Nv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function ik(a){var t=null,r=null;function s(c){r&&c.removeConnectionView(r),t=null,r=null}function l(c){s(c),r="pseudo_".concat(ai())}return{isMounted:function(){return!!r},mount:l,render:function(d,p,m){var g=p.x,b=p.y,w=m.side==="output",k={x:g+(w?-3:3),y:b};if(!r)throw new Error("pseudo connection id wasn't generated");var E=w?Ef({id:r,source:m.nodeId,sourceOutput:m.key,target:"",targetInput:""},a??{}):Ef({id:r,target:m.nodeId,targetInput:m.key,source:"",sourceOutput:""},a??{});if(!t){var D=d.addConnectionView(E);t=D.element}t&&d.emit({type:"render",data:Ef({element:t,type:"connection",payload:E},w?{end:k}:{start:k})})},unmount:s}}function sk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=ok(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function ok(a,t){if(a){if(typeof a=="string")return Ov(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ov(a,t):void 0}}function Ov(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function lk(a,t){var r=sk(t),s;try{for(r.s();!(s=r.n()).done;){var l=s.value,c=a.get(l);if(c)return c}}catch(d){r.e(d)}finally{r.f()}}function Mb(a,t){var r,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:document,l=s.elementsFromPoint(a,t),c=(r=l[0])===null||r===void 0?void 0:r.shadowRoot;return c&&c!==s&&l.unshift.apply(l,Ns(Mb(a,t,c))),l}var Mh=(function(){function a(){ht(this,a)}return pt(a,[{key:"setContext",value:function(r){this.context=r}}])})();function Rb(a,t){var r=a.side==="output"&&t.side==="input",s=a.side==="input"&&t.side==="output",l=r?[a,t]:s?[t,a]:[],c=Fn(l,2),d=c[0],p=c[1];if(d&&p)return[d,p]}function ck(a,t){return!!Rb(a,t)}function uk(a,t,r){var s=Rb(a,t)||[null,null],l=Fn(s,2),c=l[0],d=l[1];if(c&&d)return r.editor.addConnection({id:ai(),source:c.nodeId,sourceOutput:c.key,target:d.nodeId,targetInput:d.key}),!0}function dk(a,t){var r=t.getNode(a.nodeId);if(!r)throw new Error("cannot find node");var s=a.side==="input"?r.inputs:r.outputs;return s[a.key]}function fk(a,t){var r=a.nodeId,s=a.side,l=a.key;return t.getConnections().filter(function(c){if(s==="input")return c.target===r&&c.targetInput===l;if(s==="output")return c.source===r&&c.sourceOutput===l})}function Zf(a,t){var r=a.map(function(s){var l=dk(s,t),c=l?.multipleConnections;return c?[]:fk(s,t)}).flat();return{commit:function(){var l=Array.from(new Set(r.map(function(c){var d=c.id;return d})));l.forEach(function(c){return void t.removeConnection(c)})}}}function Rh(a,t,r){return t=Vt(t),Qa(a,zb()?Reflect.construct(t,[],Vt(a).constructor):t.apply(a,r))}function zb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zb=function(){return!!a})()}var hk=(function(a){function t(r,s){var l;return ht(this,t),l=Rh(this,t),l.initial=r,l.params=s,l}return aa(t,a),pt(t,[{key:"pick",value:(function(){var r=st(Ce.mark(function l(c,d){var p,m;return Ce.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:p=c.socket,this.params.canMakeConnection(this.initial,p)&&(Zf([this.initial,p],d.editor).commit(),m=this.params.makeConnection(this.initial,p,d),this.drop(d,m?p:null,m));case 2:case"end":return b.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new zh(this.params))}}])})(Mh),pk=(function(a){function t(r,s,l){var c;ht(this,t),c=Rh(this,t),c.connection=r,c.params=s;var d=Array.from(l.socketsCache.values()).find(function(p){return p.nodeId===c.connection.source&&p.side==="output"&&p.key===c.connection.sourceOutput});if(!d)throw new Error("cannot find output socket");return c.outputSocket=d,c}return aa(t,a),pt(t,[{key:"init",value:(function(){var r=st(Ce.mark(function l(c){var d=this;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:c.scope.emit({type:"connectionpick",data:{socket:this.outputSocket}}).then(function(g){g?(c.editor.removeConnection(d.connection.id),d.initial=d.outputSocket):d.drop(c)});case 1:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"pick",value:(function(){var r=st(Ce.mark(function l(c,d){var p,m,g,b,w,k;return Ce.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:p=c.socket,m=c.event,this.initial&&!(p.side==="input"&&this.connection.target===p.nodeId&&this.connection.targetInput===p.key)?this.params.canMakeConnection(this.initial,p)&&(Zf([this.initial,p],d.editor).commit(),g=this.params.makeConnection(this.initial,p,d),b=g?p:null,this.drop(d,b,g)):m==="down"&&this.initial&&(Zf([this.initial,p],d.editor).commit(),w=this.params.makeConnection(this.initial,p,d),k=w?null:p,this.drop(d,k,w));case 2:case"end":return D.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),this.context.switchTo(new zh(this.params))}}])})(Mh),zh=(function(a){function t(r){var s;return ht(this,t),s=Rh(this,t),s.params=r,s}return aa(t,a),pt(t,[{key:"pick",value:(function(){var r=st(Ce.mark(function l(c,d){var p,m,g,b;return Ce.wrap(function(k){for(;;)switch(k.prev=k.next){case 0:if(p=c.socket,m=c.event,m==="down"){k.next=3;break}return k.abrupt("return");case 3:if(p.side!=="input"){k.next=11;break}if(g=d.editor.getConnections().find(function(E){return E.target===p.nodeId&&E.targetInput===p.key}),!g){k.next=11;break}return b=new pk(g,this.params,d),k.next=9,b.init(d);case 9:return this.context.switchTo(b),k.abrupt("return");case 11:return k.next=13,d.scope.emit({type:"connectionpick",data:{socket:p}});case 13:if(!k.sent){k.next=17;break}this.context.switchTo(new hk(p,this.params)),k.next=18;break;case 17:this.drop(d);case 18:case"end":return k.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"drop",value:function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.initial&&s.scope.emit({type:"connectiondrop",data:{initial:this.initial,socket:l,created:c}}),delete this.initial}}])})(Mh),mk=(function(){function a(t){ht(this,a);var r=t?.canMakeConnection||ck,s=t?.makeConnection||uk;this.switchTo(new zh({canMakeConnection:r,makeConnection:s}))}return pt(a,[{key:"pick",value:(function(){var t=st(Ce.mark(function s(l,c){return Ce.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.currentState.pick(l,c);case 2:case"end":return p.stop()}},s,this)}));function r(s,l){return t.apply(this,arguments)}return r})()},{key:"getPickedSocket",value:function(){return this.currentState.initial}},{key:"switchTo",value:function(r){r.setContext(this),this.currentState=r}},{key:"drop",value:function(r){this.currentState.drop(r)}}])})();function gk(){return function(){return new mk}}var yk=Object.freeze({__proto__:null,setup:gk}),vk=Object.freeze({__proto__:null,classic:yk});function bk(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=wk(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function wk(a,t){if(a){if(typeof a=="string")return jv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jv(a,t):void 0}}function jv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function Sk(a,t,r){return t=Vt(t),Qa(a,Lb()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function Lb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lb=function(){return!!a})()}function xk(a,t,r,s){var l=Uo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var kk=(function(a){function t(){var r;return ht(this,t),r=Sk(this,t,["connection"]),Be(r,"presets",[]),Be(r,"currentFlow",null),Be(r,"preudoconnection",ik({isPseudo:!0})),Be(r,"socketsCache",new Map),r}return aa(t,a),pt(t,[{key:"addPreset",value:function(s){this.presets.push(s)}},{key:"findPreset",value:function(s){var l=bk(this.presets),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=d(s);if(p)return p}}catch(m){l.e(m)}finally{l.f()}return null}},{key:"update",value:function(){if(this.currentFlow){var s=this.currentFlow.getPickedSocket();s&&this.preudoconnection.render(this.areaPlugin,this.areaPlugin.area.pointer,s)}}},{key:"drop",value:function(){var s={editor:this.editor,scope:this,socketsCache:this.socketsCache};this.currentFlow&&(this.currentFlow.drop(s),this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null)}},{key:"pick",value:(function(){var r=st(Ce.mark(function l(c,d){var p,m,g;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(p={editor:this.editor,scope:this,socketsCache:this.socketsCache},m=Mb(c.clientX,c.clientY),g=lk(this.socketsCache,m),!g){w.next=13;break}if(c.preventDefault(),c.stopPropagation(),this.currentFlow=this.currentFlow||this.findPreset(g),!this.currentFlow){w.next=11;break}return w.next=10,this.currentFlow.pick({socket:g,event:d},p);case 10:this.preudoconnection.mount(this.areaPlugin);case 11:w.next=14;break;case 13:this.currentFlow&&this.currentFlow.drop(p);case 14:this.currentFlow&&!this.currentFlow.getPickedSocket()&&(this.preudoconnection.unmount(this.areaPlugin),this.currentFlow=null),this.update();case 16:case"end":return w.stop()}},l,this)}));function s(l,c){return r.apply(this,arguments)}return s})()},{key:"setParent",value:function(s){var l=this;xk(t,"setParent",this)([s]),this.areaPlugin=this.parentScope(Go),this.editor=this.areaPlugin.parentScope(ni);var c=function(p){l.pick(p,"down")};this.addPipe(function(d){if(!d||Bn(d)!=="object"||!("type"in d))return d;if(d.type==="pointermove")l.update();else if(d.type==="pointerup")l.pick(d.data.event,"up");else if(d.type==="render"){if(d.data.type==="socket"){var p=d.data.element;p.addEventListener("pointerdown",c),l.socketsCache.set(p,d.data)}}else if(d.type==="unmount"){var m=d.data.element;m.removeEventListener("pointerdown",c),l.socketsCache.delete(m)}return d})}}])})(Ts);function Ek(a,t){var r=Fn(a,2),s=r[0],l=s.x,c=s.y,d=r[1],p=d.x,m=d.y,g=Math.abs(c-m),b=l+Math.max(g/2,Math.abs(p-l))*t,w=p-Math.max(g/2,Math.abs(p-l))*t;return"M ".concat(l," ").concat(c," C ").concat(b," ").concat(c," ").concat(w," ").concat(m," ").concat(p," ").concat(m)}function Ck(a,t,r){var s=Fn(a,2),l=s[0],c=l.x,d=l.y,p=s[1],m=p.x,g=p.y,b=g>d?1:-1,w=r+Math.abs(c-m)/(r/2),k=(c+m)/2,E=d-b*w,D=(g-d)*t;return`
        M `.concat(c," ").concat(d,`
        C `).concat(c+w," ").concat(d,`
        `).concat(c+w," ").concat(E-D,`
        `).concat(k," ").concat(E,`
        C `).concat(m-w," ").concat(E+D,`
        `).concat(m-w," ").concat(g,`
        `).concat(m," ").concat(g,`
    `)}function Tk(a,t){return Xf.apply(this,arguments)}function Xf(){return Xf=st(Ce.mark(function a(t,r){var s,l,c,d,p;return Ce.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(t.offsetParent){g.next=5;break}return g.next=3,new Promise(function(b){return setTimeout(b,0)});case 3:g.next=0;break;case 5:if(s=t.offsetLeft,l=t.offsetTop,c=t.offsetParent,c){g.next=10;break}throw new Error("child has null offsetParent");case 10:for(;c!==null&&c!==r;)s+=c.offsetLeft+c.clientLeft,l+=c.offsetTop+c.clientTop,c=c.offsetParent;return d=t.offsetWidth,p=t.offsetHeight,g.abrupt("return",{x:s+d/2,y:l+p/2});case 14:case"end":return g.stop()}},a)})),Xf.apply(this,arguments)}var Nk=(function(){function a(){ht(this,a),Be(this,"listeners",new Set)}return pt(a,[{key:"emit",value:function(r){this.listeners.forEach(function(s){s(r)})}},{key:"listen",value:function(r){var s=this;return this.listeners.add(r),function(){s.listeners.delete(r)}}}])})(),Ok=(function(){function a(){ht(this,a),Be(this,"elements",new Map)}return pt(a,[{key:"getPosition",value:function(r){var s,l,c=Array.from(this.elements.values()).flat(),d=c.filter(function(p){return p.side===r.side&&p.nodeId===r.nodeId&&p.key===r.key});return d.length>1&&console.warn(["Found more than one element for socket with same key and side.","Probably it was not unmounted correctly"].join(" "),r),(s=(l=d.pop())===null||l===void 0?void 0:l.position)!==null&&s!==void 0?s:null}},{key:"add",value:function(r){var s=this.elements.get(r.element);this.elements.set(r.element,s?[].concat(Ns(s.filter(function(l){return!(l.nodeId===r.nodeId&&l.key===r.key&&l.side===r.side)})),[r]):[r])}},{key:"remove",value:function(r){this.elements.delete(r)}},{key:"snapshot",value:function(){return Array.from(this.elements.values()).flat()}}])})(),jk=(function(){function a(){ht(this,a),Be(this,"sockets",new Ok),Be(this,"emitter",new Nk),Be(this,"area",null)}return pt(a,[{key:"attach",value:function(r){var s=this;this.area||r.hasParent()&&(this.area=r.parentScope(Go),this.area.addPipe((function(){var l=st(Ce.mark(function c(d){var p,m,g,b,w,k,E,D,F,U,te;return Ce.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!(d.type==="rendered"&&d.data.type==="socket")){L.next=8;break}return p=d.data,m=p.nodeId,g=p.key,b=p.side,w=p.element,L.next=4,s.calculatePosition(m,b,g,w);case 4:k=L.sent,k&&(s.sockets.add({nodeId:m,key:g,side:b,element:w,position:k}),s.emitter.emit({nodeId:m,key:g,side:b})),L.next=24;break;case 8:if(d.type!=="unmount"){L.next=12;break}s.sockets.remove(d.data.element),L.next=24;break;case 12:if(d.type!=="nodetranslated"){L.next=16;break}s.emitter.emit({nodeId:d.data.id}),L.next=24;break;case 16:if(d.type!=="noderesized"){L.next=23;break}return E=d.data.id,L.next=20,Promise.all(s.sockets.snapshot().filter(function(G){return G.nodeId===d.data.id&&G.side==="output"}).map((function(){var G=st(Ce.mark(function ge(Se){var B,pe,oe,ye;return Ce.wrap(function(De){for(;;)switch(De.prev=De.next){case 0:return B=Se.side,pe=Se.key,oe=Se.element,De.next=3,s.calculatePosition(E,B,pe,oe);case 3:ye=De.sent,ye&&(Se.position=ye);case 5:case"end":return De.stop()}},ge)}));return function(ge){return G.apply(this,arguments)}})()));case 20:s.emitter.emit({nodeId:E}),L.next=24;break;case 23:d.type==="render"&&d.data.type==="connection"&&(D=d.data.payload,F=D.source,U=D.target,te=F||U,s.emitter.emit({nodeId:te}));case 24:return L.abrupt("return",d);case 25:case"end":return L.stop()}},c)}));return function(c){return l.apply(this,arguments)}})()))}},{key:"listen",value:function(r,s,l,c){var d=this,p=this.emitter.listen(function(m){if(m.nodeId===r&&(!m.key||m.side===s)&&(!m.side||m.key===l)){var g,b=d.sockets.getPosition({side:s,nodeId:r,key:l});if(!b)return;var w=b.x,k=b.y,E=(g=d.area)===null||g===void 0?void 0:g.nodeViews.get(r);E&&c({x:w+E.position.x,y:k+E.position.y})}});return this.sockets.snapshot().forEach(function(m){m.nodeId===r&&d.emitter.emit(m)}),p}}])})();function Ak(a,t,r){return t=Vt(t),Qa(a,Bb()?Reflect.construct(t,[],Vt(a).constructor):t.apply(a,r))}function Bb(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Bb=function(){return!!a})()}var _k=(function(a){function t(r){var s;return ht(this,t),s=Ak(this,t),s.props=r,s}return aa(t,a),pt(t,[{key:"calculatePosition",value:(function(){var r=st(Ce.mark(function l(c,d,p,m){var g,b,w,k;return Ce.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(w=(g=this.area)===null||g===void 0?void 0:g.nodeViews.get(c),w!=null&&w.element){D.next=3;break}return D.abrupt("return",null);case 3:return D.next=5,Tk(m,w.element);case 5:if(k=D.sent,!((b=this.props)!==null&&b!==void 0&&b.offset)){D.next=8;break}return D.abrupt("return",this.props.offset(k,c,d,p));case 8:return D.abrupt("return",{x:k.x+12*(d==="input"?-1:1),y:k.y});case 9:case"end":return D.stop()}},l,this)}));function s(l,c,d,p){return r.apply(this,arguments)}return s})()}])})(jk);function Dk(a){return new _k(a)}function In(a,t){return t||(t=a.slice(0)),Object.freeze(Object.defineProperties(a,{raw:{value:Object.freeze(t)}}))}var na=function(){return na=Object.assign||function(t){for(var r,s=1,l=arguments.length;s<l;s++){r=arguments[s];for(var c in r)Object.prototype.hasOwnProperty.call(r,c)&&(t[c]=r[c])}return t},na.apply(this,arguments)};function Ac(a,t,r){if(r||arguments.length===2)for(var s=0,l=t.length,c;s<l;s++)(c||!(s in t))&&(c||(c=Array.prototype.slice.call(t,0,s)),c[s]=t[s]);return a.concat(c||Array.prototype.slice.call(t))}var Xt="-ms-",zo="-moz-",Ot="-webkit-",Ib="comm",Uc="rule",Lh="decl",Mk="@import",$b="@keyframes",Rk="@layer",Ub=Math.abs,Bh=String.fromCharCode,Kf=Object.assign;function zk(a,t){return On(a,0)^45?(((t<<2^On(a,0))<<2^On(a,1))<<2^On(a,2))<<2^On(a,3):0}function Hb(a){return a.trim()}function wr(a,t){return(a=t.exec(a))?a[0]:a}function it(a,t,r){return a.replace(t,r)}function vc(a,t,r){return a.indexOf(t,r)}function On(a,t){return a.charCodeAt(t)|0}function ws(a,t,r){return a.slice(t,r)}function Ya(a){return a.length}function Vb(a){return a.length}function jo(a,t){return t.push(a),a}function Lk(a,t){return a.map(t).join("")}function Av(a,t){return a.filter(function(r){return!wr(r,t)})}var Hc=1,Ss=1,Gb=0,ja=0,vn=0,Os="";function Vc(a,t,r,s,l,c,d,p){return{value:a,root:t,parent:r,type:s,props:l,children:c,line:Hc,column:Ss,length:d,return:"",siblings:p}}function Xr(a,t){return Kf(Vc("",null,null,"",null,null,0,a.siblings),a,{length:-a.length},t)}function us(a){for(;a.root;)a=Xr(a.root,{children:[a]});jo(a,a.siblings)}function Bk(){return vn}function Ik(){return vn=ja>0?On(Os,--ja):0,Ss--,vn===10&&(Ss=1,Hc--),vn}function Ia(){return vn=ja<Gb?On(Os,ja++):0,Ss++,vn===10&&(Ss=1,Hc++),vn}function Ti(){return On(Os,ja)}function bc(){return ja}function Gc(a,t){return ws(Os,a,t)}function Qf(a){switch(a){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $k(a){return Hc=Ss=1,Gb=Ya(Os=a),ja=0,[]}function Uk(a){return Os="",a}function Cf(a){return Hb(Gc(ja-1,Wf(a===91?a+2:a===40?a+1:a)))}function Hk(a){for(;(vn=Ti())&&vn<33;)Ia();return Qf(a)>2||Qf(vn)>3?"":" "}function Vk(a,t){for(;--t&&Ia()&&!(vn<48||vn>102||vn>57&&vn<65||vn>70&&vn<97););return Gc(a,bc()+(t<6&&Ti()==32&&Ia()==32))}function Wf(a){for(;Ia();)switch(vn){case a:return ja;case 34:case 39:a!==34&&a!==39&&Wf(vn);break;case 40:a===41&&Wf(a);break;case 92:Ia();break}return ja}function Gk(a,t){for(;Ia()&&a+vn!==57;)if(a+vn===84&&Ti()===47)break;return"/*"+Gc(t,ja-1)+"*"+Bh(a===47?a:Ia())}function qk(a){for(;!Qf(Ti());)Ia();return Gc(a,ja)}function Yk(a){return Uk(wc("",null,null,null,[""],a=$k(a),0,[0],a))}function wc(a,t,r,s,l,c,d,p,m){for(var g=0,b=0,w=d,k=0,E=0,D=0,F=1,U=1,te=1,ee=0,L="",G=l,ge=c,Se=s,B=L;U;)switch(D=ee,ee=Ia()){case 40:if(D!=108&&On(B,w-1)==58){vc(B+=it(Cf(ee),"&","&\f"),"&\f",Ub(g?p[g-1]:0))!=-1&&(te=-1);break}case 34:case 39:case 91:B+=Cf(ee);break;case 9:case 10:case 13:case 32:B+=Hk(D);break;case 92:B+=Vk(bc()-1,7);continue;case 47:switch(Ti()){case 42:case 47:jo(Pk(Gk(Ia(),bc()),t,r,m),m);break;default:B+="/"}break;case 123*F:p[g++]=Ya(B)*te;case 125*F:case 59:case 0:switch(ee){case 0:case 125:U=0;case 59+b:te==-1&&(B=it(B,/\f/g,"")),E>0&&Ya(B)-w&&jo(E>32?Dv(B+";",s,r,w-1,m):Dv(it(B," ","")+";",s,r,w-2,m),m);break;case 59:B+=";";default:if(jo(Se=_v(B,t,r,g,b,l,p,L,G=[],ge=[],w,c),c),ee===123)if(b===0)wc(B,t,Se,Se,G,c,w,p,ge);else switch(k===99&&On(B,3)===110?100:k){case 100:case 108:case 109:case 115:wc(a,Se,Se,s&&jo(_v(a,Se,Se,0,0,l,p,L,l,G=[],w,ge),ge),l,ge,w,p,s?G:ge);break;default:wc(B,Se,Se,Se,[""],ge,0,p,ge)}}g=b=E=0,F=te=1,L=B="",w=d;break;case 58:w=1+Ya(B),E=D;default:if(F<1){if(ee==123)--F;else if(ee==125&&F++==0&&Ik()==125)continue}switch(B+=Bh(ee),ee*F){case 38:te=b>0?1:(B+="\f",-1);break;case 44:p[g++]=(Ya(B)-1)*te,te=1;break;case 64:Ti()===45&&(B+=Cf(Ia())),k=Ti(),b=w=Ya(L=B+=qk(bc())),ee++;break;case 45:D===45&&Ya(B)==2&&(F=0)}}return c}function _v(a,t,r,s,l,c,d,p,m,g,b,w){for(var k=l-1,E=l===0?c:[""],D=Vb(E),F=0,U=0,te=0;F<s;++F)for(var ee=0,L=ws(a,k+1,k=Ub(U=d[F])),G=a;ee<D;++ee)(G=Hb(U>0?E[ee]+" "+L:it(L,/&\f/g,E[ee])))&&(m[te++]=G);return Vc(a,t,r,l===0?Uc:p,m,g,b,w)}function Pk(a,t,r,s){return Vc(a,t,r,Ib,Bh(Bk()),ws(a,2,-2),0,s)}function Dv(a,t,r,s,l){return Vc(a,t,r,Lh,ws(a,0,s),ws(a,s+1,-1),s,l)}function qb(a,t,r){switch(zk(a,t)){case 5103:return Ot+"print-"+a+a;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ot+a+a;case 4789:return zo+a+a;case 5349:case 4246:case 4810:case 6968:case 2756:return Ot+a+zo+a+Xt+a+a;case 5936:switch(On(a,t+11)){case 114:return Ot+a+Xt+it(a,/[svh]\w+-[tblr]{2}/,"tb")+a;case 108:return Ot+a+Xt+it(a,/[svh]\w+-[tblr]{2}/,"tb-rl")+a;case 45:return Ot+a+Xt+it(a,/[svh]\w+-[tblr]{2}/,"lr")+a}case 6828:case 4268:case 2903:return Ot+a+Xt+a+a;case 6165:return Ot+a+Xt+"flex-"+a+a;case 5187:return Ot+a+it(a,/(\w+).+(:[^]+)/,Ot+"box-$1$2"+Xt+"flex-$1$2")+a;case 5443:return Ot+a+Xt+"flex-item-"+it(a,/flex-|-self/g,"")+(wr(a,/flex-|baseline/)?"":Xt+"grid-row-"+it(a,/flex-|-self/g,""))+a;case 4675:return Ot+a+Xt+"flex-line-pack"+it(a,/align-content|flex-|-self/g,"")+a;case 5548:return Ot+a+Xt+it(a,"shrink","negative")+a;case 5292:return Ot+a+Xt+it(a,"basis","preferred-size")+a;case 6060:return Ot+"box-"+it(a,"-grow","")+Ot+a+Xt+it(a,"grow","positive")+a;case 4554:return Ot+it(a,/([^-])(transform)/g,"$1"+Ot+"$2")+a;case 6187:return it(it(it(a,/(zoom-|grab)/,Ot+"$1"),/(image-set)/,Ot+"$1"),a,"")+a;case 5495:case 3959:return it(a,/(image-set\([^]*)/,Ot+"$1$`$1");case 4968:return it(it(a,/(.+:)(flex-)?(.*)/,Ot+"box-pack:$3"+Xt+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ot+a+a;case 4200:if(!wr(a,/flex-|baseline/))return Xt+"grid-column-align"+ws(a,t)+a;break;case 2592:case 3360:return Xt+it(a,"template-","")+a;case 4384:case 3616:return r&&r.some(function(s,l){return t=l,wr(s.props,/grid-\w+-end/)})?~vc(a+(r=r[t].value),"span",0)?a:Xt+it(a,"-start","")+a+Xt+"grid-row-span:"+(~vc(r,"span",0)?wr(r,/\d+/):+wr(r,/\d+/)-+wr(a,/\d+/))+";":Xt+it(a,"-start","")+a;case 4896:case 4128:return r&&r.some(function(s){return wr(s.props,/grid-\w+-start/)})?a:Xt+it(it(a,"-end","-span"),"span ","")+a;case 4095:case 3583:case 4068:case 2532:return it(a,/(.+)-inline(.+)/,Ot+"$1$2")+a;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ya(a)-1-t>6)switch(On(a,t+1)){case 109:if(On(a,t+4)!==45)break;case 102:return it(a,/(.+:)(.+)-([^]+)/,"$1"+Ot+"$2-$3$1"+zo+(On(a,t+3)==108?"$3":"$2-$3"))+a;case 115:return~vc(a,"stretch",0)?qb(it(a,"stretch","fill-available"),t,r)+a:a}break;case 5152:case 5920:return it(a,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(s,l,c,d,p,m,g){return Xt+l+":"+c+g+(d?Xt+l+"-span:"+(p?m:+m-+c)+g:"")+a});case 4949:if(On(a,t+6)===121)return it(a,":",":"+Ot)+a;break;case 6444:switch(On(a,On(a,14)===45?18:11)){case 120:return it(a,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Ot+(On(a,14)===45?"inline-":"")+"box$3$1"+Ot+"$2$3$1"+Xt+"$2box$3")+a;case 100:return it(a,":",":"+Xt)+a}break;case 5719:case 2647:case 2135:case 3927:case 2391:return it(a,"scroll-","scroll-snap-")+a}return a}function _c(a,t){for(var r="",s=0;s<a.length;s++)r+=t(a[s],s,a,t)||"";return r}function Fk(a,t,r,s){switch(a.type){case Rk:if(a.children.length)break;case Mk:case Lh:return a.return=a.return||a.value;case Ib:return"";case $b:return a.return=a.value+"{"+_c(a.children,s)+"}";case Uc:if(!Ya(a.value=a.props.join(",")))return""}return Ya(r=_c(a.children,s))?a.return=a.value+"{"+r+"}":""}function Zk(a){var t=Vb(a);return function(r,s,l,c){for(var d="",p=0;p<t;p++)d+=a[p](r,s,l,c)||"";return d}}function Xk(a){return function(t){t.root||(t=t.return)&&a(t)}}function Kk(a,t,r,s){if(a.length>-1&&!a.return)switch(a.type){case Lh:a.return=qb(a.value,a.length,r);return;case $b:return _c([Xr(a,{value:it(a.value,"@","@"+Ot)})],s);case Uc:if(a.length)return Lk(r=a.props,function(l){switch(wr(l,s=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":us(Xr(a,{props:[it(l,/:(read-\w+)/,":"+zo+"$1")]})),us(Xr(a,{props:[l]})),Kf(a,{props:Av(r,s)});break;case"::placeholder":us(Xr(a,{props:[it(l,/:(plac\w+)/,":"+Ot+"input-$1")]})),us(Xr(a,{props:[it(l,/:(plac\w+)/,":"+zo+"$1")]})),us(Xr(a,{props:[it(l,/:(plac\w+)/,Xt+"input-$1")]})),us(Xr(a,{props:[l]})),Kf(a,{props:Av(r,s)});break}return""})}}var Qk={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ha={},xs=typeof process<"u"&&ha!==void 0&&(ha.REACT_APP_SC_ATTR||ha.SC_ATTR)||"data-styled",Yb="active",Pb="data-styled-version",qc="6.1.19",Ih=`/*!sc*/
`,Dc=typeof window<"u"&&typeof document<"u",Wk=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&ha!==void 0&&ha.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&ha.REACT_APP_SC_DISABLE_SPEEDY!==""?ha.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&ha.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&ha!==void 0&&ha.SC_DISABLE_SPEEDY!==void 0&&ha.SC_DISABLE_SPEEDY!==""&&ha.SC_DISABLE_SPEEDY!=="false"&&ha.SC_DISABLE_SPEEDY),Yc=Object.freeze([]),ks=Object.freeze({});function Jk(a,t,r){return r===void 0&&(r=ks),a.theme!==r.theme&&a.theme||t||r.theme}var Fb=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),eE=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,tE=/(^-|-$)/g;function Mv(a){return a.replace(eE,"-").replace(tE,"")}var nE=/(a)(d)/gi,sc=52,Rv=function(a){return String.fromCharCode(a+(a>25?39:97))};function Jf(a){var t,r="";for(t=Math.abs(a);t>sc;t=t/sc|0)r=Rv(t%sc)+r;return(Rv(t%sc)+r).replace(nE,"$1-$2")}var Tf,Zb=5381,ms=function(a,t){for(var r=t.length;r;)a=33*a^t.charCodeAt(--r);return a},Xb=function(a){return ms(Zb,a)};function aE(a){return Jf(Xb(a)>>>0)}function rE(a){return a.displayName||a.name||"Component"}function Nf(a){return typeof a=="string"&&!0}var Kb=typeof Symbol=="function"&&Symbol.for,Qb=Kb?Symbol.for("react.memo"):60115,iE=Kb?Symbol.for("react.forward_ref"):60112,sE={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},oE={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Wb={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lE=((Tf={})[iE]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Tf[Qb]=Wb,Tf);function zv(a){return("type"in(t=a)&&t.type.$$typeof)===Qb?Wb:"$$typeof"in a?lE[a.$$typeof]:sE;var t}var cE=Object.defineProperty,uE=Object.getOwnPropertyNames,Lv=Object.getOwnPropertySymbols,dE=Object.getOwnPropertyDescriptor,fE=Object.getPrototypeOf,Bv=Object.prototype;function Jb(a,t,r){if(typeof t!="string"){if(Bv){var s=fE(t);s&&s!==Bv&&Jb(a,s,r)}var l=uE(t);Lv&&(l=l.concat(Lv(t)));for(var c=zv(a),d=zv(t),p=0;p<l.length;++p){var m=l[p];if(!(m in oE||r&&r[m]||d&&m in d||c&&m in c)){var g=dE(t,m);try{cE(a,m,g)}catch{}}}}return a}function Es(a){return typeof a=="function"}function $h(a){return typeof a=="object"&&"styledComponentId"in a}function ki(a,t){return a&&t?"".concat(a," ").concat(t):a||t||""}function Iv(a,t){if(a.length===0)return"";for(var r=a[0],s=1;s<a.length;s++)r+=a[s];return r}function Ho(a){return a!==null&&typeof a=="object"&&a.constructor.name===Object.name&&!("props"in a&&a.$$typeof)}function eh(a,t,r){if(r===void 0&&(r=!1),!r&&!Ho(a)&&!Array.isArray(a))return t;if(Array.isArray(t))for(var s=0;s<t.length;s++)a[s]=eh(a[s],t[s]);else if(Ho(t))for(var s in t)a[s]=eh(a[s],t[s]);return a}function Uh(a,t){Object.defineProperty(a,"toString",{value:t})}function qo(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(a," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var hE=(function(){function a(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return a.prototype.indexOfGroup=function(t){for(var r=0,s=0;s<t;s++)r+=this.groupSizes[s];return r},a.prototype.insertRules=function(t,r){if(t>=this.groupSizes.length){for(var s=this.groupSizes,l=s.length,c=l;t>=c;)if((c<<=1)<0)throw qo(16,"".concat(t));this.groupSizes=new Uint32Array(c),this.groupSizes.set(s),this.length=c;for(var d=l;d<c;d++)this.groupSizes[d]=0}for(var p=this.indexOfGroup(t+1),m=(d=0,r.length);d<m;d++)this.tag.insertRule(p,r[d])&&(this.groupSizes[t]++,p++)},a.prototype.clearGroup=function(t){if(t<this.length){var r=this.groupSizes[t],s=this.indexOfGroup(t),l=s+r;this.groupSizes[t]=0;for(var c=s;c<l;c++)this.tag.deleteRule(s)}},a.prototype.getGroup=function(t){var r="";if(t>=this.length||this.groupSizes[t]===0)return r;for(var s=this.groupSizes[t],l=this.indexOfGroup(t),c=l+s,d=l;d<c;d++)r+="".concat(this.tag.getRule(d)).concat(Ih);return r},a})(),Sc=new Map,Mc=new Map,xc=1,oc=function(a){if(Sc.has(a))return Sc.get(a);for(;Mc.has(xc);)xc++;var t=xc++;return Sc.set(a,t),Mc.set(t,a),t},pE=function(a,t){xc=t+1,Sc.set(a,t),Mc.set(t,a)},mE="style[".concat(xs,"][").concat(Pb,'="').concat(qc,'"]'),gE=new RegExp("^".concat(xs,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),yE=function(a,t,r){for(var s,l=r.split(","),c=0,d=l.length;c<d;c++)(s=l[c])&&a.registerName(t,s)},vE=function(a,t){for(var r,s=((r=t.textContent)!==null&&r!==void 0?r:"").split(Ih),l=[],c=0,d=s.length;c<d;c++){var p=s[c].trim();if(p){var m=p.match(gE);if(m){var g=0|parseInt(m[1],10),b=m[2];g!==0&&(pE(b,g),yE(a,b,m[3]),a.getTag().insertRules(g,l)),l.length=0}else l.push(p)}}},$v=function(a){for(var t=document.querySelectorAll(mE),r=0,s=t.length;r<s;r++){var l=t[r];l&&l.getAttribute(xs)!==Yb&&(vE(a,l),l.parentNode&&l.parentNode.removeChild(l))}};function bE(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var e1=function(a){var t=document.head,r=a||t,s=document.createElement("style"),l=(function(p){var m=Array.from(p.querySelectorAll("style[".concat(xs,"]")));return m[m.length-1]})(r),c=l!==void 0?l.nextSibling:null;s.setAttribute(xs,Yb),s.setAttribute(Pb,qc);var d=bE();return d&&s.setAttribute("nonce",d),r.insertBefore(s,c),s},wE=(function(){function a(t){this.element=e1(t),this.element.appendChild(document.createTextNode("")),this.sheet=(function(r){if(r.sheet)return r.sheet;for(var s=document.styleSheets,l=0,c=s.length;l<c;l++){var d=s[l];if(d.ownerNode===r)return d}throw qo(17)})(this.element),this.length=0}return a.prototype.insertRule=function(t,r){try{return this.sheet.insertRule(r,t),this.length++,!0}catch{return!1}},a.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},a.prototype.getRule=function(t){var r=this.sheet.cssRules[t];return r&&r.cssText?r.cssText:""},a})(),SE=(function(){function a(t){this.element=e1(t),this.nodes=this.element.childNodes,this.length=0}return a.prototype.insertRule=function(t,r){if(t<=this.length&&t>=0){var s=document.createTextNode(r);return this.element.insertBefore(s,this.nodes[t]||null),this.length++,!0}return!1},a.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},a.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},a})(),xE=(function(){function a(t){this.rules=[],this.length=0}return a.prototype.insertRule=function(t,r){return t<=this.length&&(this.rules.splice(t,0,r),this.length++,!0)},a.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},a.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},a})(),Uv=Dc,kE={isServer:!Dc,useCSSOMInjection:!Wk},t1=(function(){function a(t,r,s){t===void 0&&(t=ks),r===void 0&&(r={});var l=this;this.options=na(na({},kE),t),this.gs=r,this.names=new Map(s),this.server=!!t.isServer,!this.server&&Dc&&Uv&&(Uv=!1,$v(this)),Uh(this,function(){return(function(c){for(var d=c.getTag(),p=d.length,m="",g=function(w){var k=(function(te){return Mc.get(te)})(w);if(k===void 0)return"continue";var E=c.names.get(k),D=d.getGroup(w);if(E===void 0||!E.size||D.length===0)return"continue";var F="".concat(xs,".g").concat(w,'[id="').concat(k,'"]'),U="";E!==void 0&&E.forEach(function(te){te.length>0&&(U+="".concat(te,","))}),m+="".concat(D).concat(F,'{content:"').concat(U,'"}').concat(Ih)},b=0;b<p;b++)g(b);return m})(l)})}return a.registerId=function(t){return oc(t)},a.prototype.rehydrate=function(){!this.server&&Dc&&$v(this)},a.prototype.reconstructWithOptions=function(t,r){return r===void 0&&(r=!0),new a(na(na({},this.options),t),this.gs,r&&this.names||void 0)},a.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},a.prototype.getTag=function(){return this.tag||(this.tag=(t=(function(r){var s=r.useCSSOMInjection,l=r.target;return r.isServer?new xE(l):s?new wE(l):new SE(l)})(this.options),new hE(t)));var t},a.prototype.hasNameForId=function(t,r){return this.names.has(t)&&this.names.get(t).has(r)},a.prototype.registerName=function(t,r){if(oc(t),this.names.has(t))this.names.get(t).add(r);else{var s=new Set;s.add(r),this.names.set(t,s)}},a.prototype.insertRules=function(t,r,s){this.registerName(t,r),this.getTag().insertRules(oc(t),s)},a.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},a.prototype.clearRules=function(t){this.getTag().clearGroup(oc(t)),this.clearNames(t)},a.prototype.clearTag=function(){this.tag=void 0},a})(),EE=/&/g,CE=/^\s*\/\/.*$/gm;function n1(a,t){return a.map(function(r){return r.type==="rule"&&(r.value="".concat(t," ").concat(r.value),r.value=r.value.replaceAll(",",",".concat(t," ")),r.props=r.props.map(function(s){return"".concat(t," ").concat(s)})),Array.isArray(r.children)&&r.type!=="@keyframes"&&(r.children=n1(r.children,t)),r})}function TE(a){var t,r,s,l=ks,c=l.options,d=c===void 0?ks:c,p=l.plugins,m=p===void 0?Yc:p,g=function(k,E,D){return D.startsWith(r)&&D.endsWith(r)&&D.replaceAll(r,"").length>0?".".concat(t):k},b=m.slice();b.push(function(k){k.type===Uc&&k.value.includes("&")&&(k.props[0]=k.props[0].replace(EE,r).replace(s,g))}),d.prefix&&b.push(Kk),b.push(Fk);var w=function(k,E,D,F){E===void 0&&(E=""),D===void 0&&(D=""),F===void 0&&(F="&"),t=F,r=E,s=new RegExp("\\".concat(r,"\\b"),"g");var U=k.replace(CE,""),te=Yk(D||E?"".concat(D," ").concat(E," { ").concat(U," }"):U);d.namespace&&(te=n1(te,d.namespace));var ee=[];return _c(te,Zk(b.concat(Xk(function(L){return ee.push(L)})))),ee};return w.hash=m.length?m.reduce(function(k,E){return E.name||qo(15),ms(k,E.name)},Zb).toString():"",w}var NE=new t1,th=TE(),a1=Oa.createContext({shouldForwardProp:void 0,styleSheet:NE,stylis:th});a1.Consumer;Oa.createContext(void 0);function Hv(){return x.useContext(a1)}var OE=(function(){function a(t,r){var s=this;this.inject=function(l,c){c===void 0&&(c=th);var d=s.name+c.hash;l.hasNameForId(s.id,d)||l.insertRules(s.id,d,c(s.rules,d,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=r,Uh(this,function(){throw qo(12,String(s.name))})}return a.prototype.getName=function(t){return t===void 0&&(t=th),this.name+t.hash},a})(),jE=function(a){return a>="A"&&a<="Z"};function Vv(a){for(var t="",r=0;r<a.length;r++){var s=a[r];if(r===1&&s==="-"&&a[0]==="-")return a;jE(s)?t+="-"+s.toLowerCase():t+=s}return t.startsWith("ms-")?"-"+t:t}var r1=function(a){return a==null||a===!1||a===""},i1=function(a){var t,r,s=[];for(var l in a){var c=a[l];a.hasOwnProperty(l)&&!r1(c)&&(Array.isArray(c)&&c.isCss||Es(c)?s.push("".concat(Vv(l),":"),c,";"):Ho(c)?s.push.apply(s,Ac(Ac(["".concat(l," {")],i1(c),!1),["}"],!1)):s.push("".concat(Vv(l),": ").concat((t=l,(r=c)==null||typeof r=="boolean"||r===""?"":typeof r!="number"||r===0||t in Qk||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return s};function Ni(a,t,r,s){if(r1(a))return[];if($h(a))return[".".concat(a.styledComponentId)];if(Es(a)){if(!Es(c=a)||c.prototype&&c.prototype.isReactComponent||!t)return[a];var l=a(t);return Ni(l,t,r,s)}var c;return a instanceof OE?r?(a.inject(r,s),[a.getName(s)]):[a]:Ho(a)?i1(a):Array.isArray(a)?Array.prototype.concat.apply(Yc,a.map(function(d){return Ni(d,t,r,s)})):[a.toString()]}function AE(a){for(var t=0;t<a.length;t+=1){var r=a[t];if(Es(r)&&!$h(r))return!1}return!0}var _E=Xb(qc),DE=(function(){function a(t,r,s){this.rules=t,this.staticRulesId="",this.isStatic=(s===void 0||s.isStatic)&&AE(t),this.componentId=r,this.baseHash=ms(_E,r),this.baseStyle=s,t1.registerId(r)}return a.prototype.generateAndInjectStyles=function(t,r,s){var l=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,r,s):"";if(this.isStatic&&!s.hash)if(this.staticRulesId&&r.hasNameForId(this.componentId,this.staticRulesId))l=ki(l,this.staticRulesId);else{var c=Iv(Ni(this.rules,t,r,s)),d=Jf(ms(this.baseHash,c)>>>0);if(!r.hasNameForId(this.componentId,d)){var p=s(c,".".concat(d),void 0,this.componentId);r.insertRules(this.componentId,d,p)}l=ki(l,d),this.staticRulesId=d}else{for(var m=ms(this.baseHash,s.hash),g="",b=0;b<this.rules.length;b++){var w=this.rules[b];if(typeof w=="string")g+=w;else if(w){var k=Iv(Ni(w,t,r,s));m=ms(m,k+b),g+=k}}if(g){var E=Jf(m>>>0);r.hasNameForId(this.componentId,E)||r.insertRules(this.componentId,E,s(g,".".concat(E),void 0,this.componentId)),l=ki(l,E)}}return l},a})(),s1=Oa.createContext(void 0);s1.Consumer;var Of={};function ME(a,t,r){var s=$h(a),l=a,c=!Nf(a),d=t.attrs,p=d===void 0?Yc:d,m=t.componentId,g=m===void 0?(function(G,ge){var Se=typeof G!="string"?"sc":Mv(G);Of[Se]=(Of[Se]||0)+1;var B="".concat(Se,"-").concat(aE(qc+Se+Of[Se]));return ge?"".concat(ge,"-").concat(B):B})(t.displayName,t.parentComponentId):m,b=t.displayName,w=b===void 0?(function(G){return Nf(G)?"styled.".concat(G):"Styled(".concat(rE(G),")")})(a):b,k=t.displayName&&t.componentId?"".concat(Mv(t.displayName),"-").concat(t.componentId):t.componentId||g,E=s&&l.attrs?l.attrs.concat(p).filter(Boolean):p,D=t.shouldForwardProp;if(s&&l.shouldForwardProp){var F=l.shouldForwardProp;if(t.shouldForwardProp){var U=t.shouldForwardProp;D=function(G,ge){return F(G,ge)&&U(G,ge)}}else D=F}var te=new DE(r,k,s?l.componentStyle:void 0);function ee(G,ge){return(function(Se,B,pe){var oe=Se.attrs,ye=Se.componentStyle,Ie=Se.defaultProps,De=Se.foldedComponentIds,et=Se.styledComponentId,nt=Se.target,Ke=Oa.useContext(s1),q=Hv(),he=Se.shouldForwardProp||q.shouldForwardProp,me=Jk(B,Ke,Ie)||ks,Me=(function(Q,fe,xe){for(var $e,Fe=na(na({},fe),{className:void 0,theme:xe}),Rt=0;Rt<Q.length;Rt+=1){var qt=Es($e=Q[Rt])?$e(Fe):$e;for(var At in qt)Fe[At]=At==="className"?ki(Fe[At],qt[At]):At==="style"?na(na({},Fe[At]),qt[At]):qt[At]}return fe.className&&(Fe.className=ki(Fe.className,fe.className)),Fe})(oe,B,me),J=Me.as||nt,v={};for(var T in Me)Me[T]===void 0||T[0]==="$"||T==="as"||T==="theme"&&Me.theme===me||(T==="forwardedAs"?v.as=Me.forwardedAs:he&&!he(T,J)||(v[T]=Me[T]));var _=(function(Q,fe){var xe=Hv(),$e=Q.generateAndInjectStyles(fe,xe.styleSheet,xe.stylis);return $e})(ye,Me),M=ki(De,et);return _&&(M+=" "+_),Me.className&&(M+=" "+Me.className),v[Nf(J)&&!Fb.has(J)?"class":"className"]=M,pe&&(v.ref=pe),x.createElement(J,v)})(L,G,ge)}ee.displayName=w;var L=Oa.forwardRef(ee);return L.attrs=E,L.componentStyle=te,L.displayName=w,L.shouldForwardProp=D,L.foldedComponentIds=s?ki(l.foldedComponentIds,l.styledComponentId):"",L.styledComponentId=k,L.target=s?l.target:a,Object.defineProperty(L,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(G){this._foldedDefaultProps=s?(function(ge){for(var Se=[],B=1;B<arguments.length;B++)Se[B-1]=arguments[B];for(var pe=0,oe=Se;pe<oe.length;pe++)eh(ge,oe[pe],!0);return ge})({},l.defaultProps,G):G}}),Uh(L,function(){return".".concat(L.styledComponentId)}),c&&Jb(L,a,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),L}function Gv(a,t){for(var r=[a[0]],s=0,l=t.length;s<l;s+=1)r.push(t[s],a[s+1]);return r}var qv=function(a){return Object.assign(a,{isCss:!0})};function Hh(a){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(Es(a)||Ho(a))return qv(Ni(Gv(Yc,Ac([a],t,!0))));var s=a;return t.length===0&&s.length===1&&typeof s[0]=="string"?Ni(s):qv(Ni(Gv(s,t)))}function nh(a,t,r){if(r===void 0&&(r=ks),!t)throw qo(1,t);var s=function(l){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];return a(t,r,Hh.apply(void 0,Ac([l],c,!1)))};return s.attrs=function(l){return nh(a,t,na(na({},r),{attrs:Array.prototype.concat(r.attrs,l).filter(Boolean)}))},s.withConfig=function(l){return nh(a,t,na(na({},r),l))},s}var o1=function(a){return nh(ME,a)},Yn=o1;Fb.forEach(function(a){Yn[a]=o1(a)});function Oi(){return Oi=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)({}).hasOwnProperty.call(r,s)&&(a[s]=r[s])}return a},Oi.apply(null,arguments)}function RE(a,t){if(a==null)return{};var r={};for(var s in a)if({}.hasOwnProperty.call(a,s)){if(t.indexOf(s)!==-1)continue;r[s]=a[s]}return r}function Vh(a,t){if(a==null)return{};var r,s,l=RE(a,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(a);for(s=0;s<c.length;s++)r=c[s],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(a,r)&&(l[r]=a[r])}return l}function zE(a){var t=a?.createRoot,r=new WeakMap;function s(d){var p=r.get(d);if(p)return p;var m=document.createElement("span");return d.appendChild(m),r.set(d,m),m}function l(d){var p=r.get(d);p&&(p.remove(),r.delete(d))}if(t){var c=new WeakMap;return{mount:function(p,m){var g,b=s(m),w=c.get(b);return w||(w=t(b),c.set(b,w)),w.render(p),(g=b.firstElementChild)!==null&&g!==void 0?g:b},unmount:function(p){var m=s(p),g=c.get(m);g&&(g.unmount(),c.delete(m)),l(p)}}}return{mount:function(p,m){var g=s(m);if("render"in tv&&typeof Wr.render=="function"){var b=Wr.render(p,g);return b||g}throw new Error("ReactDOM.render is not available")},unmount:function(p){var m=s(p);if("unmountComponentAtNode"in tv&&typeof Wr.unmountComponentAtNode=="function")Wr.unmountComponentAtNode(m);else throw new Error("ReactDOM.unmountComponentAtNode is not available");l(p)}}}function LE(a){var t=a.children,r=a.rendered;return x.useEffect(function(){r()}),t}function BE(){var a=x.useRef(!1);return x.useEffect(function(){a.current=!0},[]),{apply:function(r){a.current?queueMicrotask(function(){Wr.flushSync(r)}):r()}}}var l1=x.createContext({start:null,end:null,path:null});function IE(a){var t=a.children,r=x.useState(null),s=Fn(r,2),l=s[0],c=s[1],d=x.useState(null),p=Fn(d,2),m=p[0],g=p[1],b=x.useState(null),w=Fn(b,2),k=w[0],E=w[1],D="x"in a.start?a.start:l,F="x"in a.end?a.end:m,U=BE();return x.useEffect(function(){var te=typeof a.start=="function"&&a.start(function(L){U.apply(function(){c(L)})}),ee=typeof a.end=="function"&&a.end(function(L){U.apply(function(){g(L)})});return function(){te&&te(),ee&&ee()}},[]),x.useEffect(function(){D&&F&&a.path(D,F).then(function(te){U.apply(function(){E(te)})})},[D,F]),x.createElement(l1.Provider,{value:{start:D,end:F,path:k}},t)}function c1(){return x.useContext(l1)}var Yv,Pv,$E=Yn.svg(Yv||(Yv=In([`
    overflow: visible !important;
    position: absolute;
    pointer-events: none;
    width: 9999px;
    height: 9999px;
`]))),UE=Yn.path(Pv||(Pv=In([`
    fill: none;
    stroke-width: 5px;
    stroke: steelblue;
    pointer-events: auto;
    `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function u1(a){var t=c1(),r=t.path;return r?x.createElement($E,{"data-testid":"connection"},x.createElement(UE,{styles:a.styles,d:r})):null}function HE(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=VE(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function VE(a,t){if(a){if(typeof a=="string")return Fv(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fv(a,t):void 0}}function Fv(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function GE(a){for(var t=new a.constructor(a.type),r=t;r=Object.getPrototypeOf(r);){var s=Object.getOwnPropertyNames(r),l=HE(s),c;try{for(l.s();!(c=l.n()).done;){var d=c.value,p=t[d];typeof p!="function"&&Object.defineProperty(t,d,{value:a[d]})}}catch(m){l.e(m)}finally{l.f()}}return t}var qE="__reactContainer$";function YE(a){for(var t=a;t;){if(t._reactRootContainer||Object.keys(t).some(function(r){return r.startsWith(qE)}))return t;t=t.parentElement}}function Zv(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function Xv(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zv(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):Zv(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function d1(a,t){return{start:function(s){var l=Xv({},t(s));function c(p){var m=Xv({},t(p)),g=m.x-l.x,b=m.y-l.y;l=m,a(g,b)}function d(){window.removeEventListener("pointermove",c),window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",d)}window.addEventListener("pointermove",c),window.addEventListener("pointerup",d),window.addEventListener("pointercancel",d)}}}function PE(a,t){x.useEffect(function(){var r=function(c){if(!t){var d=YE(c.target),p=x.version.startsWith("16")?document:d;p&&(c.stopPropagation(),p.dispatchEvent(GE(c)))}},s=a.current;return s?.addEventListener("pointerdown",r),function(){s?.removeEventListener("pointerdown",r)}},[a,t])}var Kv,FE=Yn.input(Kv||(Kv=In([`
  width: 100%;
  border-radius: 30px;
  background-color: white;
  padding: 2px 6px;
  border: 1px solid #999;
  font-size: 110%;
  box-sizing: border-box;
  `,`
`])),function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function ah(a){var t=x.useState(a.data.value),r=Fn(t,2),s=r[0],l=r[1],c=x.useRef(null);return PE(c),x.useEffect(function(){l(a.data.value)},[a.data.value]),x.createElement(FE,{value:s,type:a.data.type,ref:c,readOnly:a.data.readonly,onChange:function(p){var m=a.data.type==="number"?+p.target.value:p.target.value;l(m),a.data.setValue(m)},styles:a.styles})}var rh="rgba(110,136,255,0.8)",f1="#ffd92c",Pa=24,Sr=6,h1="#96b38a",p1=180,ZE=Object.freeze({__proto__:null,$nodecolor:rh,$nodecolorselected:f1,$socketsize:Pa,$socketmargin:Sr,$socketcolor:h1,$nodewidth:p1}),XE=["init","unmount"];function Gh(a){var t=a.init,r=a.unmount,s=Vh(a,XE),l=x.useRef(null);return x.useEffect(function(){var c=l.current;return function(){c&&r(c)}},[]),x.useEffect(function(){l.current&&t(l.current)}),x.createElement("span",Oi({},s,{ref:l}))}var KE=["name","emit","payload"];function ih(a){var t=a.name,r=a.emit,s=a.payload,l=Vh(a,KE);return x.createElement(Gh,Oi({},l,{className:t,init:function(d){r({type:"render",data:{type:"control",element:d,payload:s}})},unmount:function(d){r({type:"unmount",data:{element:d}})}}))}var QE=["name","emit","nodeId","side","socketKey","payload"];function sh(a){var t=a.name,r=a.emit,s=a.nodeId,l=a.side,c=a.socketKey,d=a.payload,p=Vh(a,QE);return x.createElement(Gh,Oi({},p,{className:t,init:function(g){r({type:"render",data:{type:"socket",side:l,key:c,nodeId:s,element:g,payload:d}})},unmount:function(g){r({type:"unmount",data:{element:g}})}}))}var Qv,Wv,m1=Yn.div(Qv||(Qv=In([`
    background: `,`;
    border: 2px solid #4e58bf;
    border-radius: 10px;
    cursor: pointer;
    box-sizing: border-box;
    width: `,`;
    height: `,`;
    padding-bottom: 6px;
    position: relative;
    user-select: none;
    line-height: initial;
    font-family: Arial;

    &:hover {
        background: lighten(`,`,4%);
    }
    `,`
    .title {
        color: white;
        font-family: sans-serif;
        font-size: 18px;
        padding: 8px;
    }
    .output {
        text-align: right;
    }
    .input {
        text-align: left;
    }
    .output-socket {
        text-align: right;
        margin-right: -`,`px;
        display: inline-block;
    }
    .input-socket {
        text-align: left;
        margin-left: -`,`px;
        display: inline-block;
    }
    .input-title,.output-title {
        vertical-align: middle;
        color: white;
        display: inline-block;
        font-family: sans-serif;
        font-size: 14px;
        margin: `,`px;
        line-height: `,`px;
    }
    .input-control {
        z-index: 1;
        width: calc(100% - `,`px);
        vertical-align: middle;
        display: inline-block;
    }
    .control {
        display: block;
        padding: `,"px ",`px;
    }
    `,`
`])),rh,function(a){return Number.isFinite(a.width)?"".concat(a.width,"px"):"".concat(p1,"px")},function(a){return Number.isFinite(a.height)?"".concat(a.height,"px"):"auto"},rh,function(a){return a.selected&&Hh(Wv||(Wv=In([`
        background: `,`;
        border-color: #e3c000;
    `])),f1)},Pa/2+Sr,Pa/2+Sr,Sr,Pa,Pa+2*Sr,Sr,Pa/2+Sr,function(a){var t;return(t=a.styles)===null||t===void 0?void 0:t.call(a,a)});function jf(a){a.sort(function(t,r){var s,l,c=((s=t[1])===null||s===void 0?void 0:s.index)||0,d=((l=r[1])===null||l===void 0?void 0:l.index)||0;return c-d})}function g1(a){var t=Object.entries(a.data.inputs),r=Object.entries(a.data.outputs),s=Object.entries(a.data.controls),l=a.data.selected||!1,c=a.data,d=c.id,p=c.label,m=c.width,g=c.height;return jf(t),jf(r),jf(s),x.createElement(m1,{selected:l,width:m,height:g,styles:a.styles,"data-testid":"node"},x.createElement("div",{className:"title","data-testid":"title"},p),r.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E&&x.createElement("div",{className:"output",key:k,"data-testid":"output-".concat(k)},x.createElement("div",{className:"output-title","data-testid":"output-title"},E.label),x.createElement(sh,{name:"output-socket",side:"output",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"output-socket"}))}),s.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E?x.createElement(ih,{key:k,name:"control",emit:a.emit,payload:E,"data-testid":"control-".concat(k)}):null}),t.map(function(b){var w=Fn(b,2),k=w[0],E=w[1];return E&&x.createElement("div",{className:"input",key:k,"data-testid":"input-".concat(k)},x.createElement(sh,{name:"input-socket",side:"input",socketKey:k,nodeId:d,emit:a.emit,payload:E.socket,"data-testid":"input-socket"}),E&&(!E.control||!E.showControl)&&x.createElement("div",{className:"input-title","data-testid":"input-title"},E.label),E.control&&E.showControl&&x.createElement(ih,{key:k,name:"input-control",emit:a.emit,payload:E.control,"data-testid":"input-control"}))}))}var Jv,e0,y1=Yn.div(Jv||(Jv=In([`
    display: inline-block;
    cursor: pointer;
    border: 1px solid white;
    border-radius: `,`px;
    width: `,`px;
    height: `,`px;
    vertical-align: middle;
    background: `,`;
    z-index: 2;
    box-sizing: border-box;
    &:hover {
      border-width: 4px;
    }
    &.multiple {
      border-color: yellow;
    }
`])),Pa/2,Pa,Pa,h1),WE=Yn.div(e0||(e0=In([`
    border-radius: `,`px;
    padding: `,`px;
    &:hover `,` {
      border-width: 4px;
    }
`])),(Pa+Sr*2)/2,Sr,y1);function v1(a){return x.createElement(WE,null,x.createElement(y1,{title:a.data.name}))}function JE(a){var t=typeof a?.socketPositionWatcher>"u"?Dk():a.socketPositionWatcher,r=a?.customize||{},s=r.node,l=r.connection,c=r.socket,d=r.control;return{attach:function(m){t.attach(m)},render:function(m,g){if(m.data.type==="node"){var b=g.parentScope(),w=s?s(m.data):g1;return w&&x.createElement(w,{data:m.data.payload,emit:function(ge){return void b.emit(ge)}})}else if(m.data.type==="connection"){var k=l?l(m.data):u1,E=m.data.payload,D=E.sourceOutput,F=E.targetInput,U=E.source,te=E.target;return k&&x.createElement(IE,{start:m.data.start||function(G){return t.listen(U,"output",D,G)},end:m.data.end||function(G){return t.listen(te,"input",F,G)},path:(function(){var G=st(Ce.mark(function ge(Se,B){var pe,oe,ye,Ie,De;return Ce.wrap(function(et){for(;;)switch(et.prev=et.next){case 0:return et.next=1,g.emit({type:"connectionpath",data:{payload:E,points:[Se,B]}});case 1:if(pe=et.sent,pe){et.next=2;break}return et.abrupt("return","");case 2:if(oe=pe.data,ye=oe.path,Ie=oe.points,De=.3,!(!ye&&Ie.length!==2)){et.next=3;break}throw new Error("cannot render connection with a custom number of points");case 3:if(ye){et.next=4;break}return et.abrupt("return",E.isLoop?Ck(Ie,De,120):Ek(Ie,De));case 4:return et.abrupt("return",ye);case 5:case"end":return et.stop()}},ge)}));return function(ge,Se){return G.apply(this,arguments)}})()},x.createElement(k,{data:m.data.payload}))}else if(m.data.type==="socket"){var ee=c?c(m.data):v1;return ee&&m.data.payload&&x.createElement(ee,{data:m.data.payload})}else if(m.data.type==="control"){var L=d&&m.data.payload?d(m.data):m.data.payload instanceof Kt.InputControl?ah:null;return L&&x.createElement(L,{data:m.data.payload})}}}}var eC=Object.freeze({__proto__:null,vars:ZE,setup:JE,Connection:u1,useConnection:c1,Control:ah,InputControl:ah,Node:g1,NodeStyles:m1,RefControl:ih,RefSocket:sh,Socket:v1});function b1(a,t){var r=x.useRef(void 0);function s(){r.current&&clearTimeout(r.current)}var l=function(){s(),r.current=setTimeout(function(){a()},t)};return x.useEffect(function(){return s},[]),[l,s]}var tC="rgba(110,136,255,0.8)",nC="rgba(130, 153, 255, 0.8)",aC="rgba(69, 103, 255, 0.8)",lc="5px",oh=120,t0,qh=Yn.div(t0||(t0=In([`
  color: #fff;
  padding: 4px;
  border-bottom: 1px solid `,`;
  background-color: `,`;
  cursor: pointer;
  width: 100%;
  position: relative;
  &:first-child {
    border-top-left-radius: `,`;
    border-top-right-radius: `,`;
  }
  &:last-child {
    border-bottom-left-radius: `,`;
    border-bottom-right-radius: `,`;
  }
  &:hover {
    background-color: `,`;
  }
`])),aC,tC,lc,lc,lc,lc,nC),n0,a0,r0,w1=Yn(qh)(n0||(n0=In([`
    `,`
`])),function(a){return a.hasSubitems&&Hh(a0||(a0=In([`&:after {
    content: '';
    position: absolute;
    opacity: 0.6;
    right: 5px;
    top: 5px;
    }`])))}),S1=Yn.div(r0||(r0=In([`
    position: absolute;
    top: 0;
    left: 100%;
    width: `,`px;
`])),oh);function x1(a){var t,r,s,l,c=x.useState(!1),d=Fn(c,2),p=d[0],m=d[1],g=x.useCallback(function(){m(!1)},[m]),b=b1(g,a.delay),w=Fn(b,2),k=w[0],E=w[1],D=((t=a.components)===null||t===void 0||(r=t.item)===null||r===void 0?void 0:r.call(t,a.data))||w1,F=((s=a.components)===null||s===void 0||(l=s.subitems)===null||l===void 0?void 0:l.call(s,a.data))||S1;return x.createElement(D,{onClick:function(te){te.stopPropagation(),a.data.handler(),a.hide()},hasSubitems:!!a.data.subitems,onPointerDown:function(te){te.stopPropagation()},onPointerOver:function(){E(),m(!0)},onPointerLeave:function(){k&&k()},"data-testid":"context-menu-item"},a.children,a.data.subitems&&p&&x.createElement(F,null,a.data.subitems.map(function(U){return x.createElement(x1,{key:U.key,data:U,delay:a.delay,hide:a.hide,components:a.components},U.label)})))}var i0,k1=Yn.input(i0||(i0=In([`
  color: white;
  padding: 1px 8px;
  border: 1px solid white;
  border-radius: 10px;
  font-size: 16px;
  font-family: serif;
  width: 100%;
  box-sizing: border-box;
  background: transparent;
`])));function rC(a){var t=a.component||k1;return x.createElement(t,{value:a.value,onInput:function(s){a.onChange(s.target.value)},onPointerDown:function(s){s.stopPropagation()},"data-testid":"context-menu-search-input"})}var s0,E1=Yn.div(s0||(s0=In([`
  padding: 10px;
  width: `,`px;
  margin-top: -20px;
  margin-left: -`,`px;
`])),oh,oh/2);function iC(a){var t,r,s,l,c,d,p=b1(a.onHide,a.delay),m=Fn(p,2),g=m[0],b=m[1],w=x.useState(""),k=Fn(w,2),E=k[0],D=k[1],F=new RegExp(E,"i"),U=a.items.filter(function(L){return L.label.match(F)}),te=((t=a.components)===null||t===void 0||(r=t.main)===null||r===void 0?void 0:r.call(t))||E1,ee=((s=a.components)===null||s===void 0||(l=s.common)===null||l===void 0?void 0:l.call(s))||qh;return x.createElement(te,{onMouseOver:function(){b()},onMouseLeave:function(){g?.()},onWheel:function(G){G.stopPropagation()},"data-testid":"context-menu"},a.searchBar&&x.createElement(ee,null,x.createElement(rC,{value:E,onChange:D,component:(c=a.components)===null||c===void 0||(d=c.search)===null||d===void 0?void 0:d.call(c)})),U.map(function(L){return x.createElement(x1,{key:L.key,data:L,delay:a.delay,hide:a.onHide,components:a.components},L.label)}))}function sC(a){var t=typeof a?.delay>"u"?1e3:a.delay;return{render:function(s){if(s.data.type==="contextmenu")return x.createElement(iC,{items:s.data.items,delay:t,searchBar:s.data.searchBar,onHide:s.data.onHide,components:a?.customize})}}}var oC=Object.freeze({__proto__:null,setup:sC,Item:w1,Subitems:S1,Menu:E1,Search:k1,Common:qh}),cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lC=typeof cc=="object"&&cc&&cc.Object===Object&&cc,cC=typeof self=="object"&&self&&self.Object===Object&&self;lC||cC||Function("return this")();function uC(){const a=x.useRef(!1);return x.useEffect(()=>(a.current=!0,()=>{a.current=!1}),[]),x.useCallback(()=>a.current,[])}var o0={width:void 0,height:void 0};function dC(a){const{ref:t,box:r="content-box"}=a,[{width:s,height:l},c]=x.useState(o0),d=uC(),p=x.useRef({...o0}),m=x.useRef(void 0);return m.current=a.onResize,x.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const g=new ResizeObserver(([b])=>{const w=r==="border-box"?"borderBoxSize":r==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",k=l0(b,w,"inlineSize"),E=l0(b,w,"blockSize");if(p.current.width!==k||p.current.height!==E){const F={width:k,height:E};p.current.width=k,p.current.height=E,m.current?m.current(F):d()&&c(F)}});return g.observe(t.current,{box:r}),()=>{g.disconnect()}},[r,t,d]),{width:s,height:l}}function l0(a,t,r){return a[t]?Array.isArray(a[t])?a[t][0][r]:a[t][r]:t==="contentBoxSize"?a.contentRect[r==="inlineSize"?"width":"height"]:void 0}function Fa(a){return"".concat(a,"px")}var c0,fC=Yn.div(c0||(c0=In([`
    position: absolute;
    background: rgba(110, 136, 255, 0.8);
    border: 1px solid rgb(192 206 212 / 60%);
`])));function hC(a){return x.createElement(fC,{style:{left:Fa(a.left),top:Fa(a.top),width:Fa(a.width),height:Fa(a.height)},"data-testid":"minimap-node"})}var u0,pC=Yn.div(u0||(u0=In([`
  position: absolute;
  background: rgba(255, 251, 128, 0.32);
  border: 1px solid #ffe52b;
`])));function mC(a){var t=function(c){return c*a.containerWidth},r=function(c){return c/a.containerWidth},s=d1(function(l,c){a.translate(r(-l),r(-c))},function(l){return{x:l.pageX,y:l.pageY}});return x.createElement(pC,{onPointerDown:s.start,style:{left:Fa(t(a.left)),top:Fa(t(a.top)),width:Fa(t(a.width)),height:Fa(t(a.height))},"data-testid":"minimap-viewport"})}var d0,gC=Yn.div(d0||(d0=In([`
    position: absolute;
    right: 24px;
    bottom: 24px;
    background: rgba(229, 234, 239, 0.65);
    padding: 20px;
    overflow: hidden;
    border: 1px solid #b1b7ff;
    border-radius: 8px;
    box-sizing: border-box;
`])));function yC(a){var t,r=x.useRef(null),s=dC({ref:r}),l=s.width,c=l===void 0?0:l,d=((t=r.current)===null||t===void 0?void 0:t.clientWidth)||c,p=x.useCallback(function(m){return m*d},[d]);return x.createElement(gC,{size:a.size,style:{width:Fa(a.size*a.ratio),height:Fa(a.size)},onPointerDown:function(g){g.stopPropagation(),g.preventDefault()},onDoubleClick:function(g){if(g.stopPropagation(),g.preventDefault(),!!r.current){var b=r.current.getBoundingClientRect(),w=(g.clientX-b.left)/(a.size*a.ratio),k=(g.clientY-b.top)/(a.size*a.ratio);a.point(w,k)}},ref:r,"data-testid":"minimap"},d?a.nodes.map(function(m,g){return x.createElement(hC,{key:g,left:p(m.left),top:p(m.top),width:p(m.width),height:p(m.height)})}):null,x.createElement(mC,Oi({},a.viewport,{start:a.start,containerWidth:d,translate:a.translate})))}function vC(a){return{render:function(r){if(r.data.type==="minimap")return x.createElement(yC,{nodes:r.data.nodes,size:a?.size||200,ratio:r.data.ratio,viewport:r.data.viewport,start:r.data.start,translate:r.data.translate,point:r.data.point})}}}var bC=Object.freeze({__proto__:null,setup:vC}),f0,Lo=20,wC=Yn.div(f0||(f0=In([`
  width: `,`px;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border: 2px solid white;
  border-radius: `,`px;
`])),Lo,Lo,function(a){return a.selected?"#ffd92c":"steelblue"},Lo);function SC(a){var t=d1(function(c,d){a.translate(c,d)},a.pointer),r=a.position,s=r.x,l=r.y;return x.createElement(wC,{onPointerDown:function(d){d.stopPropagation(),d.preventDefault(),t.start(d),a.pointerdown()},onContextMenu:function(d){d.stopPropagation(),d.preventDefault(),a.contextMenu()},selected:a.selected,style:{position:"absolute",top:"".concat(l-Lo/2,"px"),left:"".concat(s-Lo/2,"px")},"data-testid":"pin"})}function xC(a){function t(r,s){return x.createElement(x.Fragment,null,r.pins.map(function(l){return x.createElement(SC,Oi({},l,{key:l.id,contextMenu:function(){var d;a==null||(d=a.contextMenu)===null||d===void 0||d.call(a,l.id)},translate:function(d,p){var m;a==null||(m=a.translate)===null||m===void 0||m.call(a,l.id,d,p)},pointerdown:function(){var d;a==null||(d=a.pointerdown)===null||d===void 0||d.call(a,l.id)},pointer:s}))}))}return{render:function(s,l){var c=s.data,d=l.parentScope(Go);if(c.type==="reroute-pins")return t(c.data,function(){return d.area.pointer})}}}var kC=Object.freeze({__proto__:null,setup:xC}),Af=Object.freeze({__proto__:null,classic:eC,contextMenu:oC,minimap:bC,reroute:kC});function EC(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=CC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function CC(a,t){if(a){if(typeof a=="string")return h0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h0(a,t):void 0}}function h0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}function p0(a,t){var r=Object.keys(a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(a,l).enumerable})),r.push.apply(r,s)}return r}function uc(a){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?p0(Object(r),!0).forEach(function(s){Be(a,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(r)):p0(Object(r)).forEach(function(s){Object.defineProperty(a,s,Object.getOwnPropertyDescriptor(r,s))})}return a}function TC(a,t,r){return t=Vt(t),Qa(a,C1()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function C1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C1=function(){return!!a})()}function NC(a,t,r,s){var l=Uo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var OC=(function(a){function t(){for(var r,s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];var d=l[0];return ht(this,t),r=TC(this,t,["react-render"]),Be(r,"presets",[]),r.renderer=zE({createRoot:d?.createRoot}),r.addPipe(function(p){if(!p||Bn(p)!=="object"||!("type"in p))return p;if(p.type==="unmount")r.unmount(p.data.element);else if(p.type==="render"){if("filled"in p.data&&p.data.filled)return p;if(r.mount(p.data.element,p))return uc(uc({},p),{},{data:uc(uc({},p.data),{},{filled:!0})})}return p}),r}return aa(t,a),pt(t,[{key:"setParent",value:function(s){var l=this;NC(t,"setParent",this)([s]),this.presets.forEach(function(c){c.attach&&c.attach(l)})}},{key:"mount",value:function(s,l){var c=this.parentScope(),d=EC(this.presets),p;try{for(d.s();!(p=d.n()).done;){var m=p.value,g=m.render(l,this);if(g){var b=x.createElement(LE,{rendered:function(){return void c.emit({type:"rendered",data:l.data})}},g);return this.renderer.mount(b,s),!0}}}catch(w){d.e(w)}finally{d.f()}}},{key:"unmount",value:function(s){this.renderer.unmount(s)}},{key:"addPreset",value:function(s){var l=s;l.attach&&l.attach(this),this.presets.push(l)}}])})(Ts);function jC(a){try{return Function.toString.call(a).indexOf("[native code]")!==-1}catch{return typeof a=="function"}}function T1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T1=function(){return!!a})()}function AC(a,t,r){if(T1())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var l=new(a.bind.apply(a,s));return r&&$o(l,r.prototype),l}function lh(a){var t=typeof Map=="function"?new Map:void 0;return lh=function(s){if(s===null||!jC(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,l)}function l(){return AC(s,arguments,Vt(this).constructor)}return l.prototype=Object.create(s.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),$o(l,s)},lh(a)}function _C(a,t){var r=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!r){if(Array.isArray(a)||(r=DC(a))||t){r&&(a=r);var s=0,l=function(){};return{s:l,n:function(){return s>=a.length?{done:!0}:{done:!1,value:a[s++]}},e:function(g){throw g},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c,d=!0,p=!1;return{s:function(){r=r.call(a)},n:function(){var g=r.next();return d=g.done,g},e:function(g){p=!0,c=g},f:function(){try{d||r.return==null||r.return()}finally{if(p)throw c}}}}function DC(a,t){if(a){if(typeof a=="string")return m0(a,t);var r={}.toString.call(a).slice(8,-1);return r==="Object"&&a.constructor&&(r=a.constructor.name),r==="Map"||r==="Set"?Array.from(a):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m0(a,t):void 0}}function m0(a,t){(t==null||t>a.length)&&(t=a.length);for(var r=0,s=Array(t);r<t;r++)s[r]=a[r];return s}var MC=(function(){function a(t){ht(this,a),Be(this,"setups",new Map),this.editor=t}return pt(a,[{key:"add",value:function(r,s){var l=this.setups.get(r.id);if(l)throw new Error("already processed");this.setups.set(r.id,s)}},{key:"remove",value:function(r){this.setups.delete(r)}},{key:"fetchInputs",value:(function(){var t=st(Ce.mark(function s(l){var c=this,d,p,m,g,b,w,k,E,D,F,U,te;return Ce.wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(d=this.setups.get(l),d){L.next=3;break}throw new Error("node is not initialized");case 3:return p=d.inputs(),m=this.editor.getConnections().filter(function(G){return G.target===l&&p.includes(G.targetInput)}),g={},L.next=8,Promise.all(m.map((function(){var G=st(Ce.mark(function ge(Se){return Ce.wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.t0=Se,pe.next=3,c.fetch(Se.source);case 3:return pe.t1=pe.sent,pe.abrupt("return",{c:pe.t0,sourceData:pe.t1});case 5:case"end":return pe.stop()}},ge)}));return function(ge){return G.apply(this,arguments)}})()));case 8:b=L.sent,w=_C(b);try{for(w.s();!(k=w.n()).done;)E=k.value,D=E.c,F=E.sourceData,U=g[D.targetInput]?g[D.targetInput]:[],te=g,te[D.targetInput]=[].concat(Ns(U),[F[D.sourceOutput]])}catch(G){w.e(G)}finally{w.f()}return L.abrupt("return",g);case 12:case"end":return L.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()},{key:"fetch",value:(function(){var t=st(Ce.mark(function s(l){var c=this,d,p,m,g;return Ce.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(d=this.setups.get(l),d){w.next=3;break}throw new Error("node is not initialized");case 3:return p=d.outputs(),w.next=6,d.data(function(){return c.fetchInputs(l)});case 6:if(m=w.sent,g=Object.keys(m),p.every(function(k){return g.includes(k)})){w.next=10;break}throw new Error('dataflow node "'.concat(l,`" doesn't return all of required properties. Expected "`).concat(p.join('", "'),'". Got "').concat(g.join('", "'),'"'));case 10:return w.abrupt("return",m);case 11:case"end":return w.stop()}},s,this)}));function r(s){return t.apply(this,arguments)}return r})()}])})(),RC=(function(){function a(t){ht(this,a),Be(this,"cache",new Map),this.onDelete=t}return pt(a,[{key:"get",value:function(r){return this.cache.get(r)}},{key:"add",value:function(r,s){if(this.cache.has(r))throw new Error("cache already exists");this.cache.set(r,s)}},{key:"patch",value:function(r,s){this.cache.set(r,s)}},{key:"delete",value:function(r){var s=this.cache.get(r);this.cache.delete(r),this.onDelete&&this.onDelete(s)}},{key:"clear",value:function(){var r=this;Array.from(this.cache.keys()).forEach(function(s){r.delete(s)})}}])})();function zC(a,t,r){return t=Vt(t),Qa(a,N1()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function N1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(N1=function(){return!!a})()}var g0=(function(a){function t(){return ht(this,t),zC(this,t,["cancelled"])}return aa(t,a),pt(t)})(lh(Error));function LC(){var a=!1;function t(m){if(a)throw new g0;return m}for(var r,s=new Promise(function(m,g){r=g,m()}),l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var p=c.reduce(function(m,g){var b=m.then(g).then(t);return b},s);return p.cancel=function(){a||r(new g0),a=!0},p}function BC(a,t,r){return t=Vt(t),Qa(a,O1()?Reflect.construct(t,r||[],Vt(a).constructor):t.apply(a,r))}function O1(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(O1=function(){return!!a})()}function IC(a,t,r,s){var l=Uo(Vt(a.prototype),t,r);return typeof l=="function"?function(c){return l.apply(r,c)}:l}var $C=(function(a){function t(r){var s;return ht(this,t),s=BC(this,t,["dataflow-engine"]),Be(s,"cache",new RC(function(l){return l?.cancel&&l.cancel()})),s.configure=r,s.addPipe(function(l){return l.type==="nodecreated"&&s.add(l.data),l.type==="noderemoved"&&s.remove(l.data),l}),s}return aa(t,a),pt(t,[{key:"setParent",value:function(s){IC(t,"setParent",this)([s]),this.editor=this.parentScope(ni),this.dataflow=new MC(this.editor)}},{key:"getDataflow",value:function(){if(!this.dataflow)throw new Error("DataflowEngine isn't attached to NodeEditor");return this.dataflow}},{key:"add",value:function(s){var l=this,c=this.configure?this.configure(s):{inputs:function(){return Object.keys(s.inputs)},outputs:function(){return Object.keys(s.outputs)}};this.getDataflow().add(s,{inputs:c.inputs,outputs:c.outputs,data:(function(){var d=st(Ce.mark(function m(g){var b,w;return Ce.wrap(function(E){for(;;)switch(E.prev=E.next){case 0:if(b=l.cache.get(s.id),!b){E.next=3;break}return E.abrupt("return",b);case 3:return w=LC(function(){return g()},function(D){return s.data(D)}),l.cache.add(s.id,w),E.abrupt("return",w);case 6:case"end":return E.stop()}},m)}));function p(m){return d.apply(this,arguments)}return p})()})}},{key:"remove",value:function(s){this.getDataflow().remove(s.id)}},{key:"reset",value:function(s){var l=this;if(s){var c=this.getDataflow().setups.get(s);if(!c)throw new Error("setup");var d=c.outputs();this.cache.delete(s),this.editor.getConnections().filter(function(p){return p.source===s&&d.includes(p.sourceOutput)}).forEach(function(p){l.reset(p.target)})}else this.cache.clear()}},{key:"fetchInputs",value:(function(){var r=st(Ce.mark(function l(c){var d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Bn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetchInputs(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()},{key:"fetch",value:(function(){var r=st(Ce.mark(function l(c){var d;return Ce.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return d=Bn(c)==="object"?c.id:c,m.abrupt("return",this.getDataflow().fetch(d));case 2:case"end":return m.stop()}},l,this)}));function s(l){return r.apply(this,arguments)}return s})()}])})(Ts);const UC=!1,Yh=(...a)=>UC,y0=Kt.Socket.canConnect;Kt.Socket.canConnect=function(a,t){return Yh(`[Socket Check] ${a.name} <-> ${t.name}`),y0&&y0(a,t)||a.name==="any"||t.name==="any"?!0:a.name===t.name};Kt.Socket.prototype.canConnectTo=function(a){return Yh(`[Socket Instance Check] ${this.name} -> ${a.name}`),Kt.Socket.canConnect(this,a)};const j1={boolean:new Kt.Socket("boolean"),number:new Kt.Socket("number"),object:new Kt.Socket("object"),lightInfo:new Kt.Socket("light_info"),any:new Kt.Socket("any")};Object.values(j1).forEach(a=>{a.canConnectTo=function(t){return Yh(`[Socket Instance Direct] ${this.name} -> ${t.name}`),this.name===t.name||this.name==="any"||t.name==="any"}});let Co=null;function Pc(){if(Co!==null)return Co;const t=window.location.pathname.match(/^(\/api\/hassio_ingress\/[^/]+)/);return t?Co=t[1]:Co="",Co}function xn(a){const t=Pc(),r=a.startsWith("/")?a:"/"+a;return t+r}Pc();const Ei="t2app-pin",Rc="t2app-pin-remember",A1=(a,t)=>{try{return a.getItem(t)}catch{return null}},dc=(a,t,r)=>{try{return a.setItem(t,r),!0}catch{return!1}},Bo=(a,t)=>{try{return a.removeItem(t),!0}catch{return!1}},zc=()=>A1(localStorage,Rc)==="true",ys=()=>{const t=zc()?localStorage:sessionStorage;return(A1(t,Ei)||"").trim()||null},_1=()=>{Bo(sessionStorage,Ei),Bo(localStorage,Ei),Bo(localStorage,Rc),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!1}}))},v0=(a,{remember:t}={})=>{const r=(a||"").toString().trim(),s=typeof t=="boolean"?t:zc();if(!r){_1(),typeof t=="boolean"&&dc(localStorage,Rc,t?"true":"false");return}dc(localStorage,Rc,s?"true":"false"),s?(dc(localStorage,Ei,r),Bo(sessionStorage,Ei)):(dc(sessionStorage,Ei,r),Bo(localStorage,Ei)),window.dispatchEvent(new CustomEvent("t2-pin-changed",{detail:{hasPin:!0}}))},ps=async(a,t={})=>{const r=typeof a=="string"?xn(a):a;return fetch(r,t)},fn=async(a,t={})=>{const r=ys(),s=typeof a=="string"?xn(a):a;if(!r)return fetch(s,t);const l=new Headers(t.headers||(typeof a!="string"?a.headers:void 0)||void 0);return l.set("X-APP-PIN",r),fetch(s,{...t,headers:l})},b0={shelly:{icon:"",color:"#ff9800",label:"Shelly"},wled:{icon:"",color:"#e040fb",label:"WLED"},esphome:{icon:"",color:"#00bcd4",label:"ESPHome"},hue:{icon:"",color:"#ffc107",label:"Philips Hue"},kasa:{icon:"",color:"#4caf50",label:"TP-Link Kasa"},tasmota:{icon:"",color:"#ff5722",label:"Tasmota"},chromecast:{icon:"",color:"#5c6bc0",label:"Chromecast"},homekit:{icon:"",color:"#607d8b",label:"HomeKit"},airplay:{icon:"",color:"#9c27b0",label:"AirPlay"},generic:{icon:"",color:"#78909c",label:"HTTP Device"},http:{icon:"",color:"#78909c",label:"HTTP Device"}};function HC(){const[a,t]=x.useState([]),[r,s]=x.useState(!1),[l,c]=x.useState(null),[d,p]=x.useState(null),[m,g]=x.useState(5e3),[b,w]=x.useState(null),k=x.useCallback(async()=>{s(!0),c(null);try{const te=await ps("/api/discovery/scan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({timeout:m})});if(!te.ok){const L=await te.json();throw new Error(L.error||`Scan failed (${te.status})`)}const ee=await te.json();t(ee.devices||[]),p(new Date)}catch(te){console.error("[Discovery] Scan error:",te),c(te.message)}finally{s(!1)}},[m]),E=te=>b0[te]||b0.generic,D=te=>te?new Date(te).toLocaleTimeString():"",U=(te=>{const ee={};for(const L of te){const G=L.type||"generic";ee[G]||(ee[G]=[]),ee[G].push(L)}return ee})(a);return h.jsxs("div",{className:"discovery-panel",children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{fontSize:"11px",color:"#8a959e",marginBottom:"4px"},children:"Scan your network for smart home devices"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("label",{style:{fontSize:"11px",color:"#8a959e"},children:"Timeout:"}),h.jsxs("select",{value:m,onChange:te=>g(Number(te.target.value)),disabled:r,style:{background:"#2a3238",color:"#c5cdd3",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",padding:"4px 8px",fontSize:"11px"},children:[h.jsx("option",{value:3e3,children:"3 seconds"}),h.jsx("option",{value:5e3,children:"5 seconds"}),h.jsx("option",{value:1e4,children:"10 seconds"}),h.jsx("option",{value:15e3,children:"15 seconds"})]})]})]}),h.jsx("button",{onClick:k,disabled:r,style:{padding:"10px 20px",background:r?"rgba(95, 179, 179, 0.2)":"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.5)",borderRadius:"6px",color:r?"#8a959e":"#5fb3b3",cursor:r?"not-allowed":"pointer",fontSize:"13px",fontWeight:500,display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"},children:r?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"discovery-spinner",children:""}),"Scanning..."]}):h.jsx(h.Fragment,{children:" Scan Network"})})]}),l&&h.jsxs("div",{style:{padding:"10px 14px",background:"rgba(199, 95, 95, 0.15)",border:"1px solid rgba(199, 95, 95, 0.3)",borderRadius:"6px",color:"#c75f5f",fontSize:"12px",marginBottom:"12px"},children:[" ",l]}),d&&h.jsxs("div",{style:{fontSize:"10px",color:"#8a959e",marginBottom:"12px"},children:["Last scan: ",d.toLocaleTimeString(),"  Found ",a.length," device(s)"]}),a.length===0&&!r&&d&&h.jsxs("div",{style:{padding:"30px",textAlign:"center",color:"#8a959e",background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px"},children:[h.jsx("div",{style:{fontSize:"24px",marginBottom:"8px"},children:""}),h.jsx("div",{children:"No devices found on your network."}),h.jsx("div",{style:{fontSize:"11px",marginTop:"8px"},children:"Try increasing the timeout or check if your devices are online."})]}),Object.entries(U).map(([te,ee])=>{const L=E(te);return h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",paddingBottom:"6px",borderBottom:"1px solid rgba(95, 179, 179, 0.15)"},children:[h.jsx("span",{style:{fontSize:"16px"},children:L.icon}),h.jsx("span",{style:{color:L.color,fontSize:"13px",fontWeight:500},children:L.label}),h.jsx("span",{style:{color:"#8a959e",fontSize:"11px",background:"rgba(0, 0, 0, 0.2)",padding:"2px 8px",borderRadius:"10px"},children:ee.length})]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:ee.map(G=>h.jsxs("div",{style:{background:b===G.id?"rgba(95, 179, 179, 0.1)":"rgba(0, 0, 0, 0.15)",border:"1px solid rgba(95, 179, 179, 0.15)",borderRadius:"6px",padding:"10px 14px",cursor:"pointer",transition:"all 0.2s"},onClick:()=>w(b===G.id?null:G.id),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#c5cdd3",fontSize:"13px",fontWeight:500},children:G.name}),h.jsxs("div",{style:{color:"#8a959e",fontSize:"11px",fontFamily:"monospace"},children:[G.ip,":",G.port]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[G.configured?h.jsx("span",{style:{background:"rgba(95, 170, 125, 0.2)",color:"#5faa7d",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"Configured"}):h.jsx("span",{style:{background:"rgba(212, 160, 84, 0.2)",color:"#d4a054",padding:"3px 8px",borderRadius:"4px",fontSize:"10px"},children:"New"}),h.jsx("span",{style:{color:"#8a959e",fontSize:"12px"},children:b===G.id?"":""})]})]}),b===G.id&&h.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(95, 179, 179, 0.1)",fontSize:"11px",color:"#8a959e"},children:[h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"100px 1fr",gap:"6px 12px"},children:[h.jsx("span",{children:"Host:"}),h.jsx("span",{style:{color:"#c5cdd3",fontFamily:"monospace"},children:G.host||"N/A"}),h.jsx("span",{children:"Source:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:G.source==="mdns"?"mDNS/Bonjour":G.source==="udp"?"UDP Broadcast":G.source}),h.jsx("span",{children:"Discovered:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:D(G.discoveredAt)}),G.capabilities&&G.capabilities.length>0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Capabilities:"}),h.jsx("span",{style:{color:"#5fb3b3"},children:G.capabilities.join(", ")})]}),G.model&&h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"Model:"}),h.jsx("span",{style:{color:"#c5cdd3"},children:G.model})]})]}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[h.jsx("button",{onClick:ge=>{ge.stopPropagation(),window.open(`http://${G.ip}:${G.port}`,"_blank")},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.15)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"4px",color:"#5fb3b3",cursor:"pointer",fontSize:"11px"},children:" Open Web UI"}),h.jsx("button",{onClick:ge=>{ge.stopPropagation(),navigator.clipboard.writeText(G.ip)},style:{padding:"6px 12px",background:"rgba(95, 179, 179, 0.1)",border:"1px solid rgba(95, 179, 179, 0.2)",borderRadius:"4px",color:"#8a959e",cursor:"pointer",fontSize:"11px"},children:" Copy IP"})]})]})]},G.id))})]},te)}),h.jsx("style",{children:`
                .discovery-spinner {
                    display: inline-block;
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    from { transform: rotate(0deg); }
                    to { transform: rotate(360deg); }
                }
            `})]})}const To={tron:{name:"Tron (Default)",description:"Cyan neon on dark - the classic T2 look",colors:{primary:"#5fb3b3",background:"#1e2428",surface:"#2a3238",surfaceLight:"#343d44",text:"#c5cdd3",textMuted:"#8a959e",success:"#5faa7d",warning:"#d4a054",error:"#c75f5f",borderOpacity:25}},midnight:{name:"Midnight Purple",description:"Deep purple with pink accents",colors:{primary:"#b388ff",background:"#1a1a2e",surface:"#25253a",surfaceLight:"#32324a",text:"#e0d6ff",textMuted:"#9990b8",success:"#69f0ae",warning:"#ffab40",error:"#ff5252",borderOpacity:30}},forest:{name:"Forest",description:"Natural greens with earth tones",colors:{primary:"#81c784",background:"#1b2420",surface:"#263530",surfaceLight:"#324540",text:"#d5e8d4",textMuted:"#8aa888",success:"#4caf50",warning:"#ffb74d",error:"#e57373",borderOpacity:25}},ember:{name:"Ember",description:"Warm orange and red firelight",colors:{primary:"#ff7043",background:"#1f1510",surface:"#2d2018",surfaceLight:"#3d2d22",text:"#ffe0cc",textMuted:"#b08060",success:"#aed581",warning:"#ffc107",error:"#ff5722",borderOpacity:30}},arctic:{name:"Arctic",description:"Cool blues with icy highlights",colors:{primary:"#4fc3f7",background:"#0d1b2a",surface:"#1b2838",surfaceLight:"#283848",text:"#e3f2fd",textMuted:"#78a5c8",success:"#26a69a",warning:"#ffca28",error:"#ef5350",borderOpacity:25}},monochrome:{name:"Monochrome",description:"Clean grayscale - easy on the eyes",colors:{primary:"#90a4ae",background:"#1a1a1a",surface:"#252525",surfaceLight:"#333333",text:"#e0e0e0",textMuted:"#888888",success:"#a5d6a7",warning:"#ffe082",error:"#ef9a9a",borderOpacity:20}}},D1={"Core Colors":{icon:"",settings:[{key:"primary",label:"Primary Accent",type:"color",default:"#5fb3b3"},{key:"background",label:"Background",type:"color",default:"#1e2428"},{key:"surface",label:"Surface",type:"color",default:"#2a3238"},{key:"surfaceLight",label:"Elevated Surface",type:"color",default:"#343d44"},{key:"text",label:"Text",type:"color",default:"#c5cdd3"},{key:"textMuted",label:"Muted Text",type:"color",default:"#8a959e"}]},"Status Colors":{icon:"",settings:[{key:"success",label:"Success",type:"color",default:"#5faa7d"},{key:"warning",label:"Warning",type:"color",default:"#d4a054"},{key:"error",label:"Error",type:"color",default:"#c75f5f"}]},"Socket Colors":{icon:"",settings:[{key:"socketBoolean",label:"Boolean",type:"color",default:"#10b981",cssVar:"socket-boolean-color"},{key:"socketNumber",label:"Number",type:"color",default:"#3b82f6",cssVar:"socket-number-color"},{key:"socketString",label:"String",type:"color",default:"#f59e0b",cssVar:"socket-string-color"},{key:"socketHsv",label:"HSV/Color",type:"color",default:"#8b5cf6",cssVar:"socket-hsv-color"},{key:"socketObject",label:"Object",type:"color",default:"#6366f1",cssVar:"socket-object-color"},{key:"socketLight",label:"Light/Device",type:"color",default:"#eab308",cssVar:"socket-light-color"}]},"Node Glow Colors":{icon:"",settings:[{key:"nodeHa",label:"Home Assistant",type:"color",default:"#00d4ff",cssVar:"node-ha-glow"},{key:"nodeLogic",label:"Logic",type:"color",default:"#8b5cf6",cssVar:"node-logic-glow"},{key:"nodeTimer",label:"Timer/Event",type:"color",default:"#f59e0b",cssVar:"node-timer-glow"},{key:"nodeColor",label:"Color",type:"color",default:"#ec4899",cssVar:"node-color-glow"},{key:"nodeUtility",label:"Utility",type:"color",default:"#14b8a6",cssVar:"node-utility-glow"},{key:"nodeDevice",label:"Direct Device",type:"color",default:"#22c55e",cssVar:"node-device-glow"}]},Editor:{icon:"",settings:[{key:"borderOpacity",label:"Border Opacity",type:"range",min:0,max:100,default:25},{key:"glowIntensity",label:"Glow Intensity",type:"range",min:0,max:100,default:50},{key:"gridOpacity",label:"Grid Opacity",type:"range",min:0,max:100,default:30}]}},_f=Object.values(D1).flatMap(a=>a.settings),VC=[{category:"Home Assistant",icon:"",testable:"ha",settings:[{key:"HA_HOST",label:"Home Assistant URL",placeholder:"http://homeassistant.local:8123",type:"text"},{key:"HA_TOKEN",label:"Long-Lived Access Token",placeholder:"eyJ...",type:"password",isSecret:!0}]},{category:"Weather Services",icon:"",testable:"weather",settings:[{key:"OPENWEATHERMAP_API_KEY",label:"OpenWeatherMap API Key",placeholder:"Your API key",type:"password",isSecret:!0}]},{category:"Ambient Weather",icon:"",testable:"ambient",settings:[{key:"AMBIENT_API_KEY",label:"Ambient Weather API Key",placeholder:"Your API key",type:"password",isSecret:!0},{key:"AMBIENT_APPLICATION_KEY",label:"Application Key",placeholder:"Your app key",type:"password",isSecret:!0},{key:"AMBIENT_MAC_ADDRESS",label:"Device MAC Address",placeholder:"XX:XX:XX:XX:XX:XX",type:"text"}]},{category:"Forecast Panel",icon:"",description:"Configure HA sensors to display live weather data on the forecast panel (optional)",settings:[{key:"FORECAST_TEMP_SENSOR",label:"Temperature Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for current temperature"},{key:"FORECAST_WIND_SENSOR",label:"Wind Speed Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind speed"},{key:"FORECAST_WIND_DIR_SENSOR",label:"Wind Direction Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for wind direction"},{key:"FORECAST_RAIN_SENSOR",label:"Rain Rate Sensor",placeholder:"Select sensor...",type:"sensor-select",hint:"HA sensor for rain rate"}]},{category:"Philips Hue",icon:"",testable:"hue",settings:[{key:"HUE_BRIDGE_IP",label:"Bridge IP Address",placeholder:"192.168.1.x",type:"text"},{key:"HUE_USERNAME",label:"Bridge Username/Key",placeholder:"Generated key",type:"password",isSecret:!0}]},{category:"Telegram Notifications",icon:"",testable:"telegram",settings:[{key:"TELEGRAM_BOT_TOKEN",label:"Bot Token",placeholder:"123456:ABC-DEF...",type:"password",isSecret:!0},{key:"TELEGRAM_CHAT_ID",label:"Chat ID",placeholder:"123456789",type:"text"}]},{category:"ElevenLabs TTS",icon:"",description:"AI voice generation for TTS Announcement node",settings:[{key:"ELEVENLABS_API_KEY",label:"API Key",placeholder:"Your ElevenLabs API key",type:"password",isSecret:!0,hint:"Get one at elevenlabs.io"},{key:"PUBLIC_URL",label:"Public URL",placeholder:"http://192.168.1.x:3000",type:"text",hint:"URL reachable by your speakers (for audio playback)"}]},{category:"Location",icon:"",description:"Your location for sunrise/sunset calculations and weather",settings:[{key:"LOCATION_CITY",label:"City",placeholder:"Dallas, TX",type:"text"},{key:"LOCATION_LATITUDE",label:"Latitude",placeholder:"32.7767",type:"text"},{key:"LOCATION_LONGITUDE",label:"Longitude",placeholder:"-96.7970",type:"text"},{key:"LOCATION_TIMEZONE",label:"Timezone",placeholder:"America/Chicago",type:"text"}]},{category:"Server Settings",icon:"",settings:[{key:"PORT",label:"Server Port",placeholder:"3000",type:"number"},{key:"LOG_LEVEL",label:"Log Level",placeholder:"info",type:"select",options:["debug","info","warn","error"]}]}],w0=a=>{try{const t=Math.max(0,parseInt(a.slice(1,3),16)-40),r=Math.max(0,parseInt(a.slice(3,5),16)-40),s=Math.max(0,parseInt(a.slice(5,7),16)-40);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}},S0=a=>{try{const t=Math.min(255,parseInt(a.slice(1,3),16)+50),r=Math.min(255,parseInt(a.slice(3,5),16)+50),s=Math.min(255,parseInt(a.slice(5,7),16)+50);return`#${t.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`}catch{return a}};function GC({isOpen:a,onClose:t}){const[r,s]=x.useState({}),[l,c]=x.useState(!0),[d,p]=x.useState(!1),[m,g]=x.useState(null),[b,w]=x.useState(null),[k,E]=x.useState({}),[D,F]=x.useState({}),[U,te]=x.useState({}),[ee,L]=x.useState({}),[G,ge]=x.useState([]),[Se,B]=x.useState(!1),pe=x.useRef(!1),oe=x.useRef(null),[ye,Ie]=x.useState(""),[De,et]=x.useState(()=>zc()),[nt,Ke]=x.useState(()=>!!ys()),[q,he]=x.useState(!1),[me,Me]=x.useState(()=>{try{const N=localStorage.getItem("t2theme-overrides"),j=N?JSON.parse(N):{},W={};return _f.forEach(se=>{W[se.key]=se.default}),{...W,...j}}catch{const N={};return _f.forEach(j=>{N[j.key]=j.default}),N}}),[J,v]=x.useState(!1),[T,_]=x.useState(()=>{try{return localStorage.getItem("t2theme-preset")||"tron"}catch{return"tron"}}),[M,Q]=x.useState(()=>{try{const N=localStorage.getItem("t2-custom-themes");return N?JSON.parse(N):{}}catch{return{}}}),[fe,xe]=x.useState(!1),[$e,Fe]=x.useState(""),Rt={"Home Assistant":{accent:"#4fc3f7",background:"#0a1520",icon:""},Weather:{accent:"#ffb74d",background:"#1a1510",icon:""},Logic:{accent:"#81c784",background:"#0a140a",icon:""},"Timer/Event":{accent:"#ce93d8",background:"#140a14",icon:""},Color:{accent:"#f48fb1",background:"#140a10",icon:""},Utility:{accent:"#90a4ae",background:"#0a0f14",icon:""},Inputs:{accent:"#aed581",background:"#0f140a",icon:""},CC_Control_Nodes:{accent:"#64b5f6",background:"#0a1018",icon:""},Other:{accent:"#b0bec5",background:"#0a0f14",icon:""}},[qt,At]=x.useState(()=>{try{const N=localStorage.getItem("t2category-overrides"),j=N?JSON.parse(N):{},W={};for(const[se,Re]of Object.entries(Rt))W[se]={...Re,...j[se]||{}};return W}catch{return{...Rt}}}),[Wt,lt]=x.useState(!1),$t={Boolean:{color:"#10b981",icon:"",description:"True/False values"},Number:{color:"#3b82f6",icon:"",description:"Numeric values"},String:{color:"#f59e0b",icon:"",description:"Text values"},"HSV Info":{color:"#8b5cf6",icon:"",description:"Color HSV data"},"Object/Any":{color:"#06b6d4",icon:"",description:"Generic objects"},"Light Info":{color:"#eab308",icon:"",description:"Light state data"}},wn={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},[jn,Qe]=x.useState(()=>{try{const N=localStorage.getItem("t2socket-colors"),j=N?JSON.parse(N):{},W={};for(const[se,Re]of Object.entries($t))W[se]={...Re,...j[se]||{}};return W}catch{return{...$t}}}),[xt,sn]=x.useState(!1),[An,Z]=x.useState(!1),[ie,A]=x.useState(null),[K,ne]=x.useState(!1),[Y,C]=x.useState(!1);x.useEffect(()=>{a?(ue(),F({Security:!0,"Home Assistant":!0}),te({}),et(zc()),Ke(!!ys()),Ie(""),pe.current||(pe.current=!0,(async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),B(!0);try{const N=await fn("/api/lights/ha/");if(console.log("[SettingsModal] Response status:",N.status),!N.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",N.status),B(!1);return}const j=await N.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),B(!1);return}const W=j.filter(se=>(se.id||se.entity_id||"").includes("sensor.")).map(se=>({id:(se.id||se.entity_id||"").replace("ha_",""),name:se.name||se.friendly_name||se.id||se.entity_id})).sort((se,Re)=>se.name.localeCompare(Re.name));console.log("[SettingsModal] Filtered sensors:",W.length),ge(W),B(!1)}catch(N){console.warn("[SettingsModal] Error fetching HA sensors:",N),B(!1)}})())):pe.current=!1},[a]);const H=async()=>{console.log("[SettingsModal] Fetching HA sensors via HTTP..."),B(!0);try{const N=await fn("/api/lights/ha/");if(!N.ok){console.warn("[SettingsModal] Failed to fetch HA devices:",N.status),B(!1);return}const j=await N.json();if(console.log("[SettingsModal] HA devices received:",j?.length),!j||!Array.isArray(j)){console.warn("[SettingsModal] No devices array received"),B(!1);return}const W=j.filter(se=>(se.id||se.entity_id||"").includes("sensor.")).map(se=>({id:(se.id||se.entity_id||"").replace("ha_",""),name:se.name||se.friendly_name||se.id||se.entity_id})).sort((se,Re)=>se.name.localeCompare(Re.name));console.log("[SettingsModal] Filtered sensors:",W.length),ge(W),B(!1)}catch(N){console.warn("[SettingsModal] Error fetching HA sensors:",N),B(!1)}},ue=async()=>{c(!0),g(null);try{const N=await fn("/api/settings");if(!N.ok)throw new Error("Failed to fetch settings");const W=(await N.json()).settings||{};s(W);try{const se=await fn("/api/config");if(se.ok){const Re=await se.json();if(Re.success){ne(Re.isAddon||!1),C(!0);const Yt=!W.LOCATION_CITY,_n=!W.LOCATION_LATITUDE,Ye=!W.LOCATION_LONGITUDE,tn=!W.LOCATION_TIMEZONE;(Yt||_n||Ye||tn)&&(s(Ct=>({...Ct,...Yt&&Re.locationName?{LOCATION_CITY:Re.locationName}:{},..._n&&Re.latitude?{LOCATION_LATITUDE:String(Re.latitude)}:{},...Ye&&Re.longitude?{LOCATION_LONGITUDE:String(Re.longitude)}:{},...tn&&Re.timezone?{LOCATION_TIMEZONE:Re.timezone}:{}})),console.log("[Settings] Auto-filled location from Home Assistant config"))}}}catch(se){console.log("[Settings] Could not fetch HA config for location auto-fill:",se.message)}}catch(N){g("Failed to load settings: "+N.message)}finally{c(!1)}},ce=async()=>{p(!0),g(null),w(null);try{const N=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:r})});if(!N.ok){const j=await N.json();throw new Error(j.error||"Failed to save settings")}w("Settings saved! Some changes may require a server restart."),setTimeout(()=>w(null),5e3)}catch(N){g("Failed to save: "+N.message)}finally{p(!1)}},Te=(N,j)=>{s(W=>({...W,[N]:j}))},be=async()=>{const N=r.LOCATION_CITY;if(!N||N.trim().length<2){A("Please enter a city name first");return}Z(!0),A(null);try{const j=await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(N)}&format=json&limit=1&addressdetails=1`,{headers:{"User-Agent":"T2AutoTron/2.1 (Home Automation App)"}});if(!j.ok)throw new Error("Geocoding service unavailable");const W=await j.json();if(W.length===0){A(`Could not find "${N}". Try adding state/country (e.g., "Dallas, TX, USA")`);return}const se=W[0],Re=parseFloat(se.lat).toFixed(4),Yt=parseFloat(se.lon).toFixed(4),_n=se.address?[se.address.city||se.address.town||se.address.village||se.name,se.address.state,se.address.country].filter(Boolean).join(", "):se.display_name.split(",").slice(0,3).join(",");let Ye="UTC";const tn=se.address?.state?.toLowerCase()||"",Ct=se.address?.country?.toLowerCase()||"";if(Ct.includes("portugal"))Ye="Europe/Lisbon";else if(Ct.includes("spain"))Ye="Europe/Madrid";else if(Ct.includes("france"))Ye="Europe/Paris";else if(Ct.includes("germany"))Ye="Europe/Berlin";else if(Ct.includes("italy"))Ye="Europe/Rome";else if(Ct.includes("united kingdom")||Ct.includes("ireland"))Ye="Europe/London";else if(Ct.includes("netherlands"))Ye="Europe/Amsterdam";else if(Ct.includes("belgium"))Ye="Europe/Brussels";else if(Ct.includes("australia"))Ye="Australia/Sydney";else if(Ct.includes("japan"))Ye="Asia/Tokyo";else if(Ct.includes("china"))Ye="Asia/Shanghai";else if(Ct.includes("india"))Ye="Asia/Kolkata";else if(Ct.includes("brazil"))Ye="America/Sao_Paulo";else if(Ct.includes("canada"))tn.includes("british columbia")?Ye="America/Vancouver":tn.includes("alberta")?Ye="America/Edmonton":tn.includes("saskatchewan")?Ye="America/Regina":tn.includes("manitoba")?Ye="America/Winnipeg":tn.includes("ontario")?Ye="America/Toronto":tn.includes("quebec")?Ye="America/Montreal":Ye="America/Toronto";else if(Ct.includes("united states")||Ct.includes("usa"))tn.includes("hawaii")?Ye="Pacific/Honolulu":tn.includes("alaska")?Ye="America/Anchorage":["california","nevada","oregon","washington"].some(Pe=>tn.includes(Pe))?Ye="America/Los_Angeles":["arizona"].some(Pe=>tn.includes(Pe))?Ye="America/Phoenix":["colorado","montana","wyoming","utah","new mexico","idaho"].some(Pe=>tn.includes(Pe))?Ye="America/Denver":["texas","oklahoma","kansas","nebraska","south dakota","north dakota","minnesota","iowa","missouri","arkansas","louisiana","wisconsin","illinois","mississippi","alabama","tennessee"].some(Pe=>tn.includes(Pe))?Ye="America/Chicago":Ye="America/New_York";else{const Pe=parseFloat(Yt);Pe>=-125&&Pe<-115?Ye="America/Los_Angeles":Pe>=-115&&Pe<-102?Ye="America/Denver":Pe>=-102&&Pe<-87?Ye="America/Chicago":Pe>=-87&&Pe<-67?Ye="America/New_York":Pe>=-10&&Pe<3?Ye="Europe/London":Pe>=3&&Pe<15?Ye="Europe/Paris":Pe>=15&&Pe<30&&(Ye="Europe/Berlin")}s(Pe=>({...Pe,LOCATION_CITY:_n,LOCATION_LATITUDE:Re,LOCATION_LONGITUDE:Yt,LOCATION_TIMEZONE:Ye})),w(`Found: ${_n} (${Re}, ${Yt})`),setTimeout(()=>w(null),5e3)}catch(j){A("Search failed: "+j.message)}finally{Z(!1)}},je=(N,j)=>{const W=_f.find(Re=>Re.key===N),se=document.documentElement;if(N==="borderOpacity")se.style.setProperty("--node-border-opacity",j/100);else if(N==="glowIntensity")se.style.setProperty("--node-glow-intensity",j/100);else if(N==="gridOpacity")se.style.setProperty("--editor-grid-opacity",j/100);else if(W?.cssVar){const Re=W.cssVar;if(se.style.setProperty(`--${Re}`,j),typeof j=="string"&&j.startsWith("#")){const Yt=parseInt(j.slice(1,3),16),_n=parseInt(j.slice(3,5),16),Ye=parseInt(j.slice(5,7),16);se.style.setProperty(`--${Re.replace("-color","-rgb").replace("-glow","-rgb")}`,`${Yt}, ${_n}, ${Ye}`);const tn=Math.max(0,Yt-40),Ct=Math.max(0,_n-40),Pe=Math.max(0,Ye-40);se.style.setProperty(`--${Re.replace("-color","-dark").replace("-glow","-dark")}`,`rgb(${tn}, ${Ct}, ${Pe})`);const ra=Math.min(255,Yt+40),Un=Math.min(255,_n+40),Gt=Math.min(255,Ye+40);se.style.setProperty(`--${Re.replace("-color","-border").replace("-glow","-border")}`,`rgb(${ra}, ${Un}, ${Gt})`)}}else if(se.style.setProperty(`--theme-${N}`,j),typeof j=="string"&&j.startsWith("#")){const Re=parseInt(j.slice(1,3),16),Yt=parseInt(j.slice(3,5),16),_n=parseInt(j.slice(5,7),16);se.style.setProperty(`--theme-${N}-rgb`,`${Re}, ${Yt}, ${_n}`)}},Ee=(N,j)=>{Me(se=>({...se,[N]:j})),v(!0),_("custom"),je(N,j);const W={...me,[N]:j};localStorage.setItem("t2theme-overrides",JSON.stringify(W)),localStorage.setItem("t2theme-preset","custom")},Ue=N=>{const j=To[N];j&&(Object.entries(j.colors).forEach(([W,se])=>{je(W,se)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",N),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),Me(j.colors),_(N),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},Ve=N=>{const j=M[N];j&&(Object.entries(j.colors).forEach(([W,se])=>{je(W,se)}),window.T2Controls?.THEME&&Object.assign(window.T2Controls.THEME,j.colors),localStorage.setItem("t2theme-preset",`custom:${N}`),localStorage.setItem("t2theme-overrides",JSON.stringify(j.colors)),Me(j.colors),_(`custom:${N}`),v(!1),w(`Theme "${j.name}" applied!`),setTimeout(()=>w(null),3e3))},We=()=>{if(!$e.trim()){g("Please enter a theme name");return}const N=$e.trim().toLowerCase().replace(/\s+/g,"-");if(To[N]){g("Cannot use a built-in theme name");return}const j={name:$e.trim(),colors:{...me}},W={...M,[N]:j};Q(W);try{localStorage.setItem("t2-custom-themes",JSON.stringify(W)),localStorage.setItem("t2theme-preset",`custom:${N}`),_(`custom:${N}`),xe(!1),Fe(""),v(!1),w(`Custom theme "${$e.trim()}" saved!`),setTimeout(()=>w(null),3e3)}catch(se){g("Failed to save custom theme: "+se.message)}},ke=(N,j)=>{j.stopPropagation();const W=M[N]?.name||N;if(!window.confirm(`Delete custom theme "${W}"?`))return;const{[N]:se,...Re}=M;Q(Re);try{localStorage.setItem("t2-custom-themes",JSON.stringify(Re)),T===`custom:${N}`&&Ue("tron"),w(`Theme "${W}" deleted`),setTimeout(()=>w(null),3e3)}catch(Yt){g("Failed to delete theme: "+Yt.message)}},kt=()=>{try{localStorage.setItem("t2theme-overrides",JSON.stringify(me)),localStorage.setItem("t2theme-preset","custom"),_("custom"),w("Theme saved! Refresh the page to apply changes."),v(!1),setTimeout(()=>w(null),5e3)}catch(N){g("Failed to save theme: "+N.message)}},qe=()=>{Ue("tron"),localStorage.removeItem("t2theme-overrides"),localStorage.removeItem("t2theme-preset"),v(!1),setTimeout(()=>w(null),5e3)},vt=(N,j,W)=>{At(se=>({...se,[N]:{...se[N],[j]:W}})),lt(!0)},zt=N=>{const j=parseInt(N.slice(1,3),16),W=parseInt(N.slice(3,5),16),se=parseInt(N.slice(5,7),16);return`${j}, ${W}, ${se}`},ot={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"},Et=N=>{const j=document.documentElement;for(const[W,se]of Object.entries(N)){const Re=ot[W];Re&&(j.style.setProperty(`--node-${Re}-color`,se.accent),j.style.setProperty(`--node-${Re}-color-rgb`,zt(se.accent)),se.background&&j.style.setProperty(`--node-${Re}-bg`,se.background))}},kn=()=>{try{const N={};for(const[j,W]of Object.entries(qt)){const se=Rt[j],Re={};W.accent!==se.accent&&(Re.accent=W.accent),W.background!==se.background&&(Re.background=W.background),Object.keys(Re).length>0&&(N[j]=Re)}Object.keys(N).length>0?localStorage.setItem("t2category-overrides",JSON.stringify(N)):localStorage.removeItem("t2category-overrides"),Et(qt),w("Category colors applied!"),lt(!1),setTimeout(()=>w(null),3e3)}catch(N){g("Failed to save category colors: "+N.message)}},$n=()=>{At({...Rt}),localStorage.removeItem("t2category-overrides"),Et(Rt),w("Category colors reset to defaults!"),lt(!1),setTimeout(()=>w(null),3e3)},Jt=(N,j)=>{Qe(W=>({...W,[N]:{...W[N],color:j}})),sn(!0)},on=(N,j=20)=>{const W=parseInt(N.slice(1),16),se=Math.max(0,(W>>16)-Math.round(255*j/100)),Re=Math.max(0,(W>>8&255)-Math.round(255*j/100)),Yt=Math.max(0,(W&255)-Math.round(255*j/100));return`#${(1<<24|se<<16|Re<<8|Yt).toString(16).slice(1)}`},Wa=(N,j=20)=>{const W=parseInt(N.slice(1),16),se=Math.min(255,(W>>16)+Math.round(255*j/100)),Re=Math.min(255,(W>>8&255)+Math.round(255*j/100)),Yt=Math.min(255,(W&255)+Math.round(255*j/100));return`#${(1<<24|se<<16|Re<<8|Yt).toString(16).slice(1)}`},Ua=N=>{const j=document.documentElement;for(const[W,se]of Object.entries(N)){const Re=wn[W];Re&&(j.style.setProperty(`--socket-${Re}-color`,se.color),j.style.setProperty(`--socket-${Re}-dark`,on(se.color,15)),j.style.setProperty(`--socket-${Re}-border`,Wa(se.color,20)),j.style.setProperty(`--socket-${Re}-rgb`,zt(se.color)))}},Aa=()=>{try{const N={};for(const[j,W]of Object.entries(jn)){const se=$t[j];W.color!==se.color&&(N[j]={color:W.color})}Object.keys(N).length>0?localStorage.setItem("t2socket-colors",JSON.stringify(N)):localStorage.removeItem("t2socket-colors"),Ua(jn),w("Socket colors applied!"),sn(!1),setTimeout(()=>w(null),3e3)}catch(N){g("Failed to save socket colors: "+N.message)}},ri=()=>{Qe({...$t}),localStorage.removeItem("t2socket-colors"),Ua($t),w("Socket colors reset to defaults!"),sn(!1),setTimeout(()=>w(null),3e3)},Zn=N=>{F(j=>({...j,[N]:!j[N]})),N==="Forecast Panel"&&!D[N]&&G.length===0&&H()},xr=N=>{E(j=>({...j,[N]:!j[N]}))},en=async N=>{L(j=>({...j,[N]:!0})),te(j=>({...j,[N]:null}));try{const W=await(await fn("/api/settings/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({service:N,settings:r})})).json();te(se=>({...se,[N]:{success:W.success,message:W.message||(W.success?"Connection successful!":"Connection failed"),details:W.details}}))}catch(j){te(W=>({...W,[N]:{success:!1,message:"Test failed: "+j.message}}))}finally{L(j=>({...j,[N]:!1}))}},Xn=()=>{const N={version:"1.0",timestamp:new Date().toISOString(),settings:r},j=new Blob([JSON.stringify(N,null,2)],{type:"application/json"}),W=URL.createObjectURL(j),se=document.createElement("a");se.href=W,se.download=`t2autotron-settings-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(W),w("Settings exported successfully!"),setTimeout(()=>w(null),3e3)},En=N=>{const j=N.target.files?.[0];if(!j)return;const W=new FileReader;W.onload=se=>{try{const Re=JSON.parse(se.target.result);if(!Re.settings||typeof Re.settings!="object")throw new Error("Invalid backup file format");s(Yt=>({...Yt,...Re.settings})),w(`Imported ${Object.keys(Re.settings).length} settings from backup. Click Save to apply.`),setTimeout(()=>w(null),5e3)}catch(Re){g("Failed to import backup: "+Re.message)}},W.readAsText(j),N.target.value=""};return a?jh.createPortal(h.jsx("div",{className:"settings-modal-overlay",onClick:t,children:h.jsxs("div",{className:"settings-modal",onClick:N=>N.stopPropagation(),children:[h.jsxs("div",{className:"settings-header",children:[h.jsx("h2",{children:" Settings & API Keys"}),h.jsx("button",{className:"settings-close-btn",onClick:t,children:""})]}),h.jsx("div",{className:"settings-content",children:l?h.jsx("div",{className:"settings-loading",children:"Loading settings..."}):h.jsxs(h.Fragment,{children:[m&&h.jsx("div",{className:"settings-error",children:m}),b&&h.jsx("div",{className:"settings-success",children:b}),h.jsx("div",{className:"settings-warning",children:" These settings are stored on the server (managed by this app). Keep the server secure."}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn("Security"),style:{background:"linear-gradient(135deg, rgba(0, 243, 255, 0.12), rgba(0, 150, 200, 0.08))"},children:[h.jsxs("span",{children:[D.Security?"":""," Security (This Device)"]}),nt&&h.jsxs("span",{style:{fontSize:"10px",color:De?"#00c896":"#ffaa00"},children:[" ",De?"REMEMBERED":"SESSION"]})]}),D.Security&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"10px",padding:"8px",background:"rgba(0, 243, 255, 0.06)",borderRadius:"4px"},children:"Used to authorize protected actions (Settings tests, Updates) when accessing the server from another device."}),h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:["App PIN",h.jsx("button",{className:"settings-show-btn",onClick:()=>he(N=>!N),type:"button",children:q?" Hide":" Show"})]}),h.jsx("input",{type:q?"text":"password",className:"settings-input",value:ye,onChange:N=>Ie(N.target.value),placeholder:nt?"Enter new PIN (leave blank to keep current)":"Enter PIN",autoComplete:"off"}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"10px",alignItems:"center"},children:[h.jsxs("label",{style:{display:"flex",gap:"8px",alignItems:"center",fontSize:"12px",color:"#88ddff"},children:[h.jsx("input",{type:"checkbox",checked:De,onChange:N=>{const j=N.target.checked;et(j);const W=ys();W&&v0(W,{remember:j})}}),"Remember PIN on this device"]}),h.jsxs("div",{style:{marginLeft:"auto",display:"flex",gap:"10px"},children:[h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{const N=ye.trim();N&&(v0(N,{remember:De}),Ke(!0),Ie(""),(async()=>{try{const j=await fn("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({settings:{APP_PIN:N}})});if(!j.ok){const W=await j.text();throw new Error(W||`HTTP ${j.status}`)}w("PIN saved (server + this device)."),setTimeout(()=>w(null),3e3)}catch{w("PIN saved on this device. Server PIN update failed."),setTimeout(()=>w(null),4e3)}finally{ue()}})())},style:{background:"rgba(0, 200, 150, 0.1)",borderColor:"rgba(0, 200, 150, 0.4)",color:"#00c896"},disabled:!ye.trim(),children:" Save PIN"}),h.jsx("button",{className:"settings-btn-small",type:"button",onClick:()=>{_1(),Ke(!1),Ie(""),et(!1),w("PIN cleared."),setTimeout(()=>w(null),3e3)},style:{background:"rgba(199, 95, 95, 0.12)",borderColor:"rgba(199, 95, 95, 0.45)",color:"#c75f5f"},disabled:!nt,children:"Clear"})]})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"11px",color:"#666"},children:nt?`PIN is saved (${De?"remembered":"this session"}).`:"No PIN saved."})]})]})]}),h.jsxs("div",{className:"settings-backup-section",children:[h.jsx("span",{className:"settings-backup-label",children:" Backup & Restore"}),h.jsxs("div",{className:"settings-backup-buttons",children:[h.jsx("button",{className:"settings-btn-small settings-btn-export",onClick:Xn,children:" Export Backup"}),h.jsx("button",{className:"settings-btn-small settings-btn-import",onClick:()=>oe.current?.click(),children:" Import Backup"}),h.jsx("input",{ref:oe,type:"file",accept:".json",style:{display:"none"},onChange:En})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn("Performance"),style:{background:"linear-gradient(135deg, rgba(255, 170, 0, 0.15), rgba(255, 100, 50, 0.1))"},children:[h.jsxs("span",{children:[D.Performance?"":""," Performance Mode"]}),window.getPerformanceMode?.()&&h.jsx("span",{style:{fontSize:"10px",color:"#10b981"},children:" ACTIVE"})]}),D.Performance&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{className:"settings-info",style:{fontSize:"11px",color:"#ffaa00",marginBottom:"12px",padding:"10px",background:"rgba(255, 170, 0, 0.1)",borderRadius:"4px",border:"1px solid rgba(255, 170, 0, 0.2)"},children:[" ",h.jsx("strong",{children:"Enable this if you experience lag or high GPU usage with many nodes."}),h.jsx("br",{}),h.jsx("br",{}),"Performance Mode disables:",h.jsxs("ul",{style:{margin:"8px 0 0 0",paddingLeft:"20px"},children:[h.jsx("li",{children:"Backdrop blur effects on nodes (biggest impact)"}),h.jsx("li",{children:"Complex glow shadows"}),h.jsx("li",{children:"Infinite pulse/glow animations"}),h.jsx("li",{children:"Transition effects on nodes"})]})]}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"12px",background:"rgba(0, 0, 0, 0.3)",borderRadius:"6px"},children:[h.jsxs("div",{children:[h.jsx("div",{style:{color:"#e0e0e0",fontSize:"13px",fontWeight:"500"},children:"Performance Mode"}),h.jsx("div",{style:{color:"#888",fontSize:"11px",marginTop:"2px"},children:"Recommended for 40+ nodes"})]}),h.jsxs("label",{style:{position:"relative",display:"inline-block",width:"50px",height:"26px"},children:[h.jsx("input",{type:"checkbox",checked:window.getPerformanceMode?.()||!1,onChange:N=>{window.setPerformanceMode?.(N.target.checked),F(j=>({...j}))},style:{opacity:0,width:0,height:0}}),h.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,background:window.getPerformanceMode?.()?"#10b981":"#444",transition:"background 0.2s",borderRadius:"26px"},children:h.jsx("span",{style:{position:"absolute",content:"",height:"20px",width:"20px",left:window.getPerformanceMode?.()?"26px":"3px",bottom:"3px",background:"#fff",transition:"left 0.2s",borderRadius:"50%"}})})]})]}),h.jsx("div",{style:{marginTop:"12px",fontSize:"10px",color:"#666",textAlign:"center"},children:"Changes apply immediately. Look for  indicator in bottom-left when active."})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsx("div",{className:"settings-category-header",onClick:()=>Zn("Discovery"),children:h.jsxs("span",{children:[D.Discovery?"":""," Network Device Discovery"]})}),D.Discovery&&h.jsx("div",{className:"settings-category-content",children:h.jsx(HC,{})})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn("Theme"),children:[h.jsxs("span",{children:[D.Theme?"":""," Node Theme Settings"]}),J&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.Theme&&h.jsxs("div",{className:"settings-category-content",children:[h.jsxs("div",{style:{marginBottom:"16px",padding:"12px",background:"rgba(95, 179, 179, 0.08)",borderRadius:"8px",border:"1px solid rgba(95, 179, 179, 0.2)"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginBottom:"8px",display:"block"},children:" Built-in Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(To).map(([N,j])=>h.jsxs("button",{onClick:()=>Ue(N),style:{padding:"8px 14px",borderRadius:"6px",border:T===N?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:T===N?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:T===N?"600":"400",boxShadow:T===N?`0 0 12px ${j.colors.primary}40`:"none"},title:j.description,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name]},N))}),Object.keys(M).length>0&&h.jsxs(h.Fragment,{children:[h.jsx("label",{className:"settings-label",style:{fontSize:"12px",marginTop:"16px",marginBottom:"8px",display:"block"},children:" Your Saved Themes"}),h.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:Object.entries(M).map(([N,j])=>h.jsxs("button",{onClick:()=>Ve(N),style:{padding:"8px 14px",borderRadius:"6px",border:T===`custom:${N}`?`2px solid ${j.colors.primary}`:"1px solid rgba(255,255,255,0.2)",background:T===`custom:${N}`?`linear-gradient(135deg, ${j.colors.surface}, ${j.colors.background})`:j.colors.surface,color:j.colors.text,cursor:"pointer",transition:"all 0.2s",fontSize:"11px",fontWeight:T===`custom:${N}`?"600":"400",boxShadow:T===`custom:${N}`?`0 0 12px ${j.colors.primary}40`:"none",position:"relative",paddingRight:"28px"},title:`Custom theme: ${j.name}`,children:[h.jsx("span",{style:{display:"inline-block",width:"10px",height:"10px",borderRadius:"50%",background:j.colors.primary,marginRight:"6px",boxShadow:`0 0 6px ${j.colors.primary}`}}),j.name,h.jsx("span",{onClick:W=>ke(N,W),style:{position:"absolute",right:"6px",top:"50%",transform:"translateY(-50%)",fontSize:"12px",opacity:.6,cursor:"pointer"},title:"Delete this theme",children:""})]},N))})]}),h.jsx("div",{style:{marginTop:"8px",fontSize:"10px",color:"#8a959e",fontStyle:"italic"},children:T.startsWith("custom:")&&M[T.replace("custom:","")]?`Custom theme: ${M[T.replace("custom:","")].name}`:T!=="custom"&&To[T]?To[T].description:"Custom theme - you've modified individual colors"})]}),h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Click a preset to apply instantly, or customize individual colors below."}),Object.entries(D1).map(([N,j])=>h.jsxs("div",{style:{marginBottom:"16px"},children:[h.jsxs("div",{style:{fontSize:"11px",fontWeight:"600",color:me.primary||"#5fb3b3",marginBottom:"8px",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:j.icon}),h.jsx("span",{children:N})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"8px",padding:"8px",background:"rgba(0,0,0,0.2)",borderRadius:"6px"},children:j.settings.map(W=>h.jsxs("div",{className:"settings-field",style:{marginBottom:"4px"},children:[h.jsx("label",{className:"settings-label",style:{fontSize:"9px",marginBottom:"4px"},children:W.label}),W.type==="color"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"color",value:me[W.key]||W.default,onChange:se=>Ee(W.key,se.target.value),style:{width:"32px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("input",{type:"text",value:me[W.key]||W.default,onChange:se=>Ee(W.key,se.target.value),className:"settings-input",style:{flex:1,fontFamily:"monospace",fontSize:"9px",padding:"4px"}})]}):W.type==="range"?h.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[h.jsx("input",{type:"range",min:W.min,max:W.max,value:me[W.key]??W.default,onChange:se=>Ee(W.key,parseInt(se.target.value)),style:{flex:1}}),h.jsxs("span",{style:{minWidth:"28px",textAlign:"right",color:"#c5cdd3",fontSize:"10px"},children:[me[W.key]??W.default,"%"]})]}):null]},W.key))})]},N)),h.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:me.background||"#1e2428",borderRadius:"8px",border:`1px solid rgba(95, 179, 179, ${(me.borderOpacity||25)/100})`},children:[h.jsx("div",{style:{fontSize:"10px",color:me.textMuted||"#8a959e",marginBottom:"8px"},children:"PREVIEW"}),h.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center"},children:[h.jsx("div",{style:{padding:"8px 12px",background:me.surface,color:me.text,borderRadius:"4px",fontSize:"12px"},children:"Surface"}),h.jsx("div",{style:{padding:"8px 12px",background:me.surfaceLight,color:me.text,borderRadius:"4px",fontSize:"12px"},children:"Elevated"}),h.jsx("span",{style:{color:me.primary},children:"Primary"}),h.jsx("span",{style:{color:me.success},children:"Success"}),h.jsx("span",{style:{color:me.warning},children:"Warning"}),h.jsx("span",{style:{color:me.error},children:"Error"})]})]}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:qe,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:()=>xe(!0),style:{background:"rgba(95, 140, 220, 0.15)",borderColor:"rgba(95, 140, 220, 0.5)",color:"#5f8adc"},title:"Save current colors as a named custom theme",children:" Save as Custom Theme"}),h.jsx("button",{className:"settings-btn-small",onClick:kt,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Apply Changes"})]}),fe&&h.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4},children:h.jsxs("div",{style:{background:"var(--theme-surface, #2a3238)",padding:"24px",borderRadius:"12px",border:"1px solid rgba(95, 179, 179, 0.3)",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",minWidth:"300px"},children:[h.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--theme-text, #c5cdd3)",fontSize:"16px"},children:" Save Custom Theme"}),h.jsx("p",{style:{margin:"0 0 16px 0",color:"var(--theme-textMuted, #8a959e)",fontSize:"12px"},children:"Give your theme a name to save it for later use."}),h.jsx("input",{type:"text",value:$e,onChange:N=>Fe(N.target.value),placeholder:"My Awesome Theme",style:{width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.3)",background:"var(--theme-background, #1e2428)",color:"var(--theme-text, #c5cdd3)",fontSize:"14px",marginBottom:"16px",boxSizing:"border-box"},autoFocus:!0,onKeyDown:N=>{N.key==="Enter"&&We(),N.key==="Escape"&&(xe(!1),Fe(""))}}),h.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[h.jsx("button",{onClick:()=>{xe(!1),Fe("")},style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.2)",background:"transparent",color:"var(--theme-text, #c5cdd3)",cursor:"pointer",fontSize:"12px"},children:"Cancel"}),h.jsx("button",{onClick:We,style:{padding:"8px 16px",borderRadius:"6px",border:"1px solid rgba(95, 179, 179, 0.5)",background:"rgba(95, 179, 179, 0.2)",color:"#5fb3b3",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:" Save Theme"})]})]})})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn("CategoryColors"),children:[h.jsxs("span",{children:[D.CategoryColors?"":""," Category Accent Colors"]}),Wt&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.CategoryColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 179, 179, 0.1)",borderRadius:"4px"},children:" Set accent (border/header) and background colors for each node category."}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(qt).map(([N,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"6px 8px",background:j.background||"#0a0f14",borderRadius:"4px",border:`1px solid ${j.accent}55`},children:[h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.accent,onChange:W=>vt(N,"accent",W.target.value),title:"Accent color (borders, headers)",style:{width:"24px",height:"24px",border:"none",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"Accent"})]}),h.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px"},children:[h.jsx("input",{type:"color",value:j.background||"#0a0f14",onChange:W=>vt(N,"background",W.target.value),title:"Background color",style:{width:"24px",height:"24px",border:"1px solid #333",borderRadius:"4px",cursor:"pointer",background:"transparent"}}),h.jsx("span",{style:{fontSize:"8px",color:"#666"},children:"BG"})]}),h.jsx("div",{style:{flex:1,minWidth:0},children:h.jsxs("div",{style:{fontSize:"11px",color:j.accent,fontWeight:"600",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:[j.icon," ",N]})})]},N))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:$n,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:kn,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Category Colors"})]})]})]}),h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn("SocketColors"),children:[h.jsxs("span",{children:[D.SocketColors?"":""," Socket Colors"]}),xt&&h.jsx("span",{style:{fontSize:"10px",color:"#d4a054"},children:" unsaved"})]}),D.SocketColors&&h.jsxs("div",{className:"settings-category-content",children:[h.jsx("div",{className:"settings-info",style:{fontSize:"11px",color:"#8a959e",marginBottom:"12px",padding:"8px",background:"rgba(95, 130, 179, 0.1)",borderRadius:"4px"},children:" Customize socket connector colors by data type. These appear on all nodes."}),h.jsxs("div",{style:{background:"linear-gradient(145deg, #1e2428, #2a3238)",border:"1px solid rgba(95, 179, 179, 0.3)",borderRadius:"8px",padding:"12px",marginBottom:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.4)"},children:[h.jsxs("div",{style:{fontSize:"11px",color:"#5fb3b3",marginBottom:"10px",fontWeight:"600",display:"flex",alignItems:"center",gap:"6px"},children:[h.jsx("span",{children:""})," Preview Node"]}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:Object.entries(jn).slice(0,3).map(([N,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${w0(j.color)})`,border:`2px solid ${S0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}}),h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:N})]},N))}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"flex-end"},children:Object.entries(jn).slice(3).map(([N,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx("span",{style:{fontSize:"10px",color:"#8a959e"},children:N}),h.jsx("div",{style:{width:"14px",height:"14px",borderRadius:"50%",background:`linear-gradient(145deg, ${j.color}, ${w0(j.color)})`,border:`2px solid ${S0(j.color)}`,boxShadow:`0 0 8px ${j.color}80`}})]},N))})]})]}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"8px"},children:Object.entries(jn).map(([N,j])=>h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 10px",background:"#0a0f14",borderRadius:"4px",border:`1px solid ${j.color}55`},children:[h.jsx("input",{type:"color",value:j.color,onChange:W=>Jt(N,W.target.value),title:`${N} socket color`,style:{width:"28px",height:"28px",border:"none",borderRadius:"50%",cursor:"pointer",background:"transparent"}}),h.jsxs("div",{style:{flex:1,minWidth:0},children:[h.jsxs("div",{style:{fontSize:"12px",color:j.color,fontWeight:"600"},children:[j.icon," ",N]}),h.jsx("div",{style:{fontSize:"9px",color:"#666",marginTop:"2px"},children:j.description})]})]},N))}),h.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"12px",justifyContent:"flex-end"},children:[h.jsx("button",{className:"settings-btn-small",onClick:ri,style:{background:"rgba(199, 95, 95, 0.15)",borderColor:"rgba(199, 95, 95, 0.5)",color:"#c75f5f"},children:"Reset to Defaults"}),h.jsx("button",{className:"settings-btn-small",onClick:Aa,style:{background:"rgba(95, 170, 125, 0.15)",borderColor:"rgba(95, 170, 125, 0.5)",color:"#5faa7d"},children:" Save Socket Colors"})]})]})]}),VC.map(N=>h.jsxs("div",{className:"settings-category",children:[h.jsxs("div",{className:"settings-category-header",onClick:()=>Zn(N.category),children:[h.jsxs("span",{children:[D[N.category]?"":"",N.icon," ",N.category]}),N.testable&&D[N.category]&&h.jsx("button",{className:`settings-test-btn ${U[N.testable]?.success?"success":U[N.testable]?.success===!1?"error":""}`,onClick:j=>{j.stopPropagation(),en(N.testable)},disabled:ee[N.testable],children:ee[N.testable]?" Testing...":" Test Connection"})]}),D[N.category]&&h.jsxs("div",{className:"settings-category-content",children:[U[N.testable]&&h.jsxs("div",{className:`settings-test-result ${U[N.testable].success?"success":"error"}`,children:[U[N.testable].success?"":""," ",U[N.testable].message,U[N.testable].details&&h.jsx("div",{className:"settings-test-details",children:U[N.testable].details})]}),N.category==="Location"&&h.jsxs("div",{className:"settings-location-search",children:[Y&&K&&h.jsx("div",{style:{background:"rgba(76, 175, 80, 0.15)",border:"1px solid rgba(76, 175, 80, 0.4)",borderRadius:"6px",padding:"8px 12px",marginBottom:"12px",fontSize:"0.85rem",color:"#81c784"},children:" Location auto-filled from Home Assistant configuration"}),h.jsx("p",{style:{fontSize:"0.85rem",color:"#aaa",margin:"0 0 10px 0"},children:' Enter your city name and click "Search" to auto-fill coordinates.'}),h.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"10px"},children:[h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_CITY||"",onChange:j=>Te("LOCATION_CITY",j.target.value),placeholder:"e.g., Dallas, TX, USA",style:{flex:1},onKeyDown:j=>{j.key==="Enter"&&be()}}),h.jsx("button",{className:"settings-test-btn",onClick:be,disabled:An,style:{whiteSpace:"nowrap"},children:An?" Searching...":" Search City"})]}),ie&&h.jsxs("div",{className:"settings-test-result error",style:{marginBottom:"10px"},children:[" ",ie]}),h.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Latitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LATITUDE||"",onChange:j=>Te("LOCATION_LATITUDE",j.target.value),placeholder:"32.7767"})]}),h.jsxs("div",{className:"settings-field",children:[h.jsx("label",{className:"settings-label",children:"Longitude"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_LONGITUDE||"",onChange:j=>Te("LOCATION_LONGITUDE",j.target.value),placeholder:"-96.7970"})]})]}),h.jsxs("div",{className:"settings-field",style:{marginTop:"10px"},children:[h.jsx("label",{className:"settings-label",children:"Timezone"}),h.jsx("input",{type:"text",className:"settings-input",value:r.LOCATION_TIMEZONE||"",onChange:j=>Te("LOCATION_TIMEZONE",j.target.value),placeholder:"America/Chicago"}),h.jsx("span",{className:"settings-key-hint",children:"Common: America/New_York, America/Chicago, America/Denver, America/Los_Angeles"})]})]}),N.category!=="Location"&&N.settings.map(j=>h.jsxs("div",{className:"settings-field",children:[h.jsxs("label",{className:"settings-label",children:[j.label,j.isSecret&&h.jsx("button",{className:"settings-show-btn",onClick:()=>xr(j.key),type:"button",children:k[j.key]?" Hide":" Show"})]}),j.type==="select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:W=>Te(j.key,W.target.value),children:[h.jsx("option",{value:"",children:"Select..."}),j.options.map(W=>h.jsx("option",{value:W,children:W},W))]}):j.type==="sensor-select"?h.jsxs("select",{className:"settings-input",value:r[j.key]||"",onChange:W=>Te(j.key,W.target.value),disabled:Se,children:[h.jsx("option",{value:"",children:Se?"Loading sensors...":"None (disabled)"}),G.map(W=>h.jsx("option",{value:W.id,children:W.name},W.id))]}):h.jsx("input",{type:j.isSecret&&!k[j.key]?"password":"text",className:"settings-input",value:r[j.key]||"",onChange:W=>Te(j.key,W.target.value),placeholder:j.placeholder}),h.jsx("span",{className:"settings-key-hint",children:j.key})]},j.key))]})]},N.category))]})}),h.jsxs("div",{className:"settings-footer",children:[h.jsx("button",{className:"settings-btn settings-btn-secondary",onClick:t,children:"Cancel"}),h.jsx("button",{className:"settings-btn settings-btn-primary",onClick:ce,disabled:d||l,children:d?"Saving...":" Save Settings"})]})]})}),document.body):null}const qC=[{category:"Selection & Editing",items:[{keys:["Delete","Backspace"],action:"Delete selected nodes"},{keys:["Ctrl","C"],action:"Copy selected nodes"},{keys:["Ctrl","V"],action:"Paste nodes at cursor"},{keys:["Ctrl","Z"],action:"Undo last delete"},{keys:["Ctrl","A"],action:"Select all nodes"},{keys:["Shift","Click"],action:"Add to selection"},{keys:["Drag"],action:"Lasso select multiple nodes"}]},{category:"Navigation",items:[{keys:["Scroll"],action:"Zoom in/out"},{keys:["Middle-click","Drag"],action:"Pan canvas"},{keys:["Home"],action:"Reset viewport to origin"},{keys:["F5"],action:"Reset editor view (fix frozen pan)"},{keys:["Escape"],action:"Cancel/reset drag state"}]},{category:"Node Operations",items:[{keys:["Right-click"],action:"Open context menu"},{keys:["Right-click node"],action:"Node context menu"},{keys:["Double-click"],action:"Edit node properties (where available)"}]},{category:"Graph Management",items:[{keys:["?"],action:"Show this help dialog"}]}];function YC({isOpen:a,onClose:t}){if(x.useEffect(()=>{if(!a)return;const s=l=>{l.key==="Escape"&&t()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[a,t]),!a)return null;const r=s=>{s.target===s.currentTarget&&t()};return jh.createPortal(h.jsx("div",{className:"shortcuts-modal-overlay",onClick:r,children:h.jsxs("div",{className:"shortcuts-modal",children:[h.jsxs("div",{className:"shortcuts-modal-header",children:[h.jsx("h2",{children:" Keyboard Shortcuts"}),h.jsx("button",{className:"shortcuts-close-btn",onClick:t,children:" Close"})]}),h.jsx("div",{className:"shortcuts-modal-body",children:qC.map((s,l)=>h.jsxs("div",{className:"shortcuts-section",children:[h.jsx("h3",{children:s.category}),h.jsx("div",{className:"shortcuts-list",children:s.items.map((c,d)=>h.jsxs("div",{className:"shortcut-row",children:[h.jsx("div",{className:"shortcut-keys",children:c.keys.map((p,m)=>h.jsxs(Oa.Fragment,{children:[h.jsx("kbd",{children:p}),m<c.keys.length-1&&h.jsx("span",{className:"key-separator",children:"+"})]},m))}),h.jsx("div",{className:"shortcut-action",children:c.action})]},d))})]},l))}),h.jsx("div",{className:"shortcuts-modal-footer",children:h.jsxs("p",{children:["Press ",h.jsx("kbd",{children:"?"})," anytime to show this dialog"]})})]})}),document.body)}function PC({isExpanded:a,onToggle:t}){const[r,s]=x.useState([]),[l,c]=x.useState([]),[d,p]=x.useState(!0),[m,g]=x.useState(!1),[b,w]=x.useState(null),[k,E]=x.useState(!1),[D,F]=x.useState(null),[U,te]=x.useState(null),[ee,L]=x.useState({username:"",password:"",name:""}),[G,ge]=x.useState({username:"",password:""}),[Se,B]=x.useState(""),[pe,oe]=x.useState(5e3),[ye,Ie]=x.useState(null),De=x.useRef(null),[et,nt]=x.useState({});x.useEffect(()=>(Ke(),()=>{De.current&&clearInterval(De.current)}),[]),x.useEffect(()=>(De.current&&clearInterval(De.current),a&&r.length>0&&pe>0&&(De.current=setInterval(()=>{nt(_=>{const M={..._};return r.forEach(Q=>{M[Q.ip]=Date.now()}),M})},pe)),()=>{De.current&&clearInterval(De.current)}),[a,r,pe]);const Ke=async()=>{try{p(!0);const _=await ps("/api/cameras");if(_.ok){const M=await _.json();s(M.cameras||[]),M.defaultCredentials&&ge(Q=>({...Q,username:M.defaultCredentials.username||""}))}}catch{w("Failed to load cameras")}finally{p(!1)}},q=async()=>{g(!0),w(null);try{const _=await ps("/api/cameras/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(_.ok){const M=await _.json();if(M.found&&M.found.length>0){const Q=r.map(xe=>xe.ip),fe=M.found.filter(xe=>!Q.includes(xe.ip));c(fe),window.T2Toast&&(fe.length>0?window.T2Toast.success(`Found ${fe.length} new camera(s)! Click to configure.`):window.T2Toast.info(`Found ${M.found.length} cameras, all already configured.`))}else c([]),window.T2Toast&&window.T2Toast.info("No cameras found on network")}}catch{w("Discovery failed")}finally{g(!1)}},he=async()=>{try{await ps("/api/cameras/credentials",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)}),window.T2Toast&&window.T2Toast.success("Credentials saved")}catch{w("Failed to save credentials")}},me=async(_,M,Q)=>{try{await ps("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:_,name:M||`Camera ${_.split(".").pop()}`,username:Q?.username||G.username,password:Q?.password||G.password})}),c(fe=>fe.filter(xe=>xe.ip!==_)),F(null),B(""),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${_} added!`)}catch{w("Failed to add camera")}},Me=async _=>{try{await fetch(`/api/cameras/${_}`,{method:"DELETE"}),await Ke(),ye===_&&Ie(null)}catch{w("Failed to remove camera")}},J=async()=>{if(U)try{await ps("/api/cameras",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:U,name:ee.name,username:ee.username,password:ee.password})}),te(null),nt(_=>({..._,[U]:Date.now()})),await Ke(),window.T2Toast&&window.T2Toast.success(`Camera ${U} updated!`)}catch{w("Failed to update camera")}},v={container:{background:"linear-gradient(180deg, rgba(12, 20, 35, 0.95) 0%, rgba(8, 15, 28, 0.98) 100%)",borderRadius:"12px",border:"1px solid rgba(0, 200, 255, 0.2)",overflow:"hidden",marginBottom:"8px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 14px",background:"linear-gradient(90deg, rgba(0, 150, 200, 0.15), transparent)",borderBottom:"1px solid rgba(0, 200, 255, 0.1)",cursor:"pointer"},title:{display:"flex",alignItems:"center",gap:"8px",color:"#00d4ff",fontSize:"14px",fontWeight:600},icon:{fontSize:"16px"},badge:{background:"rgba(0, 200, 255, 0.2)",color:"#00d4ff",padding:"2px 8px",borderRadius:"10px",fontSize:"11px"},content:{padding:a?"12px":"0",maxHeight:a?"400px":"0",overflow:"auto",transition:"all 0.3s ease"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"10px"},cameraCard:{background:"rgba(0, 0, 0, 0.3)",borderRadius:"8px",overflow:"hidden",border:"1px solid rgba(0, 200, 255, 0.15)",cursor:"pointer",transition:"all 0.2s ease"},cameraCardSelected:{border:"2px solid #00d4ff",boxShadow:"0 0 10px rgba(0, 200, 255, 0.3)"},cameraImage:{width:"100%",height:"100px",objectFit:"cover",background:"#111"},cameraInfo:{padding:"6px 8px",display:"flex",justifyContent:"space-between",alignItems:"center"},cameraName:{color:"#b8e6ea",fontSize:"11px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},deleteBtn:{background:"rgba(255, 80, 80, 0.2)",border:"none",color:"#ff6b6b",padding:"2px 6px",borderRadius:"4px",cursor:"pointer",fontSize:"10px"},toolbar:{display:"flex",gap:"8px",marginBottom:"10px",flexWrap:"wrap"},btn:{background:"rgba(0, 200, 255, 0.15)",border:"1px solid rgba(0, 200, 255, 0.3)",color:"#00d4ff",padding:"6px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},btnActive:{background:"rgba(0, 200, 255, 0.3)"},settings:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"8px",padding:"12px",marginBottom:"10px"},inputGroup:{marginBottom:"8px"},label:{color:"#8899aa",fontSize:"11px",marginBottom:"4px",display:"block"},input:{width:"100%",background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px 10px",color:"#fff",fontSize:"12px",boxSizing:"border-box"},fullView:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:1e4},fullImage:{maxWidth:"90vw",maxHeight:"80vh",objectFit:"contain"},closeBtn:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",color:"#fff",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",fontSize:"14px"},emptyState:{textAlign:"center",padding:"20px",color:"#667788"},refreshSelect:{background:"rgba(0, 0, 0, 0.3)",border:"1px solid rgba(0, 200, 255, 0.2)",borderRadius:"4px",padding:"6px",color:"#fff",fontSize:"11px"}},T=_=>{const M=et[_]||Date.now();return`/api/cameras/snapshot/${_}?t=${M}`};return h.jsxs("div",{style:v.container,children:[h.jsxs("div",{style:v.header,onClick:t,children:[h.jsxs("div",{style:v.title,children:[h.jsx("span",{style:v.icon,children:""}),h.jsx("span",{children:"Cameras"}),r.length>0&&h.jsx("span",{style:v.badge,children:r.length})]}),h.jsx("span",{style:{color:"#00d4ff"},children:a?"":""})]}),a&&h.jsxs("div",{style:v.content,children:[h.jsxs("div",{style:v.toolbar,children:[h.jsx("button",{style:{...v.btn,...m?v.btnActive:{}},onClick:q,disabled:m,children:m?" Scanning...":" Discover"}),h.jsx("button",{style:{...v.btn,...k?v.btnActive:{}},onClick:()=>E(!k),children:" Settings"}),h.jsxs("select",{style:v.refreshSelect,value:pe,onChange:_=>oe(Number(_.target.value)),title:"Refresh interval",children:[h.jsx("option",{value:0,children:"Manual"}),h.jsx("option",{value:2e3,children:"2s"}),h.jsx("option",{value:5e3,children:"5s"}),h.jsx("option",{value:1e4,children:"10s"}),h.jsx("option",{value:3e4,children:"30s"})]})]}),k&&h.jsxs("div",{style:v.settings,children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Select Camera to Configure"}),h.jsxs("select",{style:{...v.input,cursor:"pointer"},value:U||"",onChange:_=>{const M=_.target.value;if(!M){te(null),L({username:"",password:"",name:""});return}const Q=r.find(fe=>fe.ip===M);Q?(te(M),L({name:Q.name||"",username:Q.username||"",password:""})):(te(M),L({name:`Camera ${M.split(".").pop()}`,username:G.username||"",password:G.password||""}))},children:[h.jsx("option",{value:"",children:"-- Select a camera --"}),r.length>0&&h.jsx("optgroup",{label:" Configured Cameras",children:r.map(_=>h.jsxs("option",{value:_.ip,children:[_.name," (",_.ip,")"]},_.ip))}),l.length>0&&h.jsx("optgroup",{label:" Discovered (Not Configured)",children:l.map(_=>h.jsxs("option",{value:_.ip,children:[_.ip," (Ports: ",_.ports.join(", "),")"]},_.ip))})]})]}),U&&h.jsxs("div",{style:{background:"rgba(0, 0, 0, 0.2)",borderRadius:"6px",padding:"10px",marginTop:"8px"},children:[h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Camera Name"}),h.jsx("input",{type:"text",style:v.input,value:ee.name,onChange:_=>L(M=>({...M,name:_.target.value})),placeholder:"Front Door"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsx("label",{style:v.label,children:"Username"}),h.jsx("input",{type:"text",style:v.input,value:ee.username,onChange:_=>L(M=>({...M,username:_.target.value})),placeholder:"admin"})]}),h.jsxs("div",{style:v.inputGroup,children:[h.jsxs("label",{style:v.label,children:["Password ",r.find(_=>_.ip===U)?"(leave blank to keep current)":""]}),h.jsx("input",{type:"password",style:v.input,value:ee.password,onChange:_=>L(M=>({...M,password:_.target.value})),placeholder:""})]}),h.jsx("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:h.jsx("button",{style:{...v.btn,flex:1,justifyContent:"center"},onClick:()=>{!r.find(M=>M.ip===U)?me(U,ee.name,ee):J()},children:r.find(_=>_.ip===U)?" Save Changes":" Add Camera"})})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Default credentials (used for new cameras)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",style:{...v.input,flex:1},value:G.username,onChange:_=>ge(M=>({...M,username:_.target.value})),placeholder:"Username"}),h.jsx("input",{type:"password",style:{...v.input,flex:1},value:G.password,onChange:_=>ge(M=>({...M,password:_.target.value})),placeholder:"Password"}),h.jsx("button",{style:v.btn,onClick:he,title:"Save as default",children:""})]})]}),h.jsxs("div",{style:{borderTop:"1px solid rgba(0, 200, 255, 0.15)",marginTop:"12px",paddingTop:"12px"},children:[h.jsx("div",{style:{color:"#8899aa",fontSize:"11px",marginBottom:"8px"},children:"Add camera by IP (if not discovered)"}),h.jsxs("div",{style:{display:"flex",gap:"8px"},children:[h.jsx("input",{type:"text",id:"addCameraIp",style:{...v.input,flex:1},placeholder:"192.168.1.100",onKeyDown:_=>{if(_.key==="Enter"&&_.target.value){const M=_.target.value;!l.find(Q=>Q.ip===M)&&!r.find(Q=>Q.ip===M)&&c(Q=>[...Q,{ip:M,ports:["manual"]}]),te(M),L({name:`Camera ${M.split(".").pop()}`,username:G.username||"",password:G.password||""}),_.target.value=""}}}),h.jsx("button",{style:v.btn,onClick:()=>{const _=document.getElementById("addCameraIp"),M=_?.value;M&&(!l.find(Q=>Q.ip===M)&&!r.find(Q=>Q.ip===M)&&c(Q=>[...Q,{ip:M,ports:["manual"]}]),te(M),L({name:`Camera ${M.split(".").pop()}`,username:G.username||"",password:G.password||""}),_.value="")},children:"Configure"})]})]})]}),b&&h.jsxs("div",{style:{color:"#ff6b6b",padding:"8px",fontSize:"12px"},children:[" ",b]}),d?h.jsx("div",{style:v.emptyState,children:"Loading cameras..."}):r.length===0&&l.length===0?h.jsxs("div",{style:v.emptyState,children:[h.jsx("p",{children:"No cameras configured"}),h.jsx("p",{style:{fontSize:"11px"},children:"Click Discover to scan your network"})]}):h.jsx("div",{style:v.grid,children:r.map(_=>h.jsxs("div",{style:{...v.cameraCard,...ye===_.ip?v.cameraCardSelected:{}},onClick:()=>Ie(_.ip),children:[h.jsx("img",{src:T(_.ip),alt:_.name,style:v.cameraImage,onError:M=>{M.target.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><rect fill="%23222" width="100" height="100"/><text x="50" y="55" text-anchor="middle" fill="%23666" font-size="12">No Signal</text></svg>'}}),h.jsxs("div",{style:v.cameraInfo,children:[h.jsx("span",{style:v.cameraName,title:_.ip,children:_.name}),h.jsxs("div",{style:{display:"flex",gap:"4px"},children:[h.jsx("button",{style:{...v.deleteBtn,background:"rgba(0, 150, 255, 0.2)",color:"#00aaff"},onClick:M=>{M.stopPropagation(),E(!0),te(_.ip),L({name:_.name||"",username:_.username||"",password:""})},title:"Edit credentials",children:""}),h.jsx("button",{style:v.deleteBtn,onClick:M=>{M.stopPropagation(),Me(_.ip)},title:"Remove camera",children:""})]})]})]},_.ip))})]}),ye&&h.jsxs("div",{style:v.fullView,onClick:()=>Ie(null),children:[h.jsx("img",{src:T(ye),alt:"Camera feed",style:v.fullImage}),h.jsx("button",{style:v.closeBtn,onClick:()=>Ie(null),children:" Close"}),h.jsx("div",{style:{color:"#fff",marginTop:"10px"},children:r.find(_=>_.ip===ye)?.name||ye})]})]})}const Xa=Object.create(null);Xa.open="0";Xa.close="1";Xa.ping="2";Xa.pong="3";Xa.message="4";Xa.upgrade="5";Xa.noop="6";const kc=Object.create(null);Object.keys(Xa).forEach(a=>{kc[Xa[a]]=a});const ch={type:"error",data:"parser error"},M1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",R1=typeof ArrayBuffer=="function",z1=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a&&a.buffer instanceof ArrayBuffer,Ph=({type:a,data:t},r,s)=>M1&&t instanceof Blob?r?s(t):x0(t,s):R1&&(t instanceof ArrayBuffer||z1(t))?r?s(t):x0(new Blob([t]),s):s(Xa[a]+(t||"")),x0=(a,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(a)};function k0(a){return a instanceof Uint8Array?a:a instanceof ArrayBuffer?new Uint8Array(a):new Uint8Array(a.buffer,a.byteOffset,a.byteLength)}let Df;function FC(a,t){if(M1&&a.data instanceof Blob)return a.data.arrayBuffer().then(k0).then(t);if(R1&&(a.data instanceof ArrayBuffer||z1(a.data)))return t(k0(a.data));Ph(a,!1,r=>{Df||(Df=new TextEncoder),t(Df.encode(r))})}const E0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ao=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let a=0;a<E0.length;a++)Ao[E0.charCodeAt(a)]=a;const ZC=a=>{let t=a.length*.75,r=a.length,s,l=0,c,d,p,m;a[a.length-1]==="="&&(t--,a[a.length-2]==="="&&t--);const g=new ArrayBuffer(t),b=new Uint8Array(g);for(s=0;s<r;s+=4)c=Ao[a.charCodeAt(s)],d=Ao[a.charCodeAt(s+1)],p=Ao[a.charCodeAt(s+2)],m=Ao[a.charCodeAt(s+3)],b[l++]=c<<2|d>>4,b[l++]=(d&15)<<4|p>>2,b[l++]=(p&3)<<6|m&63;return g},XC=typeof ArrayBuffer=="function",Fh=(a,t)=>{if(typeof a!="string")return{type:"message",data:L1(a,t)};const r=a.charAt(0);return r==="b"?{type:"message",data:KC(a.substring(1),t)}:kc[r]?a.length>1?{type:kc[r],data:a.substring(1)}:{type:kc[r]}:ch},KC=(a,t)=>{if(XC){const r=ZC(a);return L1(r,t)}else return{base64:!0,data:a}},L1=(a,t)=>{switch(t){case"blob":return a instanceof Blob?a:new Blob([a]);case"arraybuffer":default:return a instanceof ArrayBuffer?a:a.buffer}},B1="",QC=(a,t)=>{const r=a.length,s=new Array(r);let l=0;a.forEach((c,d)=>{Ph(c,!1,p=>{s[d]=p,++l===r&&t(s.join(B1))})})},WC=(a,t)=>{const r=a.split(B1),s=[];for(let l=0;l<r.length;l++){const c=Fh(r[l],t);if(s.push(c),c.type==="error")break}return s};function JC(){return new TransformStream({transform(a,t){FC(a,r=>{const s=r.length;let l;if(s<126)l=new Uint8Array(1),new DataView(l.buffer).setUint8(0,s);else if(s<65536){l=new Uint8Array(3);const c=new DataView(l.buffer);c.setUint8(0,126),c.setUint16(1,s)}else{l=new Uint8Array(9);const c=new DataView(l.buffer);c.setUint8(0,127),c.setBigUint64(1,BigInt(s))}a.data&&typeof a.data!="string"&&(l[0]|=128),t.enqueue(l),t.enqueue(r)})}})}let Mf;function fc(a){return a.reduce((t,r)=>t+r.length,0)}function hc(a,t){if(a[0].length===t)return a.shift();const r=new Uint8Array(t);let s=0;for(let l=0;l<t;l++)r[l]=a[0][s++],s===a[0].length&&(a.shift(),s=0);return a.length&&s<a[0].length&&(a[0]=a[0].slice(s)),r}function eT(a,t){Mf||(Mf=new TextDecoder);const r=[];let s=0,l=-1,c=!1;return new TransformStream({transform(d,p){for(r.push(d);;){if(s===0){if(fc(r)<1)break;const m=hc(r,1);c=(m[0]&128)===128,l=m[0]&127,l<126?s=3:l===126?s=1:s=2}else if(s===1){if(fc(r)<2)break;const m=hc(r,2);l=new DataView(m.buffer,m.byteOffset,m.length).getUint16(0),s=3}else if(s===2){if(fc(r)<8)break;const m=hc(r,8),g=new DataView(m.buffer,m.byteOffset,m.length),b=g.getUint32(0);if(b>Math.pow(2,21)-1){p.enqueue(ch);break}l=b*Math.pow(2,32)+g.getUint32(4),s=3}else{if(fc(r)<l)break;const m=hc(r,l);p.enqueue(Fh(c?m:Mf.decode(m),t)),s=0}if(l===0||l>a){p.enqueue(ch);break}}}})}const I1=4;function bn(a){if(a)return tT(a)}function tT(a){for(var t in bn.prototype)a[t]=bn.prototype[t];return a}bn.prototype.on=bn.prototype.addEventListener=function(a,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+a]=this._callbacks["$"+a]||[]).push(t),this};bn.prototype.once=function(a,t){function r(){this.off(a,r),t.apply(this,arguments)}return r.fn=t,this.on(a,r),this};bn.prototype.off=bn.prototype.removeListener=bn.prototype.removeAllListeners=bn.prototype.removeEventListener=function(a,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+a];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+a],this;for(var s,l=0;l<r.length;l++)if(s=r[l],s===t||s.fn===t){r.splice(l,1);break}return r.length===0&&delete this._callbacks["$"+a],this};bn.prototype.emit=function(a){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+a],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,l=r.length;s<l;++s)r[s].apply(this,t)}return this};bn.prototype.emitReserved=bn.prototype.emit;bn.prototype.listeners=function(a){return this._callbacks=this._callbacks||{},this._callbacks["$"+a]||[]};bn.prototype.hasListeners=function(a){return!!this.listeners(a).length};const Fc=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ca=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),nT="arraybuffer";function $1(a,...t){return t.reduce((r,s)=>(a.hasOwnProperty(s)&&(r[s]=a[s]),r),{})}const aT=Ca.setTimeout,rT=Ca.clearTimeout;function Zc(a,t){t.useNativeTimers?(a.setTimeoutFn=aT.bind(Ca),a.clearTimeoutFn=rT.bind(Ca)):(a.setTimeoutFn=Ca.setTimeout.bind(Ca),a.clearTimeoutFn=Ca.clearTimeout.bind(Ca))}const iT=1.33;function sT(a){return typeof a=="string"?oT(a):Math.ceil((a.byteLength||a.size)*iT)}function oT(a){let t=0,r=0;for(let s=0,l=a.length;s<l;s++)t=a.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function U1(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function lT(a){let t="";for(let r in a)a.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(a[r]));return t}function cT(a){let t={},r=a.split("&");for(let s=0,l=r.length;s<l;s++){let c=r[s].split("=");t[decodeURIComponent(c[0])]=decodeURIComponent(c[1])}return t}class uT extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class Zh extends bn{constructor(t){super(),this.writable=!1,Zc(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new uT(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Fh(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=lT(t);return r.length?"?"+r:""}}class dT extends Zh{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};WC(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,QC(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=U1()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let H1=!1;try{H1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const fT=H1;function hT(){}class pT extends dT{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(l,c)=>{this.onError("xhr post error",l,c)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}class Za extends bn{constructor(t,r,s){super(),this.createRequest=t,Zc(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=$1(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let l in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(l)&&s.setRequestHeader(l,this._opts.extraHeaders[l])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var l;s.readyState===3&&((l=this._opts.cookieJar)===null||l===void 0||l.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(l){this.setTimeoutFn(()=>{this._onError(l)},0);return}typeof document<"u"&&(this._index=Za.requestsCount++,Za.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=hT,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Za.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Za.requestsCount=0;Za.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",C0);else if(typeof addEventListener=="function"){const a="onpagehide"in Ca?"pagehide":"unload";addEventListener(a,C0,!1)}}function C0(){for(let a in Za.requests)Za.requests.hasOwnProperty(a)&&Za.requests[a].abort()}const mT=(function(){const a=V1({xdomain:!1});return a&&a.responseType!==null})();class gT extends pT{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=mT&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Za(V1,this.uri(),t)}}function V1(a){const t=a.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||fT))return new XMLHttpRequest}catch{}if(!t)try{return new Ca[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const G1=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class yT extends Zh{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=G1?{}:$1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(l){return this.emitReserved("error",l)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;Ph(s,this.supportsBinary,c=>{try{this.doWrite(s,c)}catch{}l&&Fc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=U1()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Rf=Ca.WebSocket||Ca.MozWebSocket;class vT extends yT{createSocket(t,r,s){return G1?new Rf(t,r,s):r?new Rf(t,r):new Rf(t)}doWrite(t,r){this.ws.send(r)}}class bT extends Zh{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=eT(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),l=JC();l.readable.pipeTo(t.writable),this._writer=l.writable.getWriter();const c=()=>{s.read().then(({done:p,value:m})=>{p||(this.onPacket(m),c())}).catch(p=>{})};c();const d={type:"open"};this.query.sid&&(d.data=`{"sid":"${this.query.sid}"}`),this._writer.write(d).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],l=r===t.length-1;this._writer.write(s).then(()=>{l&&Fc(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const wT={websocket:vT,webtransport:bT,polling:gT},ST=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,xT=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function uh(a){if(a.length>8e3)throw"URI too long";const t=a,r=a.indexOf("["),s=a.indexOf("]");r!=-1&&s!=-1&&(a=a.substring(0,r)+a.substring(r,s).replace(/:/g,";")+a.substring(s,a.length));let l=ST.exec(a||""),c={},d=14;for(;d--;)c[xT[d]]=l[d]||"";return r!=-1&&s!=-1&&(c.source=t,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=kT(c,c.path),c.queryKey=ET(c,c.query),c}function kT(a,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function ET(a,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,l,c){l&&(r[l]=c)}),r}const dh=typeof addEventListener=="function"&&typeof removeEventListener=="function",Ec=[];dh&&addEventListener("offline",()=>{Ec.forEach(a=>a())},!1);class Jr extends bn{constructor(t,r){if(super(),this.binaryType=nT,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=uh(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=uh(r.host).host);Zc(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const l=s.prototype.name;this.transports.push(l),this._transportsByName[l]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=cT(this.opts.query)),dh&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ec.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=I1,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Jr.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Jr.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const l=this.writeBuffer[s].data;if(l&&(r+=sT(l)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Fc(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,l){if(typeof r=="function"&&(l=r,r=void 0),typeof s=="function"&&(l=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const c={type:t,data:r,options:s};this.emitReserved("packetCreate",c),this.writeBuffer.push(c),l&&this.once("flush",l),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(Jr.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),dh&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Ec.indexOf(this._offlineEventListener);s!==-1&&Ec.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Jr.protocol=I1;class CT extends Jr{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;Jr.priorWebsocketSuccess=!1;const l=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",w=>{if(!s)if(w.type==="pong"&&w.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Jr.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(b(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const k=new Error("probe error");k.transport=r.name,this.emitReserved("upgradeError",k)}}))};function c(){s||(s=!0,b(),r.close(),r=null)}const d=w=>{const k=new Error("probe error: "+w);k.transport=r.name,c(),this.emitReserved("upgradeError",k)};function p(){d("transport closed")}function m(){d("socket closed")}function g(w){r&&w.name!==r.name&&c()}const b=()=>{r.removeListener("open",l),r.removeListener("error",d),r.removeListener("close",p),this.off("close",m),this.off("upgrading",g)};r.once("open",l),r.once("error",d),r.once("close",p),this.once("close",m),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let TT=class extends CT{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(l=>wT[l]).filter(l=>!!l)),super(t,s)}};function NT(a,t="",r){let s=a;r=r||typeof location<"u"&&location,a==null&&(a=r.protocol+"//"+r.host),typeof a=="string"&&(a.charAt(0)==="/"&&(a.charAt(1)==="/"?a=r.protocol+a:a=r.host+a),/^(https?|wss?):\/\//.test(a)||(typeof r<"u"?a=r.protocol+"//"+a:a="https://"+a),s=uh(a)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const c=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+c+":"+s.port+t,s.href=s.protocol+"://"+c+(r&&r.port===s.port?"":":"+s.port),s}const OT=typeof ArrayBuffer=="function",jT=a=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(a):a.buffer instanceof ArrayBuffer,q1=Object.prototype.toString,AT=typeof Blob=="function"||typeof Blob<"u"&&q1.call(Blob)==="[object BlobConstructor]",_T=typeof File=="function"||typeof File<"u"&&q1.call(File)==="[object FileConstructor]";function Xh(a){return OT&&(a instanceof ArrayBuffer||jT(a))||AT&&a instanceof Blob||_T&&a instanceof File}function Cc(a,t){if(!a||typeof a!="object")return!1;if(Array.isArray(a)){for(let r=0,s=a.length;r<s;r++)if(Cc(a[r]))return!0;return!1}if(Xh(a))return!0;if(a.toJSON&&typeof a.toJSON=="function"&&arguments.length===1)return Cc(a.toJSON(),!0);for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)&&Cc(a[r]))return!0;return!1}function DT(a){const t=[],r=a.data,s=a;return s.data=fh(r,t),s.attachments=t.length,{packet:s,buffers:t}}function fh(a,t){if(!a)return a;if(Xh(a)){const r={_placeholder:!0,num:t.length};return t.push(a),r}else if(Array.isArray(a)){const r=new Array(a.length);for(let s=0;s<a.length;s++)r[s]=fh(a[s],t);return r}else if(typeof a=="object"&&!(a instanceof Date)){const r={};for(const s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=fh(a[s],t));return r}return a}function MT(a,t){return a.data=hh(a.data,t),delete a.attachments,a}function hh(a,t){if(!a)return a;if(a&&a._placeholder===!0){if(typeof a.num=="number"&&a.num>=0&&a.num<t.length)return t[a.num];throw new Error("illegal attachments")}else if(Array.isArray(a))for(let r=0;r<a.length;r++)a[r]=hh(a[r],t);else if(typeof a=="object")for(const r in a)Object.prototype.hasOwnProperty.call(a,r)&&(a[r]=hh(a[r],t));return a}const RT=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],zT=5;var gt;(function(a){a[a.CONNECT=0]="CONNECT",a[a.DISCONNECT=1]="DISCONNECT",a[a.EVENT=2]="EVENT",a[a.ACK=3]="ACK",a[a.CONNECT_ERROR=4]="CONNECT_ERROR",a[a.BINARY_EVENT=5]="BINARY_EVENT",a[a.BINARY_ACK=6]="BINARY_ACK"})(gt||(gt={}));class LT{constructor(t){this.replacer=t}encode(t){return(t.type===gt.EVENT||t.type===gt.ACK)&&Cc(t)?this.encodeAsBinary({type:t.type===gt.EVENT?gt.BINARY_EVENT:gt.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===gt.BINARY_EVENT||t.type===gt.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=DT(t),s=this.encodeAsString(r.packet),l=r.buffers;return l.unshift(s),l}}function T0(a){return Object.prototype.toString.call(a)==="[object Object]"}class Kh extends bn{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===gt.BINARY_EVENT;s||r.type===gt.BINARY_ACK?(r.type=s?gt.EVENT:gt.ACK,this.reconstructor=new BT(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Xh(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(gt[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===gt.BINARY_EVENT||s.type===gt.BINARY_ACK){const c=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const d=t.substring(c,r);if(d!=Number(d)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(d)}if(t.charAt(r+1)==="/"){const c=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(c,r)}else s.nsp="/";const l=t.charAt(r+1);if(l!==""&&Number(l)==l){const c=r+1;for(;++r;){const d=t.charAt(r);if(d==null||Number(d)!=d){--r;break}if(r===t.length)break}s.id=Number(t.substring(c,r+1))}if(t.charAt(++r)){const c=this.tryParse(t.substr(r));if(Kh.isPayloadValid(s.type,c))s.data=c;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case gt.CONNECT:return T0(r);case gt.DISCONNECT:return r===void 0;case gt.CONNECT_ERROR:return typeof r=="string"||T0(r);case gt.EVENT:case gt.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&RT.indexOf(r[0])===-1);case gt.ACK:case gt.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class BT{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=MT(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const IT=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Kh,Encoder:LT,get PacketType(){return gt},protocol:zT},Symbol.toStringTag,{value:"Module"}));function La(a,t,r){return a.on(t,r),function(){a.off(t,r)}}const $T=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Y1 extends bn{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[La(t,"open",this.onopen.bind(this)),La(t,"packet",this.onpacket.bind(this)),La(t,"error",this.onerror.bind(this)),La(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,l,c;if($T.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const d={type:gt.EVENT,data:r};if(d.options={},d.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const b=this.ids++,w=r.pop();this._registerAckCallback(b,w),d.id=b}const p=(l=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||l===void 0?void 0:l.writable,m=this.connected&&!(!((c=this.io.engine)===null||c===void 0)&&c._hasPingExpired());return this.flags.volatile&&!p||(m?(this.notifyOutgoingListeners(d),this.packet(d)):this.sendBuffer.push(d)),this.flags={},this}_registerAckCallback(t,r){var s;const l=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(l===void 0){this.acks[t]=r;return}const c=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===t&&this.sendBuffer.splice(p,1);r.call(this,new Error("operation has timed out"))},l),d=(...p)=>{this.io.clearTimeoutFn(c),r.apply(this,p)};d.withError=!0,this.acks[t]=d}emitWithAck(t,...r){return new Promise((s,l)=>{const c=(d,p)=>d?l(d):s(p);c.withError=!0,r.push(c),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((l,...c)=>s!==this._queue[0]?void 0:(l!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(l)):(this._queue.shift(),r&&r(null,...c)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:gt.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case gt.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case gt.EVENT:case gt.BINARY_EVENT:this.onevent(t);break;case gt.ACK:case gt.BINARY_ACK:this.onack(t);break;case gt.DISCONNECT:this.ondisconnect();break;case gt.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...l){s||(s=!0,r.packet({type:gt.ACK,id:t,data:l}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:gt.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function js(a){a=a||{},this.ms=a.min||100,this.max=a.max||1e4,this.factor=a.factor||2,this.jitter=a.jitter>0&&a.jitter<=1?a.jitter:0,this.attempts=0}js.prototype.duration=function(){var a=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*a);a=(Math.floor(t*10)&1)==0?a-r:a+r}return Math.min(a,this.max)|0};js.prototype.reset=function(){this.attempts=0};js.prototype.setMin=function(a){this.ms=a};js.prototype.setMax=function(a){this.max=a};js.prototype.setJitter=function(a){this.jitter=a};class ph extends bn{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Zc(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new js({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const l=r.parser||IT;this.encoder=new l.Encoder,this.decoder=new l.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new TT(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const l=La(r,"open",function(){s.onopen(),t&&t()}),c=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),t?t(p):this.maybeReconnectOnOpen()},d=La(r,"error",c);if(this._timeout!==!1){const p=this._timeout,m=this.setTimeoutFn(()=>{l(),c(new Error("timeout")),r.close()},p);this.opts.autoUnref&&m.unref(),this.subs.push(()=>{this.clearTimeoutFn(m)})}return this.subs.push(l),this.subs.push(d),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(La(t,"ping",this.onping.bind(this)),La(t,"data",this.ondata.bind(this)),La(t,"error",this.onerror.bind(this)),La(t,"close",this.onclose.bind(this)),La(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Fc(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new Y1(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(l=>{l?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",l)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const No={};function Tc(a,t){typeof a=="object"&&(t=a,a=void 0),t=t||{};const r=NT(a,t.path||"/socket.io"),s=r.source,l=r.id,c=r.path,d=No[l]&&c in No[l].nsps,p=t.forceNew||t["force new connection"]||t.multiplex===!1||d;let m;return p?m=new ph(s,t):(No[l]||(No[l]=new ph(s,t)),m=No[l]),r.query&&!t.query&&(t.query=r.queryKey),m.socket(r.path,t)}Object.assign(Tc,{Manager:ph,Socket:Y1,io:Tc,connect:Tc});const UT=typeof window<"u"?window.location.origin:"http://localhost:3000",N0=Pc(),HT=N0?`${N0}/socket.io`:"/socket.io",ve=Tc(UT,{path:HT,autoConnect:!1,reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,transports:["websocket","polling"]}),VT=()=>{ve.connected||ve.connect()},GT=()=>{ve.connected&&ve.disconnect()};class qT{constructor(){this.nodes=new Map}register(t,r){typeof t=="object"&&r===void 0&&(r=t,t=r.label?r.label.replace(/\s+/g,""):"Node_"+Math.random().toString(36).substr(2,9)),this.nodes.set(t,r)}get(t){return this.nodes.get(t)}getAll(){return Array.from(this.nodes.values()).filter(t=>t)}getByLabel(t){for(const r of this.nodes.values())if(r.label===t)return r;return null}getByInstance(t){for(const r of this.nodes.values())if(r.nodeClass&&t instanceof r.nodeClass)return r;return null}}const Nn=new qT;class ji extends Error{}class YT extends ji{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class PT extends ji{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class FT extends ji{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class gs extends ji{}class P1 extends ji{constructor(t){super(`Invalid unit ${t}`)}}class Vn extends ji{}class Fr extends ji{constructor(){super("Zone is an abstract class")}}const Ae="numeric",$a="short",pa="long",Lc={year:Ae,month:Ae,day:Ae},F1={year:Ae,month:$a,day:Ae},ZT={year:Ae,month:$a,day:Ae,weekday:$a},Z1={year:Ae,month:pa,day:Ae},X1={year:Ae,month:pa,day:Ae,weekday:pa},K1={hour:Ae,minute:Ae},Q1={hour:Ae,minute:Ae,second:Ae},W1={hour:Ae,minute:Ae,second:Ae,timeZoneName:$a},J1={hour:Ae,minute:Ae,second:Ae,timeZoneName:pa},ew={hour:Ae,minute:Ae,hourCycle:"h23"},tw={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23"},nw={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:$a},aw={hour:Ae,minute:Ae,second:Ae,hourCycle:"h23",timeZoneName:pa},rw={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae},iw={year:Ae,month:Ae,day:Ae,hour:Ae,minute:Ae,second:Ae},sw={year:Ae,month:$a,day:Ae,hour:Ae,minute:Ae},ow={year:Ae,month:$a,day:Ae,hour:Ae,minute:Ae,second:Ae},XT={year:Ae,month:$a,day:Ae,weekday:$a,hour:Ae,minute:Ae},lw={year:Ae,month:pa,day:Ae,hour:Ae,minute:Ae,timeZoneName:$a},cw={year:Ae,month:pa,day:Ae,hour:Ae,minute:Ae,second:Ae,timeZoneName:$a},uw={year:Ae,month:pa,day:Ae,weekday:pa,hour:Ae,minute:Ae,timeZoneName:pa},dw={year:Ae,month:pa,day:Ae,weekday:pa,hour:Ae,minute:Ae,second:Ae,timeZoneName:pa};class As{get type(){throw new Fr}get name(){throw new Fr}get ianaName(){return this.name}get isUniversal(){throw new Fr}offsetName(t,r){throw new Fr}formatOffset(t,r){throw new Fr}offset(t){throw new Fr}equals(t){throw new Fr}get isValid(){throw new Fr}}let zf=null;class Yo extends As{static get instance(){return zf===null&&(zf=new Yo),zf}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return kw(t,r,s)}formatOffset(t,r){return Io(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const mh=new Map;function KT(a){let t=mh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:a,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),mh.set(a,t)),t}const QT={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function WT(a,t){const r=a.format(t).replace(/\u200E/g,""),s=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(r),[,l,c,d,p,m,g,b]=s;return[d,l,c,p,m,g,b]}function JT(a,t){const r=a.formatToParts(t),s=[];for(let l=0;l<r.length;l++){const{type:c,value:d}=r[l],p=QT[c];c==="era"?s[p]=d:Ze(p)||(s[p]=parseInt(d,10))}return s}const Lf=new Map;class Ka extends As{static create(t){let r=Lf.get(t);return r===void 0&&Lf.set(t,r=new Ka(t)),r}static resetCache(){Lf.clear(),mh.clear()}static isValidSpecifier(t){return this.isValidZone(t)}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Ka.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:s}){return kw(t,r,s,this.name)}formatOffset(t,r){return Io(this.offset(t),r)}offset(t){if(!this.valid)return NaN;const r=new Date(t);if(isNaN(r))return NaN;const s=KT(this.name);let[l,c,d,p,m,g,b]=s.formatToParts?JT(s,r):WT(s,r);p==="BC"&&(l=-Math.abs(l)+1);const k=Kc({year:l,month:c,day:d,hour:m===24?0:m,minute:g,second:b,millisecond:0});let E=+r;const D=E%1e3;return E-=D>=0?D:1e3+D,(k-E)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let O0={};function eN(a,t={}){const r=JSON.stringify([a,t]);let s=O0[r];return s||(s=new Intl.ListFormat(a,t),O0[r]=s),s}const gh=new Map;function yh(a,t={}){const r=JSON.stringify([a,t]);let s=gh.get(r);return s===void 0&&(s=new Intl.DateTimeFormat(a,t),gh.set(r,s)),s}const vh=new Map;function tN(a,t={}){const r=JSON.stringify([a,t]);let s=vh.get(r);return s===void 0&&(s=new Intl.NumberFormat(a,t),vh.set(r,s)),s}const bh=new Map;function nN(a,t={}){const{base:r,...s}=t,l=JSON.stringify([a,s]);let c=bh.get(l);return c===void 0&&(c=new Intl.RelativeTimeFormat(a,t),bh.set(l,c)),c}let _o=null;function aN(){return _o||(_o=new Intl.DateTimeFormat().resolvedOptions().locale,_o)}const wh=new Map;function fw(a){let t=wh.get(a);return t===void 0&&(t=new Intl.DateTimeFormat(a).resolvedOptions(),wh.set(a,t)),t}const Sh=new Map;function rN(a){let t=Sh.get(a);if(!t){const r=new Intl.Locale(a);t="getWeekInfo"in r?r.getWeekInfo():r.weekInfo,"minimalDays"in t||(t={...hw,...t}),Sh.set(a,t)}return t}function iN(a){const t=a.indexOf("-x-");t!==-1&&(a=a.substring(0,t));const r=a.indexOf("-u-");if(r===-1)return[a];{let s,l;try{s=yh(a).resolvedOptions(),l=a}catch{const m=a.substring(0,r);s=yh(m).resolvedOptions(),l=m}const{numberingSystem:c,calendar:d}=s;return[l,c,d]}}function sN(a,t,r){return(r||t)&&(a.includes("-u-")||(a+="-u"),r&&(a+=`-ca-${r}`),t&&(a+=`-nu-${t}`)),a}function oN(a){const t=[];for(let r=1;r<=12;r++){const s=Xe.utc(2009,r,1);t.push(a(s))}return t}function lN(a){const t=[];for(let r=1;r<=7;r++){const s=Xe.utc(2016,11,13+r);t.push(a(s))}return t}function pc(a,t,r,s){const l=a.listingMode();return l==="error"?null:l==="en"?r(t):s(t)}function cN(a){return a.numberingSystem&&a.numberingSystem!=="latn"?!1:a.numberingSystem==="latn"||!a.locale||a.locale.startsWith("en")||fw(a.locale).numberingSystem==="latn"}class uN{constructor(t,r,s){this.padTo=s.padTo||0,this.floor=s.floor||!1;const{padTo:l,floor:c,...d}=s;if(!r||Object.keys(d).length>0){const p={useGrouping:!1,...s};s.padTo>0&&(p.minimumIntegerDigits=s.padTo),this.inf=tN(t,p)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):tp(t,3);return yn(r,this.padTo)}}}class dN{constructor(t,r,s){this.opts=s,this.originalZone=void 0;let l;if(this.opts.timeZone)this.dt=t;else if(t.zone.type==="fixed"){const d=-1*(t.offset/60),p=d>=0?`Etc/GMT+${d}`:`Etc/GMT${d}`;t.offset!==0&&Ka.create(p).valid?(l=p,this.dt=t):(l="UTC",this.dt=t.offset===0?t:t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone)}else t.zone.type==="system"?this.dt=t:t.zone.type==="iana"?(this.dt=t,l=t.zone.name):(l="UTC",this.dt=t.setZone("UTC").plus({minutes:t.offset}),this.originalZone=t.zone);const c={...this.opts};c.timeZone=c.timeZone||l,this.dtf=yh(r,c)}format(){return this.originalZone?this.formatToParts().map(({value:t})=>t).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const t=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?t.map(r=>{if(r.type==="timeZoneName"){const s=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...r,value:s}}else return r}):t}resolvedOptions(){return this.dtf.resolvedOptions()}}class fN{constructor(t,r,s){this.opts={style:"long",...s},!r&&Sw()&&(this.rtf=nN(t,s))}format(t,r){return this.rtf?this.rtf.format(t,r):MN(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}const hw={firstDay:1,minimalDays:4,weekend:[6,7]};class jt{static fromOpts(t){return jt.create(t.locale,t.numberingSystem,t.outputCalendar,t.weekSettings,t.defaultToEN)}static create(t,r,s,l,c=!1){const d=t||rn.defaultLocale,p=d||(c?"en-US":aN()),m=r||rn.defaultNumberingSystem,g=s||rn.defaultOutputCalendar,b=kh(l)||rn.defaultWeekSettings;return new jt(p,m,g,b,d)}static resetCache(){_o=null,gh.clear(),vh.clear(),bh.clear(),wh.clear(),Sh.clear()}static fromObject({locale:t,numberingSystem:r,outputCalendar:s,weekSettings:l}={}){return jt.create(t,r,s,l)}constructor(t,r,s,l,c){const[d,p,m]=iN(t);this.locale=d,this.numberingSystem=r||p||null,this.outputCalendar=s||m||null,this.weekSettings=l,this.intl=sN(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=c,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cN(this)),this.fastNumbersCached}listingMode(){const t=this.isEnglish(),r=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return t&&r?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:jt.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,kh(t.weekSettings)||this.weekSettings,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1){return pc(this,t,Tw,()=>{const s=this.intl==="ja"||this.intl.startsWith("ja-");r&=!s;const l=r?{month:t,day:"numeric"}:{month:t},c=r?"format":"standalone";if(!this.monthsCache[c][t]){const d=s?p=>this.dtFormatter(p,l).format():p=>this.extract(p,l,"month");this.monthsCache[c][t]=oN(d)}return this.monthsCache[c][t]})}weekdays(t,r=!1){return pc(this,t,jw,()=>{const s=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},l=r?"format":"standalone";return this.weekdaysCache[l][t]||(this.weekdaysCache[l][t]=lN(c=>this.extract(c,s,"weekday"))),this.weekdaysCache[l][t]})}meridiems(){return pc(this,void 0,()=>Aw,()=>{if(!this.meridiemCache){const t={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Xe.utc(2016,11,13,9),Xe.utc(2016,11,13,19)].map(r=>this.extract(r,t,"dayperiod"))}return this.meridiemCache})}eras(t){return pc(this,t,_w,()=>{const r={era:t};return this.eraCache[t]||(this.eraCache[t]=[Xe.utc(-40,1,1),Xe.utc(2017,1,1)].map(s=>this.extract(s,r,"era"))),this.eraCache[t]})}extract(t,r,s){const l=this.dtFormatter(t,r),c=l.formatToParts(),d=c.find(p=>p.type.toLowerCase()===s);return d?d.value:null}numberFormatter(t={}){return new uN(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new dN(t,this.intl,r)}relFormatter(t={}){return new fN(this.intl,this.isEnglish(),t)}listFormatter(t={}){return eN(this.intl,t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||fw(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:xw()?rN(this.locale):hw}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Bf=null;class qn extends As{static get utcInstance(){return Bf===null&&(Bf=new qn(0)),Bf}static instance(t){return t===0?qn.utcInstance:new qn(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new qn(Qc(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Io(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Io(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return Io(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class pw extends As{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Qr(a,t){if(Ze(a)||a===null)return t;if(a instanceof As)return a;if(vN(a)){const r=a.toLowerCase();return r==="default"?t:r==="local"||r==="system"?Yo.instance:r==="utc"||r==="gmt"?qn.utcInstance:qn.parseSpecifier(r)||Ka.create(a)}else return ei(a)?qn.instance(a):typeof a=="object"&&"offset"in a&&typeof a.offset=="function"?a:new pw(a)}const Qh={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},j0={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hN=Qh.hanidec.replace(/[\[|\]]/g,"").split("");function pN(a){let t=parseInt(a,10);if(isNaN(t)){t="";for(let r=0;r<a.length;r++){const s=a.charCodeAt(r);if(a[r].search(Qh.hanidec)!==-1)t+=hN.indexOf(a[r]);else for(const l in j0){const[c,d]=j0[l];s>=c&&s<=d&&(t+=s-c)}}return parseInt(t,10)}else return t}const xh=new Map;function mN(){xh.clear()}function Ra({numberingSystem:a},t=""){const r=a||"latn";let s=xh.get(r);s===void 0&&(s=new Map,xh.set(r,s));let l=s.get(t);return l===void 0&&(l=new RegExp(`${Qh[r]}${t}`),s.set(t,l)),l}let A0=()=>Date.now(),_0="system",D0=null,M0=null,R0=null,z0=60,L0,B0=null;class rn{static get now(){return A0}static set now(t){A0=t}static set defaultZone(t){_0=t}static get defaultZone(){return Qr(_0,Yo.instance)}static get defaultLocale(){return D0}static set defaultLocale(t){D0=t}static get defaultNumberingSystem(){return M0}static set defaultNumberingSystem(t){M0=t}static get defaultOutputCalendar(){return R0}static set defaultOutputCalendar(t){R0=t}static get defaultWeekSettings(){return B0}static set defaultWeekSettings(t){B0=kh(t)}static get twoDigitCutoffYear(){return z0}static set twoDigitCutoffYear(t){z0=t%100}static get throwOnInvalid(){return L0}static set throwOnInvalid(t){L0=t}static resetCaches(){jt.resetCache(),Ka.resetCache(),Xe.resetCache(),mN()}}class Ba{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mw=[0,31,59,90,120,151,181,212,243,273,304,334],gw=[0,31,60,91,121,152,182,213,244,274,305,335];function Ta(a,t){return new Ba("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${a}, which is invalid`)}function Wh(a,t,r){const s=new Date(Date.UTC(a,t-1,r));a<100&&a>=0&&s.setUTCFullYear(s.getUTCFullYear()-1900);const l=s.getUTCDay();return l===0?7:l}function yw(a,t,r){return r+(Po(a)?gw:mw)[t-1]}function vw(a,t){const r=Po(a)?gw:mw,s=r.findIndex(c=>c<t),l=t-r[s];return{month:s+1,day:l}}function Jh(a,t){return(a-t+7)%7+1}function Bc(a,t=4,r=1){const{year:s,month:l,day:c}=a,d=yw(s,l,c),p=Jh(Wh(s,l,c),r);let m=Math.floor((d-p+14-t)/7),g;return m<1?(g=s-1,m=Vo(g,t,r)):m>Vo(s,t,r)?(g=s+1,m=1):g=s,{weekYear:g,weekNumber:m,weekday:p,...Wc(a)}}function I0(a,t=4,r=1){const{weekYear:s,weekNumber:l,weekday:c}=a,d=Jh(Wh(s,1,t),r),p=vs(s);let m=l*7+c-d-7+t,g;m<1?(g=s-1,m+=vs(g)):m>p?(g=s+1,m-=vs(s)):g=s;const{month:b,day:w}=vw(g,m);return{year:g,month:b,day:w,...Wc(a)}}function If(a){const{year:t,month:r,day:s}=a,l=yw(t,r,s);return{year:t,ordinal:l,...Wc(a)}}function $0(a){const{year:t,ordinal:r}=a,{month:s,day:l}=vw(t,r);return{year:t,month:s,day:l,...Wc(a)}}function U0(a,t){if(!Ze(a.localWeekday)||!Ze(a.localWeekNumber)||!Ze(a.localWeekYear)){if(!Ze(a.weekday)||!Ze(a.weekNumber)||!Ze(a.weekYear))throw new gs("Cannot mix locale-based week fields with ISO-based week fields");return Ze(a.localWeekday)||(a.weekday=a.localWeekday),Ze(a.localWeekNumber)||(a.weekNumber=a.localWeekNumber),Ze(a.localWeekYear)||(a.weekYear=a.localWeekYear),delete a.localWeekday,delete a.localWeekNumber,delete a.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function gN(a,t=4,r=1){const s=Xc(a.weekYear),l=Na(a.weekNumber,1,Vo(a.weekYear,t,r)),c=Na(a.weekday,1,7);return s?l?c?!1:Ta("weekday",a.weekday):Ta("week",a.weekNumber):Ta("weekYear",a.weekYear)}function yN(a){const t=Xc(a.year),r=Na(a.ordinal,1,vs(a.year));return t?r?!1:Ta("ordinal",a.ordinal):Ta("year",a.year)}function bw(a){const t=Xc(a.year),r=Na(a.month,1,12),s=Na(a.day,1,Ic(a.year,a.month));return t?r?s?!1:Ta("day",a.day):Ta("month",a.month):Ta("year",a.year)}function ww(a){const{hour:t,minute:r,second:s,millisecond:l}=a,c=Na(t,0,23)||t===24&&r===0&&s===0&&l===0,d=Na(r,0,59),p=Na(s,0,59),m=Na(l,0,999);return c?d?p?m?!1:Ta("millisecond",l):Ta("second",s):Ta("minute",r):Ta("hour",t)}function Ze(a){return typeof a>"u"}function ei(a){return typeof a=="number"}function Xc(a){return typeof a=="number"&&a%1===0}function vN(a){return typeof a=="string"}function bN(a){return Object.prototype.toString.call(a)==="[object Date]"}function Sw(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function xw(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function wN(a){return Array.isArray(a)?a:[a]}function H0(a,t,r){if(a.length!==0)return a.reduce((s,l)=>{const c=[t(l),l];return s&&r(s[0],c[0])===s[0]?s:c},null)[1]}function SN(a,t){return t.reduce((r,s)=>(r[s]=a[s],r),{})}function Cs(a,t){return Object.prototype.hasOwnProperty.call(a,t)}function kh(a){if(a==null)return null;if(typeof a!="object")throw new Vn("Week settings must be an object");if(!Na(a.firstDay,1,7)||!Na(a.minimalDays,1,7)||!Array.isArray(a.weekend)||a.weekend.some(t=>!Na(t,1,7)))throw new Vn("Invalid week settings");return{firstDay:a.firstDay,minimalDays:a.minimalDays,weekend:Array.from(a.weekend)}}function Na(a,t,r){return Xc(a)&&a>=t&&a<=r}function xN(a,t){return a-t*Math.floor(a/t)}function yn(a,t=2){const r=a<0;let s;return r?s="-"+(""+-a).padStart(t,"0"):s=(""+a).padStart(t,"0"),s}function Kr(a){if(!(Ze(a)||a===null||a===""))return parseInt(a,10)}function Si(a){if(!(Ze(a)||a===null||a===""))return parseFloat(a)}function ep(a){if(!(Ze(a)||a===null||a==="")){const t=parseFloat("0."+a)*1e3;return Math.floor(t)}}function tp(a,t,r="round"){const s=10**t;switch(r){case"expand":return a>0?Math.ceil(a*s)/s:Math.floor(a*s)/s;case"trunc":return Math.trunc(a*s)/s;case"round":return Math.round(a*s)/s;case"floor":return Math.floor(a*s)/s;case"ceil":return Math.ceil(a*s)/s;default:throw new RangeError(`Value rounding ${r} is out of range`)}}function Po(a){return a%4===0&&(a%100!==0||a%400===0)}function vs(a){return Po(a)?366:365}function Ic(a,t){const r=xN(t-1,12)+1,s=a+(t-r)/12;return r===2?Po(s)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function Kc(a){let t=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);return a.year<100&&a.year>=0&&(t=new Date(t),t.setUTCFullYear(a.year,a.month-1,a.day)),+t}function V0(a,t,r){return-Jh(Wh(a,1,t),r)+t-1}function Vo(a,t=4,r=1){const s=V0(a,t,r),l=V0(a+1,t,r);return(vs(a)-s+l)/7}function Eh(a){return a>99?a:a>rn.twoDigitCutoffYear?1900+a:2e3+a}function kw(a,t,r,s=null){const l=new Date(a),c={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};s&&(c.timeZone=s);const d={timeZoneName:t,...c},p=new Intl.DateTimeFormat(r,d).formatToParts(l).find(m=>m.type.toLowerCase()==="timezonename");return p?p.value:null}function Qc(a,t){let r=parseInt(a,10);Number.isNaN(r)&&(r=0);const s=parseInt(t,10)||0,l=r<0||Object.is(r,-0)?-s:s;return r*60+l}function Ew(a){const t=Number(a);if(typeof a=="boolean"||a===""||!Number.isFinite(t))throw new Vn(`Invalid unit value ${a}`);return t}function $c(a,t){const r={};for(const s in a)if(Cs(a,s)){const l=a[s];if(l==null)continue;r[t(s)]=Ew(l)}return r}function Io(a,t){const r=Math.trunc(Math.abs(a/60)),s=Math.trunc(Math.abs(a%60)),l=a>=0?"+":"-";switch(t){case"short":return`${l}${yn(r,2)}:${yn(s,2)}`;case"narrow":return`${l}${r}${s>0?`:${s}`:""}`;case"techie":return`${l}${yn(r,2)}${yn(s,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function Wc(a){return SN(a,["hour","minute","second","millisecond"])}const kN=["January","February","March","April","May","June","July","August","September","October","November","December"],Cw=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],EN=["J","F","M","A","M","J","J","A","S","O","N","D"];function Tw(a){switch(a){case"narrow":return[...EN];case"short":return[...Cw];case"long":return[...kN];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const Nw=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Ow=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],CN=["M","T","W","T","F","S","S"];function jw(a){switch(a){case"narrow":return[...CN];case"short":return[...Ow];case"long":return[...Nw];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const Aw=["AM","PM"],TN=["Before Christ","Anno Domini"],NN=["BC","AD"],ON=["B","A"];function _w(a){switch(a){case"narrow":return[...ON];case"short":return[...NN];case"long":return[...TN];default:return null}}function jN(a){return Aw[a.hour<12?0:1]}function AN(a,t){return jw(t)[a.weekday-1]}function _N(a,t){return Tw(t)[a.month-1]}function DN(a,t){return _w(t)[a.year<0?0:1]}function MN(a,t,r="always",s=!1){const l={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},c=["hours","minutes","seconds"].indexOf(a)===-1;if(r==="auto"&&c){const w=a==="days";switch(t){case 1:return w?"tomorrow":`next ${l[a][0]}`;case-1:return w?"yesterday":`last ${l[a][0]}`;case 0:return w?"today":`this ${l[a][0]}`}}const d=Object.is(t,-0)||t<0,p=Math.abs(t),m=p===1,g=l[a],b=s?m?g[1]:g[2]||g[1]:m?l[a][0]:a;return d?`${p} ${b} ago`:`in ${p} ${b}`}function G0(a,t){let r="";for(const s of a)s.literal?r+=s.val:r+=t(s.val);return r}const RN={D:Lc,DD:F1,DDD:Z1,DDDD:X1,t:K1,tt:Q1,ttt:W1,tttt:J1,T:ew,TT:tw,TTT:nw,TTTT:aw,f:rw,ff:sw,fff:lw,ffff:uw,F:iw,FF:ow,FFF:cw,FFFF:dw};class Gn{static create(t,r={}){return new Gn(t,r)}static parseFormat(t){let r=null,s="",l=!1;const c=[];for(let d=0;d<t.length;d++){const p=t.charAt(d);p==="'"?((s.length>0||l)&&c.push({literal:l||/^\s+$/.test(s),val:s===""?"'":s}),r=null,s="",l=!l):l||p===r?s+=p:(s.length>0&&c.push({literal:/^\s+$/.test(s),val:s}),s=p,r=p)}return s.length>0&&c.push({literal:l||/^\s+$/.test(s),val:s}),c}static macroTokenToFormatOpts(t){return RN[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}dtFormatter(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r})}formatDateTime(t,r){return this.dtFormatter(t,r).format()}formatDateTimeParts(t,r){return this.dtFormatter(t,r).formatToParts()}formatInterval(t,r){return this.dtFormatter(t.start,r).dtf.formatRange(t.start.toJSDate(),t.end.toJSDate())}resolvedOptions(t,r){return this.dtFormatter(t,r).resolvedOptions()}num(t,r=0,s=void 0){if(this.opts.forceSimple)return yn(t,r);const l={...this.opts};return r>0&&(l.padTo=r),s&&(l.signDisplay=s),this.loc.numberFormatter(l).format(t)}formatDateTimeFromString(t,r){const s=this.loc.listingMode()==="en",l=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",c=(E,D)=>this.loc.extract(t,E,D),d=E=>t.isOffsetFixed&&t.offset===0&&E.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,E.format):"",p=()=>s?jN(t):c({hour:"numeric",hourCycle:"h12"},"dayperiod"),m=(E,D)=>s?_N(t,E):c(D?{month:E}:{month:E,day:"numeric"},"month"),g=(E,D)=>s?AN(t,E):c(D?{weekday:E}:{weekday:E,month:"long",day:"numeric"},"weekday"),b=E=>{const D=Gn.macroTokenToFormatOpts(E);return D?this.formatWithSystemDefault(t,D):E},w=E=>s?DN(t,E):c({era:E},"era"),k=E=>{switch(E){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return d({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return d({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return d({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return p();case"d":return l?c({day:"numeric"},"day"):this.num(t.day);case"dd":return l?c({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return g("short",!0);case"cccc":return g("long",!0);case"ccccc":return g("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return g("short",!1);case"EEEE":return g("long",!1);case"EEEEE":return g("narrow",!1);case"L":return l?c({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return l?c({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return m("short",!0);case"LLLL":return m("long",!0);case"LLLLL":return m("narrow",!0);case"M":return l?c({month:"numeric"},"month"):this.num(t.month);case"MM":return l?c({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return m("short",!1);case"MMMM":return m("long",!1);case"MMMMM":return m("narrow",!1);case"y":return l?c({year:"numeric"},"year"):this.num(t.year);case"yy":return l?c({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return l?c({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return l?c({year:"numeric"},"year"):this.num(t.year,6);case"G":return w("short");case"GG":return w("long");case"GGGGG":return w("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"n":return this.num(t.localWeekNumber);case"nn":return this.num(t.localWeekNumber,2);case"ii":return this.num(t.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(t.localWeekYear,4);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return b(E)}};return G0(Gn.parseFormat(r),k)}formatDurationFromString(t,r){const s=this.opts.signMode==="negativeLargestOnly"?-1:1,l=b=>{switch(b[0]){case"S":return"milliseconds";case"s":return"seconds";case"m":return"minutes";case"h":return"hours";case"d":return"days";case"w":return"weeks";case"M":return"months";case"y":return"years";default:return null}},c=(b,w)=>k=>{const E=l(k);if(E){const D=w.isNegativeDuration&&E!==w.largestUnit?s:1;let F;return this.opts.signMode==="negativeLargestOnly"&&E!==w.largestUnit?F="never":this.opts.signMode==="all"?F="always":F="auto",this.num(b.get(E)*D,k.length,F)}else return k},d=Gn.parseFormat(r),p=d.reduce((b,{literal:w,val:k})=>w?b:b.concat(k),[]),m=t.shiftTo(...p.map(l).filter(b=>b)),g={isNegativeDuration:m<0,largestUnit:Object.keys(m.values)[0]};return G0(d,c(m,g))}}const Dw=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function _s(...a){const t=a.reduce((r,s)=>r+s.source,"");return RegExp(`^${t}$`)}function Ds(...a){return t=>a.reduce(([r,s,l],c)=>{const[d,p,m]=c(t,l);return[{...r,...d},p||s,m]},[{},null,1]).slice(0,2)}function Ms(a,...t){if(a==null)return[null,null];for(const[r,s]of t){const l=r.exec(a);if(l)return s(l)}return[null,null]}function Mw(...a){return(t,r)=>{const s={};let l;for(l=0;l<a.length;l++)s[a[l]]=Kr(t[r+l]);return[s,null,r+l]}}const Rw=/(?:([Zz])|([+-]\d\d)(?::?(\d\d))?)/,zN=`(?:${Rw.source}?(?:\\[(${Dw.source})\\])?)?`,np=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,zw=RegExp(`${np.source}${zN}`),ap=RegExp(`(?:[Tt]${zw.source})?`),LN=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,BN=/(\d{4})-?W(\d\d)(?:-?(\d))?/,IN=/(\d{4})-?(\d{3})/,$N=Mw("weekYear","weekNumber","weekDay"),UN=Mw("year","ordinal"),HN=/(\d{4})-(\d\d)-(\d\d)/,Lw=RegExp(`${np.source} ?(?:${Rw.source}|(${Dw.source}))?`),VN=RegExp(`(?: ${Lw.source})?`);function bs(a,t,r){const s=a[t];return Ze(s)?r:Kr(s)}function GN(a,t){return[{year:bs(a,t),month:bs(a,t+1,1),day:bs(a,t+2,1)},null,t+3]}function Rs(a,t){return[{hours:bs(a,t,0),minutes:bs(a,t+1,0),seconds:bs(a,t+2,0),milliseconds:ep(a[t+3])},null,t+4]}function Fo(a,t){const r=!a[t]&&!a[t+1],s=Qc(a[t+1],a[t+2]),l=r?null:qn.instance(s);return[{},l,t+3]}function Zo(a,t){const r=a[t]?Ka.create(a[t]):null;return[{},r,t+1]}const qN=RegExp(`^T?${np.source}$`),YN=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function PN(a){const[t,r,s,l,c,d,p,m,g]=a,b=t[0]==="-",w=m&&m[0]==="-",k=(E,D=!1)=>E!==void 0&&(D||E&&b)?-E:E;return[{years:k(Si(r)),months:k(Si(s)),weeks:k(Si(l)),days:k(Si(c)),hours:k(Si(d)),minutes:k(Si(p)),seconds:k(Si(m),m==="-0"),milliseconds:k(ep(g),w)}]}const FN={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function rp(a,t,r,s,l,c,d){const p={year:t.length===2?Eh(Kr(t)):Kr(t),month:Cw.indexOf(r)+1,day:Kr(s),hour:Kr(l),minute:Kr(c)};return d&&(p.second=Kr(d)),a&&(p.weekday=a.length>3?Nw.indexOf(a)+1:Ow.indexOf(a)+1),p}const ZN=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function XN(a){const[,t,r,s,l,c,d,p,m,g,b,w]=a,k=rp(t,l,s,r,c,d,p);let E;return m?E=FN[m]:g?E=0:E=Qc(b,w),[k,new qn(E)]}function KN(a){return a.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const QN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,WN=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,JN=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function q0(a){const[,t,r,s,l,c,d,p]=a;return[rp(t,l,s,r,c,d,p),qn.utcInstance]}function eO(a){const[,t,r,s,l,c,d,p]=a;return[rp(t,p,r,s,l,c,d),qn.utcInstance]}const tO=_s(LN,ap),nO=_s(BN,ap),aO=_s(IN,ap),rO=_s(zw),Bw=Ds(GN,Rs,Fo,Zo),iO=Ds($N,Rs,Fo,Zo),sO=Ds(UN,Rs,Fo,Zo),oO=Ds(Rs,Fo,Zo);function lO(a){return Ms(a,[tO,Bw],[nO,iO],[aO,sO],[rO,oO])}function cO(a){return Ms(KN(a),[ZN,XN])}function uO(a){return Ms(a,[QN,q0],[WN,q0],[JN,eO])}function dO(a){return Ms(a,[YN,PN])}const fO=Ds(Rs);function hO(a){return Ms(a,[qN,fO])}const pO=_s(HN,VN),mO=_s(Lw),gO=Ds(Rs,Fo,Zo);function yO(a){return Ms(a,[pO,Bw],[mO,gO])}const Y0="Invalid Duration",Iw={weeks:{days:7,hours:168,minutes:10080,seconds:10080*60,milliseconds:10080*60*1e3},days:{hours:24,minutes:1440,seconds:1440*60,milliseconds:1440*60*1e3},hours:{minutes:60,seconds:3600,milliseconds:3600*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},vO={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:2184*60,seconds:2184*60*60,milliseconds:2184*60*60*1e3},months:{weeks:4,days:30,hours:720,minutes:720*60,seconds:720*60*60,milliseconds:720*60*60*1e3},...Iw},Ea=146097/400,ds=146097/4800,bO={years:{quarters:4,months:12,weeks:Ea/7,days:Ea,hours:Ea*24,minutes:Ea*24*60,seconds:Ea*24*60*60,milliseconds:Ea*24*60*60*1e3},quarters:{months:3,weeks:Ea/28,days:Ea/4,hours:Ea*24/4,minutes:Ea*24*60/4,seconds:Ea*24*60*60/4,milliseconds:Ea*24*60*60*1e3/4},months:{weeks:ds/7,days:ds,hours:ds*24,minutes:ds*24*60,seconds:ds*24*60*60,milliseconds:ds*24*60*60*1e3},...Iw},Ci=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],wO=Ci.slice(0).reverse();function vr(a,t,r=!1){const s={values:r?t.values:{...a.values,...t.values||{}},loc:a.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||a.conversionAccuracy,matrix:t.matrix||a.matrix};return new yt(s)}function $w(a,t){let r=t.milliseconds??0;for(const s of wO.slice(1))t[s]&&(r+=t[s]*a[s].milliseconds);return r}function P0(a,t){const r=$w(a,t)<0?-1:1;Ci.reduceRight((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]*r,d=a[l][s],p=Math.floor(c/d);t[l]+=p*r,t[s]-=p*d*r}return l},null),Ci.reduce((s,l)=>{if(Ze(t[l]))return s;if(s){const c=t[s]%1;t[s]-=c,t[l]+=c*a[s][l]}return l},null)}function F0(a){const t={};for(const[r,s]of Object.entries(a))s!==0&&(t[r]=s);return t}class yt{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;let s=r?bO:vO;t.matrix&&(s=t.matrix),this.values=t.values,this.loc=t.loc||jt.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=s,this.isLuxonDuration=!0}static fromMillis(t,r){return yt.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new Vn(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new yt({values:$c(t,yt.normalizeUnit),loc:jt.fromObject(r),conversionAccuracy:r.conversionAccuracy,matrix:r.matrix})}static fromDurationLike(t){if(ei(t))return yt.fromMillis(t);if(yt.isDuration(t))return t;if(typeof t=="object")return yt.fromObject(t);throw new Vn(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[s]=dO(t);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[s]=hO(t);return s?yt.fromObject(s,r):yt.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Duration is invalid");const s=t instanceof Ba?t:new Ba(t,r);if(rn.throwOnInvalid)throw new FT(s);return new yt({invalid:s})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new P1(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const s={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?Gn.create(this.loc,s).formatDurationFromString(this,t):Y0}toHuman(t={}){if(!this.isValid)return Y0;const r=t.showZeros!==!1,s=Ci.map(l=>{const c=this.values[l];return Ze(c)||c===0&&!r?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...t,unit:l.slice(0,-1)}).format(c)}).filter(l=>l);return this.loc.listFormatter({type:"conjunction",style:t.listStyle||"narrow",...t}).format(s)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=tp(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();return r<0||r>=864e5?null:(t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t,includeOffset:!1},Xe.fromMillis(r,{zone:"UTC"}).toISOTime(t))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?$w(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t),s={};for(const l of Ci)(Cs(r.values,l)||Cs(this.values,l))&&(s[l]=r.get(l)+this.get(l));return vr(this,{values:s},!0)}minus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const s of Object.keys(this.values))r[s]=Ew(t(this.values[s],s));return vr(this,{values:r},!0)}get(t){return this[yt.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...$c(t,yt.normalizeUnit)};return vr(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:s,matrix:l}={}){const d={loc:this.loc.clone({locale:t,numberingSystem:r}),matrix:l,conversionAccuracy:s};return vr(this,d)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return P0(this.matrix,t),vr(this,{values:t},!0)}rescale(){if(!this.isValid)return this;const t=F0(this.normalize().shiftToAll().toObject());return vr(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(d=>yt.normalizeUnit(d));const r={},s={},l=this.toObject();let c;for(const d of Ci)if(t.indexOf(d)>=0){c=d;let p=0;for(const g in s)p+=this.matrix[g][d]*s[g],s[g]=0;ei(l[d])&&(p+=l[d]);const m=Math.trunc(p);r[d]=m,s[d]=(p*1e3-m*1e3)/1e3}else ei(l[d])&&(s[d]=l[d]);for(const d in s)s[d]!==0&&(r[c]+=d===c?s[d]:s[d]/this.matrix[c][d]);return P0(this.matrix,r),vr(this,{values:r},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=this.values[r]===0?0:-this.values[r];return vr(this,{values:t},!0)}removeZeros(){if(!this.isValid)return this;const t=F0(this.values);return vr(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(s,l){return s===void 0||s===0?l===void 0||l===0:s===l}for(const s of Ci)if(!r(this.values[s],t.values[s]))return!1;return!0}}const fs="Invalid Interval";function SO(a,t){return!a||!a.isValid?an.invalid("missing or invalid start"):!t||!t.isValid?an.invalid("missing or invalid end"):t<a?an.invalid("end before start",`The end of an interval must be after its start, but you had start=${a.toISO()} and end=${t.toISO()}`):null}class an{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the Interval is invalid");const s=t instanceof Ba?t:new Ba(t,r);if(rn.throwOnInvalid)throw new PT(s);return new an({invalid:s})}static fromDateTimes(t,r){const s=Oo(t),l=Oo(r),c=SO(s,l);return c??new an({start:s,end:l})}static after(t,r){const s=yt.fromDurationLike(r),l=Oo(t);return an.fromDateTimes(l,l.plus(s))}static before(t,r){const s=yt.fromDurationLike(r),l=Oo(t);return an.fromDateTimes(l.minus(s),l)}static fromISO(t,r){const[s,l]=(t||"").split("/",2);if(s&&l){let c,d;try{c=Xe.fromISO(s,r),d=c.isValid}catch{d=!1}let p,m;try{p=Xe.fromISO(l,r),m=p.isValid}catch{m=!1}if(d&&m)return an.fromDateTimes(c,p);if(d){const g=yt.fromISO(l,r);if(g.isValid)return an.after(c,g)}else if(m){const g=yt.fromISO(s,r);if(g.isValid)return an.before(p,g)}}return an.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds",r){if(!this.isValid)return NaN;const s=this.start.startOf(t,r);let l;return r?.useLocaleWeeks?l=this.end.reconfigure({locale:s.locale}):l=this.end,l=l.startOf(t,r),Math.floor(l.diff(s,t).get(t))+(l.valueOf()!==this.end.valueOf())}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?an.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(Oo).filter(d=>this.contains(d)).sort((d,p)=>d.toMillis()-p.toMillis()),s=[];let{s:l}=this,c=0;for(;l<this.e;){const d=r[c]||this.e,p=+d>+this.e?this.e:d;s.push(an.fromDateTimes(l,p)),l=p,c+=1}return s}splitBy(t){const r=yt.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s}=this,l=1,c;const d=[];for(;s<this.e;){const p=this.start.plus(r.mapUnits(m=>m*l));c=+p>+this.e?this.e:p,d.push(an.fromDateTimes(s,c)),s=c,l+=1}return d}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,s=this.e<t.e?this.e:t.e;return r>=s?null:an.fromDateTimes(r,s)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,s=this.e>t.e?this.e:t.e;return an.fromDateTimes(r,s)}static merge(t){const[r,s]=t.sort((l,c)=>l.s-c.s).reduce(([l,c],d)=>c?c.overlaps(d)||c.abutsStart(d)?[l,c.union(d)]:[l.concat([c]),d]:[l,d],[[],null]);return s&&r.push(s),r}static xor(t){let r=null,s=0;const l=[],c=t.map(m=>[{time:m.s,type:"s"},{time:m.e,type:"e"}]),d=Array.prototype.concat(...c),p=d.sort((m,g)=>m.time-g.time);for(const m of p)s+=m.type==="s"?1:-1,s===1?r=m.time:(r&&+r!=+m.time&&l.push(an.fromDateTimes(r,m.time)),r=null);return an.merge(l)}difference(...t){return an.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:fs}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(t=Lc,r={}){return this.isValid?Gn.create(this.s.loc.clone(r),t).formatInterval(this):fs}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:fs}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:fs}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:fs}toFormat(t,{separator:r="  "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:fs}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):yt.invalid(this.invalidReason)}mapEndpoints(t){return an.fromDateTimes(t(this.s),t(this.e))}}class Do{static hasDST(t=rn.defaultZone){const r=Xe.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Ka.isValidZone(t)}static normalizeZone(t){return Qr(t,rn.defaultZone)}static getStartOfWeek({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:t=null,locObj:r=null}={}){return(r||jt.create(t)).getWeekendDays().slice()}static months(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||jt.create(r,s,c)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null,outputCalendar:c="gregory"}={}){return(l||jt.create(r,s,c)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||jt.create(r,s,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:s=null,locObj:l=null}={}){return(l||jt.create(r,s,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return jt.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return jt.create(r,null,"gregory").eras(t)}static features(){return{relative:Sw(),localeWeek:xw()}}}function Z0(a,t){const r=l=>l.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),s=r(t)-r(a);return Math.floor(yt.fromMillis(s).as("days"))}function xO(a,t,r){const s=[["years",(m,g)=>g.year-m.year],["quarters",(m,g)=>g.quarter-m.quarter+(g.year-m.year)*4],["months",(m,g)=>g.month-m.month+(g.year-m.year)*12],["weeks",(m,g)=>{const b=Z0(m,g);return(b-b%7)/7}],["days",Z0]],l={},c=a;let d,p;for(const[m,g]of s)r.indexOf(m)>=0&&(d=m,l[m]=g(a,t),p=c.plus(l),p>t?(l[m]--,a=c.plus(l),a>t&&(p=a,l[m]--,a=c.plus(l))):a=p);return[a,l,p,d]}function kO(a,t,r,s){let[l,c,d,p]=xO(a,t,r);const m=t-l,g=r.filter(w=>["hours","minutes","seconds","milliseconds"].indexOf(w)>=0);g.length===0&&(d<t&&(d=l.plus({[p]:1})),d!==l&&(c[p]=(c[p]||0)+m/(d-l)));const b=yt.fromObject(c,s);return g.length>0?yt.fromMillis(m,s).shiftTo(...g).plus(b):b}const EO="missing Intl.DateTimeFormat.formatToParts support";function Nt(a,t=r=>r){return{regex:a,deser:([r])=>t(pN(r))}}const CO="",Uw=`[ ${CO}]`,Hw=new RegExp(Uw,"g");function TO(a){return a.replace(/\./g,"\\.?").replace(Hw,Uw)}function X0(a){return a.replace(/\./g,"").replace(Hw," ").toLowerCase()}function za(a,t){return a===null?null:{regex:RegExp(a.map(TO).join("|")),deser:([r])=>a.findIndex(s=>X0(r)===X0(s))+t}}function K0(a,t){return{regex:a,deser:([,r,s])=>Qc(r,s),groups:t}}function mc(a){return{regex:a,deser:([t])=>t}}function NO(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function OO(a,t){const r=Ra(t),s=Ra(t,"{2}"),l=Ra(t,"{3}"),c=Ra(t,"{4}"),d=Ra(t,"{6}"),p=Ra(t,"{1,2}"),m=Ra(t,"{1,3}"),g=Ra(t,"{1,6}"),b=Ra(t,"{1,9}"),w=Ra(t,"{2,4}"),k=Ra(t,"{4,6}"),E=U=>({regex:RegExp(NO(U.val)),deser:([te])=>te,literal:!0}),F=(U=>{if(a.literal)return E(U);switch(U.val){case"G":return za(t.eras("short"),0);case"GG":return za(t.eras("long"),0);case"y":return Nt(g);case"yy":return Nt(w,Eh);case"yyyy":return Nt(c);case"yyyyy":return Nt(k);case"yyyyyy":return Nt(d);case"M":return Nt(p);case"MM":return Nt(s);case"MMM":return za(t.months("short",!0),1);case"MMMM":return za(t.months("long",!0),1);case"L":return Nt(p);case"LL":return Nt(s);case"LLL":return za(t.months("short",!1),1);case"LLLL":return za(t.months("long",!1),1);case"d":return Nt(p);case"dd":return Nt(s);case"o":return Nt(m);case"ooo":return Nt(l);case"HH":return Nt(s);case"H":return Nt(p);case"hh":return Nt(s);case"h":return Nt(p);case"mm":return Nt(s);case"m":return Nt(p);case"q":return Nt(p);case"qq":return Nt(s);case"s":return Nt(p);case"ss":return Nt(s);case"S":return Nt(m);case"SSS":return Nt(l);case"u":return mc(b);case"uu":return mc(p);case"uuu":return Nt(r);case"a":return za(t.meridiems(),0);case"kkkk":return Nt(c);case"kk":return Nt(w,Eh);case"W":return Nt(p);case"WW":return Nt(s);case"E":case"c":return Nt(r);case"EEE":return za(t.weekdays("short",!1),1);case"EEEE":return za(t.weekdays("long",!1),1);case"ccc":return za(t.weekdays("short",!0),1);case"cccc":return za(t.weekdays("long",!0),1);case"Z":case"ZZ":return K0(new RegExp(`([+-]${p.source})(?::(${s.source}))?`),2);case"ZZZ":return K0(new RegExp(`([+-]${p.source})(${s.source})?`),2);case"z":return mc(/[a-z_+-/]{1,256}?/i);case" ":return mc(/[^\S\n\r]/);default:return E(U)}})(a)||{invalidReason:EO};return F.token=a,F}const jO={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function AO(a,t,r){const{type:s,value:l}=a;if(s==="literal"){const m=/^\s+$/.test(l);return{literal:!m,val:m?" ":l}}const c=t[s];let d=s;s==="hour"&&(t.hour12!=null?d=t.hour12?"hour12":"hour24":t.hourCycle!=null?t.hourCycle==="h11"||t.hourCycle==="h12"?d="hour12":d="hour24":d=r.hour12?"hour12":"hour24");let p=jO[d];if(typeof p=="object"&&(p=p[c]),p)return{literal:!1,val:p}}function _O(a){return[`^${a.map(r=>r.regex).reduce((r,s)=>`${r}(${s.source})`,"")}$`,a]}function DO(a,t,r){const s=a.match(t);if(s){const l={};let c=1;for(const d in r)if(Cs(r,d)){const p=r[d],m=p.groups?p.groups+1:1;!p.literal&&p.token&&(l[p.token.val[0]]=p.deser(s.slice(c,c+m))),c+=m}return[s,l]}else return[s,{}]}function MO(a){const t=c=>{switch(c){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r=null,s;return Ze(a.z)||(r=Ka.create(a.z)),Ze(a.Z)||(r||(r=new qn(a.Z)),s=a.Z),Ze(a.q)||(a.M=(a.q-1)*3+1),Ze(a.h)||(a.h<12&&a.a===1?a.h+=12:a.h===12&&a.a===0&&(a.h=0)),a.G===0&&a.y&&(a.y=-a.y),Ze(a.u)||(a.S=ep(a.u)),[Object.keys(a).reduce((c,d)=>{const p=t(d);return p&&(c[p]=a[d]),c},{}),r,s]}let $f=null;function RO(){return $f||($f=Xe.fromMillis(1555555555555)),$f}function zO(a,t){if(a.literal)return a;const r=Gn.macroTokenToFormatOpts(a.val),s=Yw(r,t);return s==null||s.includes(void 0)?a:s}function Vw(a,t){return Array.prototype.concat(...a.map(r=>zO(r,t)))}class Gw{constructor(t,r){if(this.locale=t,this.format=r,this.tokens=Vw(Gn.parseFormat(r),t),this.units=this.tokens.map(s=>OO(s,t)),this.disqualifyingUnit=this.units.find(s=>s.invalidReason),!this.disqualifyingUnit){const[s,l]=_O(this.units);this.regex=RegExp(s,"i"),this.handlers=l}}explainFromTokens(t){if(this.isValid){const[r,s]=DO(t,this.regex,this.handlers),[l,c,d]=s?MO(s):[null,null,void 0];if(Cs(s,"a")&&Cs(s,"H"))throw new gs("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:this.tokens,regex:this.regex,rawMatches:r,matches:s,result:l,zone:c,specificOffset:d}}else return{input:t,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function qw(a,t,r){return new Gw(a,r).explainFromTokens(t)}function LO(a,t,r){const{result:s,zone:l,specificOffset:c,invalidReason:d}=qw(a,t,r);return[s,l,c,d]}function Yw(a,t){if(!a)return null;const s=Gn.create(t,a).dtFormatter(RO()),l=s.formatToParts(),c=s.resolvedOptions();return l.map(d=>AO(d,a,c))}const Uf="Invalid DateTime",Q0=864e13;function Mo(a){return new Ba("unsupported zone",`the zone "${a.name}" is not supported`)}function Hf(a){return a.weekData===null&&(a.weekData=Bc(a.c)),a.weekData}function Vf(a){return a.localWeekData===null&&(a.localWeekData=Bc(a.c,a.loc.getMinDaysInFirstWeek(),a.loc.getStartOfWeek())),a.localWeekData}function xi(a,t){const r={ts:a.ts,zone:a.zone,c:a.c,o:a.o,loc:a.loc,invalid:a.invalid};return new Xe({...r,...t,old:r})}function Pw(a,t,r){let s=a-t*60*1e3;const l=r.offset(s);if(t===l)return[s,t];s-=(l-t)*60*1e3;const c=r.offset(s);return l===c?[s,l]:[a-Math.min(l,c)*60*1e3,Math.max(l,c)]}function gc(a,t){a+=t*60*1e3;const r=new Date(a);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function Nc(a,t,r){return Pw(Kc(a),t,r)}function W0(a,t){const r=a.o,s=a.c.year+Math.trunc(t.years),l=a.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,c={...a.c,year:s,month:l,day:Math.min(a.c.day,Ic(s,l))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},d=yt.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),p=Kc(c);let[m,g]=Pw(p,r,a.zone);return d!==0&&(m+=d,g=a.zone.offset(m)),{ts:m,o:g}}function hs(a,t,r,s,l,c){const{setZone:d,zone:p}=r;if(a&&Object.keys(a).length!==0||t){const m=t||p,g=Xe.fromObject(a,{...r,zone:m,specificOffset:c});return d?g:g.setZone(p)}else return Xe.invalid(new Ba("unparsable",`the input "${l}" can't be parsed as ${s}`))}function yc(a,t,r=!0){return a.isValid?Gn.create(jt.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(a,t):null}function Gf(a,t,r){const s=a.c.year>9999||a.c.year<0;let l="";if(s&&a.c.year>=0&&(l+="+"),l+=yn(a.c.year,s?6:4),r==="year")return l;if(t){if(l+="-",l+=yn(a.c.month),r==="month")return l;l+="-"}else if(l+=yn(a.c.month),r==="month")return l;return l+=yn(a.c.day),l}function J0(a,t,r,s,l,c,d){let p=!r||a.c.millisecond!==0||a.c.second!==0,m="";switch(d){case"day":case"month":case"year":break;default:if(m+=yn(a.c.hour),d==="hour")break;if(t){if(m+=":",m+=yn(a.c.minute),d==="minute")break;p&&(m+=":",m+=yn(a.c.second))}else{if(m+=yn(a.c.minute),d==="minute")break;p&&(m+=yn(a.c.second))}if(d==="second")break;p&&(!s||a.c.millisecond!==0)&&(m+=".",m+=yn(a.c.millisecond,3))}return l&&(a.isOffsetFixed&&a.offset===0&&!c?m+="Z":a.o<0?(m+="-",m+=yn(Math.trunc(-a.o/60)),m+=":",m+=yn(Math.trunc(-a.o%60))):(m+="+",m+=yn(Math.trunc(a.o/60)),m+=":",m+=yn(Math.trunc(a.o%60)))),c&&(m+="["+a.zone.ianaName+"]"),m}const Fw={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},BO={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},IO={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Oc=["year","month","day","hour","minute","second","millisecond"],$O=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],UO=["year","ordinal","hour","minute","second","millisecond"];function jc(a){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[a.toLowerCase()];if(!t)throw new P1(a);return t}function eb(a){switch(a.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return jc(a)}}function HO(a){if(Ro===void 0&&(Ro=rn.now()),a.type!=="iana")return a.offset(Ro);const t=a.name;let r=Ch.get(t);return r===void 0&&(r=a.offset(Ro),Ch.set(t,r)),r}function tb(a,t){const r=Qr(t.zone,rn.defaultZone);if(!r.isValid)return Xe.invalid(Mo(r));const s=jt.fromObject(t);let l,c;if(Ze(a.year))l=rn.now();else{for(const m of Oc)Ze(a[m])&&(a[m]=Fw[m]);const d=bw(a)||ww(a);if(d)return Xe.invalid(d);const p=HO(r);[l,c]=Nc(a,p,r)}return new Xe({ts:l,zone:r,loc:s,o:c})}function nb(a,t,r){const s=Ze(r.round)?!0:r.round,l=Ze(r.rounding)?"trunc":r.rounding,c=(p,m)=>(p=tp(p,s||r.calendary?0:2,r.calendary?"round":l),t.loc.clone(r).relFormatter(r).format(p,m)),d=p=>r.calendary?t.hasSame(a,p)?0:t.startOf(p).diff(a.startOf(p),p).get(p):t.diff(a,p).get(p);if(r.unit)return c(d(r.unit),r.unit);for(const p of r.units){const m=d(p);if(Math.abs(m)>=1)return c(m,p)}return c(a>t?-0:0,r.units[r.units.length-1])}function ab(a){let t={},r;return a.length>0&&typeof a[a.length-1]=="object"?(t=a[a.length-1],r=Array.from(a).slice(0,a.length-1)):r=Array.from(a),[t,r]}let Ro;const Ch=new Map;class Xe{constructor(t){const r=t.zone||rn.defaultZone;let s=t.invalid||(Number.isNaN(t.ts)?new Ba("invalid input"):null)||(r.isValid?null:Mo(r));this.ts=Ze(t.ts)?rn.now():t.ts;let l=null,c=null;if(!s)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[l,c]=[t.old.c,t.old.o];else{const p=ei(t.o)&&!t.old?t.o:r.offset(this.ts);l=gc(this.ts,p),s=Number.isNaN(l.year)?new Ba("invalid input"):null,l=s?null:l,c=s?null:p}this._zone=r,this.loc=t.loc||jt.create(),this.invalid=s,this.weekData=null,this.localWeekData=null,this.c=l,this.o=c,this.isLuxonDateTime=!0}static now(){return new Xe({})}static local(){const[t,r]=ab(arguments),[s,l,c,d,p,m,g]=r;return tb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static utc(){const[t,r]=ab(arguments),[s,l,c,d,p,m,g]=r;return t.zone=qn.utcInstance,tb({year:s,month:l,day:c,hour:d,minute:p,second:m,millisecond:g},t)}static fromJSDate(t,r={}){const s=bN(t)?t.valueOf():NaN;if(Number.isNaN(s))return Xe.invalid("invalid input");const l=Qr(r.zone,rn.defaultZone);return l.isValid?new Xe({ts:s,zone:l,loc:jt.fromObject(r)}):Xe.invalid(Mo(l))}static fromMillis(t,r={}){if(ei(t))return t<-Q0||t>Q0?Xe.invalid("Timestamp out of range"):new Xe({ts:t,zone:Qr(r.zone,rn.defaultZone),loc:jt.fromObject(r)});throw new Vn(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(ei(t))return new Xe({ts:t*1e3,zone:Qr(r.zone,rn.defaultZone),loc:jt.fromObject(r)});throw new Vn("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const s=Qr(r.zone,rn.defaultZone);if(!s.isValid)return Xe.invalid(Mo(s));const l=jt.fromObject(r),c=$c(t,eb),{minDaysInFirstWeek:d,startOfWeek:p}=U0(c,l),m=rn.now(),g=Ze(r.specificOffset)?s.offset(m):r.specificOffset,b=!Ze(c.ordinal),w=!Ze(c.year),k=!Ze(c.month)||!Ze(c.day),E=w||k,D=c.weekYear||c.weekNumber;if((E||b)&&D)throw new gs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(k&&b)throw new gs("Can't mix ordinal dates with month/day");const F=D||c.weekday&&!E;let U,te,ee=gc(m,g);F?(U=$O,te=BO,ee=Bc(ee,d,p)):b?(U=UO,te=IO,ee=If(ee)):(U=Oc,te=Fw);let L=!1;for(const ye of U){const Ie=c[ye];Ze(Ie)?L?c[ye]=te[ye]:c[ye]=ee[ye]:L=!0}const G=F?gN(c,d,p):b?yN(c):bw(c),ge=G||ww(c);if(ge)return Xe.invalid(ge);const Se=F?I0(c,d,p):b?$0(c):c,[B,pe]=Nc(Se,g,s),oe=new Xe({ts:B,zone:s,o:pe,loc:l});return c.weekday&&E&&t.weekday!==oe.weekday?Xe.invalid("mismatched weekday",`you can't specify both a weekday of ${c.weekday} and a date of ${oe.toISO()}`):oe.isValid?oe:Xe.invalid(oe.invalid)}static fromISO(t,r={}){const[s,l]=lO(t);return hs(s,l,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[s,l]=cO(t);return hs(s,l,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[s,l]=uO(t);return hs(s,l,r,"HTTP",r)}static fromFormat(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormat requires an input string and a format");const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0}),[p,m,g,b]=LO(d,t,r);return b?Xe.invalid(b):hs(p,m,s,`format ${r}`,t,g)}static fromString(t,r,s={}){return Xe.fromFormat(t,r,s)}static fromSQL(t,r={}){const[s,l]=yO(t);return hs(s,l,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new Vn("need to specify a reason the DateTime is invalid");const s=t instanceof Ba?t:new Ba(t,r);if(rn.throwOnInvalid)throw new YT(s);return new Xe({invalid:s})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}static parseFormatForOpts(t,r={}){const s=Yw(t,jt.fromObject(r));return s?s.map(l=>l?l.val:null).join(""):null}static expandFormat(t,r={}){return Vw(Gn.parseFormat(t),jt.fromObject(r)).map(l=>l.val).join("")}static resetCache(){Ro=void 0,Ch.clear()}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Hf(this).weekYear:NaN}get weekNumber(){return this.isValid?Hf(this).weekNumber:NaN}get weekday(){return this.isValid?Hf(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Vf(this).weekday:NaN}get localWeekNumber(){return this.isValid?Vf(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Vf(this).weekYear:NaN}get ordinal(){return this.isValid?If(this.c).ordinal:NaN}get monthShort(){return this.isValid?Do.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Do.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Do.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Do.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const t=864e5,r=6e4,s=Kc(this.c),l=this.zone.offset(s-t),c=this.zone.offset(s+t),d=this.zone.offset(s-l*r),p=this.zone.offset(s-c*r);if(d===p)return[this];const m=s-d*r,g=s-p*r,b=gc(m,d),w=gc(g,p);return b.hour===w.hour&&b.minute===w.minute&&b.second===w.second&&b.millisecond===w.millisecond?[xi(this,{ts:m}),xi(this,{ts:g})]:[this]}get isInLeapYear(){return Po(this.year)}get daysInMonth(){return Ic(this.year,this.month)}get daysInYear(){return this.isValid?vs(this.year):NaN}get weeksInWeekYear(){return this.isValid?Vo(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?Vo(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:s,calendar:l}=Gn.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:s,outputCalendar:l}}toUTC(t=0,r={}){return this.setZone(qn.instance(t),r)}toLocal(){return this.setZone(rn.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:s=!1}={}){if(t=Qr(t,rn.defaultZone),t.equals(this.zone))return this;if(t.isValid){let l=this.ts;if(r||s){const c=t.offset(this.ts),d=this.toObject();[l]=Nc(d,c,t)}return xi(this,{ts:l,zone:t})}else return Xe.invalid(Mo(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:s}={}){const l=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:s});return xi(this,{loc:l})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=$c(t,eb),{minDaysInFirstWeek:s,startOfWeek:l}=U0(r,this.loc),c=!Ze(r.weekYear)||!Ze(r.weekNumber)||!Ze(r.weekday),d=!Ze(r.ordinal),p=!Ze(r.year),m=!Ze(r.month)||!Ze(r.day),g=p||m,b=r.weekYear||r.weekNumber;if((g||d)&&b)throw new gs("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(m&&d)throw new gs("Can't mix ordinal dates with month/day");let w;c?w=I0({...Bc(this.c,s,l),...r},s,l):Ze(r.ordinal)?(w={...this.toObject(),...r},Ze(r.day)&&(w.day=Math.min(Ic(w.year,w.month),w.day))):w=$0({...If(this.c),...r});const[k,E]=Nc(w,this.o,this.zone);return xi(this,{ts:k,o:E})}plus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t);return xi(this,W0(this,r))}minus(t){if(!this.isValid)return this;const r=yt.fromDurationLike(t).negate();return xi(this,W0(this,r))}startOf(t,{useLocaleWeeks:r=!1}={}){if(!this.isValid)return this;const s={},l=yt.normalizeUnit(t);switch(l){case"years":s.month=1;case"quarters":case"months":s.day=1;case"weeks":case"days":s.hour=0;case"hours":s.minute=0;case"minutes":s.second=0;case"seconds":s.millisecond=0;break}if(l==="weeks")if(r){const c=this.loc.getStartOfWeek(),{weekday:d}=this;d<c&&(s.weekNumber=this.weekNumber-1),s.weekday=c}else s.weekday=1;if(l==="quarters"){const c=Math.ceil(this.month/3);s.month=(c-1)*3+1}return this.set(s)}endOf(t,r){return this.isValid?this.plus({[t]:1}).startOf(t,r).minus(1):this}toFormat(t,r={}){return this.isValid?Gn.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):Uf}toLocaleString(t=Lc,r={}){return this.isValid?Gn.create(this.loc.clone(r),t).formatDateTime(this):Uf}toLocaleParts(t={}){return this.isValid?Gn.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO({format:t="extended",suppressSeconds:r=!1,suppressMilliseconds:s=!1,includeOffset:l=!0,extendedZone:c=!1,precision:d="milliseconds"}={}){if(!this.isValid)return null;d=jc(d);const p=t==="extended";let m=Gf(this,p,d);return Oc.indexOf(d)>=3&&(m+="T"),m+=J0(this,p,r,s,l,c,d),m}toISODate({format:t="extended",precision:r="day"}={}){return this.isValid?Gf(this,t==="extended",jc(r)):null}toISOWeekDate(){return yc(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:s=!0,includePrefix:l=!1,extendedZone:c=!1,format:d="extended",precision:p="milliseconds"}={}){return this.isValid?(p=jc(p),(l&&Oc.indexOf(p)>=3?"T":"")+J0(this,d==="extended",r,t,s,c,p)):null}toRFC2822(){return yc(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yc(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Gf(this,!0):null}toSQLTime({includeOffset:t=!0,includeZone:r=!1,includeOffsetSpace:s=!0}={}){let l="HH:mm:ss.SSS";return(r||t)&&(s&&(l+=" "),r?l+="z":t&&(l+="ZZ")),yc(this,l,!0)}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():Uf}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",s={}){if(!this.isValid||!t.isValid)return yt.invalid("created by diffing an invalid DateTime");const l={locale:this.locale,numberingSystem:this.numberingSystem,...s},c=wN(r).map(yt.normalizeUnit),d=t.valueOf()>this.valueOf(),p=d?this:t,m=d?t:this,g=kO(p,m,c,l);return d?g.negate():g}diffNow(t="milliseconds",r={}){return this.diff(Xe.now(),t,r)}until(t){return this.isValid?an.fromDateTimes(this,t):this}hasSame(t,r,s){if(!this.isValid)return!1;const l=t.valueOf(),c=this.setZone(t.zone,{keepLocalTime:!0});return c.startOf(r,s)<=l&&l<=c.endOf(r,s)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||Xe.fromObject({},{zone:this.zone}),s=t.padding?this<r?-t.padding:t.padding:0;let l=["years","months","days","hours","minutes","seconds"],c=t.unit;return Array.isArray(t.unit)&&(l=t.unit,c=void 0),nb(r,this.plus(s),{...t,numeric:"always",units:l,unit:c})}toRelativeCalendar(t={}){return this.isValid?nb(t.base||Xe.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(Xe.isDateTime))throw new Vn("min requires all arguments be DateTimes");return H0(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(Xe.isDateTime))throw new Vn("max requires all arguments be DateTimes");return H0(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,s={}){const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});return qw(d,t,r)}static fromStringExplain(t,r,s={}){return Xe.fromFormatExplain(t,r,s)}static buildFormatParser(t,r={}){const{locale:s=null,numberingSystem:l=null}=r,c=jt.fromOpts({locale:s,numberingSystem:l,defaultToEN:!0});return new Gw(c,t)}static fromFormatParser(t,r,s={}){if(Ze(t)||Ze(r))throw new Vn("fromFormatParser requires an input string and a format parser");const{locale:l=null,numberingSystem:c=null}=s,d=jt.fromOpts({locale:l,numberingSystem:c,defaultToEN:!0});if(!d.equals(r.locale))throw new Vn(`fromFormatParser called with a locale of ${d}, but the format parser was created for ${r.locale}`);const{result:p,zone:m,specificOffset:g,invalidReason:b}=r.explainFromTokens(t);return b?Xe.invalid(b):hs(p,m,s,`format ${r.format}`,t,g)}static get DATE_SHORT(){return Lc}static get DATE_MED(){return F1}static get DATE_MED_WITH_WEEKDAY(){return ZT}static get DATE_FULL(){return Z1}static get DATE_HUGE(){return X1}static get TIME_SIMPLE(){return K1}static get TIME_WITH_SECONDS(){return Q1}static get TIME_WITH_SHORT_OFFSET(){return W1}static get TIME_WITH_LONG_OFFSET(){return J1}static get TIME_24_SIMPLE(){return ew}static get TIME_24_WITH_SECONDS(){return tw}static get TIME_24_WITH_SHORT_OFFSET(){return nw}static get TIME_24_WITH_LONG_OFFSET(){return aw}static get DATETIME_SHORT(){return rw}static get DATETIME_SHORT_WITH_SECONDS(){return iw}static get DATETIME_MED(){return sw}static get DATETIME_MED_WITH_SECONDS(){return ow}static get DATETIME_MED_WITH_WEEKDAY(){return XT}static get DATETIME_FULL(){return lw}static get DATETIME_FULL_WITH_SECONDS(){return cw}static get DATETIME_HUGE(){return uw}static get DATETIME_HUGE_WITH_SECONDS(){return dw}}function Oo(a){if(Xe.isDateTime(a))return a;if(a&&a.valueOf&&ei(a.valueOf()))return Xe.fromJSDate(a);if(a&&typeof a=="object")return Xe.fromObject(a);throw new Vn(`Unknown datetime argument: ${a}, of type ${typeof a}`)}const VO="3.7.2",GO=Object.freeze(Object.defineProperty({__proto__:null,DateTime:Xe,Duration:yt,FixedOffsetZone:qn,IANAZone:Ka,Info:Do,Interval:an,InvalidZone:pw,Settings:rn,SystemZone:Yo,VERSION:VO,Zone:As},Symbol.toStringTag,{value:"Module"}));window.Rete=L2;window.React=o2;window.RefComponent=Gh;window.luxon=GO;window.nodeRegistry=Nn;window.sockets=j1;window.socket=ve;window.apiUrl=xn;window.getApiBase=Pc;window.apiFetch=async function(a,t={}){const r=xn(a);return fetch(r,t)};let ti={isLoading:!1,progress:0,status:"Ready",loadedCount:0,totalCount:0,failedPlugins:[],error:null};const Th=new Set;function Zw(a){return Th.add(a),a({...ti}),()=>Th.delete(a)}function Zr(a){ti={...ti,...a},Th.forEach(t=>t({...ti}))}function qO(){return{...ti}}async function YO(){Zr({isLoading:!0,progress:0,status:"Fetching plugin list...",error:null,failedPlugins:[]});try{const a=await fetch(xn("/api/plugins"));if(!a.ok)throw new Error("Failed to fetch plugin list");const t=await a.json(),r=t.length,s=t.filter(m=>m.includes("/00_")),l=t.filter(m=>!m.includes("/00_"));Zr({totalCount:r,status:`Loading ${s.length} infrastructure + ${l.length} node plugins...`});let c=0;for(const m of s){const g=m.split("/").pop().replace(".js","");Zr({status:`Loading ${g}...`});try{await rb(xn(m)),c++,Zr({loadedCount:c,progress:Math.round(c/r*100)})}catch(b){console.error(`[PluginLoader] Failed to load infrastructure ${m}`,b),ti.failedPlugins.push({name:g,error:b.message})}}Zr({status:`Loading ${l.length} node plugins in parallel...`});const d=await Promise.allSettled(l.map(async m=>{const g=m.split("/").pop().replace(".js","");try{return await rb(xn(m)),c++,Zr({loadedCount:c,progress:Math.round(c/r*100)}),{success:!0,name:g}}catch(b){return console.error(`[PluginLoader] Failed to load ${m}`,b),ti.failedPlugins.push({name:g,error:b.message}),{success:!1,name:g,error:b.message}}})),p=ti.failedPlugins.length;Zr({isLoading:!1,progress:100,status:p>0?`Loaded ${c} plugins (${p} failed)`:`Loaded ${c} plugins`})}catch(a){console.error("[PluginLoader] Error loading plugins:",a),Zr({isLoading:!1,error:a.message,status:"Failed to load plugins"})}}function rb(a){return new Promise((t,r)=>{const s=document.createElement("script"),l=`v=${Date.now()}`;s.src=a.includes("?")?`${a}&${l}`:`${a}?${l}`,s.onload=t,s.onerror=r,document.body.appendChild(s)})}const Xw=x.createContext(null),ib={success:{icon:"",className:"toast-success"},error:{icon:"",className:"toast-error"},warning:{icon:"",className:"toast-warning"},info:{icon:"",className:"toast-info"}};function PO({id:a,type:t,message:r,duration:s,onRemove:l,action:c,actionLabel:d}){const[p,m]=x.useState(!1),g=ib[t]||ib.info;x.useEffect(()=>{if(s>0){const k=setTimeout(()=>{m(!0),setTimeout(()=>l(a),300)},s);return()=>clearTimeout(k)}},[a,s,l]);const b=()=>{m(!0),setTimeout(()=>l(a),300)},w=()=>{c&&c(),b()};return h.jsxs("div",{className:`toast ${g.className} ${p?"toast-exit":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.icon}),h.jsx("span",{className:"toast-message",children:r}),c&&d&&h.jsx("button",{className:"toast-action",onClick:w,children:d}),h.jsx("button",{className:"toast-close",onClick:b,children:""})]})}function FO({children:a}){const[t,r]=x.useState([]);let s=0;const l=x.useCallback((p,m,g={})=>{const b=++s,w=typeof g=="number"?g:g.duration??4e3,k=typeof g=="object"?g.action:null,E=typeof g=="object"?g.actionLabel:null;return r(D=>[...D,{id:b,type:p,message:m,duration:w,action:k,actionLabel:E}]),b},[]),c=x.useCallback(p=>{r(m=>m.filter(g=>g.id!==p))},[]),d={success:(p,m)=>l("success",p,m),error:(p,m)=>l("error",p,typeof m=="number"?m:{duration:6e3,...m}),warning:(p,m)=>l("warning",p,m),info:(p,m)=>l("info",p,m),dismiss:c,dismissAll:()=>r([])};return h.jsxs(Xw.Provider,{value:d,children:[a,h.jsx("div",{className:"toast-container",children:t.map(p=>h.jsx(PO,{id:p.id,type:p.type,message:p.message,duration:p.duration,onRemove:c,action:p.action,actionLabel:p.actionLabel},p.id))})]})}function ip(){const a=x.useContext(Xw);return a||{success:()=>{},error:()=>{},warning:()=>{},info:()=>{},dismiss:()=>{},dismissAll:()=>{}}}function ZO(){const a=ip();return x.useEffect(()=>(typeof window<"u"&&(window.T2Toast=a),()=>{typeof window<"u"&&(window.T2Toast=null)}),[a]),null}typeof window<"u"&&(window.T2Toast=null);const sb=window.location.pathname.includes("/api/hassio/ingress/");function XO({onSave:a,onLoad:t,onLoadExample:r,onClear:s,onExport:l,onImport:c,hasUnsavedChanges:d,isMerged:p=!1,onToggleMerged:m}){const[g,b]=x.useState(!1),[w,k]=x.useState(!1),[E,D]=x.useState(!1),[F,U]=x.useState([]),[te,ee]=x.useState(!1),[L,G]=x.useState(!1),[ge,Se]=x.useState(!1),[B,pe]=x.useState(null),oe=ip(),[ye,Ie]=x.useState(()=>{const A=localStorage.getItem("dock-position");return A?JSON.parse(A):{x:20,y:20}}),[De,et]=x.useState(!1),[nt,Ke]=x.useState({x:0,y:0}),[q,he]=x.useState(!0),[me,Me]=x.useState(!0),[J,v]=x.useState(!1),[T,_]=x.useState(new Date),[M,Q]=x.useState({backend:ve.connected,ha:{connected:!1,wsConnected:!1,deviceCount:0},hue:{connected:!1,deviceCount:0},kasa:{connected:!1,deviceCount:0}}),[fe,xe]=x.useState({loaded:0,failed:0,total:0}),[$e,Fe]=x.useState({running:!1,nodeCount:0,tickCount:0,registeredNodeTypes:0});let Rt;const qt=x.useRef(null),At=x.useRef(null);x.useEffect(()=>{(async()=>{try{const K=await fetch("/api/version");if(K.ok){const ne=await K.json();pe(ne.version)}}catch{}})()},[]),x.useEffect(()=>{Rt=Zw(K=>{let ne=0,Y=K.totalCount||0;window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(ne=window.nodeRegistry.getAll().length,(!Y||ne>Y)&&(Y=ne)):ne=K.loadedCount,xe({loaded:ne,failed:K.failedPlugins?.length||0,total:Y})});const A=K=>{K.target.tagName==="INPUT"||K.target.tagName==="TEXTAREA"||K.target.isContentEditable||(K.key==="?"||K.shiftKey&&K.code==="Slash")&&(K.preventDefault(),k(!0))};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[]),x.useEffect(()=>{const A=()=>{Q(Ee=>({...Ee,backend:!0})),ve.emit("request-hue-status")},K=()=>Q(Ee=>({...Ee,backend:!1})),ne=Ee=>Q(Ue=>({...Ue,ha:{connected:Ee.connected,wsConnected:Ee.wsConnected,deviceCount:Ee.deviceCount||0}})),Y=Ee=>{Ee.hue&&Q(Ue=>({...Ue,hue:Ee.hue})),Ee.kasa&&Q(Ue=>({...Ue,kasa:Ee.kasa}))},C=Ee=>{Q(Ue=>({...Ue,hue:{connected:Ee.connected,deviceCount:Ee.deviceCount||0,bridgeIp:Ee.bridgeIp||null}}))};ve.on("connect",A),ve.on("disconnect",K),ve.on("ha-connection-status",ne),ve.on("device-counts",Y),ve.on("hue-connection-status",C);const H=Ee=>Fe(Ee),ue=Ee=>Fe(Ue=>({...Ue,...Ee,running:!0})),ce=Ee=>Fe(Ue=>({...Ue,...Ee,running:!1}));ve.on("engine-status",H),ve.on("engine-started",ue),ve.on("engine-stopped",ce),Q(Ee=>({...Ee,backend:ve.connected})),ve.connected&&(ve.emit("request-hue-status"),ve.emit("request-engine-status"));const Te=qO();let be=0,je=Te.totalCount||0;return window.nodeRegistry&&typeof window.nodeRegistry.getAll=="function"?(be=window.nodeRegistry.getAll().length,(!je||be>je)&&(je=be)):be=Te.loadedCount,xe({loaded:be,failed:Te.failedPlugins?.length||0,total:je}),()=>{ve.off("connect",A),ve.off("disconnect",K),ve.off("ha-connection-status",ne),ve.off("device-counts",Y),ve.off("hue-connection-status",C),ve.off("engine-status",H),ve.off("engine-started",ue),ve.off("engine-stopped",ce),Rt&&Rt()}},[]),x.useEffect(()=>{const A=setInterval(()=>{_(new Date)},1e3);return()=>clearInterval(A)},[]);const Wt=()=>{const A={weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"};return T.toLocaleDateString("en-US",A)};x.useEffect(()=>{localStorage.setItem("dock-position",JSON.stringify(ye))},[ye]);const lt=A=>{p||A.target.closest(".dock-header")&&(et(!0),Ke({x:A.clientX-ye.x,y:A.clientY-ye.y}))},$t=A=>{De&&Ie({x:A.clientX-nt.x,y:A.clientY-nt.y})},wn=()=>{et(!1)};x.useEffect(()=>{if(De)return window.addEventListener("mousemove",$t),window.addEventListener("mouseup",wn),()=>{window.removeEventListener("mousemove",$t),window.removeEventListener("mouseup",wn)}},[De,nt]);const jn=()=>{At.current?.click()},Qe=A=>{const K=A.target.files?.[0];if(K){const ne=new FileReader;ne.onload=Y=>{try{const C=JSON.parse(Y.target.result);c(C)}catch(C){console.error("Failed to parse JSON:",C),alert("Invalid JSON file")}},ne.readAsText(K)}A.target.value=""},xt=async()=>{D(!0),ee(!0);try{const A=await fn("/api/engine/graphs");if(A.ok){const K=await A.json();U(K.graphs||[])}else oe.error("Failed to load graphs list"),U([])}catch(A){console.error("Failed to fetch server graphs:",A),oe.error("Failed to connect to server"),U([])}finally{ee(!1)}},sn=async A=>{try{const K=await fn(`/api/engine/graphs/${encodeURIComponent(A)}`);if(K.ok){const ne=await K.json();ne.graph&&(c(ne.graph),D(!1),oe.success(`Loaded: ${A.replace(".json","")}`))}else oe.error("Failed to load graph")}catch(K){console.error("Failed to load graph:",K),oe.error("Failed to load graph")}},An=async(A,K)=>{K.stopPropagation();try{const ne=await fn(`/api/engine/graphs/${encodeURIComponent(A)}`);if(ne.ok){const Y=await ne.json();if(Y.graph){const C=new Blob([JSON.stringify(Y.graph,null,2)],{type:"application/json"}),H=URL.createObjectURL(C),ue=document.createElement("a");ue.href=H,ue.download=A.endsWith(".json")?A:`${A}.json`,ue.click(),URL.revokeObjectURL(H),oe.success(`Downloaded: ${A.replace(".json","")}`)}}else oe.error("Failed to download graph")}catch(ne){console.error("Failed to download graph:",ne),oe.error("Failed to download graph")}},Z=async()=>{if(!L){G(!0);try{const A=await fn("/api/update/check?force=true");if(!A.ok){const ne=await A.text();throw new Error(ne||`HTTP ${A.status}`)}const K=await A.json();if(K.isAddon){K.hasUpdate?oe.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron",{duration:6e3}):oe.success(` You're up to date! (v${K.currentVersion})`,4e3);return}K.hasUpdate?oe.info(` Update available: ${K.currentVersion}  ${K.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>{ve.emit("request-show-update-modal",K),window.dispatchEvent(new CustomEvent("showUpdateModal",{detail:K}))}}):oe.success(` You're up to date! (v${K.currentVersion})`,4e3)}catch(A){console.error("Failed to check for updates:",A),oe.error("Failed to check for updates: "+A.message,5e3)}finally{G(!1)}}},ie=async()=>{if(!ge){Se(!0);try{const A=await fn("/api/update/plugins/check");if(!A.ok)throw new Error(`HTTP ${A.status}`);const K=await A.json();if(!K.hasUpdates){oe.success(" Plugins are up to date!",3e3);return}const ne=(K.newPlugins?.length||0)+(K.modifiedPlugins?.length||0);oe.info(` ${ne} plugin update(s) available. Downloading...`,3e3);const Y=await fn("/api/update/plugins",{method:"POST"});if(!Y.ok)throw new Error(`HTTP ${Y.status}`);const C=await Y.json();C.success&&C.updated?.length>0?oe.success(` Updated ${C.updated.length} plugin(s). Refresh page to load them.`,{duration:0,actionLabel:"Refresh Now",action:()=>window.location.reload()}):C.updated?.length===0?oe.info("No plugins needed updating",3e3):oe.error("Plugin update failed: "+(C.error||"Unknown error"),5e3)}catch(A){console.error("Failed to update plugins:",A),oe.error("Failed to update plugins: "+A.message,5e3)}finally{Se(!1)}}};return h.jsxs("div",{ref:qt,className:`dock-container ${p?"dock-merged":""}`,style:{...p?{cursor:"default"}:{left:`${ye.x}px`,top:`${ye.y}px`,cursor:De?"grabbing":"default"}},onMouseDown:lt,children:[h.jsxs("div",{className:"dock-header",style:{cursor:p?"default":"grab"},children:[h.jsxs("div",{className:"dock-header-row",children:[h.jsx("span",{className:"dock-title",children:" Control Panel"}),h.jsx("button",{type:"button",className:"dock-btn-small",onClick:A=>{A.stopPropagation(),m?.()},onMouseDown:A=>A.stopPropagation(),title:p?"Pop Control Panel back out":"Merge Control Panel into the Forecast panel",children:p?"Pop out":"Merge"})]}),h.jsx("span",{className:"dock-datetime",children:Wt()})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>he(!q),children:h.jsxs("span",{children:[q?"":""," Graph Tools ",d&&h.jsx("span",{className:"unsaved-dot",title:"Unsaved changes",children:""})]})}),q&&h.jsxs("div",{className:"dock-section-content",children:[h.jsxs("button",{onClick:a,className:`dock-btn ${d?"dock-btn-unsaved":""}`,children:[" Save ",d&&"*"]}),h.jsx("button",{onClick:t,className:"dock-btn",children:" Load Last"}),h.jsx("button",{onClick:xt,className:"dock-btn",title:"Load a saved graph from the server",children:" Saved Graphs"}),h.jsx("button",{onClick:r,className:"dock-btn",title:"Load a starter graph to see how things work",children:" Load Example"}),h.jsx("button",{onClick:jn,className:"dock-btn",children:" Import File"}),h.jsx("button",{onClick:l,className:"dock-btn",title:"Download current graph as JSON file to your computer",children:" Download Graph"}),h.jsx("button",{onClick:s,className:"dock-btn",children:" Clear"}),h.jsx("button",{onClick:()=>ve.emit($e.running?"stop-engine":"start-engine"),className:`dock-btn ${$e.running?"dock-btn-active":""}`,title:$e.running?"Stop backend engine":"Start backend engine (runs automations 24/7)",children:$e.running?" Stop Engine":" Start Engine"}),h.jsx("input",{ref:At,type:"file",accept:".json",style:{display:"none"},onChange:Qe})]})]}),h.jsxs("div",{className:"dock-section",children:[h.jsx("div",{className:"dock-section-header",onClick:()=>Me(!me),children:h.jsxs("span",{children:[me?"":""," Connection Status"]})}),me&&h.jsxs("div",{className:"dock-section-content dock-status-grid",children:[h.jsxs("div",{className:`dock-status-item ${M.backend?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Backend"}),h.jsx("span",{className:"dock-status-value",children:M.backend?"Connected":"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${M.ha.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Home Assistant"}),h.jsx("span",{className:"dock-status-value",children:M.ha.connected?`${M.ha.deviceCount} devices`:"Offline"})]}),h.jsxs("div",{className:`dock-status-item ${M.hue.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Philips Hue"}),h.jsx("span",{className:"dock-status-value",children:M.hue.connected?`${M.hue.deviceCount||0} lights${M.hue.bridgeIp?` (${M.hue.bridgeIp})`:""}`:"Offline"})]}),M.kasa.deviceCount>0&&h.jsxs("div",{className:`dock-status-item ${M.kasa.connected?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot"}),h.jsx("span",{className:"dock-status-label",children:"Kasa"}),h.jsxs("span",{className:"dock-status-value",children:[M.kasa.deviceCount," devices"]})]}),h.jsxs("div",{className:"dock-status-item plugins",children:[h.jsx("span",{className:"dock-status-dot",style:{background:fe.failed>0?"#f59e0b":"#10b981"}}),h.jsx("span",{className:"dock-status-label",children:"Plugins"}),h.jsx("span",{className:"dock-status-value",children:fe.total>0?`${fe.loaded} / ${fe.total} loaded${fe.failed>0?` (${fe.failed} failed)`:""}`:`${fe.loaded} loaded`})]}),h.jsxs("div",{className:`dock-status-item ${$e.running?"connected":"disconnected"}`,children:[h.jsx("span",{className:"dock-status-dot",style:{background:$e.running?"#10b981":"#6b7280"}}),h.jsx("span",{className:"dock-status-label",children:"Engine"}),h.jsx("span",{className:"dock-status-value",children:$e.running?`Running (${$e.nodeCount} nodes)`:"Stopped"})]})]})]}),h.jsx(PC,{isExpanded:J,onToggle:()=>v(!J)}),h.jsxs("div",{className:"dock-section",children:[h.jsxs("div",{className:"dock-section-content",children:[h.jsx("button",{onClick:()=>b(!0),className:"dock-btn dock-btn-settings",children:" Settings & API Keys"}),h.jsx("button",{onClick:()=>k(!0),className:"dock-btn dock-btn-help",children:" Keyboard Shortcuts"}),h.jsx("button",{onClick:async()=>{let A=B||"unknown";try{const C=await fetch("/api/version");C.ok&&(A=(await C.json()).version||A)}catch{}const K={version:A,userAgent:navigator.userAgent,isAddon:sb,backend:M.backend,ha:M.ha.connected,engine:$e.running,plugins:fe.loaded},ne=Object.entries(K).map(([C,H])=>`- **${C}**: ${H}`).join(`
`),Y=new URL("https://github.com/gregtee2/T2AutoTron/issues/new");Y.searchParams.set("template","bug_report.md"),Y.searchParams.set("title","[Bug]: "),Y.searchParams.set("body",`##  Environment (auto-filled)
${ne}

##  Bug Description
<!-- Describe what went wrong -->

`),window.open(Y.toString(),"_blank")},className:"dock-btn dock-btn-bug",title:"Report a bug on GitHub",children:" Report Bug"}),h.jsx("button",{onClick:()=>{const A=`${window.location.origin}/tools/debug_dashboard.html`;window.open(A,"_blank")},className:"dock-btn",title:"Open Debug Dashboard in new tab",children:" Debug Dashboard"}),sb?h.jsx("button",{onClick:()=>oe.info(" Add-on updates are available through Home Assistant  Settings  Add-ons  T2AutoTron  Update",{duration:8e3}),className:"dock-btn dock-btn-update",title:"Updates are managed by Home Assistant Supervisor",children:" Update via HA"}):h.jsx("button",{onClick:Z,disabled:L,className:"dock-btn dock-btn-update",title:"Check for available updates (full rebuild)",children:L?" Checking...":" Check for Updates"}),h.jsx("button",{onClick:ie,disabled:ge,className:"dock-btn dock-btn-plugins",title:"Hot-update plugins without restart",children:ge?" Updating...":" Update Plugins"})]}),B&&h.jsxs("div",{className:"dock-version",title:"T2AutoTron version",children:["v",B]})]}),h.jsx(GC,{isOpen:g,onClose:()=>b(!1)}),h.jsx(YC,{isOpen:w,onClose:()=>k(!1)}),E&&h.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:h.jsxs("div",{className:"modal server-graphs-modal",onClick:A=>A.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h2",{children:" Saved Graphs"}),h.jsx("button",{className:"modal-close",onClick:()=>D(!1),children:""})]}),h.jsx("div",{className:"modal-body",children:te?h.jsx("div",{className:"loading-message",children:"Loading graphs..."}):F.length===0?h.jsxs("div",{className:"empty-message",children:[h.jsx("p",{children:"No saved graphs found."}),h.jsx("p",{style:{fontSize:"0.9em",opacity:.7},children:'Create a graph and click "Save" to save it to the server.'})]}):h.jsx("div",{className:"graphs-list",children:F.map((A,K)=>h.jsxs("div",{className:"graph-item",children:[h.jsxs("div",{className:"graph-info",onClick:()=>sn(A.name),title:"Click to load this graph",children:[h.jsx("span",{className:"graph-name",children:A.displayName}),h.jsx("span",{className:"graph-date",children:new Date(A.modified).toLocaleDateString()})]}),h.jsx("button",{className:"graph-download-btn",onClick:ne=>An(A.name,ne),title:"Download this graph to your computer",children:""})]},K))})})]})})]})}function KO({dockSlotRef:a}){const[t,r]=x.useState(!0),[s,l]=x.useState(!0),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,b]=x.useState(ve?.connected??!1),[w,k]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[E,D]=x.useState(new Map),[F,U]=x.useState(()=>parseInt(localStorage.getItem("forecastPanelWidth"))||320),[te,ee]=x.useState(()=>parseInt(localStorage.getItem("devicesOnHeight"))||200),[L,G]=x.useState(null),[ge,Se]=x.useState(null),[B,pe]=x.useState(null),[oe,ye]=x.useState(!1),Ie=x.useRef(null);x.useEffect(()=>{(async()=>{try{const v=await fn(xn("/api/settings"));if(v.ok){const T=await v.json(),_={tempSensor:T.FORECAST_TEMP_SENSOR||null,windSensor:T.FORECAST_WIND_SENSOR||null,windDirSensor:T.FORECAST_WIND_DIR_SENSOR||null,rainSensor:T.FORECAST_RAIN_SENSOR||null};(_.tempSensor||_.windSensor||_.windDirSensor||_.rainSensor)&&(Se(_),De(_))}}catch(v){console.warn("Could not fetch forecast sensor config:",v)}})()},[]);const De=async J=>{if(!J)return;const v={source:"ha-sensors"};try{if(J.tempSensor){const T=await fn(xn(`/api/lights/ha/${J.tempSensor}/state`));if(T.ok){const _=await T.json();v.temp=parseFloat(_.state)}}if(J.windSensor){const T=await fn(xn(`/api/lights/ha/${J.windSensor}/state`));if(T.ok){const _=await T.json();v.windSpeed=parseFloat(_.state)}}if(J.windDirSensor){const T=await fn(xn(`/api/lights/ha/${J.windDirSensor}/state`));if(T.ok){const _=await T.json();v.windDir=parseFloat(_.state)}}if(J.rainSensor){const T=await fn(xn(`/api/lights/ha/${J.rainSensor}/state`));if(T.ok){const _=await T.json();v.rainRate=parseFloat(_.state)}}v.temp!==void 0&&G(T=>({...T,...v}))}catch(T){console.warn("Error fetching sensor values:",T)}};x.useEffect(()=>{if(!ve)return;const J=()=>{b(!0),ve.emit("request-ha-status")},v=()=>{b(!1),k({connected:!1,wsConnected:!1,deviceCount:0})},T=Q=>{k(Q)};ve.on("connect",J),ve.on("disconnect",v),ve.on("ha-connection-status",T),ve.on("forecast-update",Q=>{d(Q)});const _=Q=>{G(fe=>fe?.source==="ha-sensors"||ge?.tempSensor?fe:{temp:Q.tempf,humidity:Q.humidity,windSpeed:Q.windspeedmph,windDir:Q.winddir,rainRate:Q.hourlyrainin,dailyRain:Q.dailyrainin,source:Q._source||"ambient"})};ve.on("weather-update",_),ge?.tempSensor||ve.emit("request-weather-update");const M=Q=>{const{id:fe,state:xe,on:$e,name:Fe}=Q;if(!fe)return;if(ge){const Wt=fe.replace("ha_","");if(Wt===ge.tempSensor){const lt=parseFloat(xe);isNaN(lt)||G($t=>({...$t,temp:lt,source:"ha-sensors"}))}else if(Wt===ge.windSensor){const lt=parseFloat(xe);isNaN(lt)||G($t=>({...$t,windSpeed:lt}))}else if(Wt===ge.windDirSensor){const lt=parseFloat(xe);isNaN(lt)||G($t=>({...$t,windDir:lt}))}else if(Wt===ge.rainSensor){const lt=parseFloat(xe);isNaN(lt)||G($t=>({...$t,rainRate:lt}))}}const Rt=$e!==void 0?$e:xe==="on"||xe==="playing"||xe==="open",qt=Fe||Q.friendly_name||Q.attributes?.friendly_name||fe.replace("ha_","").replace("kasa_","").replace(/\./g," ").replace(/_/g," ");(fe.includes("light.")||fe.includes("switch.")||fe.startsWith("kasa_"))&&D(Wt=>{const lt=new Map(Wt);return Rt?lt.set(fe,{name:qt,on:!0}):lt.delete(fe),lt})};return ve.on("device-state-update",M),ve.emit("request-forecast"),ve.connected&&(b(!0),ve.emit("request-ha-status")),()=>{ve.off("connect",J),ve.off("disconnect",v),ve.off("ha-connection-status",T),ve.off("forecast-update"),ve.off("weather-update",_),ve.off("device-state-update",M)}},[ge]),x.useEffect(()=>{if(!ve||p===null){pe(null);return}ye(!0);const J=v=>{ye(!1),v.error?(console.warn("Hourly rain fetch error:",v.error),pe(null)):pe(v)};return ve.on("hourly-rain-update",J),ve.emit("request-hourly-rain",{dayOffset:p}),()=>{ve.off("hourly-rain-update",J)}},[p]);const et=()=>{ve?.emit("request-forecast"),ge?.tempSensor?De(ge):ve?.emit("request-weather-update")},nt=J=>{if(J==null)return"";const v=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW"],T=Math.round(J/22.5)%16;return v[T]},Ke=J=>{const v=(J||"").toLowerCase();return v.includes("clear")||v.includes("sun")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#FFD700",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("circle",{cx:"12",cy:"12",r:"5"}),h.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),h.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),h.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),h.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),h.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),h.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}):v.includes("rain")||v.includes("drizzle")||v.includes("shower")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#4facfe",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("line",{x1:"8",y1:"19",x2:"8",y2:"21"}),h.jsx("line",{x1:"8",y1:"13",x2:"8",y2:"15"}),h.jsx("line",{x1:"16",y1:"19",x2:"16",y2:"21"}),h.jsx("line",{x1:"16",y1:"13",x2:"16",y2:"15"}),h.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),h.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"17"})]}):v.includes("partly")||v.includes("partial")||v.includes("few")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M13 2v2",stroke:"#FFD700"}),h.jsx("path",{d:"M3 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M20 13h2",stroke:"#FFD700"}),h.jsx("path",{d:"M5.6 5.6l1.4 1.4",stroke:"#FFD700"}),h.jsx("path",{d:"M18.4 5.6l-1.4 1.4",stroke:"#FFD700"}),h.jsx("circle",{cx:"13",cy:"9",r:"4",stroke:"#FFD700"}),h.jsx("path",{d:"M17 17h-10a4 4 0 0 1 0-8h.5a5.5 5.5 0 0 1 10.5 3h.5a3 3 0 0 1 0 6z",stroke:"#B0C4DE",fill:"none"})]}):v.includes("snow")||v.includes("flurr")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0E0E6",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"8",y1:"16",x2:"8",y2:"16.01"}),h.jsx("line",{x1:"8",y1:"20",x2:"8",y2:"20.01"}),h.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18.01"}),h.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"22.01"}),h.jsx("line",{x1:"16",y1:"16",x2:"16",y2:"16.01"}),h.jsx("line",{x1:"16",y1:"20",x2:"16",y2:"20.01"})]}):v.includes("thunder")||v.includes("storm")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#9370DB",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M19 16.9A5 5 0 0 0 18 7h-1.26a8 8 0 1 0-11.62 9"}),h.jsx("polyline",{points:"13 11 9 17 15 17 11 23",stroke:"#FFD700",fill:"none"})]}):v.includes("fog")||v.includes("mist")||v.includes("haze")?h.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#A9A9A9",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 17.58A5 5 0 0 0 18 8h-1.26A8 8 0 1 0 4 16.25"}),h.jsx("line",{x1:"3",y1:"20",x2:"21",y2:"20"}),h.jsx("line",{x1:"3",y1:"17",x2:"21",y2:"17"})]}):h.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"#B0C4DE",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:h.jsx("path",{d:"M18 10h-1.26A8 8 0 1 0 9 20h9a5 5 0 0 0 0-10z"})})},q=J=>{if(!J)return{day:"",date:""};let v;if(typeof J=="string"&&J.match(/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun)/i)){const M=J.match(/(\w+),\s*(\w+)\s*(\d+)/);return M?{day:`${M[1]}, ${M[2]}`,date:M[3]}:{day:J,date:""}}if(v=new Date(parseInt(J)||J),isNaN(v.getTime()))return{day:J,date:""};const T=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],_=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return{day:`${T[v.getDay()]}, ${_[v.getMonth()]}`,date:`${v.getDate()}`}},he=()=>{if(!c||!c.length)return h.jsx("div",{className:"forecast-empty",children:"No forecast data"});if(p!==null){const J=c[p],v=q(J.date||J.day);return h.jsxs("div",{className:"forecast-detail",children:[h.jsxs("div",{className:"forecast-detail-header",children:[h.jsx("button",{className:"detail-back-btn",onClick:()=>m(null),children:" Back"}),h.jsxs("span",{className:"detail-date",children:[v.day," ",v.date]})]}),h.jsxs("div",{className:"detail-main",children:[h.jsx("div",{className:"detail-icon",children:Ke(J.conditions||J.condition)}),h.jsxs("div",{className:"detail-temps",children:[h.jsxs("div",{className:"detail-high",children:[J.high,""]}),h.jsxs("div",{className:"detail-low",children:[J.low,""]})]}),h.jsx("div",{className:"detail-condition",children:J.conditions||J.condition||"N/A"})]}),J.description&&h.jsx("div",{className:"detail-description",children:J.description}),h.jsxs("div",{className:"detail-stats",children:[h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Precipitation"}),h.jsx("span",{className:"stat-value",children:J.precipitation||J.precip||"0%"})]}),J.humidity&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Humidity"}),h.jsxs("span",{className:"stat-value",children:[J.humidity,"%"]})]}),J.wind&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:"Wind"}),h.jsx("span",{className:"stat-value",children:J.wind})]}),(J.sunrise||J.sunset)&&h.jsxs("div",{className:"detail-sun-times",children:[J.sunrise&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunrise"}),h.jsx("span",{className:"stat-value",children:J.sunrise})]}),J.sunset&&h.jsxs("div",{className:"detail-stat",children:[h.jsx("span",{className:"stat-label",children:" Sunset"}),h.jsx("span",{className:"stat-value",children:J.sunset})]})]})]}),h.jsxs("div",{className:"rain-timeline-section",children:[h.jsx("div",{className:"rain-timeline-header",children:h.jsx("span",{className:"rain-timeline-title",children:" Hourly Rain Forecast"})}),oe?h.jsx("div",{className:"rain-timeline-loading",children:"Loading..."}):B&&B.hours?h.jsxs(h.Fragment,{children:[B.summary&&h.jsx("div",{className:"rain-summary",children:B.summary}),h.jsx("div",{className:"rain-timeline",children:B.hours.map((T,_)=>{const M=Math.max(4,T.probability),Q=T.intensity||"none",fe=T.displayTime||`${T.hour||0}:00`;return h.jsxs("div",{className:`rain-bar-wrapper ${Q!=="none"?"has-rain":""}`,title:`${fe}: ${T.probability}% chance${T.amountIn>0?`, ${T.amountIn}"`:""}`,children:[_%4===0&&T.probability>0&&h.jsxs("span",{className:"rain-prob-label",children:[T.probability,"%"]}),h.jsx("div",{className:`rain-bar rain-${Q}`,style:{height:`${M}%`}}),_%4===0&&h.jsx("span",{className:"rain-hour-label",children:fe})]},_)})}),h.jsxs("div",{className:"rain-legend",children:[h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-none"}),"Dry"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-light"}),"Light"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-moderate"}),"Moderate"]}),h.jsxs("span",{className:"rain-legend-item",children:[h.jsx("span",{className:"legend-dot rain-heavy"}),"Heavy"]})]})]}):h.jsx("div",{className:"rain-timeline-empty",children:"No rain expected"})]})]})}return c.slice(0,5).map((J,v)=>{const T=q(J.date||J.day),_=v===0;return h.jsxs("div",{className:`forecast-card ${_&&L?"forecast-card-today":""}`,onClick:()=>m(v),children:[h.jsxs("div",{className:"forecast-row-top",children:[h.jsxs("div",{className:"forecast-date",children:[h.jsx("span",{className:"date-day",children:T.day}),h.jsx("span",{className:"date-num",children:T.date})]}),h.jsx("div",{className:"forecast-icon",children:Ke(J.conditions||J.condition)})]}),_&&L&&h.jsxs("div",{className:"station-data",children:[h.jsxs("div",{className:"station-current-temp",children:[Math.round(L.temp),"",h.jsx("span",{className:"station-label",children:"now"})]}),h.jsxs("div",{className:"station-details",children:[h.jsxs("span",{className:"station-detail",title:"Wind",children:[" ",Math.round(L.windSpeed||0)," mph ",nt(L.windDir)]}),L.rainRate>0&&h.jsxs("span",{className:"station-detail station-rain",title:"Rain Rate",children:[" ",L.rainRate.toFixed(2),'"/hr']})]})]}),h.jsxs("div",{className:"forecast-row-bottom",children:[h.jsxs("span",{className:"temp-low",children:[J.low,""]}),h.jsxs("span",{className:"temp-high",children:[J.high,""]}),h.jsxs("span",{className:"precip-group",children:[h.jsxs("svg",{className:"precip-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[h.jsx("path",{d:"M20 16.2A4.5 4.5 0 0 0 17.5 8h-1.8A7 7 0 1 0 4 14.9"}),h.jsx("path",{d:"M16 14v4"}),h.jsx("path",{d:"M8 14v4"}),h.jsx("path",{d:"M12 16v4"})]}),h.jsx("span",{className:"precip-value",children:J.precipitation||J.precip||"0%"})]})]})]},v)})},me=J=>{J.preventDefault();const v=J.clientX,T=F,_=Q=>{const fe=v-Q.clientX,xe=Math.max(250,Math.min(500,T+fe));U(xe),localStorage.setItem("forecastPanelWidth",xe)},M=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",M)},Me=J=>{J.preventDefault(),J.stopPropagation();const v=J.clientY,T=te,_=Q=>{const fe=v-Q.clientY,xe=Math.max(100,Math.min(500,T+fe));ee(xe),localStorage.setItem("devicesOnHeight",xe)},M=()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",M)};return h.jsxs("div",{className:"forecast-panel",style:{width:F},children:[h.jsx("div",{className:"forecast-resize-handle",ref:Ie,onMouseDown:me,children:h.jsx("div",{className:"forecast-resize-grip"})}),h.jsxs("div",{className:"forecast-panel-header",onClick:()=>r(!t),children:[h.jsx("span",{children:"5-Day Forecast"}),h.jsx("button",{onClick:J=>{J.stopPropagation(),et()},className:"forecast-refresh-btn",children:"Refresh"})]}),t&&h.jsx("div",{className:"forecast-panel-content",children:he()}),h.jsx("div",{className:"forecast-dock-slot",ref:a}),h.jsxs("div",{className:"devices-on-section",style:{height:s?te:"auto"},children:[h.jsx("div",{className:"devices-resize-handle",onMouseDown:Me,children:h.jsx("div",{className:"devices-resize-grip"})}),h.jsxs("div",{className:"devices-on-header",onClick:()=>l(!s),children:[h.jsxs("span",{children:["Devices ON (",E.size,")"]}),h.jsx("span",{className:"expand-icon",children:s?"":""})]}),s&&h.jsx("div",{className:"devices-on-list",children:E.size===0?h.jsx("div",{className:"no-devices",children:"All devices off"}):Array.from(E.values()).sort((J,v)=>J.name.localeCompare(v.name)).map((J,v)=>h.jsxs("div",{className:"device-on-item",children:[h.jsx("span",{className:"device-on-indicator"}),h.jsx("span",{className:"device-on-name",children:J.name})]},v))})]}),h.jsxs("div",{className:"status-indicators",children:[h.jsx("div",{className:`connection-status ${g?"connected":"disconnected"}`,children:g?"Backend":"Backend X"}),h.jsx("div",{className:`connection-status ${w.connected?"connected":"disconnected"}`,children:w.connected?`HA (${w.deviceCount})`:"HA X"})]})]})}function QO({width:a=180,panelRef:t,dropActive:r=!1,favoriteGroups:s=[],onAddFavorite:l,onRemoveFavorite:c,onCreateNode:d}){const p=window.T2Controls?.Tooltip,m=`Drag a node onto this panel to add it to Favorites.
Click a favorite to add that node to the canvas.
Right-click a favorite to remove it.`,g=(s||[]).reduce((w,k)=>w+(k?.labels||[]).length,0),b=w=>{const k=(w||"").toString().trim();k&&c?.(k)};return h.jsxs("div",{ref:t,className:`favorites-panel ${r?"drop-active":""}`,style:{width:a},onMouseDown:w=>w.stopPropagation(),children:[h.jsx("div",{className:"favorites-header",children:h.jsxs("div",{className:"favorites-header-row",children:[h.jsx("span",{className:"favorites-title",children:" Favorites"}),p?h.jsx(p,{text:m,position:"bottom",children:h.jsx("span",{className:"favorites-help-fallback",children:"?"})}):h.jsx("span",{className:"favorites-help-fallback",title:m,children:"?"})]})}),h.jsx("div",{className:"favorites-list",children:g===0?h.jsx("div",{className:"favorites-empty",children:"No favorites yet"}):s.map(w=>{const k=(w?.category||"Other").toString(),E=Array.isArray(w?.labels)?w.labels:[];return E.length===0?null:h.jsxs("div",{className:"favorites-group",children:[h.jsx("div",{className:"favorites-divider",children:h.jsx("span",{className:"favorites-divider-text",children:k})}),E.map(D=>h.jsx("button",{type:"button",className:"favorites-item-btn",onClick:()=>d?.(D),onContextMenu:F=>{F.preventDefault(),F.stopPropagation(),b(D)},title:"Click: add to canvas  Right-click: remove",children:D},`${k}:${D}`))]},k)})})]})}function WO({isOpen:a,onClose:t,onSave:r,currentGraphData:s}){const[l,c]=x.useState(""),[d,p]=x.useState([]),[m,g]=x.useState(!1),[b,w]=x.useState(!1),[k,E]=x.useState(null),D=x.useRef(null);x.useEffect(()=>{a&&(F(),setTimeout(()=>D.current?.focus(),100))},[a]);const F=async()=>{g(!0),E(null);try{const G=await(await fetch(xn("/api/engine/graphs"))).json();G.success?p(G.graphs||[]):E("Failed to load existing graphs")}catch(L){console.error("[SaveModal] Error fetching graphs:",L),E("Failed to connect to server")}finally{g(!1)}},U=async()=>{if(!l.trim()){E("Please enter a filename");return}w(!0),E(null);try{const G=await(await fetch(xn("/api/engine/save-graph"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:l.trim(),graph:s})})).json();G.success?(window.T2Toast&&window.T2Toast.success(`Saved as "${G.filename}"`,3e3),r?.(G.filename),t()):E(G.error||"Failed to save graph")}catch(L){console.error("[SaveModal] Error saving:",L),E("Failed to save graph")}finally{w(!1)}},te=L=>{L.key==="Enter"&&!b?U():L.key==="Escape"&&t()},ee=L=>{const G=L.replace(".json","");c(G),D.current?.focus()};return a?h.jsx("div",{className:"save-modal-overlay",onClick:t,children:h.jsxs("div",{className:"save-modal",onClick:L=>L.stopPropagation(),children:[h.jsxs("div",{className:"save-modal-header",children:[h.jsx("h2",{children:" Save Graph"}),h.jsx("button",{className:"save-modal-close",onClick:t,children:""})]}),h.jsxs("div",{className:"save-modal-content",children:[h.jsxs("div",{className:"save-modal-input-section",children:[h.jsx("label",{htmlFor:"graph-filename",children:"Filename:"}),h.jsxs("div",{className:"save-modal-input-row",children:[h.jsx("input",{ref:D,id:"graph-filename",type:"text",value:l,onChange:L=>c(L.target.value),onKeyDown:te,placeholder:"my_automation_graph",disabled:b}),h.jsx("span",{className:"save-modal-extension",children:".json"})]})]}),k&&h.jsxs("div",{className:"save-modal-error",children:[" ",k]}),h.jsxs("div",{className:"save-modal-existing",children:[h.jsxs("h3",{children:["Existing Graphs ",m&&h.jsx("span",{className:"save-modal-loading",children:"loading..."})]}),d.length===0&&!m?h.jsx("p",{className:"save-modal-empty",children:"No saved graphs yet"}):h.jsx("ul",{className:"save-modal-list",children:d.map(L=>h.jsxs("li",{onClick:()=>ee(L.name),className:l===L.displayName?"selected":"",title:`Click to overwrite. Modified: ${new Date(L.modified).toLocaleString()}`,children:[h.jsx("span",{className:"graph-name",children:L.displayName}),h.jsx("span",{className:"graph-date",children:new Date(L.modified).toLocaleDateString()})]},L.name))})]})]}),h.jsxs("div",{className:"save-modal-footer",children:[h.jsx("button",{className:"save-modal-btn save-modal-btn-cancel",onClick:t,disabled:b,children:"Cancel"}),h.jsx("button",{className:"save-modal-btn save-modal-btn-save",onClick:U,disabled:b||!l.trim(),children:b?"Saving...":" Save"})]})]})}):null}function JO({visible:a,position:t,items:r,onClose:s,onSelect:l}){const c=x.useRef(null),d=x.useRef(null),[p,m]=x.useState(null),[g,b]=x.useState({x:0,y:0}),[w,k]=x.useState(""),E=x.useRef(null),D=x.useRef(null);x.useEffect(()=>{a&&(k(""),m(null),setTimeout(()=>{d.current?.focus()},50))},[a]);const F=x.useMemo(()=>{if(!w.trim())return r;const B=w.toLowerCase(),pe=[];for(const oe of r)if(oe.subitems)for(const ye of oe.subitems)ye.label&&ye.label.toLowerCase().includes(B)&&pe.push({...ye,categoryHint:oe.label});else oe.label&&oe.label.toLowerCase().includes(B)&&pe.push(oe);return pe},[r,w]),U=w.trim().length>0;x.useEffect(()=>{if(!a)return;const B=oe=>{c.current&&!c.current.contains(oe.target)&&s()},pe=oe=>{oe.key==="Escape"&&s()};return document.addEventListener("mousedown",B),document.addEventListener("keydown",pe),()=>{document.removeEventListener("mousedown",B),document.removeEventListener("keydown",pe)}},[a,s]),x.useEffect(()=>()=>{E.current&&clearTimeout(E.current),D.current&&clearTimeout(D.current)},[]);const te=x.useCallback((B,pe,oe)=>{D.current&&(clearTimeout(D.current),D.current=null),pe.subitems&&pe.subitems.length>0?m(oe):m(null)},[]),ee=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},150)},[]),L=x.useCallback(()=>{D.current&&(clearTimeout(D.current),D.current=null)},[]),G=x.useCallback(()=>{D.current=setTimeout(()=>{m(null)},100)},[]),ge=x.useCallback(B=>{B.subitems&&B.subitems.length>0||(l(B),s())},[l,s]);if(!a)return null;const Se={...t};if(typeof window<"u"){const pe=Math.min(F.length*36+50,400);t.x+220>window.innerWidth&&(Se.x=window.innerWidth-220-10),t.y+pe>window.innerHeight&&(Se.y=Math.max(10,window.innerHeight-pe-10))}return h.jsxs("div",{ref:c,className:"fast-context-menu",style:{left:Se.x,top:Se.y},children:[h.jsxs("div",{className:"fast-menu-search",children:[h.jsx("input",{ref:d,type:"text",placeholder:"Search nodes...",value:w,onChange:B=>k(B.target.value),onClick:B=>B.stopPropagation(),onKeyDown:B=>{if(B.key==="Enter"&&F.length===1){const pe=F[0];pe.subitems||ge(pe)}B.stopPropagation()}}),w&&h.jsx("span",{className:"search-clear",onClick:B=>{B.stopPropagation(),k(""),d.current?.focus()},children:""})]}),h.jsx("div",{className:"fast-menu-results",children:F.length===0?h.jsx("div",{className:"fast-menu-empty",children:"No nodes found"}):U?F.map((B,pe)=>h.jsxs("div",{className:"fast-menu-item search-result",onClick:()=>ge(B),children:[h.jsx("span",{className:"menu-label",children:B.label}),B.categoryHint&&h.jsx("span",{className:"category-hint",children:B.categoryHint})]},B.label||pe)):F.map((B,pe)=>h.jsxs("div",{className:`fast-menu-item ${B.subitems?"has-submenu":""} ${p===pe?"active":""}`,onMouseEnter:oe=>te(oe,B,pe),onMouseLeave:ee,onClick:()=>ge(B),children:[B.icon&&h.jsx("span",{className:"menu-icon",children:B.icon}),h.jsx("span",{className:"menu-label",children:B.label}),B.subitems&&h.jsx("span",{className:"submenu-arrow",children:""}),p===pe&&B.subitems&&h.jsx("div",{className:"fast-submenu",onMouseEnter:L,onMouseLeave:G,children:B.subitems.map((oe,ye)=>h.jsx("div",{className:"fast-menu-item",title:oe.description||"",onClick:Ie=>{Ie.stopPropagation(),ge(oe)},children:h.jsx("span",{className:"menu-label",children:oe.label})},oe.label||ye))})]},B.label||pe))})]})}function ob(a){const t=[],r=[];if(!a||typeof a!="object")return{valid:!1,errors:["Graph data is not an object"],warnings:[]};if(!Array.isArray(a.nodes))t.push('Missing or invalid "nodes" array');else{const s=new Set;a.nodes.forEach((l,c)=>{l.id?(s.has(l.id)&&t.push(`Duplicate node ID: ${l.id}`),s.add(l.id)):t.push(`Node at index ${c} is missing "id"`),l.label||t.push(`Node ${l.id||c} is missing "label"`),(!l.position||typeof l.position.x!="number"||typeof l.position.y!="number")&&r.push(`Node ${l.id||c} has invalid position`),l.position&&(!Number.isFinite(l.position.x)||!Number.isFinite(l.position.y))&&t.push(`Node ${l.id||c} has NaN or Infinity in position`)})}if(!Array.isArray(a.connections))t.push('Missing or invalid "connections" array');else{const s=new Set(a.nodes?.map(c=>c.id)||[]),l=new Set;a.connections.forEach((c,d)=>{c.source?s.has(c.source)||t.push(`Connection ${d} references non-existent source node: ${c.source}`):t.push(`Connection at index ${d} is missing "source"`),c.target?s.has(c.target)||t.push(`Connection ${d} references non-existent target node: ${c.target}`):t.push(`Connection at index ${d} is missing "target"`),c.sourceOutput||r.push(`Connection ${d} is missing "sourceOutput"`),c.targetInput||r.push(`Connection ${d} is missing "targetInput"`);const p=`${c.source}:${c.sourceOutput}->${c.target}:${c.targetInput}`;l.has(p)&&r.push(`Duplicate connection: ${p}`),l.add(p),c.source===c.target&&r.push(`Self-connection detected on node ${c.source}`)})}return a.viewport&&((typeof a.viewport.k!="number"||a.viewport.k<=0)&&r.push("Invalid viewport zoom value"),(!Number.isFinite(a.viewport.x)||!Number.isFinite(a.viewport.y))&&r.push("Invalid viewport position")),{valid:t.length===0,errors:t,warnings:r}}function lb(a){const t=[];let r=!1;const s=JSON.parse(JSON.stringify(a));Array.isArray(s.nodes)||(s.nodes=[],t.push("Created empty nodes array"),r=!0),Array.isArray(s.connections)||(s.connections=[],t.push("Created empty connections array"),r=!0);const l=new Set,c=new Set;return s.nodes=s.nodes.filter((d,p)=>{if(!d.id)return t.push(`Removed node at index ${p} (missing ID)`),r=!0,!1;if(c.has(d.id)){const m=`${d.id}_${Date.now()}_${p}`;t.push(`Renamed duplicate node ID ${d.id} to ${m}`),d.id=m,r=!0}return c.add(d.id),l.add(d.id),d.label||(d.label="Unknown Node",t.push(`Set label for node ${d.id} to "Unknown Node"`),r=!0),!d.position||typeof d.position!="object"?(d.position={x:0,y:0},t.push(`Reset position for node ${d.id}`),r=!0):(Number.isFinite(d.position.x)||(d.position.x=0,t.push(`Fixed NaN x position for node ${d.id}`),r=!0),Number.isFinite(d.position.y)||(d.position.y=0,t.push(`Fixed NaN y position for node ${d.id}`),r=!0)),!0}),s.connections=s.connections.filter((d,p)=>l.has(d.source)?l.has(d.target)?!0:(t.push(`Removed connection ${p} (invalid target: ${d.target})`),r=!0,!1):(t.push(`Removed connection ${p} (invalid source: ${d.source})`),r=!0,!1)),s.viewport&&(Number.isFinite(s.viewport.x)||(s.viewport.x=0,t.push("Fixed viewport x position"),r=!0),Number.isFinite(s.viewport.y)||(s.viewport.y=0,t.push("Fixed viewport y position"),r=!0),(!Number.isFinite(s.viewport.k)||s.viewport.k<=0)&&(s.viewport.k=1,t.push("Fixed viewport zoom level"),r=!0)),{repaired:r,graphData:s,fixes:t}}class wj extends Kt.Control{constructor(t,r){super(),this.label=t,this.onClick=r}}function ej({data:a}){return h.jsx("button",{onPointerDown:t=>t.stopPropagation(),onDoubleClick:t=>t.stopPropagation(),onClick:a.onClick,style:{width:"100%",padding:"8px",marginBottom:"5px",background:"rgba(0, 243, 255, 0.1)",border:"1px solid rgba(0, 243, 255, 0.4)",color:"#00f3ff",borderRadius:"20px",cursor:"pointer",fontWeight:"600",textTransform:"uppercase",fontSize:"12px",transition:"all 0.2s"},onMouseOver:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.25)",t.currentTarget.style.boxShadow="0 0 12px rgba(0, 243, 255, 0.4)"},onMouseOut:t=>{t.currentTarget.style.background="rgba(0, 243, 255, 0.1)",t.currentTarget.style.boxShadow="none"},children:a.label})}class Sj extends Kt.Control{constructor(t,r,s,l){super(),this.label=t,this.values=r,this.value=s,this.onChange=l}setValue(t){this.value=t}}function tj({data:a}){const[,t]=x.useReducer(d=>d+1,0),[r,s]=x.useState(a.value);x.useEffect(()=>{s(a.value)},[a.value]),x.useEffect(()=>{t()},[a]);const l=d=>{const p=d.target.value;s(p),typeof a.setValue=="function"?a.setValue(p):a.value=p,a.onChange&&a.onChange(p)},c=a.values||[];return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("select",{value:r,onChange:l,onPointerDown:d=>d.stopPropagation(),onDoubleClick:d=>d.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"},children:c.map((d,p)=>h.jsx("option",{value:d,style:{background:"#0a0f14",color:"#00f3ff"},children:d},`${p}-${d}`))})]})}class xj extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function nj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.value;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class kj extends Kt.Control{constructor(t,r,s){super(),this.label=t,this.value=r,this.onChange=s}}function aj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=l.target.checked;r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[h.jsx("input",{type:"checkbox",checked:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{accentColor:"#00f3ff"}}),h.jsx("span",{style:{marginLeft:"5px",fontSize:"12px",color:"#00f3ff",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label})]})}class Ej extends Kt.Control{constructor(t,r,s,l={}){super(),this.label=t,this.value=r,this.onChange=s,this.options=l}}function rj({data:a}){const[t,r]=x.useState(a.value),s=l=>{const c=Number(l.target.value);r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:"number",value:t,onChange:s,min:a.options.min,max:a.options.max,step:a.options.step,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Cj extends Kt.Control{constructor(t,r,s,l="text"){super(),this.label=t,this.value=r,this.onChange=s,this.type=l}}function ij({data:a}){const[t,r]=x.useState(a.value);x.useEffect(()=>{r(a.value)},[a.value]);const s=l=>{let c=l.target.value;a.type==="number"&&(c=Number(c)),r(c),a.value=c,a.onChange&&a.onChange(c)};return h.jsxs("div",{style:{marginBottom:"5px"},children:[a.label&&h.jsx("label",{style:{display:"block",fontSize:"10px",color:"#00f3ff",marginBottom:"2px",textTransform:"uppercase",letterSpacing:"0.5px"},children:a.label}),h.jsx("input",{type:a.type||"text",value:t,onChange:s,onPointerDown:l=>l.stopPropagation(),onDoubleClick:l=>l.stopPropagation(),style:{width:"100%",background:"#0a0f14",color:"#00f3ff",border:"1px solid rgba(0, 243, 255, 0.3)",padding:"6px",borderRadius:"4px",outline:"none",fontSize:"12px"}})]})}class Tj extends Kt.Control{constructor(t,r){super(),this.deviceId=t,this.getState=r}}function sj({data:a}){const t=a.getState?a.getState(a.deviceId):null,r=document.body.classList.contains("performance-mode");if(!t)return h.jsx("div",{style:{padding:"4px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"24px",border:"1px solid rgba(0, 243, 255, 0.1)"},children:h.jsx("span",{style:{fontSize:"11px",color:"rgba(0, 243, 255, 0.5)"},children:"No state data"})});const s=t.on||t.state==="on",l=t.attributes&&typeof t.attributes.brightness=="number"?Number(t.attributes.brightness):null;let c=0;l!==null&&Number.isFinite(l)&&l>100?c=Math.round(l/255*100):typeof t.brightness=="number"&&Number.isFinite(t.brightness)?c=t.brightness>100?Math.round(t.brightness/255*100):Math.round(t.brightness):l!==null&&Number.isFinite(l)&&(c=Math.round(l)),c=Math.max(0,Math.min(100,c));const d=t.hs_color||[0,0],[p,m]=d;let g="#e74c3c";s&&(m===0?g="#f1c40f":g=`hsl(${p}, ${m}%, 50%)`);const b={width:"14px",height:"14px",borderRadius:"50%",background:g,border:"1px solid rgba(255,255,255,0.3)",animation:s&&!r?"flash-pulse 2s infinite ease-in-out":"none",color:g,marginRight:"8px",flexShrink:0,boxShadow:s?`0 0 5px ${g}`:"none"};return h.jsxs("div",{style:{padding:"6px 8px",background:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",marginBottom:"4px",border:"1px solid rgba(0, 243, 255, 0.2)",display:"flex",flexDirection:"column"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:s?"4px":"0"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",flex:1,overflow:"hidden"},children:[h.jsx("div",{style:b}),h.jsx("span",{style:{fontSize:"12px",color:"#e0f7fa",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:t.name||a.deviceId})]}),h.jsx("span",{style:{fontSize:"10px",color:"#00f3ff",fontFamily:"monospace",whiteSpace:"nowrap"},children:s?`${c}%`:"Off"})]}),s&&h.jsx("div",{style:{width:"100%",height:"4px",background:"rgba(0, 243, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:h.jsx("div",{style:{width:`${c}%`,height:"100%",background:`linear-gradient(90deg, rgba(0, 243, 255, 0.2), ${g})`,transition:"width 0.3s ease-out"}})})]})}function oj(a){const{state:t,color:r}=a.data.data||{},s=t==="on"||t==="open"||t==="playing",l=r||(s?"#00f3ff":"#333");return h.jsxs("div",{className:"status-indicator-control",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",width:"100%"},onPointerDown:c=>c.stopPropagation(),children:[h.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:s?l:"rgba(0, 20, 30, 0.8)",boxShadow:s?`0 0 10px ${l}, 0 0 20px ${l}`:"none",transition:"all 0.3s ease",border:"1px solid rgba(0, 243, 255, 0.3)",animation:s?"pulse 2s infinite":"none"}}),h.jsx("style",{children:`
                @keyframes pulse {
                    0% { opacity: 1; transform: scale(1); }
                    50% { opacity: 0.7; transform: scale(0.9); }
                    100% { opacity: 1; transform: scale(1); }
                }
            `})]})}function lj(a){const[,t]=x.useState(0);x.useEffect(()=>{let w=JSON.stringify(a.data.data||{});const k=setInterval(()=>{const E=JSON.stringify(a.data.data||{});E!==w&&(w=E,t(D=>D+1))},100);return()=>clearInterval(k)},[a.data]);const{brightness:r,hs_color:s,entityType:l,state:c,on:d}=a.data.data||{};let p="#444";s&&s.length===2?p=`hsl(${s[0]}, ${s[1]}%, 50%)`:l==="light"&&(p="#ffaa00");const m=c==="on"||d===!0;let g=typeof r=="number"&&Number.isFinite(r)?r:0;g>100&&(g=g/255*100),g=Math.max(0,Math.min(100,g));const b=m?g:0;return h.jsx("div",{className:"color-bar-control",style:{width:"100%",height:"8px",backgroundColor:"rgba(0, 20, 30, 0.6)",borderRadius:"4px",overflow:"hidden",marginTop:"5px",border:"1px solid rgba(0, 243, 255, 0.2)"},onPointerDown:w=>w.stopPropagation(),children:h.jsx("div",{style:{width:`${b}%`,height:"100%",backgroundColor:p,transition:"all 0.3s ease",boxShadow:b>0?`0 0 10px ${p}`:"none"}})})}function cj(a){const{power:t,energy:r}=a.data.data||{};return t===null&&r===null?h.jsx("div",{className:"power-stats-control",style:{fontSize:"10px",color:"#777",marginTop:"5px",fontFamily:"monospace"},children:"-- W / -- kWh"}):h.jsxs("div",{className:"power-stats-control",style:{display:"flex",flexDirection:"column",fontSize:"10px",color:"#e0f7fa",marginTop:"5px",fontFamily:"monospace"},onPointerDown:s=>s.stopPropagation(),children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"PWR:"}),h.jsx("span",{style:{color:"#00f3ff"},children:t!==null?`${t} W`:"--"})]}),r!==null&&h.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[h.jsx("span",{children:"NRG:"}),h.jsxs("span",{style:{color:"#ffaa00"},children:[r," kWh"]})]})]})}window.EDITOR_DEBUG=!1;const uj=window.EDITOR_DEBUG,Oe=(...a)=>uj&&console.debug("[Editor]",...a),dj=Oa.memo(({data:a,socketKey:t,side:r})=>{let l=a?.name||"any";if(t&&typeof t=="string"){const d=t.toLowerCase();d.includes("hsv")||d.includes("color")?l="hsv_info":d.includes("trigger")||d.includes("enable")||d.includes("active")?l="boolean":(d.includes("light")||d.includes("device"))&&(l="light_info")}const c=`${t||"socket"} (${l})`;return Oa.createElement("div",{className:"rete-socket","data-socket-type":l,title:c})});function fj(){const a=x.useRef(null),[t,r]=x.useState(null),[s,l]=x.useState(null),[c,d]=x.useState(null),[p,m]=x.useState(null),[g,b]=x.useState(()=>{try{return localStorage.getItem("dockMergedIntoForecast")==="true"}catch{return!1}}),w=x.useRef(null),k=x.useRef(null);x.useEffect(()=>{try{localStorage.setItem("dockMergedIntoForecast",String(g))}catch{}},[g]);const E=x.useRef(!1),D=x.useRef(new Set),F=x.useRef(null),U=x.useRef(!1),te=x.useRef(null),ee=x.useRef(null),L=x.useRef(null),G=x.useRef({x:0,y:0}),ge=x.useRef(!1),Se=x.useRef([]),[B,pe]=x.useState([]),oe=x.useRef(null),[ye,Ie]=x.useState({visible:!1,position:{x:0,y:0},items:[],nodeContext:null}),De=180,et="favoriteNodes",[nt,Ke]=x.useState(()=>{try{const Z=localStorage.getItem(et),ie=Z?JSON.parse(Z):null,A=Y=>{const C=[];for(const H of Array.isArray(Y)?Y:[]){if(typeof H!="string")continue;const ue=H.trim();ue&&(C.includes(ue)||C.push(ue))}return C};if(Array.isArray(ie)){const Y=A(ie);return Y.length?[{category:"Other",labels:Y}]:[]}const K=Array.isArray(ie?.groups)?ie.groups:Array.isArray(ie?.favoriteGroups)?ie.favoriteGroups:Array.isArray(ie)?ie:null;if(!K)return[];const ne=[];for(const Y of K){const C=(Y?.category||"Other").toString().trim()||"Other",H=A(Y?.labels);H.length!==0&&ne.push({category:C,labels:H})}return ne}catch{return[]}}),q=x.useRef(null),[he,me]=x.useState(!1),Me=x.useRef(null),[J,v]=x.useState(!1),[T,_]=x.useState(null);x.useEffect(()=>{try{localStorage.setItem(et,JSON.stringify({version:2,groups:nt}))}catch{}},[nt]);const M=x.useCallback(Z=>{const ie=(Z||"").toString().trim();if(!ie)return;const K=(Nn.getByLabel(ie)?.category||"Other").toString().trim()||"Other";Ke(ne=>{for(const H of ne)if(Array.isArray(H?.labels)&&H.labels.includes(ie))return ne;const Y=ne.map(H=>({category:H.category,labels:[...H.labels]})),C=Y.findIndex(H=>H.category===K);return C===-1?Y.push({category:K,labels:[ie]}):Y[C].labels.push(ie),Y})},[]),Q=x.useCallback(Z=>{const ie=(Z||"").toString().trim();ie&&Ke(A=>{const K=[];for(const ne of A){const Y=(ne?.labels||[]).filter(C=>C!==ie);Y.length!==0&&K.push({category:ne.category,labels:Y})}return K})},[]),fe=x.useCallback(async Z=>{const ie=a.current,A=te.current,K=ee.current;if(!ie||!A||!K)return;const ne=ie.getBoundingClientRect(),Y={x:ne.left+ne.width/2,y:ne.top+ne.height/2};try{const ue=window._t2GetMenuItems;if(typeof ue=="function"){const ce=ue();for(const Te of ce||[])for(const be of Te.subitems||[])if(be.label===Z&&typeof be.handler=="function"){await be.handler(Y);return}}}catch(ue){console.warn("[Favorites] Failed to create via context handlers:",ue)}const C=Nn.getByLabel(Z);if(!C)return;const H=()=>{try{F.current?.()}catch{}};try{const ue=C.factory(H);await A.addNode(ue);const ce=K.area.transform,Te=(Y.x-ce.x)/ce.k,be=(Y.y-ce.y)/ce.k;await K.translate(ue.id,{x:Te,y:be}),Z==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}catch(ue){console.warn("[Favorites] Fallback create failed:",ue)}},[]);x.useEffect(()=>{try{const Z=Nn.getAll();if(Z.length===0)return;const ie=new Map;for(const A of Z)A?.label&&ie.set(A.label,(A.category||"Other").toString().trim()||"Other");Ke(A=>{const K=[],ne=new Map,Y=(C,H)=>{ne.has(C)||(ne.set(C,[]),K.push(C));const ue=ne.get(C);ue.includes(H)||ue.push(H)};for(const C of A)for(const H of C?.labels||[]){const ue=ie.get(H);ue&&Y(ue,H)}return K.map(C=>({category:C,labels:ne.get(C)})).filter(C=>C.labels.length>0)})}catch{}},[t]);const xe=x.useCallback(async Z=>{await new Promise(P=>{const de=()=>{const we=Z.getBoundingClientRect();we.width>0&&we.height>0?P():requestAnimationFrame(de)};requestAnimationFrame(de)});const ie=new ni,A=new Db(Z),K=new kk,ne=new OC({createRoot:db.createRoot}),Y=new $C;ie.use(Y);let C=0,H=0,ue=Date.now();window._t2PerfStats=()=>{const P=(Date.now()-ue)/1e3;return console.log(`[Perf] In ${P.toFixed(1)}s: ${C} process calls, ${H} skipped (${(C/P).toFixed(1)}/sec)`),{calls:C,skipped:H,perSecond:C/P}},window._t2PerfReset=()=>{C=0,H=0,ue=Date.now(),console.log("[Perf] Stats reset")};let ce=null;const Te=()=>{const P=ie?.getNodes?.()?.length||0;return P<50?16:P<100?32:P<150?50:100};let be=!1;const je=async()=>{if(be){H++;return}if(ce)return;C++;const P=Te();ce=setTimeout(async()=>{ce=null,be=!0;try{const de=ie.getNodes(),we=ie.getConnections();window._debugProcess&&(console.log("[Editor] process() - nodes:",de.map(_e=>`${_e.id}:${_e.label}`)),console.log("[Editor] process() - connections:",we.map(_e=>`${_e.source}:${_e.sourceOutput} -> ${_e.target}:${_e.targetInput}`)),window._debugProcess=!1),Y.reset();for(const _e of de)try{await Y.fetch(_e.id)}catch{}}finally{be=!1}},P)},Ee=async()=>{if(!be){ce&&(clearTimeout(ce),ce=null),be=!0;try{Y.reset();for(const P of ie.getNodes())try{await Y.fetch(P.id)}catch{}}finally{be=!1}}},Ue=new Set;let Ve=null;const We=P=>{Ue.add(P),Ve||(Ve=setTimeout(()=>{Ve=null,Ue.forEach(de=>{A.update("node",de)}),Ue.clear(),je()},16))},ke=()=>{je()},kt=()=>{const P=Nn.getAll(),de={};P.forEach(_e=>{const rt=_e.category||"Other";de[rt]||(de[rt]=[]),de[rt].push({label:_e.label,order:_e.order,description:_e.description,handler:async Ut=>{let nn;const _t=()=>{_e.updateStrategy==="dataflow"?ke():We(nn.id)};nn=_e.factory(_t),await ie.addNode(nn);const bt=A.area.transform,Dn=(Ut.x-bt.x)/bt.k,Pt=(Ut.y-bt.y)/bt.k;await A.translate(nn.id,{x:Dn,y:Pt}),_e.label==="Backdrop"&&window.refreshBackdropGroups&&window.refreshBackdropGroups()}})});const we=window.T2Controls?.THEME?.categories||{};return Object.entries(de).map(([_e,rt])=>({label:_e,icon:we[_e]?.icon||"",subitems:rt.sort((Ut,nn)=>{const _t=Ut.order??999,bt=nn.order??999;return _t!==bt?_t-bt:Ut.label.localeCompare(nn.label)})})).sort((_e,rt)=>_e.label.localeCompare(rt.label))};window._t2GetMenuItems=kt,window._t2Editor=ie,window._t2Area=A,window._t2Process=je,window._t2ProcessImmediate=Ee,window._t2Engine=Y;const qe=br.selector();ne.addPreset(Af.classic.setup({customize:{node(P){const de=Nn.getByInstance(P.payload);return de?de.component:Af.classic.Node},socket(P){const de=P.key,we=P.side;return function({data:_e}){return Oa.createElement(dj,{data:_e,socketKey:de,side:we})}},control(P){if(P.payload instanceof Kt.Control){const we=P.payload.constructor.name;if(we==="ButtonControl")return ej;if(we==="DropdownControl")return tj;if(we==="TextControl")return nj;if(we==="SwitchControl")return aj;if(we==="NumberControl")return rj;if(we==="InputControl")return ij;if(we==="DeviceStateControl")return sj;if(we==="StatusIndicatorControl")return oj;if(we==="ColorBarControl")return lj;if(we==="PowerStatsControl")return cj}return Af.classic.Control}}})),K.addPreset(vk.classic.setup()),ie.use(A),A.use(K),A.use(ne),br.selectableNodes(A,qe,{accumulating:br.accumulateOnCtrl()}),br.simpleNodesOrder(A),ie.addPipe(P=>{if(P.type==="nodecreated"){const de=P.data,we=Nn.getByInstance(de);we&&we.isBackdrop&&setTimeout(()=>{const Ne=A.nodeViews.get(de.id);Ne&&Ne.element&&(Ne.element.style.zIndex="-10",Oe("[Backdrop] Set z-index on creation for:",de.id))},50)}return P});let vt=!1,zt=!1,ot={x:0,y:0};K.addPipe(P=>(P.type==="connectionpick"?(vt=!0,Oe(" Connection pick - wire dragging started")):P.type==="connectiondrop"&&(vt=!1,zt=!1,Oe(" Connection drop - wire dragging ended")),P));const Et=P=>{if(vt)if(P.ctrlKey||P.metaKey)if(!zt)zt=!0,ot={x:P.clientX,y:P.clientY},Z.style.cursor="grab";else{const de=P.clientX-ot.x,we=P.clientY-ot.y;if(de!==0||we!==0){const Ne=A.area.transform;A.area.translate(Ne.x+de,Ne.y+we),ot={x:P.clientX,y:P.clientY}}}else zt&&(zt=!1,Z.style.cursor="")},kn=P=>{(P.key==="Control"||P.key==="Meta")&&zt&&(zt=!1,Z.style.cursor="")};window.addEventListener("pointermove",Et),window.addEventListener("keyup",kn);let $n=!1,Jt=!1,on=null,Wa=!1,Ua={x:0,y:0},Aa={x:0,y:0};const ri=P=>{P.code==="Space"&&$n&&on&&(Wa=!0,Aa={x:0,y:0},P.preventDefault())},Zn=P=>{if(P.code==="Space"&&(Wa=!1,Jt&&on)){const de=A.nodeViews.get(on);if(de){const we=A.area.transform,Ne=Aa.x/we.k,_e=Aa.y/we.k,rt={x:de.position.x-Ne,y:de.position.y-_e};E.current=!0,A.translate(on,rt).finally(()=>{E.current=!1})}Jt=!1,Z.style.cursor=""}},xr=P=>{if(!(!$n||!on))if(Wa)if(!Jt)Jt=!0,Ua={x:P.clientX,y:P.clientY},Aa={x:0,y:0},Z.style.cursor="grab";else{const de=P.clientX-Ua.x,we=P.clientY-Ua.y;if(de!==0||we!==0){const Ne=A.area.transform;A.area.translate(Ne.x+de,Ne.y+we),Aa.x+=de,Aa.y+=we,Ua={x:P.clientX,y:P.clientY}}}else Jt&&(Jt=!1,Z.style.cursor="")};window.addEventListener("keydown",ri,!0),window.addEventListener("keyup",Zn,!0),Z.addEventListener("pointermove",xr,!0);const en=document.createElement("div");en.classList.add("selection-box"),Z.appendChild(en);let Xn=!1,En={x:0,y:0};const N=D.current,j=()=>{Xn&&(Oe(" Safety reset: clearing stuck lasso selection"),Xn=!1,en.style.display="none")},W=()=>{j(),window.resetEditorDragState&&window.resetEditorDragState()},se=()=>{document.hidden&&(j(),window.resetEditorDragState&&window.resetEditorDragState())};window.addEventListener("blur",W),document.addEventListener("visibilitychange",se);const Re=P=>{try{const de=P.target;de&&(de.tagName==="INPUT"||de.tagName==="TEXTAREA"||de.isContentEditable)||(Z.tabIndex=-1,Z.focus())}catch{}if((P.ctrlKey||P.metaKey)&&P.button===0){P.stopPropagation(),P.preventDefault(),Xn=!0;const de=Z.getBoundingClientRect();En={x:P.clientX-de.left,y:P.clientY-de.top},en.style.display="block",en.style.left=`${En.x}px`,en.style.top=`${En.y}px`,en.style.width="0px",en.style.height="0px",P.shiftKey||(N.forEach(we=>{const Ne=A.nodeViews.get(we);Ne&&Ne.element&&(Ne.element.classList.remove("selected"),Ne.element.style.outline="")}),N.clear(),qe&&qe.entities&&Array.from(qe.entities).forEach(we=>qe.remove(we)))}},Yt=P=>{if(!Xn)return;const de=Z.getBoundingClientRect(),we=P.clientX-de.left,Ne=P.clientY-de.top,_e=Math.min(En.x,we),rt=Math.min(En.y,Ne),Ut=Math.abs(we-En.x),nn=Math.abs(Ne-En.y);en.style.left=`${_e}px`,en.style.top=`${rt}px`,en.style.width=`${Ut}px`,en.style.height=`${nn}px`},_n=P=>{if(!Xn)return;const de=en.getBoundingClientRect();if(Xn=!1,en.style.display="none",de.width<5&&de.height<5)return;const we=[];ie.getNodes().forEach(Ne=>{const _e=A.nodeViews.get(Ne.id);if(_e&&_e.element){const rt=_e.element.getBoundingClientRect();de.left<=rt.left&&de.right>=rt.right&&de.top<=rt.top&&de.bottom>=rt.bottom&&we.push({node:Ne,view:_e})}}),we.forEach(({node:Ne,view:_e})=>{N.add(Ne.id),qe.add({id:Ne.id,label:"node",translate(rt,Ut){},unselect(){_e.element.classList.remove("selected"),_e.element.style.outline=""}},!1),_e.element.classList.add("selected"),_e.element.style.outline="3px solid #00f3ff"})},tn=()=>{N.size>0&&(N.forEach(P=>{const de=A.nodeViews.get(P);de&&de.element&&(de.element.classList.remove("selected"),de.element.style.outline="")}),N.clear()),qe&&qe.entities&&(qe.entities instanceof Map?Array.from(qe.entities.values()):Array.from(qe.entities)).forEach(de=>{de.unselect&&de.unselect(),qe.remove(de)}),ie.getNodes().forEach(P=>{const de=A.nodeViews.get(P.id);de&&de.element&&de.element.classList.remove("selected")})},Ct=P=>{if(!P.ctrlKey&&!P.metaKey&&!Xn){let de=!1;for(const[we,Ne]of A.nodeViews)if(Ne.element.contains(P.target)){de=!0;break}if(!de){const we=P.target;(we===Z||we.classList.contains("rete-area")||we.closest('[data-testid="area"]'))&&tn()}}};Z.addEventListener("pointerdown",Re,{capture:!0}),Z.addEventListener("click",Ct),window.addEventListener("pointermove",Yt),window.addEventListener("pointerup",_n),ie.addPipe(P=>((P.type==="connectioncreated"||P.type==="connectionremoved")&&je(),P));let Pe={activeBackdropId:null,isDragging:!1,nodesBeingMoved:new Set},ra=!1,Un=null;const Gt=P=>{ra=P,Un&&(clearTimeout(Un),Un=null),P&&(Un=setTimeout(()=>{ra&&(Oe(" Safety reset: clearing stuck isGroupMoving"),ra=!1),Un=null},500))},Xo=()=>{Xn&&(Oe(" Resetting stuck lasso selection"),Xn=!1,en.style.display="none"),ra&&(Oe(" Resetting stuck group moving"),Gt(!1)),Pe.isDragging&&(Oe(" Resetting stuck backdrop drag"),Pe.isDragging=!1,Pe.activeBackdropId=null,Pe.nodesBeingMoved.clear())};window.resetEditorDragState=Xo;function Ai(){const P=ie.getNodes(),de=P.filter(Ne=>{const _e=Nn.getByInstance(Ne);return _e&&_e.isBackdrop}),we=P.filter(Ne=>{const _e=Nn.getByInstance(Ne);return!_e||!_e.isBackdrop});de.forEach(Ne=>{const _e=A.nodeViews.get(Ne.id);if(!_e)return;_e.element&&(_e.element.style.zIndex="-10");const rt=_e.position,Ut=[],nn=Ne.properties.width||400,_t=Ne.properties.height||300,bt=(Pt,Cn,kr)=>{const ma=Pt.x+Cn/2,Ja=Pt.y+kr/2;return ma>=rt.x&&ma<=rt.x+nn&&Ja>=rt.y&&Ja<=rt.y+_t};we.forEach(Pt=>{const Cn=A.nodeViews.get(Pt.id);if(!Cn)return;Cn.element&&parseInt(Cn.element.style.zIndex||"0",10)<0&&(Cn.element.style.zIndex="1");const kr=Cn.position,ma=Pt.width||180,Ja=Pt.height||100;bt(kr,ma,Ja)&&Ut.push(Pt.id)}),de.forEach(Pt=>{if(Pt.id===Ne.id)return;const Cn=A.nodeViews.get(Pt.id);if(!Cn)return;const kr=Cn.position,ma=Pt.properties.width||400,Ja=Pt.properties.height||300;ma>=nn||Ja>=_t||bt(kr,ma,Ja)&&Ut.push(Pt.id)});const Dn=Ne.properties.capturedNodes.length;Ne.properties.capturedNodes=Ut,Dn!==Ut.length&&Ne.changeCallback&&Ne.changeCallback()})}return A.updateBackdropCaptures=Ai,A.addPipe(P=>{if(P.type==="nodepicked"){const de=P.data.id,we=ie.getNode(de);$n=!0,on=de,Jt=!1;try{if(we&&Me?.current!==void 0){const _e=A.nodeViews.get(de)?.position||{x:0,y:0};Me.current={nodeId:de,label:we.label,startPos:_e,active:!1,over:!1}}}catch{}if(we){const _e=Nn.getByInstance(we);if(_e&&_e.isBackdrop&&we.properties.locked)return}!ge.current&&!N.has(de)&&(N.forEach(_e=>{const rt=A.nodeViews.get(_e);rt&&rt.element&&(rt.element.classList.remove("selected"),rt.element.style.outline="")}),N.clear()),N.add(de);const Ne=A.nodeViews.get(de);Ne&&Ne.element&&(Ne.element.classList.add("selected"),Ne.element.style.outline="3px solid #00f3ff")}return P}),A.addPipe(P=>{try{if(E.current)return P;const de=we=>{const Ne=q.current?.getBoundingClientRect();if(!Ne)return!1;const rt=A.nodeViews.get(we)?.element;if(!rt)return!1;const Ut=rt.getBoundingClientRect(),nn=Ut.left+Ut.width/2,_t=Ut.top+Ut.height/2;return nn>=Ne.left&&nn<=Ne.right&&_t>=Ne.top&&_t<=Ne.bottom};if(P.type==="nodetranslate"){const we=Me.current;if(!we)return P;const Ne=P.data?.id;if(!Ne||we.nodeId!==Ne)return P;we.active||(we.active=!0,!we.startPos&&P.data?.previous&&(we.startPos=P.data.previous));const _e=de(Ne);return _e!==we.over&&(we.over=_e,me(_e)),P}if(P.type==="nodedragged"){const we=Me.current;if(!we)return P;const Ne=P.data?.id;if(!Ne||we.nodeId!==Ne)return P;if(we.active&&de(Ne)){M(we.label);const rt=we.startPos;rt&&setTimeout(()=>{try{A.translate(Ne,rt)}catch{}},0)}return Me.current=null,me(!1),P}}catch{}return P}),A.addPipe(P=>{if(P.type==="render"&&P.data?.payload){const de=P.data.payload,we=Nn.getByInstance(de);we&&we.isBackdrop&&setTimeout(()=>{const Ne=A.nodeViews.get(de.id);if(Ne&&Ne.element){Ne.element.style.zIndex!=="-10"&&(Ne.element.style.zIndex="-10");const _e=de.properties.locked?"none":"auto";Ne.element.style.pointerEvents!==_e&&(Ne.element.style.pointerEvents=_e)}},0)}if(P.type==="nodetranslate"){if(E.current||ra)return P;const de=P.data.id,we=ie.getNode(de);if(!we)return P;const Ne=P.data.position,_e=P.data.previous,rt=Ne.x-_e.x,Ut=Ne.y-_e.y;if(rt===0&&Ut===0)return P;if(Jt&&on===de)return{...P,data:{...P.data,position:P.data.previous}};if(N.size>1&&N.has(de)){Gt(!0);const _t=[];return N.forEach(bt=>{if(bt!==de){const Dn=A.nodeViews.get(bt);if(Dn){const Pt=Dn.position.x+rt,Cn=Dn.position.y+Ut;_t.push(A.translate(bt,{x:Pt,y:Cn}))}}}),Promise.all(_t).then(()=>{Gt(!1)}),P}const nn=Nn.getByInstance(we);if(nn&&nn.isBackdrop){if(we.properties.locked)return{...P,data:{...P.data,position:P.data.previous}};if(Pe.isDragging&&Pe.nodesBeingMoved.has(de)&&Pe.activeBackdropId!==de)return P;if(Pe.activeBackdropId!==de){Pe.activeBackdropId=de,Pe.isDragging=!0,Pe.nodesBeingMoved.clear(),Ai();const _t=bt=>{bt.forEach(Dn=>{Pe.nodesBeingMoved.add(Dn);const Pt=ie.getNode(Dn);Pt&&Pt.properties.capturedNodes&&_t(Pt.properties.capturedNodes)})};_t(we.properties.capturedNodes)}if(we.properties.capturedNodes.length>0){Gt(!0);const _t=[];return we.properties.capturedNodes.forEach(bt=>{if(!N.has(bt)){const Dn=A.nodeViews.get(bt);if(Dn){const Pt=Dn.position.x+rt,Cn=Dn.position.y+Ut;_t.push(A.translate(bt,{x:Pt,y:Cn}))}}}),Promise.all(_t).then(()=>{Gt(!1)}),P}}}if(P.type==="nodedragged"){if(E.current)return P;Pe.isDragging=!1,Pe.activeBackdropId=null,Pe.nodesBeingMoved.clear(),$n=!1,on=null,Jt&&(Jt=!1,Z.style.cursor=""),Ai()}return P}),te.current=ie,ee.current=A,L.current=qe,window.updateBackdropLockState=(P,de)=>{const we=A.nodeViews.get(P);we&&we.element&&(we.element.style.pointerEvents=de?"none":"auto",Oe(" Updated backdrop lock state:",P,"locked:",de))},r(ie),l(A),d(Y),{destroy:()=>{Z.removeEventListener("pointerdown",Re,{capture:!0}),Z.removeEventListener("click",Ct),Z.removeEventListener("pointermove",xr,!0),window.removeEventListener("pointermove",Yt),window.removeEventListener("pointerup",_n),window.removeEventListener("pointermove",Et),window.removeEventListener("keyup",kn),window.removeEventListener("keydown",ri,!0),window.removeEventListener("keyup",Zn,!0),window.removeEventListener("blur",W),document.removeEventListener("visibilitychange",se),Un&&clearTimeout(Un),en.parentNode&&en.parentNode.removeChild(en),A.destroy()},selector:qe,editor:ie,area:A,engine:Y,process:je,processImmediate:Ee}},[]);x.useEffect(()=>{const Z=a.current;if(!Z)return;let ie=null,A=null,K=null;const ne=new Map,Y=ce=>{try{typeof ce.pointerId=="number"&&ne.set(ce.pointerId,{el:ce.target,pointerType:ce.pointerType||"mouse"})}catch{}},C=ce=>{try{typeof ce.pointerId=="number"&&ne.delete(ce.pointerId)}catch{}},H=ce=>{try{typeof ce.pointerId=="number"&&ne.delete(ce.pointerId)}catch{}};Z.addEventListener("gotpointercapture",Y,!0),Z.addEventListener("lostpointercapture",C,!0),window.addEventListener("pointerup",H,!0),window.addEventListener("pointercancel",H,!0),A=YO().then(()=>(Oe(" External plugins loaded, now creating editor..."),xe(Z))).then(ce=>{ce.editor,ie=ce.area,ce.engine,ce.selector,r(ce.editor),l(ce.area),d(ce.engine),m(ce.selector),F.current=ce.processImmediate,setTimeout(()=>{if(Z){Z.tabIndex=-1,Z.focus();const be=Z.getBoundingClientRect(),je=be.left+be.width/2,Ee=be.top+be.height/2,Ue=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:je,clientY:Ee,deltaY:0});Z.dispatchEvent(Ue),Oe(" Container initialized and focused"),window.resetEditorView=()=>{Oe(" Manual reset triggered"),requestAnimationFrame(()=>{window.resetEditorDragState&&window.resetEditorDragState();const Ve=Z.getBoundingClientRect(),We=Ve.left+Ve.width/2,ke=Ve.top+Ve.height/2;Z.tabIndex=-1,Z.focus();try{const qe=Array.from(ne.entries());ne.clear(),qe.forEach(([vt,zt])=>{const ot=zt?.el,Et=zt?.pointerType||"mouse";try{const kn=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:vt,pointerType:Et});Z.dispatchEvent(kn)}catch{}try{Z.releasePointerCapture(vt)}catch{}try{ot&&typeof ot.releasePointerCapture=="function"&&ot.releasePointerCapture(vt)}catch{}})}catch{}try{for(let vt=0;vt<5;vt++)try{Z.releasePointerCapture(vt)}catch{}Z.querySelectorAll(".node, .connection, [data-drag]").forEach(vt=>{try{vt.releasePointerCapture(1)}catch{}})}catch{}if(ie){const qe=new PointerEvent("pointercancel",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});Z.dispatchEvent(qe);const vt=new PointerEvent("lostpointercapture",{bubbles:!0,cancelable:!0,pointerId:1,pointerType:"mouse"});Z.dispatchEvent(vt)}setTimeout(()=>{const qe=new PointerEvent("pointerdown",{bubbles:!0,cancelable:!0,clientX:We,clientY:ke,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:1}),vt=new PointerEvent("pointerup",{bubbles:!0,cancelable:!0,clientX:We,clientY:ke,pointerId:1,pointerType:"mouse",isPrimary:!0,button:0,buttons:0});Z.dispatchEvent(qe),setTimeout(()=>{Z.dispatchEvent(vt);const zt=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:We,clientY:ke,deltaY:0});Z.dispatchEvent(zt),Oe(" Reset complete")},50)},50)})}}},100);let Te=!1;return K=new ResizeObserver(be=>{for(const je of be){const{width:Ee,height:Ue}=je.contentRect;!Te&&Ee>0&&Ue>0&&(Te=!0,Oe(" ResizeObserver: Container now has size",Ee,Ue),setTimeout(()=>{Z.focus();const Ve=Z.getBoundingClientRect(),We=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,clientX:Ve.left+Ve.width/2,clientY:Ve.top+Ve.height/2,deltaY:0});Z.dispatchEvent(We)},50))}}),K.observe(Z),ce});const ue=()=>{Oe(" graphLoadComplete event received - triggering view reset");const ce=()=>{window.resetEditorView&&window.resetEditorView()};ce(),setTimeout(ce,100),setTimeout(ce,500),setTimeout(ce,1e3)};return window.addEventListener("graphLoadComplete",ue),()=>{K&&K.disconnect(),window.removeEventListener("graphLoadComplete",ue),Z.removeEventListener("gotpointercapture",Y,!0),Z.removeEventListener("lostpointercapture",C,!0),window.removeEventListener("pointerup",H,!0),window.removeEventListener("pointercancel",H,!0),A.then(ce=>ce.destroy())}},[xe]),x.useEffect(()=>{if(!t||!s||!p)return;const Z=async C=>{if(C.target.tagName==="INPUT"||C.target.tagName==="TEXTAREA"||C.target.isContentEditable)return;if(Oe(` KeyDown: ${C.code} (Ctrl: ${C.ctrlKey}, Meta: ${C.metaKey})`),C.code==="F5"||(C.ctrlKey||C.metaKey)&&C.shiftKey&&C.code==="KeyR"){C.preventDefault(),Oe(" View reset shortcut triggered"),window.resetEditorView&&window.resetEditorView();return}if(C.code==="KeyF"&&!C.ctrlKey&&!C.metaKey&&!C.altKey){C.preventDefault();const be=ee.current,je=te.current;if(be&&je){const Ee=je.getNodes();Ee.length>0&&(Oe(" Zoom extents triggered (F key)"),br.zoomAt(be,Ee,{scale:.9}).catch(Ue=>{console.warn("[F key] zoomAt failed:",Ue)}))}return}const H=te.current,ue=ee.current,ce=L.current;if(!H||!ue){Oe(" No editor/area ref available");return}const Te=()=>{const be=new Set;if(ce&&ce.entities&&ce.entities instanceof Map)for(const[je,Ee]of ce.entities)H.getNode(je)&&be.add(je);for(const je of D.current){const Ee=H.getNode(je);Oe(` Checking node ${je}: exists=${!!Ee}`),Ee&&be.add(je)}return Oe(` Found ${be.size} selected nodes:`,Array.from(be)),Array.from(be)};if(C.code==="Delete"||C.code==="Backspace"){Oe(" Delete key pressed. lassoSelectedNodesRef.current size:",D.current.size),Oe(" lassoSelectedNodesRef.current contents:",Array.from(D.current));const be=Te();if(Oe(` Deleting ${be.length} nodes:`,be),be.length>0){const je=[],Ee=[],Ue=new Set(be);for(const Ve of H.getConnections())(Ue.has(Ve.source)||Ue.has(Ve.target))&&Ee.push({source:Ve.source,target:Ve.target,sourceOutput:Ve.sourceOutput,targetInput:Ve.targetInput});for(const Ve of be){const We=H.getNode(Ve);We&&je.push({id:Ve,label:We.label,position:ue.nodeViews.get(Ve)?.position||{x:0,y:0},properties:JSON.parse(JSON.stringify(We.properties||{}))})}Se.current.push({type:"delete",nodes:je,connections:Ee}),Oe(" Saved undo state:",Se.current.length,"items in stack");for(const Ve of be){const We=H.getConnections().filter(ke=>ke.source===Ve||ke.target===Ve);for(const ke of We)await H.removeConnection(ke.id);await H.removeNode(Ve),D.current.delete(Ve)}window.refreshBackdropGroups&&window.refreshBackdropGroups()}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyZ"&&!C.shiftKey){if(C.preventDefault(),Se.current.length===0){Oe(" Nothing to undo");return}const be=Se.current.pop();if(Oe(" Undoing:",be.type,be.nodes.length,"nodes"),be.type==="delete"){const je={};E.current=!0;try{for(const Ee of be.nodes){const Ue=Nn.getByLabel(Ee.label);if(Ue){let Ve;const We=()=>{ue&&ue.update("node",Ve.id),c&&H&&(c.reset(),setTimeout(()=>{H.getNodes().forEach(async kt=>{try{await c.fetch(kt.id)}catch{}})},0))},ke=()=>{Ue.updateStrategy==="dataflow"?(c&&c.reset(),c&&H&&setTimeout(()=>{H.getNodes().forEach(async kt=>{try{await c.fetch(kt.id)}catch{}})},0)):We()};Ve=Ue.factory(ke),Ee.properties&&Object.assign(Ve.properties,Ee.properties),await H.addNode(Ve),await ue.translate(Ve.id,Ee.position),je[Ee.id]=Ve.id}}for(const Ee of be.connections){const Ue=je[Ee.source]||Ee.source,Ve=je[Ee.target]||Ee.target,We=H.getNode(Ue),ke=H.getNode(Ve);if(We&&ke)try{await H.addConnection(new Kt.Connection(We,Ee.sourceOutput,ke,Ee.targetInput))}catch(kt){console.warn("[Editor] Could not restore connection:",kt)}}Oe(" Undo complete - restored",be.nodes.length,"nodes"),window.refreshBackdropGroups&&window.refreshBackdropGroups()}finally{E.current=!1,ue?.updateBackdropCaptures?.()}}}if((C.ctrlKey||C.metaKey)&&C.code==="KeyC")try{const be=Te();if(be.length===0){Oe(" Nothing selected to copy");return}Oe(` Copying ${be.length} nodes`);const je=[],Ee=new Set(be);for(const We of be){const ke=H.getNode(We);ke&&je.push({label:ke.label,position:ue.nodeViews.get(ke.id)?.position||{x:0,y:0},data:{id:ke.id,properties:JSON.parse(JSON.stringify(ke.properties||{}))}})}if(je.length===0){Oe(" Nothing selected to copy (no nodes in selection)");return}const Ue=[];for(const We of H.getConnections())Ee.has(We.source)&&Ee.has(We.target)&&Ue.push({source:We.source,target:We.target,sourceOutput:We.sourceOutput,targetInput:We.targetInput});const Ve={nodes:je,connections:Ue};localStorage.setItem("rete-clipboard",JSON.stringify(Ve)),Oe("Copied to clipboard:",Ve)}catch(be){console.error("[Editor] Copy failed:",be)}if((C.ctrlKey||C.metaKey)&&C.code==="KeyV"){const be=localStorage.getItem("rete-clipboard");if(!be){Oe(" Clipboard empty");return}try{const je=JSON.parse(be),Ee={},Ve=(ee.current?.container||a.current)?.getBoundingClientRect()||{left:0,top:0},We=ue.area.transform,ke=(G.current.x-Ve.left-We.x)/We.k,kt=(G.current.y-Ve.top-We.y)/We.k;let qe=1/0,vt=1/0;for(const ot of je.nodes)qe=Math.min(qe,ot.position.x),vt=Math.min(vt,ot.position.y);ce&&ce.entities&&Array.from(ce.entities).forEach(ot=>ce.remove(ot)),E.current=!0;try{for(const ot of je.nodes){let Et;const kn=Nn.getByLabel(ot.label);if(kn){const $n=()=>{ue&&ue.update("node",Et.id),c&&H&&(c.reset(),setTimeout(()=>{H.getNodes().forEach(async on=>{try{await c.fetch(on.id)}catch{}})},0))},Jt=()=>{kn.updateStrategy==="dataflow"?(c&&c.reset(),c&&H&&setTimeout(()=>{H.getNodes().forEach(async on=>{try{await c.fetch(on.id)}catch{}})},0)):$n()};Et=kn.factory(Jt)}if(Et){typeof Et.restore=="function"&&ot.data?Et.restore(ot.data):ot.data&&ot.data.properties&&Et.properties&&Object.assign(Et.properties,ot.data.properties),await H.addNode(Et);const $n=ot.position.x-qe,Jt=ot.position.y-vt,on={x:ke+$n,y:kt+Jt};await ue.translate(Et.id,on),Ee[ot.data.id]=Et.id,ce&&ce.add({id:Et.id,label:"node",translate:()=>{},unmount:()=>{},unselect:()=>{}},!0)}}}finally{E.current=!1,ue?.updateBackdropCaptures?.()}const zt=[];for(const ot of je.connections){const Et=Ee[ot.source],kn=Ee[ot.target];if(Et&&kn){const $n=H.getNode(Et),Jt=H.getNode(kn);$n&&Jt&&zt.push(H.addConnection(new Kt.Connection($n,ot.sourceOutput,Jt,ot.targetInput)))}}if(await Promise.all(zt),c&&H){c.reset();for(const ot of H.getNodes())try{await c.fetch(ot.id)}catch{}}setTimeout(()=>{for(const ot of Object.keys(Ee)){const Et=Ee[ot];ue&&ue.update("node",Et)}},100),Oe("Pasted from clipboard")}catch(je){console.error("[Editor] Paste failed:",je)}}C.code==="Home"&&(C.preventDefault(),ue.area&&(ue.area.zoom(1,0,0),ue.area.translate(0,0),Oe(" Viewport reset via Home key"))),C.code==="Escape"&&window.resetEditorDragState&&(window.resetEditorDragState(),Oe(" Drag state reset via Escape key"))},ie=C=>{G.current={x:C.clientX,y:C.clientY}},A=C=>{C.key==="Shift"&&(ge.current=!0)},K=C=>{C.key==="Shift"&&(ge.current=!1)},ne=()=>{Oe(" Received delete from Electron IPC"),Z({code:"Delete",ctrlKey:!1,metaKey:!1,target:{tagName:"DIV",isContentEditable:!1}})};let Y=null;return window.api&&window.api.onDeleteKey&&(Y=window.api.onDeleteKey(ne)),window.addEventListener("keydown",Z),window.addEventListener("keydown",A),window.addEventListener("keyup",K),window.addEventListener("mousemove",ie),()=>{window.removeEventListener("keydown",Z),window.removeEventListener("keydown",A),window.removeEventListener("keyup",K),window.removeEventListener("mousemove",ie),Y&&Y()}},[t,s,c,p]),x.useEffect(()=>{const Z=a.current;if(!Z||!t||!s)return;const ie=A=>{let K=null;const ne=A.target.closest('[data-testid="node"]');if(ne&&(K=ne.dataset.nodeId),!K&&s?.nodeViews){for(const[Y,C]of s.nodeViews.entries())if(C.element&&C.element.contains(A.target)){K=Y,C.element;break}}if(console.log("[ContextMenu] clickedNodeId:",K),console.log("[ContextMenu] lassoSelectedNodesRef:",D.current.size,Array.from(D.current)),K){A.preventDefault();const Y=t.getNode(K),C=D.current,H=C.size>1&&C.has(K),ue=[];H&&(ue.push({label:" Convert to Sub-Graph",handler:async()=>{const ce=Array.from(C);await $e(ce)}}),ue.push({separator:!0})),ue.push({label:"Delete",handler:async()=>{const ce=H?Array.from(C):[K];for(const Te of ce){const be=t.getConnections().filter(je=>je.source===Te||je.target===Te);for(const je of be)await t.removeConnection(je.id);await t.removeNode(Te)}C.clear()}}),Ie({visible:!0,position:{x:A.clientX,y:A.clientY},items:ue,nodeContext:Y})}else{A.preventDefault();const Y=window._t2GetMenuItems?window._t2GetMenuItems():[];Ie({visible:!0,position:{x:A.clientX,y:A.clientY},items:Y,nodeContext:null})}};return Z.addEventListener("contextmenu",ie),()=>{Z.removeEventListener("contextmenu",ie)}},[t,s]),x.useEffect(()=>{if(!t||!s)return;const Z=()=>{const A=t.getNodes().map(ne=>{const Y=s.nodeViews.get(ne.id);return{id:ne.id,name:ne.constructor.name,label:ne.label,properties:ne.properties?{...ne.properties}:{},position:Y?[Y.position.x,Y.position.y]:[0,0]}}),K=t.getConnections().map(ne=>({id:ne.id,source:ne.source,sourceOutput:ne.sourceOutput,target:ne.target,targetInput:ne.targetInput}));return{nodes:A,connections:K}},ie=async(A,K=!0)=>{const ne=t.getConnections(),Y=t.getNodes();for(const C of ne)await t.removeConnection(C.id);for(const C of Y)await t.removeNode(C.id);for(const C of A.nodes){const H=Nn.getByLabel(C.label);if(!H){console.warn("[SubGraph] Unknown node type:",C.label);continue}const ue=H.factory(()=>{s&&s.update("node",C.id),window._t2Process&&window._t2Process()});ue.id=C.id,C.properties&&typeof ue.restore=="function"?ue.restore({properties:C.properties}):C.properties&&Object.assign(ue.properties||{},C.properties),await t.addNode(ue);const ce=C.position,Te=Array.isArray(ce)?ce[0]:ce?.x||0,be=Array.isArray(ce)?ce[1]:ce?.y||0;await s.translate(ue.id,{x:Te,y:be})}for(const C of A.connections){const H=t.getNode(C.source),ue=t.getNode(C.target);if(!H||!ue)continue;const ce=H.outputs?.[C.sourceOutput],Te=ue.inputs?.[C.targetInput];if(!ce||!Te)continue;const be=new window.Rete.ClassicPreset.Connection(H,C.sourceOutput,ue,C.targetInput);be.id=C.id,await t.addConnection(be)}K&&s?.area&&setTimeout(()=>{try{br.zoomAt(s,t.getNodes())}catch(C){console.warn("[SubGraph] zoomAt failed:",C)}},100)};return window.enterSubGraph=async(A,K)=>{if(console.log("[SubGraph] Entering sub-graph:",A,K?.name),!K?.internalNodes||K.internalNodes.length===0){window.T2Toast&&window.T2Toast.info("This sub-graph is empty");return}const ne=Z();B.length===0&&(oe.current=ne),pe(C=>[...C,{nodeId:A,name:K.name||"Sub-Graph",graphData:ne}]);const Y={nodes:K.internalNodes||[],connections:K.internalConnections||[]};await ie(Y),window.T2Toast&&window.T2Toast.success(`Entered: ${K.name||"Sub-Graph"}`)},window.exitSubGraph=async()=>{if(B.length===0){console.warn("[SubGraph] Already at top level");return}const A=Z(),K=[],ne=[];A.nodes.forEach((ce,Te)=>{ce.label==="SubGraph Input"?K.push({key:`in_${Te}`,label:ce.properties?.portName||"input",type:ce.properties?.portType||"any",internalNodeId:ce.id,internalPort:"value"}):ce.label==="SubGraph Output"&&ne.push({key:`out_${Te}`,label:ce.properties?.portName||"output",type:ce.properties?.portType||"any",internalNodeId:ce.id,internalPort:"value"})}),console.log("[SubGraph] Detected exposed ports:",{inputs:K.length,outputs:ne.length});const Y=[...B],C=Y.pop();pe(Y);const H=C.graphData,ue=H.nodes.find(ce=>ce.id===C.nodeId);ue&&ue.properties&&(ue.properties.internalNodes=A.nodes,ue.properties.internalConnections=A.connections,ue.properties.exposedInputs=K,ue.properties.exposedOutputs=ne),await ie(H),setTimeout(()=>{const ce=t?.getNode(C.nodeId);ce&&typeof ce.rebuildSockets=="function"&&(ce.rebuildSockets(),s&&s.update("node",C.nodeId),console.log("[SubGraph] Rebuilt sockets on parent node"))},200),window.T2Toast&&window.T2Toast.info("Returned to parent graph")},window.exitToMainGraph=async()=>{B.length!==0&&(oe.current&&await ie(oe.current),pe([]),oe.current=null,window.T2Toast&&window.T2Toast.info("Returned to main graph"))},()=>{delete window.enterSubGraph,delete window.exitSubGraph,delete window.exitToMainGraph}},[t,s,B]);const $e=x.useCallback(async Z=>{if(!t||!s||Z.length<2){window.T2Toast&&window.T2Toast.warn("Select at least 2 nodes to create a sub-graph");return}try{const ie=Z.map(ke=>t.getNode(ke)).filter(Boolean),A=Z.map(ke=>s.nodeViews.get(ke)).filter(Boolean);let K=0,ne=0;A.forEach(ke=>{K+=ke.position.x,ne+=ke.position.y});const Y=K/A.length,C=ne/A.length,H=ie.map((ke,kt)=>{const qe=A[kt];return{id:ke.id,name:ke.constructor.name,label:ke.label,properties:ke.properties?{...ke.properties}:{},position:[qe.position.x-Y,qe.position.y-C]}}),ue=t.getConnections(),ce=new Set(Z),Te=ue.filter(ke=>ce.has(ke.source)&&ce.has(ke.target)).map(ke=>({id:ke.id,source:ke.source,sourceOutput:ke.sourceOutput,target:ke.target,targetInput:ke.targetInput})),be=[],je=[];ue.forEach(ke=>{ce.has(ke.target)&&!ce.has(ke.source)&&be.push({originalConnection:ke,internalNodeId:ke.target,internalPort:ke.targetInput}),ce.has(ke.source)&&!ce.has(ke.target)&&je.push({originalConnection:ke,internalNodeId:ke.source,internalPort:ke.sourceOutput})});const Ee=be.map((ke,kt)=>({key:`in_${kt}`,label:ke.internalPort,type:"any",internalNodeId:ke.internalNodeId,internalPort:ke.internalPort})),Ue=je.map((ke,kt)=>({key:`out_${kt}`,label:ke.internalPort,type:"any",internalNodeId:ke.internalNodeId,internalPort:ke.internalPort})),Ve=Nn.get("SubGraphNode");if(!Ve)throw new Error("SubGraphNode not registered");const We=Ve.factory(()=>{F.current&&F.current()});We.properties={name:`Sub-Graph (${ie.length} nodes)`,description:"",icon:"",internalNodes:H,internalConnections:Te,exposedInputs:Ee,exposedOutputs:Ue},We.rebuildSockets(),await t.addNode(We),await s.translate(We.id,{x:Y,y:C});for(const ke of[...be,...je])await t.removeConnection(ke.originalConnection.id);for(let ke=0;ke<be.length;ke++){const kt=be[ke],qe=t.getNode(kt.originalConnection.source);if(qe){const vt=new Kt.Connection(qe,kt.originalConnection.sourceOutput,We,`exp_in_${ke}`);await t.addConnection(vt)}}for(let ke=0;ke<je.length;ke++){const kt=je[ke],qe=t.getNode(kt.originalConnection.target);if(qe){const vt=new Kt.Connection(We,`exp_out_${ke}`,qe,kt.originalConnection.targetInput);await t.addConnection(vt)}}for(const ke of Z){const kt=t.getConnections().filter(qe=>qe.source===ke||qe.target===ke);for(const qe of kt)await t.removeConnection(qe.id);await t.removeNode(ke)}D.current.clear(),window.T2Toast&&window.T2Toast.success(`Created sub-graph with ${ie.length} nodes`),Oe(`[SubGraph] Created sub-graph with ${H.length} nodes, ${Te.length} internal connections, ${Ee.length} inputs, ${Ue.length} outputs`)}catch(ie){console.error("[SubGraph] Conversion failed:",ie),window.T2Toast&&window.T2Toast.error(`Sub-graph creation failed: ${ie.message}`)}},[t,s]),Fe=x.useCallback(()=>{Ie(Z=>({...Z,visible:!1}))},[]),Rt=x.useCallback(async Z=>{Z.handler&&await Z.handler(ye.position)},[ye.position]),qt=async()=>{if(!(!t||!s))try{const Z=t.getNodes().map(Te=>{const be=typeof Te.toJSON=="function"?Te.toJSON():{...Te};return Te.properties&&(be.properties=Te.properties),{id:Te.id,label:Te.label,position:s.nodeViews.get(Te.id)?.position||{x:0,y:0},data:be}}),ie=t.getConnections().map(Te=>({id:Te.id,source:Te.source,target:Te.target,sourceOutput:Te.sourceOutput,targetInput:Te.targetInput})),A=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},K={nodes:Z,connections:ie,viewport:A},ne=JSON.stringify(K,null,2);if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Oe("Running in HA ingress - showing save dialog"),_(K),v(!0);return}try{ne.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",ne))}catch{console.warn("localStorage skipped")}Oe("Graph saved to localStorage");try{const Te=await fetch(xn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:ne});Te.ok?Oe("[handleSave] Graph saved to server as last active"):console.warn("[handleSave] Failed to save to server:",Te.status)}catch(Te){console.warn("[handleSave] Failed to save to server:",Te)}if(window.api?.saveTempFile)try{await window.api.saveTempFile("autotron_graph.json",ne),Oe("[handleSave] Saved temp file for Electron reload")}catch(Te){console.warn("[handleSave] Failed to save temp file via Electron API",Te)}if(window.showSaveFilePicker)try{const be=await(await window.showSaveFilePicker({suggestedName:"autotron_graph.json",types:[{description:"AutoTron Graph",accept:{"application/json":[".json"]}}]})).createWritable();await be.write(ne),await be.close(),Oe("Graph saved to file");return}catch(Te){if(Te.name==="AbortError")return;console.warn("File System Access API failed, falling back to download",Te)}const H=new Blob([ne],{type:"application/json"}),ue=URL.createObjectURL(H),ce=document.createElement("a");ce.href=ue,ce.download=`autotron_graph_${Date.now()}.json`,ce.click(),URL.revokeObjectURL(ue),Oe("Graph saved via download")}catch(Z){console.error("Failed to save graph:",Z)}};x.useEffect(()=>(window.triggerGraphSave=async()=>{if(!(!t||!s))try{const Z=t.getNodes().map(Y=>{const C=typeof Y.toJSON=="function"?Y.toJSON():{...Y};return Y.properties&&(C.properties=Y.properties),{id:Y.id,label:Y.label,position:s.nodeViews.get(Y.id)?.position||{x:0,y:0},data:C}}),ie=t.getConnections().map(Y=>({id:Y.id,source:Y.source,target:Y.target,sourceOutput:Y.sourceOutput,targetInput:Y.targetInput})),A=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},K={nodes:Z,connections:ie,viewport:A,preUpdateSave:!0,timestamp:Date.now()},ne=JSON.stringify(K);ne.length<2e6&&(localStorage.setItem("saved-graph",ne),Oe("[triggerGraphSave] Graph saved before update"))}catch(Z){console.warn("[triggerGraphSave] Failed:",Z)}},()=>{delete window.triggerGraphSave}),[t,s]);const[At,Wt]=x.useState(!1),lt=x.useRef(null),$t=x.useRef(Date.now());x.useEffect(()=>{if(!t)return;const Z=()=>{Wt(!0)};t.addPipe(ie=>(["nodecreated","noderemoved","connectioncreated","connectionremoved"].includes(ie.type)&&Z(),ie))},[t]),x.useEffect(()=>{if(!t||!s)return;const Z=async()=>{if(!(window.graphLoading||U.current)&&At)try{const ie=t.getNodes().map(C=>{const H=typeof C.toJSON=="function"?C.toJSON():{...C};return C.properties&&(H.properties=C.properties),{id:C.id,label:C.label,position:s.nodeViews.get(C.id)?.position||{x:0,y:0},data:H}}),A=t.getConnections().map(C=>({id:C.id,source:C.source,target:C.target,sourceOutput:C.sourceOutput,targetInput:C.targetInput})),K=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},ne={nodes:ie,connections:A,viewport:K,autoSaved:!0,timestamp:Date.now()},Y=JSON.stringify(ne);if(Y.length<2e6){localStorage.setItem("saved-graph",Y),$t.current=Date.now(),Wt(!1);try{await fetch(xn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:Y})}catch{}window.T2Toast&&window.T2Toast.success("Auto-saved",2e3)}}catch(ie){console.warn("[Auto-save] Failed:",ie)}};return lt.current=setInterval(Z,12e4),()=>{lt.current&&clearInterval(lt.current)}},[t,s,At]),x.useEffect(()=>{if(!t||!s||!c)return;if(sessionStorage.getItem("autoLoadAfterUpdate")==="true"){sessionStorage.removeItem("autoLoadAfterUpdate"),Oe("[AutoLoad] Detected post-update reload, attempting to restore graph...");const ie=setTimeout(async()=>{try{const A=localStorage.getItem("saved-graph");if(A){Oe("[AutoLoad] Found saved graph, loading...");const K=JSON.parse(A);K.nodes&&K.nodes.length>0&&(window.T2Toast&&window.T2Toast.info("Restoring your graph after update...",3e3),document.dispatchEvent(new CustomEvent("autoLoadGraph")))}}catch(A){console.warn("[AutoLoad] Failed to auto-load graph:",A)}},1e3);return()=>clearTimeout(ie)}},[t,s,c]);const wn=x.useRef(!1);x.useEffect(()=>{if(!t||!s||!c||wn.current)return;if(window.self!==window.top||window.location.pathname.includes("/api/hassio")){Oe("[ServerAutoLoad] Skipping - HA ingress mode, user should click Load Last"),wn.current=!0;return}const A=localStorage.getItem("saved-graph"),K=sessionStorage.getItem("autoLoadAfterUpdate")==="true";if(A||K){Oe("[ServerAutoLoad] Skipping - desktop mode with local graph");return}wn.current=!0;const Y=setTimeout(async()=>{try{Oe("[ServerAutoLoad] Fetching last active graph from server...");const H=await(await fetch(xn("/api/engine/last-active"))).json();H.success&&H.graph?(Oe("[ServerAutoLoad] Found last active graph, loading..."),localStorage.setItem("saved-graph",JSON.stringify(H.graph)),window.T2Toast&&window.T2Toast.info("Loading your last graph...",2e3),setTimeout(()=>{document.dispatchEvent(new CustomEvent("autoLoadGraph"))},500)):Oe("[ServerAutoLoad] No last active graph on server")}catch(C){console.warn("[ServerAutoLoad] Failed to fetch from server:",C)}},1500);return()=>clearTimeout(Y)},[t,s,c]);const jn=async()=>{if(!t||!s||!c){console.error("[handleLoad] Missing instances:",{editor:!!t,area:!!s,engine:!!c});return}try{let Z=localStorage.getItem("saved-graph");if(!Z&&window.api?.readTempFile)try{const Y=await window.api.readTempFile("autotron_graph.json");Y?.success&&Y.content&&(Z=Y.content,Oe("[handleLoad] Loaded graph from Electron temp file"))}catch(Y){console.warn("[handleLoad] Failed to read Electron temp file",Y)}if(!Z){alert("No saved graph found");return}const ie=JSON.parse(Z);Oe(`[handleLoad] Loading graph with ${ie.nodes?.length} nodes`);const A=ob(ie);if(!A.valid){console.warn("[handleLoad] Graph validation failed:",A.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${A.errors.length} errors`,4e3);const Y=lb(ie);Y.repaired&&(Oe("[handleLoad] Graph repaired:",Y.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${Y.fixes.length} fixes applied`,3e3),Object.assign(ie,Y.graphData))}A.warnings.length>0&&console.warn("[handleLoad] Graph warnings:",A.warnings),await xt();const K=t.getNodes();if(K.length>0){console.error("[handleLoad] Clear did not work! Still have",K.length,"nodes");for(const Y of K)try{await t.removeNode(Y.id)}catch(C){console.error("[handleLoad] Force remove failed:",C)}}if(E.current=!0,U.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of ie.nodes){let H;const ue=Nn.getByLabel(C.label);if(ue){const ce=()=>{if(U.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};H=ue.factory(ce)}H&&(H.id=C.id,typeof H.restore=="function"&&C.data?H.restore(C.data):C.data&&C.data.properties&&H.properties&&Object.assign(H.properties,C.data.properties),await t.addNode(H),await s.translate(H.id,C.position))}const Y=[];for(const C of ie.connections){const H=t.getNode(C.source),ue=t.getNode(C.target);H&&ue&&Y.push(t.addConnection(new Kt.Connection(H,C.sourceOutput,ue,C.targetInput)))}await Promise.all(Y)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const ne=t.getNodes();if(ne.length>0&&s){Oe("[handleLoad] Zooming to fit",ne.length,"nodes...");try{await br.zoomAt(s,ne,{scale:.9})}catch(Y){console.warn("[handleLoad] zoomAt failed:",Y)}}F.current&&(Oe("[handleLoad] Processing graph immediately..."),await F.current(),Oe("[handleLoad] Graph processing complete")),U.current=!1,Oe("[handleLoad] Setting up viewport restoration timer..."),setTimeout(()=>{if(Oe("[handleLoad] Viewport restoration timer fired, areaInstance:",!!s,"area:",!!s?.area),s?.area){const Y=ie.viewport||{x:0,y:0,k:1},C=Y.k||1,H=Y.x||0,ue=Y.y||0;Oe("[handleLoad] Restoring viewport:",{savedX:H,savedY:ue,savedK:C}),Oe("[handleLoad] Current transform before restore:",{...s.area.transform});try{s.area.zoom(C,0,0),s.area.translate(H,ue)}catch(Te){console.warn("[handleLoad] Viewport restore failed:",Te)}Oe("[handleLoad] Transform after restore:",{...s.area.transform});const ce=s.container;if(ce){ce.tabIndex=-1,ce.focus(),document.activeElement&&document.activeElement!==ce&&document.activeElement.tagName!=="BODY"&&document.activeElement.blur();const Te=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(Te,100),setTimeout(Te,500),setTimeout(Te,1e3)}t.getNodes().forEach(Te=>{const be=s.nodeViews.get(Te.id);if(be?.element)try{for(let je=0;je<10;je++)try{be.element.releasePointerCapture(je)}catch{}}catch{}})}},300),Oe("Graph loaded")}catch(Z){console.error("Failed to load graph:",Z),U.current=!1,alert("Failed to load graph")}},Qe=async()=>{if(!t||!s||!c){console.error("[handleLoadExample] Missing instances");return}if(!(t.getNodes().length>0&&!confirm("This will replace your current graph with the starter example. Continue?")))try{const ie=await fetch(xn("/api/examples/starter"));if(!ie.ok)throw new Error(`Failed to fetch example: ${ie.status}`);const A=await ie.json();if(!A.success||!A.graph)throw new Error("Invalid example graph response");localStorage.setItem("saved-graph",JSON.stringify(A.graph)),Oe("[handleLoadExample] Example graph loaded, triggering handleLoad..."),await jn(),window.T2Toast&&window.T2Toast.success("Starter example loaded! Select devices from the dropdowns.")}catch(ie){console.error("[handleLoadExample] Failed:",ie),alert("Failed to load example graph: "+ie.message)}};x.useEffect(()=>{const Z=()=>{Oe("[AutoLoadEvent] Received autoLoadGraph event, calling handleLoad..."),jn()};return document.addEventListener("autoLoadGraph",Z),()=>document.removeEventListener("autoLoadGraph",Z)},[t,s,c]);const xt=async()=>{if(!t){console.warn("[handleClear] No editor instance!");return}try{const Z=t.getConnections(),ie=t.getNodes();Oe(`[handleClear] Removing ${Z.length} connections and ${ie.length} nodes`);for(const K of Z)await t.removeConnection(K.id);for(const K of ie)await t.removeNode(K.id);const A=t.getNodes();Oe(`[handleClear] Complete. Remaining nodes: ${A.length}`),A.length>0&&console.error("[handleClear] Failed to remove all nodes! Remaining:",A.map(K=>K.id))}catch(Z){console.error("Failed to clear graph:",Z)}},sn=()=>{if(!(!t||!s))try{const Z=t.getNodes().map(H=>{const ue=typeof H.toJSON=="function"?H.toJSON():{...H};return H.properties&&(ue.properties=H.properties),{id:H.id,label:H.label,position:s.nodeViews.get(H.id)?.position||{x:0,y:0},data:ue}}),ie=t.getConnections().map(H=>({id:H.id,source:H.source,target:H.target,sourceOutput:H.sourceOutput,targetInput:H.targetInput})),A=s.area?.transform?{x:s.area.transform.x,y:s.area.transform.y,k:s.area.transform.k}:{x:0,y:0,k:1},K={nodes:Z,connections:ie,viewport:A},ne=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),Y=URL.createObjectURL(ne),C=document.createElement("a");C.href=Y,C.download=`graph-${Date.now()}.json`,C.click(),URL.revokeObjectURL(Y),Oe("Graph exported")}catch(Z){console.error("Failed to export graph:",Z)}},An=async Z=>{const ie=ob(Z);if(!ie.valid){console.warn("[handleImport] Graph validation failed:",ie.errors),window.T2Toast&&window.T2Toast.warning(`Graph has issues: ${ie.errors.length} errors`,4e3);const ne=lb(Z);if(ne.repaired)Oe("[handleImport] Graph repaired:",ne.fixes),window.T2Toast&&window.T2Toast.info(`Graph repaired: ${ne.fixes.length} fixes applied`,3e3),Z=ne.graphData;else if(!confirm(`Graph has ${ie.errors.length} errors. Continue anyway?`))return}const A={log:console.log,warn:console.warn,error:console.error};console.log=()=>{},console.warn=()=>{};let K=0;if(console.error=(...ne)=>{K++<10&&A.error(...ne)},A.log("%c IMPORT STARTED (console suppressed)","background: green; color: white; font-size: 16px;"),window.graphLoading=!0,!t||!s||!c){Object.assign(console,A);return}try{if(await xt(),E.current=!0,U.current=!0,s?.area)try{s.area.zoom(.1,0,0),s.area.translate(0,0)}catch{}try{for(const C of Z.nodes){let H;const ue=Nn.getByLabel(C.label);if(!ue){console.warn(`[handleImport] No definition found for node label: "${C.label}"`);continue}if(ue){const ce=()=>{if(U.current||window.graphLoading){s&&s.update("node",C.id);return}s&&s.update("node",C.id),window._t2Process&&window._t2Process()};H=ue.factory(ce)}H&&(H.id=C.id,C.label==="Timeline Color"&&A.log("[DEBUG-IMPORT] Timeline Color restore check:",{hasRestore:typeof H.restore=="function",hasData:!!C.data,dataKeys:C.data?Object.keys(C.data):"N/A",propertiesKeys:C.data?.properties?Object.keys(C.data.properties):"N/A",previewModeValue:C.data?.properties?.previewMode}),typeof H.restore=="function"&&C.data?H.restore(C.data):C.data&&C.data.properties&&H.properties&&Object.assign(H.properties,C.data.properties),await t.addNode(H),await s.translate(H.id,C.position))}const Y=[];for(const C of Z.connections){const H=t.getNode(C.source),ue=t.getNode(C.target);if(H&&ue){const ce=H.outputs?.[C.sourceOutput],Te=ue.inputs?.[C.targetInput];if(!ce){console.warn(`[handleImport] Connection skipped - source output '${C.sourceOutput}' not found on node ${H.label}`);continue}if(!Te){console.warn(`[handleImport] Connection skipped - target input '${C.targetInput}' not found on node ${ue.label}`);continue}Y.push(t.addConnection(new Kt.Connection(H,C.sourceOutput,ue,C.targetInput)))}else console.warn(`[handleImport] Connection skipped - missing node: source=${C.source} (${!!H}), target=${C.target} (${!!ue})`)}await Promise.all(Y)}finally{E.current=!1,s?.updateBackdropCaptures?.()}const ne=t.getNodes();if(ne.length>0&&s)try{await br.zoomAt(s,ne,{scale:.9})}catch{}U.current=!1,setTimeout(async()=>{window.graphLoading=!1,Oe("[handleImport] Graph loading complete - API calls now enabled"),window.dispatchEvent(new CustomEvent("graphLoadComplete")),setTimeout(()=>{if(F.current&&(Oe("[handleImport] Running processImmediate to sync node states"),F.current()),s&&t){const C=t.getNodes();Oe(`[handleImport] Updating ${C.length} nodes for connection visibility`),C.forEach(H=>{s.update("node",H.id)})}setTimeout(()=>{F.current&&(Oe("[handleImport] Running second processImmediate for late-loading data"),F.current())},1500)},500);try{const C=JSON.stringify(Z,null,2);C.length<2e6&&(localStorage.removeItem("saved-graph"),localStorage.setItem("saved-graph",C),Oe("[handleImport] Graph saved to localStorage")),(await fetch(xn("/api/engine/save-active"),{method:"POST",headers:{"Content-Type":"application/json"},body:C})).ok&&Oe("[handleImport] Graph saved to server as last active")}catch(C){console.warn("[handleImport] Failed to save imported graph:",C)}const Y=()=>{window.resetEditorView&&window.resetEditorView()};setTimeout(Y,100),setTimeout(Y,500)},2e3),Object.assign(console,A),console.log("%c IMPORT COMPLETE","background: green; color: white; font-size: 16px;"),Oe("Graph imported successfully. Pan/zoom should work now.")}catch(ne){window.graphLoading=!1,typeof A<"u"&&Object.assign(console,A),console.error("Failed to import graph:",ne),U.current=!1,alert("Failed to import graph: "+ne.message)}};return h.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[h.jsx(QO,{width:De,panelRef:q,dropActive:he,favoriteGroups:nt,onAddFavorite:M,onRemoveFavorite:Q,onCreateNode:fe}),B.length>0&&h.jsxs("div",{style:{position:"absolute",top:"10px",left:`${De+20}px`,zIndex:1e3,display:"flex",alignItems:"center",gap:"8px",background:"rgba(30, 40, 50, 0.95)",padding:"8px 16px",borderRadius:"8px",border:"1px solid #3d6070",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"},children:[h.jsx("button",{onClick:()=>window.exitToMainGraph?.(),style:{background:"#2a4858",border:"1px solid #4a7080",borderRadius:"4px",color:"#8ab",padding:"4px 8px",cursor:"pointer",fontSize:"12px"},title:"Return to main graph",children:" Main"}),B.map((Z,ie)=>h.jsxs(Oa.Fragment,{children:[h.jsx("span",{style:{color:"#556"},children:""}),h.jsxs("span",{style:{color:ie===B.length-1?"#fff":"#8ab",fontWeight:ie===B.length-1?"bold":"normal",fontSize:"13px"},children:[" ",Z.name]})]},ie)),h.jsx("button",{onClick:()=>window.exitSubGraph?.(),style:{background:"#4a5868",border:"1px solid #6a7888",borderRadius:"4px",color:"#cde",padding:"4px 12px",cursor:"pointer",fontSize:"12px",marginLeft:"12px"},title:"Go back to parent graph",children:" Back"})]}),h.jsx("div",{ref:a,className:"rete-editor",style:{width:"100%",height:"100%",marginRight:"320px",marginLeft:`${De}px`}}),h.jsx("div",{ref:w}),(()=>{const Z=g?k.current:w.current;return Z?Wr.createPortal(h.jsx(XO,{onSave:qt,onLoad:jn,onLoadExample:Qe,onClear:xt,onExport:sn,onImport:An,hasUnsavedChanges:At,isMerged:g,onToggleMerged:()=>b(ie=>!ie)}),Z):null})(),h.jsx(KO,{dockSlotRef:k}),h.jsx(JO,{visible:ye.visible,position:ye.position,items:ye.items,onClose:Fe,onSelect:Rt}),h.jsx(WO,{isOpen:J,onClose:()=>v(!1),onSave:()=>{Wt(!1),v(!1)},currentGraphData:T})]})}class hj extends Oa.Component{constructor(t){super(t),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(t){return{hasError:!0}}componentDidCatch(t,r){console.error("[ErrorBoundary] Caught error:",t),console.error("[ErrorBoundary] Error info:",r),this.setState({error:t,errorInfo:r})}handleReload=()=>{window.location.reload()};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?h.jsx("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",backgroundColor:"#1a1a2e",color:"#eee",fontFamily:"system-ui, -apple-system, sans-serif",padding:"20px",textAlign:"center"},children:h.jsxs("div",{style:{backgroundColor:"#252540",borderRadius:"12px",padding:"40px",maxWidth:"500px",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},children:[h.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),h.jsx("h1",{style:{fontSize:"24px",marginBottom:"16px",color:"#ff6b6b"},children:"Something went wrong"}),h.jsx("p",{style:{fontSize:"14px",color:"#aaa",marginBottom:"24px",lineHeight:"1.5"},children:"The editor encountered an error and couldn't continue. This might be caused by a corrupted graph or a plugin issue."}),this.state.error&&h.jsxs("details",{style:{textAlign:"left",backgroundColor:"#1a1a2e",padding:"12px",borderRadius:"8px",marginBottom:"24px",fontSize:"12px",color:"#888"},children:[h.jsx("summary",{style:{cursor:"pointer",color:"#aaa",marginBottom:"8px"},children:"Error Details"}),h.jsxs("pre",{style:{overflow:"auto",maxHeight:"150px",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:[this.state.error.toString(),this.state.errorInfo?.componentStack]})]}),h.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[h.jsx("button",{onClick:this.handleReset,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#3a3a5c",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#4a4a6c",onMouseOut:t=>t.target.style.backgroundColor="#3a3a5c",children:"Try Again"}),h.jsx("button",{onClick:this.handleReload,style:{padding:"12px 24px",fontSize:"14px",backgroundColor:"#4dabf7",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:t=>t.target.style.backgroundColor="#339af0",onMouseOut:t=>t.target.style.backgroundColor="#4dabf7",children:"Reload Page"})]})]})}):this.props.children}}function pj({isLoading:a,progress:t=0,status:r="Initializing...",loadedCount:s=0,totalCount:l=0,error:c=null}){const[d,p]=x.useState(!1),[m,g]=x.useState(a);return x.useEffect(()=>{if(!a&&m){p(!0);const b=setTimeout(()=>{g(!1),p(!1)},500);return()=>clearTimeout(b)}else a&&!m&&g(!0)},[a,m]),m?h.jsxs("div",{className:`loading-overlay ${d?"fade-out":""}`,children:[h.jsx("div",{className:"loading-logo",children:""}),h.jsx("div",{className:"loading-title",children:"T2 AutoTron"}),h.jsx("div",{className:"loading-subtitle",children:"Visual Automation Editor"}),h.jsx("div",{className:"loading-progress-container",children:h.jsx("div",{className:"loading-progress-bar",children:h.jsx("div",{className:"loading-progress-fill",style:{width:`${Math.min(100,t)}%`}})})}),h.jsx("div",{className:"loading-status",children:r}),l>0&&h.jsxs("div",{className:"loading-count",children:[s," / ",l," plugins loaded"]}),c&&h.jsxs("div",{className:"loading-error",children:[" ",c]})]}):null}function mj({updateInfo:a,onClose:t,onApplyUpdate:r}){const[s,l]=x.useState(!1),[c,d]=x.useState("");if(!a||!a.hasUpdate)return null;const p=async()=>{l(!0),d("Saving current graph...");try{window.triggerGraphSave&&(await window.triggerGraphSave(),d("Graph saved! Starting update..."))}catch(g){console.warn("Pre-update graph save failed:",g)}sessionStorage.setItem("justUpdated","true"),sessionStorage.setItem("autoLoadAfterUpdate","true");try{const b=await(await fn("/api/update/apply",{method:"POST",headers:{"Content-Type":"application/json"}})).json();d(b.message||"Updating... The app will restart shortly."),setTimeout(()=>{d("Update applied! Reloading page..."),setTimeout(()=>{const w=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(w,2e3))};w()},3e3)},2e3)}catch(g){g.message.includes("fetch")||g.message.includes("network")?(d("Server restarting... Reloading page..."),setTimeout(()=>{const b=()=>{fn("/api/health",{method:"GET"}).then(()=>window.location.reload()).catch(()=>setTimeout(b,2e3))};b()},3e3)):(d(`Update failed: ${g.message}`),l(!1))}},m=()=>{sessionStorage.setItem("updateSkipped",a.newVersion),t()};return h.jsx("div",{className:"update-modal-overlay",children:h.jsxs("div",{className:"update-modal",children:[h.jsxs("div",{className:"update-modal-header",children:[h.jsx("span",{className:"update-icon",children:""}),h.jsx("h2",{children:"Update Available!"})]}),h.jsxs("div",{className:"update-modal-version",children:[h.jsx("span",{className:"version-current",children:a.currentVersion}),h.jsx("span",{className:"version-arrow",children:""}),h.jsx("span",{className:"version-new",children:a.newVersion})]}),h.jsxs("div",{className:"update-modal-content",children:[h.jsx("h3",{children:"What's New:"}),h.jsx("div",{className:"changelog-content",children:h.jsx("pre",{children:a.changelog||"No changelog available."})})]}),c&&h.jsxs("div",{className:"update-status",children:[h.jsx("span",{className:"status-spinner",children:""}),c]}),h.jsx("div",{className:"update-modal-actions",children:s?h.jsx("div",{className:"updating-message",children:"Please wait while the update is being applied..."}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"update-btn update-btn-primary",onClick:p,children:"Update Now"}),h.jsx("button",{className:"update-btn update-btn-secondary",onClick:m,children:"Later"})]})})]})})}const gj=()=>{try{localStorage.getItem("t2-performance-mode")==="true"&&document.body.classList.add("performance-mode")}catch(a){console.warn("Failed to apply performance mode:",a)}};gj();window.setPerformanceMode=a=>{a?(document.body.classList.add("performance-mode"),localStorage.setItem("t2-performance-mode","true")):(document.body.classList.remove("performance-mode"),localStorage.setItem("t2-performance-mode","false"))};window.getPerformanceMode=()=>document.body.classList.contains("performance-mode");const Kw=()=>{const a=r=>{const s=parseInt(r.slice(1,3),16),l=parseInt(r.slice(3,5),16),c=parseInt(r.slice(5,7),16);return`${s}, ${l}, ${c}`},t={"Home Assistant":"ha",Weather:"weather",Logic:"logic","Timer/Event":"timer",Color:"color",Utility:"utility",Inputs:"inputs",CC_Control_Nodes:"cc",Other:"other"};try{const r=localStorage.getItem("t2category-overrides");if(r){const s=JSON.parse(r),l=document.documentElement;for(const[c,d]of Object.entries(s)){const p=t[c];p&&(d.accent&&(l.style.setProperty(`--node-${p}-color`,d.accent),l.style.setProperty(`--node-${p}-color-rgb`,a(d.accent))),d.background&&l.style.setProperty(`--node-${p}-bg`,d.background))}}}catch(r){console.warn("Failed to apply stored category colors:",r)}},Qw=()=>{const a=c=>{const d=parseInt(c.slice(1,3),16),p=parseInt(c.slice(3,5),16),m=parseInt(c.slice(5,7),16);return`${d}, ${p}, ${m}`},t=(c,d=15)=>{const p=parseInt(c.slice(1),16),m=Math.max(0,(p>>16)-Math.round(255*d/100)),g=Math.max(0,(p>>8&255)-Math.round(255*d/100)),b=Math.max(0,(p&255)-Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},r=(c,d=20)=>{const p=parseInt(c.slice(1),16),m=Math.min(255,(p>>16)+Math.round(255*d/100)),g=Math.min(255,(p>>8&255)+Math.round(255*d/100)),b=Math.min(255,(p&255)+Math.round(255*d/100));return`#${(16777216|m<<16|g<<8|b).toString(16).slice(1)}`},s={Boolean:"boolean",Number:"number",String:"string","HSV Info":"hsv","Object/Any":"object","Light Info":"light"},l={Boolean:"#10b981",Number:"#3b82f6",String:"#f59e0b","HSV Info":"#8b5cf6","Object/Any":"#06b6d4","Light Info":"#eab308"};try{const c=localStorage.getItem("t2socket-colors"),d=c?JSON.parse(c):{},p=document.documentElement;for(const[m,g]of Object.entries(s)){const b=d[m]?.color||l[m];b&&(p.style.setProperty(`--socket-${g}-color`,b),p.style.setProperty(`--socket-${g}-dark`,t(b)),p.style.setProperty(`--socket-${g}-border`,r(b)),p.style.setProperty(`--socket-${g}-rgb`,a(b)))}}catch(c){console.warn("Failed to apply stored socket colors:",c)}};Kw();Qw();Ww();function Ww(){const a=t=>{const r=parseInt(t.slice(1,3),16),s=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16);return`${r}, ${s}, ${l}`};try{const t=localStorage.getItem("t2theme-overrides");if(t){const r=JSON.parse(t),s=document.documentElement;Object.entries(r).forEach(([l,c])=>{l==="borderOpacity"?s.style.setProperty("--node-border-opacity",c/100):typeof c=="string"&&c.startsWith("#")&&(s.style.setProperty(`--theme-${l}`,c),s.style.setProperty(`--theme-${l}-rgb`,a(c)))})}}catch(t){console.warn("Failed to apply stored theme:",t)}}window.applyCategoryColors=Kw;window.applySocketColors=Qw;window.applyTheme=Ww;const qf=new Map,Yf=new Map;function yj(){const[a,t]=x.useState(ve.connected),[r,s]=x.useState({connected:!1,wsConnected:!1,deviceCount:0}),[l,c]=x.useState([]),[d,p]=x.useState([]),[m,g]=x.useState(()=>parseInt(localStorage.getItem("panelHeight"))||150),[b,w]=x.useState(()=>parseInt(localStorage.getItem("panelFontSize"))||11),[k,E]=x.useState({isLoading:!0,progress:0,status:"Starting...",loadedCount:0,totalCount:0,error:null}),[D,F]=x.useState(null),[U,te]=x.useState(0),[ee,L]=x.useState(()=>localStorage.getItem("eventLogFilter")||"all"),[G,ge]=x.useState([]),Se=x.useRef(null),B=x.useRef(null),pe=x.useRef({authenticated:!1,invalidPinNotified:!1}),oe=100,ye=ip();x.useEffect(()=>{const v=setInterval(()=>{te(T=>T+1)},3e4);return()=>clearInterval(v)},[]);const Ie=x.useCallback(()=>{const v=window._t2Editor;if(!v)return;const _=v.getNodes().filter(M=>M.label==="Backdrop"||M.constructor?.name==="BackdropNode"||M.properties?.width!==void 0&&M.properties?.height!==void 0&&M.properties?.title!==void 0).map(M=>({id:M.id,title:M.properties?.title||"Group",color:M.properties?.customColor||window.BackdropColorPalette?.[M.properties?.colorIndex]?.border||"#888"})).sort((M,Q)=>M.title.localeCompare(Q.title));ge(_)},[]);x.useEffect(()=>{const v=()=>{setTimeout(Ie,200)};window.addEventListener("graphLoadComplete",v),window.refreshBackdropGroups=Ie;const T=setTimeout(Ie,500);return()=>{window.removeEventListener("graphLoadComplete",v),delete window.refreshBackdropGroups,clearTimeout(T)}},[Ie]),x.useEffect(()=>Zw(T=>{E(T),!T.isLoading&&T.progress===100&&T.failedPlugins?.length>0&&ye.warning(`Loaded ${T.loadedCount} plugins (${T.failedPlugins.length} failed)`),T.error&&ye.error(`Plugin loading failed: ${T.error}`)}),[ye]),x.useEffect(()=>{function v(){t(!0),ye.success("Connected to server"),De("system","Socket connected to server"),Yf.clear();const Qe=ys();Qe&&ve.emit("authenticate",Qe),ve.emit("editor-active"),ve.emit("request-ha-status")}function T(){t(!1),s({connected:!1,wsConnected:!1,deviceCount:0}),pe.current.authenticated=!1,ye.warning("Disconnected from server - reconnecting..."),De("system","Socket disconnected from server")}function _(Qe){De("system",`Socket reconnected after ${Qe} attempt(s)`)}function M(Qe){Qe%5===0&&De("system",`Reconnection attempt ${Qe}...`)}function Q(Qe){De("system","Reconnection failed, retrying...")}function fe(Qe){s(Qe)}function xe(){pe.current.authenticated||(pe.current.authenticated=!0,pe.current.invalidPinNotified=!1,ye.success("Authenticated"))}function $e(Qe){pe.current.authenticated=!1;const xt=(Qe?.error||"").toString();if(xt.toLowerCase().includes("invalid pin")){pe.current.invalidPinNotified||(pe.current.invalidPinNotified=!0,ye.error("Stored PIN is invalid. Update it in Settings  Security."));return}const sn=xt?`Authentication failed: ${xt}`:"Authentication failed";ye.error(sn)}function Fe(){if(!ve.connected)return;pe.current.invalidPinNotified=!1;const Qe=ys();Qe&&ve.emit("authenticate",Qe)}function Rt(Qe){const{id:xt,state:sn,on:An,name:Z,vendor:ie}=Qe;if(!xt)return;const A=Yf.get(xt),K=An!==void 0?An:sn==="on"||sn==="playing"||sn==="open",ne=Z||Qe.friendly_name||Qe.attributes?.friendly_name||xt.replace("ha_","").replace("kasa_","").replace("hue_","").replace(/\./g," ").replace(/_/g," ");if(A&&A.on===K)return;Yf.set(xt,{on:K,state:sn});const Y=qf.get(xt),C=K?"ON":"OFF";let H=ie||"External";ie||(xt.startsWith("ha_")?H="HA":xt.startsWith("hue_")?H="Hue":xt.startsWith("kasa_")&&(H="Kasa")),Y&&Date.now()-Y.timestamp<5e3?(De("device",`${ne}  ${C}`,{source:"app",triggeredBy:Y.nodeTitle,nodeId:Y.nodeId}),qf.delete(xt)):De("trigger",`${ne}  ${C}`,{source:H})}function qt(Qe){}function At(Qe){const{nodeId:xt,nodeLabel:sn,result:An}=Qe;De("node",`${sn||xt} executed`,{...An,nodeId:xt})}function Wt(Qe){Array.isArray(Qe)&&p(Qe.slice(0,20))}function lt(Qe){const{type:xt,name:sn,value:An}=Qe;De("trigger",`${xt}: ${sn}`,An)}function $t(Qe){if(Qe.isAddon||window.location.pathname.includes("/api/hassio/ingress/")){console.log("[Update] Ignoring update notification in HA add-on environment");return}if(sessionStorage.getItem("justUpdated")==="true"){sessionStorage.removeItem("justUpdated");return}sessionStorage.getItem("updateSkipped")!==Qe.newVersion&&ye.info(` Update available: ${Qe.currentVersion}  ${Qe.newVersion}`,{duration:0,actionLabel:"View Details",action:()=>F(Qe)})}ve.on("connect",v),ve.on("disconnect",T),ve.on("reconnect",_),ve.on("reconnect_attempt",M),ve.on("reconnect_error",Q),ve.on("auth-success",xe),ve.on("auth-failed",$e),ve.on("ha-connection-status",fe),ve.on("device-state-update",Rt),ve.on("device_state_change",qt),ve.on("node_executed",At),ve.on("scheduled_events",Wt),ve.on("trigger_event",lt),ve.on("update-available",$t),window.addEventListener("t2-pin-changed",Fe);const wn=()=>{ve.connected&&ve.emit("editor-inactive")};window.addEventListener("beforeunload",wn),VT();const jn=setInterval(()=>{ve.connected&&ve.emit("editor-heartbeat")},3e4);return()=>{ve.connected&&ve.emit("editor-inactive"),clearInterval(jn),ve.off("connect",v),ve.off("disconnect",T),ve.off("reconnect",_),ve.off("reconnect_attempt",M),ve.off("reconnect_error",Q),ve.off("auth-success",xe),ve.off("auth-failed",$e),ve.off("ha-connection-status",fe),ve.off("device-state-update",Rt),ve.off("device_state_change",qt),ve.off("node_executed",At),ve.off("scheduled_events",Wt),ve.off("trigger_event",lt),ve.off("update-available",$t),window.removeEventListener("t2-pin-changed",Fe),window.removeEventListener("beforeunload",wn),GT()}},[]);const De=(v,T,_=null)=>{const M=new Date().toLocaleTimeString();c(Q=>[{timestamp:M,type:v,message:T,details:_},...Q].slice(0,oe))},et=x.useRef({}),nt=x.useCallback((v,T)=>{const _=T.map(xe=>({...xe,nodeId:v}));et.current[v]=_;const M=[];Object.values(et.current).forEach(xe=>{Array.isArray(xe)&&M.push(...xe)});const Q=new Date,fe=M.filter(xe=>xe.time&&new Date(xe.time)>Q).sort((xe,$e)=>new Date(xe.time)-new Date($e.time)).slice(0,20);p(fe)},[]),Ke=x.useCallback(v=>{delete et.current[v],nt(v,[])},[nt]),q=x.useCallback(()=>d||[],[d]);x.useEffect(()=>(window.addEventLog=De,window.setUpcomingEvents=p,window.getUpcomingEvents=q,window.registerScheduledEvents=nt,window.unregisterScheduledEvents=Ke,window.T2Toast=ye,window.registerPendingCommand=(v,T,_,M)=>{qf.set(v,{nodeTitle:T,action:_,nodeId:M,timestamp:Date.now()})},()=>{delete window.addEventLog,delete window.setUpcomingEvents,delete window.getUpcomingEvents,delete window.registerScheduledEvents,delete window.unregisterScheduledEvents,delete window.registerPendingCommand,delete window.T2Toast}),[nt,Ke,q,ye]);const he=v=>{if(!v)return"";const T=new Date(v),M=T-new Date,Q=Math.floor(M/6e4),fe=Math.floor(Q/60),xe=Math.floor(fe/24);let $e="";return xe>0?$e=`${xe}d ${fe%24}h`:fe>0?$e=`${fe}h ${Q%60}m`:Q>0?$e=`${Q}m`:$e="<1m",`${T.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} (${$e})`},me=x.useCallback(async v=>{if(!v)return;const T=window._t2Area,_=window._t2Editor;if(!T||!_){console.warn("[focusNode] Editor not ready");return}const M=_.getNode(v);if(!M){console.warn("[focusNode] Node not found:",v);return}try{const{AreaExtensions:Q}=await ev(async()=>{const{AreaExtensions:fe}=await Promise.resolve().then(()=>Tv);return{AreaExtensions:fe}},void 0,import.meta.url);await Q.zoomAt(T,[M],{scale:1})}catch(Q){console.warn("[focusNode] Failed to zoom to node:",Q)}},[]),Me=x.useCallback(async v=>{if(!v)return;const T=window._t2Area,_=window._t2Editor;if(!T||!_){console.warn("[focusBackdrop] Editor not ready");return}const M=_.getNode(v);if(!M){console.warn("[focusBackdrop] Backdrop not found:",v);return}try{const Q=T.nodeViews.get(v);if(!Q){console.warn("[focusBackdrop] Node view not found");return}const fe=Q.position,xe=M.properties?.width||M.width||400,$e=M.properties?.height||M.height||300,Fe=fe.x+xe/2,Rt=fe.y+$e/2,qt=T.container,At=qt.clientWidth,Wt=qt.clientHeight,lt=At*.85/xe,$t=Wt*.85/$e,wn=Math.min(lt,$t,1.5),jn=At/2-Fe*wn,Qe=Wt/2-Rt*wn;await T.area.zoom(wn,0,0),await T.area.translate(jn,Qe)}catch(Q){console.warn("[focusBackdrop] Failed to zoom to backdrop:",Q)}},[]),J=x.useCallback(async()=>{const v=window._t2Area,T=window._t2Editor;if(!v||!T){console.warn("[zoomExtents] Editor not ready");return}const _=T.getNodes();if(_.length===0){console.warn("[zoomExtents] No nodes in graph");return}try{const{AreaExtensions:M}=await ev(async()=>{const{AreaExtensions:Q}=await Promise.resolve().then(()=>Tv);return{AreaExtensions:Q}},void 0,import.meta.url);await M.zoomAt(v,_,{scale:.7})}catch(M){console.warn("[zoomExtents] Failed to zoom:",M)}},[]);return h.jsxs("div",{className:"app-container",children:[D&&D.hasUpdate&&h.jsx(mj,{updateInfo:D,onClose:()=>F(null)}),h.jsx(pj,{isLoading:k.isLoading,progress:k.progress,status:k.status,loadedCount:k.loadedCount,totalCount:k.totalCount,error:k.error}),h.jsx("div",{className:"editor-wrapper",children:h.jsx(fj,{})}),h.jsx("div",{className:"resize-handle",ref:B,onMouseDown:v=>{v.preventDefault();const T=v.clientY,_=m,M=fe=>{const xe=T-fe.clientY,$e=Math.max(80,Math.min(400,_+xe));g($e),localStorage.setItem("panelHeight",$e)},Q=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Q)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",Q)},children:h.jsx("div",{className:"resize-handle-grip"})}),h.jsxs("div",{className:"bottom-panels",style:{height:m,fontSize:b},children:[h.jsxs("div",{className:"panel event-log-panel",children:[h.jsxs("div",{className:"panel-header",children:[h.jsx("span",{className:"panel-title",children:"Event Log"}),h.jsxs("div",{className:"group-nav-buttons",children:[h.jsx("button",{className:"group-nav-btn group-nav-all",onClick:J,title:"Zoom to fit all nodes (F key)",children:" All"}),G.map(v=>h.jsx("button",{className:"group-nav-btn",style:{borderColor:v.color},onClick:()=>Me(v.id),title:`Zoom to "${v.title}" group`,children:v.title},v.id))]}),h.jsxs("div",{className:"panel-controls",children:[h.jsxs("div",{className:"filter-buttons",children:[h.jsx("button",{className:`filter-btn ${ee==="all"?"active":""}`,onClick:()=>{L("all"),localStorage.setItem("eventLogFilter","all")},children:"All"}),h.jsx("button",{className:`filter-btn ${ee==="app"?"active":""}`,onClick:()=>{L("app"),localStorage.setItem("eventLogFilter","app")},children:"App"}),h.jsx("button",{className:`filter-btn ${ee==="ha"?"active":""}`,onClick:()=>{L("ha"),localStorage.setItem("eventLogFilter","ha")},children:"HA"})]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.max(8,b-1);w(v),localStorage.setItem("panelFontSize",v)},children:"A-"}),h.jsxs("span",{className:"font-size-label",children:[b,"px"]}),h.jsx("button",{className:"font-size-btn",onClick:()=>{const v=Math.min(16,b+1);w(v),localStorage.setItem("panelFontSize",v)},children:"A+"}),h.jsx("button",{className:"panel-clear-btn",onClick:()=>c([]),children:"Clear"})]})]}),h.jsx("div",{className:"panel-content",ref:Se,children:l.length===0?h.jsx("div",{className:"empty-message",children:"No events yet..."}):l.filter(v=>ee==="all"?!0:ee==="app"?v.details?.triggeredBy||v.details?.source==="app"||v.type==="node"||v.type==="device"||v.type==="system":ee==="ha"?v.type==="trigger"||v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy:!0).map((v,T)=>h.jsxs("div",{className:`log-entry log-${v.type}${v.details?.nodeId?" clickable":""}`,title:v.details?.nodeId?"Click to jump to this node":v.details?.triggeredBy?`Triggered by: ${v.details.triggeredBy}`:v.details?.source&&v.details.source!=="app"?`Triggered externally via ${v.details.source}`:"",onClick:()=>v.details?.nodeId&&me(v.details.nodeId),style:v.details?.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"log-time",children:v.timestamp}),h.jsx("span",{className:`log-type-badge ${v.type}`,children:v.type==="trigger"?"external":v.type}),h.jsx("span",{className:"log-message",children:v.message}),v.details?.triggeredBy&&h.jsxs("span",{className:"log-source app-source",children:["via ",v.details.triggeredBy]}),v.details?.source&&v.details.source!=="app"&&!v.details?.triggeredBy&&h.jsxs("span",{className:"log-source external-source",children:["via ",v.details.source]})]},T))})]}),h.jsxs("div",{className:"panel upcoming-events-panel",children:[h.jsx("div",{className:"panel-header",children:h.jsx("span",{className:"panel-title",children:"Upcoming Events"})}),h.jsx("div",{className:"panel-content",children:d.length===0?h.jsx("div",{className:"empty-message",children:"No scheduled events..."}):d.map((v,T)=>h.jsxs("div",{className:`event-entry event-${v.action||"unknown"}${v.nodeId?" clickable":""}`,onClick:()=>v.nodeId&&me(v.nodeId),title:v.nodeId?"Click to jump to this node":"",style:v.nodeId?{cursor:"pointer"}:{},children:[h.jsx("span",{className:"event-time",children:he(v.time)}),h.jsx("span",{className:`event-action ${v.action}`,children:v.action||"event"}),h.jsx("span",{className:"event-device",children:v.deviceName||v.device||"Unknown"})]},T))})]})]})]})}function vj(){return h.jsx(hj,{children:h.jsxs(FO,{children:[h.jsx(ZO,{}),h.jsx(yj,{})]})})}typeof window.api<"u"&&console.log("T2AutoTron running in Electron mode");db.createRoot(document.getElementById("root")).render(h.jsx(x.StrictMode,{children:h.jsx(vj,{})}));
